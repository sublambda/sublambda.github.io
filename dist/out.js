"use strict";(()=>{var t4=Object.create;var Ly=Object.defineProperty;var n4=Object.getOwnPropertyDescriptor;var i4=Object.getOwnPropertyNames;var r4=Object.getPrototypeOf,s4=Object.prototype.hasOwnProperty;var Li=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var yt=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),fl=(i,e)=>{for(var t in e)Ly(i,t,{get:e[t],enumerable:!0})},o4=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of i4(e))!s4.call(i,o)&&o!==t&&Ly(i,o,{get:()=>e[o],enumerable:!(n=n4(e,o))||n.enumerable});return i};var Ns=(i,e,t)=>(t=i!=null?t4(r4(i)):{},o4(e||!i||!i.__esModule?Ly(t,"default",{value:i,enumerable:!0}):t,i));var jB=yt((Eg,JB)=>{(function(i,e){typeof Eg=="object"&&typeof JB<"u"?e(Eg):typeof define=="function"&&define.amd?define(["exports"],e):e((i=i||self).TWEEN={})})(Eg,function(i){"use strict";function e(L){var N=h.indexOf(L);-1<N&&h.splice(N,1),h.push(L),b=0,d&&!f&&(a=m(v),f=!0)}function t(L){for(var N=0;N<h.length;N++)if(L===h[N])return h[N];return null}function n(){return f}function o(){return w}var a,l=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:this||(i!==void 0?i:{}),c=l.requestAnimationFrame||function(L){return l.setTimeout(L,50/3)},A=l.cancelAnimationFrame||function(L){return l.clearTimeout(L)},u=function(){if(typeof process>"u"||process.hrtime===void 0||process.versions&&process.versions.electron!==void 0){if(l.performance!==void 0&&l.performance.now!==void 0)return l.performance.now.bind(l.performance);var L=l.performance&&l.performance.timing&&l.performance.timing.navigationStart?l.performance.timing.navigationStart:Date.now();return function(){return Date.now()-L}}return function(){var N=process.hrtime();return 1e3*N[0]+N[1]/1e6}}(),h=[],f=!1,d=!1,p=[],m=c,b=0,g=120,w=!0,I=function(L){var N=h.indexOf(L);N!==-1&&h.splice(N,1),h.length===0&&(A(a),f=!1)},v=function L(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:u(),V=1<arguments.length?arguments[1]:void 0;if(g<=b&&w)return f=!1,b=0,A(a),!1;d&&f?a=m(L):function(){for(var ae=0;ae<p.length;ae++)p[ae]()}(),h.length||b++;for(var q=0,ne=h.length;q<ne;)h[q++].update(N,V),ne>h.length&&q--,ne=h.length;return!0},E={},S={Linear:{None:function(L){return L}},Quadratic:{In:function(L){return Math.pow(L,2)},Out:function(L){return L*(2-L)},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,2):-.5*(--L*(L-2)-1)}},Cubic:{In:function(L){return Math.pow(L,3)},Out:function(L){return--L*L*L+1},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,3):.5*((L-=2)*L*L+2)}},Quartic:{In:function(L){return Math.pow(L,4)},Out:function(L){return 1- --L*L*L*L},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,4):-.5*((L-=2)*L*L*L-2)}},Quintic:{In:function(L){return Math.pow(L,5)},Out:function(L){return--L*L*L*L*L+1},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,5):.5*((L-=2)*L*L*L*L+2)}},Sinusoidal:{In:function(L){return 1-Math.cos(L*Math.PI/2)},Out:function(L){return Math.sin(L*Math.PI/2)},InOut:function(L){return .5*(1-Math.cos(Math.PI*L))}},Exponential:{In:function(L){return L===0?0:Math.pow(1024,L-1)},Out:function(L){return L===1?1:1-Math.pow(2,-10*L)},InOut:function(L){return L===0?0:L===1?1:(L*=2)<1?.5*Math.pow(1024,L-1):.5*(2-Math.pow(2,-10*(L-1)))}},Circular:{In:function(L){return 1-Math.sqrt(1-L*L)},Out:function(L){return Math.sqrt(1- --L*L)},InOut:function(L){return(L*=2)<1?-.5*(Math.sqrt(1-L*L)-1):.5*(Math.sqrt(1-(L-=2)*L)+1)}},Elastic:{In:function(L){return L===0?0:L===1?1:-Math.pow(2,10*(L-1))*Math.sin(5*(L-1.1)*Math.PI)},Out:function(L){return L===0?0:L===1?1:Math.pow(2,-10*L)*Math.sin(5*(L-.1)*Math.PI)+1},InOut:function(L){return L===0?0:L===1?1:(L*=2)<1?-.5*Math.pow(2,10*(L-1))*Math.sin(5*(L-1.1)*Math.PI):.5*Math.pow(2,-10*(L-1))*Math.sin(5*(L-1.1)*Math.PI)+1}},Back:{In:function(L){return L*L*(2.70158*L-1.70158)},Out:function(L){return--L*L*(2.70158*L+1.70158)+1},InOut:function(L){var N=2.5949095;return(L*=2)<1?L*L*((1+N)*L-N)*.5:.5*((L-=2)*L*((1+N)*L+N)+2)}},Bounce:{In:function(L){return 1-S.Bounce.Out(1-L)},Out:function(L){var N=2.75,V=7.5625;return L<1/N?V*L*L:L<2/N?V*(L-=1.5/N)*L+.75:L<2.5/N?V*(L-=2.25/N)*L+.9375:V*(L-=2.625/N)*L+.984375},InOut:function(L){return L<.5?.5*S.Bounce.In(2*L):.5*S.Bounce.Out(2*L-1)+.5}},Stepped:{steps:function(L){return function(N){return(N*L|0)/L}}}};function C(L){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(L)}function M(L,N){if(!(L instanceof N))throw new TypeError("Cannot call a class as a function")}function D(L,N){for(var V=0;V<N.length;V++){var q=N[V];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,q.key,q)}}function T(L,N,V){return N&&D(L.prototype,N),V&&D(L,V),L}function B(L,N){var V=Object.keys(L);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(L);N&&(q=q.filter(function(ne){return Object.getOwnPropertyDescriptor(L,ne).enumerable})),V.push.apply(V,q)}return V}function R(L){for(var N=1;N<arguments.length;N++){var V=arguments[N]!=null?arguments[N]:{};N%2?B(Object(V),!0).forEach(function(q){var ne,ae,J;ne=L,J=V[ae=q],ae in ne?Object.defineProperty(ne,ae,{value:J,enumerable:!0,configurable:!0,writable:!0}):ne[ae]=J}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(V)):B(Object(V)).forEach(function(q){Object.defineProperty(L,q,Object.getOwnPropertyDescriptor(V,q))})}return L}function P(L){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(L)}function _(L,N){return(_=Object.setPrototypeOf||function(V,q){return V.__proto__=q,V})(L,N)}function Q(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function W(L,N){return!N||typeof N!="object"&&typeof N!="function"?Q(L):N}function U(L,N){return function(V){if(Array.isArray(V))return V}(L)||function(V,q){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]"){var ne=[],ae=!0,J=!1,ce=void 0;try{for(var $,ue=V[Symbol.iterator]();!(ae=($=ue.next()).done)&&(ne.push($.value),!q||ne.length!==q);ae=!0);}catch(xe){J=!0,ce=xe}finally{try{ae||ue.return==null||ue.return()}finally{if(J)throw ce}}return ne}}(L,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var H=50/3,O="_chainedTweens",F="Callback",z="update",k="complete",X="start",te="repeat",ie="reverse",re="restart",se="STRING_PROP",oe=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function le(L){if(L&&L.nodeType||L===void 0||C(L)!=="object")return L;if(Array.isArray(L))return[].concat(L);if(C(L)!=="object")return L;var N={};for(var V in L)N[V]=le(L[V]);return N}var be=function(L){return isNaN(+L)||(L[0]==="+"||L[0]==="-")&&L[1]==="="||L===""||L===" "},De=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,pe=function(L,N){var V,q,ne;N.length===3&&(N=(V=N[0])+V+(q=N[1])+q+(ne=N[2])+ne);var ae=parseInt(N,16);return"rgb("+(V=ae>>16&255)+", "+(q=ae>>8&255)+", "+(ne=255&ae)+")"};function K(L){if(L&&L.splice&&L.isString||typeof L!="string"||L.charAt(1)==="=")return L;var N=L.replace(De,pe).match(oe).map(function(V){return be(V)?V:+V});return N.isString=!0,N}function we(L,N,V,q){var ne=V[L],ae=q[L];if(ne===ae)return!0;if(Array.isArray(ne)&&Array.isArray(ae)&&ne.length===ae.length)for(var J=0,ce=ae.length;J<ce;J++){var $=ne[J],ue=ae[J];$===ue||typeof $=="number"&&typeof ue=="number"||we(J,N[L],ne,ae)}if(!(typeof ne=="number"&&typeof ae=="number"||ne&&ne.splice&&ne.isString&&ae&&ae.splice&&ae.isString)){if(typeof ne=="string"&&Array.isArray(ae)){var xe=K(ne),Ge=ae.map(K);return V[L]=xe,q[L]=Ge,!0}if(typeof ne=="string"||typeof ae=="string"){var ze=Array.isArray(ne)&&ne[0]===se?ne:K(ne),Ze=Array.isArray(ae)&&ae[0]===se?ae:K(ae);if(ze===void 0)return;for(var Ke=1;Ke<ze.length;)ze[Ke]===Ze[Ke]&&typeof ze[Ke-1]=="string"?(ze.splice(Ke-1,2,ze[Ke-1]+ze[Ke]),Ze.splice(Ke-1,2,Ze[Ke-1]+Ze[Ke])):Ke++;return ze[Ke=0]===se&&ze.shift(),Ze[0]===se&&Ze.shift(),V[L]=ze,q[L]=Ze,!0}if(C(ne)==="object"&&C(ae)==="object"){if(Array.isArray(ne)&&!ne.isString)return ne.map(function(gt,rt){return we(rt,N[L],ne,ae)});for(var ot in ae)we(ot,N[L],ne,ae);return!0}}return!1}var me="rgba(",fe=function(L,N,V){var q=2<arguments.length&&V!==void 0?V:"rgb(";return typeof L[N]=="number"&&(L[N-1]===q||L[N-3]===q||L[N-5]===q)};function de(L,N,V,q,ne,ae,J){var ce=J?V:V[L],$=J?q:q[L];if($===void 0)return ce;if(ce===void 0||typeof ce=="string"||ce===$)return $;if(C(ce)==="object"&&C($)==="object"){if(!ce||!$)return N[L];if(C(ce)==="object"&&ce&&ce.isString&&$&&$.splice&&$.isString){for(var ue="",xe=0,Ge=ce.length;xe<Ge;xe++)if(ce[xe]!==$[xe]||typeof ce[xe]!="number"||typeof $[xe]=="number"){var ze=typeof ce[xe]=="number"&&typeof $[xe]=="string"&&$[xe][1]==="=",Ze=typeof ce[xe]!="number"?ce[xe]:ze?ce[xe]+parseFloat($[xe][0]+$[xe].substr(2))*ne:ce[xe]+($[xe]-ce[xe])*ne;(fe(ce,xe)||fe(ce,xe,me))&&(Ze|=0),ue+=Ze,ze&&ae===1&&(ce[xe]=ce[xe]+parseFloat($[xe][0]+$[xe].substr(2)))}else ue+=ce[xe];return J||(N[L]=ue),ue}if(Array.isArray(ce)&&ce[0]!==se)for(var Ke=0,ot=ce.length;Ke<ot;Ke++)ce[Ke]!==$[Ke]&&typeof N[L]!="string"&&de(Ke,N[L],ce,$,ne,ae);else if(C(ce)==="object"&&ce&&!ce.isString)for(var gt in ce)ce[gt]!==$[gt]&&de(gt,N[L],ce,$,ne,ae)}else if(typeof ce=="number"){var rt=typeof $=="string";N[L]=rt?ce+parseFloat($[0]+$.substr(2))*ne:ce+($-ce)*ne,rt&&ae===1&&(V[L]=N[L])}else typeof $=="function"&&(N[L]=$(ne));return N[L]}function Ne(L,N){var V=L[N],q=N.replace(Ie,"").split(Pe),ne=q.length-1,ae=Array.isArray(L),J=C(L)==="object"&&!ae;return J?(L[N]=null,delete L[N]):ae&&L.splice(N,1),q.reduce(function(ce,$,ue){ae&&$!=="."&&$!=="["&&($*=1);var xe=q[ue+1]==="[";if($==="."||$==="[")return $==="."?ae=!(J=!0):$==="["&&(ae=!(J=!1)),ce;if(ce[$]===void 0){if(ae||J)return ce[$]=ue===ne?V:ae||xe?[]:J?{}:null,J=ae=!1,ce[$]}else if(ce[$]!==void 0)return ue===ne&&(ce[$]=V),ce[$];return ce},L)}function ve(L){if(C(L)==="object"&&L){for(var N in L)if(N.indexOf(".")!==-1||N.indexOf("[")!==-1)Ne(L,N);else if(C(L[N])==="object"&&L[N]){var V=L[N];for(var q in V)if(q.indexOf(".")!==-1||q.indexOf("[")!==-1)Ne(V,q);else if(C(V[q])==="object"&&V[q]){var ne=V[q];for(var ae in ne)ae.indexOf(".")===-1&&ae.indexOf("[")===-1||Ne(ne,ae)}}}return L}var Se,Pe=/([.[])/g,Ie=/\]/g,We=Object.freeze({__proto__:null,FRAME_MS:H,TOO_LONG_FRAME_MS:250,CHAINED_TWEENS:O,EVENT_CALLBACK:F,EVENT_UPDATE:z,EVENT_COMPLETE:k,EVENT_START:X,EVENT_REPEAT:te,EVENT_REVERSE:ie,EVENT_PAUSE:"pause",EVENT_PLAY:"play",EVENT_RESTART:re,EVENT_STOP:"stop",EVENT_SEEK:"seek",STRING_PROP:se,NUM_REGEX:oe,deepCopy:le,decomposeString:K,decompose:we,RGB:"rgb(",RGBA:me,isRGBColor:fe,recompose:de,SET_NESTED:ve}),j={Linear:function(L,N,V){var q=L.length-1,ne=q*N,ae=Math.floor(ne),J=j.Utils.Linear;return N<0?J(L[0],L[1],ne,V):1<N?J(L[q],L[q-1],q-ne,V):J(L[ae],L[q<ae+1?q:ae+1],ne-ae,V)},Bezier:function(L,N,V){for(var q=j.Utils.Reset(V),ne=L.length-1,ae=Math.pow,J=j.Utils.Bernstein,ce=Array.isArray(q),$=0;$<=ne;$++)if(typeof q=="number")q+=ae(1-N,ne-$)*ae(N,$)*L[$]*J(ne,$);else if(ce)for(var ue=0,xe=q.length;ue<xe;ue++)typeof q[ue]=="number"?q[ue]+=ae(1-N,ne-$)*ae(N,$)*L[$][ue]*J(ne,$):q[ue]=L[$][ue];else if(C(q)==="object")for(var Ge in q)typeof q[Ge]=="number"?q[Ge]+=ae(1-N,ne-$)*ae(N,$)*L[$][Ge]*J(ne,$):q[Ge]=L[$][Ge];else if(typeof q=="string"){for(var ze="",Ze=L[Math.round(ne*N)],Ke=1,ot=Ze.length;Ke<ot;Ke++)ze+=Ze[Ke];return ze}return q},CatmullRom:function(L,N,V){var q=L.length-1,ne=q*N,ae=Math.floor(ne),J=j.Utils.CatmullRom;return L[0]===L[q]?(N<0&&(ae=Math.floor(ne=q*(1+N))),J(L[(ae-1+q)%q],L[ae],L[(ae+1)%q],L[(ae+2)%q],ne-ae,V)):N<0?J(L[1],L[1],L[0],L[0],-N,V):1<N?J(L[q-1],L[q-1],L[q],L[q],(0|N)-N,V):J(L[ae?ae-1:0],L[ae],L[q<ae+1?q:ae+1],L[q<ae+2?q:ae+2],ne-ae,V)},Utils:{Linear:function(L,N,V,q){if(L===N||typeof L=="string"){if(N.length&&N.splice&&N.isString){N="";for(var ne=0,ae=L.length;ne<ae;ne++)N+=L[ne]}return N}if(typeof L=="number")return typeof L=="function"?L(V):L+(N-L)*V;if(C(L)==="object"){if(L.length!==void 0){var J=typeof L[0]=="string"||L.isString;if(J||L[0]===se){for(var ce="",$=J?0:1,ue=L.length;$<ue;$++){var xe=V===0?L[$]:V!==1&&typeof L[$]=="number"?L[$]+(N[$]-L[$])*V:N[$];(0<V&&V<1&&fe(L,$)||fe(L,$,me))&&(xe|=0),ce+=xe}return ce}if(q&&q.length&&q.splice)for(var Ge=0,ze=q.length;Ge<ze;Ge++)q[Ge]=j.Utils.Linear(L[Ge],N[Ge],V,q[Ge])}else for(var Ze in q)q[Ze]=j.Utils.Linear(L[Ze],N[Ze],V,q[Ze]);return q}},Reset:function(L){if(Array.isArray(L)){for(var N=0,V=L.length;N<V;N++)L[N]=j.Utils.Reset(L[N]);return L}if(C(L)!=="object")return typeof L=="number"?0:L;for(var q in L)L[q]=j.Utils.Reset(L[q]);return L},Bernstein:function(L,N){var V=j.Utils.Factorial;return V(L)/V(N)/V(L-N)},Factorial:(Se=[1],function(L){var N=1;if(Se[L])return Se[L];for(var V=L;1<V;V--)N*=V;return Se[L]=N}),CatmullRom:function(L,N,V,q,ne,ae){if(typeof L=="string")return N;if(typeof L=="number"){var J=.5*(V-L),ce=.5*(q-N),$=ne*ne;return(2*N-2*V+J+ce)*(ne*$)+(-3*N+3*V-2*J-ce)*$+J*ne+N}if(C(L)==="object"){if(L.length!==void 0){if(L[0]===se){for(var ue="",xe=1,Ge=L.length;xe<Ge;xe++){var ze=typeof L[xe]=="number"?j.Utils.CatmullRom(L[xe],N[xe],V[xe],q[xe],ne):q[xe];(fe(L,xe)||fe(L,xe,me))&&(ze|=0),ue+=ze}return ue}for(var Ze=0,Ke=ae.length;Ze<Ke;Ze++)ae[Ze]=j.Utils.CatmullRom(L[Ze],N[Ze],V[Ze],q[Ze],ne,ae[Ze])}else for(var ot in ae)ae[ot]=j.Utils.CatmullRom(L[ot],N[ot],V[ot],q[ot],ne,ae[ot]);return ae}}}},G={};function Ae(L,N,V){if(!L||!L.nodeType)return N;var q=L.queueID||"q_"+Date.now();L.queueID||(L.queueID=q);var ne=G[q];if(ne){if(ne.object===N&&L===ne.tween.node&&V._startTime===ne.tween._startTime)I(ne.tween);else if(C(N)==="object"&&N&&ne.object){for(var ae in N)ae in ne.object&&(V._startTime===ne.tween._startTime?delete ne.object[ae]:ne.propNormaliseRequired=!0);Object.assign(ne.object,N)}return ne.object}return C(N)==="object"&&N?(G[q]={tween:V,object:N,propNormaliseRequired:!1},G[q].object):N}function Be(L,N,V){return N?L?typeof window<"u"&&L===window||typeof document<"u"&&L===document?[L]:typeof L=="string"?!!document.querySelectorAll&&document.querySelectorAll(L):Array.isArray(L)?L:L.nodeType?[L]:V?L:[]:null:L?typeof window<"u"&&L===window||typeof document<"u"&&L===document?L:typeof L=="string"?!!document.querySelector&&document.querySelector(L):Array.isArray(L)?L[0]:L.nodeType||V?L:null:null}var Re=0,Ee=S.Linear.None,Fe=function(){function L(N,V){return M(this,L),this.id=Re++,!N||C(N)!=="object"||V||N.nodeType?N&&(N.nodeType||N.length||typeof N=="string")&&(N=this.node=Be(N),V=this.object=Ae(N,V,this)):(V=this.object=N,N=null),this._valuesEnd=null,this._valuesStart=Array.isArray(V)?[]:{},this._duration=1e3,this._easingFunction=Ee,this._easingReverse=Ee,this._interpolationFunction=j.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return T(L,null,[{key:"fromTo",value:function(N,V,q,ne){var ae=3<arguments.length&&ne!==void 0?ne:{};ae.quickRender=ae.quickRender?ae.quickRender:!q;var J=new L(N,V).to(q,ae);return ae.quickRender&&(J.render().update(J._startTime),J._rendered=!1,J._onStartCallbackFired=!1),J}},{key:"to",value:function(N,V,q){return L.fromTo(N,null,V,q)}},{key:"from",value:function(N,V,q){return L.fromTo(N,V,null,q)}}]),T(L,[{key:"setMaxListener",value:function(N){var V=0<arguments.length&&N!==void 0?N:15;return this._maxListener=V,this}},{key:"on",value:function(N,V){for(var q=this._maxListener,ne=N+F,ae=0;ae<q;ae++){var J=ne+ae;if(!this[J]){this[J]=V;break}}return this}},{key:"once",value:function(N,V){for(var q=this,ne=this._maxListener,ae=N+F,J=function($){var ue=ae+$;if(!q[ue])return q[ue]=function(){for(var xe=arguments.length,Ge=new Array(xe),ze=0;ze<xe;ze++)Ge[ze]=arguments[ze];V.apply(q,Ge),q[ue]=null},"break"},ce=0;ce<ne&&J(ce)!=="break";ce++);return this}},{key:"off",value:function(N,V){for(var q=this._maxListener,ne=N+F,ae=0;ae<q;ae++){var J=ne+ae;this[J]===V&&(this[J]=null)}return this}},{key:"emit",value:function(N,V,q,ne){var ae=this._maxListener,J=N+F;if(!this[J+0])return this;for(var ce=0;ce<ae;ce++){var $=J+ce;this[$]&&this[$](V,q,ne)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(N){var V=this._reversed;return this._reversed=N!==void 0?N:!V,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,I(this),this._pausedTime=u(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=u()-this._pausedTime,this._initTime=this._startTime,e(this),this._pausedTime=u(),this.emit("play",this.object))}},{key:"restart",value:function(){return this._repeat=this._r,this.reassignValues(),e(this),this.emit(re,this.object)}},{key:"seek",value:function(N,V){var q=this._duration,ne=this._initTime,ae=this._startTime,J=this._reversed,ce=ne+N;return this._isPlaying=!0,ce<ae&&ne<=ae&&(this._startTime-=q,this._reversed=!J),this.update(N,!1),this.emit("seek",N,this.object),V?this:this.pause()}},{key:"duration",value:function(N){return this._duration=typeof N=="function"?N(this._duration):N,this}},{key:"to",value:function(N,V){var q=1<arguments.length&&V!==void 0?V:1e3;if(this._valuesEnd=N,typeof q=="number"||typeof q=="function")this._duration=typeof q=="function"?q(this._duration):q;else if(C(q)==="object"){for(var ne in q)if(typeof this[ne]=="function"){var ae=U(Array.isArray(q[ne])?q[ne]:[q[ne]],4),J=ae[0],ce=J===void 0?null:J,$=ae[1],ue=$===void 0?null:$,xe=ae[2],Ge=xe===void 0?null:xe,ze=ae[3],Ze=ze===void 0?null:ze;this[ne](ce,ue,Ge,Ze)}}return this}},{key:"render",value:function(){if(this._rendered)return this;var N=this._valuesStart,V=this._valuesEnd,q=this.object,ne=this.node,ae=this.InitialValues;if(ve(q),ve(V),ne&&ne.queueID&&G[ne.queueID]){var J=G[ne.queueID];if(J.propNormaliseRequired&&J.tween!==this){for(var ce in V)J.tween._valuesEnd[ce];J.normalisedProp=!0,J.propNormaliseRequired=!1}}if(ne&&ae&&(q&&Object.keys(q).length!==0?V&&Object.keys(V).length!==0||(V=this._valuesEnd=ae(ne,q)):q=this.object=Ae(ne,ae(ne,V),this)),!N.processed){for(var $ in V){var ue=q&&q[$]&&le(q[$]),xe=V[$];if(!(E[$]&&E[$].init&&(E[$].init.call(this,ue,xe,$,q),ue===void 0&&N[$]&&(ue=N[$]),E[$].skipProcess))&&!(typeof ue=="number"&&isNaN(ue)||ue===null||xe===null||ue===!1||xe===!1||ue===void 0||xe===void 0||ue===xe)){if(N[$]=ue,Array.isArray(xe))if(Array.isArray(ue))xe.isString&&q[$].isString&&!ue.isString?ue.isString=!0:we($,q,N,V);else{xe.unshift(ue);for(var Ge=0,ze=xe.length;Ge<ze;Ge++)typeof xe[Ge]=="string"&&(xe[Ge]=K(xe[Ge]))}else we($,q,N,V);typeof ue!="number"||typeof xe!="string"||xe[1]}}N.processed=!0}return L.Renderer&&this.node&&L.Renderer.init&&(L.Renderer.init.call(this,q,N,V),this.__render=!0),this._rendered=!0,this}},{key:"start",value:function(N){return this._startTime=N!==void 0?typeof N=="string"?u()+parseFloat(N):N:u(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,e(this),this}},{key:"stop",value:function(){var N=this._isPlaying,V=this._isFinite,q=this.object,ne=this._startTime,ae=this._duration,J=this._r,ce=this._yoyo,$=this._reversed;if(!N)return this;var ue=V?(J+1)%2==1:!$;return this._reversed=!1,ce&&ue?this.update(ne):this.update(ne+ae),I(this),this.emit("stop",q)}},{key:"delay",value:function(N){return this._delayTime=typeof N=="function"?N(this._delayTime):N,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var N=0,V=this._chainedTweensCount;N<V;N++)this[O+N]=arguments[N];return this}},{key:"repeat",value:function(N){return this._repeat=this._duration?typeof N=="function"?N(this._repeat):N:0,this._r=this._repeat,this._isFinite=isFinite(N),this}},{key:"reverseDelay",value:function(N){return this._reverseDelayTime=typeof N=="function"?N(this._reverseDelayTime):N,this}},{key:"yoyo",value:function(N,V){return this._yoyo=typeof N=="function"?N(this._yoyo):N===null?this._yoyo:N,N||(this._reversed=!1),this._easingReverse=V||null,this}},{key:"easing",value:function(N){return this._easingFunction=N,this}},{key:"interpolation",value:function(N){return typeof N=="function"&&(this._interpolationFunction=N),this}},{key:"reassignValues",value:function(N){var V=this._valuesStart,q=this.object,ne=this._delayTime;for(var ae in this._isPlaying=!0,this._startTime=N!==void 0?N:u(),this._startTime+=ne,this._reversed=!1,e(this),V){var J=V[ae];q[ae]=J}return this}},{key:"update",value:function(N,V,q){var ne,ae,J,ce=this._onStartCallbackFired,$=this._easingFunction,ue=this._interpolationFunction,xe=this._easingReverse,Ge=this._repeat,ze=this._delayTime,Ze=this._reverseDelayTime,Ke=this._yoyo,ot=this._reversed,gt=this._startTime,rt=this._prevTime,Mn=this._duration,Tn=this._valuesStart,kt=this._valuesEnd,Dt=this.object,di=this._isFinite,hn=this._isPlaying,fn=this.__render,Qn=this._chainedTweensCount,Ar=0;if(Mn){var yi=(N=N!==void 0?N:u())-rt;if(this._prevTime=N,250<yi&&n()&&o()&&(N-=yi-H),!hn||N<gt&&!q)return!0;ne=1<(ne=(N-gt)/Mn)?1:ne,ne=ot?1-ne:ne}else ne=1,Ge=0;if(ce||(this._rendered||(this.render(),this._rendered=!0),this.emit(X,Dt),this._onStartCallbackFired=!0),ae=ot&&xe||$,!Dt)return!0;for(J in kt){var ee=Tn[J];if(ee!=null||E[J]&&E[J].update){var ye=kt[J],Te=ae[J]?ae[J](ne):(typeof ae=="function"?ae:Ee)(ne),ge=ue[J]?ue[J]:typeof ue=="function"?ue:j.Linear;typeof ye=="number"?Dt[J]=ee+(ye-ee)*Te:!Array.isArray(ye)||ye.isString||Array.isArray(ee)?ye&&ye.update?ye.update(Te):typeof ye=="function"?Dt[J]=ye(Te):typeof ye=="string"&&typeof ee=="number"?Dt[J]=ee+parseFloat(ye[0]+ye.substr(2))*Te:de(J,Dt,Tn,kt,Te,ne):Dt[J]=ge(ye,Te,Dt[J]),E[J]&&E[J].update&&E[J].update.call(this,Dt[J],ee,ye,Te,ne,J),Ar++}}if(!Ar)return I(this),!1;if(fn&&L.Renderer&&L.Renderer.update&&L.Renderer.update.call(this,Dt,ne),this.emit(z,Dt,ne,N),ne===1||ot&&ne===0){if(0<Ge&&0<Mn){if(di&&this._repeat--,Ke)this._reversed=!ot;else for(J in kt){var Le=kt[J];typeof Le=="string"&&typeof Tn[J]=="number"&&(Tn[J]+=parseFloat(Le[0]+Le.substr(2)))}return this.emit(Ke&&!ot?ie:te,Dt),this._startTime=ot&&Ze?N-Ze:N+ze,!0}if(V||(this._isPlaying=!1,I(this),Re--),this.emit(k,Dt),this._repeat=this._r,Qn)for(var je=0;je<Qn;je++)this[O+je].start(N+Mn);return!1}return!0}}]),L}(),_e=function(){function L(){M(this,L),this.totalTime=0,this.labels=[],this.offsets=[]}return T(L,[{key:"parseLabel",value:function(N,V){var q=this.offsets,ne=this.labels,ae=ne.indexOf(N);if(typeof N=="string"&&N.indexOf("=")!==-1&&!V&&ae===-1){var J=N.substr(N.indexOf("=")-1,2),ce=N.split(J);V=ce.length===2?J+ce[1]:null,N=ce[0],ae=ne.indexOf(N)}if(ae!==-1&&N){var $=q[ae]||0;if(typeof V=="number")$=V;else if(typeof V=="string"&&V.indexOf("=")!==-1){var ue=V.charAt(0);V=Number(V.substr(2)),ue==="+"||ue==="-"?$+=parseFloat(ue+V):ue==="*"?$*=V:ue==="/"?$/=V:ue==="%"&&($*=V/100)}return $}return typeof V=="number"?V:0}},{key:"addLabel",value:function(N,V){return this.labels.push(N),this.offsets.push(this.parseLabel(N,V)),this}},{key:"setLabel",value:function(N,V){var q=this.labels.indexOf(N);return q!==-1&&this.offsets.splice(q,1,this.parseLabel(N,V)),this}},{key:"eraseLabel",value:function(N){var V=this.labels.indexOf(N);return V!==-1&&(this.labels.splice(V,1),this.offsets.splice(V,1)),this}}]),L}(),Ce=0,Z=function(){function L(N){var V;return M(this,L),(V=W(this,P(L).call(this)))._duration=0,V._startTime=N&&N.startTime!==void 0?N.startTime:u(),V._tweens=[],V.elapsed=0,V._id=Ce++,V._defaultParams=N,V.position=new _e,V.position.addLabel("afterLast",V._duration),V.position.addLabel("afterInit",V._startTime),V._onStartCallbackFired=!1,W(V,Q(V))}return function(N,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(V&&V.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),V&&_(N,V)}(L,Fe),T(L,[{key:"mapTotal",value:function(N){return N.call(this,this._tweens),this}},{key:"timingOrder",value:function(N){var V=N(this._tweens.map(function(q){return q._startTime}));return this._tweens.map(function(q,ne){q._startTime=V[ne]}),this}},{key:"getTiming",value:function(N,V,q,ne){var ae=3<arguments.length&&ne!==void 0?ne:0;if(N==="reverse"){var J=q.stagger,ce=(J||0)*(V.length-1);return V.map(function(Ge,ze){return ce-(J||0)*ze+ae})}if(N==="async")return V.map(function(Ge){return ae});if(N==="sequence"||N==="delayed"){var $=q.stagger;return $=$||(q.duration||1e3)/(V.length-1),V.map(function(Ge,ze){return $*ze+ae})}if(N==="oneByOne")return V.map(function(Ge){return q.duration});if(N==="shuffle"){var ue=q.stagger;return function(Ge){var ze,Ze,Ke;for(Ke=Ge.length;Ke;--Ke)ze=Math.floor(Math.random()*Ke),Ze=Ge[Ke-1],Ge[Ke-1]=Ge[ze],Ge[ze]=Ze;return Ge}(V.map(function(Ge,ze){return(ue||0)*ze+ae}))}var xe=q.stagger;return V.map(function(Ge,ze){return(xe||0)*ze+ae})}},{key:"fromTo",value:function(N,V,q,ne){if((N=Be(N,!0,!0))&&N.length){this._defaultParams&&(ne=ne?R({},this._defaultParams,{},ne):this._defaultParams);for(var ae,J=ne.label,ce=typeof J=="number"?J:this.position.parseLabel(J!==void 0?J:"afterLast",null),$=this.getTiming(ne.mode,N,ne,ce),ue=0,xe=N.length;ue<xe;ue++)ae=N[ue],this.add(Fe.fromTo(ae,typeof V=="function"?V(ue,N.length):C(V)==="object"&&V?R({},V):null,typeof q=="function"?q(ue,N.length):q,typeof ne=="function"?ne(ue,N.length):ne),$[ue])}return this.start()}},{key:"from",value:function(N,V,q){return this.fromTo(N,V,null,q)}},{key:"to",value:function(N,V,q){return this.fromTo(N,null,V,q)}},{key:"addLabel",value:function(N,V){return this.position.addLabel(N,V),this}},{key:"map",value:function(N){for(var V=0,q=this._tweens.length;V<q;V++){var ne=this._tweens[V];N(ne,V),this._duration=Math.max(this._duration,ne._duration+ne._startTime)}return this}},{key:"add",value:function(N,V){var q=this;if(Array.isArray(N))return N.map(function($){q.add($,V)}),this;C(N)!=="object"||N instanceof Fe||(N=new Fe(N.from).to(N.to,N));var ne=this._defaultParams,ae=this._duration;if(ne)for(var J in ne)typeof N[J]=="function"&&N[J](ne[J]);var ce=typeof V=="number"?V:this.position.parseLabel(V!==void 0?V:"afterLast",null);return N._startTime=Math.max(this._startTime,N._delayTime,ce),N._delayTime=ce,N._isPlaying=!0,this._duration=Math.max(ae,Math.max(N._startTime+N._delayTime,N._duration)),this._tweens.push(N),this.position.setLabel("afterLast",this._duration),this}},{key:"restart",value:function(){return this._startTime+=u(),e(this),this.emit(re)}},{key:"easing",value:function(N){return this.map(function(V){return V.easing(N)})}},{key:"interpolation",value:function(N){return this.map(function(V){return V.interpolation(N)})}},{key:"update",value:function(N){var V,q=this._tweens,ne=this._duration,ae=this._reverseDelayTime,J=this._startTime,ce=this._reversed,$=this._yoyo,ue=this._repeat,xe=this._isFinite,Ge=this._isPlaying,ze=this._prevTime,Ze=this._onStartCallbackFired,Ke=(N=N!==void 0?N:u())-ze;if(this._prevTime=N,250<Ke&&n()&&o()&&(N-=Ke-H),!Ge||N<J)return!0;V=1<(V=(N-J)/ne)?1:V,V=ce?1-V:V,this.elapsed=V,Ze||(this.emit(X),this._onStartCallbackFired=!0);for(var ot=N-J,gt=ce?ne-ot:ot,rt=0;rt<q.length;)q[rt].update(gt),rt++;if(this.emit(z,V,ot),V===1||ce&&V===0){if(ue){for(xe&&this._repeat--,this.emit(ce?ie:te),$&&(this._reversed=!ce,this.timingOrder(function(Mn){return Mn.reverse()})),this._startTime=ce&&ae?N+ae:N,rt=0;rt<q.length;)q[rt].reassignValues(N),rt++;return!0}return this.emit(k),this._repeat=this._r,I(this),this._isPlaying=!1}return!0}},{key:"progress",value:function(N){return N!==void 0?this.update(N*this._duration):this.elapsed}}]),L}();i.Easing=S,i.FrameThrottle=function(L){g=1.05*(0<arguments.length&&L!==void 0?L:120)},i.Interpolation=j,i.Interpolator=function(L,N){var V=Array.isArray(L)&&!L.isString,q=typeof L=="string"?L:V?L.slice():R({},L);if(V)for(var ne=0,ae=L.length;ne<ae;ne++)L[ne]===N[ne]&&typeof L[ne]=="number"&&typeof N[ne]!="number"||we(ne,q,L,N);else if(C(L)==="object")for(var J in L)L[J]===N[J]&&typeof L[J]=="number"&&typeof N[J]!="number"||we(J,q,L,N);else if(typeof L=="string"){L=K(L),N=K(N);for(var ce=1;ce<L.length;)L[ce]===N[ce]&&typeof L[ce-1]=="string"?(L.splice(ce-1,2,L[ce-1]+L[ce]),N.splice(ce-1,2,N[ce-1]+N[ce])):ce++}return function($){if(V)for(var ue=0,xe=L.length;ue<xe;ue++)de(ue,q,L,N,$);else if(C(q)==="object")for(var Ge in L)de(Ge,q,L,N,$);else typeof q=="string"&&(q=de(0,0,L,N,$,$,!0));return q}},i.Plugins=E,i.Selector=Be,i.Timeline=Z,i.ToggleLagSmoothing=function(L){w=!(0<arguments.length&&L!==void 0)||L},i.Tween=Fe,i.add=e,i.autoPlay=function(L){d=L},i.get=t,i.getAll=function(){return h},i.has=function(L){return t(L)!==null},i.isRunning=n,i.now=u,i.onRequestTick=function(L){p.push(L)},i.onTick=function(L){return h.push({update:L})},i.remove=I,i.removeAll=function(){h.length=0,A(a),f=!1},i.update=v,i.utils=We,Object.defineProperty(i,"__esModule",{value:!0})})});var oC=yt(hL=>{Object.observe||function(i,e,t,n){"use strict";var o,a,l=["add","update","delete","reconfigure","setPrototype","preventExtensions"],c=e.isArray||function(C){return function(M){return C.call(M)==="[object Array]"}}(i.prototype.toString),A=e.prototype.indexOf?e.indexOf||function(C,M,D){return e.prototype.indexOf.call(C,M,D)}:function(C,M,D){for(var T=D||0;T<C.length;T++)if(C[T]===M)return T;return-1},u=t.Map===n||!Map.prototype.forEach?function(){var C=[],M=[];return{size:0,has:function(D){return A(C,D)>-1},get:function(D){return M[A(C,D)]},set:function(D,T){var B=A(C,D);B===-1?(C.push(D),M.push(T),this.size++):M[B]=T},delete:function(D){var T=A(C,D);T>-1&&(C.splice(T,1),M.splice(T,1),this.size--)},forEach:function(D){for(var T=0;T<C.length;T++)D.call(arguments[1],M[T],C[T],this)}}}:function(){return new Map},h=i.getOwnPropertyNames?function(){var C=i.getOwnPropertyNames;try{arguments.callee}catch{var M=(C(A).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");M.length&&(C=function(T){var B=i.getOwnPropertyNames(T);if(typeof T=="function")for(var R=0,P;R<M.length;)(P=A(B,M[R++]))>-1&&B.splice(P,1);return B})}return C}():function(C){var M=[],D,T;if("hasOwnProperty"in C)for(D in C)C.hasOwnProperty(D)&&M.push(D);else{T=i.hasOwnProperty;for(D in C)T.call(C,D)&&M.push(D)}return c(C)&&M.push("length"),M},f=i.getPrototypeOf,d=i.defineProperties&&i.getOwnPropertyDescriptor,p=t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(){var C=+new Date,M=C;return function(D){return setTimeout(function(){D((M=+new Date)-C)},17)}}(),m=function(C,M,D){var T=o.get(C);T?(g(T,C),E(C,T,M,D)):(T=b(C),E(C,T,M,D),o.size===1&&p(w))},b=function(C,P){var D=h(C),T=[],B,R=0,P={handlers:u(),frozen:i.isFrozen?i.isFrozen(C):!1,extensible:i.isExtensible?i.isExtensible(C):!0,proto:f&&f(C),properties:D,values:T,notifier:v(C,P)};if(d)for(B=P.descriptors=[];R<D.length;)B[R]=d(C,D[R]),T[R]=C[D[R++]];else for(;R<D.length;)T[R]=C[D[R++]];return o.set(C,P),P},g=function(){var C=d?function(D,T,B,R,P){var _=T.properties[B],Q=D[_],W=T.values[B],U=T.descriptors[B];"value"in P&&(W===Q?W===0&&1/W!==1/Q:W===W||Q===Q)&&(S(D,T,{name:_,type:"update",object:D,oldValue:W},R),T.values[B]=Q),U.configurable&&(!P.configurable||P.writable!==U.writable||P.enumerable!==U.enumerable||P.get!==U.get||P.set!==U.set)&&(S(D,T,{name:_,type:"reconfigure",object:D,oldValue:W},R),T.descriptors[B]=P)}:function(D,T,B,R){var P=T.properties[B],_=D[P],Q=T.values[B];(Q===_?Q===0&&1/Q!==1/_:Q===Q||_===_)&&(S(D,T,{name:P,type:"update",object:D,oldValue:Q},R),T.values[B]=_)},M=d?function(D,T,B,R,P){for(var _=T.length,Q;B&&_--;)T[_]!==null&&(Q=d(D,T[_]),B--,Q?C(D,R,_,P,Q):(S(D,R,{name:T[_],type:"delete",object:D,oldValue:R.values[_]},P),R.properties.splice(_,1),R.values.splice(_,1),R.descriptors.splice(_,1)))}:function(D,T,B,R,P){for(var _=T.length;B&&_--;)T[_]!==null&&(S(D,R,{name:T[_],type:"delete",object:D,oldValue:R.values[_]},P),R.properties.splice(_,1),R.values.splice(_,1),B--)};return function(D,T,B){if(!(!D.handlers.size||D.frozen)){var R,P,_,Q=D.values,W=D.descriptors,U=0,H,O,F,z,k;if(D.extensible)if(R=D.properties.slice(),P=R.length,_=h(T),W){for(;U<_.length;)O=_[U++],H=A(R,O),k=d(T,O),H===-1?(S(T,D,{name:O,type:"add",object:T},B),D.properties.push(O),Q.push(T[O]),W.push(k)):(R[H]=null,P--,C(T,D,H,B,k));M(T,R,P,D,B),i.isExtensible(T)||(D.extensible=!1,S(T,D,{type:"preventExtensions",object:T},B),D.frozen=i.isFrozen(T))}else{for(;U<_.length;)O=_[U++],H=A(R,O),F=T[O],H===-1?(S(T,D,{name:O,type:"add",object:T},B),D.properties.push(O),Q.push(F)):(R[H]=null,P--,C(T,D,H,B));M(T,R,P,D,B)}else if(!D.frozen){for(;U<R.length;U++)O=R[U],C(T,D,U,B,d(T,O));i.isFrozen(T)&&(D.frozen=!0)}f&&(z=f(T),z!==D.proto&&(S(T,D,{type:"setPrototype",name:"__proto__",object:T,oldValue:D.proto}),D.proto=z))}}}(),w=function(){o.size&&(o.forEach(g),a.forEach(I),p(w))},I=function(C,M){var D=C.changeRecords;D.length&&(C.changeRecords=[],M(D))},v=function(C,M){return arguments.length<2&&(M=o.get(C)),M&&M.notifier||{notify:function(D){D.type;var T=o.get(C);if(T){var B={object:C},R;for(R in D)R!=="object"&&(B[R]=D[R]);S(C,T,B)}},performChange:function(D,T){if(typeof D!="string")throw new TypeError("Invalid non-string changeType");if(typeof T!="function")throw new TypeError("Cannot perform non-function");var B=o.get(C),R,P,_=arguments[2],Q=_===n?T():T.call(_);if(B&&g(B,C,D),B&&Q&&typeof Q=="object"){P={object:C,type:D};for(R in Q)R!=="object"&&R!=="type"&&(P[R]=Q[R]);S(C,B,P)}}}},E=function(C,M,D,T){var B=a.get(D);B||a.set(D,B={observed:u(),changeRecords:[]}),B.observed.set(C,{acceptList:T.slice(),data:M}),M.handlers.set(D,B)},S=function(C,M,D,T){M.handlers.forEach(function(B){var R=B.observed.get(C).acceptList;(typeof T!="string"||A(R,T)===-1)&&A(R,D.type)>-1&&B.changeRecords.push(D)})};o=u(),a=u(),i.observe=function(M,D,T){if(!M||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.observe cannot observe non-object");if(typeof D!="function")throw new TypeError("Object.observe cannot deliver to non-function");if(i.isFrozen&&i.isFrozen(D))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(T===n)T=l;else if(!T||typeof T!="object")throw new TypeError("Third argument to Object.observe must be an array of strings.");return m(M,D,T),M},i.unobserve=function(M,D){if(M===null||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.unobserve cannot unobserve non-object");if(typeof D!="function")throw new TypeError("Object.unobserve cannot deliver to non-function");var T=a.get(D),B;return T&&(B=T.observed.get(M))&&(T.observed.forEach(function(R,P){g(R.data,P)}),p(function(){I(T,D)}),T.observed.size===1&&T.observed.has(M)?a.delete(D):T.observed.delete(M),B.data.handlers.size===1?o.delete(M):B.data.handlers.delete(D)),M},i.getNotifier=function(M){if(M===null||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.getNotifier cannot getNotifier non-object");return i.isFrozen&&i.isFrozen(M)?null:v(M)},i.deliverChangeRecords=function(M){if(typeof M!="function")throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var D=a.get(M);D&&(D.observed.forEach(function(T,B){g(T.data,B)}),I(D,M))}}(Object,Array,hL)});var Bg=yt((aC,fL)=>{(function(i,e){typeof aC=="object"?fL.exports=e():typeof define=="function"&&define.amd?define(e):i.Happens=e()})(aC,function(){"use strict";function i(t){var n=this instanceof i;if(t){if(n)throw new Error("You can't pass a target when instantiating with the `new` keyword");for(var o in i.prototype)t[o]=i.prototype[o]}else if(!n)return new i}i.prototype.__init=function(t){var n=this.__listeners||(this.__listeners=[]);return n[t]||(n[t]=[])},i.prototype.on=function(t,n){e(n),this.__init(t).push(n)},i.prototype.off=function(t,n){var o=this.__init(t);o.splice(o.indexOf(n),1)},i.prototype.once=function(t,n){e(n);var o=this,a=function(){o.off(t,a),n.apply(this,arguments)};this.on(t,a)},i.prototype.emit=function(t){var n,o=this.__init(t).slice(0);for(n in o)o[n].apply(this,[].slice.call(arguments,1))};function e(t){if(!(t&&t instanceof Function))throw new Error(t+" is not a Function")}return i})});var mL=yt((dL,pL)=>{pL.exports=dL=dV;function dV(i,e){this.path=i,this.name=e.name,this.type=e.type,this.object=e.object,this.value=e.object[e.name],this.oldValue=e.oldValue}});var ML=yt((_ie,lC)=>{"use strict";var QA=typeof Reflect=="object"?Reflect:null,gL=QA&&typeof QA.apply=="function"?QA.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Lg;QA&&typeof QA.ownKeys=="function"?Lg=QA.ownKeys:Object.getOwnPropertySymbols?Lg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Lg=function(e){return Object.getOwnPropertyNames(e)};function pV(i){console&&console.warn&&console.warn(i)}var yL=Number.isNaN||function(e){return e!==e};function Kt(){Kt.init.call(this)}lC.exports=Kt;lC.exports.once=yV;Kt.EventEmitter=Kt;Kt.prototype._events=void 0;Kt.prototype._eventsCount=0;Kt.prototype._maxListeners=void 0;var vL=10;function Rg(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Kt,"defaultMaxListeners",{enumerable:!0,get:function(){return vL},set:function(i){if(typeof i!="number"||i<0||yL(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");vL=i}});Kt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Kt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yL(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function xL(i){return i._maxListeners===void 0?Kt.defaultMaxListeners:i._maxListeners}Kt.prototype.getMaxListeners=function(){return xL(this)};Kt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o=e==="error",a=this._events;if(a!==void 0)o=o&&a.error===void 0;else if(!o)return!1;if(o){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var c=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw c.context=l,c}var A=a[e];if(A===void 0)return!1;if(typeof A=="function")gL(A,this,t);else for(var u=A.length,h=EL(A,u),n=0;n<u;++n)gL(h[n],this,t);return!0};function wL(i,e,t,n){var o,a,l;if(Rg(t),a=i._events,a===void 0?(a=i._events=Object.create(null),i._eventsCount=0):(a.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),a=i._events),l=a[e]),l===void 0)l=a[e]=t,++i._eventsCount;else if(typeof l=="function"?l=a[e]=n?[t,l]:[l,t]:n?l.unshift(t):l.push(t),o=xL(i),o>0&&l.length>o&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=i,c.type=e,c.count=l.length,pV(c)}return i}Kt.prototype.addListener=function(e,t){return wL(this,e,t,!1)};Kt.prototype.on=Kt.prototype.addListener;Kt.prototype.prependListener=function(e,t){return wL(this,e,t,!0)};function mV(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bL(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=mV.bind(n);return o.listener=t,n.wrapFn=o,o}Kt.prototype.once=function(e,t){return Rg(t),this.on(e,bL(this,e,t)),this};Kt.prototype.prependOnceListener=function(e,t){return Rg(t),this.prependListener(e,bL(this,e,t)),this};Kt.prototype.removeListener=function(e,t){var n,o,a,l,c;if(Rg(t),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(a=-1,l=n.length-1;l>=0;l--)if(n[l]===t||n[l].listener===t){c=n[l].listener,a=l;break}if(a<0)return this;a===0?n.shift():gV(n,a),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Kt.prototype.off=Kt.prototype.removeListener;Kt.prototype.removeAllListeners=function(e){var t,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),l;for(o=0;o<a.length;++o)l=a[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function CL(i,e,t){var n=i._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?vV(o):EL(o,o.length)}Kt.prototype.listeners=function(e){return CL(this,e,!0)};Kt.prototype.rawListeners=function(e){return CL(this,e,!1)};Kt.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):SL.call(i,e)};Kt.prototype.listenerCount=SL;function SL(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Kt.prototype.eventNames=function(){return this._eventsCount>0?Lg(this._events):[]};function EL(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function gV(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function vV(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function yV(i,e){return new Promise(function(t,n){function o(l){i.removeListener(e,a),n(l)}function a(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}IL(i,e,a,{once:!0}),e!=="error"&&xV(i,o,{once:!0})})}function xV(i,e,t){typeof i.on=="function"&&IL(i,"error",e,t)}function IL(i,e,t,n){if(typeof i.on=="function")n.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(a){n.once&&i.removeEventListener(e,o),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}});var DL=yt((Nie,TL)=>{var ff=1e3,df=ff*60,pf=df*60,mf=pf*24,wV=mf*365.25;TL.exports=function(i,e){return e=e||{},typeof i=="string"?bV(i):e.long?SV(i):CV(i)};function bV(i){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(i);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return t*wV;case"days":case"day":case"d":return t*mf;case"hours":case"hour":case"h":return t*pf;case"minutes":case"minute":case"m":return t*df;case"seconds":case"second":case"s":return t*ff;case"ms":return t}}}function CV(i){return i>=mf?Math.round(i/mf)+"d":i>=pf?Math.round(i/pf)+"h":i>=df?Math.round(i/df)+"m":i>=ff?Math.round(i/ff)+"s":i+"ms"}function SV(i){return kg(i,mf,"day")||kg(i,pf,"hour")||kg(i,df,"minute")||kg(i,ff,"second")||i+" ms"}function kg(i,e,t){if(!(i<e))return i<e*1.5?Math.floor(i/e)+" "+t:Math.ceil(i/e)+" "+t+"s"}});var LL=yt((jt,BL)=>{jt=BL.exports=MV;jt.coerce=LV;jt.disable=DV;jt.enable=TV;jt.enabled=BV;jt.humanize=DL();jt.names=[];jt.skips=[];jt.formatters={};var EV=0,cC;function IV(){return jt.colors[EV++%jt.colors.length]}function MV(i){function e(){}e.enabled=!1;function t(){var o=t,a=+new Date,l=a-(cC||a);o.diff=l,o.prev=cC,o.curr=a,cC=a,o.useColors==null&&(o.useColors=jt.useColors()),o.color==null&&o.useColors&&(o.color=IV());var c=Array.prototype.slice.call(arguments);c[0]=jt.coerce(c[0]),typeof c[0]!="string"&&(c=["%o"].concat(c));var A=0;c[0]=c[0].replace(/%([a-z%])/g,function(h,f){if(h==="%%")return h;A++;var d=jt.formatters[f];if(typeof d=="function"){var p=c[A];h=d.call(o,p),c.splice(A,1),A--}return h}),typeof jt.formatArgs=="function"&&(c=jt.formatArgs.apply(o,c));var u=t.log||jt.log||console.log.bind(console);u.apply(o,c)}t.enabled=!0;var n=jt.enabled(i)?t:e;return n.namespace=i,n}function TV(i){jt.save(i);for(var e=(i||"").split(/[\s,]+/),t=e.length,n=0;n<t;n++)e[n]&&(i=e[n].replace(/\*/g,".*?"),i[0]==="-"?jt.skips.push(new RegExp("^"+i.substr(1)+"$")):jt.names.push(new RegExp("^"+i+"$")))}function DV(){jt.enable("")}function BV(i){var e,t;for(e=0,t=jt.skips.length;e<t;e++)if(jt.skips[e].test(i))return!1;for(e=0,t=jt.names.length;e<t;e++)if(jt.names[e].test(i))return!0;return!1}function LV(i){return i instanceof Error?i.stack||i.message:i}});var PL=yt((ys,kL)=>{ys=kL.exports=LL();ys.log=PV;ys.formatArgs=kV;ys.save=_V;ys.load=RL;ys.useColors=RV;var gf;typeof chrome<"u"&&typeof chrome.storage<"u"?gf=chrome.storage.local:gf=window.localStorage;ys.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function RV(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}ys.formatters.j=function(i){return JSON.stringify(i)};function kV(){var i=arguments,e=this.useColors;if(i[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+i[0]+(e?"%c ":" ")+"+"+ys.humanize(this.diff),!e)return i;var t="color: "+this.color;i=[i[0],t,"color: inherit"].concat(Array.prototype.slice.call(i,1));var n=0,o=0;return i[0].replace(/%[a-z%]/g,function(a){a!=="%%"&&(n++,a==="%c"&&(o=n))}),i.splice(o,0,t),i}function PV(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function _V(i){try{i==null?gf.removeItem("debug"):gf.debug=i}catch{}}function RL(){var i;try{i=gf.debug}catch{}return i}ys.enable(RL())});var hC=yt((_L,NL)=>{var NV=mL(),uC=ML().EventEmitter,Zl=PL()("observed");NL.exports=_L=Ui;function Ui(i,e,t){if(typeof i!="object")throw new TypeError("object expected. got: "+typeof i);if(!(this instanceof Ui))return new Ui(i,e,t);Zl("new",i,!!e,t),uC.call(this),this._bind(i,e,t)}for(AC in uC.prototype)Ui.prototype[AC]=uC.prototype[AC];var AC;Ui.prototype.observers=void 0;Ui.prototype.onchange=void 0;Ui.prototype.subject=void 0;Ui.prototype._bind=function(i,e,t){if(this.subject)throw new Error("already bound!");if(i==null)throw new TypeError("subject cannot be null");Zl("_bind",i),this.subject=i,e?e.observers.push(this):this.observers=[this],this.onchange=FV(e||this,t),Object.observe(this.subject,this.onchange),this._walk(e||this,t)};Ui.prototype.deliverChanges=function(){Zl("deliverChanges"),this.observers.forEach(function(i){Object.deliverChangeRecords(i.onchange)})};Ui.prototype._walk=function(i,e){Zl("_walk");var t=this.subject;Object.keys(t).forEach(function(n){var o=t[n];if(typeof o=="object"&&o!=null){var a=e?e+"."+n:n;new Ui(o,i,a)}})};Ui.prototype.stop=function(){Zl("stop"),this.observers.forEach(function(i){Object.unobserve(i.subject,i.onchange)})};Ui.prototype._remove=function(i){Zl("_remove",i),this.observers=this.observers.filter(function(e){return i==e.subject?(Object.unobserve(e.subject,e.onchange),!1):!0})};function FV(i,e){return function(t){Zl("onchange",e),t.forEach(function(n){var o=n.object,a=n.type,l=n.name,c=o[l],A=e?e+"."+l:l;a=="add"&&c!=null&&typeof c=="object"?new Ui(c,i,A):a=="delete"&&typeof n.oldValue=="object"?i._remove(n.oldValue):a=="update"&&n.oldValue!=c&&(typeof n.oldValue=="object"&&i._remove(n.oldValue),typeof c=="object"&&new Ui(c,i,A)),n=new NV(A,n),i.emit(a,n),i.emit(a+" "+A,n),i.emit("change",n),i.emit("change "+A,n)})}}});var kF=yt(Ms=>{"use strict";if(Object.defineProperty(Ms,"__esModule",{value:!0}),window.TextEncoder===void 0){window.TextEncoder=function(){},TextEncoder.prototype.encode=function(i){for(var e=i.length,t=-1,n=typeof Uint8Array>"u"?new Array(1.5*e):new Uint8Array(3*e),o=0,a=0,l=0;l!==e;){if(o=i.charCodeAt(l),l+=1,o>=55296&&o<=56319){if(l===e){n[t+=1]=239,n[t+=1]=191,n[t+=1]=189;break}if(!((a=i.charCodeAt(l))>=56320&&a<=57343)){n[t+=1]=239,n[t+=1]=191,n[t+=1]=189;continue}if(l+=1,(o=1024*(o-55296)+a-56320+65536)>65535){n[t+=1]=240|o>>>18,n[t+=1]=128|o>>>12&63,n[t+=1]=128|o>>>6&63,n[t+=1]=128|63&o;continue}}o<=127?n[t+=1]=0|o:o<=2047?(n[t+=1]=192|o>>>6,n[t+=1]=128|63&o):(n[t+=1]=224|o>>>12,n[t+=1]=128|o>>>6&63,n[t+=1]=128|63&o)}return typeof Uint8Array<"u"?n.subarray(0,t+1):(n.length=t+1,n)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch{TextEncoder.prototype.encoding="utf-8"}typeof Symbol<"u"&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function p_(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,n)}return t}function Fn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p_(Object(t),!0).forEach(function(n){u7(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):p_(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Zt(i){return(Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(i)}function m_(i,e,t,n,o,a,l){try{var c=i[a](l),A=c.value}catch(u){return void t(u)}c.done?e(A):Promise.resolve(A).then(n,o)}function $t(i){return function(){var e=this,t=arguments;return new Promise(function(n,o){var a=i.apply(e,t);function l(A){m_(a,n,o,l,c,"next",A)}function c(A){m_(a,n,o,l,c,"throw",A)}l(void 0)})}}function Wn(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function g_(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function ei(i,e,t){return e&&g_(i.prototype,e),t&&g_(i,t),i}function u7(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function w1(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&b1(i,e)}function Su(i){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(i)}function b1(i,e){return(b1=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(i,e)}function TN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ar(i,e,t){return(ar=TN()?Reflect.construct:function(n,o,a){var l=[null];l.push.apply(l,o);var c=new(Function.bind.apply(n,l));return a&&b1(c,a.prototype),c}).apply(null,arguments)}function DN(i){var e=typeof Map=="function"?new Map:void 0;return(DN=function(t){if(t===null||(n=t,Function.toString.call(n).indexOf("[native code]")===-1))return t;var n;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return ar(t,arguments,Su(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),b1(o,t)})(i)}function h7(i,e){if(i==null)return{};var t,n,o=function(l,c){if(l==null)return{};var A,u,h={},f=Object.keys(l);for(u=0;u<f.length;u++)A=f[u],c.indexOf(A)>=0||(h[A]=l[A]);return h}(i,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(i,t)&&(o[t]=i[t])}return o}function f7(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)}function C1(i){var e=TN();return function(){var t,n=Su(i);if(e){var o=Su(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return f7(this,t)}}function BN(i,e,t){return(BN=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var l=function(A,u){for(;!Object.prototype.hasOwnProperty.call(A,u)&&(A=Su(A))!==null;);return A}(n,o);if(l){var c=Object.getOwnPropertyDescriptor(l,o);return c.get?c.get.call(a):c.value}})(i,e,t||i)}function Ft(i,e){return LN(i)||function(t,n){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var a,l,c=[],A=!0,u=!1;try{for(o=o.call(t);!(A=(a=o.next()).done)&&(c.push(a.value),!n||c.length!==n);A=!0);}catch(h){u=!0,l=h}finally{try{A||o.return==null||o.return()}finally{if(u)throw l}}return c}}(i,e)||S1(i,e)||kN()}function d7(i){return LN(i)||RN(i)||S1(i)||kN()}function Wt(i){return function(e){if(Array.isArray(e))return UE(e)}(i)||RN(i)||S1(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function LN(i){if(Array.isArray(i))return i}function RN(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function S1(i,e){if(i){if(typeof i=="string")return UE(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?UE(i,e):void 0}}function UE(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function kN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=S1(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var n=0,o=function(){};return{s:o,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(A){throw A},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,l=!0,c=!1;return{s:function(){t=t.call(i)},n:function(){var A=t.next();return l=A.done,A},e:function(A){c=!0,a=A},f:function(){try{l||t.return==null||t.return()}finally{if(c)throw a}}}}var Rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(i){var e=function(t){var n,o=Object.prototype,a=o.hasOwnProperty,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",A=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function h(H,O,F){return Object.defineProperty(H,O,{value:F,enumerable:!0,configurable:!0,writable:!0}),H[O]}try{h({},"")}catch{h=function(O,F,z){return O[F]=z}}function f(H,O,F,z){var k=O&&O.prototype instanceof I?O:I,X=Object.create(k.prototype),te=new Q(z||[]);return X._invoke=function(ie,re,se){var oe=p;return function(le,be){if(oe===b)throw new Error("Generator is already running");if(oe===g){if(le==="throw")throw be;return U()}for(se.method=le,se.arg=be;;){var De=se.delegate;if(De){var pe=R(De,se);if(pe){if(pe===w)continue;return pe}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(oe===p)throw oe=g,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);oe=b;var K=d(ie,re,se);if(K.type==="normal"){if(oe=se.done?g:m,K.arg===w)continue;return{value:K.arg,done:se.done}}K.type==="throw"&&(oe=g,se.method="throw",se.arg=K.arg)}}}(H,F,te),X}function d(H,O,F){try{return{type:"normal",arg:H.call(O,F)}}catch(z){return{type:"throw",arg:z}}}t.wrap=f;var p="suspendedStart",m="suspendedYield",b="executing",g="completed",w={};function I(){}function v(){}function E(){}var S={};h(S,c,function(){return this});var C=Object.getPrototypeOf,M=C&&C(C(W([])));M&&M!==o&&a.call(M,c)&&(S=M);var D=E.prototype=I.prototype=Object.create(S);function T(H){["next","throw","return"].forEach(function(O){h(H,O,function(F){return this._invoke(O,F)})})}function B(H,O){function F(k,X,te,ie){var re=d(H[k],H,X);if(re.type!=="throw"){var se=re.arg,oe=se.value;return oe&&Zt(oe)==="object"&&a.call(oe,"__await")?O.resolve(oe.__await).then(function(le){F("next",le,te,ie)},function(le){F("throw",le,te,ie)}):O.resolve(oe).then(function(le){se.value=le,te(se)},function(le){return F("throw",le,te,ie)})}ie(re.arg)}var z;this._invoke=function(k,X){function te(){return new O(function(ie,re){F(k,X,ie,re)})}return z=z?z.then(te,te):te()}}function R(H,O){var F=H.iterator[O.method];if(F===n){if(O.delegate=null,O.method==="throw"){if(H.iterator.return&&(O.method="return",O.arg=n,R(H,O),O.method==="throw"))return w;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var z=d(F,H.iterator,O.arg);if(z.type==="throw")return O.method="throw",O.arg=z.arg,O.delegate=null,w;var k=z.arg;return k?k.done?(O[H.resultName]=k.value,O.next=H.nextLoc,O.method!=="return"&&(O.method="next",O.arg=n),O.delegate=null,w):k:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,w)}function P(H){var O={tryLoc:H[0]};1 in H&&(O.catchLoc=H[1]),2 in H&&(O.finallyLoc=H[2],O.afterLoc=H[3]),this.tryEntries.push(O)}function _(H){var O=H.completion||{};O.type="normal",delete O.arg,H.completion=O}function Q(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(P,this),this.reset(!0)}function W(H){if(H){var O=H[c];if(O)return O.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var F=-1,z=function k(){for(;++F<H.length;)if(a.call(H,F))return k.value=H[F],k.done=!1,k;return k.value=n,k.done=!0,k};return z.next=z}}return{next:U}}function U(){return{value:n,done:!0}}return v.prototype=E,h(D,"constructor",E),h(E,"constructor",v),v.displayName=h(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(H){var O=typeof H=="function"&&H.constructor;return!!O&&(O===v||(O.displayName||O.name)==="GeneratorFunction")},t.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,E):(H.__proto__=E,h(H,u,"GeneratorFunction")),H.prototype=Object.create(D),H},t.awrap=function(H){return{__await:H}},T(B.prototype),h(B.prototype,A,function(){return this}),t.AsyncIterator=B,t.async=function(H,O,F,z,k){k===void 0&&(k=Promise);var X=new B(f(H,O,F,z),k);return t.isGeneratorFunction(O)?X:X.next().then(function(te){return te.done?te.value:X.next()})},T(D),h(D,u,"Generator"),h(D,c,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(H){var O=[];for(var F in H)O.push(F);return O.reverse(),function z(){for(;O.length;){var k=O.pop();if(k in H)return z.value=k,z.done=!1,z}return z.done=!0,z}},t.values=W,Q.prototype={constructor:Q,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(_),!H)for(var O in this)O.charAt(0)==="t"&&a.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var O=this;function F(re,se){return X.type="throw",X.arg=H,O.next=re,se&&(O.method="next",O.arg=n),!!se}for(var z=this.tryEntries.length-1;z>=0;--z){var k=this.tryEntries[z],X=k.completion;if(k.tryLoc==="root")return F("end");if(k.tryLoc<=this.prev){var te=a.call(k,"catchLoc"),ie=a.call(k,"finallyLoc");if(te&&ie){if(this.prev<k.catchLoc)return F(k.catchLoc,!0);if(this.prev<k.finallyLoc)return F(k.finallyLoc)}else if(te){if(this.prev<k.catchLoc)return F(k.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return F(k.finallyLoc)}}}},abrupt:function(H,O){for(var F=this.tryEntries.length-1;F>=0;--F){var z=this.tryEntries[F];if(z.tryLoc<=this.prev&&a.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var k=z;break}}k&&(H==="break"||H==="continue")&&k.tryLoc<=O&&O<=k.finallyLoc&&(k=null);var X=k?k.completion:{};return X.type=H,X.arg=O,k?(this.method="next",this.next=k.finallyLoc,w):this.complete(X)},complete:function(H,O){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&O&&(this.next=O),w},finish:function(H){for(var O=this.tryEntries.length-1;O>=0;--O){var F=this.tryEntries[O];if(F.finallyLoc===H)return this.complete(F.completion,F.afterLoc),_(F),w}},catch:function(H){for(var O=this.tryEntries.length-1;O>=0;--O){var F=this.tryEntries[O];if(F.tryLoc===H){var z=F.completion;if(z.type==="throw"){var k=z.arg;_(F)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(H,O,F){return this.delegate={iterator:W(H),resultName:O,nextLoc:F},this.method==="next"&&(this.arg=n),w}},t}(i.exports);try{globalThis.regeneratorRuntime=e}catch{(typeof globalThis>"u"?"undefined":Zt(globalThis))==="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})({exports:{}});var Xv=window.location.hostname.endsWith("croquet.studio"),v_="",gu="";function y_(i,e){if(e){var t,n=Gt(e.split("&"));try{for(n.s();!(t=n.n()).done;){var o=t.value.split("="),a=o[0],l=!0;if(o.length>1&&(l=decodeURIComponent(o.slice(1).join("="))).match(/^(true|false|null|[0-9.]*|["[{].*)$/))try{l=JSON.parse(l)}catch{l[0]==="["&&(l=l.slice(1,-1).split(","))}i[a]=l}}catch(c){n.e(c)}finally{n.f()}}}var x_,ft=new(function(){function i(){Wn(this,i),this.getSession(),y_(this,window.location.search.slice(1)),y_(this,Xv?window.location.hash.slice(1):gu),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}return ei(i,[{key:"has",value:function(e,t,n){typeof n!="boolean"&&(n=this.isHost(n));var o=this[e];if(typeof o!="string")return n;var a=o.split(",");return n===!0&&(t="no".concat(t)),t.endsWith("s")&&(t=t.slice(0,-1)),a.includes(t)||a.includes("".concat(t,"s"))?!n:n}},{key:"getSession",value:function(){if(Xv){var e=window.location.pathname.match(/^\/([^/]+)\/(.*)$/);if(e)return v_=e[1],e[2]}else{var t=window.location.hash.match(/^#([^&]+)&?(.*)$/);if(t)return t[1].includes("=")?(gu="".concat(t[1],"&").concat(t[2]),""):(gu=t[2],t[1])}return typeof this.session=="string"?(gu=window.location.hash.slice(1),this.session):""}},{key:"setSession",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Xv==null&&this.getSession();var n=window.location,o=n.search,a=n.hash,l=Xv?"/".concat(v_,"/").concat(e).concat(o).concat(a):"#".concat(e).concat(gu?"&"+gu:"");t?window.history.replaceState({},"",l):window.history.pushState({},"",l)}},{key:"isHost",value:function(e){var t=window.location.hostname;return t===e?!0:e!=="localhost"?!1:t.endsWith(".ngrok.io")||t==="croquet.io"&&window.location.pathname.match(/^\/(dev|files)\//)?!0:["127.0.0.1","[::1]"].includes(t)}},{key:"isLocalhost",value:function(){return this.isHost("localhost")}}]),i}()),yc=function(i,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t,n=typeof e.cycles=="boolean"&&e.cycles,o=e.cmp&&(t=e.cmp,function(l){return function(c,A){var u={key:c,value:l[c]},h={key:A,value:l[A]};return t(u,h)}}),a=[];return function l(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(Zt(c)!=="object")return JSON.stringify(c);var A,u;if(Array.isArray(c)){for(u="[",A=0;A<c.length;A++)A&&(u+=","),u+=l(c[A])||"null";return u+"]"}if(c===null)return"null";if(a.indexOf(c)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=a.push(c)-1,f=Object.keys(c).sort(o&&o(c));for(u="",A=0;A<f.length;A++){var d=f[A],p=l(c[d]);p&&(u&&(u+=","),u+=JSON.stringify(d)+":"+p)}return a.splice(h,1),"{"+u+"}"}}(i)},p7={exports:{}},Pr={exports:{}};Pr.exports=x_=x_||function(i,e){var t;if(typeof window<"u"&&window.crypto&&(t=window.crypto),typeof self<"u"&&self.crypto&&(t=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(t=globalThis.crypto),!t&&typeof window<"u"&&window.msCrypto&&(t=window.msCrypto),!t&&Rd!==void 0&&Rd.crypto&&(t=Rd.crypto),!t)try{t=Li("crypto")}catch{}var n=function(){if(t){if(typeof t.getRandomValues=="function")try{return t.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof t.randomBytes=="function")try{return t.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function b(){}return function(g){var w;return b.prototype=g,w=new b,b.prototype=null,w}}(),a={},l=a.lib={},c=l.Base={extend:function(b){var g=o(this);return b&&g.mixIn(b),g.hasOwnProperty("init")&&this.init!==g.init||(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var g in b)b.hasOwnProperty(g)&&(this[g]=b[g]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},A=l.WordArray=c.extend({init:function(b,g){b=this.words=b||[],this.sigBytes=g!=e?g:4*b.length},toString:function(b){return(b||h).stringify(this)},concat:function(b){var g=this.words,w=b.words,I=this.sigBytes,v=b.sigBytes;if(this.clamp(),I%4)for(var E=0;E<v;E++){var S=w[E>>>2]>>>24-E%4*8&255;g[I+E>>>2]|=S<<24-(I+E)%4*8}else for(var C=0;C<v;C+=4)g[I+C>>>2]=w[C>>>2];return this.sigBytes+=v,this},clamp:function(){var b=this.words,g=this.sigBytes;b[g>>>2]&=4294967295<<32-g%4*8,b.length=i.ceil(g/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var g=[],w=0;w<b;w+=4)g.push(n());return new A.init(g,b)}}),u=a.enc={},h=u.Hex={stringify:function(b){for(var g=b.words,w=b.sigBytes,I=[],v=0;v<w;v++){var E=g[v>>>2]>>>24-v%4*8&255;I.push((E>>>4).toString(16)),I.push((15&E).toString(16))}return I.join("")},parse:function(b){for(var g=b.length,w=[],I=0;I<g;I+=2)w[I>>>3]|=parseInt(b.substr(I,2),16)<<24-I%8*4;return new A.init(w,g/2)}},f=u.Latin1={stringify:function(b){for(var g=b.words,w=b.sigBytes,I=[],v=0;v<w;v++){var E=g[v>>>2]>>>24-v%4*8&255;I.push(String.fromCharCode(E))}return I.join("")},parse:function(b){for(var g=b.length,w=[],I=0;I<g;I++)w[I>>>2]|=(255&b.charCodeAt(I))<<24-I%4*8;return new A.init(w,g)}},d=u.Utf8={stringify:function(b){try{return decodeURIComponent(escape(f.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return f.parse(unescape(encodeURIComponent(b)))}},p=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=d.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var g,w=this._data,I=w.words,v=w.sigBytes,E=this.blockSize,S=v/(4*E),C=(S=b?i.ceil(S):i.max((0|S)-this._minBufferSize,0))*E,M=i.min(4*C,v);if(C){for(var D=0;D<C;D+=E)this._doProcessBlock(I,D);g=I.splice(0,C),w.sigBytes-=M}return new A.init(g,M)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=p.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){return b&&this._append(b),this._doFinalize()},blockSize:16,_createHelper:function(b){return function(g,w){return new b.init(w).finalize(g)}},_createHmacHelper:function(b){return function(g,w){return new m.HMAC.init(b,w).finalize(g)}}});var m=a.algo={};return a}(Math);var PN,dc=p7.exports=function(i){return function(){if(typeof ArrayBuffer=="function"){var e=i.lib.WordArray,t=e.init;(e.init=function(n){if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||typeof Uint8ClampedArray<"u"&&n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){for(var o=n.byteLength,a=[],l=0;l<o;l++)a[l>>>2]|=n[l]<<24-l%4*8;t.call(this,a,o)}else t.apply(this,arguments)}).prototype=e}}(),i.lib.WordArray}(Pr.exports),m7={exports:{}},_N=m7.exports=function(i){return function(e){var t=i,n=t.lib,o=n.WordArray,a=n.Hasher,l=t.algo,c=[],A=[];(function(){function f(b){for(var g=e.sqrt(b),w=2;w<=g;w++)if(!(b%w))return!1;return!0}function d(b){return 4294967296*(b-(0|b))|0}for(var p=2,m=0;m<64;)f(p)&&(m<8&&(c[m]=d(e.pow(p,.5))),A[m]=d(e.pow(p,1/3)),m++),p++})();var u=[],h=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(f,d){for(var p=this._hash.words,m=p[0],b=p[1],g=p[2],w=p[3],I=p[4],v=p[5],E=p[6],S=p[7],C=0;C<64;C++){if(C<16)u[C]=0|f[d+C];else{var M=u[C-15],D=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,T=u[C-2],B=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;u[C]=D+u[C-7]+B+u[C-16]}var R=m&b^m&g^b&g,P=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),_=S+((I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25))+(I&v^~I&E)+A[C]+u[C];S=E,E=v,v=I,I=w+_|0,w=g,g=b,b=m,m=_+(P+R)|0}p[0]=p[0]+m|0,p[1]=p[1]+b|0,p[2]=p[2]+g|0,p[3]=p[3]+w|0,p[4]=p[4]+I|0,p[5]=p[5]+v|0,p[6]=p[6]+E|0,p[7]=p[7]+S|0},_doFinalize:function(){var f=this._data,d=f.words,p=8*this._nDataBytes,m=8*f.sigBytes;return d[m>>>5]|=128<<24-m%32,d[14+(m+64>>>9<<4)]=e.floor(p/4294967296),d[15+(m+64>>>9<<4)]=p,f.sigBytes=4*d.length,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});t.SHA256=a._createHelper(h),t.HmacSHA256=a._createHmacHelper(h)}(Math),i.SHA256}(Pr.exports),g7=["hashOverride"];function NN(i){for(var e=i.sigBytes,t=i.words,n=new Uint8Array(e),o=0,a=0;o<e;){var l=t[a++];if(n[o++]=(4278190080&l)>>>24,o===e||(n[o++]=(16711680&l)>>>16,o===e)||(n[o++]=(65280&l)>>>8,o===e))break;n[o++]=255&l}return n}function FN(i){function e(o){var a=o.indexOf("{"),l=o.lastIndexOf("}");if(a===-1||l===-1||l<a)return o;var c=o.slice(0,a).replace(/\s+/g," ").replace(/\s\(/,"("),A=o.slice(a+1,l);return"".concat(c.trim(),"{").concat(A.trim(),"}")}var t=e(""+i);if(!t.startsWith("class")){var n=i.prototype;n&&(t+=Object.getOwnPropertyNames(n).map(function(o){return"".concat(o,":").concat(e(""+n[o]))}).join(""))}return t}function QN(i){return btoa(String.fromCharCode.apply(String,Wt(new Uint8Array(i)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v7(i){return UN.apply(this,arguments)}function UN(){return(UN=$t(regeneratorRuntime.mark(function i(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length!==0){n.next=2;break}return n.abrupt("return","47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU");case 2:return n.next=4,PN("SHA-256",e);case 4:return t=n.sent,n.abrupt("return",QN(t));case 6:case"end":return n.stop()}},i)}))).apply(this,arguments)}function E1(){return ft.has("debug","hashing",!1)}PN=window.crypto&&window.crypto.subtle&&typeof window.crypto.subtle.digest=="function"?window.crypto.subtle.digest.bind(window.crypto.subtle):function(i,e){if(i!=="SHA-256")throw Error("Croquet: only SHA-256 available");var t=dc.create(e);return NN(_N(t)).buffer};var Ko={},y7=new TextEncoder;function Eu(i){return ON.apply(this,arguments)}function ON(){return(ON=$t(regeneratorRuntime.mark(function i(e){var t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=y7.encode(e),o.next=3,v7(t);case 3:return n=o.sent,E1()&&(Ko[n]={string:e,buffer:t}),o.abrupt("return",n);case 6:case"end":return o.stop()}},i)}))).apply(this,arguments)}var $E=[],w_={};function x7(i,e){return GN.apply(this,arguments)}function GN(){return(GN=$t(regeneratorRuntime.mark(function i(e,t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Eu(e+yc(t)));case 1:case"end":return n.stop()}},i)}))).apply(this,arguments)}var b_=new Set;function w7(i,e,t,n){return zN.apply(this,arguments)}function zN(){return(zN=$t(regeneratorRuntime.mark(function i(e,t,n,o){var a,l,c,A,u,h,f,d,p;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c=w_[e],A="",!c){m.next=8;break}a=c.codeHashes,l=c.computedCodeHash,A=" (code hashing from cache)",m.next=15;break;case 8:return m.next=10,Promise.all($E);case 10:return a=m.sent,m.next=13,Eu([o].concat(Wt(a)).join("|"));case 13:l=m.sent,w_[e]={codeHashes:a,computedCodeHash:l};case 15:return u=n.hashOverride,h=h7(n,g7),f=u||l,m.next=19,Eu(e+"|"+t+yc(h)+f);case 19:return d=m.sent,E1()&&!b_.has(d)&&(Wt(document.getElementsByTagName("meta")).find(function(b){return b.getAttribute("charset")})||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),Ko[l].what="Version ID",Ko[e].what="Persistent ID",Ko[d].what="Session ID",f!==l&&(a.push(l),Ko[l].what="Computed Version ID (replaced by overrideHash)",Ko[f]={what:"Version ID (as specified by overrideHash)"}),p=[].concat(Wt(a),[f,e,d]).map(function(b){return Fn({hash:b},Ko[b])}),console.log("Croquet: Debug Hashing for session ".concat(d).concat(A),p),b_.add(d)),m.abrupt("return",{id:d,persistentId:e,codeHash:f,computedCodeHash:l});case 22:case"end":return m.stop()}},i)}))).apply(this,arguments)}var C_,S_,tE,HN={exports:{}};S_=Rd,tE=function(i){var e=function o(a){return new o.lib.init(a)};function t(o,a){return a.offset[o]?isNaN(a.offset[o])?a.offset[o]:a.offset[o]+"px":"0px"}function n(o,a){return!(!o||typeof a!="string"||!(o.className&&o.className.trim().split(/\s+/gi).indexOf(a)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},e.lib=e.prototype={toastify:"1.11.2",constructor:e,init:function(o){return o||(o={}),this.options={},this.toastElement=null,this.options.text=o.text||e.defaults.text,this.options.node=o.node||e.defaults.node,this.options.duration=o.duration===0?0:o.duration||e.defaults.duration,this.options.selector=o.selector||e.defaults.selector,this.options.callback=o.callback||e.defaults.callback,this.options.destination=o.destination||e.defaults.destination,this.options.newWindow=o.newWindow||e.defaults.newWindow,this.options.close=o.close||e.defaults.close,this.options.gravity=o.gravity==="bottom"?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=o.positionLeft||e.defaults.positionLeft,this.options.position=o.position||e.defaults.position,this.options.backgroundColor=o.backgroundColor||e.defaults.backgroundColor,this.options.avatar=o.avatar||e.defaults.avatar,this.options.className=o.className||e.defaults.className,this.options.stopOnFocus=o.stopOnFocus===void 0?e.defaults.stopOnFocus:o.stopOnFocus,this.options.onClick=o.onClick||e.defaults.onClick,this.options.offset=o.offset||e.defaults.offset,this.options.escapeMarkup=o.escapeMarkup!==void 0?o.escapeMarkup:e.defaults.escapeMarkup,this.options.style=o.style||e.defaults.style,o.backgroundColor&&(this.options.style.background=o.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var o=document.createElement("div");for(var a in o.className="toastify on "+this.options.className,this.options.position?o.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(o.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):o.className+=" toastify-right",o.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)o.style[a]=this.options.style[a];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)o.appendChild(this.options.node);else if(this.options.escapeMarkup?o.innerText=this.options.text:o.innerHTML=this.options.text,this.options.avatar!==""){var l=document.createElement("img");l.src=this.options.avatar,l.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?o.appendChild(l):o.insertAdjacentElement("afterbegin",l)}if(this.options.close===!0){var c=document.createElement("span");c.innerHTML="&#10006;",c.className="toast-close",c.addEventListener("click",function(m){m.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var A=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&A>360?o.insertAdjacentElement("afterbegin",c):o.appendChild(c)}if(this.options.stopOnFocus&&this.options.duration>0){var u=this;o.addEventListener("mouseover",function(m){window.clearTimeout(o.timeOutValue)}),o.addEventListener("mouseleave",function(){o.timeOutValue=window.setTimeout(function(){u.removeElement(o)},u.options.duration)})}if(this.options.destination!==void 0&&o.addEventListener("click",function(m){m.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),typeof this.options.onClick=="function"&&this.options.destination===void 0&&o.addEventListener("click",function(m){m.stopPropagation(),this.options.onClick()}.bind(this)),Zt(this.options.offset)==="object"){var h=t("x",this.options),f=t("y",this.options),d=this.options.position=="left"?h:"-"+h,p=this.options.gravity=="toastify-top"?f:"-"+f;o.style.transform="translate("+d+","+p+")"}return o},showToast:function(){var o;if(this.toastElement=this.buildToast(),!(o=typeof this.options.selector=="string"?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var a=e.defaults.oldestFirst?o.firstChild:o.lastChild;return o.insertBefore(this.toastElement,a),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(o){o.className=o.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),o.parentNode&&o.parentNode.removeChild(o),this.options.callback.call(o),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var o,a={top:15,bottom:15},l={top:15,bottom:15},c={top:15,bottom:15},A=document.getElementsByClassName("toastify"),u=0;u<A.length;u++){o=n(A[u],"toastify-top")===!0?"toastify-top":"toastify-bottom";var h=A[u].offsetHeight;o=o.substr(9,o.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(A[u].style[o]=c[o]+"px",c[o]+=h+15):n(A[u],"toastify-left")===!0?(A[u].style[o]=a[o]+"px",a[o]+=h+15):(A[u].style[o]=l[o]+"px",l[o]+=h+15)}return this},e.lib.init.prototype=e.lib,e},(C_=HN).exports?C_.exports=tE():S_.Toastify=tE();var b7=HN.exports,WN={exports:{}};(function(i){(function(e,t,n){var o,a=256,l=n.pow(a,6),c=n.pow(2,52),A=2*c,u=255;function h(g,w,I){var v=[],E=m(p((w=w==1?{entropy:!0}:w||{}).entropy?[g,b(t)]:g??function(){try{var M;return o&&(M=o.randomBytes)?M=M(a):(M=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(M)),b(M)}catch{var D=e.navigator,T=D&&D.plugins;return[+new Date,e,T,e.screen,b(t)]}}(),3),v),S=new f(v),C=function(){for(var M=S.g(6),D=l,T=0;M<c;)M=(M+T)*a,D*=a,T=S.g(1);for(;M>=A;)M/=2,D/=2,T>>>=1;return(M+T)/D};return C.int32=function(){return 0|S.g(4)},C.quick=function(){return S.g(4)/4294967296},C.double=C,m(b(S.S),t),(w.pass||I||function(M,D,T,B){return B&&(B.S&&d(B,S),M.state=function(){return d(S,{})}),T?(n.random=M,D):M})(C,E,"global"in w?w.global:this==n,w.state)}function f(g){var w,I=g.length,v=this,E=0,S=v.i=v.j=0,C=v.S=[];for(I||(g=[I++]);E<a;)C[E]=E++;for(E=0;E<a;E++)C[E]=C[S=u&S+g[E%I]+(w=C[E])],C[S]=w;(v.g=function(M){for(var D,T=0,B=v.i,R=v.j,P=v.S;M--;)D=P[B=u&B+1],T=T*a+P[u&(P[B]=P[R=u&R+D])+(P[R]=D)];return v.i=B,v.j=R,T})(a)}function d(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function p(g,w){var I,v=[],E=Zt(g);if(w&&E=="object")for(I in g)try{v.push(p(g[I],w-1))}catch{}return v.length?v:E=="string"?g:g+"\0"}function m(g,w){for(var I,v=g+"",E=0;E<v.length;)w[u&E]=u&(I^=19*w[u&E])+v.charCodeAt(E++);return b(w)}function b(g){return String.fromCharCode.apply(0,g)}if(m(n.random(),t),i.exports){i.exports=h;try{o=Li("crypto")}catch{}}else n.seedrandom=h})(typeof self<"u"?self:Rd,[],Math)})(WN);var Md,p1=WN.exports;(function(){function i(S){this.mode=t.MODE_8BIT_BYTE,this.data=S,this.parsedData=[];for(var C=0,M=this.data.length;C<M;C++){var D=[],T=this.data.charCodeAt(C);T>65536?(D[0]=240|(1835008&T)>>>18,D[1]=128|(258048&T)>>>12,D[2]=128|(4032&T)>>>6,D[3]=128|63&T):T>2048?(D[0]=224|(61440&T)>>>12,D[1]=128|(4032&T)>>>6,D[2]=128|63&T):T>128?(D[0]=192|(1984&T)>>>6,D[1]=128|63&T):D[0]=T,this.parsedData.push(D)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(S,C){this.typeNumber=S,this.errorCorrectLevel=C,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}i.prototype={getLength:function(S){return this.parsedData.length},write:function(S){for(var C=0,M=this.parsedData.length;C<M;C++)S.put(this.parsedData[C],8)}},e.prototype={addData:function(S){var C=new i(S);this.dataList.push(C),this.dataCache=null},isDark:function(S,C){if(S<0||this.moduleCount<=S||C<0||this.moduleCount<=C)throw new Error(S+","+C);return this.modules[S][C]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(S,C){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var M=0;M<this.moduleCount;M++){this.modules[M]=new Array(this.moduleCount);for(var D=0;D<this.moduleCount;D++)this.modules[M][D]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(S,C),this.typeNumber>=7&&this.setupTypeNumber(S),this.dataCache==null&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,C)},setupPositionProbePattern:function(S,C){for(var M=-1;M<=7;M++)if(!(S+M<=-1||this.moduleCount<=S+M))for(var D=-1;D<=7;D++)C+D<=-1||this.moduleCount<=C+D||(this.modules[S+M][C+D]=0<=M&&M<=6&&(D==0||D==6)||0<=D&&D<=6&&(M==0||M==6)||2<=M&&M<=4&&2<=D&&D<=4)},getBestMaskPattern:function(){for(var S=0,C=0,M=0;M<8;M++){this.makeImpl(!0,M);var D=d.getLostPoint(this);(M==0||S>D)&&(S=D,C=M)}return C},createMovieClip:function(S,C,M){var D=S.createEmptyMovieClip(C,M);this.make();for(var T=0;T<this.modules.length;T++)for(var B=1*T,R=0;R<this.modules[T].length;R++){var P=1*R;this.modules[T][R]&&(D.beginFill(0,100),D.moveTo(P,B),D.lineTo(P+1,B),D.lineTo(P+1,B+1),D.lineTo(P,B+1),D.endFill())}return D},setupTimingPattern:function(){for(var S=8;S<this.moduleCount-8;S++)this.modules[S][6]==null&&(this.modules[S][6]=S%2==0);for(var C=8;C<this.moduleCount-8;C++)this.modules[6][C]==null&&(this.modules[6][C]=C%2==0)},setupPositionAdjustPattern:function(){for(var S=d.getPatternPosition(this.typeNumber),C=0;C<S.length;C++)for(var M=0;M<S.length;M++){var D=S[C],T=S[M];if(this.modules[D][T]==null)for(var B=-2;B<=2;B++)for(var R=-2;R<=2;R++)this.modules[D+B][T+R]=B==-2||B==2||R==-2||R==2||B==0&&R==0}},setupTypeNumber:function(S){for(var C=d.getBCHTypeNumber(this.typeNumber),M=0;M<18;M++){var D=!S&&(C>>M&1)==1;this.modules[Math.floor(M/3)][M%3+this.moduleCount-8-3]=D}for(M=0;M<18;M++)D=!S&&(C>>M&1)==1,this.modules[M%3+this.moduleCount-8-3][Math.floor(M/3)]=D},setupTypeInfo:function(S,C){for(var M=this.errorCorrectLevel<<3|C,D=d.getBCHTypeInfo(M),T=0;T<15;T++){var B=!S&&(D>>T&1)==1;T<6?this.modules[T][8]=B:T<8?this.modules[T+1][8]=B:this.modules[this.moduleCount-15+T][8]=B}for(T=0;T<15;T++)B=!S&&(D>>T&1)==1,T<8?this.modules[8][this.moduleCount-T-1]=B:T<9?this.modules[8][15-T-1+1]=B:this.modules[8][15-T-1]=B;this.modules[this.moduleCount-8][8]=!S},mapData:function(S,C){for(var M=-1,D=this.moduleCount-1,T=7,B=0,R=this.moduleCount-1;R>0;R-=2)for(R==6&&R--;;){for(var P=0;P<2;P++)if(this.modules[D][R-P]==null){var _=!1;B<S.length&&(_=(S[B]>>>T&1)==1),d.getMask(C,D,R-P)&&(_=!_),this.modules[D][R-P]=_,--T==-1&&(B++,T=7)}if((D+=M)<0||this.moduleCount<=D){D-=M,M=-M;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(S,C,M){for(var D=g.getRSBlocks(S,C),T=new w,B=0;B<M.length;B++){var R=M[B];T.put(R.mode,4),T.put(R.getLength(),d.getLengthInBits(R.mode,S)),R.write(T)}var P=0;for(B=0;B<D.length;B++)P+=D[B].dataCount;if(T.getLengthInBits()>8*P)throw new Error("code length overflow. ("+T.getLengthInBits()+">"+8*P+")");for(T.getLengthInBits()+4<=8*P&&T.put(0,4);T.getLengthInBits()%8!=0;)T.putBit(!1);for(;!(T.getLengthInBits()>=8*P||(T.put(e.PAD0,8),T.getLengthInBits()>=8*P));)T.put(e.PAD1,8);return e.createBytes(T,D)},e.createBytes=function(S,C){for(var M=0,D=0,T=0,B=new Array(C.length),R=new Array(C.length),P=0;P<C.length;P++){var _=C[P].dataCount,Q=C[P].totalCount-_;D=Math.max(D,_),T=Math.max(T,Q),B[P]=new Array(_);for(var W=0;W<B[P].length;W++)B[P][W]=255&S.buffer[W+M];M+=_;var U=d.getErrorCorrectPolynomial(Q),H=new b(B[P],U.getLength()-1).mod(U);for(R[P]=new Array(U.getLength()-1),W=0;W<R[P].length;W++){var O=W+H.getLength()-R[P].length;R[P][W]=O>=0?H.get(O):0}}var F=0;for(W=0;W<C.length;W++)F+=C[W].totalCount;var z=new Array(F),k=0;for(W=0;W<D;W++)for(P=0;P<C.length;P++)W<B[P].length&&(z[k++]=B[P][W]);for(W=0;W<T;W++)for(P=0;P<C.length;P++)W<R[P].length&&(z[k++]=R[P][W]);return z};for(var t={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},o=0,a=1,l=2,c=3,A=4,u=5,h=6,f=7,d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(S){for(var C=S<<10;d.getBCHDigit(C)-d.getBCHDigit(d.G15)>=0;)C^=d.G15<<d.getBCHDigit(C)-d.getBCHDigit(d.G15);return(S<<10|C)^d.G15_MASK},getBCHTypeNumber:function(S){for(var C=S<<12;d.getBCHDigit(C)-d.getBCHDigit(d.G18)>=0;)C^=d.G18<<d.getBCHDigit(C)-d.getBCHDigit(d.G18);return S<<12|C},getBCHDigit:function(S){for(var C=0;S!=0;)C++,S>>>=1;return C},getPatternPosition:function(S){return d.PATTERN_POSITION_TABLE[S-1]},getMask:function(S,C,M){switch(S){case o:return(C+M)%2==0;case a:return C%2==0;case l:return M%3==0;case c:return(C+M)%3==0;case A:return(Math.floor(C/2)+Math.floor(M/3))%2==0;case u:return C*M%2+C*M%3==0;case h:return(C*M%2+C*M%3)%2==0;case f:return(C*M%3+(C+M)%2)%2==0;default:throw new Error("bad maskPattern:"+S)}},getErrorCorrectPolynomial:function(S){for(var C=new b([1],0),M=0;M<S;M++)C=C.multiply(new b([1,p.gexp(M)],0));return C},getLengthInBits:function(S,C){if(1<=C&&C<10)switch(S){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:case t.MODE_KANJI:return 8;default:throw new Error("mode:"+S)}else if(C<27)switch(S){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+S)}else{if(!(C<41))throw new Error("type:"+C);switch(S){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+S)}}},getLostPoint:function(S){for(var C=S.getModuleCount(),M=0,D=0;D<C;D++)for(var T=0;T<C;T++){for(var B=0,R=S.isDark(D,T),P=-1;P<=1;P++)if(!(D+P<0||C<=D+P))for(var _=-1;_<=1;_++)T+_<0||C<=T+_||P==0&&_==0||R==S.isDark(D+P,T+_)&&B++;B>5&&(M+=3+B-5)}for(D=0;D<C-1;D++)for(T=0;T<C-1;T++){var Q=0;S.isDark(D,T)&&Q++,S.isDark(D+1,T)&&Q++,S.isDark(D,T+1)&&Q++,S.isDark(D+1,T+1)&&Q++,Q!=0&&Q!=4||(M+=3)}for(D=0;D<C;D++)for(T=0;T<C-6;T++)S.isDark(D,T)&&!S.isDark(D,T+1)&&S.isDark(D,T+2)&&S.isDark(D,T+3)&&S.isDark(D,T+4)&&!S.isDark(D,T+5)&&S.isDark(D,T+6)&&(M+=40);for(T=0;T<C;T++)for(D=0;D<C-6;D++)S.isDark(D,T)&&!S.isDark(D+1,T)&&S.isDark(D+2,T)&&S.isDark(D+3,T)&&S.isDark(D+4,T)&&!S.isDark(D+5,T)&&S.isDark(D+6,T)&&(M+=40);var W=0;for(T=0;T<C;T++)for(D=0;D<C;D++)S.isDark(D,T)&&W++;return M+=10*(Math.abs(100*W/C/C-50)/5)}},p={glog:function(S){if(S<1)throw new Error("glog("+S+")");return p.LOG_TABLE[S]},gexp:function(S){for(;S<0;)S+=255;for(;S>=256;)S-=255;return p.EXP_TABLE[S]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)p.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)p.EXP_TABLE[m]=p.EXP_TABLE[m-4]^p.EXP_TABLE[m-5]^p.EXP_TABLE[m-6]^p.EXP_TABLE[m-8];for(m=0;m<255;m++)p.LOG_TABLE[p.EXP_TABLE[m]]=m;function b(S,C){if(S.length==null)throw new Error(S.length+"/"+C);for(var M=0;M<S.length&&S[M]==0;)M++;this.num=new Array(S.length-M+C);for(var D=0;D<S.length-M;D++)this.num[D]=S[D+M]}function g(S,C){this.totalCount=S,this.dataCount=C}function w(){this.buffer=[],this.length=0}b.prototype={get:function(S){return this.num[S]},getLength:function(){return this.num.length},multiply:function(S){for(var C=new Array(this.getLength()+S.getLength()-1),M=0;M<this.getLength();M++)for(var D=0;D<S.getLength();D++)C[M+D]^=p.gexp(p.glog(this.get(M))+p.glog(S.get(D)));return new b(C,0)},mod:function(S){if(this.getLength()-S.getLength()<0)return this;for(var C=p.glog(this.get(0))-p.glog(S.get(0)),M=new Array(this.getLength()),D=0;D<this.getLength();D++)M[D]=this.get(D);for(D=0;D<S.getLength();D++)M[D]^=p.gexp(p.glog(S.get(D))+C);return new b(M,0).mod(S)}},g.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],g.getRSBlocks=function(S,C){var M=g.getRsBlockTable(S,C);if(M==null)throw new Error("bad rs block @ typeNumber:"+S+"/errorCorrectLevel:"+C);for(var D=M.length/3,T=[],B=0;B<D;B++)for(var R=M[3*B+0],P=M[3*B+1],_=M[3*B+2],Q=0;Q<R;Q++)T.push(new g(P,_));return T},g.getRsBlockTable=function(S,C){switch(C){case n.L:return g.RS_BLOCK_TABLE[4*(S-1)+0];case n.M:return g.RS_BLOCK_TABLE[4*(S-1)+1];case n.Q:return g.RS_BLOCK_TABLE[4*(S-1)+2];case n.H:return g.RS_BLOCK_TABLE[4*(S-1)+3];default:return}},w.prototype={get:function(S){var C=Math.floor(S/8);return(this.buffer[C]>>>7-S%8&1)==1},put:function(S,C){for(var M=0;M<C;M++)this.putBit((S>>>C-M-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(S){var C=Math.floor(this.length/8);this.buffer.length<=C&&this.buffer.push(0),S&&(this.buffer[C]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var S=function(C,M){this._bIsPainted=!1,this._htOption=M,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=M.width,this._elCanvas.height=M.height,C.appendChild(this._elCanvas),this._el=C,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return S.prototype.draw=function(C){var M=this._oContext,D=this._htOption,T=C.getModuleCount(),B=D.width/T,R=D.height/T,P=Math.round(B),_=Math.round(R);this.clear();for(var Q=0;Q<T;Q++)for(var W=0;W<T;W++){var U=C.isDark(Q,W),H=W*B,O=Q*R;M.strokeStyle=U?D.colorDark:D.colorLight,M.lineWidth=1,M.fillStyle=U?D.colorDark:D.colorLight,M.fillRect(H,O,B,R),M.strokeRect(Math.floor(H)+.5,Math.floor(O)+.5,P,_),M.strokeRect(Math.ceil(H)-.5,Math.ceil(O)-.5,P,_)}this._bIsPainted=!0},S.prototype.isPainted=function(){return this._bIsPainted},S.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},S.prototype.round=function(C){return C&&Math.floor(1e3*C)/1e3},S}();function E(S,C){for(var M=1,D=function(P){var _=encodeURI(P).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return _.length+(_.length!=P?3:0)}(S),T=0,B=I.length;T<=B;T++){var R=0;switch(C){case n.L:R=I[T][0];break;case n.M:R=I[T][1];break;case n.Q:R=I[T][2];break;case n.H:R=I[T][3]}if(D<=R)break;M++}if(M>I.length)throw new Error("Too long data");return M}(Md=function(S,C){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:n.H},typeof C=="string"&&(C={text:C}),C)for(var M in C)this._htOption[M]=C[M];typeof S=="string"&&(S=document.getElementById(S)),this._htOption.useSVG&&(v=svgDrawer),this._el=S,this._oQRCode=null,this._oDrawing=new v(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(S){this._oQRCode=new e(E(S,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(S),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},Md.prototype.clear=function(){this._oDrawing.clear()},Md.prototype.getCanvas=function(){for(var S=0;S<this._el.children.length;S++){var C=this._el.children[S];if(C.tagName==="CANVAS")return C}return null},Md.CorrectLevel=n})();var E_=Md,C7=Date.now();typeof performance>"u"&&(window.performance={now:function(){return Date.now()-C7}});var Cu,Td,S7=["simulate","update","render","snapshot"],c1={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"},m1=null,lr=null,vn=null,nE=0,$r=null,Zo=null;function E7(i){for(m1=i;i.firstChild;)i.removeChild(i.firstChild);i.style.background="#faf0dc",$r=document.createElement("canvas"),Zo=$r.getContext("2d"),$r.id="text_stats",$r.width=Math.min(140,window.innerWidth),$r.height=36,$r.style.width=$r.width,$r.style.height=$r.height,Zo.font="9.5pt sans-serif",i.appendChild($r),i.title=Object.entries(c1).map(function(t){var n=Ft(t,2),o=n[0],a=n[1];return"".concat(a,": ").concat(o)}).join(`
`),(lr=document.createElement("canvas")).width=Math.min(125,window.innerWidth),lr.height=125,lr.style.width="100%";var e=document.createElement("div");e.id="innerDiv",i.appendChild(e),e.appendChild(lr),vn=lr.getContext("2d")}var Za=[],I_=0,A1=!1,yn=VN(0),zo={},eI=1e3/60;function xu(i){return 20*(1-i/eI)+60}function I7(i){Cu=function(n){var o=document.createElement("canvas");return o.width=n.width,o.height=n.height,o.style.width="100%",o.style.position="absolute",o.style.left="0px",m1.querySelector("#innerDiv").appendChild(o),o}(i),(Td=Cu.getContext("2d")).strokeStyle="rgba(255, 255, 255, 0.5)";for(var e=0;e<60;e+=eI){var t=xu(e);Td.moveTo(0,t),Td.lineTo(Cu.width,t),Td.stroke()}}function VN(i){return{start:i,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:A1}}function M7(i){yn.total=i-yn.start;var e=Math.min(120,window.innerWidth);if(Za.length>=e&&Za.splice(0,Za.length-e+1),Za.push(yn),!(Za.length<=1)&&m1&&m1.offsetHeight!==0){var t=Za.slice(1).filter(function(p){return p.total}),n=t.map(function(p){return p.total}).reduce(function(p,m){return p+m},0)/t.length,o=Math.max.apply(Math,Wt(t.map(function(p){return p.total})));Math.max.apply(Math,Wt(t.map(function(p){return Math.max(p.backlog,p.network)}))),I_=1e3,function(p,m){Zo.globalCompositeOperation="copy",Zo.fillStyle="rgb(255, 255, 255, 0)",Zo.fillRect(0,0,$r.width,$r.height),Zo.fillStyle="rgb(0, 0, 0, 1)",Zo.globalCompositeOperation="source-over";var b="".concat(yn.users," users, ").concat(Math.round(1e3/p)," fps");m>70&&(b+=" ".concat(Math.ceil(m).toLocaleString(),"ms")),Zo.fillText(b,2,15),b=yn.backlog<100&&yn.activity<1e3?"latency: ".concat(yn.latency," ms"):"backlog: ".concat(yn.backlog<100?"0.0":(yn.backlog/1e3).toFixed(1)," s"),Zo.fillText(b,2,33)}(n,o),Cu||I7(lr),nE===lr.width?(vn.globalCompositeOperation="copy",vn.drawImage(lr,1,0,lr.width-1,lr.height,0,0,lr.width-1,lr.height),vn.globalCompositeOperation="source-over",vn.fillStyle="transparent",vn.fillRect(lr.width-1,0,1,lr.height)):nE++;var a=function(p){return xu(p/I_*-2*eI)+5},l=Za[Za.length-1],c=nE-.5,A=xu(0);vn.beginPath(),vn.moveTo(c,A),vn.lineTo(c,xu(l.total)),vn.strokeStyle=c1[l.connected?"total":"network"],vn.stroke(),vn.beginPath(),vn.moveTo(c,A),A=xu(l.total);var u,h=0,f=Gt(S7);try{for(f.s();!(u=f.n()).done;){var d=u.value;l.items[d]&&(A=xu(h+=l.items[d]),vn.lineTo(c,A),vn.strokeStyle=c1[d],vn.stroke(),vn.beginPath(),vn.moveTo(c,A))}}catch(p){f.e(p)}finally{f.f()}l.network&&(vn.beginPath(),vn.moveTo(c,a(0)),vn.lineTo(c,a(l.network)),vn.strokeStyle=c1.network,vn.stroke())}}var vu=[],on={animationFrame:function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};M7(i),yn=VN(i);for(var t=0,n=Object.entries(e);t<n.length;t++){var o=Ft(n[t],2),a=o[0],l=o[1];this[a](l)}},begin:function(i){var e=performance.now();yn.items[i]=(yn.items[i]||0)-e;var t=vu[vu.length-1];return t&&(yn.items[t]+=e),vu.push(i),e},end:function(i){var e=performance.now();yn.items[i]+=e;var t=vu.pop();if(t!==i)throw Error('Unmatched stats calls: expected end("'.concat(t,'"), got end("').concat(i,'")'));var n=vu[vu.length-1];return n&&(yn.items[n]-=e),e},backlog:function(i){yn.backlog=Math.max(i,yn.backlog)},network:function(i){yn.network=i},starvation:function(i){yn.network=i},latency:function(i){yn.latency=i},activity:function(i){yn.activity=i},users:function(i){yn.users=i},connected:function(i){var e=A1;yn.connected=A1=i,e&&!A1&&Cu&&(Cu.remove(),Td=null)},perSecondTally:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,t=Object.entries(i);e<t.length;e++){var n=Ft(t[e],2),o=n[0],a=n[1];zo[o]=(zo[o]||0)+a}},stepSession:function(i){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],t=Math.floor(Date.now()/1e3),n=null;if(t!==zo.second){if(zo.second&&e&&(zo.requestedMessages||zo.sentMessagesTotal)){n=Fn({},zo);var o=t-zo.second;o!==1&&(n.sampleSeconds=o),n.sentBundles&&(n.averageDelay=Math.round(10*n.sendDelay/n.sentMessagesTotal)/10,n.averageBundlePayload=Math.round(n.sentBundlePayload/n.sentBundles)),delete n.second,delete n.sendDelay,delete n.sentBundlePayload}zo={second:t}}return n}},Iu="ontouchstart"in document.documentElement,XN=window.parent!==window,OE=Iu?20:12,M_=Iu?0:15,T_=!1;function T7(){if(!T_){T_=!0;var i=`
        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all `.concat(.3,`s ease; }
        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }
        #croquet_dock.debug { width: 84px; }
        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }

        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }
        #croquet_dock.active #croquet_badge { left: 2%; }
        #croquet_dock:not(.debug) #croquet_badge { display: none; }

        .croquet_dock_button { position: absolute; width: `).concat(OE,`%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }
        .croquet_dock_button:focus { outline: 0; }
        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }
        #croquet_dock:not(.active) .croquet_dock_button { display: none; }
        #croquet_dock_left { right: `).concat(2+M_+OE+2,`% }
        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }
        #croquet_dock_right { right: `).concat(2+M_,`%; }
        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }
        #croquet_dock_pin { right: `).concat(2,`%; }
        #croquet_dock_pin.pinned { background: #cce6ff; }

        #croquet_dock_content { position: absolute; left: `).concat(2,"px; top: ").concat(2,"px; right: ").concat(2,"px; bottom: ").concat(2,`px; background: white; overflow: hidden; }
        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }
        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }

        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }
        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }
        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }
        #croquet_qrcode canvas { image-rendering: pixelated; }

        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }
        #croquet_stats:not(.active) { display: none; }
`),e=document.createElement("style");e.innerHTML=i,document.head.insertBefore(e,document.head.getElementsByTagName("style")[0])}}var D_=!1,nl,B_=!1;function Mu(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i&&At.showMessage(i,Fn(Fn({},e),{},{level:"warning"}))}function YN(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i&&At.showMessage(i,Fn(Fn({},e),{},{level:"status"}))}function kr(i,e){console.error("Error during ".concat(i),e);var t=(e.stack||"").split(`
`).filter(function(n){return!n.match(/croquet-.*\.min.js/)}).join(`
`);At.showMessage("<b>Error during ".concat(i,": ").concat(e.message,`</b>

`).concat(t).replace(/\n/g,"<br>"),{level:"error",duration:1e4,stopOnFocus:!0})}function D7(i,e){var t=wu(At.root,function(){return document.body});if(t===!1)return null;(function(){if(!B_){B_=!0;var a=document.createElement("style");a.innerHTML=`/*!
        * Toastify js 1.5.0
        * https://github.com/apvarun/toastify-js
        * @license MIT licensed
        *
        * Copyright (C) 2018 Varun A P
        */
        .toastify {
            padding: 12px 20px;
            color: #ffffff;
            display: inline-block;
            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);
            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);
            background: linear-gradient(135deg, #73a5ff, #5477f5);
            position: fixed;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
            border-radius: 2px;
            cursor: pointer;
            text-decoration: none;
            max-width: calc(50% - 20px);
            z-index: 2147483647;
        }
        .toastify.on {
            opacity: 1;
        }
        .toast-close {
            opacity: 0.4;
            padding: 0 5px;
        }
        .toastify-right {
            right: 15px;
        }
        .toastify-left {
            left: 15px;
        }
        .toastify-top {
            top: -150px;
        }
        .toastify-bottom {
            bottom: -150px;
        }
        .toastify-rounded {
            border-radius: 25px;
        }
        .toastify-avatar {
            width: 1.5em;
            height: 1.5em;
            margin: 0 5px;
            border-radius: 2px;
        }
        @media only screen and (max-width: 360px) {
            .toastify-right, .toastify-left {
                margin-left: auto;
                margin-right: auto;
                left: 0;
                right: 0;
                max-width: fit-content;
            }
        }

        .toastify {
            font-family: sans-serif;
            border-radius: 8px;
        }

        .toastify-center {
            margin-left: auto;
            margin-right: auto;
            left: 0;
            right: 0;
            max-width: fit-content;
            max-width: -moz-fit-content;
        }
`,document.head.insertBefore(a,document.head.getElementsByTagName("style")[0])}})();var n,o=Fn({text:i,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0},e);return t instanceof Element&&t!==document.body?(n=t.id)||(t.id=n="_croquetToastParent"):typeof t=="string"&&(n=t),n&&(o.selector=n),b7(o).showToast()}try{if((nl=window.localStorage)["croquet-debug-persist-allowed"]="true",nl["croquet-debug-persist-allowed"]!=="true")throw Error("localStorage not persisted");delete nl["croquet-debug-persist-allowed"]}catch{console.warn("localStorage not allowed"),nl={}}var Is,uc,qr={get pinned(){return nl[window.location.pathname+"/croquet-debug-ui-pinned"]==="true"},set pinned(i){nl[window.location.pathname+"/croquet-debug-ui-pinned"]=!!i},get activePage(){return nl[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(i){nl[window.location.pathname+"/croquet-debug-ui-activePage"]=i}},$a=function(i){i.preventDefault(),i.stopPropagation()};function iE(i,e,t){var n=document.createElement("canvas"),o=n.width=40*OE/12,a=n.height=60,l=n.getContext("2d");l.font="36px Arial",l.textAlign="center",l.textBaseline="middle",l.fillStyle="black",l.fillText(i,o/2,.55*a);var c=document.createElement("button");c.id=e,c.className="croquet_dock_button";var A=function(u){u.preventDefault(),u.stopPropagation(),t()};return Iu?(c.ontouchstart=A,c.ontouchend=$a,c.onpointerdown=$a,c.onpointerup=$a):(c.onclick=A,c.onpointerdown=$a,c.onpointerup=$a),c.appendChild(n),c}function B7(i,e){if(At.badge!==!1){var t=function(A){for(var u=new p1(A),h=["bcdfghjklmnpqrstvwxyz","aeiou"],f="",d=0;d<5;d++)f+=h[d%2][u.quick()*h[d%2].length|0];return f}(e);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+t;i.firstChild;)i.removeChild(i.firstChild);var n=document.createElement("canvas"),o=n.width=120,a=n.height=40;n.style.width="100%",i.appendChild(n);var l=n.getContext("2d"),c=function(A){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=new p1(A),f=[],d=0;d<u;d++)f.push("hsl(".concat(360*h.quick(),", 50%, 70%)"));return f}(e,2);l.fillStyle=c[0],l.beginPath(),l.moveTo(0,0),l.lineTo(0,a),l.lineTo(o,0),l.closePath(),l.fill(),l.fillStyle=c[1],l.beginPath(),l.moveTo(o,a),l.lineTo(o,0),l.lineTo(0,a),l.closePath(),l.fill(),l.font="30px Arial",l.textAlign="center",l.textBaseline="middle",l.fillStyle="black",l.fillText(t,o/2,a/2)}}function ZN(i,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.firstChild;)i.removeChild(i.firstChild);return new E_(i,Fn({text:e,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:E_.CorrectLevel.L},t))}function L7(){if(At.root!==!1&&At.qrcode!==!1&&!ft.noqr){var i=At.sessionURL;if(i){var e=wu(At.qrcode);e&&(Iu||(e.onclick=function(t){var n;t.preventDefault(),t.stopPropagation(),t.shiftKey?(n=document.getElementById("croquet_dock"))&&n.classList.toggle("debug"):window.open(i)}),ZN(e,i).getCanvas().style.width="100%")}else console.warn("App.sessionURL is not set")}}var Yv=0;function R7(){(function(){if(!D_){D_=!0;var t=`
        `.concat(XN?"body { min-height: 100vh }":"",`
        #croquet_spinnerOverlay {
            z-index: 1000;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color:#333;
            opacity:0.9;
            display:flex;
            align-items:center;
            justify-content:center;
            transition: opacity 1.0s ease-out;
        }
        /* https://github.com/lukehaas/css-loaders */
        @keyframes croquet_dots {
            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }
            40% { box-shadow: 0 2.5em 0 0; }
        }
        #croquet_loader,
        #croquet_loader::before,
        #croquet_loader::after {
          border-radius: 50%;
          width: 2.5em;
          height: 2.5em;
          animation: croquet_dots 1.8s infinite ease-in-out;
        }
        #croquet_loader {
          color: #fff;
          font-size: 10px;
          margin: 80px auto;
          position: relative;
          text-indent: -9999em;
          animation-delay: -0.16s;
        }
        #croquet_loader::before,
        #croquet_loader::after {
          content: '';
          position: absolute;
          top: 0;
        }
        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }
        #croquet_loader::after { left: 3.5em; }
        #croquet_spinnerOverlay.croquet_error>*,
        #croquet_spinnerOverlay.croquet_error>*::before,
        #croquet_spinnerOverlay.croquet_error>*::after {
            color: #f00;
        }
        #croquet_spinnerOverlay.croquet_fatal>*,
        #croquet_spinnerOverlay.croquet_fatal>*::before,
        #croquet_spinnerOverlay.croquet_fatal>*::after {
            color: #f00;
            box-shadow: 0 2.5em 0 0 !important;
        }
`),n=document.createElement("style");n.innerHTML=t,document.head.insertBefore(n,document.head.getElementsByTagName("style")[0])}})();var i=document.createElement("div");i.id="croquet_spinnerOverlay";var e=document.createElement("div");return e.id="croquet_loader",e.innerText="Catching up...",i.appendChild(e),i}function wu(i,e){if(i===!1)return!1;if(i instanceof Element)return i;if(typeof i=="string"){var t=document.getElementById(i);if(t)return t}return e?e():null}var L_=new Set,At={sessionURL:window.location.href,root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!ft.nodock){var e=i.debug||ft.debug,t=document.getElementById("croquet_dock");t&&t.parentElement.removeChild(t);var n=wu(At.root,function(){return document.body});if(n){T7();var o=document.createElement("div");o.id="croquet_dock",e&&o.classList.add("debug"),XN&&!i.iframe&&(o.style.display="none"),n.appendChild(o);var a,l=document.createElement("div");l.id="croquet_dock_bar",o.appendChild(l),i.badge!==!1&&((a=document.createElement("div")).id="croquet_badge",l.appendChild(a),At.badge=a);var c=document.createElement("div");c.id="croquet_dock_content",o.appendChild(c);var A,u,h=[];if(i.qrcode!==!1){var f=At.sessionURL;f&&((A=document.createElement("div")).id="croquet_qrcode",c.appendChild(A),h.push(A.id),At.qrcode=A,e||(qr.activePage=A.id))}if(i.stats!==!1&&((u=document.createElement("div")).id="croquet_stats",c.appendChild(u),h.push(u.id),At.stats=u),h.length){let D=function(T){var B,R=h.length,P=0;if(qr.activePage){var _=h.indexOf(qr.activePage);_>=0?(P=_,B=document.getElementById(qr.activePage)):qr.activePage=null}var Q,W=h[(P+R+T)%R];W===qr.activePage?Q=B:(B&&B.classList.remove("active"),Q=document.getElementById(W)),Q&&Q.classList.add("active"),qr.activePage=W};h.length>1&&(l.appendChild(iE("<","croquet_dock_left",function(){return D(-1)})),l.appendChild(iE(">","croquet_dock_right",function(){return D(1)}))),D(0)}if(!Iu&&!i.alwaysPinned){var d=iE("\u{1F4CC}","croquet_dock_pin",function(){qr.pinned=!qr.pinned,p()}),p=function(){qr.pinned?d.classList.add("pinned"):d.classList.remove("pinned")};p(),l.appendChild(d)}var m=200,b=166,g=8,w=function(D){o.style.width="".concat(D,"px");var T=1.18*D;o.style.height="".concat(T,"px");var B=18*D/100;l.style.height="".concat(B,"px"),c.style.top="".concat(B+2,"px"),a&&(a.style.height="".concat(.9*B,"px"),a.style.width="".concat(.9*B*3,"px")),A&&(A.style.border="".concat(g*D/m,"px solid white"))},I=function(){o.style.width=o.style.height="",l.style.height="",c.style.top="",a&&(a.style.height=a.style.width=""),A&&(A.style.border="")},v=i.fixedSize||m,E=function(){return o.classList.contains("active")},S=function(){o.classList.add("active"),w(v),setTimeout(function(){return o.style.transition="none"},300)},C=function(){o.style.transition="",o.classList.remove("active"),I()};if(Iu)C(),o.ontouchstart=function(D){D.preventDefault(),D.stopPropagation(),E()?C():S()},o.ontouchend=$a,o.onpointerdown=$a,o.onpointerup=$a;else if(i.alwaysPinned?S():(qr.pinned?S():C(),o.onmouseenter=S,o.onmouseleave=function(){qr.pinned||C()}),!i.fixedSize){var M=0;o.addEventListener("wheel",function(D){D.stopPropagation();var T=Date.now();if(!(T-M<100)){M=T;var B=D.deltaY;B=Math.sign(B)*Math.min(5,Math.abs(B));var R=.8*Math.min(window.innerWidth,window.innerHeight);v=Math.max(b,Math.min(R,o.offsetWidth/Math.pow(1.05,B))),w(v)}},{passive:!0})}}}},makeSessionWidgets:function(i){(function(e){if(e&&At.root!==!1){var t=wu(At.badge);t&&B7(t,e)}})(i),L7(),function(){if(At.root!==!1&&!ft.nostats){var e=wu(At.stats);e&&E7(e)}}()},makeQRCanvas:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!At.sessionURL)return null;var e=document.createElement("div"),t=ZN(e,At.sessionURL,i);return t&&t.getCanvas()},clearSessionMoniker:function(){At.badge!==!1&&(document.title=document.title.replace(/:.*/,""))},showSyncWait:function(i){At.root===!1?i=!1:Is||(Is=R7()),function(e){if(uc!==e&&(typeof uc!="string"||e!==!0))if(At.sync===!1&&(e=!1),uc=e,e)clearTimeout(Yv),Yv=setTimeout(function(){uc&&(wu(At.root,function(){return document.body}).appendChild(Is),Is.style.opacity=.9,Is.className=uc==="error"?"croquet_error":uc==="fatal"?"croquet_fatal":"")},500);else{if(!Is)return;clearTimeout(Yv),Is.style.opacity=0,Is.className="",Yv=setTimeout(function(){uc||Is.parentElement&&Is.parentElement.removeChild(Is)},500)}}(i)},messageFunction:function(i){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.level;return n==="error"?(e="orangered,red",console.error(i)):n==="warning"?(e="gold,orange",console.warn(i)):e="silver,gray",D7(i,Fn({style:{background:"linear-gradient(90deg,".concat(e,")")}},t))},showMessage:function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.only==="once"){if(L_.has(i))return null;L_.add(i)}return e.level==="fatal"&&(e.level="error",e.showSyncWait="fatal"),e.showSyncWait&&(e.showSyncWait!=="fatal"||e.duration||(e.duration=-1),At.showSyncWait(e.showSyncWait)),ft.nomessages||At.root===!1||At.messages===!1||!At.messageFunction?(e.level==="warning"&&console.warn(i),e.level==="error"&&console.error(i),null):At.messageFunction(i,e)},isCroquetHost:function(i){return i.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(i)||i.endsWith("ngrok.io")},referrerURL:function(){var i=new URL(At.sessionURL),e=this.isCroquetHost(i.hostname);return"".concat(i.origin).concat(i.pathname).concat(e?i.search:"")},autoSession:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"q"};typeof i=="string"&&(i={key:i}),i||(i={});var e=i.key||"q",t=new URL(window.location),n="",o=t.search.slice(1).split("&"),a=o.find(function(A){return A.split("=")[0]===e});if(a?n=a.replace(/[^=]*=/,""):(n=o.find(function(A){return!A.includes("=")}))||(n=t.hash.slice(1))&&(t.hash="",t.search?t.searchParams.set(e,n):t.search=n),n)try{n=decodeURIComponent(n)}catch{}else n=Math.floor(Math.random()*Math.pow(36,10)).toString(36),t.searchParams.set(e,n);var l=t.toString("");window.location.href!==l&&(window.history.replaceState({},"",l),At.sessionURL=l),ft.has("debug","session")&&console.log('Croquet.App.autoSession: "'.concat(n,'"'));var c=Promise.resolve(n);return c[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),n},c},autoPassword:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"pw",scrub:!1,keyless:!1},e=i.key||"pw",t=i.scrub&&!ft.has("debug","password"),n=i.keyless,o=new URL(window.location),a="",l=o.hash.slice(1);if(l){var c=l.split("&"),A=c.find(function(f){return f.split("=")[0]===e});A?(a=A.replace(/[^=]*=/,""))&&t&&(o.hash=c.filter(function(f){return f.split("=")[0]!==e}).join("&")):n&&(a=c.find(function(f){return!f.includes("=")}))&&t&&(o.hash=c.filter(function(f){return f!==a}).join("&"))}if(!a){var u=new Uint8Array(16);window.crypto.getRandomValues(u),a=QN(u.buffer),o.hash=l?"".concat(l,"&").concat(e,"=").concat(a):n?a:"".concat(e,"=").concat(a),At.sessionURL=o.href,t&&(o.hash=l)}if(ft.has("debug","session")&&console.log("Croquet.App.sessionUrl: ".concat(At.sessionURL)),window.location.href!==o.href&&window.history.replaceState({},"",o.href),a)try{a=decodeURIComponent(a)}catch{}ft.has("debug","session")&&console.log('Croquet.App.autoPassword: "'.concat(a,'"'));var h=Promise.resolve(a);return h[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),a},h}};function R_(i,e){function t(n){var o,a=Gt(n);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.for===e&&n.delete(l)}}catch(c){a.e(c)}finally{a.f()}}return t(i.immediate),t(i.oncePerFrame),t(i.oncePerFrameWhileSynced),t(i.queued),i.immediate.size+i.queued.size+i.oncePerFrame.size+i.oncePerFrameWhileSynced.size}var is=new(function(){function i(){Wn(this,i),this.subscriptions={},this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),this.lastId=0}return ei(i,[{key:"register",value:function(e){return this.id+"/V"+ ++this.lastId}},{key:"deregister",value:function(e){}},{key:"addSubscription",value:function(e,t,n,o,a){if(a!=="vote"){var l=e+":"+t,c=o;c.for=n;var A=this.subscriptions[l];if(A||(A=this.subscriptions[l]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!A[a])throw Error('Unknown subscribe() option: handling="'.concat(a,'"'));A[a].add(c)}else this.addSubscription(e,t+"#__vote",n,o,"immediate")}},{key:"removeSubscription",value:function(e,t,n){var o=e+":"+t,a=this.subscriptions[o];a&&R_(a,n)===0&&delete this.subscriptions[o],t.endsWith("#__vote")||this.removeSubscription(e,t+"#__vote",n)}},{key:"removeAllSubscriptionsFor",value:function(e){for(var t="".concat(e,":"),n=0,o=Object.entries(this.subscriptions);n<o.length;n++){var a=Ft(o[n],2),l=a[0],c=a[1];l.startsWith(t)?delete this.subscriptions[l]:R_(c,e)===0&&delete this.subscriptions[l]}}},{key:"handleEvent",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(a){return a()},o=this.subscriptions[e];o&&(o.queued.size>0&&this.queuedEvents.push({topic:e,data:t}),o.oncePerFrame.size>0&&this.perFrameEvents.set(e,t),o.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(e,t),o.immediate.size>0&&n(function(){var a,l=Gt(o.immediate);try{for(l.s();!(a=l.n()).done;){var c=a.value;try{c(t)}catch(A){console.error(A),console.warn('Croquet: error "'.concat(A.message,'" in "immediate" subscription ').concat(e))}}}catch(A){l.e(A)}finally{l.f()}}))}},{key:"processFrameEvents",value:function(e,t){var n,o=this,a=0,l=function(I,v,E){var S=o.subscriptions[I];if(S){var C,M=Gt(S[E]);try{for(M.s();!(C=M.n()).done;){var D=C.value;try{D(v)}catch(T){console.error(T),console.warn('Croquet: error "'.concat(T.message,'" in "').concat(E,'" subscription ').concat(I))}a++}}catch(T){M.e(T)}finally{M.f()}}},c=Gt(this.queuedEvents);try{for(c.s();!(n=c.n()).done;){var A=n.value;l(A.topic,A.data,"queued")}}catch(I){c.e(I)}finally{c.f()}if(this.queuedEvents.length=0,e){var u,h=Gt(this.perFrameEvents);try{for(h.s();!(u=h.n()).done;){var f=Ft(u.value,2);l(f[0],f[1],"oncePerFrame")}}catch(I){h.e(I)}finally{h.f()}if(this.perFrameEvents.clear(),t){var d,p=Gt(this.perSyncedFrameEvents);try{for(p.s();!(d=p.n()).done;){var m=Ft(d.value,2);l(m[0],m[1],"oncePerFrameWhileSynced")}}catch(I){p.e(I)}finally{p.f()}this.perSyncedFrameEvents.clear()}var b,g=Gt(this.queuedEvents);try{for(g.s();!(b=g.n()).done;){var w=b.value;l(w.topic,w.data,"queued")}}catch(I){g.e(I)}finally{g.f()}this.queuedEvents.length=0}return a}}]),i}()),mc={get subscribe(){return(mc={subscribe:ft.has("debug","subscribe",!1)}).subscribe}},k7=function(){function i(e){Wn(this,i),this.vm=e}return ei(i,[{key:"register",value:function(e){return this.vm.registerModel(e)}},{key:"deregister",value:function(e){this.vm.deregisterModel(e.id)}},{key:"publish",value:function(e,t,n){this.vm.publishFromModel(n,e,t)}},{key:"subscribe",value:function(e,t,n,o){return mc.subscribe&&console.log('Model.subscribe("'.concat(t,":").concat(n,'", ').concat(e," ").concat((""+o).replace(/\([\s\S]*/,""),")")),this.vm.addSubscription(e,t,n,o)}},{key:"unsubscribe",value:function(e,t,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"*";mc.subscribe&&console.log("Model.unsubscribe(".concat(t,":").concat(n,'", ').concat(e," ").concat((""+o).replace(/\([\s\S]*/,""),")")),this.vm.removeSubscription(e,t,n,o)}},{key:"unsubscribeAll",value:function(e){mc.subscribe&&console.log("Model.unsubscribeAll(".concat(e," ").concat(e.id,")")),this.vm.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t,n,o){if(Ds&&Ds.equal(this))return this.vm.future(e,t,n,o);if(t)throw Error("tOffset not supported from cross-realm future send yet.");var a=this.vm;return new Proxy(e,{get:function(l,c){if(typeof e[c]=="function")return new Proxy(e[c],{apply:function(A,u,h){a.callModelMethod(e.id,c,h)}});throw Error("Tried to call "+c+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return this.vm.random()}},{key:"now",value:function(){return this.vm.time}},{key:"equal",value:function(e){return e instanceof i&&e.vm===this.vm}},{key:"isViewRealm",value:function(){return!1}}]),i}(),P7=function(){function i(e){Wn(this,i),this.vm=e}return ei(i,[{key:"register",value:function(e){return is.register(e)}},{key:"deregister",value:function(e){is.deregister(e)}},{key:"publish",value:function(e,t,n){this.vm.publishFromView(n,e,t)}},{key:"subscribe",value:function(e,t,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"queued";mc.subscribe&&console.log('View.subscribe("'.concat(o,":").concat(e,'", ').concat(t," ").concat(n.name||(""+n).replace(/\([\s\S]*/,"")," [").concat(a,"])")),is.addSubscription(o,e,t,n,a)}},{key:"unsubscribe",value:function(e,t,n,o){mc.subscribe&&console.log('View.unsubscribe("'.concat(o,":").concat(e,'", ').concat(t," ").concat(n.name||(""+n).replace(/\([\s\S]*/,""),")")),is.removeSubscription(o,e,t,n)}},{key:"unsubscribeAll",value:function(e){mc.subscribe&&console.log("View.unsubscribeAll(".concat(e,")")),is.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t){var n=this.vm;return new Proxy(e,{get:function(o,a){if(typeof e[a]=="function")return new Proxy(e[a],{apply:function(l,c,A){setTimeout(function(){e.id&&Vd(n,function(){return e[a].apply(e,Wt(A))},!0)},t)}});throw Error("Tried to call "+a+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return Math.random()}},{key:"now",value:function(){return this.vm.time}},{key:"externalNow",value:function(){return this.vm.controller.reflectorTime}},{key:"extrapolatedNow",value:function(){return this.vm.controller.extrapolatedTime}},{key:"isSynced",value:function(){return!!this.vm.controller.synced}},{key:"equal",value:function(e){return e instanceof i&&e.vm===this.vm}},{key:"isViewRealm",value:function(){return!0}}]),i}(),Ds=null;function oo(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!Ds&&i)throw Error(i);return Ds}function KN(i,e){if(Ds!==null)throw Error("Can't switch realms from inside realm");try{return Ds=new k7(i),e()}finally{Ds=null}}function Vd(i,e){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ds!==null&&!t)throw Error("Can't switch realms from inside realm");var n=Ds;try{return Ds=new P7(i),e()}finally{Ds=n}}var Ai=function(i){return i!=i},Tu=Math.sqrt,Xd=.7853981633974483,_7=function(i){var e,t;return i===0?.16666666666666713:((i<0?-i:i)<=1?(e=i*(19.562619833175948+i*(i*(5.444622390564711+i*(.004253011369004428*i-.6019598008014124))-16.262479672107002))-8.198089802484825,t=i*(139.51056146574857+i*(i*(70.49610280856842+i*(1*i-14.740913729888538))-147.1791292232726))-49.18853881490881):(e=.004253011369004428+(i=1/i)*(i*(5.444622390564711+i*(i*(19.562619833175948+-8.198089802484825*i)-16.262479672107002))-.6019598008014124),t=1+i*(i*(70.49610280856842+i*(i*(139.51056146574857+-49.18853881490881*i)-147.1791292232726))-14.740913729888538)),e/t)},N7=function(i){var e,t;return i===0?.08333333333333809:((i<0?-i:i)<=1?(e=28.536655482610616+i*(i*(6.968710824104713+i*(.002967721961301243*i-.5634242780008963))-25.56901049652825),t=342.43986579130785+i*(i*(147.0656354026815+i*(1*i-21.947795316429207))-383.8770957603691)):(e=.002967721961301243+(i=1/i)*(i*(6.968710824104713+i*(28.536655482610616*i-25.56901049652825))-.5634242780008963),t=1+i*(i*(147.0656354026815+i*(342.43986579130785*i-383.8770957603691))-21.947795316429207)),e/t)},GE=function(i){var e,t,n,o,a;if(Ai(i))return NaN;if(i>0?n=i:(e=!0,n=-i),n>1)return NaN;if(n>.625)o=(t=1-n)*N7(t),t=Tu(t+t),a=Xd-t,a-=t=t*o-6123233995736766e-32,a+=Xd;else{if(n<1e-8)return i;a=n*(a=(t=n*n)*_7(t))+n}return e?-a:a},F7=function(i){var e;return Ai(i)||i<-1||i>1?NaN:i>.5?2*GE(Tu(.5-.5*i)):(e=Xd-GE(i),e+=6123233995736766e-32,e+=Xd)},Q7=function(){return typeof Symbol=="function"&&Zt(Symbol("foo"))==="symbol"}(),U7=function(){return Q7&&Zt(Symbol.toStringTag)==="symbol"},u1=Object.prototype.toString,O7=function(i){return u1.call(i)},G7=Object.prototype.hasOwnProperty,z7=function(i,e){return i!=null&&G7.call(i,e)},bd=typeof Symbol=="function"?Symbol.toStringTag:"",H7=function(i){var e,t,n;if(i==null)return u1.call(i);t=i[bd],e=z7(i,bd);try{i[bd]=void 0}catch{return u1.call(i)}return n=u1.call(i),e?i[bd]=t:delete i[bd],n},I1=U7()?H7:O7,W7=typeof Uint32Array=="function",V7=function(i){return W7&&i instanceof Uint32Array||I1(i)==="[object Uint32Array]"},k_=typeof Uint32Array=="function"?Uint32Array:null,X7=typeof Uint32Array=="function"?Uint32Array:null,Y7=function(){throw new Error("not implemented")},Lu=function(){var i,e;if(typeof k_!="function")return!1;try{e=new k_(e=[1,3.14,-3.14,4294967296,4294967297]),i=V7(e)&&e[0]===1&&e[1]===3&&e[2]===4294967293&&e[3]===0&&e[4]===1}catch{i=!1}return i}()?X7:Y7,Z7=typeof Float64Array=="function",K7=function(i){return Z7&&i instanceof Float64Array||I1(i)==="[object Float64Array]"},P_=typeof Float64Array=="function"?Float64Array:null,J7=typeof Float64Array=="function"?Float64Array:null,j7=function(){throw new Error("not implemented")},Ru=function(){var i,e;if(typeof P_!="function")return!1;try{e=new P_([1,3.14,-3.14,NaN]),i=K7(e)&&e[0]===1&&e[1]===3.14&&e[2]===-3.14&&e[3]!=e[3]}catch{i=!1}return i}()?J7:j7,q7=typeof Uint8Array=="function",$7=function(i){return q7&&i instanceof Uint8Array||I1(i)==="[object Uint8Array]"},__=typeof Uint8Array=="function"?Uint8Array:null,eJ=typeof Uint8Array=="function"?Uint8Array:null,tJ=function(){throw new Error("not implemented")},nJ=function(){var i,e;if(typeof __!="function")return!1;try{e=new __(e=[1,3.14,-3.14,256,257]),i=$7(e)&&e[0]===1&&e[1]===3&&e[2]===253&&e[3]===0&&e[4]===1}catch{i=!1}return i}()?eJ:tJ,iJ=typeof Uint16Array=="function",rJ=function(i){return iJ&&i instanceof Uint16Array||I1(i)==="[object Uint16Array]"},N_=typeof Uint16Array=="function"?Uint16Array:null,sJ=typeof Uint16Array=="function"?Uint16Array:null,JN,oJ=function(){throw new Error("not implemented")},jN={uint16:function(){var i,e;if(typeof N_!="function")return!1;try{e=new N_(e=[1,3.14,-3.14,65536,65537]),i=rJ(e)&&e[0]===1&&e[1]===3&&e[2]===65533&&e[3]===0&&e[4]===1}catch{i=!1}return i}()?sJ:oJ,uint8:nJ};(JN=new jN.uint16(1))[0]=4660;var ku=new jN.uint8(JN.buffer)[0]===52,aJ=ku===!0?1:0,qN=new Ru(1),lJ=new Lu(qN.buffer),an=function(i){return qN[0]=i,lJ[aJ]},cJ=ku===!0?1:0,zE=new Ru(1),AJ=new Lu(zE.buffer),lo=function(i,e){return zE[0]=i,AJ[cJ]=e>>>0,zE[0]},Ls=Number.POSITIVE_INFINITY,Rs=Number.NEGATIVE_INFINITY,uJ=function(i){return i===0?.6666666666666735:.6666666666666735+i*(.3999999999940942+i*(.2857142874366239+i*(.22222198432149784+i*(.1818357216161805+i*(.15313837699209373+.14798198605116586*i)))))},rE=.6931471803691238,sE=19082149292705877e-26,Yd=function(i){var e,t,n,o,a,l,c,A,u,h;if(i<-1||Ai(i))return NaN;if(i===-1)return Rs;if(i===Ls||i===0)return i;if(h=1,(n=i<0?-i:i)<.41421356237309503){if(n<1862645149230957e-24)return n<5551115123125783e-32?i:i-i*i*.5;i>-.2928932188134525&&(h=0,o=i,t=1)}return h!==0&&(n<9007199254740992?(a=(h=((t=an(u=1+i))>>20)-1023)>0?1-(u-i):i-(u-1),a/=u):(h=((t=an(u=i))>>20)-1023,a=0),(t&=1048575)<434334?u=lo(u,1072693248|t):(h+=1,u=lo(u,1071644672|t),t=1048576-t>>2),o=u-1),e=.5*o*o,t===0?o===0?h*rE+(a+=h*sE):h*rE-((A=e*(1-.6666666666666666*o))-(h*sE+a)-o):(A=(c=(l=o/(2+o))*l)*uJ(c),h===0?o-(e-l*(e+A)):h*rE-(e-(l*(e+A)+(h*sE+a))-o))},$N=.6931471805599453,hJ=function(i){return i===0?.3999999999940942:.3999999999940942+i*(.22222198432149784+.15313837699209373*i)},fJ=function(i){return i===0?.6666666666666735:.6666666666666735+i*(.2857142874366239+i*(.1818357216161805+.14798198605116586*i))},Zv=.6931471803691238,Kv=19082149292705877e-26,Zd=function(i){var e,t,n,o,a,l,c,A,u,h,f;return i===0?Rs:Ai(i)||i<0?NaN:(o=0,(t=an(i))<1048576&&(o-=54,t=an(i*=0x40000000000000)),t>=2146435072?i+i:(o+=(t>>20)-1023|0,o+=(c=(t&=1048575)+614244&1048576|0)>>20|0,l=(i=lo(i,t|1072693248^c))-1,(1048575&2+t)<3?l===0?o===0?0:o*Zv+o*Kv:(a=l*l*(.5-.3333333333333333*l),o===0?l-a:o*Zv-(a-o*Kv-l)):(c=t-398458|0,A=440401-t|0,n=(h=(f=(u=l/(2+l))*u)*f)*hJ(h),a=f*fJ(h)+n,(c|=A)>0?(e=.5*l*l,o===0?l-(e-u*(e+a)):o*Zv-(e-(u*(e+a)+o*Kv)-l)):o===0?l-u*(l-a):o*Zv-(u*(l-a)-o*Kv-l))))},dJ=function(i){var e;return Ai(i)||i<1?NaN:i===1?0:i>=268435456?Zd(i)+$N:i>2?Zd(2*i-1/(i+Tu(i*i-1))):Yd((e=i-1)+Tu(2*e+e*e))},il=function(i){return i===Ls||i===Rs},pJ=function(i){var e,t,n;return Ai(i)||il(i)?i:(i<0&&(i=-i,e=!0),n=i<3725290298461914e-24?i:i>268435456?Zd(i)+$N:i>2?Zd(2*i+1/(Tu(i*i+1)+i)):Yd(i+(t=i*i)/(1+Tu(1+t))),e?-n:n)},oE=1.5707963267948966,mJ=function(i){return i===0?-64.85021904942025:i*(i*(i*(-.8750608600031904*i-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025},gJ=function(i){return i===0?194.5506571482614:194.5506571482614+i*(485.3903996359137+i*(432.88106049129027+i*(165.02700983169885+i*(24.858464901423062+1*i))))},eF=function(i){var e,t,n,o;return Ai(i)||i===0?i:i===Ls?oE:i===Rs?-oE:(i<0&&(t=!0,i=-i),e=0,i>2.414213562373095?(n=oE,e=1,i=-1/i):i<=.66?n=0:(n=Xd,e=2,i=(i-1)/(i+1)),o=i*(o=(o=i*i)*mJ(o)/gJ(o))+i,e===2?o+=3061616997868383e-32:e===1&&(o+=6123233995736766e-32),n+=o,t?-n:n)},HE,WE,vJ=function(i){var e,t;return Ai(i)||i<-1||i>1?NaN:i===1?Ls:i===-1?Rs:(i<0&&(e=!0,i=-i),i<3725290298461914e-24?e?-i:i:(t=i<.5?.5*Yd((t=i+i)+t*i/(1-i)):.5*Yd((i+i)/(1-i)),e?-t:t))};ku===!0?(HE=1,WE=0):(HE=0,WE=1);var tF={HIGH:HE,LOW:WE},nF=new Ru(1),F_=new Lu(nF.buffer),yJ=tF.HIGH,xJ=tF.LOW,Q_=function(i,e){return nF[0]=e,i[0]=F_[yJ],i[1]=F_[xJ],i},VE,XE,tI=function(i,e){return arguments.length===1?Q_([0,0],i):Q_(i,e)};ku===!0?(VE=1,XE=0):(VE=0,XE=1);var iF={HIGH:VE,LOW:XE},rF=new Ru(1),U_=new Lu(rF.buffer),wJ=iF.HIGH,bJ=iF.LOW,Kd=function(i,e){return U_[wJ]=i,U_[bJ]=e,rF[0]},aE=[0,0],Xo=function(i,e){var t,n;return tI(aE,i),t=aE[0],t&=2147483647,n=an(e),Kd(t|=n&=2147483648,aE[1])},CJ=function(i){return!!(an(i)>>>31)},Ka=3.141592653589793,SJ=function(i,e){var t;return Ai(e)||Ai(i)?NaN:il(e)?e===Ls?il(i)?Xo(Ka/4,i):Xo(0,i):il(i)?Xo(3*Ka/4,i):Xo(Ka,i):il(i)?Xo(Ka/2,i):i===0?e>=0&&!CJ(e)?Xo(0,i):Xo(Ka,i):e===0?Xo(Ka/2,i):(t=eF(i/e),e<0?t<=0?t+Ka:t-Ka:t)},sF=22250738585072014e-324,EJ=function(i){return i===0?1.87595182427177:1.87595182427177+i*(i*(1.6214297201053545+i*(.14599619288661245*i-.758397934778766))-1.8849797954337717)},IJ=function(i){var e,t,n,o,a;return Ai(i)||il(i)||i===0?i:(t=-2147483648&(n=an(i)),n&=2147483647,a=0,i<sF?(a=0x40000000000000,e=an(a*=i),a=Kd(t|(e=(2147483647&e)/3+696219795),0)):a=lo(a,t|(e=n/3+715094163)),a*=EJ(o=a*a*(a/i)),e=an(a),a=Kd(e+1,0),a+=a*(o=((o=i/(a*a))-a)/(a+a+o)))},MJ=function(i){return i===0?.0416666666666666:.0416666666666666+i*(2480158728947673e-20*i-.001388888888887411)},TJ=function(i){return i===0?-27557314351390663e-23:i*(2087572321298175e-24+-11359647557788195e-27*i)-27557314351390663e-23},kd=function(i,e){var t,n,o,a;return o=(a=i*i)*a,n=a*MJ(a),n+=o*o*TJ(a),(o=1-(t=.5*a))+(1-o-t+(a*n-i*e))},O_=-.16666666666666632,Pd=function(i,e){var t,n,o;return t=.00833333333332249+(o=i*i)*(27557313707070068e-22*o-.0001984126982985795)+o*(o*o)*(158969099521155e-24*o-25050760253406863e-24),n=o*i,e===0?i+n*(O_+o*t):i-(o*(.5*e-n*t)-e-n*O_)},DJ=ku===!0?0:1,oF=new Ru(1),BJ=new Lu(oF.buffer),LJ=function(i){return oF[0]=i,BJ[DJ]},aF=Math.floor,nI=function(i){return i<0?-i:i===0?0:i},G_=function(i,e){return Ai(e)||il(e)?(i[0]=e,i[1]=0,i):e!==0&&nI(e)<sF?(i[0]=4503599627370496*e,i[1]=-52,i):(i[0]=e,i[1]=0,i)},RJ=function(i,e){return arguments.length===1?G_([0,0],i):G_(i,e)},kJ=function(i){var e=an(i);return(e=(2146435072&e)>>>20)-1023|0},lE=[0,0],cE=[0,0],Dd=function(i,e){var t,n;return i===0||Ai(i)||il(i)?i:(RJ(lE,i),e+=lE[1],(e+=kJ(i=lE[0]))<-1074?Xo(0,i):e>1023?i<0?Rs:Ls:(e<=-1023?(e+=52,n=2220446049250313e-31):n=1,tI(cE,i),t=cE[0],t&=2148532223,n*Kd(t|=e+1023<<20,cE[1])))},lF=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],PJ=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],AE=5960464477539063e-23,uE=M1(new Array(20)),z_=M1(new Array(20)),Jv=M1(new Array(20)),mi=M1(new Array(20));function M1(i){var e,t=i.length;for(e=0;e<t;e++)i[e]=0;return i}function cF(i,e,t,n,o,a,l,c,A){var u,h,f,d,p,m,b,g,w;for(d=a,w=n[t],g=t,p=0;g>0;p++)h=AE*w|0,mi[p]=w-16777216*h|0,w=n[g-1]+h,g-=1;if(w=Dd(w,o),w-=8*aF(.125*w),w-=b=0|w,f=0,o>0?(b+=p=mi[t-1]>>24-o,mi[t-1]-=p<<24-o,f=mi[t-1]>>23-o):o===0?f=mi[t-1]>>23:w>=.5&&(f=2),f>0){for(b+=1,u=0,p=0;p<t;p++)g=mi[p],u===0?g!==0&&(u=1,mi[p]=16777216-g):mi[p]=16777215-g;if(o>0)switch(o){case 1:mi[t-1]&=8388607;break;case 2:mi[t-1]&=4194303}f===2&&(w=1-w,u!==0&&(w-=Dd(1,o)))}if(w===0){for(g=0,p=t-1;p>=a;p--)g|=mi[p];if(g===0){for(m=1;mi[a-m]===0;m++);for(p=t+1;p<=t+m;p++){for(A[c+p]=lF[l+p],h=0,g=0;g<=c;g++)h+=i[g]*A[c+(p-g)];n[p]=h}return cF(i,e,t+=m,n,o,a,l,c,A)}}if(w===0)for(t-=1,o-=24;mi[t]===0;)t-=1,o-=24;else(w=Dd(w,-o))>=16777216?(h=AE*w|0,mi[t]=w-16777216*h|0,o+=24,mi[t+=1]=h):mi[t]=0|w;for(h=Dd(1,o),p=t;p>=0;p--)n[p]=h*mi[p],h*=AE;for(p=t;p>=0;p--){for(h=0,m=0;m<=d&&m<=t-p;m++)h+=PJ[m]*n[p+m];Jv[t-p]=h}for(h=0,p=t;p>=0;p--)h+=Jv[p];for(e[0]=f===0?h:-h,h=Jv[0]-h,p=1;p<=t;p++)h+=Jv[p];return e[1]=f===0?h:-h,7&b}var _J=function(i,e,t,n){var o,a,l,c,A,u,h;for((a=(t-3)/24|0)<0&&(a=0),c=t-24*(a+1),u=a-(l=n-1),h=l+4,A=0;A<=h;A++)uE[A]=u<0?0:lF[u],u+=1;for(A=0;A<=4;A++){for(o=0,u=0;u<=l;u++)o+=i[u]*uE[l+(A-u)];z_[A]=o}return cF(i,e,4,z_,c,4,a,l,uE)},NJ=Math.round,jv=function(i,e,t){var n,o,a,l,c;return a=i-1.5707963267341256*(n=NJ(.6366197723675814*i)),l=6077100506506192e-26*n,c=e>>20|0,t[0]=a-l,c-(an(t[0])>>20&2047)>16&&(l=20222662487959506e-37*n-((o=a)-(a=o-(l=6077100506303966e-26*n))-l),t[0]=a-l,c-(an(t[0])>>20&2047)>49&&(l=84784276603689e-45*n-((o=a)-(a=o-(l=20222662487111665e-37*n))-l),t[0]=a-l)),t[1]=a-t[0]-l,n},Ja=1.5707963267341256,bu=6077100506506192e-26,qv=2*bu,$v=4*bu,Cd=new Array(3),Sd=new Array(2),iI=function(i,e){var t,n,o,a,l,c,A;if((o=2147483647&an(i)|0)<=1072243195)return e[0]=i,e[1]=0,0;if(o<=1074752122)return(1048575&o)==598523?jv(i,o,e):o<=1073928572?i>0?(A=i-Ja,e[0]=A-bu,e[1]=A-e[0]-bu,1):(A=i+Ja,e[0]=A+bu,e[1]=A-e[0]+bu,-1):i>0?(A=i-2*Ja,e[0]=A-qv,e[1]=A-e[0]-qv,2):(A=i+2*Ja,e[0]=A+qv,e[1]=A-e[0]+qv,-2);if(o<=1075594811)return o<=1075183036?o===1074977148?jv(i,o,e):i>0?(A=i-3*Ja,e[0]=A-18231301519518578e-26,e[1]=A-e[0]-18231301519518578e-26,3):(A=i+3*Ja,e[0]=A+18231301519518578e-26,e[1]=A-e[0]+18231301519518578e-26,-3):o===1075388923?jv(i,o,e):i>0?(A=i-4*Ja,e[0]=A-$v,e[1]=A-e[0]-$v,4):(A=i+4*Ja,e[0]=A+$v,e[1]=A-e[0]+$v,-4);if(o<1094263291)return jv(i,o,e);if(o>=2146435072)return e[0]=NaN,e[1]=NaN,0;for(t=LJ(i),A=Kd(o-((n=(o>>20)-1046)<<20|0),t),l=0;l<2;l++)Cd[l]=0|A,A=16777216*(A-Cd[l]);for(Cd[2]=A,a=3;Cd[a-1]===0;)a-=1;return c=_J(Cd,Sd,n,a),i<0?(e[0]=-Sd[0],e[1]=-Sd[1],-c):(e[0]=Sd[0],e[1]=Sd[1],c)},Ho=[0,0],FJ=function(i){var e;if(e=an(i),(e&=2147483647)<=1072243195)return e<1044381696?1:kd(i,0);if(e>=2146435072)return NaN;switch(3&iI(i,Ho)){case 0:return kd(Ho[0],Ho[1]);case 1:return-Pd(Ho[0],Ho[1]);case 2:return-kd(Ho[0],Ho[1]);default:return Pd(Ho[0],Ho[1])}},QJ=Math.ceil,UJ=function(i){return i<0?QJ(i):aF(i)},OJ=function(i){return i===0?.16666666666666602:.16666666666666602+i*(i*(6613756321437934e-20+i*(41381367970572385e-24*i-16533902205465252e-22))-.0027777777777015593)},GJ=function(i,e,t){var n,o,a;return a=(n=i-e)-(o=n*n)*OJ(o),Dd(1-(e-n*a/(2-a)-i),t)},gc=function(i){var e;return Ai(i)||i===Ls?i:i===Rs?0:i>709.782712893384?Ls:i<-745.1332191019411?0:i>-3725290298461914e-24&&i<3725290298461914e-24?1+i:(e=UJ(i<0?1.4426950408889634*i-.5:1.4426950408889634*i+.5),GJ(i-.6931471803691238*e,19082149292705877e-26*e,e))},zJ=function(i){return Ai(i)?i:(i<0&&(i=-i),i>21?gc(i)/2:(gc(i)+gc(-i))/2)},HJ=function(i){return i===0?-.03333333333333313:i*(.0015873015872548146+i*(i*(4008217827329362e-21+-20109921818362437e-23*i)-793650757867488e-19))-.03333333333333313},hE=.6931471803691238,fE=19082149292705877e-26,WJ=function(i){var e,t,n,o,a,l,c,A,u,h,f,d;if(i===Ls||Ai(i))return i;if(i===Rs)return-1;if(i===0)return i;if(i<0?(t=!0,c=-i):(t=!1,c=i),c>=38.816242111356935){if(t)return-1;if(c>=709.782712893384)return Ls}if(a=0|an(c),c>.34657359027997264)c<1.0397207708399179?t?(n=i+hE,o=-fE,d=-1):(n=i-hE,o=fE,d=1):(d=t?1.4426950408889634*i-.5:1.4426950408889634*i+.5,n=i-(h=d|=0)*hE,o=h*fE),u=n-(i=n-o)-o;else{if(a<1016070144)return i;d=0}return f=(A=i*(e=.5*i))*(((l=1+A*HJ(A))-(h=3-l*e))/(6-i*h)),d===0?i-(i*f-A):(f=i*(f-u)-u,f-=A,d===-1?.5*(i-f)-.5:d===1?i<-.25?-2*(f-(i+.5)):1+2*(i-f):d<=-2||d>56?(n=an(c=1-(f-i))+(d<<20)|0,(c=lo(c,n))-1):(h=1,d<20?c=(h=lo(h,n=1072693248-(2097152>>d)|0))-(f-i):(c=i-(f+(h=lo(h,n=1023-d<<20|0))),c+=1),n=an(c)+(d<<20)|0,lo(c,n)))},VJ=ku===!0?0:1,YE=new Ru(1),XJ=new Lu(YE.buffer),g1=function(i,e){return YE[0]=i,XJ[VJ]=e>>>0,YE[0]},YJ=function(i){return i===0?.3999999999940942:.3999999999940942+i*(.22222198432149784+.15313837699209373*i)},ZJ=function(i){return i===0?.6666666666666735:.6666666666666735+i*(.2857142874366239+i*(.1818357216161805+.14798198605116586*i))},KJ=function(i){var e,t,n,o,a,l,c,A,u,h;return o=i-1,(1048575&2+(n=an(i)))<3?o===0?0:o*o*(.3333333333333333*o-.5):(u=(n&=1048575)-398458|0,h=440401-n|0,t=(A=(l=(a=o/(2+o))*a)*l)*YJ(A),c=l*ZJ(A)+t,(u|=h)>0?a*((e=.5*o*o)+c)-e:a*(c-o))},JJ=function(i){var e,t,n,o,a,l,c;return Ai(i)||i<0?NaN:i===0?Rs:(a=0,(t=an(i))<1048576&&(a-=54,t=an(i*=0x40000000000000)),t>=2146435072?i+i:(a+=(t>>20)-1023|0,i=lo(i,(t&=1048575)|1072693248^(o=t+614244&1048576|0)),l=a+=o>>20|0,n=KJ(i),c=3694239077158931e-28*l+25082946711645275e-27*((i-=1)+n),(c+=.4342944818781689*(i-(e=g1(i,0))+n)+.4342944818781689*e)+.30102999566361177*l))},jJ=function(i){return i===0?.3999999999940942:.3999999999940942+i*(.22222198432149784+.15313837699209373*i)},qJ=function(i){return i===0?.6666666666666735:.6666666666666735+i*(.2857142874366239+i*(.1818357216161805+.14798198605116586*i))},$J=function(i){var e,t,n,o,a,l,c,A,u,h;return o=i-1,(1048575&2+(n=an(i)))<3?o===0?0:o*o*(.3333333333333333*o-.5):(u=(n&=1048575)-398458|0,h=440401-n|0,t=(A=(l=(a=o/(2+o))*a)*l)*jJ(A),c=l*qJ(A)+t,(u|=h)>0?a*((e=.5*o*o)+c)-e:a*(c-o))},dE=[0,0],ej=function(i){var e,t,n,o,a;if(Ai(i)||i<0)return NaN;if(tI(dE,i),a=0,(t=dE[0])<1048576){if(!(2147483647&t|dE[1]))return Rs;a-=54,t=an(i*=0x40000000000000)}return t>=2146435072?i+i:(a+=(t>>20)-1023|0,i=lo(i,(t&=1048575)|1072693248^(o=t+614244&1048576|0)),a+=o>>20|0,n=$J(i),16751713164886512e-26*((i-=1)+n)+1.4426950407214463*(i-(e=g1(i,0))+n)+1.4426950407214463*e+a)},Wo=[0,0],tj=function(i){var e;if(e=an(i),(e&=2147483647)<=1072243195)return e<1045430272?i:Pd(i,0);if(e>=2146435072)return NaN;switch(3&iI(i,Wo)){case 0:return Pd(Wo[0],Wo[1]);case 1:return kd(Wo[0],Wo[1]);case 2:return-Pd(Wo[0],Wo[1]);default:return-kd(Wo[0],Wo[1])}},nj=function(i){var e,t;return i===0?.16666666666666666:((i<0?-i:i)<=1?(e=i*(i*(-.789474443963537*i-163.72585752598383)-11561.443576500522)-351754.9648081514,t=i*(36157.827983443196+i*(1*i-277.7110814206028))-2.1105297888489086e6):(e=(i=1/i)*(i*(-351754.9648081514*i-11561.443576500522)-163.72585752598383)-.789474443963537,t=1+i*(i*(36157.827983443196+-2.1105297888489086e6*i)-277.7110814206028)),e/t)},ij=function(i){var e;return i===0?i:(e=nI(i),i>710.4758600739439||i<-709.089565712824?i>0?Ls:Rs:e>1?e>=709.0895657128241?(e=gc(.5*e),e*=.5*e,i<0&&(e=-e),e):(e=.5*(e=gc(e))-.5/e,i<0&&(e=-e),e):i+i*(e*=e)*nj(e))},rj=function(i){return i===0?.13333333333320124:.13333333333320124+i*(.021869488294859542+i*(.0035920791075913124+i*(.0005880412408202641+i*(7817944429395571e-20+-18558637485527546e-21*i))))},sj=function(i){return i===0?.05396825397622605:.05396825397622605+i*(.0088632398235993+i*(.0014562094543252903+i*(.0002464631348184699+i*(7140724913826082e-20+2590730518636337e-20*i))))},H_=function(i,e,t){var n,o,a,l,c,A,u,h,f;return(o=2147483647&(n=an(i))|0)>=1072010280&&(i<0&&(i=-i,e=-e),i=(f=.7853981633974483-i)+(h=3061616997868383e-32-e),e=0),l=e+(f=i*i)*((c=f*i)*((l=rj(h=f*f))+(u=f*sj(h)))+e),h=i+(l+=.3333333333333341*c),o>=1072010280?(1-(n>>30&2))*((u=t)-2*(i-(h*h/(h+u)-l))):t===1?h:(g1(f=h,0),u=l-(f-i),g1(A=a=-1/h,0),A+a*((c=1+A*f)+A*u))},pE=[0,0],oj=function(i){var e,t;return e=an(i),(e&=2147483647)<=1072243195?e<1044381696?i:H_(i,0,1):e>=2146435072?NaN:(t=iI(i,pE),H_(pE[0],pE[1],1-((1&t)<<1)))},aj=function(i){var e,t;return i===0?-.3333333333333332:((i<0?-i:i)<=1?(e=i*(i*(0*i-.9643991794250523)-99.28772310019185)-1614.6876844170845,t=4844.063053251255+i*(2235.4883906010045+i*(112.81167849163293+1*i))):(e=0+(i=1/i)*(i*(-1614.6876844170845*i-99.28772310019185)-.9643991794250523),t=1+i*(112.81167849163293+i*(2235.4883906010045+4844.063053251255*i))),e/t)},lj=function(i){var e,t;if((t=nI(i))>44.014845965556525)return i<0?-1:1;if(t>=.625)t=1-2/((e=gc(2*t))+1),i<0&&(t=-t);else{if(i===0)return i;t=i+i*(e=i*i)*aj(e)}return t};window.CroquetMath===void 0&&(window.CroquetMath={}),Object.assign(window.CroquetMath,{acos:F7,acosh:dJ,asin:GE,asinh:pJ,atan:eF,atanh:vJ,atan2:SJ,cbrt:IJ,cos:FJ,cosh:zJ,exp:gc,expm1:WJ,log:Zd,log1p:Yd,log10:JJ,log2:ej,sin:tj,sinh:ij,tan:oj,tanh:lj});var mE=Math.pow;function W_(i){return i===1/0||i===-1/0}window.CroquetMath.pow=function(i,e){if(isNaN(i)||isNaN(e))return NaN;if(W_(i)||W_(e)||i===0||e===0)return mE(i,e);if(i<0&&!function(n){return Number.isInteger(n)}(e))return NaN;if(e===1)return i;if(e===2)return i*i;if(e===3)return i*i*i;if(e===4)return i*i*i*i;var t=1;return i<0&&(i*=-1,t=mE(-1,e)),window.CroquetMath.exp(window.CroquetMath.log(i)*e)*t};var cj=function(i,e){return i<e};function Nn(i){if(!(this instanceof Nn))return new Nn(i);this.array=[],this.size=0,this.compare=i||cj}Nn.prototype.clone=function(){var i=new Nn(this.compare);return i.size=this.size,i.array=this.array.slice(0,this.size),i},Nn.prototype.add=function(i){var e,t,n=this.size;for(this.array[this.size]=i,this.size+=1;n>0&&(e=n-1>>1,t=this.array[e],this.compare(i,t));)this.array[n]=t,n=e;this.array[n]=i},Nn.prototype.heapify=function(i){var e;for(this.array=i,this.size=i.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},Nn.prototype._percolateUp=function(i,e){for(var t,n,o=this.array[i];i>0&&(t=i-1>>1,n=this.array[t],e||this.compare(o,n));)this.array[i]=n,i=t;this.array[i]=o},Nn.prototype._percolateDown=function(i){for(var e,t,n,o=this.size,a=this.size>>>1,l=this.array[i];i<a&&(t=(e=1+(i<<1))+1,n=this.array[e],t<o&&this.compare(this.array[t],n)&&(e=t,n=this.array[t]),this.compare(n,l));)this.array[i]=n,i=e;this.array[i]=l},Nn.prototype._removeAt=function(i){if(!(i>this.size-1||i<0))return this._percolateUp(i,!0),this.poll()},Nn.prototype.remove=function(i){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],i)&&!this.compare(i,this.array[e]))return this._removeAt(e),!0;return!1},Nn.prototype.removeOne=function(i){if(typeof i=="function"){for(var e=0;e<this.size;e++)if(i(this.array[e]))return this._removeAt(e)}},Nn.prototype.removeMany=function(i,e){if(typeof i!="function"||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var t=0,n=new Array(e),o=0,a=new Array(this.size);t<e&&!this.isEmpty();){var l=this.poll();i(l)?n[t++]=l:a[o++]=l}n.length=t;for(var c=0;c<o;)this.add(a[c++]);return n},Nn.prototype.peek=function(){if(this.size!=0)return this.array[0]},Nn.prototype.poll=function(){if(this.size!=0){var i=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,i}},Nn.prototype.replaceTop=function(i){if(this.size!=0){var e=this.array[0];return this.array[0]=i,this._percolateDown(0),e}},Nn.prototype.trim=function(){this.array=this.array.slice(0,this.size)},Nn.prototype.isEmpty=function(){return this.size===0},Nn.prototype.forEach=function(i){if(!this.isEmpty()&&typeof i=="function")for(var e=0,t=this.clone();!t.isEmpty();)i(t.poll(),e++)},Nn.prototype.kSmallest=function(i){if(this.size==0)return[];i=Math.min(this.size,i);var e=new Nn(this.compare),t=Math.min((i>0?Math.pow(2,i-1):0)+1,this.size);e.size=t,e.array=this.array.slice(0,t);for(var n=new Array(i),o=0;o<i;o++)n[o]=e.poll();return n};var Aj=Nn,uj=function(i){w1(t,Aj);var e=C1(t);function t(){return Wn(this,t),e.apply(this,arguments)}return ei(t,[{key:"poll",value:function(){var n=BN(Su(t.prototype),"poll",this).call(this);return this.array[this.size]=null,n}},{key:"asArray",value:function(){var n=[];return this.forEach(function(o){return n.push(o)}),n}},{key:"asUnsortedArray",value:function(){return this.array.slice(0,this.size)}}]),t}(),hj={exports:{}},Ts=hj.exports=function(i){return function(){var e=i,t=e.lib.WordArray;function n(o,a,l){for(var c=[],A=0,u=0;u<a;u++)if(u%4){var h=l[o.charCodeAt(u-1)]<<u%4*2|l[o.charCodeAt(u)]>>>6-u%4*2;c[A>>>2]|=h<<24-A%4*8,A++}return t.create(c,A)}e.enc.Base64={stringify:function(o){var a=o.words,l=o.sigBytes,c=this._map;o.clamp();for(var A=[],u=0;u<l;u+=3)for(var h=(a[u>>>2]>>>24-u%4*8&255)<<16|(a[u+1>>>2]>>>24-(u+1)%4*8&255)<<8|a[u+2>>>2]>>>24-(u+2)%4*8&255,f=0;f<4&&u+.75*f<l;f++)A.push(c.charAt(h>>>6*(3-f)&63));var d=c.charAt(64);if(d)for(;A.length%4;)A.push(d);return A.join("")},parse:function(o){var a=o.length,l=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var A=0;A<l.length;A++)c[l.charCodeAt(A)]=A}var u=l.charAt(64);if(u){var h=o.indexOf(u);h!==-1&&(a=h)}return n(o,a,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),i.enc.Base64}(Pr.exports),fj={exports:{}},dj=fj.exports=function(i){return i.enc.Utf8}(Pr.exports),pj={exports:{}},mj={exports:{}};mj.exports=function(i){return function(){var e=i,t=e.lib,n=t.WordArray,o=t.Hasher,a=e.algo,l=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,u){for(var h=this._hash.words,f=h[0],d=h[1],p=h[2],m=h[3],b=h[4],g=0;g<80;g++){if(g<16)l[g]=0|A[u+g];else{var w=l[g-3]^l[g-8]^l[g-14]^l[g-16];l[g]=w<<1|w>>>31}var I=(f<<5|f>>>27)+b+l[g];I+=g<20?1518500249+(d&p|~d&m):g<40?1859775393+(d^p^m):g<60?(d&p|d&m|p&m)-1894007588:(d^p^m)-899497514,b=m,m=p,p=d<<30|d>>>2,d=f,f=I}h[0]=h[0]+f|0,h[1]=h[1]+d|0,h[2]=h[2]+p|0,h[3]=h[3]+m|0,h[4]=h[4]+b|0},_doFinalize:function(){var A=this._data,u=A.words,h=8*this._nDataBytes,f=8*A.sigBytes;return u[f>>>5]|=128<<24-f%32,u[14+(f+64>>>9<<4)]=Math.floor(h/4294967296),u[15+(f+64>>>9<<4)]=h,A.sigBytes=4*u.length,this._process(),this._hash},clone:function(){var A=o.clone.call(this);return A._hash=this._hash.clone(),A}});e.SHA1=o._createHelper(c),e.HmacSHA1=o._createHmacHelper(c)}(),i.SHA1}(Pr.exports);var gj={exports:{}};gj.exports=function(i){(function(){var e=i,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(o,a){o=this._hasher=new o.init,typeof a=="string"&&(a=n.parse(a));var l=o.blockSize,c=4*l;a.sigBytes>c&&(a=o.finalize(a)),a.clamp();for(var A=this._oKey=a.clone(),u=this._iKey=a.clone(),h=A.words,f=u.words,d=0;d<l;d++)h[d]^=1549556828,f[d]^=909522486;A.sigBytes=u.sigBytes=c,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var a=this._hasher,l=a.finalize(o);return a.reset(),a.finalize(this._oKey.clone().concat(l))}})})()}(Pr.exports);var V_=pj.exports=function(i){return function(){var e=i,t=e.lib,n=t.Base,o=t.WordArray,a=e.algo,l=a.SHA1,c=a.HMAC,A=a.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var f=this.cfg,d=c.create(f.hasher,u),p=o.create(),m=o.create([1]),b=p.words,g=m.words,w=f.keySize,I=f.iterations;b.length<w;){var v=d.update(h).finalize(m);d.reset();for(var E=v.words,S=E.length,C=v,M=1;M<I;M++){C=d.finalize(C),d.reset();for(var D=C.words,T=0;T<S;T++)E[T]^=D[T]}p.concat(v),g[0]++}return p.sigBytes=4*w,p}});e.PBKDF2=function(u,h,f){return A.create(f).compute(u,h)}}(),i.PBKDF2}(Pr.exports),vj={exports:{}},yj={exports:{}};yj.exports=function(i){return function(e){var t=i,n=t.lib,o=n.WordArray,a=n.Hasher,l=t.algo,c=[];(function(){for(var p=0;p<64;p++)c[p]=4294967296*e.abs(e.sin(p+1))|0})();var A=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var b=0;b<16;b++){var g=m+b,w=p[g];p[g]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8)}var I=this._hash.words,v=p[m+0],E=p[m+1],S=p[m+2],C=p[m+3],M=p[m+4],D=p[m+5],T=p[m+6],B=p[m+7],R=p[m+8],P=p[m+9],_=p[m+10],Q=p[m+11],W=p[m+12],U=p[m+13],H=p[m+14],O=p[m+15],F=I[0],z=I[1],k=I[2],X=I[3];F=u(F,z,k,X,v,7,c[0]),X=u(X,F,z,k,E,12,c[1]),k=u(k,X,F,z,S,17,c[2]),z=u(z,k,X,F,C,22,c[3]),F=u(F,z,k,X,M,7,c[4]),X=u(X,F,z,k,D,12,c[5]),k=u(k,X,F,z,T,17,c[6]),z=u(z,k,X,F,B,22,c[7]),F=u(F,z,k,X,R,7,c[8]),X=u(X,F,z,k,P,12,c[9]),k=u(k,X,F,z,_,17,c[10]),z=u(z,k,X,F,Q,22,c[11]),F=u(F,z,k,X,W,7,c[12]),X=u(X,F,z,k,U,12,c[13]),k=u(k,X,F,z,H,17,c[14]),F=h(F,z=u(z,k,X,F,O,22,c[15]),k,X,E,5,c[16]),X=h(X,F,z,k,T,9,c[17]),k=h(k,X,F,z,Q,14,c[18]),z=h(z,k,X,F,v,20,c[19]),F=h(F,z,k,X,D,5,c[20]),X=h(X,F,z,k,_,9,c[21]),k=h(k,X,F,z,O,14,c[22]),z=h(z,k,X,F,M,20,c[23]),F=h(F,z,k,X,P,5,c[24]),X=h(X,F,z,k,H,9,c[25]),k=h(k,X,F,z,C,14,c[26]),z=h(z,k,X,F,R,20,c[27]),F=h(F,z,k,X,U,5,c[28]),X=h(X,F,z,k,S,9,c[29]),k=h(k,X,F,z,B,14,c[30]),F=f(F,z=h(z,k,X,F,W,20,c[31]),k,X,D,4,c[32]),X=f(X,F,z,k,R,11,c[33]),k=f(k,X,F,z,Q,16,c[34]),z=f(z,k,X,F,H,23,c[35]),F=f(F,z,k,X,E,4,c[36]),X=f(X,F,z,k,M,11,c[37]),k=f(k,X,F,z,B,16,c[38]),z=f(z,k,X,F,_,23,c[39]),F=f(F,z,k,X,U,4,c[40]),X=f(X,F,z,k,v,11,c[41]),k=f(k,X,F,z,C,16,c[42]),z=f(z,k,X,F,T,23,c[43]),F=f(F,z,k,X,P,4,c[44]),X=f(X,F,z,k,W,11,c[45]),k=f(k,X,F,z,O,16,c[46]),F=d(F,z=f(z,k,X,F,S,23,c[47]),k,X,v,6,c[48]),X=d(X,F,z,k,B,10,c[49]),k=d(k,X,F,z,H,15,c[50]),z=d(z,k,X,F,D,21,c[51]),F=d(F,z,k,X,W,6,c[52]),X=d(X,F,z,k,C,10,c[53]),k=d(k,X,F,z,_,15,c[54]),z=d(z,k,X,F,E,21,c[55]),F=d(F,z,k,X,R,6,c[56]),X=d(X,F,z,k,O,10,c[57]),k=d(k,X,F,z,T,15,c[58]),z=d(z,k,X,F,U,21,c[59]),F=d(F,z,k,X,M,6,c[60]),X=d(X,F,z,k,Q,10,c[61]),k=d(k,X,F,z,S,15,c[62]),z=d(z,k,X,F,P,21,c[63]),I[0]=I[0]+F|0,I[1]=I[1]+z|0,I[2]=I[2]+k|0,I[3]=I[3]+X|0},_doFinalize:function(){var p=this._data,m=p.words,b=8*this._nDataBytes,g=8*p.sigBytes;m[g>>>5]|=128<<24-g%32;var w=e.floor(b/4294967296),I=b;m[15+(g+64>>>9<<4)]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),m[14+(g+64>>>9<<4)]=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),p.sigBytes=4*(m.length+1),this._process();for(var v=this._hash,E=v.words,S=0;S<4;S++){var C=E[S];E[S]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8)}return v},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});function u(p,m,b,g,w,I,v){var E=p+(m&b|~m&g)+w+v;return(E<<I|E>>>32-I)+m}function h(p,m,b,g,w,I,v){var E=p+(m&g|b&~g)+w+v;return(E<<I|E>>>32-I)+m}function f(p,m,b,g,w,I,v){var E=p+(m^b^g)+w+v;return(E<<I|E>>>32-I)+m}function d(p,m,b,g,w,I,v){var E=p+(b^(m|~g))+w+v;return(E<<I|E>>>32-I)+m}t.MD5=a._createHelper(A),t.HmacMD5=a._createHmacHelper(A)}(Math),i.MD5}(Pr.exports);var xj={exports:{}};xj.exports=function(i){return function(){var e=i,t=e.lib,n=t.Base,o=t.WordArray,a=e.algo,l=a.MD5,c=a.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:l,iterations:1}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,u){for(var h,f=this.cfg,d=f.hasher.create(),p=o.create(),m=p.words,b=f.keySize,g=f.iterations;m.length<b;){h&&d.update(h),h=d.update(A).finalize(u),d.reset();for(var w=1;w<g;w++)h=d.finalize(h),d.reset();p.concat(h)}return p.sigBytes=4*b,p}});e.EvpKDF=function(A,u,h){return c.create(h).compute(A,u)}}(),i.EvpKDF}(Pr.exports);var wj={exports:{}};wj.exports=function(i){i.lib.Cipher||function(e){var t=i,n=t.lib,o=n.Base,a=n.WordArray,l=n.BufferedBlockAlgorithm,c=t.enc;c.Utf8;var A=c.Base64,u=t.algo.EvpKDF,h=n.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(E,S){return this.create(this._ENC_XFORM_MODE,E,S)},createDecryptor:function(E,S){return this.create(this._DEC_XFORM_MODE,E,S)},init:function(E,S,C){this.cfg=this.cfg.extend(C),this._xformMode=E,this._key=S,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){return E&&this._append(E),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(S){return typeof S=="string"?v:w}return function(S){return{encrypt:function(C,M,D){return E(M).encrypt(S,C,M,D)},decrypt:function(C,M,D){return E(M).decrypt(S,C,M,D)}}}}()});n.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},d=n.BlockCipherMode=o.extend({createEncryptor:function(E,S){return this.Encryptor.create(E,S)},createDecryptor:function(E,S){return this.Decryptor.create(E,S)},init:function(E,S){this._cipher=E,this._iv=S}}),p=f.CBC=function(){var E=d.extend();function S(C,M,D){var T,B=this._iv;B?(T=B,this._iv=e):T=this._prevBlock;for(var R=0;R<D;R++)C[M+R]^=T[R]}return E.Encryptor=E.extend({processBlock:function(C,M){var D=this._cipher,T=D.blockSize;S.call(this,C,M,T),D.encryptBlock(C,M),this._prevBlock=C.slice(M,M+T)}}),E.Decryptor=E.extend({processBlock:function(C,M){var D=this._cipher,T=D.blockSize,B=C.slice(M,M+T);D.decryptBlock(C,M),S.call(this,C,M,T),this._prevBlock=B}}),E}(),m=(t.pad={}).Pkcs7={pad:function(E,S){for(var C=4*S,M=C-E.sigBytes%C,D=M<<24|M<<16|M<<8|M,T=[],B=0;B<M;B+=4)T.push(D);var R=a.create(T,M);E.concat(R)},unpad:function(E){var S=255&E.words[E.sigBytes-1>>>2];E.sigBytes-=S}};n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:m}),reset:function(){var E;h.reset.call(this);var S=this.cfg,C=S.iv,M=S.mode;this._xformMode==this._ENC_XFORM_MODE?E=M.createEncryptor:(E=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,C&&C.words):(this._mode=E.call(M,this,C&&C.words),this._mode.__creator=E)},_doProcessBlock:function(E,S){this._mode.processBlock(E,S)},_doFinalize:function(){var E,S=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(S.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),S.unpad(E)),E},blockSize:4});var b=n.CipherParams=o.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),g=(t.format={}).OpenSSL={stringify:function(E){var S=E.ciphertext,C=E.salt;return(C?a.create([1398893684,1701076831]).concat(C).concat(S):S).toString(A)},parse:function(E){var S,C=A.parse(E),M=C.words;return M[0]==1398893684&&M[1]==1701076831&&(S=a.create(M.slice(2,4)),M.splice(0,4),C.sigBytes-=16),b.create({ciphertext:C,salt:S})}},w=n.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(E,S,C,M){M=this.cfg.extend(M);var D=E.createEncryptor(C,M),T=D.finalize(S),B=D.cfg;return b.create({ciphertext:T,key:C,iv:B.iv,algorithm:E,mode:B.mode,padding:B.padding,blockSize:E.blockSize,formatter:M.format})},decrypt:function(E,S,C,M){return M=this.cfg.extend(M),S=this._parse(S,M.format),E.createDecryptor(C,M).finalize(S.ciphertext)},_parse:function(E,S){return typeof E=="string"?S.parse(E,this):E}}),I=(t.kdf={}).OpenSSL={execute:function(E,S,C,M){M||(M=a.random(8));var D=u.create({keySize:S+C}).compute(E,M),T=a.create(D.words.slice(S),4*C);return D.sigBytes=4*S,b.create({key:D,iv:T,salt:M})}},v=n.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:I}),encrypt:function(E,S,C,M){var D=(M=this.cfg.extend(M)).kdf.execute(C,E.keySize,E.ivSize);M.iv=D.iv;var T=w.encrypt.call(this,E,S,D.key,M);return T.mixIn(D),T},decrypt:function(E,S,C,M){M=this.cfg.extend(M),S=this._parse(S,M.format);var D=M.kdf.execute(C,E.keySize,E.ivSize,S.salt);return M.iv=D.iv,w.decrypt.call(this,E,S,D.key,M)}})}()}(Pr.exports);var e1=vj.exports=function(i){return function(){var e=i,t=e.lib.BlockCipher,n=e.algo,o=[],a=[],l=[],c=[],A=[],u=[],h=[],f=[],d=[],p=[];(function(){for(var g=[],w=0;w<256;w++)g[w]=w<128?w<<1:w<<1^283;var I=0,v=0;for(w=0;w<256;w++){var E=v^v<<1^v<<2^v<<3^v<<4;E=E>>>8^255&E^99,o[I]=E,a[E]=I;var S=g[I],C=g[S],M=g[C],D=257*g[E]^16843008*E;l[I]=D<<24|D>>>8,c[I]=D<<16|D>>>16,A[I]=D<<8|D>>>24,u[I]=D,D=16843009*M^65537*C^257*S^16843008*I,h[E]=D<<24|D>>>8,f[E]=D<<16|D>>>16,d[E]=D<<8|D>>>24,p[E]=D,I?(I=S^g[g[g[M^S]]],v^=g[g[v]]):I=v=1}})();var m=[0,1,2,4,8,16,32,64,128,27,54],b=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var g=this._keyPriorReset=this._key,w=g.words,I=g.sigBytes/4,v=4*((this._nRounds=I+6)+1),E=this._keySchedule=[],S=0;S<v;S++)S<I?E[S]=w[S]:(D=E[S-1],S%I?I>6&&S%I==4&&(D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[255&D]):(D=o[(D=D<<8|D>>>24)>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[255&D],D^=m[S/I|0]<<24),E[S]=E[S-I]^D);for(var C=this._invKeySchedule=[],M=0;M<v;M++){if(S=v-M,M%4)var D=E[S];else D=E[S-4];C[M]=M<4||S<=4?D:h[o[D>>>24]]^f[o[D>>>16&255]]^d[o[D>>>8&255]]^p[o[255&D]]}}},encryptBlock:function(g,w){this._doCryptBlock(g,w,this._keySchedule,l,c,A,u,o)},decryptBlock:function(g,w){var I=g[w+1];g[w+1]=g[w+3],g[w+3]=I,this._doCryptBlock(g,w,this._invKeySchedule,h,f,d,p,a),I=g[w+1],g[w+1]=g[w+3],g[w+3]=I},_doCryptBlock:function(g,w,I,v,E,S,C,M){for(var D=this._nRounds,T=g[w]^I[0],B=g[w+1]^I[1],R=g[w+2]^I[2],P=g[w+3]^I[3],_=4,Q=1;Q<D;Q++){var W=v[T>>>24]^E[B>>>16&255]^S[R>>>8&255]^C[255&P]^I[_++],U=v[B>>>24]^E[R>>>16&255]^S[P>>>8&255]^C[255&T]^I[_++],H=v[R>>>24]^E[P>>>16&255]^S[T>>>8&255]^C[255&B]^I[_++],O=v[P>>>24]^E[T>>>16&255]^S[B>>>8&255]^C[255&R]^I[_++];T=W,B=U,R=H,P=O}W=(M[T>>>24]<<24|M[B>>>16&255]<<16|M[R>>>8&255]<<8|M[255&P])^I[_++],U=(M[B>>>24]<<24|M[R>>>16&255]<<16|M[P>>>8&255]<<8|M[255&T])^I[_++],H=(M[R>>>24]<<24|M[P>>>16&255]<<16|M[T>>>8&255]<<8|M[255&B])^I[_++],O=(M[P>>>24]<<24|M[T>>>16&255]<<16|M[B>>>8&255]<<8|M[255&R])^I[_++],g[w]=W,g[w+1]=U,g[w+2]=H,g[w+3]=O},keySize:8});e.AES=t._createHelper(b)}(),i.AES}(Pr.exports),bj={exports:{}},gE=bj.exports=function(i){return i.HmacSHA256}(Pr.exports);function Pu(i){for(var e=i.length;--e>=0;)i[e]=0}var ZE=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Cj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),X_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yo=new Array(576);Pu(Yo);var Bd=new Array(60);Pu(Bd);var Jd=new Array(512);Pu(Jd);var _d=new Array(256);Pu(_d);var rI=new Array(29);Pu(rI);var Y_,Z_,K_,v1=new Array(30);function vE(i,e,t,n,o){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=o,this.has_stree=i&&i.length}function yE(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}Pu(v1);var AF=function(i){return i<256?Jd[i]:Jd[256+(i>>>7)]},jd=function(i,e){i.pending_buf[i.pending++]=255&e,i.pending_buf[i.pending++]=e>>>8&255},cr=function(i,e,t){i.bi_valid>16-t?(i.bi_buf|=e<<i.bi_valid&65535,jd(i,i.bi_buf),i.bi_buf=e>>16-i.bi_valid,i.bi_valid+=t-16):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},ao=function(i,e,t){cr(i,t[2*e],t[2*e+1])},uF=function(i,e){var t=0;do t|=1&i,i>>>=1,t<<=1;while(--e>0);return t>>>1},hF=function(i,e,t){var n,o,a=new Array(16),l=0;for(n=1;n<=15;n++)a[n]=l=l+t[n-1]<<1;for(o=0;o<=e;o++){var c=i[2*o+1];c!==0&&(i[2*o]=uF(a[c]++,c))}},J_=function(i){var e;for(e=0;e<286;e++)i.dyn_ltree[2*e]=0;for(e=0;e<30;e++)i.dyn_dtree[2*e]=0;for(e=0;e<19;e++)i.bl_tree[2*e]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0},fF=function(i){i.bi_valid>8?jd(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},j_=function(i,e,t,n){var o=2*e,a=2*t;return i[o]<i[a]||i[o]===i[a]&&n[e]<=n[t]},xE=function(i,e,t){for(var n=i.heap[t],o=t<<1;o<=i.heap_len&&(o<i.heap_len&&j_(e,i.heap[o+1],i.heap[o],i.depth)&&o++,!j_(e,n,i.heap[o],i.depth));)i.heap[t]=i.heap[o],t=o,o<<=1;i.heap[t]=n},q_=function(i,e,t){var n,o,a,l,c=0;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+2*c]<<8|i.pending_buf[i.d_buf+2*c+1],o=i.pending_buf[i.l_buf+c],c++,n===0?ao(i,o,e):(a=_d[o],ao(i,a+256+1,e),(l=ZE[a])!==0&&(o-=rI[a],cr(i,o,l)),n--,a=AF(n),ao(i,a,t),(l=h1[a])!==0&&(n-=v1[a],cr(i,n,l)));while(c<i.last_lit);ao(i,256,e)},wE=function(i,e){var t,n,o,a=e.dyn_tree,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,A=e.stat_desc.elems,u=-1;for(i.heap_len=0,i.heap_max=573,t=0;t<A;t++)a[2*t]!==0?(i.heap[++i.heap_len]=u=t,i.depth[t]=0):a[2*t+1]=0;for(;i.heap_len<2;)a[2*(o=i.heap[++i.heap_len]=u<2?++u:0)]=1,i.depth[o]=0,i.opt_len--,c&&(i.static_len-=l[2*o+1]);for(e.max_code=u,t=i.heap_len>>1;t>=1;t--)xE(i,a,t);o=A;do t=i.heap[1],i.heap[1]=i.heap[i.heap_len--],xE(i,a,1),n=i.heap[1],i.heap[--i.heap_max]=t,i.heap[--i.heap_max]=n,a[2*o]=a[2*t]+a[2*n],i.depth[o]=(i.depth[t]>=i.depth[n]?i.depth[t]:i.depth[n])+1,a[2*t+1]=a[2*n+1]=o,i.heap[1]=o++,xE(i,a,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(h,f){var d,p,m,b,g,w,I=f.dyn_tree,v=f.max_code,E=f.stat_desc.static_tree,S=f.stat_desc.has_stree,C=f.stat_desc.extra_bits,M=f.stat_desc.extra_base,D=f.stat_desc.max_length,T=0;for(b=0;b<=15;b++)h.bl_count[b]=0;for(I[2*h.heap[h.heap_max]+1]=0,d=h.heap_max+1;d<573;d++)(b=I[2*I[2*(p=h.heap[d])+1]+1]+1)>D&&(b=D,T++),I[2*p+1]=b,p>v||(h.bl_count[b]++,g=0,p>=M&&(g=C[p-M]),w=I[2*p],h.opt_len+=w*(b+g),S&&(h.static_len+=w*(E[2*p+1]+g)));if(T!==0){do{for(b=D-1;h.bl_count[b]===0;)b--;h.bl_count[b]--,h.bl_count[b+1]+=2,h.bl_count[D]--,T-=2}while(T>0);for(b=D;b!==0;b--)for(p=h.bl_count[b];p!==0;)(m=h.heap[--d])>v||(I[2*m+1]!==b&&(h.opt_len+=(b-I[2*m+1])*I[2*m],I[2*m+1]=b),p--)}}(i,e),hF(a,u,i.bl_count)},$_=function(i,e,t){var n,o,a=-1,l=e[1],c=0,A=7,u=4;for(l===0&&(A=138,u=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)o=l,l=e[2*(n+1)+1],++c<A&&o===l||(c<u?i.bl_tree[2*o]+=c:o!==0?(o!==a&&i.bl_tree[2*o]++,i.bl_tree[32]++):c<=10?i.bl_tree[34]++:i.bl_tree[36]++,c=0,a=o,l===0?(A=138,u=3):o===l?(A=6,u=3):(A=7,u=4))},eN=function(i,e,t){var n,o,a=-1,l=e[1],c=0,A=7,u=4;for(l===0&&(A=138,u=3),n=0;n<=t;n++)if(o=l,l=e[2*(n+1)+1],!(++c<A&&o===l)){if(c<u)do ao(i,o,i.bl_tree);while(--c!=0);else o!==0?(o!==a&&(ao(i,o,i.bl_tree),c--),ao(i,16,i.bl_tree),cr(i,c-3,2)):c<=10?(ao(i,17,i.bl_tree),cr(i,c-3,3)):(ao(i,18,i.bl_tree),cr(i,c-11,7));c=0,a=o,l===0?(A=138,u=3):o===l?(A=6,u=3):(A=7,u=4)}},tN=!1,nN=function(i,e,t,n){cr(i,0+(n?1:0),3),function(o,a,l,c){fF(o),c&&(jd(o,l),jd(o,~l)),o.pending_buf.set(o.window.subarray(a,a+l),o.pending),o.pending+=l}(i,e,t,!0)},$d={_tr_init:function(i){tN||(function(){var e,t,n,o,a,l=new Array(16);for(n=0,o=0;o<28;o++)for(rI[o]=n,e=0;e<1<<ZE[o];e++)_d[n++]=o;for(_d[n-1]=o,a=0,o=0;o<16;o++)for(v1[o]=a,e=0;e<1<<h1[o];e++)Jd[a++]=o;for(a>>=7;o<30;o++)for(v1[o]=a<<7,e=0;e<1<<h1[o]-7;e++)Jd[256+a++]=o;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)Yo[2*e+1]=8,e++,l[8]++;for(;e<=255;)Yo[2*e+1]=9,e++,l[9]++;for(;e<=279;)Yo[2*e+1]=7,e++,l[7]++;for(;e<=287;)Yo[2*e+1]=8,e++,l[8]++;for(hF(Yo,287,l),e=0;e<30;e++)Bd[2*e+1]=5,Bd[2*e]=uF(e,5);Y_=new vE(Yo,ZE,257,286,15),Z_=new vE(Bd,h1,0,30,15),K_=new vE(new Array(0),Cj,0,19,7)}(),tN=!0),i.l_desc=new yE(i.dyn_ltree,Y_),i.d_desc=new yE(i.dyn_dtree,Z_),i.bl_desc=new yE(i.bl_tree,K_),i.bi_buf=0,i.bi_valid=0,J_(i)},_tr_stored_block:nN,_tr_flush_block:function(i,e,t,n){var o,a,l=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=function(c){var A,u=4093624447;for(A=0;A<=31;A++,u>>>=1)if(1&u&&c.dyn_ltree[2*A]!==0)return 0;if(c.dyn_ltree[18]!==0||c.dyn_ltree[20]!==0||c.dyn_ltree[26]!==0)return 1;for(A=32;A<256;A++)if(c.dyn_ltree[2*A]!==0)return 1;return 0}(i)),wE(i,i.l_desc),wE(i,i.d_desc),l=function(c){var A;for($_(c,c.dyn_ltree,c.l_desc.max_code),$_(c,c.dyn_dtree,c.d_desc.max_code),wE(c,c.bl_desc),A=18;A>=3&&c.bl_tree[2*X_[A]+1]===0;A--);return c.opt_len+=3*(A+1)+5+5+4,A}(i),o=i.opt_len+3+7>>>3,(a=i.static_len+3+7>>>3)<=o&&(o=a)):o=a=t+5,t+4<=o&&e!==-1?nN(i,e,t,n):i.strategy===4||a===o?(cr(i,2+(n?1:0),3),q_(i,Yo,Bd)):(cr(i,4+(n?1:0),3),function(c,A,u,h){var f;for(cr(c,A-257,5),cr(c,u-1,5),cr(c,h-4,4),f=0;f<h;f++)cr(c,c.bl_tree[2*X_[f]+1],3);eN(c,c.dyn_ltree,A-1),eN(c,c.dyn_dtree,u-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,l+1),q_(i,i.dyn_ltree,i.dyn_dtree)),J_(i),n&&fF(i)},_tr_tally:function(i,e,t){return i.pending_buf[i.d_buf+2*i.last_lit]=e>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&e,i.pending_buf[i.l_buf+i.last_lit]=255&t,i.last_lit++,e===0?i.dyn_ltree[2*t]++:(i.matches++,e--,i.dyn_ltree[2*(_d[t]+256+1)]++,i.dyn_dtree[2*AF(e)]++),i.last_lit===i.lit_bufsize-1},_tr_align:function(i){cr(i,2,3),ao(i,256,Yo),function(e){e.bi_valid===16?(jd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(i)}},Nd=function(i,e,t,n){for(var o=65535&i|0,a=i>>>16&65535|0,l=0;t!==0;){t-=l=t>2e3?2e3:t;do a=a+(o=o+e[n++]|0)|0;while(--l);o%=65521,a%=65521}return o|a<<16|0},Sj=new Uint32Array(function(){for(var i,e=[],t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e}()),ci=function(i,e,t,n){var o=Sj,a=n+t;i^=-1;for(var l=n;l<a;l++)i=i>>>8^o[255&(i^e[l])];return-1^i},xc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ej=$d._tr_init,Ij=$d._tr_stored_block,Mj=$d._tr_flush_block,rl=$d._tr_tally,Tj=$d._tr_align,vc=lt.Z_NO_FLUSH,Dj=lt.Z_PARTIAL_FLUSH,Bj=lt.Z_FULL_FLUSH,el=lt.Z_FINISH,iN=lt.Z_BLOCK,so=lt.Z_OK,rN=lt.Z_STREAM_END,es=lt.Z_STREAM_ERROR,Lj=lt.Z_DATA_ERROR,bE=lt.Z_BUF_ERROR,Rj=lt.Z_DEFAULT_COMPRESSION,kj=lt.Z_FILTERED,t1=lt.Z_HUFFMAN_ONLY,Pj=lt.Z_RLE,_j=lt.Z_FIXED,Nj=lt.Z_DEFAULT_STRATEGY,Fj=lt.Z_UNKNOWN,y1=lt.Z_DEFLATED,qa=function(i,e){return i.msg=xc[e],e},sN=function(i){return(i<<1)-(i>4?9:0)},tl=function(i){for(var e=i.length;--e>=0;)i[e]=0},sl=function(i,e,t){return(e<<i.hash_shift^t)&i.hash_mask},ja=function(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},gi=function(i,e){Mj(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,ja(i.strm)},Ot=function(i,e){i.pending_buf[i.pending++]=e},Ed=function(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=255&e},dF=function(i,e){var t,n,o=i.max_chain_length,a=i.strstart,l=i.prev_length,c=i.nice_match,A=i.strstart>i.w_size-262?i.strstart-(i.w_size-262):0,u=i.window,h=i.w_mask,f=i.prev,d=i.strstart+258,p=u[a+l-1],m=u[a+l];i.prev_length>=i.good_match&&(o>>=2),c>i.lookahead&&(c=i.lookahead);do if(u[(t=e)+l]===m&&u[t+l-1]===p&&u[t]===u[a]&&u[++t]===u[a+1]){a+=2,t++;do;while(u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&a<d);if(n=258-(d-a),a=d-258,n>l){if(i.match_start=e,l=n,n>=c)break;p=u[a+l-1],m=u[a+l]}}while((e=f[e&h])>A&&--o!=0);return l<=i.lookahead?l:i.lookahead},pc=function(i){var e,t,n,o,a,l,c,A,u,h,f=i.w_size;do{if(o=i.window_size-i.lookahead-i.strstart,i.strstart>=f+(f-262)){i.window.set(i.window.subarray(f,f+f),0),i.match_start-=f,i.strstart-=f,i.block_start-=f,e=t=i.hash_size;do n=i.head[--e],i.head[e]=n>=f?n-f:0;while(--t);e=t=f;do n=i.prev[--e],i.prev[e]=n>=f?n-f:0;while(--t);o+=f}if(i.strm.avail_in===0)break;if(l=i.strm,c=i.window,A=i.strstart+i.lookahead,u=o,h=void 0,(h=l.avail_in)>u&&(h=u),t=h===0?0:(l.avail_in-=h,c.set(l.input.subarray(l.next_in,l.next_in+h),A),l.state.wrap===1?l.adler=Nd(l.adler,c,h,A):l.state.wrap===2&&(l.adler=ci(l.adler,c,h,A)),l.next_in+=h,l.total_in+=h,h),i.lookahead+=t,i.lookahead+i.insert>=3)for(a=i.strstart-i.insert,i.ins_h=i.window[a],i.ins_h=sl(i,i.ins_h,i.window[a+1]);i.insert&&(i.ins_h=sl(i,i.ins_h,i.window[a+3-1]),i.prev[a&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=a,a++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<262&&i.strm.avail_in!==0)},CE=function(i,e){for(var t,n;;){if(i.lookahead<262){if(pc(i),i.lookahead<262&&e===vc)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=sl(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-262&&(i.match_length=dF(i,t)),i.match_length>=3)if(n=rl(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=sl(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=sl(i,i.ins_h,i.window[i.strstart+1]);else n=rl(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(gi(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,e===el?(gi(i,!0),i.strm.avail_out===0?3:4):i.last_lit&&(gi(i,!1),i.strm.avail_out===0)?1:2},yu=function(i,e){for(var t,n,o;;){if(i.lookahead<262){if(pc(i),i.lookahead<262&&e===vc)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=sl(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-262&&(i.match_length=dF(i,t),i.match_length<=5&&(i.strategy===kj||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-3,n=rl(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=sl(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,n&&(gi(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if((n=rl(i,0,i.window[i.strstart-1]))&&gi(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=rl(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,e===el?(gi(i,!0),i.strm.avail_out===0?3:4):i.last_lit&&(gi(i,!1),i.strm.avail_out===0)?1:2};function ro(i,e,t,n,o){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=o}var Ld=[new ro(0,0,0,0,function(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(pc(i),i.lookahead===0&&e===vc)return 1;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+t;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,gi(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-262&&(gi(i,!1),i.strm.avail_out===0))return 1}return i.insert=0,e===el?(gi(i,!0),i.strm.avail_out===0?3:4):(i.strstart>i.block_start&&(gi(i,!1),i.strm.avail_out),1)}),new ro(4,4,8,4,CE),new ro(4,5,16,8,CE),new ro(4,6,32,32,CE),new ro(4,4,16,16,yu),new ro(8,16,32,32,yu),new ro(8,16,128,128,yu),new ro(8,32,128,256,yu),new ro(32,128,258,1024,yu),new ro(32,258,258,4096,yu)];function Qj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),tl(this.dyn_ltree),tl(this.dyn_dtree),tl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),tl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),tl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var pF=function(i){if(!i||!i.state)return qa(i,es);i.total_in=i.total_out=0,i.data_type=Fj;var e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,i.adler=e.wrap===2?0:1,e.last_flush=vc,Ej(e),so},mF=function(i){var e,t=pF(i);return t===so&&((e=i.state).window_size=2*e.w_size,tl(e.head),e.max_lazy_match=Ld[e.level].max_lazy,e.good_match=Ld[e.level].good_length,e.nice_match=Ld[e.level].nice_length,e.max_chain_length=Ld[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},oN=function(i,e,t,n,o,a){if(!i)return es;var l=1;if(e===Rj&&(e=6),n<0?(l=0,n=-n):n>15&&(l=2,n-=16),o<1||o>9||t!==y1||n<8||n>15||e<0||e>9||a<0||a>_j)return qa(i,es);n===8&&(n=9);var c=new Qj;return i.state=c,c.strm=i,c.wrap=l,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new Uint8Array(2*c.w_size),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new Uint8Array(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=t,mF(i)},Fd={deflateInit:function(i,e){return oN(i,e,y1,15,8,Nj)},deflateInit2:oN,deflateReset:mF,deflateResetKeep:pF,deflateSetHeader:function(i,e){return i&&i.state?i.state.wrap!==2?es:(i.state.gzhead=e,so):es},deflate:function(i,e){var t,n;if(!i||!i.state||e>iN||e<0)return i?qa(i,es):es;var o=i.state;if(!i.output||!i.input&&i.avail_in!==0||o.status===666&&e!==el)return qa(i,i.avail_out===0?bE:es);o.strm=i;var a=o.last_flush;if(o.last_flush=e,o.status===42)if(o.wrap===2)i.adler=0,Ot(o,31),Ot(o,139),Ot(o,8),o.gzhead?(Ot(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Ot(o,255&o.gzhead.time),Ot(o,o.gzhead.time>>8&255),Ot(o,o.gzhead.time>>16&255),Ot(o,o.gzhead.time>>24&255),Ot(o,o.level===9?2:o.strategy>=t1||o.level<2?4:0),Ot(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Ot(o,255&o.gzhead.extra.length),Ot(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(i.adler=ci(i.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(Ot(o,0),Ot(o,0),Ot(o,0),Ot(o,0),Ot(o,0),Ot(o,o.level===9?2:o.strategy>=t1||o.level<2?4:0),Ot(o,3),o.status=113);else{var l=y1+(o.w_bits-8<<4)<<8;l|=(o.strategy>=t1||o.level<2?0:o.level<6?1:o.level===6?2:3)<<6,o.strstart!==0&&(l|=32),l+=31-l%31,o.status=113,Ed(o,l),o.strstart!==0&&(Ed(o,i.adler>>>16),Ed(o,65535&i.adler)),i.adler=1}if(o.status===69)if(o.gzhead.extra){for(t=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),ja(i),t=o.pending,o.pending!==o.pending_buf_size));)Ot(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(o.status===73)if(o.gzhead.name){t=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),ja(i),t=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Ot(o,n)}while(n!==0);o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),n===0&&(o.gzindex=0,o.status=91)}else o.status=91;if(o.status===91)if(o.gzhead.comment){t=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),ja(i),t=o.pending,o.pending===o.pending_buf_size)){n=1;break}n=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Ot(o,n)}while(n!==0);o.gzhead.hcrc&&o.pending>t&&(i.adler=ci(i.adler,o.pending_buf,o.pending-t,t)),n===0&&(o.status=103)}else o.status=103;if(o.status===103&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&ja(i),o.pending+2<=o.pending_buf_size&&(Ot(o,255&i.adler),Ot(o,i.adler>>8&255),i.adler=0,o.status=113)):o.status=113),o.pending!==0){if(ja(i),i.avail_out===0)return o.last_flush=-1,so}else if(i.avail_in===0&&sN(e)<=sN(a)&&e!==el)return qa(i,bE);if(o.status===666&&i.avail_in!==0)return qa(i,bE);if(i.avail_in!==0||o.lookahead!==0||e!==vc&&o.status!==666){var c=o.strategy===t1?function(A,u){for(var h;;){if(A.lookahead===0&&(pc(A),A.lookahead===0)){if(u===vc)return 1;break}if(A.match_length=0,h=rl(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,h&&(gi(A,!1),A.strm.avail_out===0))return 1}return A.insert=0,u===el?(gi(A,!0),A.strm.avail_out===0?3:4):A.last_lit&&(gi(A,!1),A.strm.avail_out===0)?1:2}(o,e):o.strategy===Pj?function(A,u){for(var h,f,d,p,m=A.window;;){if(A.lookahead<=258){if(pc(A),A.lookahead<=258&&u===vc)return 1;if(A.lookahead===0)break}if(A.match_length=0,A.lookahead>=3&&A.strstart>0&&(f=m[d=A.strstart-1])===m[++d]&&f===m[++d]&&f===m[++d]){p=A.strstart+258;do;while(f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&d<p);A.match_length=258-(p-d),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=3?(h=rl(A,1,A.match_length-3),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(h=rl(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),h&&(gi(A,!1),A.strm.avail_out===0))return 1}return A.insert=0,u===el?(gi(A,!0),A.strm.avail_out===0?3:4):A.last_lit&&(gi(A,!1),A.strm.avail_out===0)?1:2}(o,e):Ld[o.level].func(o,e);if(c!==3&&c!==4||(o.status=666),c===1||c===3)return i.avail_out===0&&(o.last_flush=-1),so;if(c===2&&(e===Dj?Tj(o):e!==iN&&(Ij(o,0,0,!1),e===Bj&&(tl(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),ja(i),i.avail_out===0))return o.last_flush=-1,so}return e!==el?so:o.wrap<=0?rN:(o.wrap===2?(Ot(o,255&i.adler),Ot(o,i.adler>>8&255),Ot(o,i.adler>>16&255),Ot(o,i.adler>>24&255),Ot(o,255&i.total_in),Ot(o,i.total_in>>8&255),Ot(o,i.total_in>>16&255),Ot(o,i.total_in>>24&255)):(Ed(o,i.adler>>>16),Ed(o,65535&i.adler)),ja(i),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?so:rN)},deflateEnd:function(i){if(!i||!i.state)return es;var e=i.state.status;return e!==42&&e!==69&&e!==73&&e!==91&&e!==103&&e!==113&&e!==666?qa(i,es):(i.state=null,e===113?qa(i,Lj):so)},deflateSetDictionary:function(i,e){var t=e.length;if(!i||!i.state)return es;var n=i.state,o=n.wrap;if(o===2||o===1&&n.status!==42||n.lookahead)return es;if(o===1&&(i.adler=Nd(i.adler,e,t,0)),n.wrap=0,t>=n.w_size){o===0&&(tl(n.head),n.strstart=0,n.block_start=0,n.insert=0);var a=new Uint8Array(n.w_size);a.set(e.subarray(t-n.w_size,t),0),e=a,t=n.w_size}var l=i.avail_in,c=i.next_in,A=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,pc(n);n.lookahead>=3;){var u=n.strstart,h=n.lookahead-2;do n.ins_h=sl(n,n.ins_h,n.window[u+3-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--h);n.strstart=u,n.lookahead=2,pc(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,i.next_in=c,i.input=A,i.avail_in=l,n.wrap=o,so},deflateInfo:"pako deflate (from Nodeca project)"},Uj=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},gF=function(i){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(Zt(t)!=="object")throw new TypeError(t+"must be non-object");for(var n in t)Uj(t,n)&&(i[n]=t[n])}}return i},vF=function(i){for(var e=0,t=0,n=i.length;t<n;t++)e+=i[t].length;for(var o=new Uint8Array(e),a=0,l=0,c=i.length;a<c;a++){var A=i[a];o.set(A,l),l+=A.length}return o},yF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{yF=!1}for(Du=new Uint8Array(256),Vo=0;Vo<256;Vo++)Du[Vo]=Vo>=252?6:Vo>=248?5:Vo>=240?4:Vo>=224?3:Vo>=192?2:1;var Du,Vo;Du[254]=Du[254]=1;var sI=function(i){if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);var e,t,n,o,a,l=i.length,c=0;for(o=0;o<l;o++)(64512&(t=i.charCodeAt(o)))==55296&&o+1<l&&(64512&(n=i.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(n-56320),o++),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),a=0,o=0;a<c;o++)(64512&(t=i.charCodeAt(o)))==55296&&o+1<l&&(64512&(n=i.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(n-56320),o++),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|63&t):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|63&t):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|63&t);return e},Oj=function(i,e){var t,n,o=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));var a=new Array(2*o);for(n=0,t=0;t<o;){var l=i[t++];if(l<128)a[n++]=l;else{var c=Du[l];if(c>4)a[n++]=65533,t+=c-1;else{for(l&=c===2?31:c===3?15:7;c>1&&t<o;)l=l<<6|63&i[t++],c--;c>1?a[n++]=65533:l<65536?a[n++]=l:(l-=65536,a[n++]=55296|l>>10&1023,a[n++]=56320|1023&l)}}}return function(A,u){if(u<65534&&A.subarray&&yF)return String.fromCharCode.apply(null,A.length===u?A:A.subarray(0,u));for(var h="",f=0;f<u;f++)h+=String.fromCharCode(A[f]);return h}(a,n)},Gj=function(i,e){(e=e||i.length)>i.length&&(e=i.length);for(var t=e-1;t>=0&&(192&i[t])==128;)t--;return t<0||t===0?e:t+Du[i[t]]>e?t:e},xF=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},wF=Object.prototype.toString,zj=lt.Z_NO_FLUSH,Hj=lt.Z_SYNC_FLUSH,Wj=lt.Z_FULL_FLUSH,Vj=lt.Z_FINISH,x1=lt.Z_OK,Xj=lt.Z_STREAM_END,Yj=lt.Z_DEFAULT_COMPRESSION,Zj=lt.Z_DEFAULT_STRATEGY,Kj=lt.Z_DEFLATED;function Qd(i){this.options=gF({level:Yj,method:Kj,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zj},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xF,this.strm.avail_out=0;var t=Fd.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==x1)throw new Error(xc[t]);if(e.header&&Fd.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n=typeof e.dictionary=="string"?sI(e.dictionary):wF.call(e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(e.dictionary):e.dictionary,(t=Fd.deflateSetDictionary(this.strm,n))!==x1)throw new Error(xc[t]);this._dict_set=!0}}function SE(i,e){var t=new Qd(e);if(t.push(i,!0),t.err)throw t.msg||xc[t.err];return t.result}Qd.prototype.push=function(i,e){var t,n,o=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:e===!0?Vj:zj,typeof i=="string"?o.input=sI(i):wF.call(i)==="[object ArrayBuffer]"?o.input=new Uint8Array(i):o.input=i,o.next_in=0,o.avail_in=o.input.length;;)if(o.avail_out===0&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(n===Hj||n===Wj)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if((t=Fd.deflate(o,n))===Xj)return o.next_out>0&&this.onData(o.output.subarray(0,o.next_out)),t=Fd.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===x1;if(o.avail_out!==0){if(n>0&&o.next_out>0)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(o.avail_in===0)break}else this.onData(o.output)}return!0},Qd.prototype.onData=function(i){this.chunks.push(i)},Qd.prototype.onEnd=function(i){i===x1&&(this.result=vF(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var n1={Deflate:Qd,deflate:SE,deflateRaw:function(i,e){return(e=e||{}).raw=!0,SE(i,e)},gzip:function(i,e){return(e=e||{}).gzip=!0,SE(i,e)},constants:lt},Jj=function(i,e){var t,n,o,a,l,c,A,u,h,f,d,p,m,b,g,w,I,v,E,S,C,M,D,T,B=i.state;t=i.next_in,D=i.input,n=t+(i.avail_in-5),o=i.next_out,T=i.output,a=o-(e-i.avail_out),l=o+(i.avail_out-257),c=B.dmax,A=B.wsize,u=B.whave,h=B.wnext,f=B.window,d=B.hold,p=B.bits,m=B.lencode,b=B.distcode,g=(1<<B.lenbits)-1,w=(1<<B.distbits)-1;e:do{p<15&&(d+=D[t++]<<p,p+=8,d+=D[t++]<<p,p+=8),I=m[d&g];t:for(;;){if(d>>>=v=I>>>24,p-=v,(v=I>>>16&255)===0)T[o++]=65535&I;else{if(!(16&v)){if(!(64&v)){I=m[(65535&I)+(d&(1<<v)-1)];continue t}if(32&v){B.mode=12;break e}i.msg="invalid literal/length code",B.mode=30;break e}E=65535&I,(v&=15)&&(p<v&&(d+=D[t++]<<p,p+=8),E+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=D[t++]<<p,p+=8,d+=D[t++]<<p,p+=8),I=b[d&w];n:for(;;){if(d>>>=v=I>>>24,p-=v,!(16&(v=I>>>16&255))){if(!(64&v)){I=b[(65535&I)+(d&(1<<v)-1)];continue n}i.msg="invalid distance code",B.mode=30;break e}if(S=65535&I,p<(v&=15)&&(d+=D[t++]<<p,(p+=8)<v&&(d+=D[t++]<<p,p+=8)),(S+=d&(1<<v)-1)>c){i.msg="invalid distance too far back",B.mode=30;break e}if(d>>>=v,p-=v,S>(v=o-a)){if((v=S-v)>u&&B.sane){i.msg="invalid distance too far back",B.mode=30;break e}if(C=0,M=f,h===0){if(C+=A-v,v<E){E-=v;do T[o++]=f[C++];while(--v);C=o-S,M=T}}else if(h<v){if(C+=A+h-v,(v-=h)<E){E-=v;do T[o++]=f[C++];while(--v);if(C=0,h<E){E-=v=h;do T[o++]=f[C++];while(--v);C=o-S,M=T}}}else if(C+=h-v,v<E){E-=v;do T[o++]=f[C++];while(--v);C=o-S,M=T}for(;E>2;)T[o++]=M[C++],T[o++]=M[C++],T[o++]=M[C++],E-=3;E&&(T[o++]=M[C++],E>1&&(T[o++]=M[C++]))}else{C=o-S;do T[o++]=T[C++],T[o++]=T[C++],T[o++]=T[C++],E-=3;while(E>2);E&&(T[o++]=T[C++],E>1&&(T[o++]=T[C++]))}break}}break}}while(t<n&&o<l);t-=E=p>>3,d&=(1<<(p-=E<<3))-1,i.next_in=t,i.next_out=o,i.avail_in=t<n?n-t+5:5-(t-n),i.avail_out=o<l?l-o+257:257-(o-l),B.hold=d,B.bits=p},jj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$j=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),eq=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ud=function(i,e,t,n,o,a,l,c){var A,u,h,f,d,p,m,b,g,w=c.bits,I=0,v=0,E=0,S=0,C=0,M=0,D=0,T=0,B=0,R=0,P=null,_=0,Q=new Uint16Array(16),W=new Uint16Array(16),U=null,H=0;for(I=0;I<=15;I++)Q[I]=0;for(v=0;v<n;v++)Q[e[t+v]]++;for(C=w,S=15;S>=1&&Q[S]===0;S--);if(C>S&&(C=S),S===0)return o[a++]=20971520,o[a++]=20971520,c.bits=1,0;for(E=1;E<S&&Q[E]===0;E++);for(C<E&&(C=E),T=1,I=1;I<=15;I++)if(T<<=1,(T-=Q[I])<0)return-1;if(T>0&&(i===0||S!==1))return-1;for(W[1]=0,I=1;I<15;I++)W[I+1]=W[I]+Q[I];for(v=0;v<n;v++)e[t+v]!==0&&(l[W[e[t+v]]++]=v);if(i===0?(P=U=l,p=19):i===1?(P=jj,_-=257,U=qj,H-=257,p=256):(P=$j,U=eq,p=-1),R=0,v=0,I=E,d=a,M=C,D=0,h=-1,f=(B=1<<C)-1,i===1&&B>852||i===2&&B>592)return 1;for(;;){m=I-D,l[v]<p?(b=0,g=l[v]):l[v]>p?(b=U[H+l[v]],g=P[_+l[v]]):(b=96,g=0),A=1<<I-D,E=u=1<<M;do o[d+(R>>D)+(u-=A)]=m<<24|b<<16|g|0;while(u!==0);for(A=1<<I-1;R&A;)A>>=1;if(A!==0?(R&=A-1,R+=A):R=0,v++,--Q[I]==0){if(I===S)break;I=e[t+l[v]]}if(I>C&&(R&f)!==h){for(D===0&&(D=C),d+=E,T=1<<(M=I-D);M+D<S&&!((T-=Q[M+D])<=0);)M++,T<<=1;if(B+=1<<M,i===1&&B>852||i===2&&B>592)return 1;o[h=R&f]=C<<24|M<<16|d-a|0}}return R!==0&&(o[d+R]=I-D<<24|64<<16|0),c.bits=C,0},aN=lt.Z_FINISH,tq=lt.Z_BLOCK,i1=lt.Z_TREES,fc=lt.Z_OK,nq=lt.Z_STREAM_END,iq=lt.Z_NEED_DICT,ts=lt.Z_STREAM_ERROR,lN=lt.Z_DATA_ERROR,cN=lt.Z_MEM_ERROR,rq=lt.Z_BUF_ERROR,AN=lt.Z_DEFLATED,uN=function(i){return(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24)};function sq(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var EE,IE,bF=function(i){if(!i||!i.state)return ts;var e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,fc},CF=function(i){if(!i||!i.state)return ts;var e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,bF(i)},SF=function(i,e){var t;if(!i||!i.state)return ts;var n=i.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ts:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,CF(i))},hN=function(i,e){if(!i)return ts;var t=new sq;i.state=t,t.window=null;var n=SF(i,e);return n!==fc&&(i.state=null),n},fN=!0,oq=function(i){if(fN){EE=new Int32Array(512),IE=new Int32Array(32);for(var e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Ud(1,i.lens,0,288,EE,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Ud(2,i.lens,0,32,IE,0,i.work,{bits:5}),fN=!1}i.lencode=EE,i.lenbits=9,i.distcode=IE,i.distbits=5},dN=function(i,e,t,n){var o,a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>n&&(o=n),a.window.set(e.subarray(t-n,t-n+o),a.wnext),(n-=o)?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},Jo={inflateReset:CF,inflateReset2:SF,inflateResetKeep:bF,inflateInit:function(i){return hN(i,15)},inflateInit2:hN,inflate:function(i,e){var t,n,o,a,l,c,A,u,h,f,d,p,m,b,g,w,I,v,E,S,C,M,D,T,B=0,R=new Uint8Array(4),P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return ts;(t=i.state).mode===12&&(t.mode=13),l=i.next_out,o=i.output,A=i.avail_out,a=i.next_in,n=i.input,c=i.avail_in,u=t.hold,h=t.bits,f=c,d=A,M=fc;e:for(;;)switch(t.mode){case 1:if(t.wrap===0){t.mode=13;break}for(;h<16;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(2&t.wrap&&u===35615){t.check=0,R[0]=255&u,R[1]=u>>>8&255,t.check=ci(t.check,R,2,0),u=0,h=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&u)<<8)+(u>>8))%31){i.msg="incorrect header check",t.mode=30;break}if((15&u)!==AN){i.msg="unknown compression method",t.mode=30;break}if(h-=4,C=8+(15&(u>>>=4)),t.wbits===0)t.wbits=C;else if(C>t.wbits){i.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,i.adler=t.check=1,t.mode=512&u?10:12,u=0,h=0;break;case 2:for(;h<16;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(t.flags=u,(255&t.flags)!==AN){i.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){i.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=u>>8&1),512&t.flags&&(R[0]=255&u,R[1]=u>>>8&255,t.check=ci(t.check,R,2,0)),u=0,h=0,t.mode=3;case 3:for(;h<32;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.head&&(t.head.time=u),512&t.flags&&(R[0]=255&u,R[1]=u>>>8&255,R[2]=u>>>16&255,R[3]=u>>>24&255,t.check=ci(t.check,R,4,0)),u=0,h=0,t.mode=4;case 4:for(;h<16;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.head&&(t.head.xflags=255&u,t.head.os=u>>8),512&t.flags&&(R[0]=255&u,R[1]=u>>>8&255,t.check=ci(t.check,R,2,0)),u=0,h=0,t.mode=5;case 5:if(1024&t.flags){for(;h<16;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.length=u,t.head&&(t.head.extra_len=u),512&t.flags&&(R[0]=255&u,R[1]=u>>>8&255,t.check=ci(t.check,R,2,0)),u=0,h=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((p=t.length)>c&&(p=c),p&&(t.head&&(C=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+p),C)),512&t.flags&&(t.check=ci(t.check,n,p,a)),c-=p,a+=p,t.length-=p),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(c===0)break e;p=0;do C=n[a+p++],t.head&&C&&t.length<65536&&(t.head.name+=String.fromCharCode(C));while(C&&p<c);if(512&t.flags&&(t.check=ci(t.check,n,p,a)),c-=p,a+=p,C)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(c===0)break e;p=0;do C=n[a+p++],t.head&&C&&t.length<65536&&(t.head.comment+=String.fromCharCode(C));while(C&&p<c);if(512&t.flags&&(t.check=ci(t.check,n,p,a)),c-=p,a+=p,C)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;h<16;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(u!==(65535&t.check)){i.msg="header crc mismatch",t.mode=30;break}u=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=12;break;case 10:for(;h<32;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}i.adler=t.check=uN(u),u=0,h=0,t.mode=11;case 11:if(t.havedict===0)return i.next_out=l,i.avail_out=A,i.next_in=a,i.avail_in=c,t.hold=u,t.bits=h,iq;i.adler=t.check=1,t.mode=12;case 12:if(e===tq||e===i1)break e;case 13:if(t.last){u>>>=7&h,h-=7&h,t.mode=27;break}for(;h<3;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}switch(t.last=1&u,h-=1,3&(u>>>=1)){case 0:t.mode=14;break;case 1:if(oq(t),t.mode=20,e===i1){u>>>=2,h-=2;break e}break;case 2:t.mode=17;break;case 3:i.msg="invalid block type",t.mode=30}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){i.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&u,u=0,h=0,t.mode=15,e===i1)break e;case 15:t.mode=16;case 16:if(p=t.length){if(p>c&&(p=c),p>A&&(p=A),p===0)break e;o.set(n.subarray(a,a+p),l),c-=p,a+=p,A-=p,l+=p,t.length-=p;break}t.mode=12;break;case 17:for(;h<14;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(t.nlen=257+(31&u),u>>>=5,h-=5,t.ndist=1+(31&u),u>>>=5,h-=5,t.ncode=4+(15&u),u>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;h<3;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.lens[P[t.have++]]=7&u,u>>>=3,h-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},M=Ud(0,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,M){i.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;w=(B=t.lencode[u&(1<<t.lenbits)-1])>>>16&255,I=65535&B,!((g=B>>>24)<=h);){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(I<16)u>>>=g,h-=g,t.lens[t.have++]=I;else{if(I===16){for(T=g+2;h<T;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(u>>>=g,h-=g,t.have===0){i.msg="invalid bit length repeat",t.mode=30;break}C=t.lens[t.have-1],p=3+(3&u),u>>>=2,h-=2}else if(I===17){for(T=g+3;h<T;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}h-=g,C=0,p=3+(7&(u>>>=g)),u>>>=3,h-=3}else{for(T=g+7;h<T;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}h-=g,C=0,p=11+(127&(u>>>=g)),u>>>=7,h-=7}if(t.have+p>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=30;break}for(;p--;)t.lens[t.have++]=C}}if(t.mode===30)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,D={bits:t.lenbits},M=Ud(1,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,M){i.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},M=Ud(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,M){i.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===i1)break e;case 20:t.mode=21;case 21:if(c>=6&&A>=258){i.next_out=l,i.avail_out=A,i.next_in=a,i.avail_in=c,t.hold=u,t.bits=h,Jj(i,d),l=i.next_out,o=i.output,A=i.avail_out,a=i.next_in,n=i.input,c=i.avail_in,u=t.hold,h=t.bits,t.mode===12&&(t.back=-1);break}for(t.back=0;w=(B=t.lencode[u&(1<<t.lenbits)-1])>>>16&255,I=65535&B,!((g=B>>>24)<=h);){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(w&&!(240&w)){for(v=g,E=w,S=I;w=(B=t.lencode[S+((u&(1<<v+E)-1)>>v)])>>>16&255,I=65535&B,!(v+(g=B>>>24)<=h);){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}u>>>=v,h-=v,t.back+=v}if(u>>>=g,h-=g,t.back+=g,t.length=I,w===0){t.mode=26;break}if(32&w){t.back=-1,t.mode=12;break}if(64&w){i.msg="invalid literal/length code",t.mode=30;break}t.extra=15&w,t.mode=22;case 22:if(t.extra){for(T=t.extra;h<T;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;w=(B=t.distcode[u&(1<<t.distbits)-1])>>>16&255,I=65535&B,!((g=B>>>24)<=h);){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(!(240&w)){for(v=g,E=w,S=I;w=(B=t.distcode[S+((u&(1<<v+E)-1)>>v)])>>>16&255,I=65535&B,!(v+(g=B>>>24)<=h);){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}u>>>=v,h-=v,t.back+=v}if(u>>>=g,h-=g,t.back+=g,64&w){i.msg="invalid distance code",t.mode=30;break}t.offset=I,t.extra=15&w,t.mode=24;case 24:if(t.extra){for(T=t.extra;h<T;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(A===0)break e;if(p=d-A,t.offset>p){if((p=t.offset-p)>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=30;break}p>t.wnext?(p-=t.wnext,m=t.wsize-p):m=t.wnext-p,p>t.length&&(p=t.length),b=t.window}else b=o,m=l-t.offset,p=t.length;p>A&&(p=A),A-=p,t.length-=p;do o[l++]=b[m++];while(--p);t.length===0&&(t.mode=21);break;case 26:if(A===0)break e;o[l++]=t.length,A--,t.mode=21;break;case 27:if(t.wrap){for(;h<32;){if(c===0)break e;c--,u|=n[a++]<<h,h+=8}if(d-=A,i.total_out+=d,t.total+=d,d&&(i.adler=t.check=t.flags?ci(t.check,o,d,l-d):Nd(t.check,o,d,l-d)),d=A,(t.flags?u:uN(u))!==t.check){i.msg="incorrect data check",t.mode=30;break}u=0,h=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;h<32;){if(c===0)break e;c--,u+=n[a++]<<h,h+=8}if(u!==(4294967295&t.total)){i.msg="incorrect length check",t.mode=30;break}u=0,h=0}t.mode=29;case 29:M=nq;break e;case 30:M=lN;break e;case 31:return cN;case 32:default:return ts}return i.next_out=l,i.avail_out=A,i.next_in=a,i.avail_in=c,t.hold=u,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<30&&(t.mode<27||e!==aN))&&dN(i,i.output,i.next_out,d-i.avail_out),f-=i.avail_in,d-=i.avail_out,i.total_in+=f,i.total_out+=d,t.total+=d,t.wrap&&d&&(i.adler=t.check=t.flags?ci(t.check,o,d,i.next_out-d):Nd(t.check,o,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===12?128:0)+(t.mode===20||t.mode===15?256:0),(f===0&&d===0||e===aN)&&M===fc&&(M=rq),M},inflateEnd:function(i){if(!i||!i.state)return ts;var e=i.state;return e.window&&(e.window=null),i.state=null,fc},inflateGetHeader:function(i,e){if(!i||!i.state)return ts;var t=i.state;return 2&t.wrap?(t.head=e,e.done=!1,fc):ts},inflateSetDictionary:function(i,e){var t,n=e.length;return i&&i.state?(t=i.state).wrap!==0&&t.mode!==11?ts:t.mode===11&&Nd(1,e,n,0)!==t.check?lN:dN(i,e,n,n)?(t.mode=31,cN):(t.havedict=1,fc):ts},inflateInfo:"pako inflate (from Nodeca project)"},aq=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},EF=Object.prototype.toString,lq=lt.Z_NO_FLUSH,cq=lt.Z_FINISH,Od=lt.Z_OK,ME=lt.Z_STREAM_END,TE=lt.Z_NEED_DICT,Aq=lt.Z_STREAM_ERROR,pN=lt.Z_DATA_ERROR,uq=lt.Z_MEM_ERROR;function Gd(i){this.options=gF({chunkSize:65536,windowBits:15,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||i&&i.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xF,this.strm.avail_out=0;var t=Jo.inflateInit2(this.strm,e.windowBits);if(t!==Od)throw new Error(xc[t]);if(this.header=new aq,Jo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=sI(e.dictionary):EF.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Jo.inflateSetDictionary(this.strm,e.dictionary))!==Od))throw new Error(xc[t])}function DE(i,e){var t=new Gd(e);if(t.push(i),t.err)throw t.msg||xc[t.err];return t.result}Gd.prototype.push=function(i,e){var t,n,o,a=this.strm,l=this.options.chunkSize,c=this.options.dictionary;if(this.ended)return!1;for(n=e===~~e?e:e===!0?cq:lq,EF.call(i)==="[object ArrayBuffer]"?a.input=new Uint8Array(i):a.input=i,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(l),a.next_out=0,a.avail_out=l),(t=Jo.inflate(a,n))===TE&&c&&((t=Jo.inflateSetDictionary(a,c))===Od?t=Jo.inflate(a,n):t===pN&&(t=TE));a.avail_in>0&&t===ME&&a.state.wrap>0&&i[a.next_in]!==0;)Jo.inflateReset(a),t=Jo.inflate(a,n);switch(t){case Aq:case pN:case TE:case uq:return this.onEnd(t),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(a.avail_out===0||t===ME))if(this.options.to==="string"){var A=Gj(a.output,a.next_out),u=a.next_out-A,h=Oj(a.output,A);a.next_out=u,a.avail_out=l-u,u&&a.output.set(a.output.subarray(A,A+u),0),this.onData(h)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(t!==Od||o!==0){if(t===ME)return t=Jo.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(a.avail_in===0)break}}return!0},Gd.prototype.onData=function(i){this.chunks.push(i)},Gd.prototype.onEnd=function(i){i===Od&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vF(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var r1={Inflate:Gd,inflate:DE,inflateRaw:function(i,e){return(e=e||{}).raw=!0,DE(i,e)},ungzip:DE,constants:lt},hq={Deflate:n1.Deflate,deflate:n1.deflate,deflateRaw:n1.deflateRaw,gzip:n1.gzip,Inflate:r1.Inflate,inflate:r1.inflate,inflateRaw:r1.inflateRaw,ungzip:r1.ungzip,constants:lt};function fq(i,e,t){var n=e===void 0?null:e,o=function(A,u){var h=atob(A);if(u){for(var f=new Uint8Array(h.length),d=0,p=h.length;d<p;++d)f[d]=h.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return h}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var mN,gN,vN,BE,dq=(mN="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMQogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIxLTEwLTIxCiAqIFZlcnNpb246IDEuMC41CiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuKHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KShlKX1mdW5jdGlvbiBlKHQsZSxyLG4sYSxpLG8pe3RyeXt2YXIgcz10W2ldKG8pLGM9cy52YWx1ZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHQpfXMuZG9uZT9lKGMpOlByb21pc2UucmVzb2x2ZShjKS50aGVuKG4sYSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxpKXt2YXIgbz10LmFwcGx5KHIsbik7ZnVuY3Rpb24gcyh0KXtlKG8sYSxpLHMsYywibmV4dCIsdCl9ZnVuY3Rpb24gYyh0KXtlKG8sYSxpLHMsYywidGhyb3ciLHQpfXModm9pZCAwKX0pKX19ZnVuY3Rpb24gbih0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KGUpO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIGEodCxlKXt2YXIgcj0idW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmdFtTeW1ib2wuaXRlcmF0b3JdfHx0WyJAQGl0ZXJhdG9yIl07aWYoIXIpe2lmKEFycmF5LmlzQXJyYXkodCl8fChyPWZ1bmN0aW9uKHQsZSl7aWYodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBuKHQsZSk7dmFyIHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09ciYmdC5jb25zdHJ1Y3RvciYmKHI9dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKHQpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/bih0LGUpOnZvaWQgMH19KHQpKXx8ZSYmdCYmIm51bWJlciI9PXR5cGVvZiB0Lmxlbmd0aCl7ciYmKHQ9cik7dmFyIGE9MCxpPWZ1bmN0aW9uKCl7fTtyZXR1cm57czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gYT49dC5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOnRbYSsrXX19LGU6ZnVuY3Rpb24odCl7dGhyb3cgdH0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIG8scz0hMCxjPSExO3JldHVybntzOmZ1bmN0aW9uKCl7cj1yLmNhbGwodCl9LG46ZnVuY3Rpb24oKXt2YXIgdD1yLm5leHQoKTtyZXR1cm4gcz10LmRvbmUsdH0sZTpmdW5jdGlvbih0KXtjPSEwLG89dH0sZjpmdW5jdGlvbigpe3RyeXtzfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKX1maW5hbGx5e2lmKGMpdGhyb3cgb319fX12YXIgaT0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9OyFmdW5jdGlvbihlKXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgcixuPU9iamVjdC5wcm90b3R5cGUsYT1uLmhhc093blByb3BlcnR5LGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30sbz1pLml0ZXJhdG9yfHwiQEBpdGVyYXRvciIscz1pLmFzeW5jSXRlcmF0b3J8fCJAQGFzeW5jSXRlcmF0b3IiLGM9aS50b1N0cmluZ1RhZ3x8IkBAdG9TdHJpbmdUYWciO2Z1bmN0aW9uIGgodCxlLHIpe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksdFtlXX10cnl7aCh7fSwiIil9Y2F0Y2godCl7aD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRbZV09cn19ZnVuY3Rpb24gbCh0LGUscixuKXt2YXIgYT1lJiZlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHY/ZTp2LGk9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksbz1uZXcgUihufHxbXSk7cmV0dXJuIGkuX2ludm9rZT1mdW5jdGlvbih0LGUscil7dmFyIG49ZjtyZXR1cm4gZnVuY3Rpb24oYSxpKXtpZihuPT09Xyl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihuPT09cCl7aWYoInRocm93Ij09PWEpdGhyb3cgaTtyZXR1cm4gTCgpfWZvcihyLm1ldGhvZD1hLHIuYXJnPWk7Oyl7dmFyIG89ci5kZWxlZ2F0ZTtpZihvKXt2YXIgcz1TKG8scik7aWYocyl7aWYocz09PWcpY29udGludWU7cmV0dXJuIHN9fWlmKCJuZXh0Ij09PXIubWV0aG9kKXIuc2VudD1yLl9zZW50PXIuYXJnO2Vsc2UgaWYoInRocm93Ij09PXIubWV0aG9kKXtpZihuPT09Zil0aHJvdyBuPXAsci5hcmc7ci5kaXNwYXRjaEV4Y2VwdGlvbihyLmFyZyl9ZWxzZSJyZXR1cm4iPT09ci5tZXRob2QmJnIuYWJydXB0KCJyZXR1cm4iLHIuYXJnKTtuPV87dmFyIGM9dSh0LGUscik7aWYoIm5vcm1hbCI9PT1jLnR5cGUpe2lmKG49ci5kb25lP3A6ZCxjLmFyZz09PWcpY29udGludWU7cmV0dXJue3ZhbHVlOmMuYXJnLGRvbmU6ci5kb25lfX0idGhyb3ciPT09Yy50eXBlJiYobj1wLHIubWV0aG9kPSJ0aHJvdyIsci5hcmc9Yy5hcmcpfX19KHQscixvKSxpfWZ1bmN0aW9uIHUodCxlLHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUscil9fWNhdGNoKHQpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOnR9fX1lLndyYXA9bDt2YXIgZj0ic3VzcGVuZGVkU3RhcnQiLGQ9InN1c3BlbmRlZFlpZWxkIixfPSJleGVjdXRpbmciLHA9ImNvbXBsZXRlZCIsZz17fTtmdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIHkoKXt9ZnVuY3Rpb24gdygpe312YXIgbT17fTtoKG0sbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YseD1iJiZiKGIoRChbXSkpKTt4JiZ4IT09biYmYS5jYWxsKHgsbykmJihtPXgpO3ZhciBrPXcucHJvdG90eXBlPXYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobSk7ZnVuY3Rpb24geih0KXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2godCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24gQShlLHIpe2Z1bmN0aW9uIG4oaSxvLHMsYyl7dmFyIGg9dShlW2ldLGUsbyk7aWYoInRocm93IiE9PWgudHlwZSl7dmFyIGw9aC5hcmcsZj1sLnZhbHVlO3JldHVybiBmJiYib2JqZWN0Ij09PXQoZikmJmEuY2FsbChmLCJfX2F3YWl0Iik/ci5yZXNvbHZlKGYuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7bigibmV4dCIsdCxzLGMpfSksKGZ1bmN0aW9uKHQpe24oInRocm93Iix0LHMsYyl9KSk6ci5yZXNvbHZlKGYpLnRoZW4oKGZ1bmN0aW9uKHQpe2wudmFsdWU9dCxzKGwpfSksKGZ1bmN0aW9uKHQpe3JldHVybiBuKCJ0aHJvdyIsdCxzLGMpfSkpfWMoaC5hcmcpfXZhciBpO3RoaXMuX2ludm9rZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gbmV3IHIoKGZ1bmN0aW9uKHIsYSl7bih0LGUscixhKX0pKX1yZXR1cm4gaT1pP2kudGhlbihhLGEpOmEoKX19ZnVuY3Rpb24gUyh0LGUpe3ZhciBuPXQuaXRlcmF0b3JbZS5tZXRob2RdO2lmKG49PT1yKXtpZihlLmRlbGVnYXRlPW51bGwsInRocm93Ij09PWUubWV0aG9kKXtpZih0Lml0ZXJhdG9yLnJldHVybiYmKGUubWV0aG9kPSJyZXR1cm4iLGUuYXJnPXIsUyh0LGUpLCJ0aHJvdyI9PT1lLm1ldGhvZCkpcmV0dXJuIGc7ZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIGd9dmFyIGE9dShuLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1hLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9YS5hcmcsZS5kZWxlZ2F0ZT1udWxsLGc7dmFyIGk9YS5hcmc7cmV0dXJuIGk/aS5kb25lPyhlW3QucmVzdWx0TmFtZV09aS52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksZS5kZWxlZ2F0ZT1udWxsLGcpOmk6KGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSxlLmRlbGVnYXRlPW51bGwsZyl9ZnVuY3Rpb24gRSh0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBCKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPSJub3JtYWwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiBSKHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSx0LmZvckVhY2goRSx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBEKHQpe2lmKHQpe3ZhciBlPXRbb107aWYoZSlyZXR1cm4gZS5jYWxsKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIG49LTEsaT1mdW5jdGlvbiBlKCl7Zm9yKDsrK248dC5sZW5ndGg7KWlmKGEuY2FsbCh0LG4pKXJldHVybiBlLnZhbHVlPXRbbl0sZS5kb25lPSExLGU7cmV0dXJuIGUudmFsdWU9cixlLmRvbmU9ITAsZX07cmV0dXJuIGkubmV4dD1pfX1yZXR1cm57bmV4dDpMfX1mdW5jdGlvbiBMKCl7cmV0dXJue3ZhbHVlOnIsZG9uZTohMH19cmV0dXJuIHkucHJvdG90eXBlPXcsaChrLCJjb25zdHJ1Y3RvciIsdyksaCh3LCJjb25zdHJ1Y3RvciIseSkseS5kaXNwbGF5TmFtZT1oKHcsYywiR2VuZXJhdG9yRnVuY3Rpb24iKSxlLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFlJiYoZT09PXl8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LHcpOih0Ll9fcHJvdG9fXz13LGgodCxjLCJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGspLHR9LGUuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHooQS5wcm90b3R5cGUpLGgoQS5wcm90b3R5cGUscywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxlLkFzeW5jSXRlcmF0b3I9QSxlLmFzeW5jPWZ1bmN0aW9uKHQscixuLGEsaSl7dm9pZCAwPT09aSYmKGk9UHJvbWlzZSk7dmFyIG89bmV3IEEobCh0LHIsbixhKSxpKTtyZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP286by5uZXh0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOm8ubmV4dCgpfSkpfSx6KGspLGgoayxjLCJHZW5lcmF0b3IiKSxoKGssbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxoKGssInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0pKSxlLmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHQpZS5wdXNoKHIpO3JldHVybiBlLnJldmVyc2UoKSxmdW5jdGlvbiByKCl7Zm9yKDtlLmxlbmd0aDspe3ZhciBuPWUucG9wKCk7aWYobiBpbiB0KXJldHVybiByLnZhbHVlPW4sci5kb25lPSExLHJ9cmV0dXJuIHIuZG9uZT0hMCxyfX0sZS52YWx1ZXM9RCxSLnByb3RvdHlwZT17Y29uc3RydWN0b3I6UixyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1yLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPXIsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goQiksIXQpZm9yKHZhciBlIGluIHRoaXMpInQiPT09ZS5jaGFyQXQoMCkmJmEuY2FsbCh0aGlzLGUpJiYhaXNOYU4oK2Uuc2xpY2UoMSkpJiYodGhpc1tlXT1yKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBlPXRoaXM7ZnVuY3Rpb24gbihuLGEpe3JldHVybiBzLnR5cGU9InRocm93IixzLmFyZz10LGUubmV4dD1uLGEmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksISFhfWZvcih2YXIgaT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7aT49MDstLWkpe3ZhciBvPXRoaXMudHJ5RW50cmllc1tpXSxzPW8uY29tcGxldGlvbjtpZigicm9vdCI9PT1vLnRyeUxvYylyZXR1cm4gbigiZW5kIik7aWYoby50cnlMb2M8PXRoaXMucHJldil7dmFyIGM9YS5jYWxsKG8sImNhdGNoTG9jIiksaD1hLmNhbGwobywiZmluYWxseUxvYyIpO2lmKGMmJmgpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX1lbHNlIGlmKGMpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIWgpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIG49dGhpcy50cnlFbnRyaWVzW3JdO2lmKG4udHJ5TG9jPD10aGlzLnByZXYmJmEuY2FsbChuLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxuLmZpbmFsbHlMb2Mpe3ZhciBpPW47YnJlYWt9fWkmJigiYnJlYWsiPT09dHx8ImNvbnRpbnVlIj09PXQpJiZpLnRyeUxvYzw9ZSYmZTw9aS5maW5hbGx5TG9jJiYoaT1udWxsKTt2YXIgbz1pP2kuY29tcGxldGlvbjp7fTtyZXR1cm4gby50eXBlPXQsby5hcmc9ZSxpPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWkuZmluYWxseUxvYyxnKTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbih0LGUpe2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuImJyZWFrIj09PXQudHlwZXx8ImNvbnRpbnVlIj09PXQudHlwZT90aGlzLm5leHQ9dC5hcmc6InJldHVybiI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD0icmV0dXJuIix0aGlzLm5leHQ9ImVuZCIpOiJub3JtYWwiPT09dC50eXBlJiZlJiYodGhpcy5uZXh0PWUpLGd9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksQihyKSxnfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIudHJ5TG9jPT09dCl7dmFyIG49ci5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1uLnR5cGUpe3ZhciBhPW4uYXJnO0Iocil9cmV0dXJuIGF9fXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpEKHQpLHJlc3VsdE5hbWU6ZSxuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ciksZ319LGV9KGUuZXhwb3J0cyk7dHJ5e2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPXJ9Y2F0Y2goZSl7Im9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBnbG9iYWxUaGlzPyJ1bmRlZmluZWQiOnQoZ2xvYmFsVGhpcykpP2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPXI6RnVuY3Rpb24oInIiLCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikocil9fSh7ZXhwb3J0czp7fX0pO3ZhciBvPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSl7dmFyIHI9NCxuPTAsYT0xLGk9MjtmdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH12YXIgcz0wLGM9MSxoPTIsbD0zLHU9MjU4LGY9MjksZD0yNTYsXz1kKzErZixwPTMwLGc9MTksdj0yKl8rMSx5PTE1LHc9MTYsbT03LGI9MjU2LHg9MTYsaz0xNyx6PTE4LEE9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF0pLFM9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdKSxFPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XSksQj1uZXcgVWludDhBcnJheShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLFI9NTEyLEQ9bmV3IEFycmF5KDIqKF8rMikpO28oRCk7dmFyIEw9bmV3IEFycmF5KDIqcCk7byhMKTt2YXIgTz1uZXcgQXJyYXkoUik7byhPKTt2YXIgVT1uZXcgQXJyYXkodS1sKzEpO28oVSk7dmFyIEM9bmV3IEFycmF5KGYpO28oQyk7dmFyIEYsVCxILFo9bmV3IEFycmF5KHApO2Z1bmN0aW9uIE0odCxlLHIsbixhKXt0aGlzLnN0YXRpY190cmVlPXQsdGhpcy5leHRyYV9iaXRzPWUsdGhpcy5leHRyYV9iYXNlPXIsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1hLHRoaXMuaGFzX3N0cmVlPXQmJnQubGVuZ3RofWZ1bmN0aW9uIEkodCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9byhaKTt2YXIgTj1mdW5jdGlvbih0KXtyZXR1cm4gdDwyNTY/T1t0XTpPWzI1NisodD4+PjcpXX0sUD1mdW5jdGlvbih0LGUpe3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0saj1mdW5jdGlvbih0LGUscil7dC5iaV92YWxpZD53LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LFAodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+dy10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdyk6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSxLPWZ1bmN0aW9uKHQsZSxyKXtqKHQsclsyKmVdLHJbMiplKzFdKX0sWD1mdW5jdGlvbih0LGUpe3ZhciByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxxPWZ1bmN0aW9uKHQpezE2PT09dC5iaV92YWxpZD8oUCh0LHQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCk6dC5iaV92YWxpZD49OCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZ0LmJpX2J1Zix0LmJpX2J1Zj4+PTgsdC5iaV92YWxpZC09OCl9LEc9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGEsaSxvLHMsYz1lLmR5bl90cmVlLGg9ZS5tYXhfY29kZSxsPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLHU9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLGY9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsXz1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHA9MDtmb3IoaT0wO2k8PXk7aSsrKXQuYmxfY291bnRbaV09MDtmb3IoY1syKnQuaGVhcFt0LmhlYXBfbWF4XSsxXT0wLHI9dC5oZWFwX21heCsxO3I8djtyKyspKGk9Y1syKmNbMioobj10LmhlYXBbcl0pKzFdKzFdKzEpPl8mJihpPV8scCsrKSxjWzIqbisxXT1pLG4+aHx8KHQuYmxfY291bnRbaV0rKyxvPTAsbj49ZCYmKG89ZltuLWRdKSxzPWNbMipuXSx0Lm9wdF9sZW4rPXMqKGkrbyksdSYmKHQuc3RhdGljX2xlbis9cyoobFsyKm4rMV0rbykpKTtpZigwIT09cCl7ZG97Zm9yKGk9Xy0xOzA9PT10LmJsX2NvdW50W2ldOylpLS07dC5ibF9jb3VudFtpXS0tLHQuYmxfY291bnRbaSsxXSs9Mix0LmJsX2NvdW50W19dLS0scC09Mn13aGlsZShwPjApO2ZvcihpPV87MCE9PWk7aS0tKWZvcihuPXQuYmxfY291bnRbaV07MCE9PW47KShhPXQuaGVhcFstLXJdKT5ofHwoY1syKmErMV0hPT1pJiYodC5vcHRfbGVuKz0oaS1jWzIqYSsxXSkqY1syKmFdLGNbMiphKzFdPWkpLG4tLSl9fSxXPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixhLGk9bmV3IEFycmF5KHkrMSksbz0wO2ZvcihuPTE7bjw9eTtuKyspaVtuXT1vPW8rcltuLTFdPDwxO2ZvcihhPTA7YTw9ZTthKyspe3ZhciBzPXRbMiphKzFdOzAhPT1zJiYodFsyKmFdPVgoaVtzXSsrLHMpKX19LFk9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixhLGk9bmV3IEFycmF5KHkrMSk7Zm9yKHI9MCxuPTA7bjxmLTE7bisrKWZvcihDW25dPXIsdD0wO3Q8MTw8QVtuXTt0KyspVVtyKytdPW47Zm9yKFVbci0xXT1uLGE9MCxuPTA7bjwxNjtuKyspZm9yKFpbbl09YSx0PTA7dDwxPDxTW25dO3QrKylPW2ErK109bjtmb3IoYT4+PTc7bjxwO24rKylmb3IoWltuXT1hPDw3LHQ9MDt0PDE8PFNbbl0tNzt0KyspT1syNTYrYSsrXT1uO2ZvcihlPTA7ZTw9eTtlKyspaVtlXT0wO2Zvcih0PTA7dDw9MTQzOylEWzIqdCsxXT04LHQrKyxpWzhdKys7Zm9yKDt0PD0yNTU7KURbMip0KzFdPTksdCsrLGlbOV0rKztmb3IoO3Q8PTI3OTspRFsyKnQrMV09Nyx0KyssaVs3XSsrO2Zvcig7dDw9Mjg3OylEWzIqdCsxXT04LHQrKyxpWzhdKys7Zm9yKFcoRCxfKzEsaSksdD0wO3Q8cDt0KyspTFsyKnQrMV09NSxMWzIqdF09WCh0LDUpO0Y9bmV3IE0oRCxBLGQrMSxfLHkpLFQ9bmV3IE0oTCxTLDAscCx5KSxIPW5ldyBNKG5ldyBBcnJheSgwKSxFLDAsZyxtKX0sVj1mdW5jdGlvbih0KXt2YXIgZTtmb3IoZT0wO2U8XztlKyspdC5keW5fbHRyZWVbMiplXT0wO2ZvcihlPTA7ZTxwO2UrKyl0LmR5bl9kdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPGc7ZSsrKXQuYmxfdHJlZVsyKmVdPTA7dC5keW5fbHRyZWVbMipiXT0xLHQub3B0X2xlbj10LnN0YXRpY19sZW49MCx0Lmxhc3RfbGl0PXQubWF0Y2hlcz0wfSwkPWZ1bmN0aW9uKHQpe3QuYmlfdmFsaWQ+OD9QKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sUT1mdW5jdGlvbih0LGUscixuKXskKHQpLG4mJihQKHQsciksUCh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxKPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhPTIqZSxpPTIqcjtyZXR1cm4gdFthXTx0W2ldfHx0W2FdPT09dFtpXSYmbltlXTw9bltyXX0sdHQ9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj10LmhlYXBbcl0sYT1yPDwxO2E8PXQuaGVhcF9sZW4mJihhPHQuaGVhcF9sZW4mJkooZSx0LmhlYXBbYSsxXSx0LmhlYXBbYV0sdC5kZXB0aCkmJmErKywhSihlLG4sdC5oZWFwW2FdLHQuZGVwdGgpKTspdC5oZWFwW3JdPXQuaGVhcFthXSxyPWEsYTw8PTE7dC5oZWFwW3JdPW59LGV0PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixhLGksbyxzPTA7aWYoMCE9PXQubGFzdF9saXQpZG97bj10LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzXTw8OHx0LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzKzFdLGE9dC5wZW5kaW5nX2J1Zlt0LmxfYnVmK3NdLHMrKywwPT09bj9LKHQsYSxlKTooaT1VW2FdLEsodCxpK2QrMSxlKSwwIT09KG89QVtpXSkmJihhLT1DW2ldLGoodCxhLG8pKSxuLS0saT1OKG4pLEsodCxpLHIpLDAhPT0obz1TW2ldKSYmKG4tPVpbaV0saih0LG4sbykpKX13aGlsZShzPHQubGFzdF9saXQpO0sodCxiLGUpfSxydD1mdW5jdGlvbih0LGUpe3ZhciByLG4sYSxpPWUuZHluX3RyZWUsbz1lLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxzPWUuc3RhdF9kZXNjLmhhc19zdHJlZSxjPWUuc3RhdF9kZXNjLmVsZW1zLGg9LTE7Zm9yKHQuaGVhcF9sZW49MCx0LmhlYXBfbWF4PXYscj0wO3I8YztyKyspMCE9PWlbMipyXT8odC5oZWFwWysrdC5oZWFwX2xlbl09aD1yLHQuZGVwdGhbcl09MCk6aVsyKnIrMV09MDtmb3IoO3QuaGVhcF9sZW48MjspaVsyKihhPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWg8Mj8rK2g6MCldPTEsdC5kZXB0aFthXT0wLHQub3B0X2xlbi0tLHMmJih0LnN0YXRpY19sZW4tPW9bMiphKzFdKTtmb3IoZS5tYXhfY29kZT1oLHI9dC5oZWFwX2xlbj4+MTtyPj0xO3ItLSl0dCh0LGkscik7YT1jO2Rve3I9dC5oZWFwWzFdLHQuaGVhcFsxXT10LmhlYXBbdC5oZWFwX2xlbi0tXSx0dCh0LGksMSksbj10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09cix0LmhlYXBbLS10LmhlYXBfbWF4XT1uLGlbMiphXT1pWzIqcl0raVsyKm5dLHQuZGVwdGhbYV09KHQuZGVwdGhbcl0+PXQuZGVwdGhbbl0/dC5kZXB0aFtyXTp0LmRlcHRoW25dKSsxLGlbMipyKzFdPWlbMipuKzFdPWEsdC5oZWFwWzFdPWErKyx0dCh0LGksMSl9d2hpbGUodC5oZWFwX2xlbj49Mik7dC5oZWFwWy0tdC5oZWFwX21heF09dC5oZWFwWzFdLEcodCxlKSxXKGksaCx0LmJsX2NvdW50KX0sbnQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGEsaT0tMSxvPWVbMV0scz0wLGM9NyxoPTQ7Zm9yKDA9PT1vJiYoYz0xMzgsaD0zKSxlWzIqKHIrMSkrMV09NjU1MzUsbj0wO248PXI7bisrKWE9byxvPWVbMioobisxKSsxXSwrK3M8YyYmYT09PW98fChzPGg/dC5ibF90cmVlWzIqYV0rPXM6MCE9PWE/KGEhPT1pJiZ0LmJsX3RyZWVbMiphXSsrLHQuYmxfdHJlZVsyKnhdKyspOnM8PTEwP3QuYmxfdHJlZVsyKmtdKys6dC5ibF90cmVlWzIqel0rKyxzPTAsaT1hLDA9PT1vPyhjPTEzOCxoPTMpOmE9PT1vPyhjPTYsaD0zKTooYz03LGg9NCkpfSxhdD1mdW5jdGlvbih0LGUscil7dmFyIG4sYSxpPS0xLG89ZVsxXSxzPTAsYz03LGg9NDtmb3IoMD09PW8mJihjPTEzOCxoPTMpLG49MDtuPD1yO24rKylpZihhPW8sbz1lWzIqKG4rMSkrMV0sISgrK3M8YyYmYT09PW8pKXtpZihzPGgpZG97Syh0LGEsdC5ibF90cmVlKX13aGlsZSgwIT0tLXMpO2Vsc2UgMCE9PWE/KGEhPT1pJiYoSyh0LGEsdC5ibF90cmVlKSxzLS0pLEsodCx4LHQuYmxfdHJlZSksaih0LHMtMywyKSk6czw9MTA/KEsodCxrLHQuYmxfdHJlZSksaih0LHMtMywzKSk6KEsodCx6LHQuYmxfdHJlZSksaih0LHMtMTEsNykpO3M9MCxpPWEsMD09PW8/KGM9MTM4LGg9Myk6YT09PW8/KGM9NixoPTMpOihjPTcsaD00KX19LGl0PWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihudCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxudCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxydCh0LHQuYmxfZGVzYyksZT1nLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKkJbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LG90PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhO2ZvcihqKHQsZS0yNTcsNSksaih0LHItMSw1KSxqKHQsbi00LDQpLGE9MDthPG47YSsrKWoodCx0LmJsX3RyZWVbMipCW2FdKzFdLDMpO2F0KHQsdC5keW5fbHRyZWUsZS0xKSxhdCh0LHQuZHluX2R0cmVlLHItMSl9LHN0PWZ1bmN0aW9uKHQpe3ZhciBlLHI9NDA5MzYyNDQ0Nztmb3IoZT0wO2U8PTMxO2UrKyxyPj4+PTEpaWYoMSZyJiYwIT09dC5keW5fbHRyZWVbMiplXSlyZXR1cm4gbjtpZigwIT09dC5keW5fbHRyZWVbMThdfHwwIT09dC5keW5fbHRyZWVbMjBdfHwwIT09dC5keW5fbHRyZWVbMjZdKXJldHVybiBhO2ZvcihlPTMyO2U8ZDtlKyspaWYoMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIGE7cmV0dXJuIG59LGN0PSExLGh0PWZ1bmN0aW9uKHQsZSxyLG4pe2oodCwoczw8MSkrKG4/MTowKSwzKSxRKHQsZSxyLCEwKX0sbHQ9ZnVuY3Rpb24odCxlLG4sYSl7dmFyIG8scyxsPTA7dC5sZXZlbD4wPyh0LnN0cm0uZGF0YV90eXBlPT09aSYmKHQuc3RybS5kYXRhX3R5cGU9c3QodCkpLHJ0KHQsdC5sX2Rlc2MpLHJ0KHQsdC5kX2Rlc2MpLGw9aXQodCksbz10Lm9wdF9sZW4rMys3Pj4+Mywocz10LnN0YXRpY19sZW4rMys3Pj4+Myk8PW8mJihvPXMpKTpvPXM9bis1LG4rNDw9byYmLTEhPT1lP2h0KHQsZSxuLGEpOnQuc3RyYXRlZ3k9PT1yfHxzPT09bz8oaih0LChjPDwxKSsoYT8xOjApLDMpLGV0KHQsRCxMKSk6KGoodCwoaDw8MSkrKGE/MTowKSwzKSxvdCh0LHQubF9kZXNjLm1heF9jb2RlKzEsdC5kX2Rlc2MubWF4X2NvZGUrMSxsKzEpLGV0KHQsdC5keW5fbHRyZWUsdC5keW5fZHRyZWUpKSxWKHQpLGEmJiQodCl9LHV0PXtfdHJfaW5pdDpmdW5jdGlvbih0KXtjdHx8KFkoKSxjdD0hMCksdC5sX2Rlc2M9bmV3IEkodC5keW5fbHRyZWUsRiksdC5kX2Rlc2M9bmV3IEkodC5keW5fZHRyZWUsVCksdC5ibF9kZXNjPW5ldyBJKHQuYmxfdHJlZSxIKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCxWKHQpfSxfdHJfc3RvcmVkX2Jsb2NrOmh0LF90cl9mbHVzaF9ibG9jazpsdCxfdHJfdGFsbHk6ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKFVbcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTF9LF90cl9hbGlnbjpmdW5jdGlvbih0KXtqKHQsYzw8MSwzKSxLKHQsYixEKSxxKHQpfX0sZnQ9ZnVuY3Rpb24odCxlLHIsbil7Zm9yKHZhciBhPTY1NTM1JnR8MCxpPXQ+Pj4xNiY2NTUzNXwwLG89MDswIT09cjspe3ItPW89cj4yZTM/MmUzOnI7ZG97aT1pKyhhPWErZVtuKytdfDApfDB9d2hpbGUoLS1vKTthJT02NTUyMSxpJT02NTUyMX1yZXR1cm4gYXxpPDwxNnwwfSxkdD1uZXcgVWludDMyQXJyYXkoZnVuY3Rpb24oKXtmb3IodmFyIHQsZT1bXSxyPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0oKSksX3Q9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGE9ZHQsaT1uK3I7dF49LTE7Zm9yKHZhciBvPW47bzxpO28rKyl0PXQ+Pj44XmFbMjU1Jih0XmVbb10pXTtyZXR1cm4tMV50fSxwdD17MjoibmVlZCBkaWN0aW9uYXJ5IiwxOiJzdHJlYW0gZW5kIiwwOiIiLCItMSI6ImZpbGUgZXJyb3IiLCItMiI6InN0cmVhbSBlcnJvciIsIi0zIjoiZGF0YSBlcnJvciIsIi00IjoiaW5zdWZmaWNpZW50IG1lbW9yeSIsIi01IjoiYnVmZmVyIGVycm9yIiwiLTYiOiJpbmNvbXBhdGlibGUgdmVyc2lvbiJ9LGd0PXtaX05PX0ZMVVNIOjAsWl9QQVJUSUFMX0ZMVVNIOjEsWl9TWU5DX0ZMVVNIOjIsWl9GVUxMX0ZMVVNIOjMsWl9GSU5JU0g6NCxaX0JMT0NLOjUsWl9UUkVFUzo2LFpfT0s6MCxaX1NUUkVBTV9FTkQ6MSxaX05FRURfRElDVDoyLFpfRVJSTk86LTEsWl9TVFJFQU1fRVJST1I6LTIsWl9EQVRBX0VSUk9SOi0zLFpfTUVNX0VSUk9SOi00LFpfQlVGX0VSUk9SOi01LFpfTk9fQ09NUFJFU1NJT046MCxaX0JFU1RfU1BFRUQ6MSxaX0JFU1RfQ09NUFJFU1NJT046OSxaX0RFRkFVTFRfQ09NUFJFU1NJT046LTEsWl9GSUxURVJFRDoxLFpfSFVGRk1BTl9PTkxZOjIsWl9STEU6MyxaX0ZJWEVEOjQsWl9ERUZBVUxUX1NUUkFURUdZOjAsWl9CSU5BUlk6MCxaX1RFWFQ6MSxaX1VOS05PV046MixaX0RFRkxBVEVEOjh9LHZ0PXV0Ll90cl9pbml0LHl0PXV0Ll90cl9zdG9yZWRfYmxvY2ssd3Q9dXQuX3RyX2ZsdXNoX2Jsb2NrLG10PXV0Ll90cl90YWxseSxidD11dC5fdHJfYWxpZ24seHQ9Z3QuWl9OT19GTFVTSCxrdD1ndC5aX1BBUlRJQUxfRkxVU0gsenQ9Z3QuWl9GVUxMX0ZMVVNILEF0PWd0LlpfRklOSVNILFN0PWd0LlpfQkxPQ0ssRXQ9Z3QuWl9PSyxCdD1ndC5aX1NUUkVBTV9FTkQsUnQ9Z3QuWl9TVFJFQU1fRVJST1IsRHQ9Z3QuWl9EQVRBX0VSUk9SLEx0PWd0LlpfQlVGX0VSUk9SLE90PWd0LlpfREVGQVVMVF9DT01QUkVTU0lPTixVdD1ndC5aX0ZJTFRFUkVELEN0PWd0LlpfSFVGRk1BTl9PTkxZLEZ0PWd0LlpfUkxFLFR0PWd0LlpfRklYRUQsSHQ9Z3QuWl9ERUZBVUxUX1NUUkFURUdZLFp0PWd0LlpfVU5LTk9XTixNdD1ndC5aX0RFRkxBVEVELEl0PTksTnQ9MTUsUHQ9OCxqdD0yODYsS3Q9MzAsWHQ9MTkscXQ9MipqdCsxLEd0PTE1LFd0PTMsWXQ9MjU4LFZ0PVl0K1d0KzEsJHQ9MzIsUXQ9NDIsSnQ9NjksdGU9NzMsZWU9OTEscmU9MTAzLG5lPTExMyxhZT02NjYsaWU9MSxvZT0yLHNlPTMsY2U9NCxoZT0zLGxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubXNnPXB0W2VdLGV9LHVlPWZ1bmN0aW9uKHQpe3JldHVybih0PDwxKS0odD40Pzk6MCl9LGZlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH0sZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybihlPDx0Lmhhc2hfc2hpZnRecikmdC5oYXNoX21hc2t9LF9lPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3RhdGUscj1lLnBlbmRpbmc7cj50LmF2YWlsX291dCYmKHI9dC5hdmFpbF9vdXQpLDAhPT1yJiYodC5vdXRwdXQuc2V0KGUucGVuZGluZ19idWYuc3ViYXJyYXkoZS5wZW5kaW5nX291dCxlLnBlbmRpbmdfb3V0K3IpLHQubmV4dF9vdXQpLHQubmV4dF9vdXQrPXIsZS5wZW5kaW5nX291dCs9cix0LnRvdGFsX291dCs9cix0LmF2YWlsX291dC09cixlLnBlbmRpbmctPXIsMD09PWUucGVuZGluZyYmKGUucGVuZGluZ19vdXQ9MCkpfSxwZT1mdW5jdGlvbih0LGUpe3d0KHQsdC5ibG9ja19zdGFydD49MD90LmJsb2NrX3N0YXJ0Oi0xLHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydCxlKSx0LmJsb2NrX3N0YXJ0PXQuc3Ryc3RhcnQsX2UodC5zdHJtKX0sZ2U9ZnVuY3Rpb24odCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lfSx2ZT1mdW5jdGlvbih0LGUpe3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZX0seWU9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGE9dC5hdmFpbF9pbjtyZXR1cm4gYT5uJiYoYT1uKSwwPT09YT8wOih0LmF2YWlsX2luLT1hLGUuc2V0KHQuaW5wdXQuc3ViYXJyYXkodC5uZXh0X2luLHQubmV4dF9pbithKSxyKSwxPT09dC5zdGF0ZS53cmFwP3QuYWRsZXI9ZnQodC5hZGxlcixlLGEscik6Mj09PXQuc3RhdGUud3JhcCYmKHQuYWRsZXI9X3QodC5hZGxlcixlLGEscikpLHQubmV4dF9pbis9YSx0LnRvdGFsX2luKz1hLGEpfSx3ZT1mdW5jdGlvbih0LGUpe3ZhciByLG4sYT10Lm1heF9jaGFpbl9sZW5ndGgsaT10LnN0cnN0YXJ0LG89dC5wcmV2X2xlbmd0aCxzPXQubmljZV9tYXRjaCxjPXQuc3Ryc3RhcnQ+dC53X3NpemUtVnQ/dC5zdHJzdGFydC0odC53X3NpemUtVnQpOjAsaD10LndpbmRvdyxsPXQud19tYXNrLHU9dC5wcmV2LGY9dC5zdHJzdGFydCtZdCxkPWhbaStvLTFdLF89aFtpK29dO3QucHJldl9sZW5ndGg+PXQuZ29vZF9tYXRjaCYmKGE+Pj0yKSxzPnQubG9va2FoZWFkJiYocz10Lmxvb2thaGVhZCk7ZG97aWYoaFsocj1lKStvXT09PV8mJmhbcitvLTFdPT09ZCYmaFtyXT09PWhbaV0mJmhbKytyXT09PWhbaSsxXSl7aSs9MixyKys7ZG97fXdoaWxlKGhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZpPGYpO2lmKG49WXQtKGYtaSksaT1mLVl0LG4+byl7aWYodC5tYXRjaF9zdGFydD1lLG89bixuPj1zKWJyZWFrO2Q9aFtpK28tMV0sXz1oW2krb119fX13aGlsZSgoZT11W2UmbF0pPmMmJjAhPS0tYSk7cmV0dXJuIG88PXQubG9va2FoZWFkP286dC5sb29rYWhlYWR9LG1lPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbixhLGksbz10Lndfc2l6ZTtkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1vKyhvLVZ0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KG8sbytvKSwwKSx0Lm1hdGNoX3N0YXJ0LT1vLHQuc3Ryc3RhcnQtPW8sdC5ibG9ja19zdGFydC09byxlPXI9dC5oYXNoX3NpemU7ZG97bj10LmhlYWRbLS1lXSx0LmhlYWRbZV09bj49bz9uLW86MH13aGlsZSgtLXIpO2U9cj1vO2Rve249dC5wcmV2Wy0tZV0sdC5wcmV2W2VdPW4+PW8/bi1vOjB9d2hpbGUoLS1yKTthKz1vfWlmKDA9PT10LnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYocj15ZSh0LnN0cm0sdC53aW5kb3csdC5zdHJzdGFydCt0Lmxvb2thaGVhZCxhKSx0Lmxvb2thaGVhZCs9cix0Lmxvb2thaGVhZCt0Lmluc2VydD49V3QpZm9yKGk9dC5zdHJzdGFydC10Lmluc2VydCx0Lmluc19oPXQud2luZG93W2ldLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W2krMV0pO3QuaW5zZXJ0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbaStXdC0xXSksdC5wcmV2W2kmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09aSxpKyssdC5pbnNlcnQtLSwhKHQubG9va2FoZWFkK3QuaW5zZXJ0PFd0KSk7KTt9d2hpbGUodC5sb29rYWhlYWQ8VnQmJjAhPT10LnN0cm0uYXZhaWxfaW4pfSxiZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuOzspe2lmKHQubG9va2FoZWFkPFZ0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDxWdCYmZT09PXh0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1XdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksMCE9PXImJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtVnQmJih0Lm1hdGNoX2xlbmd0aD13ZSh0LHIpKSx0Lm1hdGNoX2xlbmd0aD49V3QpaWYobj1tdCh0LHQuc3Ryc3RhcnQtdC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aC1XdCksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPD10Lm1heF9sYXp5X21hdGNoJiZ0Lmxvb2thaGVhZD49V3Qpe3QubWF0Y2hfbGVuZ3RoLS07ZG97dC5zdHJzdGFydCsrLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydH13aGlsZSgwIT0tLXQubWF0Y2hfbGVuZ3RoKTt0LnN0cnN0YXJ0Kyt9ZWxzZSB0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wLHQuaW5zX2g9dC53aW5kb3dbdC5zdHJzdGFydF0sdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCsxXSk7ZWxzZSBuPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0Kys7aWYobiYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8V3QtMT90LnN0cnN0YXJ0Old0LTEsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX0seGU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixhOzspe2lmKHQubG9va2FoZWFkPFZ0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDxWdCYmZT09PXh0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1XdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1XdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtVnQmJih0Lm1hdGNoX2xlbmd0aD13ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PVV0fHx0Lm1hdGNoX2xlbmd0aD09PVd0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1XdC0xKSksdC5wcmV2X2xlbmd0aD49V3QmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXthPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtV3Qsbj1tdCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1XdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9YSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPVd0LTEsdC5zdHJzdGFydCsrLG4mJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKChuPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSkmJnBlKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj1tdCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxXdC0xP3Quc3Ryc3RhcnQ6V3QtMSxlPT09QXQ/KHBlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOmNlKTp0Lmxhc3RfbGl0JiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOm9lfSxrZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuLGEsaSxvPXQud2luZG93Ozspe2lmKHQubG9va2FoZWFkPD1ZdCl7aWYobWUodCksdC5sb29rYWhlYWQ8PVl0JiZlPT09eHQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHQubG9va2FoZWFkPj1XdCYmdC5zdHJzdGFydD4wJiYobj1vW2E9dC5zdHJzdGFydC0xXSk9PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0pe2k9dC5zdHJzdGFydCtZdDtkb3t9d2hpbGUobj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmYTxpKTt0Lm1hdGNoX2xlbmd0aD1ZdC0oaS1hKSx0Lm1hdGNoX2xlbmd0aD50Lmxvb2thaGVhZCYmKHQubWF0Y2hfbGVuZ3RoPXQubG9va2FoZWFkKX1pZih0Lm1hdGNoX2xlbmd0aD49V3Q/KHI9bXQodCwxLHQubWF0Y2hfbGVuZ3RoLVd0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCk6KHI9bXQodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyksciYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX0semU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYobWUodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PXh0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9bXQodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09QXQ/KHBlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOmNlKTp0Lmxhc3RfbGl0JiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOm9lfTtmdW5jdGlvbiBBZSh0LGUscixuLGEpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWF9dmFyIFNlPVtuZXcgQWUoMCwwLDAsMCwoZnVuY3Rpb24odCxlKXt2YXIgcj02NTUzNTtmb3Iocj50LnBlbmRpbmdfYnVmX3NpemUtNSYmKHI9dC5wZW5kaW5nX2J1Zl9zaXplLTUpOzspe2lmKHQubG9va2FoZWFkPD0xKXtpZihtZSh0KSwwPT09dC5sb29rYWhlYWQmJmU9PT14dClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfXQuc3Ryc3RhcnQrPXQubG9va2FoZWFkLHQubG9va2FoZWFkPTA7dmFyIG49dC5ibG9ja19zdGFydCtyO2lmKCgwPT09dC5zdHJzdGFydHx8dC5zdHJzdGFydD49bikmJih0Lmxvb2thaGVhZD10LnN0cnN0YXJ0LW4sdC5zdHJzdGFydD1uLHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWU7aWYodC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0Pj10Lndfc2l6ZS1WdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6KHQuc3Ryc3RhcnQ+dC5ibG9ja19zdGFydCYmKHBlKHQsITEpLHQuc3RybS5hdmFpbF9vdXQpLGllKX0pKSxuZXcgQWUoNCw0LDgsNCxiZSksbmV3IEFlKDQsNSwxNiw4LGJlKSxuZXcgQWUoNCw2LDMyLDMyLGJlKSxuZXcgQWUoNCw0LDE2LDE2LHhlKSxuZXcgQWUoOCwxNiwzMiwzMix4ZSksbmV3IEFlKDgsMTYsMTI4LDEyOCx4ZSksbmV3IEFlKDgsMzIsMTI4LDI1Nix4ZSksbmV3IEFlKDMyLDEyOCwyNTgsMTAyNCx4ZSksbmV3IEFlKDMyLDI1OCwyNTgsNDA5Nix4ZSldLEVlPWZ1bmN0aW9uKHQpe3Qud2luZG93X3NpemU9Mip0Lndfc2l6ZSxmZSh0LmhlYWQpLHQubWF4X2xhenlfbWF0Y2g9U2VbdC5sZXZlbF0ubWF4X2xhenksdC5nb29kX21hdGNoPVNlW3QubGV2ZWxdLmdvb2RfbGVuZ3RoLHQubmljZV9tYXRjaD1TZVt0LmxldmVsXS5uaWNlX2xlbmd0aCx0Lm1heF9jaGFpbl9sZW5ndGg9U2VbdC5sZXZlbF0ubWF4X2NoYWluLHQuc3Ryc3RhcnQ9MCx0LmJsb2NrX3N0YXJ0PTAsdC5sb29rYWhlYWQ9MCx0Lmluc2VydD0wLHQubWF0Y2hfbGVuZ3RoPXQucHJldl9sZW5ndGg9V3QtMSx0Lm1hdGNoX2F2YWlsYWJsZT0wLHQuaW5zX2g9MH07ZnVuY3Rpb24gQmUoKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD1NdCx0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgVWludDE2QXJyYXkoMipxdCksdGhpcy5keW5fZHRyZWU9bmV3IFVpbnQxNkFycmF5KDIqKDIqS3QrMSkpLHRoaXMuYmxfdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMipYdCsxKSksZmUodGhpcy5keW5fbHRyZWUpLGZlKHRoaXMuZHluX2R0cmVlKSxmZSh0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBVaW50MTZBcnJheShHdCsxKSx0aGlzLmhlYXA9bmV3IFVpbnQxNkFycmF5KDIqanQrMSksZmUodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IFVpbnQxNkFycmF5KDIqanQrMSksZmUodGhpcy5kZXB0aCksdGhpcy5sX2J1Zj0wLHRoaXMubGl0X2J1ZnNpemU9MCx0aGlzLmxhc3RfbGl0PTAsdGhpcy5kX2J1Zj0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9dmFyIFJlPWZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gbGUodCxSdCk7dC50b3RhbF9pbj10LnRvdGFsX291dD0wLHQuZGF0YV90eXBlPVp0O3ZhciBlPXQuc3RhdGU7cmV0dXJuIGUucGVuZGluZz0wLGUucGVuZGluZ19vdXQ9MCxlLndyYXA8MCYmKGUud3JhcD0tZS53cmFwKSxlLnN0YXR1cz1lLndyYXA/UXQ6bmUsdC5hZGxlcj0yPT09ZS53cmFwPzA6MSxlLmxhc3RfZmx1c2g9eHQsdnQoZSksRXR9LERlPWZ1bmN0aW9uKHQpe3ZhciBlPVJlKHQpO3JldHVybiBlPT09RXQmJkVlKHQuc3RhdGUpLGV9LExlPWZ1bmN0aW9uKHQsZSxyLG4sYSxpKXtpZighdClyZXR1cm4gUnQ7dmFyIG89MTtpZihlPT09T3QmJihlPTYpLG48MD8obz0wLG49LW4pOm4+MTUmJihvPTIsbi09MTYpLGE8MXx8YT5JdHx8ciE9PU10fHxuPDh8fG4+MTV8fGU8MHx8ZT45fHxpPDB8fGk+VHQpcmV0dXJuIGxlKHQsUnQpOzg9PT1uJiYobj05KTt2YXIgcz1uZXcgQmU7cmV0dXJuIHQuc3RhdGU9cyxzLnN0cm09dCxzLndyYXA9byxzLmd6aGVhZD1udWxsLHMud19iaXRzPW4scy53X3NpemU9MTw8cy53X2JpdHMscy53X21hc2s9cy53X3NpemUtMSxzLmhhc2hfYml0cz1hKzcscy5oYXNoX3NpemU9MTw8cy5oYXNoX2JpdHMscy5oYXNoX21hc2s9cy5oYXNoX3NpemUtMSxzLmhhc2hfc2hpZnQ9fn4oKHMuaGFzaF9iaXRzK1d0LTEpL1d0KSxzLndpbmRvdz1uZXcgVWludDhBcnJheSgyKnMud19zaXplKSxzLmhlYWQ9bmV3IFVpbnQxNkFycmF5KHMuaGFzaF9zaXplKSxzLnByZXY9bmV3IFVpbnQxNkFycmF5KHMud19zaXplKSxzLmxpdF9idWZzaXplPTE8PGErNixzLnBlbmRpbmdfYnVmX3NpemU9NCpzLmxpdF9idWZzaXplLHMucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkocy5wZW5kaW5nX2J1Zl9zaXplKSxzLmRfYnVmPTEqcy5saXRfYnVmc2l6ZSxzLmxfYnVmPTMqcy5saXRfYnVmc2l6ZSxzLmxldmVsPWUscy5zdHJhdGVneT1pLHMubWV0aG9kPXIsRGUodCl9LE9lPXtkZWZsYXRlSW5pdDpmdW5jdGlvbih0LGUpe3JldHVybiBMZSh0LGUsTXQsTnQsUHQsSHQpfSxkZWZsYXRlSW5pdDI6TGUsZGVmbGF0ZVJlc2V0OkRlLGRlZmxhdGVSZXNldEtlZXA6UmUsZGVmbGF0ZVNldEhlYWRlcjpmdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0LnN0YXRlPzIhPT10LnN0YXRlLndyYXA/UnQ6KHQuc3RhdGUuZ3poZWFkPWUsRXQpOlJ0fSxkZWZsYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIHIsbjtpZighdHx8IXQuc3RhdGV8fGU+U3R8fGU8MClyZXR1cm4gdD9sZSh0LFJ0KTpSdDt2YXIgYT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxhLnN0YXR1cz09PWFlJiZlIT09QXQpcmV0dXJuIGxlKHQsMD09PXQuYXZhaWxfb3V0P0x0OlJ0KTthLnN0cm09dDt2YXIgaT1hLmxhc3RfZmx1c2g7aWYoYS5sYXN0X2ZsdXNoPWUsYS5zdGF0dXM9PT1RdClpZigyPT09YS53cmFwKXQuYWRsZXI9MCxnZShhLDMxKSxnZShhLDEzOSksZ2UoYSw4KSxhLmd6aGVhZD8oZ2UoYSwoYS5nemhlYWQudGV4dD8xOjApKyhhLmd6aGVhZC5oY3JjPzI6MCkrKGEuZ3poZWFkLmV4dHJhPzQ6MCkrKGEuZ3poZWFkLm5hbWU/ODowKSsoYS5nemhlYWQuY29tbWVudD8xNjowKSksZ2UoYSwyNTUmYS5nemhlYWQudGltZSksZ2UoYSxhLmd6aGVhZC50aW1lPj44JjI1NSksZ2UoYSxhLmd6aGVhZC50aW1lPj4xNiYyNTUpLGdlKGEsYS5nemhlYWQudGltZT4+MjQmMjU1KSxnZShhLDk9PT1hLmxldmVsPzI6YS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj80OjApLGdlKGEsMjU1JmEuZ3poZWFkLm9zKSxhLmd6aGVhZC5leHRyYSYmYS5nemhlYWQuZXh0cmEubGVuZ3RoJiYoZ2UoYSwyNTUmYS5nemhlYWQuZXh0cmEubGVuZ3RoKSxnZShhLGEuZ3poZWFkLmV4dHJhLmxlbmd0aD4+OCYyNTUpKSxhLmd6aGVhZC5oY3JjJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLDApKSxhLmd6aW5kZXg9MCxhLnN0YXR1cz1KdCk6KGdlKGEsMCksZ2UoYSwwKSxnZShhLDApLGdlKGEsMCksZ2UoYSwwKSxnZShhLDk9PT1hLmxldmVsPzI6YS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj80OjApLGdlKGEsaGUpLGEuc3RhdHVzPW5lKTtlbHNle3ZhciBvPU10KyhhLndfYml0cy04PDw0KTw8ODtvfD0oYS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj8wOmEubGV2ZWw8Nj8xOjY9PT1hLmxldmVsPzI6Myk8PDYsMCE9PWEuc3Ryc3RhcnQmJihvfD0kdCksbys9MzEtbyUzMSxhLnN0YXR1cz1uZSx2ZShhLG8pLDAhPT1hLnN0cnN0YXJ0JiYodmUoYSx0LmFkbGVyPj4+MTYpLHZlKGEsNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihhLnN0YXR1cz09PUp0KWlmKGEuZ3poZWFkLmV4dHJhKXtmb3Iocj1hLnBlbmRpbmc7YS5nemluZGV4PCg2NTUzNSZhLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoYS5wZW5kaW5nIT09YS5wZW5kaW5nX2J1Zl9zaXplfHwoYS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksX2UodCkscj1hLnBlbmRpbmcsYS5wZW5kaW5nIT09YS5wZW5kaW5nX2J1Zl9zaXplKSk7KWdlKGEsMjU1JmEuZ3poZWFkLmV4dHJhW2EuZ3ppbmRleF0pLGEuZ3ppbmRleCsrO2EuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLGEuZ3ppbmRleD09PWEuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGEuZ3ppbmRleD0wLGEuc3RhdHVzPXRlKX1lbHNlIGEuc3RhdHVzPXRlO2lmKGEuc3RhdHVzPT09dGUpaWYoYS5nemhlYWQubmFtZSl7cj1hLnBlbmRpbmc7ZG97aWYoYS5wZW5kaW5nPT09YS5wZW5kaW5nX2J1Zl9zaXplJiYoYS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksX2UodCkscj1hLnBlbmRpbmcsYS5wZW5kaW5nPT09YS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49YS5nemluZGV4PGEuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZhLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoYS5nemluZGV4KyspOjAsZ2UoYSxuKX13aGlsZSgwIT09bik7YS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksMD09PW4mJihhLmd6aW5kZXg9MCxhLnN0YXR1cz1lZSl9ZWxzZSBhLnN0YXR1cz1lZTtpZihhLnN0YXR1cz09PWVlKWlmKGEuZ3poZWFkLmNvbW1lbnQpe3I9YS5wZW5kaW5nO2Rve2lmKGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSYmKGEuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLF9lKHQpLHI9YS5wZW5kaW5nLGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWEuZ3ppbmRleDxhLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmYS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGEuZ3ppbmRleCsrKTowLGdlKGEsbil9d2hpbGUoMCE9PW4pO2EuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLDA9PT1uJiYoYS5zdGF0dXM9cmUpfWVsc2UgYS5zdGF0dXM9cmU7aWYoYS5zdGF0dXM9PT1yZSYmKGEuZ3poZWFkLmhjcmM/KGEucGVuZGluZysyPmEucGVuZGluZ19idWZfc2l6ZSYmX2UodCksYS5wZW5kaW5nKzI8PWEucGVuZGluZ19idWZfc2l6ZSYmKGdlKGEsMjU1JnQuYWRsZXIpLGdlKGEsdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxhLnN0YXR1cz1uZSkpOmEuc3RhdHVzPW5lKSwwIT09YS5wZW5kaW5nKXtpZihfZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGEubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZ1ZShlKTw9dWUoaSkmJmUhPT1BdClyZXR1cm4gbGUodCxMdCk7aWYoYS5zdGF0dXM9PT1hZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGxlKHQsTHQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09YS5sb29rYWhlYWR8fGUhPT14dCYmYS5zdGF0dXMhPT1hZSl7dmFyIHM9YS5zdHJhdGVneT09PUN0P3plKGEsZSk6YS5zdHJhdGVneT09PUZ0P2tlKGEsZSk6U2VbYS5sZXZlbF0uZnVuYyhhLGUpO2lmKHMhPT1zZSYmcyE9PWNlfHwoYS5zdGF0dXM9YWUpLHM9PT1pZXx8cz09PXNlKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihhLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHM9PT1vZSYmKGU9PT1rdD9idChhKTplIT09U3QmJih5dChhLDAsMCwhMSksZT09PXp0JiYoZmUoYS5oZWFkKSwwPT09YS5sb29rYWhlYWQmJihhLnN0cnN0YXJ0PTAsYS5ibG9ja19zdGFydD0wLGEuaW5zZXJ0PTApKSksX2UodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gYS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09QXQ/RXQ6YS53cmFwPD0wP0J0OigyPT09YS53cmFwPyhnZShhLDI1NSZ0LmFkbGVyKSxnZShhLHQuYWRsZXI+PjgmMjU1KSxnZShhLHQuYWRsZXI+PjE2JjI1NSksZ2UoYSx0LmFkbGVyPj4yNCYyNTUpLGdlKGEsMjU1JnQudG90YWxfaW4pLGdlKGEsdC50b3RhbF9pbj4+OCYyNTUpLGdlKGEsdC50b3RhbF9pbj4+MTYmMjU1KSxnZShhLHQudG90YWxfaW4+PjI0JjI1NSkpOih2ZShhLHQuYWRsZXI+Pj4xNiksdmUoYSw2NTUzNSZ0LmFkbGVyKSksX2UodCksYS53cmFwPjAmJihhLndyYXA9LWEud3JhcCksMCE9PWEucGVuZGluZz9FdDpCdCl9LGRlZmxhdGVFbmQ6ZnVuY3Rpb24odCl7aWYoIXR8fCF0LnN0YXRlKXJldHVybiBSdDt2YXIgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVF0JiZlIT09SnQmJmUhPT10ZSYmZSE9PWVlJiZlIT09cmUmJmUhPT1uZSYmZSE9PWFlP2xlKHQsUnQpOih0LnN0YXRlPW51bGwsZT09PW5lP2xlKHQsRHQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6ZnVuY3Rpb24odCxlKXt2YXIgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIFJ0O3ZhciBuPXQuc3RhdGUsYT1uLndyYXA7aWYoMj09PWF8fDE9PT1hJiZuLnN0YXR1cyE9PVF0fHxuLmxvb2thaGVhZClyZXR1cm4gUnQ7aWYoMT09PWEmJih0LmFkbGVyPWZ0KHQuYWRsZXIsZSxyLDApKSxuLndyYXA9MCxyPj1uLndfc2l6ZSl7MD09PWEmJihmZShuLmhlYWQpLG4uc3Ryc3RhcnQ9MCxuLmJsb2NrX3N0YXJ0PTAsbi5pbnNlcnQ9MCk7dmFyIGk9bmV3IFVpbnQ4QXJyYXkobi53X3NpemUpO2kuc2V0KGUuc3ViYXJyYXkoci1uLndfc2l6ZSxyKSwwKSxlPWkscj1uLndfc2l6ZX12YXIgbz10LmF2YWlsX2luLHM9dC5uZXh0X2luLGM9dC5pbnB1dDtmb3IodC5hdmFpbF9pbj1yLHQubmV4dF9pbj0wLHQuaW5wdXQ9ZSxtZShuKTtuLmxvb2thaGVhZD49V3Q7KXt2YXIgaD1uLnN0cnN0YXJ0LGw9bi5sb29rYWhlYWQtKFd0LTEpO2Rve24uaW5zX2g9ZGUobixuLmluc19oLG4ud2luZG93W2grV3QtMV0pLG4ucHJldltoJm4ud19tYXNrXT1uLmhlYWRbbi5pbnNfaF0sbi5oZWFkW24uaW5zX2hdPWgsaCsrfXdoaWxlKC0tbCk7bi5zdHJzdGFydD1oLG4ubG9va2FoZWFkPVd0LTEsbWUobil9cmV0dXJuIG4uc3Ryc3RhcnQrPW4ubG9va2FoZWFkLG4uYmxvY2tfc3RhcnQ9bi5zdHJzdGFydCxuLmluc2VydD1uLmxvb2thaGVhZCxuLmxvb2thaGVhZD0wLG4ubWF0Y2hfbGVuZ3RoPW4ucHJldl9sZW5ndGg9V3QtMSxuLm1hdGNoX2F2YWlsYWJsZT0wLHQubmV4dF9pbj1zLHQuaW5wdXQ9Yyx0LmF2YWlsX2luPW8sbi53cmFwPWEsRXR9LGRlZmxhdGVJbmZvOiJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIn0sVWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LENlPXthc3NpZ246ZnVuY3Rpb24oZSl7Zm9yKHZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyLmxlbmd0aDspe3ZhciBuPXIuc2hpZnQoKTtpZihuKXtpZigib2JqZWN0IiE9PXQobikpdGhyb3cgbmV3IFR5cGVFcnJvcihuKyJtdXN0IGJlIG5vbi1vYmplY3QiKTtmb3IodmFyIGEgaW4gbilVZShuLGEpJiYoZVthXT1uW2FdKX19cmV0dXJuIGV9LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj0wLG49dC5sZW5ndGg7cjxuO3IrKyllKz10W3JdLmxlbmd0aDtmb3IodmFyIGE9bmV3IFVpbnQ4QXJyYXkoZSksaT0wLG89MCxzPXQubGVuZ3RoO2k8cztpKyspe3ZhciBjPXRbaV07YS5zZXQoYyxvKSxvKz1jLmxlbmd0aH1yZXR1cm4gYX19LEZlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe0ZlPSExfWZvcih2YXIgVGU9bmV3IFVpbnQ4QXJyYXkoMjU2KSxIZT0wO0hlPDI1NjtIZSsrKVRlW0hlXT1IZT49MjUyPzY6SGU+PTI0OD81OkhlPj0yNDA/NDpIZT49MjI0PzM6SGU+PTE5Mj8yOjE7VGVbMjU0XT1UZVsyNTRdPTE7dmFyIFplPWZ1bmN0aW9uKHQsZSl7aWYoZTw2NTUzNCYmdC5zdWJhcnJheSYmRmUpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0Lmxlbmd0aD09PWU/dDp0LnN1YmFycmF5KDAsZSkpO2Zvcih2YXIgcj0iIixuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfSxNZT17c3RyaW5nMmJ1ZjpmdW5jdGlvbih0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dEVuY29kZXImJlRleHRFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUpcmV0dXJuKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpO3ZhciBlLHIsbixhLGksbz10Lmxlbmd0aCxzPTA7Zm9yKGE9MDthPG87YSsrKTU1Mjk2PT0oNjQ1MTImKHI9dC5jaGFyQ29kZUF0KGEpKSkmJmErMTxvJiY1NjMyMD09KDY0NTEyJihuPXQuY2hhckNvZGVBdChhKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGErKykscys9cjwxMjg/MTpyPDIwNDg/MjpyPDY1NTM2PzM6NDtmb3IoZT1uZXcgVWludDhBcnJheShzKSxpPTAsYT0wO2k8czthKyspNTUyOTY9PSg2NDUxMiYocj10LmNoYXJDb2RlQXQoYSkpKSYmYSsxPG8mJjU2MzIwPT0oNjQ1MTImKG49dC5jaGFyQ29kZUF0KGErMSkpKSYmKHI9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCksYSsrKSxyPDEyOD9lW2krK109cjpyPDIwNDg/KGVbaSsrXT0xOTJ8cj4+PjYsZVtpKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2krK109MjI0fHI+Pj4xMixlW2krK109MTI4fHI+Pj42JjYzLGVbaSsrXT0xMjh8NjMmcik6KGVbaSsrXT0yNDB8cj4+PjE4LGVbaSsrXT0xMjh8cj4+PjEyJjYzLGVbaSsrXT0xMjh8cj4+PjYmNjMsZVtpKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzpmdW5jdGlvbih0LGUpe3ZhciByLG4sYT1lfHx0Lmxlbmd0aDtpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dERlY29kZXImJlRleHREZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUpcmV0dXJuKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKHQuc3ViYXJyYXkoMCxlKSk7dmFyIGk9bmV3IEFycmF5KDIqYSk7Zm9yKG49MCxyPTA7cjxhOyl7dmFyIG89dFtyKytdO2lmKG88MTI4KWlbbisrXT1vO2Vsc2V7dmFyIHM9VGVbb107aWYocz40KWlbbisrXT02NTUzMyxyKz1zLTE7ZWxzZXtmb3IobyY9Mj09PXM/MzE6Mz09PXM/MTU6NztzPjEmJnI8YTspbz1vPDw2fDYzJnRbcisrXSxzLS07cz4xP2lbbisrXT02NTUzMzpvPDY1NTM2P2lbbisrXT1vOihvLT02NTUzNixpW24rK109NTUyOTZ8bz4+MTAmMTAyMyxpW24rK109NTYzMjB8MTAyMyZvKX19fXJldHVybiBaZShpLG4pfSx1dGY4Ym9yZGVyOmZ1bmN0aW9uKHQsZSl7KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciByPWUtMTtyPj0wJiYxMjg9PSgxOTImdFtyXSk7KXItLTtyZXR1cm4gcjwwfHwwPT09cj9lOnIrVGVbdFtyXV0+ZT9yOmV9fTtmdW5jdGlvbiBJZSgpe3RoaXMuaW5wdXQ9bnVsbCx0aGlzLm5leHRfaW49MCx0aGlzLmF2YWlsX2luPTAsdGhpcy50b3RhbF9pbj0wLHRoaXMub3V0cHV0PW51bGwsdGhpcy5uZXh0X291dD0wLHRoaXMuYXZhaWxfb3V0PTAsdGhpcy50b3RhbF9vdXQ9MCx0aGlzLm1zZz0iIix0aGlzLnN0YXRlPW51bGwsdGhpcy5kYXRhX3R5cGU9Mix0aGlzLmFkbGVyPTB9dmFyIE5lPUllLFBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsamU9Z3QuWl9OT19GTFVTSCxLZT1ndC5aX1NZTkNfRkxVU0gsWGU9Z3QuWl9GVUxMX0ZMVVNILHFlPWd0LlpfRklOSVNILEdlPWd0LlpfT0ssV2U9Z3QuWl9TVFJFQU1fRU5ELFllPWd0LlpfREVGQVVMVF9DT01QUkVTU0lPTixWZT1ndC5aX0RFRkFVTFRfU1RSQVRFR1ksJGU9Z3QuWl9ERUZMQVRFRDtmdW5jdGlvbiBRZSh0KXt0aGlzLm9wdGlvbnM9Q2UuYXNzaWduKHtsZXZlbDpZZSxtZXRob2Q6JGUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpWZX0sdHx8e30pO3ZhciBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPU9lLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09R2UpdGhyb3cgbmV3IEVycm9yKHB0W3JdKTtpZihlLmhlYWRlciYmT2UuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7dmFyIG47aWYobj0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9NZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PVBlLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSwocj1PZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sbikpIT09R2UpdGhyb3cgbmV3IEVycm9yKHB0W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gSmUodCxlKXt2YXIgcj1uZXcgUWUoZSk7aWYoci5wdXNoKHQsITApLHIuZXJyKXRocm93IHIubXNnfHxwdFtyLmVycl07cmV0dXJuIHIucmVzdWx0fWZ1bmN0aW9uIHRyKHQsZSl7cmV0dXJuKGU9ZXx8e30pLnJhdz0hMCxKZSh0LGUpfWZ1bmN0aW9uIGVyKHQsZSl7cmV0dXJuKGU9ZXx8e30pLmd6aXA9ITAsSmUodCxlKX1RZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe3ZhciByLG4sYT10aGlzLnN0cm0saT10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7Zm9yKG49ZT09PX5+ZT9lOiEwPT09ZT9xZTpqZSwic3RyaW5nIj09dHlwZW9mIHQ/YS5pbnB1dD1NZS5zdHJpbmcyYnVmKHQpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1QZS5jYWxsKHQpP2EuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkodCk6YS5pbnB1dD10LGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7OylpZigwPT09YS5hdmFpbF9vdXQmJihhLm91dHB1dD1uZXcgVWludDhBcnJheShpKSxhLm5leHRfb3V0PTAsYS5hdmFpbF9vdXQ9aSksKG49PT1LZXx8bj09PVhlKSYmYS5hdmFpbF9vdXQ8PTYpdGhpcy5vbkRhdGEoYS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSksYS5hdmFpbF9vdXQ9MDtlbHNle2lmKChyPU9lLmRlZmxhdGUoYSxuKSk9PT1XZSlyZXR1cm4gYS5uZXh0X291dD4wJiZ0aGlzLm9uRGF0YShhLm91dHB1dC5zdWJhcnJheSgwLGEubmV4dF9vdXQpKSxyPU9lLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKHIpLHRoaXMuZW5kZWQ9ITAscj09PUdlO2lmKDAhPT1hLmF2YWlsX291dCl7aWYobj4wJiZhLm5leHRfb3V0PjApdGhpcy5vbkRhdGEoYS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSksYS5hdmFpbF9vdXQ9MDtlbHNlIGlmKDA9PT1hLmF2YWlsX2luKWJyZWFrfWVsc2UgdGhpcy5vbkRhdGEoYS5vdXRwdXQpfXJldHVybiEwfSxRZS5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3RoaXMuY2h1bmtzLnB1c2godCl9LFFlLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbih0KXt0PT09R2UmJih0aGlzLnJlc3VsdD1DZS5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9dCx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfTt2YXIgcnI9UWUsbnI9SmUsYXI9dHIsaXI9ZXIsb3I9Z3Qsc3I9e0RlZmxhdGU6cnIsZGVmbGF0ZTpucixkZWZsYXRlUmF3OmFyLGd6aXA6aXIsY29uc3RhbnRzOm9yfTtlLkRlZmxhdGU9cnIsZS5jb25zdGFudHM9b3IsZS5kZWZhdWx0PXNyLGUuZGVmbGF0ZT1ucixlLmRlZmxhdGVSYXc9YXIsZS5nemlwPWlyLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0pKG8uZXhwb3J0cyk7dmFyIHMsYz17ZXhwb3J0czp7fX0saD17ZXhwb3J0czp7fX07aC5leHBvcnRzPXM9c3x8ZnVuY3Rpb24odCxlKXt2YXIgcjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKHI9d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKHI9c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihyPWdsb2JhbFRoaXMuY3J5cHRvKSwhciYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKHI9d2luZG93Lm1zQ3J5cHRvKSwhciYmdm9pZCAwIT09aSYmaS5jcnlwdG8mJihyPWkuY3J5cHRvKSwhcil0cnl7cj1yZXF1aXJlKCJjcnlwdG8iKX1jYXRjaCh0KXt9dmFyIG49ZnVuY3Rpb24oKXtpZihyKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5nZXRSYW5kb21WYWx1ZXMpdHJ5e3JldHVybiByLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdfWNhdGNoKHQpe31pZigiZnVuY3Rpb24iPT10eXBlb2Ygci5yYW5kb21CeXRlcyl0cnl7cmV0dXJuIHIucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKX1jYXRjaCh0KXt9fXRocm93IG5ldyBFcnJvcigiTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLiIpfSxhPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlPWUscj1uZXcgdCx0LnByb3RvdHlwZT1udWxsLHJ9fSgpLG89e30scz1vLmxpYj17fSxjPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPWEodGhpcyk7cmV0dXJuIHQmJmUubWl4SW4odCksZS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT1lLmluaXR8fChlLmluaXQ9ZnVuY3Rpb24oKXtlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuaW5pdC5wcm90b3R5cGU9ZSxlLiRzdXBlcj10aGlzLGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHQuaW5pdC5hcHBseSh0LGFyZ3VtZW50cyksdH0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXNbZV09dFtlXSk7dC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saD1zLldvcmRBcnJheT1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3Q9dGhpcy53b3Jkcz10fHxbXSx0aGlzLnNpZ0J5dGVzPXIhPWU/cjo0KnQubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dSkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53b3JkcyxyPXQud29yZHMsbj10aGlzLnNpZ0J5dGVzLGE9dC5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksbiU0KWZvcih2YXIgaT0wO2k8YTtpKyspe3ZhciBvPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O2VbbitpPj4+Ml18PW88PDI0LShuK2kpJTQqOH1lbHNlIGZvcih2YXIgcz0wO3M8YTtzKz00KWVbbitzPj4+Ml09cltzPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPWEsdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndvcmRzLHI9dGhpcy5zaWdCeXRlcztlW3I+Pj4yXSY9NDI5NDk2NzI5NTw8MzItciU0KjgsZS5sZW5ndGg9dC5jZWlsKHIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Yy5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksdH0scmFuZG9tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0O3IrPTQpZS5wdXNoKG4oKSk7cmV0dXJuIG5ldyBoLmluaXQoZSx0KX19KSxsPW8uZW5jPXt9LHU9bC5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKChpPj4+NCkudG9TdHJpbmcoMTYpKSxuLnB1c2goKDE1JmkpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bis9MilyW24+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNik8PDI0LW4lOCo0O3JldHVybiBuZXcgaC5pbml0KHIsZS8yKX19LGY9bC5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rKylyW24+Pj4yXXw9KDI1NSZ0LmNoYXJDb2RlQXQobikpPDwyNC1uJTQqODtyZXR1cm4gbmV3IGguaW5pdChyLGUpfX0sZD1sLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZi5zdHJpbmdpZnkodCkpKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gZi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpKX19LF89cy5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWMuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGguaW5pdCx0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1kLnBhcnNlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbihlKXt2YXIgcixuPXRoaXMuX2RhdGEsYT1uLndvcmRzLGk9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLHM9aS8oNCpvKSxjPShzPWU/dC5jZWlsKHMpOnQubWF4KCgwfHMpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sbD10Lm1pbig0KmMsaSk7aWYoYyl7Zm9yKHZhciB1PTA7dTxjO3UrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYSx1KTtyPWEuc3BsaWNlKDAsYyksbi5zaWdCeXRlcy09bH1yZXR1cm4gbmV3IGguaW5pdChyLGwpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWMuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksdH0sX21pbkJ1ZmZlclNpemU6MH0pO3MuSGFzaGVyPV8uZXh0ZW5kKHtjZmc6Yy5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7Xy5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hcHBlbmQodCksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQuaW5pdChyKS5maW5hbGl6ZShlKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgcC5ITUFDLmluaXQodCxyKS5maW5hbGl6ZShlKX19fSk7dmFyIHA9by5hbGdvPXt9O3JldHVybiBvfShNYXRoKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuV29yZEFycmF5O2Z1bmN0aW9uIG4odCxlLG4pe2Zvcih2YXIgYT1bXSxpPTAsbz0wO288ZTtvKyspaWYobyU0KXt2YXIgcz1uW3QuY2hhckNvZGVBdChvLTEpXTw8byU0KjJ8blt0LmNoYXJDb2RlQXQobyldPj4+Ni1vJTQqMjthW2k+Pj4yXXw9czw8MjQtaSU0KjgsaSsrfXJldHVybiByLmNyZWF0ZShhLGkpfWUuZW5jLkJhc2U2ND17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49dGhpcy5fbWFwO3QuY2xhbXAoKTtmb3IodmFyIGE9W10saT0wO2k8cjtpKz0zKWZvcih2YXIgbz0oZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwoZVtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fGVbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LHM9MDtzPDQmJmkrLjc1KnM8cjtzKyspYS5wdXNoKG4uY2hhckF0KG8+Pj42KigzLXMpJjYzKSk7dmFyIGM9bi5jaGFyQXQoNjQpO2lmKGMpZm9yKDthLmxlbmd0aCU0OylhLnB1c2goYyk7cmV0dXJuIGEuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLHI9dGhpcy5fbWFwLGE9dGhpcy5fcmV2ZXJzZU1hcDtpZighYSl7YT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWFbci5jaGFyQ29kZUF0KGkpXT1pfXZhciBvPXIuY2hhckF0KDY0KTtpZihvKXt2YXIgcz10LmluZGV4T2Yobyk7LTEhPT1zJiYoZT1zKX1yZXR1cm4gbih0LGUsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KCksdC5lbmMuQmFzZTY0fShoLmV4cG9ydHMpfShjKTt2YXIgbD1jLmV4cG9ydHMsdT17ZXhwb3J0czp7fX0sZj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsYT1uLldvcmRBcnJheSxpPW4uSGFzaGVyLG89ci5hbGdvLHM9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw2NDt0Kyspc1t0XT00Mjk0OTY3Mjk2KmUuYWJzKGUuc2luKHQrMSkpfDB9KCk7dmFyIGM9by5NRDU9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgYS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTA7cjwxNjtyKyspe3ZhciBuPWUrcixhPXRbbl07dFtuXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KX12YXIgaT10aGlzLl9oYXNoLndvcmRzLG89dFtlKzBdLGM9dFtlKzFdLGQ9dFtlKzJdLF89dFtlKzNdLHA9dFtlKzRdLGc9dFtlKzVdLHY9dFtlKzZdLHk9dFtlKzddLHc9dFtlKzhdLG09dFtlKzldLGI9dFtlKzEwXSx4PXRbZSsxMV0saz10W2UrMTJdLHo9dFtlKzEzXSxBPXRbZSsxNF0sUz10W2UrMTVdLEU9aVswXSxCPWlbMV0sUj1pWzJdLEQ9aVszXTtFPWgoRSxCLFIsRCxvLDcsc1swXSksRD1oKEQsRSxCLFIsYywxMixzWzFdKSxSPWgoUixELEUsQixkLDE3LHNbMl0pLEI9aChCLFIsRCxFLF8sMjIsc1szXSksRT1oKEUsQixSLEQscCw3LHNbNF0pLEQ9aChELEUsQixSLGcsMTIsc1s1XSksUj1oKFIsRCxFLEIsdiwxNyxzWzZdKSxCPWgoQixSLEQsRSx5LDIyLHNbN10pLEU9aChFLEIsUixELHcsNyxzWzhdKSxEPWgoRCxFLEIsUixtLDEyLHNbOV0pLFI9aChSLEQsRSxCLGIsMTcsc1sxMF0pLEI9aChCLFIsRCxFLHgsMjIsc1sxMV0pLEU9aChFLEIsUixELGssNyxzWzEyXSksRD1oKEQsRSxCLFIseiwxMixzWzEzXSksUj1oKFIsRCxFLEIsQSwxNyxzWzE0XSksRT1sKEUsQj1oKEIsUixELEUsUywyMixzWzE1XSksUixELGMsNSxzWzE2XSksRD1sKEQsRSxCLFIsdiw5LHNbMTddKSxSPWwoUixELEUsQix4LDE0LHNbMThdKSxCPWwoQixSLEQsRSxvLDIwLHNbMTldKSxFPWwoRSxCLFIsRCxnLDUsc1syMF0pLEQ9bChELEUsQixSLGIsOSxzWzIxXSksUj1sKFIsRCxFLEIsUywxNCxzWzIyXSksQj1sKEIsUixELEUscCwyMCxzWzIzXSksRT1sKEUsQixSLEQsbSw1LHNbMjRdKSxEPWwoRCxFLEIsUixBLDksc1syNV0pLFI9bChSLEQsRSxCLF8sMTQsc1syNl0pLEI9bChCLFIsRCxFLHcsMjAsc1syN10pLEU9bChFLEIsUixELHosNSxzWzI4XSksRD1sKEQsRSxCLFIsZCw5LHNbMjldKSxSPWwoUixELEUsQix5LDE0LHNbMzBdKSxFPXUoRSxCPWwoQixSLEQsRSxrLDIwLHNbMzFdKSxSLEQsZyw0LHNbMzJdKSxEPXUoRCxFLEIsUix3LDExLHNbMzNdKSxSPXUoUixELEUsQix4LDE2LHNbMzRdKSxCPXUoQixSLEQsRSxBLDIzLHNbMzVdKSxFPXUoRSxCLFIsRCxjLDQsc1szNl0pLEQ9dShELEUsQixSLHAsMTEsc1szN10pLFI9dShSLEQsRSxCLHksMTYsc1szOF0pLEI9dShCLFIsRCxFLGIsMjMsc1szOV0pLEU9dShFLEIsUixELHosNCxzWzQwXSksRD11KEQsRSxCLFIsbywxMSxzWzQxXSksUj11KFIsRCxFLEIsXywxNixzWzQyXSksQj11KEIsUixELEUsdiwyMyxzWzQzXSksRT11KEUsQixSLEQsbSw0LHNbNDRdKSxEPXUoRCxFLEIsUixrLDExLHNbNDVdKSxSPXUoUixELEUsQixTLDE2LHNbNDZdKSxFPWYoRSxCPXUoQixSLEQsRSxkLDIzLHNbNDddKSxSLEQsbyw2LHNbNDhdKSxEPWYoRCxFLEIsUix5LDEwLHNbNDldKSxSPWYoUixELEUsQixBLDE1LHNbNTBdKSxCPWYoQixSLEQsRSxnLDIxLHNbNTFdKSxFPWYoRSxCLFIsRCxrLDYsc1s1Ml0pLEQ9ZihELEUsQixSLF8sMTAsc1s1M10pLFI9ZihSLEQsRSxCLGIsMTUsc1s1NF0pLEI9ZihCLFIsRCxFLGMsMjEsc1s1NV0pLEU9ZihFLEIsUixELHcsNixzWzU2XSksRD1mKEQsRSxCLFIsUywxMCxzWzU3XSksUj1mKFIsRCxFLEIsdiwxNSxzWzU4XSksQj1mKEIsUixELEUseiwyMSxzWzU5XSksRT1mKEUsQixSLEQscCw2LHNbNjBdKSxEPWYoRCxFLEIsUix4LDEwLHNbNjFdKSxSPWYoUixELEUsQixkLDE1LHNbNjJdKSxCPWYoQixSLEQsRSxtLDIxLHNbNjNdKSxpWzBdPWlbMF0rRXwwLGlbMV09aVsxXStCfDAsaVsyXT1pWzJdK1J8MCxpWzNdPWlbM10rRHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGE9OCp0LnNpZ0J5dGVzO3JbYT4+PjVdfD0xMjg8PDI0LWElMzI7dmFyIGk9ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLG89bjtyWzE1KyhhKzY0Pj4+OTw8NCldPTE2NzExOTM1JihpPDw4fGk+Pj4yNCl8NDI3ODI1NTM2MCYoaTw8MjR8aT4+PjgpLHJbMTQrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG88PDh8bz4+PjI0KXw0Mjc4MjU1MzYwJihvPDwyNHxvPj4+OCksdC5zaWdCeXRlcz00KihyLmxlbmd0aCsxKSx0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBzPXRoaXMuX2hhc2gsYz1zLndvcmRzLGg9MDtoPDQ7aCsrKXt2YXIgbD1jW2hdO2NbaF09MTY3MTE5MzUmKGw8PDh8bD4+PjI0KXw0Mjc4MjU1MzYwJihsPDwyNHxsPj4+OCl9cmV0dXJuIHN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2Z1bmN0aW9uIGgodCxlLHIsbixhLGksbyl7dmFyIHM9dCsoZSZyfH5lJm4pK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1mdW5jdGlvbiBsKHQsZSxyLG4sYSxpLG8pe3ZhciBzPXQrKGUmbnxyJn5uKSthK287cmV0dXJuKHM8PGl8cz4+PjMyLWkpK2V9ZnVuY3Rpb24gdSh0LGUscixuLGEsaSxvKXt2YXIgcz10KyhlXnJebikrYStvO3JldHVybihzPDxpfHM+Pj4zMi1pKStlfWZ1bmN0aW9uIGYodCxlLHIsbixhLGksbyl7dmFyIHM9dCsocl4oZXx+bikpK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1yLk1ENT1pLl9jcmVhdGVIZWxwZXIoYyksci5IbWFjTUQ1PWkuX2NyZWF0ZUhtYWNIZWxwZXIoYyl9KE1hdGgpLHQuTUQ1fShoLmV4cG9ydHMpfShmKTt2YXIgZD17ZXhwb3J0czp7fX0sXz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuV29yZEFycmF5LGE9ci5IYXNoZXIsaT1lLmFsZ28sbz1bXSxzPWkuU0hBMT1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBuLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OCwzMjg1Mzc3NTIwXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxhPXJbMV0saT1yWzJdLHM9clszXSxjPXJbNF0saD0wO2g8ODA7aCsrKXtpZihoPDE2KW9baF09MHx0W2UraF07ZWxzZXt2YXIgbD1vW2gtM11eb1toLThdXm9baC0xNF1eb1toLTE2XTtvW2hdPWw8PDF8bD4+PjMxfXZhciB1PShuPDw1fG4+Pj4yNykrYytvW2hdO3UrPWg8MjA/MTUxODUwMDI0OSsoYSZpfH5hJnMpOmg8NDA/MTg1OTc3NTM5MysoYV5pXnMpOmg8NjA/KGEmaXxhJnN8aSZzKS0xODk0MDA3NTg4OihhXmlecyktODk5NDk3NTE0LGM9cyxzPWksaT1hPDwzMHxhPj4+MixhPW4sbj11fXJbMF09clswXStufDAsclsxXT1yWzFdK2F8MCxyWzJdPXJbMl0raXwwLHJbM109clszXStzfDAscls0XT1yWzRdK2N8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLGU9dC53b3JkcyxyPTgqdGhpcy5fbkRhdGFCeXRlcyxuPTgqdC5zaWdCeXRlcztyZXR1cm4gZVtuPj4+NV18PTEyODw8MjQtbiUzMixlWzE0KyhuKzY0Pj4+OTw8NCldPU1hdGguZmxvb3Ioci80Mjk0OTY3Mjk2KSxlWzE1KyhuKzY0Pj4+OTw8NCldPXIsdC5zaWdCeXRlcz00KmUubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtlLlNIQTE9YS5fY3JlYXRlSGVscGVyKHMpLGUuSG1hY1NIQTE9YS5fY3JlYXRlSG1hY0hlbHBlcihzKX0oKSx0LlNIQTF9KGguZXhwb3J0cyl9KF8pO3ZhciBwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUscixuO3I9KGU9dCkubGliLkJhc2Usbj1lLmVuYy5VdGY4LGUuYWxnby5ITUFDPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsZSl7dD10aGlzLl9oYXNoZXI9bmV3IHQuaW5pdCwic3RyaW5nIj09dHlwZW9mIGUmJihlPW4ucGFyc2UoZSkpO3ZhciByPXQuYmxvY2tTaXplLGE9NCpyO2Uuc2lnQnl0ZXM+YSYmKGU9dC5maW5hbGl6ZShlKSksZS5jbGFtcCgpO2Zvcih2YXIgaT10aGlzLl9vS2V5PWUuY2xvbmUoKSxvPXRoaXMuX2lLZXk9ZS5jbG9uZSgpLHM9aS53b3JkcyxjPW8ud29yZHMsaD0wO2g8cjtoKyspc1toXV49MTU0OTU1NjgyOCxjW2hdXj05MDk1MjI0ODY7aS5zaWdCeXRlcz1vLnNpZ0J5dGVzPWEsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhc2hlcjt0LnJlc2V0KCksdC51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZSh0KSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oYXNoZXIscj1lLmZpbmFsaXplKHQpO3JldHVybiBlLnJlc2V0KCksZS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKX19KX0oaC5leHBvcnRzKX0ocCksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLG49ci5CYXNlLGE9ci5Xb3JkQXJyYXksaT1lLmFsZ28sbz1pLk1ENSxzPWkuRXZwS0RGPW4uZXh0ZW5kKHtjZmc6bi5leHRlbmQoe2tleVNpemU6NCxoYXNoZXI6byxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KX0sY29tcHV0ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuPXRoaXMuY2ZnLGk9bi5oYXNoZXIuY3JlYXRlKCksbz1hLmNyZWF0ZSgpLHM9by53b3JkcyxjPW4ua2V5U2l6ZSxoPW4uaXRlcmF0aW9ucztzLmxlbmd0aDxjOyl7ciYmaS51cGRhdGUocikscj1pLnVwZGF0ZSh0KS5maW5hbGl6ZShlKSxpLnJlc2V0KCk7Zm9yKHZhciBsPTE7bDxoO2wrKylyPWkuZmluYWxpemUociksaS5yZXNldCgpO28uY29uY2F0KHIpfXJldHVybiBvLnNpZ0J5dGVzPTQqYyxvfX0pO2UuRXZwS0RGPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gcy5jcmVhdGUocikuY29tcHV0ZSh0LGUpfX0oKSx0LkV2cEtERn0oaC5leHBvcnRzKX0oZCk7dmFyIGc9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmxpYi5DaXBoZXJ8fGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uQmFzZSxpPW4uV29yZEFycmF5LG89bi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHM9ci5lbmM7cy5VdGY4O3ZhciBjPXMuQmFzZTY0LGg9ci5hbGdvLkV2cEtERixsPW4uQ2lwaGVyPW8uZXh0ZW5kKHtjZmc6YS5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsdCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlLHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLl94Zm9ybU1vZGU9dCx0aGlzLl9rZXk9ZSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7by5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2FwcGVuZCh0KSx0aGlzLl9kb0ZpbmFsaXplKCl9LGtleVNpemU6NCxpdlNpemU6NCxfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/dzp2fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZW5jcnlwdChlLHIsbixhKX0sZGVjcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZGVjcnlwdChlLHIsbixhKX19fX0oKX0pO24uU3RyZWFtQ2lwaGVyPWwuZXh0ZW5kKHtfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzKCEwKX0sYmxvY2tTaXplOjF9KTt2YXIgdT1yLm1vZGU9e30sZj1uLkJsb2NrQ2lwaGVyTW9kZT1hLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZSh0LGUpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9jaXBoZXI9dCx0aGlzLl9pdj1lfX0pLGQ9dS5DQkM9ZnVuY3Rpb24oKXt2YXIgdD1mLmV4dGVuZCgpO2Z1bmN0aW9uIHIodCxyLG4pe3ZhciBhLGk9dGhpcy5faXY7aT8oYT1pLHRoaXMuX2l2PWUpOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgbz0wO288bjtvKyspdFtyK29dXj1hW29dfXJldHVybiB0LkVuY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGE9bi5ibG9ja1NpemU7ci5jYWxsKHRoaXMsdCxlLGEpLG4uZW5jcnlwdEJsb2NrKHQsZSksdGhpcy5fcHJldkJsb2NrPXQuc2xpY2UoZSxlK2EpfX0pLHQuRGVjcnlwdG9yPXQuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9jaXBoZXIsYT1uLmJsb2NrU2l6ZSxpPXQuc2xpY2UoZSxlK2EpO24uZGVjcnlwdEJsb2NrKHQsZSksci5jYWxsKHRoaXMsdCxlLGEpLHRoaXMuX3ByZXZCbG9jaz1pfX0pLHR9KCksXz0oci5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9NCplLG49ci10LnNpZ0J5dGVzJXIsYT1uPDwyNHxuPDwxNnxuPDw4fG4sbz1bXSxzPTA7czxuO3MrPTQpby5wdXNoKGEpO3ZhciBjPWkuY3JlYXRlKG8sbik7dC5jb25jYXQoYyl9LHVucGFkOmZ1bmN0aW9uKHQpe3ZhciBlPTI1NSZ0LndvcmRzW3Quc2lnQnl0ZXMtMT4+PjJdO3Quc2lnQnl0ZXMtPWV9fTtuLkJsb2NrQ2lwaGVyPWwuZXh0ZW5kKHtjZmc6bC5jZmcuZXh0ZW5kKHttb2RlOmQscGFkZGluZzpffSkscmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdDtsLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcscj1lLml2LG49ZS5tb2RlO3RoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREU/dD1uLmNyZWF0ZUVuY3J5cHRvcjoodD1uLmNyZWF0ZURlY3J5cHRvcix0aGlzLl9taW5CdWZmZXJTaXplPTEpLHRoaXMuX21vZGUmJnRoaXMuX21vZGUuX19jcmVhdG9yPT10P3RoaXMuX21vZGUuaW5pdCh0aGlzLHImJnIud29yZHMpOih0aGlzLl9tb2RlPXQuY2FsbChuLHRoaXMsciYmci53b3JkcyksdGhpcy5fbW9kZS5fX2NyZWF0b3I9dCl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKHQsZSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmNmZy5wYWRkaW5nO3JldHVybiB0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFPyhlLnBhZCh0aGlzLl9kYXRhLHRoaXMuYmxvY2tTaXplKSx0PXRoaXMuX3Byb2Nlc3MoITApKToodD10aGlzLl9wcm9jZXNzKCEwKSxlLnVucGFkKHQpKSx0fSxibG9ja1NpemU6NH0pO3ZhciBwPW4uQ2lwaGVyUGFyYW1zPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3RoaXMubWl4SW4odCl9LHRvU3RyaW5nOmZ1bmN0aW9uKHQpe3JldHVybih0fHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLGc9KHIuZm9ybWF0PXt9KS5PcGVuU1NMPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dmFyIGU9dC5jaXBoZXJ0ZXh0LHI9dC5zYWx0O3JldHVybihyP2kuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQocikuY29uY2F0KGUpOmUpLnRvU3RyaW5nKGMpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZSxyPWMucGFyc2UodCksbj1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT1uWzBdJiYxNzAxMDc2ODMxPT1uWzFdJiYoZT1pLmNyZWF0ZShuLnNsaWNlKDIsNCkpLG4uc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OnIsc2FsdDplfSl9fSx2PW4uU2VyaWFsaXphYmxlQ2lwaGVyPWEuZXh0ZW5kKHtjZmc6YS5leHRlbmQoe2Zvcm1hdDpnfSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKTt2YXIgYT10LmNyZWF0ZUVuY3J5cHRvcihyLG4pLGk9YS5maW5hbGl6ZShlKSxvPWEuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDppLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOnQsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOnQuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfSxkZWNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpLHQuY3JlYXRlRGVjcnlwdG9yKHIsbikuZmluYWxpemUoZS5jaXBoZXJ0ZXh0KX0sX3BhcnNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P2UucGFyc2UodCx0aGlzKTp0fX0pLHk9KHIua2RmPXt9KS5PcGVuU1NMPXtleGVjdXRlOmZ1bmN0aW9uKHQsZSxyLG4pe258fChuPWkucmFuZG9tKDgpKTt2YXIgYT1oLmNyZWF0ZSh7a2V5U2l6ZTplK3J9KS5jb21wdXRlKHQsbiksbz1pLmNyZWF0ZShhLndvcmRzLnNsaWNlKGUpLDQqcik7cmV0dXJuIGEuc2lnQnl0ZXM9NCplLHAuY3JlYXRlKHtrZXk6YSxpdjpvLHNhbHQ6bn0pfX0sdz1uLlBhc3N3b3JkQmFzZWRDaXBoZXI9di5leHRlbmQoe2NmZzp2LmNmZy5leHRlbmQoe2tkZjp5fSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXt2YXIgYT0obj10aGlzLmNmZy5leHRlbmQobikpLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplKTtuLml2PWEuaXY7dmFyIGk9di5lbmNyeXB0LmNhbGwodGhpcyx0LGUsYS5rZXksbik7cmV0dXJuIGkubWl4SW4oYSksaX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpO3ZhciBhPW4ua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUsZS5zYWx0KTtyZXR1cm4gbi5pdj1hLml2LHYuZGVjcnlwdC5jYWxsKHRoaXMsdCxlLGEua2V5LG4pfX0pfSgpfShoLmV4cG9ydHMpfShnKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuQmxvY2tDaXBoZXIsbj1lLmFsZ28sYT1bXSxpPVtdLG89W10scz1bXSxjPVtdLGg9W10sbD1bXSx1PVtdLGY9W10sZD1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjU2O2UrKyl0W2VdPWU8MTI4P2U8PDE6ZTw8MV4yODM7dmFyIHI9MCxuPTA7Zm9yKGU9MDtlPDI1NjtlKyspe3ZhciBfPW5ebjw8MV5uPDwyXm48PDNebjw8NDtfPV8+Pj44XjI1NSZfXjk5LGFbcl09XyxpW19dPXI7dmFyIHA9dFtyXSxnPXRbcF0sdj10W2ddLHk9MjU3KnRbX11eMTY4NDMwMDgqXztvW3JdPXk8PDI0fHk+Pj44LHNbcl09eTw8MTZ8eT4+PjE2LGNbcl09eTw8OHx5Pj4+MjQsaFtyXT15LHk9MTY4NDMwMDkqdl42NTUzNypnXjI1NypwXjE2ODQzMDA4KnIsbFtfXT15PDwyNHx5Pj4+OCx1W19dPXk8PDE2fHk+Pj4xNixmW19dPXk8PDh8eT4+PjI0LGRbX109eSxyPyhyPXBedFt0W3Rbdl5wXV1dLG5ePXRbdFtuXV0pOnI9bj0xfX0oKTt2YXIgXz1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0scD1uLkFFUz1yLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7Zm9yKHZhciB0PXRoaXMuX2tleVByaW9yUmVzZXQ9dGhpcy5fa2V5LGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMvNCxuPTQqKCh0aGlzLl9uUm91bmRzPXIrNikrMSksaT10aGlzLl9rZXlTY2hlZHVsZT1bXSxvPTA7bzxuO28rKylvPHI/aVtvXT1lW29dOihoPWlbby0xXSxvJXI/cj42JiZvJXI9PTQmJihoPWFbaD4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdKTooaD1hWyhoPWg8PDh8aD4+PjI0KT4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdLGhePV9bby9yfDBdPDwyNCksaVtvXT1pW28tcl1eaCk7Zm9yKHZhciBzPXRoaXMuX2ludktleVNjaGVkdWxlPVtdLGM9MDtjPG47YysrKXtpZihvPW4tYyxjJTQpdmFyIGg9aVtvXTtlbHNlIGg9aVtvLTRdO3NbY109Yzw0fHxvPD00P2g6bFthW2g+Pj4yNF1dXnVbYVtoPj4+MTYmMjU1XV1eZlthW2g+Pj44JjI1NV1dXmRbYVsyNTUmaF1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5fa2V5U2NoZWR1bGUsbyxzLGMsaCxhKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dFtlKzFdO3RbZSsxXT10W2UrM10sdFtlKzNdPXIsdGhpcy5fZG9DcnlwdEJsb2NrKHQsZSx0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLHUsZixkLGkpLHI9dFtlKzFdLHRbZSsxXT10W2UrM10sdFtlKzNdPXJ9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24odCxlLHIsbixhLGksbyxzKXtmb3IodmFyIGM9dGhpcy5fblJvdW5kcyxoPXRbZV1eclswXSxsPXRbZSsxXV5yWzFdLHU9dFtlKzJdXnJbMl0sZj10W2UrM11eclszXSxkPTQsXz0xO188YztfKyspe3ZhciBwPW5baD4+PjI0XV5hW2w+Pj4xNiYyNTVdXmlbdT4+PjgmMjU1XV5vWzI1NSZmXV5yW2QrK10sZz1uW2w+Pj4yNF1eYVt1Pj4+MTYmMjU1XV5pW2Y+Pj44JjI1NV1eb1syNTUmaF1ecltkKytdLHY9blt1Pj4+MjRdXmFbZj4+PjE2JjI1NV1eaVtoPj4+OCYyNTVdXm9bMjU1JmxdXnJbZCsrXSx5PW5bZj4+PjI0XV5hW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5vWzI1NSZ1XV5yW2QrK107aD1wLGw9Zyx1PXYsZj15fXA9KHNbaD4+PjI0XTw8MjR8c1tsPj4+MTYmMjU1XTw8MTZ8c1t1Pj4+OCYyNTVdPDw4fHNbMjU1JmZdKV5yW2QrK10sZz0oc1tsPj4+MjRdPDwyNHxzW3U+Pj4xNiYyNTVdPDwxNnxzW2Y+Pj44JjI1NV08PDh8c1syNTUmaF0pXnJbZCsrXSx2PShzW3U+Pj4yNF08PDI0fHNbZj4+PjE2JjI1NV08PDE2fHNbaD4+PjgmMjU1XTw8OHxzWzI1NSZsXSlecltkKytdLHk9KHNbZj4+PjI0XTw8MjR8c1toPj4+MTYmMjU1XTw8MTZ8c1tsPj4+OCYyNTVdPDw4fHNbMjU1JnVdKV5yW2QrK10sdFtlXT1wLHRbZSsxXT1nLHRbZSsyXT12LHRbZSszXT15fSxrZXlTaXplOjh9KTtlLkFFUz1yLl9jcmVhdGVIZWxwZXIocCl9KCksdC5BRVN9KGguZXhwb3J0cyl9KHUpO3ZhciB2PXUuZXhwb3J0cyx5PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uV29yZEFycmF5LGk9bi5IYXNoZXIsbz1yLmFsZ28scz1bXSxjPVtdOyFmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciByPWUuc3FydCh0KSxuPTI7bjw9cjtuKyspaWYoISh0JW4pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHIodCl7cmV0dXJuIDQyOTQ5NjcyOTYqKHQtKDB8dCkpfDB9Zm9yKHZhciBuPTIsYT0wO2E8NjQ7KXQobikmJihhPDgmJihzW2FdPXIoZS5wb3cobiwuNSkpKSxjW2FdPXIoZS5wb3cobiwxLzMpKSxhKyspLG4rK30oKTt2YXIgaD1bXSxsPW8uU0hBMjU2PWkuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGEuaW5pdChzLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGE9clsxXSxpPXJbMl0sbz1yWzNdLHM9cls0XSxsPXJbNV0sdT1yWzZdLGY9cls3XSxkPTA7ZDw2NDtkKyspe2lmKGQ8MTYpaFtkXT0wfHRbZStkXTtlbHNle3ZhciBfPWhbZC0xNV0scD0oXzw8MjV8Xz4+PjcpXihfPDwxNHxfPj4+MTgpXl8+Pj4zLGc9aFtkLTJdLHY9KGc8PDE1fGc+Pj4xNyleKGc8PDEzfGc+Pj4xOSleZz4+PjEwO2hbZF09cCtoW2QtN10rditoW2QtMTZdfXZhciB5PW4mYV5uJmleYSZpLHc9KG48PDMwfG4+Pj4yKV4objw8MTl8bj4+PjEzKV4objw8MTB8bj4+PjIyKSxtPWYrKChzPDwyNnxzPj4+NileKHM8PDIxfHM+Pj4xMSleKHM8PDd8cz4+PjI1KSkrKHMmbF5+cyZ1KStjW2RdK2hbZF07Zj11LHU9bCxsPXMscz1vK218MCxvPWksaT1hLGE9bixuPW0rKHcreSl8MH1yWzBdPXJbMF0rbnwwLHJbMV09clsxXSthfDAsclsyXT1yWzJdK2l8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStzfDAscls1XT1yWzVdK2x8MCxyWzZdPXJbNl0rdXwwLHJbN109cls3XStmfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxyPXQud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KnQuc2lnQnl0ZXM7cmV0dXJuIHJbYT4+PjVdfD0xMjg8PDI0LWElMzIsclsxNCsoYSs2ND4+Pjk8PDQpXT1lLmZsb29yKG4vNDI5NDk2NzI5NiksclsxNSsoYSs2ND4+Pjk8PDQpXT1uLHQuc2lnQnl0ZXM9NCpyLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ci5TSEEyNTY9aS5fY3JlYXRlSGVscGVyKGwpLHIuSG1hY1NIQTI1Nj1pLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSx0LlNIQTI1Nn0oaC5leHBvcnRzKX0oeSk7dmFyIHc9eS5leHBvcnRzLG09e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgQXJyYXlCdWZmZXIpe3ZhciBlPXQubGliLldvcmRBcnJheSxyPWUuaW5pdDsoZS5pbml0PWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHQ9bmV3IFVpbnQ4QXJyYXkodCkpLCh0IGluc3RhbmNlb2YgSW50OEFycmF5fHwidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZ0IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQxNkFycmF5fHx0IGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQzMkFycmF5fHx0IGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpJiYodD1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2Zvcih2YXIgZT10LmJ5dGVMZW5ndGgsbj1bXSxhPTA7YTxlO2ErKyluW2E+Pj4yXXw9dFthXTw8MjQtYSU0Kjg7ci5jYWxsKHRoaXMsbixlKX1lbHNlIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaC5leHBvcnRzKX0obSk7dmFyIGI9bS5leHBvcnRzLHg9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShoLmV4cG9ydHMpfSh4KTt2YXIgaz14LmV4cG9ydHM7b25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxuPWUuam9iLGk9ZS5jbWQscz1lLnNlcnZlcixjPWUucGF0aCxoPWUuYXBpS2V5LHU9ZS5idWZmZXIsZj1lLmtleUJhc2U2NCxkPWUuZ3ppcCxfPWUucmVmZXJyZXIscD1lLmlkLGc9ZS5hcHBJZCx5PWUucGVyc2lzdGVudElkLG09ZS5DUk9RVUVUX1ZFUlNJT04seD1lLmRlYnVnLHo9ZS53aGF0O3N3aXRjaChpKXtjYXNlInVwbG9hZEVuY3J5cHRlZCI6IWZ1bmN0aW9uKHQpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpfShjKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVua25vd24gd29ya2VyIGNvbW1hbmQiLGkpfWZ1bmN0aW9uIEEodCl7dmFyIGU9RGF0ZS5ub3coKSxyPWIuY3JlYXRlKHQpLG49bC5wYXJzZShmKSxpPWsocixuKSxvPWIucmFuZG9tKDE2KSxzPXYuZW5jcnlwdChyLG4se2l2Om99KS5jaXBoZXJ0ZXh0LGM9bmV3IEFycmF5QnVmZmVyKDQrby5zaWdCeXRlcytpLnNpZ0J5dGVzK3Muc2lnQnl0ZXMpLGg9bmV3IERhdGFWaWV3KGMpLHU9MDtoLnNldFVpbnQzMih1LDExMjk0NjgyMDksITEpLHUrPTQ7Zm9yKHZhciBkPTAsXz1bbyxpLHNdO2Q8Xy5sZW5ndGg7ZCsrKXt2YXIgZyx5PWEoX1tkXS53b3Jkcyk7dHJ5e2Zvcih5LnMoKTshKGc9eS5uKCkpLmRvbmU7KXt2YXIgdz1nLnZhbHVlO2guc2V0SW50MzIodSx3LCExKSx1Kz00fX1jYXRjaCh0KXt5LmUodCl9ZmluYWxseXt5LmYoKX19cmV0dXJuIHgmJmNvbnNvbGUubG9nKCIiLmNvbmNhdChwLCIgIikuY29uY2F0KHosIiBlbmNyeXB0ZWQgKCIpLmNvbmNhdChjLmJ5dGVMZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksY31mdW5jdGlvbiBTKHQpe3ZhciBlPURhdGUubm93KCkscj1vLmV4cG9ydHMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4geCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIGNvbXByZXNzZWQgKCIpLmNvbmNhdChyLmxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxyfWZ1bmN0aW9uIEUodCl7dmFyIGU9RGF0ZS5ub3coKSxyPXcoYi5jcmVhdGUodCkpLG49bC5zdHJpbmdpZnkocikucmVwbGFjZSgvPS9nLCIiKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiB4JiZjb25zb2xlLmxvZygiIi5jb25jYXQocCwiICIpLmNvbmNhdCh6LCIgaGFzaGVkICgiKS5jb25jYXQodC5sZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksbn1mdW5jdGlvbiBCKHQpe3JldHVybiBSLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBSKCl7cmV0dXJuKFI9cihyZWdlbmVyYXRvclJ1bnRpbWUubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGEsaSxvLGMsbDtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKHI9RGF0ZS5ub3coKSxuPSIiLmNvbmNhdChzLCIvIikuY29uY2F0KGUpLGgpe3QubmV4dD00O2JyZWFrfXJldHVybiB0LmFicnVwdCgicmV0dXJuIix7dXJsOm4sdXBsb2FkVXJsOm59KTtjYXNlIDQ6cmV0dXJuIHQubmV4dD02LGZldGNoKG4se2hlYWRlcnM6eyJYLUNyb3F1ZXQtQXV0aCI6aCwiWC1Dcm9xdWV0LUFwcCI6ZywiWC1Dcm9xdWV0LUlkIjp5LCJYLUNyb3F1ZXQtU2Vzc2lvbiI6cCwiWC1Dcm9xdWV0LVZlcnNpb24iOm19LHJlZmVycmVyOl99KTtjYXNlIDY6cmV0dXJuIGE9dC5zZW50LHQubmV4dD05LGEuanNvbigpO2Nhc2UgOTppZihpPXQuc2VudCxvPWkuZXJyb3IsYz1pLnJlYWQsbD1pLndyaXRlLCFvKXt0Lm5leHQ9MTU7YnJlYWt9dGhyb3cgRXJyb3Iobyk7Y2FzZSAxNTpyZXR1cm4geCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIGF1dGhvcml6ZWQgaW4gIikuY29uY2F0KERhdGUubm93KCktciwibXMiKSksdC5hYnJ1cHQoInJldHVybiIse3VybDpjLHVwbG9hZFVybDpsfSk7Y2FzZSAxNzpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEQoKXtyZXR1cm4oRD1yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLGEsaSxvLHMsYyxoLGwsZjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0LnByZXY9MCxyPUEoZD9TKHUpOnUpLGUuaW5jbHVkZXMoIiVIQVNIJSIpJiYoZT1lLnJlcGxhY2UoIiVIQVNIJSIsRShyKSkpLHQubmV4dD01LEIoZSk7Y2FzZSA1OnJldHVybiBhPXQuc2VudCxpPWEudXBsb2FkVXJsLG89YS51cmwscz1EYXRlLm5vdygpLHQubmV4dD0xMSxmZXRjaChpLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsIlgtQ3JvcXVldC1BcHAiOmcsIlgtQ3JvcXVldC1JZCI6eSwiWC1Dcm9xdWV0LVNlc3Npb24iOnAsIlgtQ3JvcXVldC1WZXJzaW9uIjptfSxyZWZlcnJlcjpfLGJvZHk6cn0pO2Nhc2UgMTE6aWYoYz10LnNlbnQsaD1jLm9rLGw9Yy5zdGF0dXMsZj1jLnN0YXR1c1RleHQsaCl7dC5uZXh0PTE3O2JyZWFrfXRocm93IEVycm9yKCJzZXJ2ZXIgcmV0dXJuZWQgIi5jb25jYXQobCwiICIpLmNvbmNhdChmLCIgZm9yIFBVVCAiKS5jb25jYXQoaSkpO2Nhc2UgMTc6eCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIHVwbG9hZGVkICgiKS5jb25jYXQobCwiKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1zLCJtcyAiKS5jb25jYXQobykpLHBvc3RNZXNzYWdlKHtqb2I6bix1cmw6byxvazpoLHN0YXR1czpsLHN0YXR1c1RleHQ6Zn0pLHQubmV4dD0yNTticmVhaztjYXNlIDIxOnQucHJldj0yMSx0LnQwPXQuY2F0Y2goMCkseCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiB1cGxvYWQgZXJyb3IgIikuY29uY2F0KHQudDAubWVzc2FnZSkpLHBvc3RNZXNzYWdlKHtqb2I6bixvazohMSxzdGF0dXM6LTEsc3RhdHVzVGV4dDp0LnQwLm1lc3NhZ2V9KTtjYXNlIDI1OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCxudWxsLFtbMCwyMV1dKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSgpOwoK",gN=null,vN=!1,function(i){return BE=BE||fq(mN,gN,vN),new Worker(BE,i)}),jo="1.0.5";window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+jo):console.log("%cCroquet%c %c"+jo,"color:#F0493E","color:inherit","color:".concat(jo.includes("+")?"#909":"inherit"));var IF=!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i),pq=IF&&window.location.pathname.startsWith("/dev/"),mq=IF?window.location.host:"croquet.io",gq="wss://".concat(mq,"/reflector/v").concat(1),Je=null,LE,vq=ft.nocheat,Id=[0],f1=new dq;f1.onerror=function(i){return console.error("UploadWorker error: ".concat(i.message))};var yq=0,qd=new Set;function yN(i){var e,t=Gt(qd);try{var n=function(){var a=e.value;if(a.id===i){var l=a.sessionSpec;return{v:{appId:l.appId,persistentId:l.persistentId,uploadEncrypted:function(c){return a.uploadEncrypted(c)},downloadEncrypted:function(c){return a.downloadEncrypted(c)}}}}};for(t.s();!(e=t.n()).done;){var o=n();if(Zt(o)==="object")return o.v}}catch(a){t.e(a)}finally{t.f()}return{}}function xq(i){var e,t=Gt(qd);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.id===i)return n}}catch(o){t.e(o)}finally{t.f()}return null}var wq=function(i){function e(){var v,E;Wn(this,e),v=ft.dev||ft.dev!==!1&&"localhost",E=ft.dev||ft.dev!==!1&&pq,Je={messages:ft.has("debug","messages",!1),sends:ft.has("debug","sends",!1),ticks:ft.has("debug","ticks",!1),pong:ft.has("debug","pong",!1),snapshot:ft.has("debug","snapshot",!1),session:ft.has("debug","session",!1),initsnapshot:ft.has("debug","initsnapshot",v),reflector:ft.has("debug","reflector",E)},this.reset()}var t,n,o,a,l,c,A,u,h,f,d,p,m,b,g,w,I;return ei(e,[{key:"reset",value:function(){window.CROQUETVM===this.vm&&delete window.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new bq(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*Math.pow(36,10)).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.rebootSignal=null,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(window.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(window.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,is.removeAllSubscriptionsFor(this.viewId),is.addSubscription(this.viewId,"__views__",this.viewId,function(v){return YN("users now ".concat(v.count))},"oncePerFrameWhileSynced"),this.leaving||At.showSyncWait(!0)}},{key:"id",get:function(){return this.vm?this.vm.id:this.sessionSpec.id}},{key:"persistentId",get:function(){return this.sessionSpec.persistentId}},{key:"versionId",get:function(){return this.sessionSpec.codeHash}},{key:"extrapolatedTime",get:function(){return Date.now()-this.extrapolatedTimeBase}},{key:"viewOnly",get:function(){return this.sessionSpec.viewOnly}},{key:"backlog",get:function(){return this.vm?this.reflectorTime-this.vm.time:0}},{key:"starvation",get:function(){return Date.now()-this.lastReceived}},{key:"lag",get:function(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}},{key:"activity",get:function(){return Date.now()-this.lastSent}},{key:"viewed",get:function(){return!(!this.session||!this.session.view)}},{key:"connected",get:function(){return this.connection.connected}},{key:"shouldLeaveWhenDisconnected",get:function(){return this.leaving||!this.canRejoinSeamlessly||this.sessionSpec.rejoinLimit===0}},{key:"canRejoinSeamlessly",get:function(){return!!this.timeline}},{key:"checkForConnection",value:function(v){this.connection.checkForConnection(v)}},{key:"dormantDisconnect",value:function(){this.connected&&this.connection.dormantDisconnect()}},{key:"initFromSessionSpec",value:(I=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D,T,B,R,P,_,Q,W,U,H,O,F,z,k,X,te,ie,re,se,oe,le,be,De;return regeneratorRuntime.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(S=E.name,C=E.optionsFromUrl,M=E.password,D=E.appId,T=E.apiKey,B=E.viewIdDebugSuffix,R=D?"".concat(D,"/").concat(S):S,B&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+B).slice(0,16)).replace(/[^a-z0-9]/gi,function(K){return"_".concat(K==="%"?"":K.charCodeAt(0).toString(16).toUpperCase())})),P=Fn({},E.options),C){_=Gt(C);try{for(_.s();!(Q=_.n()).done;)(W=Q.value)in ft&&(P[W]=ft[W])}catch(K){_.e(K)}finally{_.f()}}for(U={},H=0,O=["hashOverride"];H<O.length;H++)(F=O[H])in ft?U[F]=ft[F]:F in E&&(U[F]=E[F]);return this.key=V_(M,"",{keySize:8}),pe.next=10,x7(R,P);case 10:return z=pe.sent,pe.next=13,this.verifyApiKey(T,D,z);case 13:return k=pe.sent,X=k.developerId,te=k.token,pe.next=18,w7(z,X,U,jo);case 18:return ie=pe.sent,re=ie.id,se=ie.codeHash,oe=ie.computedCodeHash,pe.next=24,this.encrypt(re);case 24:this.tove=pe.sent,Je.session&&console.log('Croquet session "'.concat(R,`":
        sessionId=`).concat(re).concat(D?`
        persistentId=`.concat(z):"",`
        versionId=`).concat(se===oe?se:"".concat(se,` (specified in hashOverride)
        versionId=`).concat(oe," (computed)"),`
        viewId=`).concat(this.viewId)),this.eventRateLimit=E.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec=Fn(Fn({},E),{},{options:P,name:R,id:re,persistentId:z,developerId:X,token:te,codeHash:se,computedCodeHash:oe}),le=this.getTickAndMultiplier(),be=le.msPerTick,De=le.multiplier,this.msPerTick=be,this.tickMultiplier=De,this.setUpActivityChecks();case 34:case"end":return pe.stop()}},v,this)})),function(v){return I.apply(this,arguments)})},{key:"establishSession",value:(w=$t(regeneratorRuntime.mark(function v(){var E,S,C,M,D,T=this;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return E=this.sessionSpec,S=E.id,C=E.persistentId,M=E.codeHash,this.sessionSpec.snapshot={id:S,time:0,meta:{id:S,persistentId:C,codeHash:M,created:new Date().toISOString()}},D=new Promise(function(R){return T.sessionSpec.sessionJoined=R}),this.checkForConnection(!1),Je.session&&console.log(S,"waiting for SYNC"),B.next=7,D;case 7:case"end":return B.stop()}},v,this)})),function(){return w.apply(this,arguments)})},{key:"verifyApiKey",value:(g=$t(regeneratorRuntime.mark(function v(E,S,C){var M,D,T,B,R,P;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,M=Je.reflector?"https://api.croquet.io/dev/sign":"https://api.croquet.io/sign",_.next=4,fetch("".concat(M,"/join?meta=login"),{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":E,"X-Croquet-App":S,"X-Croquet-Id":C,"X-Croquet-Version":jo},referrer:At.referrerURL()});case 4:return D=_.sent,_.next=7,D.json();case 7:if(T=_.sent,B=T.error,R=T.developerId,P=T.token,!B){_.next=13;break}throw Error(B);case 13:return Je.session&&console.log("Croquet: verified API key"),_.abrupt("return",{developerId:R,token:P});case 17:throw _.prev=17,_.t0=_.catch(0),Error("Error verifying Croquet API key: ".concat(_.t0.message));case 20:case"end":return _.stop()}},v,null,[[0,17]])})),function(v,E,S){return g.apply(this,arguments)})},{key:"lastKnownTime",value:function(v){return Math.max(v.time,v.externalTime)}},{key:"syncCheck",value:(b=$t(regeneratorRuntime.mark(function v(E,S){var C,M;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.synced===!0){D.next=2;break}return D.abrupt("return");case 2:return D.next=4,this.sendTutti(E,"syncCheck",S);case 4:C=D.sent,(M=Object.keys(C)).length>1?console.warn("sync check failed:",M):console.log("sync check ok");case 7:case"end":return D.stop()}},v,this)})),function(v,E){return b.apply(this,arguments)})},{key:"takeSnapshot",value:function(){var v=this.vm.snapshot(),E=this.lastKnownTime(v),S=v.externalSeq;return v.meta=Fn(Fn({},this.sessionSpec.snapshot.meta),{},{options:this.sessionSpec.options,time:E,seq:S,date:new Date().toISOString(),host:window.location.hostname,sdk:jo}),delete v.meta.hash,v}},{key:"scheduleSnapshot",value:function(){if(this.connected&&this.vm){var v=this.vm.time,E=v-this.vm.lastSnapshotPoll;if(E<5e3)Je.snapshot&&console.log("not requesting snapshot poll (".concat(E,"ms since poll scheduled)"));else{var S=new ns(v,0,this.vm.id,"handlePollForSnapshot",[]);this.sendTagged(S,{debounce:5e3,msgID:"pollForSnapshot"}),Je.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}}}},{key:"handlePollForSnapshot",value:function(v){var E=this;if(this.synced===!0){var S,C,M,D=this.triggeringCpuTime||this.cpuTime;this.triggeringCpuTime=null,this.cpuTime=0;try{S=on.begin("snapshot"),C={cpuTime:D,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(T){return void kr("snapshot",T)}finally{M=on.end("snapshot")-S,this.cpuTime-=M}Je.snapshot&&console.log(this.id,"Summary hashing took ".concat(Math.ceil(M),"ms")),Promise.resolve().then(function(){return E.pollForSnapshot(v,C)})}else this.triggeringCpuTime=null}},{key:"pollForSnapshot",value:(m=$t(regeneratorRuntime.mark(function v(E,S){var C,M,D,T,B;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return S.cpuTime+=Math.random(),Je.snapshot&&console.log(this.id,"sending snapshot vote",S),R.next=4,this.sendTutti(E,"snapshot",S);case 4:if(C=R.sent,this.synced===!0){R.next=8;break}return Je.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"),R.abrupt("return");case 8:Je.snapshot&&console.log(this.id,"received snapshot votes",C),M=this.analyzeTally(C,"cpuTime"),D=M.numberOfGroups,T=M.shouldUpload,B=M.dissidentFlag,D>1&&console.error(this.id,"Session diverged! Snapshots fall into ".concat(D," groups")),T&&this.serveSnapshot(B);case 12:case"end":return R.stop()}},v,this)})),function(v,E){return m.apply(this,arguments)})},{key:"analyzeTally",value:function(v,E){var S=this,C=!1,M=null,D=[],T={},B=null;Object.keys(v).forEach(function(U,H){var O=JSON.parse(U);D.push(O);var F=O.hash;O.viewId===S.viewId&&(B=H),T[F]||(T[F]=[]),T[F].push(H)});var R=Object.keys(T),P=R.length,_=R[0];if(P>1&&(R.sort(function(U,H){return T[H].length-T[U].length}),T[R[0]].length===T[R[1]].length&&(Je.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),_=R[0]<R[1]?R[0]:R[1])),B!==null){var Q=D[B].hash,W=T[Q];W.length>1&&W.sort(function(U,H){return D[U][E]-D[H][E]}),W[0]===B&&(C=!0,Q!==_&&(M={groupVotes:W.length,allVotes:D.length}))}return{numberOfGroups:P,shouldUpload:C,dissidentFlag:M}}},{key:"serveSnapshot",value:function(v){var E,S,C;try{E=on.begin("snapshot"),C=this.takeSnapshot()}catch(M){return void kr("snapshot",M)}finally{S=on.end("snapshot")-E}Je.snapshot&&console.log(this.id,"snapshot taken in ".concat(Math.ceil(S)," ms")),this.uploadSnapshot(C,v)}},{key:"snapshotPath",value:function(v,E,S){var C=Math.ceil(v).toString().padStart(10,"0"),M=this.sessionSpec,D=M.appId,T=M.persistentId,B=M.codeHash;return M.apiKey?"apps/".concat(D,"/snap/").concat(B,"/").concat(T,".").concat(this.id,"/").concat(C,"_").concat(E,".").concat(S):"snapshots/".concat(this.id,"/").concat(C,"_").concat(E,"-").concat(S,".snap")}},{key:"hashSnapshot",value:function(v){return v.meta.hash?v.meta.hash:(v.meta.hashPromise||(v.meta.hashPromise=new Promise(function(E){var S=Fn({},v);delete S.meta,Eu(JSON.stringify(S)).then(function(C){v.meta.hash=C,delete v.meta.hashPromise,E(C)})})),v.meta.hashPromise)}},{key:"uploadServer",value:function(){var v=Je.reflector?"https://api.croquet.io/dev/sign":"https://api.croquet.io/sign";return this.sessionSpec.apiKey||(v="https://croquet.io/files/v1"),typeof ft.files=="string"&&(v=ft.files).endsWith("/")&&(v=v.slice(0,-1)),v}},{key:"uploadSnapshot",value:(p=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D,T,B,R,P,_,Q,W=arguments;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return S=W.length>1&&W[1]!==void 0?W[1]:null,U.next=3,this.hashSnapshot(E);case 3:return C=on.begin("snapshot"),M=JSON.stringify(E),D=on.end("snapshot")-C,Je.snapshot&&console.log(this.id,"snapshot stringified (".concat(M.length," bytes) in ").concat(Math.ceil(D),"ms")),T=E.meta,B=T.time,R=T.seq,P=T.hash,_=this.connection.socket,U.prev=9,U.next=12,this.uploadEncrypted({content:M,path:this.snapshotPath(B,R,P),key:this.key,gzip:!0,debug:Je.snapshot,what:"snapshot"});case 12:if(Q=U.sent,this.connection.socket===_){U.next=16;break}return console.warn(this.id,"Controller was reset while trying to upload snapshot"),U.abrupt("return",!1);case 16:return this.announceSnapshotUrl(B,R,P,Q,S),U.abrupt("return",!0);case 20:return U.prev=20,U.t0=U.catch(9),console.error(this.id,"Failed to upload snapshot"),U.abrupt("return",!1);case 24:case"end":return U.stop()}},v,this,[[9,20]])})),function(v){return p.apply(this,arguments)})},{key:"announceSnapshotUrl",value:function(v,E,S,C,M){if(Je.snapshot){var D="time: ".concat(v,", seq: ").concat(E,", hash: ").concat(S);M&&(D+=", as dissident; "+JSON.stringify(M)),console.log(this.id,"sending snapshot url to reflector (".concat(D,"): ").concat(C))}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:v,seq:E,hash:S,url:C,dissident:M}}))}catch(T){console.error("ERROR while sending",T)}}},{key:"downloadEncrypted",value:(d=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D,T,B,R,P,_,Q,W;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return S=E.url,C=E.gzip,M=E.key,D=E.debug,T=E.json,B=E.what,S.startsWith("https://croquet.io/files/v1")&&(S=S.replace("https://croquet.io/files/v1","https://files.croquet.io")),R=Date.now(),U.next=5,fetch(S,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId,"X-Croquet-Session":this.sessionSpec.id,"X-Croquet-Version":jo},referrer:At.referrerURL()});case 5:return P=U.sent,U.next=8,P.arrayBuffer();case 8:return _=U.sent,D&&console.log(this.id,"".concat(B," fetched (").concat(_.byteLength," bytes) in ").concat(-R+(R=Date.now()),"ms")),Q=this.decryptBinary(_,M),D&&console.log(this.id,"".concat(B," decrypted (").concat(Q.length," bytes) in ").concat(-R+(R=Date.now()),"ms")),W=C?hq.inflate(Q):Q,D&&C&&console.log(this.id,"".concat(B," inflated (").concat(W.length," bytes) in ").concat(-R+(R=Date.now()),"ms")),U.abrupt("return",T?JSON.parse(new TextDecoder().decode(W)):W);case 15:case"end":return U.stop()}},v,this)})),function(v){return d.apply(this,arguments)})},{key:"uploadEncrypted",value:(f=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D,T,B,R,P,_,Q,W,U,H,O,F,z=this;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=E.content,C=E.path,M=E.key,D=E.gzip,T=E.keep,B=E.debug,R=E.what,P=typeof S=="string"?new TextEncoder().encode(S).buffer:S,_=T?void 0:[P],Q=typeof M=="string"?M:Ts.stringify(M),W=this.sessionSpec,U=W.apiKey,H=W.appId,O=W.persistentId,F=++yq,k.abrupt("return",new Promise(function(X,te){f1.postMessage({job:F,cmd:"uploadEncrypted",server:z.uploadServer(),path:C,apiKey:U,buffer:P,keyBase64:Q,gzip:D,referrer:At.referrerURL(),id:z.id,appId:H,persistentId:O,CROQUET_VERSION:jo,debug:B,what:R},_),f1.addEventListener("message",function ie(re){if(F===re.data.job){var se=re.data,oe=se.url,le=se.ok,be=se.status,De=se.statusText;f1.removeEventListener("message",ie),le?X(oe):te(Error("".concat(be,": ").concat(De)))}})}));case 7:case"end":return k.stop()}},v,this)})),function(v){return f.apply(this,arguments)})},{key:"persistentPath",value:function(v){var E=this.sessionSpec,S=E.appId,C=E.persistentId;return"apps/".concat(S,"/").concat(C,"/save/").concat(v)}},{key:"pollForPersist",value:(h=$t(regeneratorRuntime.mark(function v(E,S,C,M,D){var T,B,R,P,_;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(this.synced){Q.next=2;break}return Q.abrupt("return");case 2:if(this.sessionSpec.appId){Q.next=4;break}throw Error("Persistence API requires appId");case 4:return Q.next=6,this.persistenceVoting(E,S,M,D);case 6:if(T=Q.sent,B=T.shouldUpload,R=T.dissidentFlag,B){Q.next=11;break}return Q.abrupt("return");case 11:return Q.next=13,this.uploadEncrypted({path:this.persistentPath(M),content:C,key:this.key,gzip:!0,debug:Je.snapshot,what:"persistent data"});case 13:P=Q.sent,Je.snapshot&&(_=R?" (as dissident; ".concat(JSON.stringify(R),")"):"",console.log(this.id,"sending persistent data url to reflector".concat(_,": ").concat(P)));try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:S,url:P,dissident:R}}))}catch(W){console.error("ERROR while sending",W)}case 16:case"end":return Q.stop()}},v,this)})),function(v,E,S,C,M){return h.apply(this,arguments)})},{key:"persistenceVoting",value:(u=$t(regeneratorRuntime.mark(function v(E,S,C,M){var D,T,B,R,P,_;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(this.synced===!0){Q.next=2;break}return Q.abrupt("return",!1);case 2:return D={viewId:this.viewId,hash:C,ms:M+.001*Math.random()},Je.snapshot&&console.log(this.id,"sending persistence vote for time @".concat(S),D),Q.next=6,this.sendTutti(E,"persist",D);case 6:return T=Q.sent,Je.snapshot&&console.log(this.id,"received persistence votes for time @".concat(S),T),B=this.analyzeTally(T,"ms"),R=B.numberOfGroups,P=B.shouldUpload,_=B.dissidentFlag,R>1&&console.warn(this.id,"Persistence records fall into ".concat(R," groups")),Q.abrupt("return",{shouldUpload:P,dissidentFlag:_});case 11:case"end":return Q.stop()}},v,this)})),function(v,E,S,C){return u.apply(this,arguments)})},{key:"convertReflectorMessage",value:function(v){var E=this.id,S="noop",C=[];switch(v[2].what){case"users":var M=v[2],D=M.joined,T=M.left,B=M.active,R=M.total;this.users=B,this.usersTotal=R;var P=this.id,_="__views__",Q={entered:D||[],exited:T||[],count:B};E=this.id,S="publishFromModelOnly",C=[P,_,Q],is.handleEvent(this.viewId+":"+_,Q);break;case"tally":var W=v[2],U=W.tuttiSeq,H=W.tuttiKey,O=W.tally,F=W.tallyTarget,z=W.missingClients;(Je.messages||Je.snapshot)&&z&&console.log("".concat(z," ").concat(z===1?"client":"clients"," failed to participate in tally ").concat(H||U));var k=H?function(oe){return oe.tuttiKey===H}:function(oe){return oe.dummyTuttiSeq===U},X=this.tuttiHistory.findIndex(k),te=X!==-1&&this.tuttiHistory.splice(X,1)[0];if(te&&te.resolve(O),F){var ie={tally:O};te&&(ie._local=te.payload);var re=Ft(F,3);E=re[0],S=re[1],C=[re[2],ie]}}var se=new ns(0,0,E,S,C);v[2]=se.asState()[2]}},{key:"receive",value:(A=$t(regeneratorRuntime.mark(function v(E,S){var C,M,D,T,B,R,P,_,Q,W,U,H,O,F,z,k,X,te,ie,re,se,oe,le,be,De,pe,K,we,me,fe,de,Ne,ve,Se,Pe,Ie,We,j=this;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:C=this.lastReceived,this.lastReceived=this.connection.lastReceived,G.t0=E,G.next=G.t0==="SYNC"?5:G.t0==="RECV"?86:G.t0==="TICK"?108:G.t0==="INFO"?116:G.t0==="REQU"?119:122;break;case 5:if(this.syncReceived=!0,this.clearSyncReceiptTimeout(),qd.add(this),D=S.messages,T=S.url,B=S.persisted,R=S.time,P=S.seq,_=S.snapshotSeq,Q=S.tove,W=S.reflector,!Q||Q===this.tove){G.next=19;break}if(G.prev=10,this.decrypt(Q)===this.id){G.next=13;break}throw Error("wrong sessionId in tove?!");case 13:G.next=19;break;case 15:return G.prev=15,G.t1=G.catch(10),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt session secret: ".concat(G.t1.message)),4200),G.abrupt("return");case 19:if(U=S.timeline||S.reflectorSession,H=B?"persisted session":"snapshot",Je.session&&console.log(this.id,"received SYNC from ".concat(W," reflector: time ").concat(R,", ").concat(D.length," messages, ").concat(H," ").concat(T||"<none>")),O=!!this.vm)if(this.networkQueue.length=0,F=!!U&&U===this.timeline,z=D[0],k=P,X=_!==void 0?_:z?z[1]:k,Je.messages&&console.log(this.id,"rejoin: we have #".concat(this.vm.seq," SYNC has #").concat(X,"-#").concat(k)),F&&Hd(X,this.vm.seq)&&Hd(this.vm.seq,k)&&R>=this.reflectorTime){if(z&&Hd(z[1],this.vm.seq)&&(te=this.vm.seq-z[1]+1>>>0,Je.messages&&console.log(this.id,"rejoin: discarding ".concat(te," messages #").concat(z[1],"-#").concat(this.vm.seq)),D.splice(0,te)),this.sendBuffer.length>0){ie=this.sendBuffer,this.sendBuffer=[],Je.session&&console.log(this.id,"rejoin: sending ".concat(ie.length," messages buffered while disconnected")),re=Gt(ie);try{for(re.s();!(se=re.n()).done;)(0,se.value)()}catch(Ae){re.e(Ae)}finally{re.f()}}}else Je.session&&console.log(this.id,"cannot rejoin seamlessly, rebooting model/view"),this.leave(!0),O=!1;oe=this.networkQueue,this.networkQueue=[],le=Gt(D),G.prev=27,le.s();case 29:if((be=le.n()).done){G.next=47;break}if(typeof(De=be.value)[2]=="string"){G.next=35;break}this.convertReflectorMessage(De),G.next=43;break;case 35:G.prev=35,De[2]=this.decryptPayload(De[2])[0],G.next=43;break;case 39:return G.prev=39,G.t2=G.catch(35),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt message: ".concat(G.t2.message)),4200),G.abrupt("return");case 43:Je.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(De)),this.networkQueue.push(De);case 45:G.next=29;break;case 47:G.next=52;break;case 49:G.prev=49,G.t3=G.catch(27),le.e(G.t3);case 52:return G.prev=52,le.f(),G.finish(52);case 55:if((M=this.networkQueue).push.apply(M,Wt(oe)),R>this.reflectorTime&&this.timeFromReflector(R),!O){G.next=61;break}return Je.session&&console.log(this.id,"seamless rejoin successful"),this.sessionSpec.sessionJoined(),G.abrupt("return");case 61:if(this.timeline=U||"",Je.snapshot&&T&&console.log("".concat(this.id," fetching ").concat(H," ").concat(T)),!T){G.next=74;break}return G.prev=64,G.next=67,this.downloadEncrypted({url:T,gzip:!0,key:this.key,debug:Je.snapshot,json:!0,what:H});case 67:pe=G.sent,G.next=74;break;case 70:return G.prev=70,G.t4=G.catch(64),this.connection.closeConnectionWithError("SYNC",Error("failed to fetch ".concat(H,": ").concat(G.t4.message)),4200),G.abrupt("return");case 74:if(this.connected){G.next=77;break}return console.log(this.id,"disconnected during SYNC"),G.abrupt("return");case 77:return B?this.install(pe):(pe&&(this.sessionSpec.snapshot=pe),this.install()),Je.session&&console.log("".concat(this.id," fast-forwarding from ").concat(Math.round(this.vm.time))),G.next=81,new Promise(function(Ae){j.fastForwardHandler=function(Be){j.connected&&j.vm?Be==="error"?Ae(!1):Be&&j.viewId in j.vm.views&&Ae(!0):(console.log(j.id,"disconnected during SYNC fast-forwarding"),Ae(!1))},Promise.resolve().then(function(){return j.stepSession("fastForward",{budget:200})})});case 81:return K=G.sent,delete this.fastForwardHandler,K&&Je.session&&console.log("".concat(this.id," fast-forwarded to ").concat(Math.round(this.vm.time))),K&&this.sessionSpec.sessionJoined(),G.abrupt("return");case 86:if((we=S)[1]>>>=0,typeof we[2]=="string"){G.next=94;break}Je.messages&&console.log(this.id,"received META "+JSON.stringify(we)),this.convertReflectorMessage(we),Je.messages&&console.log(this.id,"converted to "+JSON.stringify(we)),G.next=105;break;case 94:G.prev=94,me=this.decryptPayload(we[2]),fe=Ft(me,3),de=fe[0],Ne=fe[1],ve=fe[2],we[2]=de,Ne===this.viewId&&this.addToStatistics(ve,this.lastReceived),Je.messages&&console.log(this.id,"received "+JSON.stringify(we)),G.next=105;break;case 101:return G.prev=101,G.t5=G.catch(94),this.connection.closeConnectionWithError("RECV",Error("failed to decrypt message: ".concat(G.t5.message)),4200),G.abrupt("return");case 105:return this.networkQueue.push(we),this.rebootSignal||(this.timeFromReflector(we[0]),this.simulateIfNeeded&&Promise.resolve().then(function(){return j.simulateIfNeeded()})),G.abrupt("return");case 108:if(this.vm){G.next=110;break}return G.abrupt("return");case 110:return Se=typeof S=="number"?S:S.time,Je.ticks&&(Pe=C&&this.lastReceived-C-this.msPerTick*this.tickMultiplier|0,console.log(this.id,"Controller received TICK ".concat(Se," ").concat(Math.abs(Pe)<5?"on time":Pe<0?"early":"late"," (").concat(Pe," ms)"))),this.timeFromReflector(Se),this.tickMultiplier>1&&this.multiplyTick(Se),this.simulateIfNeeded&&Promise.resolve().then(function(){return j.simulateIfNeeded()}),G.abrupt("return");case 116:return Ie=S.msg,We=S.options,At.showMessage(Ie,We),G.abrupt("return");case 119:return Je.snapshot&&console.log("received REQU (snapshot request) from reflector"),this.cpuTime=12345,G.abrupt("return");case 122:console.warn("Unknown action:",E,S);case 123:case"end":return G.stop()}},v,this,[[10,15],[27,49,52,55],[35,39],[64,70],[94,101]])})),function(v,E){return A.apply(this,arguments)})},{key:"install",value:function(v){var E=Date.now(),S=this.sessionSpec,C=S.snapshot,M=S.initFn,D=S.options,T=Ft(C.modelsById?["deserializ","snapshot"]:["initializ","root model"],2),B=T[0],R=T[1];Je.session&&console.log("".concat(this.id," ").concat(B,"ing ").concat(R));var P=new qo(C,function(){try{return M(D,v)}catch(W){throw kr("initFn",W),W}});if((Je.session||Je.snapshot&&C.modelsById)&&console.log("".concat(this.id," ").concat(R," ").concat(B,"ed in ").concat(Date.now()-E,"ms")),Je.initsnapshot&&!C.modelsById){Je.snapshot&&console.log("".concat(this.id," exercising snapshot and restore after init()"));var _=JSON.stringify(P.snapshot());P=new qo(JSON.parse(_),function(){return M(D)})}var Q=this.lastKnownTime(P);this.reflectorTime=Math.max(this.reflectorTime,Q),this.setVM(P)}},{key:"setVM",value:function(v){this.vm=v,this.vm.controller=this}},{key:"sendJoin",value:function(){var v=this;this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),Je.session&&console.log(this.id,"Controller sending JOIN");var E=this.getTickAndMultiplier(),S=E.tick,C=E.delay,M=this.sessionSpec,D=M.name,T=M.codeHash,B=M.appId,R=M.apiKey,P=M.persistentId,_=M.developerId,Q=M.heraldUrl,W=M.rejoinLimit,U=M.autoSleep,H=M.computedCodeHash,O={name:D,apiKey:R,appId:B,persistentId:P,url:At.referrerURL(),sdk:jo,developerId:_,version:1,user:this.viewId,ticks:{tick:S,delay:C},dormantDelay:U,tove:this.tove,codeHash:T};Q&&Object.assign(O,{heraldUrl:Q}),W&&Object.assign(O,{leaveDelay:W+250}),H!==T&&Object.assign(O,{computedCodeHash:H}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:O})),this.syncReceiptTimeout=setTimeout(function(){delete v.syncReceiptTimeout,v.syncReceived||v.connection.closeConnectionWithError("join",Error("SYNC not received in time"))},5e3)}},{key:"clearSyncReceiptTimeout",value:function(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}},{key:"connectionInterrupted",value:function(){var v=this;this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout(function(){Je.session&&console.log(v.id,"rejoin timed out"),v.rejoinTimeout=0,v.leave()},this.sessionSpec.rejoinLimit)))}},{key:"leave",value:function(){var v=arguments.length>0&&arguments[0]!==void 0&&arguments[0],E=this.sessionSpec.rebootModelView;if(this.reset(),Je.session&&console.log(this.id,"resetting ".concat(v?"(but keeping)":"and discarding"," controller")),v||qd.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");E()}},{key:"encrypt",value:(c=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return S=dc.random(16),C=e1.encrypt(E,this.key,{iv:S}),M=gE(E,this.key),D="".concat(Ts.stringify(S)).concat(Ts.stringify(M)).concat(C),T.abrupt("return",D);case 5:case"end":return T.stop()}},v,this)})),function(v){return c.apply(this,arguments)})},{key:"deprecatedDefaultKey",get:function(){return LE||(LE=V_("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),LE}},{key:"decrypt",value:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.key,S=Ts.parse(v.slice(0,24)),C=Ts.parse(v.slice(24,68)),M=v.slice(68),D=e1.decrypt(M,E,{iv:S}),T="";try{T=dj.stringify(D)}catch{}var B=gE(T,this.key);if(this.compareHmacs(C.words,B.words))return T;if(E!==this.deprecatedDefaultKey)return this.decrypt(v,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"decryptBinary",value:function(v,E){var S,C,M,D,T,B=new TextDecoder().decode(new Uint8Array(v,0,4));switch(typeof E=="string"&&(E=Ts.parse(E)),B){case"CRQ0":S=new TextDecoder().decode(v),C=Ts.parse(S.slice(4,28)),M=Ts.parse(S.slice(28,72)),D=S.slice(72),T=e1.decrypt(D,E,{iv:C});break;case"CRQ1":S=new Uint8Array(v),C=dc.create(S.subarray(4,20)),M=dc.create(S.subarray(20,52)),D=dc.create(S.subarray(52)),T=e1.decrypt({ciphertext:D},E,{iv:C});break;default:throw Error("".concat(this.id," unknown encryption version ").concat(B))}T.clamp();var R=gE(T,E);if(this.compareHmacs(M.words,R.words))return NN(T);if(E!==this.deprecatedDefaultKey)return this.decryptBinary(v,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"encryptMessage",value:(l=$t(regeneratorRuntime.mark(function v(E,S,C){var M,D,T,B,R,P;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return M=E.asState(),D=Ft(M,3),T=D[0],B=D[1],R=D[2],_.next=3,this.encryptPayload([R,S,C]);case 3:return P=_.sent,_.abrupt("return",[T,B,P]);case 5:case"end":return _.stop()}},v,this)})),function(v,E,S){return l.apply(this,arguments)})},{key:"encryptPayload",value:(a=$t(regeneratorRuntime.mark(function v(E){return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.encrypt(JSON.stringify(E)));case 1:case"end":return S.stop()}},v,this)})),function(v){return a.apply(this,arguments)})},{key:"decryptPayload",value:function(v){return JSON.parse(this.decrypt(v))}},{key:"compareHmacs",value:function(v,E){for(var S=v.length===E.length,C=0;C<v.length;C++)v[C]!==E[C]&&(S=!1);return S}},{key:"sendMessage",value:function(v){var E=this;if(!this.viewOnly){var S=v.asState()[2].length;if(S>16384)console.warn("".concat(this.id," Message with payload of ").concat(S," bytes exceeds maximum ").concat(16384," and will not be sent to reflector."));else{!this.payloadSizeWarned&&S>4096&&(console.log("".concat(this.id," Message with payload of ").concat(S," bytes being sent to reflector. Maximum recommended is ").concat(4096,".")),this.payloadSizeWarned=!0);var C=Date.now(),M=this.rateLimitedSendTimes,D=this.rateLimitBuffer;if(on.perSecondTally({requestedMessages:1}),D.length)this.addToRateLimitBuffer(v);else{var T=0;if(M.length&&this.synced){var B=M[M.length-1],R=1e3/this.eventRateLimit-(C-B);R>1&&(T=Math.ceil(R))}T?(this.addToRateLimitBuffer(v),setTimeout(function(){return E.serviceRateLimitBuffer()},T)):(this.recordRateLimitedSend(C),this.socketSendMessage(v),on.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:S}))}}}}},{key:"recordRateLimitedSend",value:function(v){var E=this.rateLimitedSendTimes;!this.synced&&E.length&&E[E.length-1]===v||(E.push(v),E.length>this.eventHistoryLimit&&E.shift()),!this.rateLimitSoftWarned&&E.length===this.eventHistoryLimit&&v-E[0]<1010&&(console.warn("".concat(this.id," Sends to reflector are at or above recommended limit of ").concat(this.eventHistoryLimit," within one second. Events will be bundled as necessary to keep to the limit.")),this.rateLimitSoftWarned=!0)}},{key:"addToRateLimitBuffer",value:function(v){on.perSecondTally({bundledMessages:1});var E=Date.now(),S=v.asState(),C=S[2].length,M=this.rateLimitBuffer;if(M.length){var D=M[M.length-1],T=D.msgStates;if(D.totalPayload<4096)return T.push({msgState:S,bufferTime:E}),void(D.totalPayload+=C)}on.perSecondTally({newBundles:1}),M.push({msgStates:[{msgState:S,bufferTime:E}],totalPayload:C});var B=M.length;Je.session&&B%5==0&&B!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer grew to ").concat(B," event bundles (max ").concat(this.eventMaxBundles,")")),this.rateLimitLastLogged=B),B>this.eventMaxBundles?(console.error("".concat(this.id," Disconnecting after overflow of SEND rate-limit buffer.")),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&B>this.eventMaxBundles/2&&(console.warn("".concat(this.id," SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.")),this.rateLimitBufferWarned=!0)}},{key:"serviceRateLimitBuffer",value:function(){var v=this;if(this.connected){var E=this.rateLimitBuffer;if(E.length){var S=Date.now(),C=1e3/this.eventRateLimit,M=this.rateLimitedSendTimes;if(M.length){var D=M[M.length-1];if(C-(S-D)>0)return}var T=E.shift(),B=T.msgStates,R=T.totalPayload,P=[],_=0;B.forEach(function(U){P.push(U.msgState),_+=S-U.bufferTime});var Q=new ns(this.vm.time,0,this.vm.id,"handleBundledEvents",["dummy",{events:P}]);if(this.socketSendMessage(Q),this.recordRateLimitedSend(S),on.perSecondTally({sentBundles:1,sentMessagesTotal:B.length,sendDelay:_,sentBundlePayload:R,sentPayloadTotal:R}),Je.session&&this.connected){var W=E.length;W&&W%5==0&&W!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer dropped to ").concat(W," event bundles")),this.rateLimitLastLogged=W)}E.length&&setTimeout(function(){return v.serviceRateLimitBuffer()},C)}}}},{key:"socketSendMessage",value:(o=$t(regeneratorRuntime.mark(function v(E){var S,C,M,D,T=this,B=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return S=B.length>1&&B[1]!==void 0?B[1]:null,R.next=3,this.encryptMessage(E,this.viewId,Date.now());case 3:if(C=R.sent,M=S?"tagged SEND ".concat(E.asState()," with tags ").concat(JSON.stringify(S)):"SEND ".concat(E.asState()),this.connected){R.next=8;break}return this.vm&&(Je.sends&&console.log(this.id,"buffering ".concat(M)),this.sendBuffer.push(function(){return T.socketSendMessage(E,S)})),R.abrupt("return");case 8:Je.sends&&console.log(this.id,"sending ".concat(M)),D={id:this.id,action:"SEND",args:[].concat(Wt(C),[this.latency])},S&&(D.tags=S),this.lastSent=Date.now(),this.connection.send(JSON.stringify(D));case 13:case"end":return R.stop()}},v,this)})),function(v){return o.apply(this,arguments)})},{key:"sendTagged",value:(n=$t(regeneratorRuntime.mark(function v(E,S){return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!this.viewOnly){C.next=2;break}return C.abrupt("return");case 2:this.socketSendMessage(E,S);case 3:case"end":return C.stop()}},v,this)})),function(v,E){return n.apply(this,arguments)})},{key:"sendTutti",value:(t=$t(regeneratorRuntime.mark(function v(E,S,C){var M,D,T,B,R,P,_,Q=this,W=arguments;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M=W.length>3&&W[3]!==void 0?W[3]:null,D=!(W.length>4&&W[4]!==void 0)||W[4],T=W.length>5&&W[5]!==void 0?W[5]:null,!this.viewOnly){U.next=5;break}return U.abrupt("return",null);case 5:if(U.t0=M,!U.t0){U.next=10;break}return U.next=9,this.encryptMessage(M,this.viewId,Date.now());case 9:U.t0=U.sent;case 10:if(B=U.t0,R=yc(C),this.connected){U.next=15;break}return this.vm&&(Je.sends&&console.log(this.id,"buffering TUTTI ".concat(R," ").concat(M&&M.asState()," ").concat(T)),this.sendBuffer.push(function(){return Q.sendTutti(E,S,C,M,D,T)})),U.abrupt("return",!1);case 15:return Je.sends&&console.log(this.id,"sending TUTTI ".concat(R," ").concat(M&&M.asState()," ").concat(T)),this.lastSent=Date.now(),P=1e6+Math.floor(E/100),_="".concat(S,"@").concat(E),this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[E,P,R,B,D,T,_]})),U.abrupt("return",new Promise(function(H){Q.tuttiHistory.length>100&&Q.tuttiHistory.shift(),Q.tuttiHistory.push({time:E,tuttiKey:_,dummyTuttiSeq:P,payload:R,resolve:H})}));case 21:case"end":return U.stop()}},v,this)})),function(v,E,S){return t.apply(this,arguments)})},{key:"sendLog",value:function(){for(var v=this,E=arguments.length,S=new Array(E),C=0;C<E;C++)S[C]=arguments[C];this.connected?(Je.sends&&console.log(this.id,"sending LOG"),S.length<2&&(S=S[0]),this.connection.send(JSON.stringify({action:"LOG",args:S}))):this.vm&&(Je.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push(function(){return v.sendLog.apply(v,Wt(S))}))}},{key:"addToStatistics",value:function(v,E){this.latency=E-v,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:E,ms:this.latency}))}},{key:"latencies",get:function(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}},{key:"getTickAndMultiplier",value:function(){var v=this.sessionSpec.options,E=Ft(((["number","string"].includes(Zt(v.tps))?v.tps:["number","string"].includes(Zt(this.sessionSpec.tps))?this.sessionSpec.tps:20)+"x").split("x").map(function(R){return Number.parseFloat("0"+R)}),2),S=E[0],C=E[1],M=1e3/Math.max(1/30,Math.min(60,S)),D=Math.max(1,C),T=M,B=0;return D>1&&!vq&&(T=M/D,B=Math.ceil(T*(D-1))),{msPerTick:T,multiplier:D,tick:M,delay:B}}},{key:"simulate",value:function(v){var E=this;if(!this.vm)return!0;try{var S=!0;if(this.networkQueue.length+this.vm.messages.size===0)S=this.vm.advanceTo(this.reflectorTime,v);else{for(var C=on.begin("simulate");S;){var M=this.networkQueue[0];if(!M||!(S=this.vm.advanceTo(M[0],v)))break;this.networkQueue.shift();var D=this.vm.scheduleExternalMessage(M);S=this.vm.advanceTo(D.time,v),this.cpuTime+=5}S&&(S=this.vm.advanceTo(this.reflectorTime,v)),this.cpuTime+=Math.max(.01,on.end("simulate")-C)}on.backlog(this.backlog);var T=this.lag,B=Math.max(200,.1*this.msPerTick),R=Math.max(2e3,.2*this.msPerTick);return typeof this.synced=="boolean"&&this.viewed&&(this.synced&&T>R||!this.synced&&T<B)&&(this.synced?this.applySyncChange(!1):this.syncTimer||(this.syncTimer=setTimeout(function(){delete E.syncTimer,E.lag<B&&E.applySyncChange(!0)},200))),this.synced&&S&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout(function(){return E.scheduleSnapshot()},Math.floor(2e3*Math.random())):this.scheduleSnapshot()),S}catch(P){return kr("simulate",P),this.connection.closeConnectionWithError("simulate",P),"error"}}},{key:"stepSession",value:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(window.logMessageStats){var S=on.stepSession(E.frameTime,!0);S&&console.log(S)}var C=this.backlog,M=this.latency,D=this.starvation,T=this.activity;if(v==="animation"){on.animationFrame(E.frameTime,{backlog:C,starvation:D,latency:M,activity:T,users:this.users});var B=Date.now();if(this.lastAnimationEnd){var R=B-this.lastAnimationEnd;if(this.animationGapCheck===!0&&R>200&&(this.animationGapCheck=[],Je.session&&console.log("".concat(this.id," animation has stopped (too long between steps)"))),this.animationGapCheck!==!0){var P=this.animationGapCheck;P.push(R),P.length>4&&P.shift(),P.length===4&&P.reduce(function(O,F){return O+F},0)<=400&&(this.animationGapCheck=!0,Je.session&&console.log("".concat(this.id," animation has started")))}}this.lastAnimationEnd=B}if(this.connected){if(this.vm){var _;switch(v){case"animation":var Q=E.expectedSimFPS,W=Date.now(),U=Id.reduce(function(O,F){return O+F},0)/Id.length;if((_=this.simulate(W+Math.min(U,200)))===!1){var H=Q===0?0:1e3/Q*4;this.backlog>H&&(_=this.simulate(W+200-U))}_!=="error"&&(Id.push(Date.now()-W),Id.length>4&&Id.shift());break;case"fastForward":case"background":_=this.simulate(Date.now()+E.budget);break;default:console.warn(v)}this.fastForwardHandler&&this.fastForwardHandler(_),_!=="error"&&(on.begin("update"),this.processModelViewEvents(v==="animation"),on.end("update"),this.serviceRateLimitBuffer(),v==="animation"&&(E.view&&(on.begin("render"),this.inViewRealm(function(){return E.view.update(E.frameTime)}),on.end("render")),this.lastAnimationEnd=Date.now()))}}else this.isInBackground()||this.checkForConnection(!0)}},{key:"applySyncChange",value:function(v){Je.session&&console.log(this.id,"synced=".concat(v)),this.synced=v,At.showSyncWait(!v),this.vm.publishFromView(this.viewId,"synced",v)}},{key:"inViewRealm",value:function(v){var E=this;return Vd(this.vm,function(){return v(E.vm)})}},{key:"processModelViewEvents",value:function(v){return this.vm?this.vm.processModelViewEvents(v):0}},{key:"timeFromReflector",value:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"reflector";v<this.reflectorTime?(E!=="controller"||Je.ticks)&&console.warn("time is ".concat(this.reflectorTime,", ignoring time ").concat(v," from ").concat(E)):(typeof this.synced!="boolean"&&(this.synced=!1),this.reflectorTime=v,this.extrapolatedTimeBase=Date.now()-v,this.vm&&on.backlog(this.backlog),this.tickHook&&this.tickHook())}},{key:"multiplyTick",value:function(v){var E=this;this.localTicker&&window.clearInterval(this.localTicker);var S=this.msPerTick,C=this.tickMultiplier,M=1;this.localTicker=window.setInterval(function(){E.timeFromReflector(Math.round(v+M*S),"controller"),Je.ticks&&console.log(E.id,"Controller generate TICK "+E.reflectorTime,M),++M>=C&&(window.clearInterval(E.localTicker),E.localTicker=0)},S)}},{key:"startStepping",value:function(v){var E=this;window.requestAnimationFrame(function S(C){E.leaving||(E.isOutOfSight()||v(C),window.requestAnimationFrame(S))})}},{key:"setUpActivityChecks",value:function(){var v=this,E=null;this.isOutOfSight=function(){return document.visibilityState==="hidden"||!E},this.isBeingAnimated=function(){var P=v.animationGapCheck===!0,_=Date.now()-v.lastAnimationEnd<200;return P&&!_&&(v.animationGapCheck=[],Je.session&&console.log("".concat(v.id," animation has stopped (too long since last step)"))),P&&_},this.isInBackground=function(){return v.isOutOfSight()||!v.isBeingAnimated()},new IntersectionObserver(function(P,_){return E=P[0].isIntersecting}).observe(document.body);var S,C=this.sessionSpec.autoSleep;if(C){var M=1e3*C,D=0,T=0;S=function(){var P=Date.now();P-D<980||(D=P,v.isOutOfSight()?T?P-T>M&&(v.dormantDisconnect(),T=0):T=P:T=0)}}var B=function(){v.leaving?R&&(clearInterval(R),R=null):v.connected&&v.vm&&(S&&S(),v.isBeingAnimated()||v.connection.keepAlive(Date.now()))},R=setInterval(B,1e3);this.simulateIfNeeded=function(){if(!v.isBeingAnimated()&&(B(),v.connected)){var P=.9*v.msPerTick;C&&(P=Math.min(P,200));var _=v.synced?"background":"fastForward";v.stepSession(_,{budget:P})}}}},{key:"toString",value:function(){return"Controller[".concat(this.id,"]")}},{key:i,value:function(){return this.toString()}}]),e}(Symbol.toPrimitive),bq=function(){function i(e){Wn(this,i),this.controller=e,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}return ei(i,[{key:"id",get:function(){return this.controller.id}},{key:"setTick",value:function(e){this.missingTickThreshold=Math.min(3*e,45e3)}},{key:"connected",get:function(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}},{key:"checkForConnection",value:function(e){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!e||this.connectToReflector()}},{key:"connectToReflector",value:function(){var e=this;if(!this.socket&&!this.connectHasBeenCalled){this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;var t=Je.reflector?"wss://croquet.io/reflector-dev/dev":gq,n={},o=this.controller.sessionSpec.token;if(o&&(n.token=o),ft.reflector){var a=ft.reflector.toUpperCase();a==="CF"||a.match(/^[A-Z]{3}$/)?(t=Je.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",a.length===3&&(n.colo=a)):ft.reflector.match(/^[-a-z0-9]+$/i)?n.region=ft.reflector:t=ft.reflector}if(!t.match(/^wss?:/))throw Error("Cannot interpret reflector address "+t);t.endsWith("/")||(t+="/");for(var l=new URL(t+this.id),c=0,A=Object.entries(n);c<A.length;c++){var u=Ft(A[c],2),h=u[0],f=u[1];l.searchParams.append(h,f)}var d=new WebSocket(l);d.onopen=function(p){e.socket=d,e.connectHasBeenCalled=!1,Je.session&&console.log(e.id,e.socket.constructor.name,"connected to",e.socket.url),e.reconnectDelay=0,on.connected(!0),e.controller.sendJoin()},d.onmessage=function(p){d===e.socket&&e.receive(p.data)},d.onerror=function(p){Je.session&&console.log(e.id,d.constructor.name,"connection error"),e.connectHasBeenCalled=!1,e.controller.clearSyncReceiptTimeout()},d.onclose=function(p){e.socketClosed(p.code,p.reason)}}}},{key:"socketClosed",value:function(e,t){var n=this;this.controller.clearSyncReceiptTimeout();var o=e!==1e3&&e<4100,a=e===4110;a||e===1e3||this.reconnectDelay||setTimeout(function(){n.connected||At.showMessage("Connection closed: ".concat(e," ").concat(t),{level:o?"error":"fatal"})},500),Je.session&&console.log(this.id,"".concat(this.socket?this.socket.constructor.name+" closed":"closed before opening,"," with code: ").concat(e," ").concat(t)),on.connected(!1),a?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),o&&(Je.session&&console.log(this.id,"reconnecting in ".concat(this.reconnectDelay," ms")),this.reconnectTimeout=window.setTimeout(function(){delete n.reconnectTimeout,n.connectToReflector()},this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}},{key:"disconnected",value:function(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}},{key:"send",value:function(e){this.socketLastSent=Date.now(),this.socket.send(e)}},{key:"receive",value:function(e){this.lastReceived=Date.now();var t=JSON.parse(e),n=t.id,o=t.action,a=t.args;if(n)try{this.controller.receive(o,a)}catch(l){this.closeConnectionWithError("receive",l)}else switch(o){case"PONG":if(Je.pong&&console.log("PONG after",Date.now()-a,"ms"),this.pongHook)try{this.pongHook(a)}catch(l){console.error(l)}break;default:console.warn("Unknown action",o)}}},{key:"dormantDisconnect",value:function(){this.connected&&(Je.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}},{key:"closeConnectionWithError",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4e3;console.error(t),console.warn("closing socket"),n>=4100&&n!==4110&&(this.controller.leaving=function(){}),this.closeConnection(n,"Error in "+e)}},{key:"closeConnection",value:function(e,t){this.socket&&(this.socket.onclose=null,this.socket.close(e,t),this.socketClosed(e,t))}},{key:"PULSE",value:function(e){this.connected&&(this.socket.bufferedAmount===0?(Je.session&&console.log("".concat(this.id," sending PULSE")),this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&e-this.stalledSince>500?console.log("".concat(this.id," Reflector connection stalled: ").concat(this.socket.bufferedAmount," bytes unsent for ").concat(e-this.stalledSince," ms")):this.stalledSince=Date.now())}},{key:"keepAlive",value:function(e){this.lastReceived!==0&&(e-this.socketLastSent>25e3||e-this.lastReceived>this.missingTickThreshold)&&this.PULSE(e)}},{key:"PING",value:function(){this.connected&&this.send(JSON.stringify({action:"PING",args:Date.now()}))}}]),i}();window.setInterval(function(){var i,e=Gt(qd);try{for(e.s();!(i=e.n()).done;){var t=i.value;t.connected&&t.vm&&t.connection.keepAlive(Date.now())}}catch(n){e.e(n)}finally{e.f()}},100);var RE=Symbol("hash"),kE=Symbol("key"),PE=Symbol("url"),xN=new Map;function s1(i){return ft.has("debug",i,!1)}function Cq(i){return i.replace(/.*\//,"")}function _E(i){return i.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o1(i){return i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+3&-4,"=")}function NE(i,e){return e.replace(/[\s\S]/g,function(t){return String.fromCharCode(t.charCodeAt(0)^i.charCodeAt(0))})}var zd=function(){function i(n,o,a){Wn(this,i);var l=xN.get(n);if(l)return s1("data")&&console.log("Croquet.Data: using cached handle for ".concat(n)),l;if(a.slice(-43)!==n)throw Error("Croquet Data: malformed URL");Object.defineProperty(this,RE,{value:n}),Object.defineProperty(this,kE,{value:o}),Object.defineProperty(this,PE,{value:a}),xN.set(n,this),s1("data")&&console.log("Croquet.Data: created new handle for ".concat(n))}var e,t;return ei(i,null,[{key:"store",value:(t=$t(regeneratorRuntime.mark(function n(o,a){var l,c,A,u,h,f,d,p,m,b=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(l=b.length>2&&b[2]!==void 0&&b[2],Zt(o)==="object"&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),a=o),!qo.hasCurrent()){g.next=4;break}throw Error("Croquet.Data.store() called from Model code");case 4:return c=yN(o),A=c.appId,u=c.persistentId,h=c.uploadEncrypted,f=dc.random(32).toString(Ts),d="apps/".concat(A,"/").concat(u,"/data/%HASH%"),g.next=9,h({path:d,content:a,key:f,keep:l,debug:s1("data"),what:"shared data"});case 9:return p=g.sent,m=Cq(p),g.abrupt("return",new i(m,f,p));case 12:case"end":return g.stop()}},n)})),function(n,o){return t.apply(this,arguments)})},{key:"fetch",value:(e=$t(regeneratorRuntime.mark(function n(o,a){var l,c,A,u,h;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(Zt(o)==="object"&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),a=o),!qo.hasCurrent()){f.next=3;break}throw Error("Croquet.Data.fetch() called from Model code");case 3:if(l=yN(o),c=l.downloadEncrypted,A=a&&a[RE],u=a&&a[kE],h=a&&a[PE],typeof A=="string"&&typeof u=="string"&&typeof h=="string"){f.next=9;break}throw Error("Croquet.Data.fetch() called with invalid handle");case 9:return f.abrupt("return",c({url:h,key:u,debug:s1("data"),what:"shared data"}));case 10:case"end":return f.stop()}},n)})),function(n,o){return e.apply(this,arguments)})},{key:"hash",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"base64url";typeof n=="function"&&(n=Function.prototype.toString.call(n)),typeof n=="string"?n=new TextEncoder().encode(n):n&&n.constructor===DataView?n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n&&n.constructor===ArrayBuffer?n=new Uint8Array(n):ArrayBuffer.isView(n)||(n=new TextEncoder().encode(yc(n)));var a=_N(dc.create(n));switch(o){case"hex":return a.toString();case"base64":return a.toString(Ts);case"base64url":return _E(a.toString(Ts));default:throw Error('Croquet.Data: unknown hash output "'.concat(o,'", expected "hex"/"base64"/"base64url"'))}}},{key:"fromId",value:function(n){var o,a,l,c,A=n.slice(0,1);switch(A){case"0":o=n.slice(1,44),a=n.slice(44),l="".concat("https://files.croquet.io","/sessiondata/").concat(o);break;case"1":o=n.slice(1,44),a=n.slice(44,87)+"=",c=n.slice(87),l="".concat("https://files.croquet.io","/apps/").concat(c,"/data/").concat(o);break;case"2":o=n.slice(1,44),c=NE(a=o1(n.slice(44,87)),atob(o1(n.slice(87)))),l="".concat("https://files.croquet.io","/apps/").concat(c,"/data/").concat(o);break;case"3":o=(l=NE(a=o1(n.slice(1,44)),atob(o1(n.slice(44))))).slice(-43);break;default:throw Error("Croquet.Data expected handle v0-v".concat("3"," got v").concat(A))}return new this(o,a,l)}},{key:"toId",value:function(n){if(!n)return"";var o=n[RE],a=n[kE],l=n[PE];if(l.slice(-43)!==o)throw Error("Croquet Data: malformed URL");var c=_E(a),A=_E(btoa(NE(a,l)));return"".concat("3").concat(c).concat(A)}}]),i}(),oI={cls:zd,write:function(i){return zd.toId(i)},read:function(i){return zd.fromId(i)}},Ut=null,hc=null,MF=function(i){w1(t,DN(Error));var e=C1(t);function t(){return Wn(this,t),e.apply(this,arguments)}return t}();Object.defineProperty(MF.prototype,"name",{value:"CroquetWarning"});var wN={};function KE(i,e){var t=JSON.parse(atob(i.slice(1,-1))),n=t.qPara,o=t.qArgs,a=t.qFn,l=JSON.stringify(n),c=wN[l]||(wN[l]=ar(Function,Wt(n)));return typeof a=="number"&&(o[a]=c),c.call.apply(c,[e].concat(Wt(o))).bind(e)}function TF(i,e){if(Ut)throw Error("VirtualMachine confusion");if(!(i instanceof qo))throw Error("not a VM: "+i);var t=Ut;try{Ut=i,window.CROQUETVM=i,e()}finally{Ut=t}}var JE=new WeakMap;function bN(i){JE.set(i,null)}var qo=function(i){function e(t,n){var o=this;Wn(this,e),function(){if(!window.CroquetViewMath){window.CroquetMath.random=function(){return Ut.random()},window.CroquetViewMath=Fn({},Math);for(var a=function(){var h=Ft(c[l],2),f=h[0],d=h[1],p=Math[f];Math[f]=d.length===1?function(m){return Ut?d(m):p(m)}:function(m,b){return Ut?d(m,b):p(m,b)}},l=0,c=Object.entries(window.CroquetMath);l<c.length;l++)a()}if(!window.CroquetViewDate){let h=function(d,p){return u||(u=!0,console.warn(new MF("".concat(d," used in Model code")))),p},f=function(d,p,m,b,g,w,I){var v=this instanceof f,E=[d,p,m,b,g,w,I];if(E.length=arguments.length,Ut)switch(h(v?"new Date()":"Date()"),arguments.length){case 0:E.push(Ut.time);break;case 1:break;default:E[0]=A.UTC.apply(A,E),E.length=1}var S=ar(A,E);return v?S:""+S};var A=window.Date,u=!1;f.prototype=A.prototype,f.UTC=A.UTC,f.now=function(){return Ut?h("Date.now()",Ut.time):A.now()},f.parse=function(){return Ut?h("Date.parse()",0):A.parse.apply(A,arguments)},window.CroquetViewDate=A,window.Date=f}}(),hc={snapshot:ft.has("debug","snapshot",!1),session:ft.has("debug","session",!1)},bN(this),TF(this,function(){KN(o,function(){if(o.modelsById={},o.modelsByName={},o.messages=new uj(function(p,m){return p.before(m)}),o.subscriptions={},o.views={},o._random=function(){throw Error("You must not use random when applying state!")},o.id=t.id,o.time=0,o.seq=4294967280,o.externalTime=0,o.externalSeq=o.seq,o.futureSeq=0,o.lastSnapshotPoll=0,o.lastPersistencePoll=0,o.inPersistenceCoolOff=!1,o.persisted="",o.modelsId=0,o.controller=null,t.modelsById){for(var a=lI.newOrRecycled(o).readVM(t,"$"),l=[],c=0,A=Object.keys(a);c<A.length;c++){var u=A[c];u in o||u==="meta"?u==="messages"?l=a.messages:o[u]=a[u]:console.warn("Ignoring property snapshot.".concat(u))}var h,f=Gt(l);try{for(f.s();!(h=f.n()).done;){var d=h.value;o.messages.add(d.convertIfNeeded(o))}}catch(p){f.e(p)}finally{f.f()}}else o._random=new p1(t.id,{state:!0}),n(o),o.addSubscription(o,o.id,"__views__",o.generateJoinExit)})})}return ei(e,[{key:"registerModel",value:function(t,n){if(Ut!==this)throw Error("You can only create models from model code!");return n||(n=this.id+"/M"+ ++this.modelsId),this.modelsById[n]=t,n}},{key:"deregisterModel",value:function(t){if(Ut!==this)throw Error("You can only destroy models from model code!");var n=this.modelsById;delete this.modelsById[t];for(var o=0,a=Object.entries(this.modelsByName);o<a.length;o++){var l=Ft(a[o],2),c=l[0];n===l[1]&&delete this.modelsByName[c]}this.messages.removeMany(function(A){return A.hasReceiver(t)})}},{key:"lookUpModel",value:function(t){if(t===this.id)return this;var n=this.modelsById[t];if(n)return n;var o=Ft(t.match(/^([^#]+)#(.*)$/),3);o[0];var a=o[1],l=o[2];return this.modelsById[a].lookUp(l)}},{key:"get",value:function(t){return this.modelsByName[t]}},{key:"set",value:function(t,n){if(Ut!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[t]=n}},{key:"callModelMethod",value:function(t,n,o){if(Ut)throw Error("You cannot make a reflector send from model code!");var a=this.lookUpModel(t);if(a){var l=new ns(this.time,0,a.id,n,o);this.controller.sendMessage(l)}else console.error(Error("Model not found: ".concat(t)))}},{key:"noop",value:function(){}},{key:"generateJoinExit",value:function(t){var n=t.entered,o=t.exited,a=t.count;if(n.length===a){var l,c=Gt(o=Object.keys(this.views));try{for(c.s();!(l=c.n()).done;){var A=l.value;this.views[A].extraConnections=0}}catch(w){c.e(w)}finally{c.f()}}if(n.length!==0&&o.length!==0){var u=n.filter(function(w){return o.includes(w)});if(u.length!==0&&(n=n.filter(function(w){return!u.includes(w)}),o=o.filter(function(w){return!u.includes(w)}),n.length===0&&o.length===0))return}var h,f=Gt(o);try{for(f.s();!(h=f.n()).done;){var d=h.value;if(this.views[d]){if(this.views[d].extraConnections){this.views[d].extraConnections--,hc.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(d," closed extra connection"));continue}delete this.views[d],this.publishFromModelOnly(this.id,"view-exit",d)}else console.error("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(d," exited without being present - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," ").concat(d," left without being present"))}}catch(w){f.e(w)}finally{f.f()}var p,m=Gt(n);try{for(m.s();!(p=m.n()).done;){var b=p.value;this.views[b]?(hc.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(b," opened another connection")),this.views[b].extraConnections=(this.views[b].extraConnections||0)+1):(this.views[b]={},this.publishFromModelOnly(this.id,"view-join",b))}}catch(w){m.e(w)}finally{m.f()}var g=Object.values(this.views).reduce(function(w,I){return w+1+(I.extraConnections||0)},0);a!==g&&(console.error("@".concat(this.time,"#").concat(this.seq," view count mismatch (model: ").concat(g,", reflector: ").concat(a,") - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," connections model: ").concat(g," reflector: ").concat(a)))}},{key:"scheduleExternalMessage",value:function(t){var n=ns.fromState(t,this);if(n.time<this.time)throw Error("past message from reflector "+t);var o=this.externalSeq+1>>>0;if(n.seq!==o)throw Error("External message error. Expected message #".concat(o," got #").concat(n.seq));return this.externalTime=n.time,this.externalSeq=n.seq,n.seq=2*n.seq+1,this.messages.add(n),n}},{key:"futureSend",value:function(t,n,o,a){if(t.every)return this.futureRepeat(t.every,n,o,a);if(t<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;var l=new ns(this.time+t,2*this.futureSeq,n,o,a);return this.messages.add(l),l}},{key:"futureRepeat",value:function(t,n,o,a){this.futureSend(t,this.id,"futureExecAndRepeat",[t,n,o,a])}},{key:"futureExecAndRepeat",value:function(t,n,o,a){var l=this.lookUpModel(n);if(typeof l[o]=="function")try{l[o].apply(l,Wt(a))}catch(A){kr("future message ".concat(l,".").concat(o),A)}else{var c=KE(o,l);try{c.apply(void 0,Wt(a))}catch(A){kr("future message ".concat(l," ").concat(c),A)}}this.futureRepeat(t,n,o,a)}},{key:"future",value:function(t,n,o,a){var l=this.asQFunc(t,o);if(typeof l=="string")return this.futureSend(n,t.id,l,a);var c=this;return new Proxy(t,{get:function(A,u){if(typeof t[u]=="function")return function(){if(c.lookUpModel(t.id)!==t)throw Error("future send to unregistered model");for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];return c.futureSend(n,t.id,u,f)};throw Error("Tried to call "+u+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"advanceTo",value:function(t,n){if(Ut)throw Error("cannot advance time from model code");for(var o,a=0;(o=this.messages.peek())&&o.time<=t;){var l=o,c=l.time,A=l.seq;if(c<this.time)throw Error("past message encountered: "+o);if(1&A&&(this.seq=this.seq+1>>>0,A/2>>>0!==this.seq))throw Error("Sequence error: expected ".concat(this.seq," got ").concat(A/2>>>0," in ").concat(o));if(this.messages.poll(),this.time=o.time,o.executeOn(this),++a>100&&(a=0,Date.now()>n))return!1}return this.time=t,!0}},{key:"asQFunc",value:function(t,n){if(typeof n=="string")return n;if(typeof n=="function"){if(t[n.name]===n)return n.name;for(var o=t;o!==null;){for(var a=0,l=Object.entries(Object.getOwnPropertyDescriptors(o));a<l.length;a++){var c=Ft(l[a],2),A=c[0];if(c[1].value===n)return A}o=Object.getPrototypeOf(o)}var u=n.toString().match(/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i);return!u||u[3]&&u[3]!==u[1]?function(h,f){typeof h=="function"&&(f=h,h={});var d=Object.keys(h).concat(["return "+f]),p=Object.values(h),m={qPara:d,qArgs:p},b=p.indexOf(f);return b>=0&&(p[b]=d[b],m.qFn=b),"{".concat(btoa(JSON.stringify(m)),"}")}(n):u[2]}return null}},{key:"addSubscription",value:function(t,n,o,a){if(Ut!==this)throw Error("Cannot add a model subscription from outside model code");var l=this.asQFunc(t,a);if(typeof l!="string")throw Error('Subscription handler for "'.concat(o,'" must be a method name'));if(l.indexOf(".")<0&&typeof t[l]!="function"&&l[0]!=="{")throw Error('Subscriber method for "'.concat(o,'" not found: ').concat(t,".").concat(l,"()"));var c=n+":"+o,A=t.id+"."+l;if(this.subscriptions[c]){if(this.subscriptions[c].indexOf(A)!==-1)throw Error("".concat(t,".").concat(l," already subscribed to ").concat(o))}else this.subscriptions[c]=[];this.subscriptions[c].push(A)}},{key:"removeSubscription",value:function(t,n,o,a){if(Ut!==this)throw Error("Cannot remove a model subscription from outside model code");var l=n+":"+o,c=t.id+"."+a,A=this.subscriptions[l];if(A){var u=A.indexOf(c);A.splice(u,1),A.length===0&&delete this.subscriptions[l]}}},{key:"removeAllSubscriptionsFor",value:function(t){for(var n="".concat(t.id,":"),o="".concat(t.id,"."),a=0,l=Object.entries(this.subscriptions);a<l.length;a++){var c=Ft(l[a],2),A=c[0],u=c[1];if(A.startsWith(n))delete this.subscriptions[A];else{for(var h=u.length-1;h>=0;h--)u[h].startsWith(o)&&u.splice(h,1);u.size===0&&delete this.subscriptions[A]}}}},{key:"publishFromModel",value:function(t,n,o){if(Ut!==this)throw Error("Cannot publish a model event from outside model code");var a=n.endsWith("#reflected");a&&(n=n.slice(0,n.length-10));var l=t+":"+n;this.handleModelEventInModel(l,o,a),this.handleModelEventInView(l,o)}},{key:"publishFromModelOnly",value:function(t,n,o){if(Ut!==this)throw Error("Cannot publish a model event from outside model code");var a=t+":"+n;this.handleModelEventInModel(a,o)}},{key:"publishFromView",value:function(t,n,o){if(Ut)throw Error("Cannot publish a view event from model code");var a=t+":"+n;this.handleViewEventInModel(a,o),this.handleViewEventInView(a,o)}},{key:"handleBundledEvents",value:function(t,n){var o,a=Gt(n.events);try{for(a.s();!(o=a.n()).done;){var l=o.value;ns.fromState(l,this).executeOn(this,!0)}}catch(c){a.e(c)}finally{a.f()}}},{key:"handleModelEventInModel",value:function(t,n){var o=this,a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ut!==this)throw Error("handleModelEventInModel called from outside model code");if(a){if(this.controller.synced!==!0)return;var l=t+"#__vote",c=t+"#divergence",A=!!is.subscriptions[l],u=!!this.subscriptions[t],h=!!this.subscriptions[c];A&&h&&console.log("divergence subscription for ".concat(t," overridden by vote subscription"));var f,d=u?new ns(this.time,0,this.id,"handleModelEventInModel",[t,n]):null;f=A?[this.id,"handleModelEventInView",l]:[this.id,"handleTuttiDivergence",c],Promise.resolve().then(function(){return o.controller.sendTutti(o.time,t,n,d,A,f)})}else if(this.subscriptions[t]){var p,m=Gt(this.subscriptions[t]);try{for(m.s();!(p=m.n()).done;){var b=p.value,g=b.split("."),w=d7(g),I=w[0],v=w.slice(1),E=v.join("."),S=this.lookUpModel(I);if(S)if(E[0]!=="{")if(E.indexOf(".")===-1){if(typeof S[E]!="function"){kr("event ".concat(t," ").concat(S,".").concat(E,"(): method not found"));continue}try{S[E](n)}catch(D){kr("event ".concat(t," ").concat(S,".").concat(E,"()"),D)}}else try{var C=E.split(".");S.call(C[0],C[1],n)}catch(D){kr("event ".concat(t," ").concat(S,".").concat(E,"()"),D)}else{var M=KE(E,S);try{M(n)}catch(D){kr("event ".concat(t," ").concat(S," ").concat(M),D)}}else Mu("event ".concat(t," .").concat(E,"(): subscriber not found"))}}catch(D){m.e(D)}finally{m.f()}}}},{key:"handleViewEventInModel",value:function(t,n){if(this.subscriptions[t]){var o=new ns(this.time,0,this.id,"handleModelEventInModel",[t,n]);this.controller.sendMessage(o)}}},{key:"handleModelEventInView",value:function(t,n){var o=this;is.handleEvent(t,n,function(a){return function(l){if(!Ut)throw Error("VirtualMachine confusion");var c=Ut;try{Ut=null,l()}finally{Ut=c}}(function(){return Vd(o,a,!0)})})}},{key:"handleViewEventInView",value:function(t,n){is.handleEvent(t,n)}},{key:"handleTuttiDivergence",value:function(t,n){if(this.subscriptions[t])this.handleModelEventInModel(t,n);else{var o=t.split(":").slice(-1)[0];console.warn("uncaptured divergence in ".concat(o,":"),n)}}},{key:"processModelViewEvents",value:function(t){var n=this;if(Ut)throw Error("cannot process view events in model code");return Vd(this,function(){return is.processFrameEvents(t,!!n.controller.synced)})}},{key:"pollToCheckSync",value:function(){var t=this,n=this.time;if(this.controller.synced===!0){var o=Date.now(),a=this.getSummaryHash(),l=Date.now()-o;this.controller.cpuTime-=l,Promise.resolve().then(function(){return t.controller.syncCheck(n,a)})}}},{key:"handlePollForSnapshot",value:function(){var t=this.time,n=t-this.lastSnapshotPoll;n<5e3?console.log("rejecting snapshot poll ".concat(n,"ms after previous")):(this.lastSnapshotPoll=t,this.controller.handlePollForSnapshot(t))}},{key:"snapshot",value:function(){return aI.newOrRecycled(this).snapshot(this,"$")}},{key:"getSummaryHash",value:function(){return yc(new Iq().getHash(this))}},{key:"persist",value:function(t,n){var o=on.begin("snapshot"),a=typeof n=="function"?n.call(t):n;if(Zt(a)!=="object")throw Error("Croquet: persistSession() can only persist objects (got ".concat(Zt(a),")"));var l,c,A=yc(a),u=zd.hash(A),h=on.end("snapshot")-o,f=this.persisted===u,d=this.time;if(hc.snapshot&&console.log("".concat(this.id," persistent data @").concat(d," collected, stringified and hashed in ").concat(Math.ceil(h),"ms").concat(f?" (unchanged, ignoring)":"")),!f)if(l=this,c={persistTime:d,persistentString:A,persistentHash:u,ms:h},JE.set(l,c),this.persisted=u,this.inPersistenceCoolOff)hc.snapshot&&console.log("".concat(this.id," persistence poll postponed by cooloff"));else{var p=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;p>0?(hc.snapshot&&console.log("".concat(this.id," postponing persistence poll by ").concat(p,"ms")),this.futureSend(p,this.id,"triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}},{key:"triggerPersistencePoll",value:function(){var t=this;this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;var n,o=(n=this,JE.get(n));if(o){var a=o.persistTime,l=o.persistentString,c=o.persistentHash,A=o.ms;if(bN(this),this.controller&&this.controller.synced){hc.snapshot&&console.log("".concat(this.id," asking controller to poll for persistence @").concat(a));var u=this.time;Promise.resolve().then(function(){return t.controller.pollForPersist(u,a,l,c,A)})}}}},{key:"random",value:function(){if(Ut!==this)throw Error("replicated random accessed from outside the model");return this._random()}},{key:"randomID",value:function(){if(Ut!==this)throw Error("replicated random accessed from outside the model");for(var t="",n=0;n<4;n++)t+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return t}},{key:"toString",value:function(){return"VirtualMachine[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"current",value:function(){return Ut||console.warn("VirtualMachine.current() called from outside the vm!"),Ut}},{key:"hasCurrent",value:function(){return!!Ut}}]),e}();function Sq(i,e,t){return t.length>0&&(t=DF.newOrRecycled().encode(t)),"".concat(i,">").concat(e).concat(t.length>0?JSON.stringify(t):"")}function CN(i,e){var t=Ft(i.match(/^([^[]+)(\[.*)?$/i),3);t[0];var n=t[1],o=t[2],a=Ft(n.split(">"),2),l=a[0],c=a[1],A=[];return o&&(A=BF.newOrRecycled(e).decode(JSON.parse(o))),{receiver:l,selector:c,args:A}}function Hd(i,e){return(e-i|0)>=0}var ns=function(i){function e(t,n,o,a,l){Wn(this,e),this.time=t,this.seq=n,this.receiver=o,this.selector=a,this.args=l}return ei(e,[{key:"convertIfNeeded",value:function(t){if(this.payload){var n=CN(this.payload,t),o=n.receiver,a=n.selector,l=n.args;delete this.payload,this.receiver=o,this.selector=a,this.args=l}return this}},{key:"before",value:function(t){return this.time!==t.time?this.time<t.time:this.isExternal()!==t.isExternal()?t.isExternal():this.isExternal()?Hd(this.externalSeq,t.externalSeq):Hd(this.internalSeq,t.internalSeq)}},{key:"hasReceiver",value:function(t){return this.receiver===t}},{key:"isExternal",value:function(){return 1&this.seq}},{key:"externalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t+1}},{key:"internalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t}},{key:"asState",value:function(){return[this.time,this.seq,Sq(this.receiver,this.selector,this.args)]}},{key:"executeOn",value:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=o?function(f){return f()}:function(f){return TF(t,function(){return KN(t,f)})},l=this.receiver,c=this.selector,A=this.args,u=t.lookUpModel(l);if(u)if(c[0]==="{"){var h=KE(c,u);a(function(){try{h.apply(void 0,Wt(A))}catch(f){kr("".concat(n.shortString()," ").concat(h),f)}})}else typeof u[c]!="function"?Mu("".concat(this.shortString()," ").concat(u,".").concat(c,"(): method not found")):a(function(){try{u[c].apply(u,Wt(A))}catch(f){kr("".concat(n.shortString()," ").concat(u,".").concat(c,"()"),f)}});else Mu("".concat(this.shortString()," ").concat(c,"(): receiver not found"))}},{key:"shortString",value:function(){return"".concat(this.isExternal()?"External":"Future","Message")}},{key:"toString",value:function(){var t=this.receiver,n=this.selector,o=this.args,a=this.isExternal(),l=a?this.externalSeq:this.internalSeq;return"".concat(a?"External":"Future","Message[").concat(this.time).concat(":#"[+a]).concat(l," ").concat(t,".").concat(n,"(").concat(o.map(JSON.stringify).join(", "),")]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"fromState",value:function(t,n){var o=Ft(t,3),a=o[0],l=o[1],c=CN(o[2],n);return new e(a,l,c.receiver,c.selector,c.args)}}]),e}(),Eq=function(){var i=new ArrayBuffer(8),e=new DataView(i);return function(t){return e.setFloat64(0,t,!0),e.getInt32(0,!0)+e.getInt32(4,!0)}}(),Iq=function(){function i(){Wn(this,i),this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",ns),this.addHasher("Teatime:Data",oI);var e,t=Gt(Bs.allClassTypes());try{for(t.s();!(e=t.n()).done;){var n=Ft(e.value,2),o=n[0],a=n[1];this.addHasher(o,a)}}catch(l){t.e(l)}finally{t.f()}}return ei(i,[{key:"addHasher",value:function(e,t){var n=this,o=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(c){return Fn({},c)}},a=o.cls,l=o.write;this.hashers.set(a,function(c){return n.hashStructure(c,l(c))})}},{key:"getHash",value:function(e){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(var t=0,n=Object.entries(e);t<n.length;t++){var o=Ft(n[t],2),a=o[0],l=o[1];if(a!=="controller"&&a!=="meta")if(a==="_random")this.hash(l.state(),!1);else if(a==="messages"){var c=l.asArray();(this.hashState.fC=c.length)&&this.hash(c,!1)}else this.hashEntry(a,l)}return this.hashDeferred(),this.hashState}},{key:"hashDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.key,n=e.value;this.hashEntry(t,n,!1)}}},{key:"hash",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];switch(Zt(e)){case"number":return void(Number.isNaN(e)?this.hashState.nanC++:Number.isFinite(e)?e===0?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Eq(e)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=e.length);case"boolean":case"undefined":return;default:if(this.refs.has(e))return;var n=Object.prototype.toString.call(e).slice(8,-1);switch(n){case"Array":return void this.hashArray(e,t);case"ArrayBuffer":return void this.hashArray(new Uint8Array(e),!1);case"Set":case"Map":return void this.hashStructure(e,Wt(e));case"DataView":return void this.hashArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return void this.hashArray(e,!1);case"Object":if(e instanceof Bs)this.hashModel(e);else if(e.constructor===Object)this.hashObject(e,t);else{var o=this.hashers.get(e.constructor);o&&o(e)}}}}},{key:"hashModel",value:function(e){this.hashState.mC++,this.refs.set(e,!0);for(var t=0,n=Object.entries(e);t<n.length;t++){var o=Ft(n[t],2),a=o[0],l=o[1];a!=="__realm"&&l!==void 0&&this.hashEntry(a,l)}}},{key:"hashObject",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.hashState.oC++,this.refs.set(e,!0);for(var n=0,o=Object.entries(e);n<o.length;n++){var a=Ft(o[n],2),l=a[0],c=a[1];c!==void 0&&this.hashEntry(l,c,t)}}},{key:"hashArray",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.refs.set(e,!0);for(var n=0;n<e.length;n++)this.hashEntry(n,e[n],t)}},{key:"hashStructure",value:function(e,t){t!==void 0&&(this.refs.set(e,!0),this.hash(t,!1))}},{key:"hashEntry",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];e[0]!=="$"?n&&Zt(t)==="object"?this.todo.push({key:e,value:t}):this.hash(t):Mu("hash: ignoring property ".concat(e),{only:"once"})}}]),i}(),aI=function(){function i(e){Wn(this,i),this.vm=e,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",ns),this.addWriter("Teatime:Data",oI);var t,n=Gt(Bs.allClassTypes());try{for(n.s();!(t=n.n()).done;){var o=Ft(t.value,2),a=o[0],l=o[1];this.addWriter(a,l)}}catch(c){n.e(c)}finally{n.f()}}return ei(i,[{key:"addWriter",value:function(e,t){var n=this,o=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(c){return Fn({},c)}},a=o.cls,l=o.write;this.writers.set(a,function(c,A){return n.writeAs(e,c,l(c),A)})}},{key:"snapshot",value:function(e){for(var t={_random:e._random.state(),messages:this.write(e.messages.asArray())},n=0,o=Object.entries(e);n<o.length;n++){var a=Ft(o[n],2),l=a[0],c=a[1];l!=="controller"&&(t[l]||this.writeInto(t,l,c,"$"))}return this.writeDeferred(),t}},{key:"writeDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.state,n=e.key,o=e.value,a=e.path;this.writeInto(t,n,o,a,!1)}}},{key:"write",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];switch(Zt(e)){case"number":return Object.is(e,-0)?{$class:"NegZero"}:Number.isSafeInteger(e)?e:Number.isNaN(e)?{$class:"NaN"}:Number.isFinite(e)?this.writeFloat(e):{$class:"Infinity",$value:Math.sign(e)};case"string":case"boolean":return e;case"undefined":return{$class:"Undefined"};default:if(this.refs.has(e))return this.writeRef(e);var o=Object.prototype.toString.call(e).slice(8,-1);switch(o){case"Array":return this.writeArray(e,t,n);case"ArrayBuffer":return this.writeArrayBuffer(e);case"Set":case"Map":return this.writeAs(o,e,Wt(e),t);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(o,e);case"Object":if(e instanceof Bs)return this.writeModel(e,t);if(e.constructor===Object||typeof e.constructor!="function")return this.writeObject(e,t,n);var a=this.writers.get(e.constructor);if(a)return a(e,t);throw console.error("Croquet Snapshot: unknown class ".concat(t,":"),e),Error("Croquet Snapshot: class not registered in Model.types(): ".concat(e.constructor.name));case"Null":return e;default:throw console.error("Croquet Snapshot: unsupported property ".concat(t,":"),e),Error("Croquet Snapshot: ".concat(o,"s are not supported as model properties"))}}}},{key:"writeModel",value:function(e,t){var n={$model:Bs.classToID(e.constructor)};this.refs.set(e,n);var o,a=Gt(Object.keys(e).sort());try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l!=="__realm"){var c=e[l];this.writeInto(n,l,c,t)}}}catch(A){a.e(A)}finally{a.f()}return n}},{key:"writeObject",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o={};this.refs.set(e,o);var a,l=Gt(Object.keys(e).sort());try{for(l.s();!(a=l.n()).done;){var c=a.value,A=e[c];this.writeInto(o,c,A,t,n)}}catch(u){l.e(u)}finally{l.f()}return o}},{key:"writeArray",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=[];this.refs.set(e,o);for(var a=0;a<e.length;a++)this.writeInto(o,a,e[a],t,n);return o}},{key:"writeArrayBuffer",value:function(e){var t={$class:"ArrayBuffer",$value:Mq(e)};return this.refs.set(e,t),t}},{key:"writeTypedArray",value:function(e,t){var n={$class:e,$value:[this.writeArrayBuffer(t.buffer),t.byteOffset,e==="DataView"?t.byteLength:t.length]};return this.refs.set(t,n),n}},{key:"writeFloat",value:function(e){return e}},{key:"writeAs",value:function(e,t,n,o){if(n===void 0)return n;var a={$class:e};this.refs.set(t,a);var l=this.write(n,o,!1);return Zt(l)!=="object"||l.$class||Array.isArray(l)?a.$value=l:Object.assign(a,l),a}},{key:"writeRef",value:function(e){var t=this.refs.get(e);if(Zt(t)!=="object")throw Error("Non-object in refs: "+e);return Array.isArray(t)&&(t.toJSON=function(){return{$id:this.$id,$class:"Array",$value:Wt(this)}}),{$ref:t.$id||(t.$id=this.nextRef++)}}},{key:"writeInto",value:function(e,t,n,o){var a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t[0]!=="$")if(a&&Zt(n)==="object")this.todo.push({state:e,key:t,value:n,path:o});else{var l=typeof t=="string"&&t.match(/^[_a-z][_a-z0-9]*$/i),c=o+(l?".".concat(t):"[".concat(JSON.stringify(t),"]")),A=this.write(n,c);A!==void 0&&(e[t]=A)}else Mu("snapshot: ignoring property ".concat(t),{only:"once"})}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.nextRef=1,t.refs=new Map,t.todo=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),i}(),lI=function(){function i(e){Wn(this,i),this.vm=e,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",ns),this.addReader("Teatime:Data",oI);var t,n=Gt(Bs.allClassTypes());try{for(n.s();!(t=n.n()).done;){var o=Ft(t.value,2),a=o[0],l=o[1];this.addReader(a,l)}}catch(c){n.e(c)}finally{n.f()}this.readers.set("Undefined",function(){}),this.readers.set("NaN",function(){return NaN}),this.readers.set("Infinity",function(c){return c*(1/0)}),this.readers.set("NegZero",function(){return-0}),this.readers.set("Set",function(c){return new Set(c)}),this.readers.set("Map",function(c){return new Map(c)}),this.readers.set("Array",function(c){return c.slice(0)}),this.readers.set("ArrayBuffer",function(c){return function(A){for(var u=window.atob(A),h=u.length,f=new Uint8Array(h),d=0;d<h;d++)f[d]=u.charCodeAt(d);return f.buffer}(c)}),this.readers.set("DataView",function(c){return ar(DataView,Wt(c))}),this.readers.set("Int8Array",function(c){return ar(Int8Array,Wt(c))}),this.readers.set("Uint8Array",function(c){return ar(Uint8Array,Wt(c))}),this.readers.set("Uint8ClampedArray",function(c){return ar(Uint8ClampedArray,Wt(c))}),this.readers.set("Int16Array",function(c){return ar(Int16Array,Wt(c))}),this.readers.set("Uint16Array",function(c){return ar(Uint16Array,Wt(c))}),this.readers.set("Int32Array",function(c){return ar(Int32Array,Wt(c))}),this.readers.set("Uint32Array",function(c){return ar(Uint32Array,Wt(c))}),this.readers.set("Float32Array",function(c){return ar(Float32Array,Wt(c))}),this.readers.set("Float64Array",function(c){return ar(Float64Array,Wt(c))})}return ei(i,[{key:"addReader",value:function(e,t){var n=Zt(t)==="object"?t.read:function(o){return Object.assign(Object.create(t.prototype),o)};this.readers.set(e,n)}},{key:"readVM",value:function(e,t){if(t!=="$")throw Error("VirtualMachine must be root object");for(var n={_random:new p1(null,{state:e._random})},o=0,a=Object.entries(e);o<a.length;o++){var l=Ft(a[o],2),c=l[0],A=l[1];n[c]||this.readInto(n,c,A,t)}return this.readDeferred(),this.resolveRefs(),n}},{key:"readDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.object,n=e.key,o=e.value,a=e.path;this.readInto(t,n,o,a,1)}}},{key:"resolveRefs",value:function(){var e,t=Gt(this.unresolved);try{for(t.s();!(e=t.n()).done;){var n=e.value,o=n.object,a=n.key,l=n.ref,c=n.path;if(!this.refs.has(l))throw Error("Unresolved ref: ".concat(l," at ").concat(c,"[").concat(JSON.stringify(a),"]"));o[a]=this.refs.get(l)}}catch(A){t.e(A)}finally{t.f()}}},{key:"read",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;switch(Zt(e)){case"number":case"string":case"boolean":return e;default:var o=Object.prototype.toString.call(e).slice(8,-1);switch(o){case"Array":return this.readArray(e,t,n);case"Null":return null;case"Object":var a=e.$class,l=e.$model,c=e.$ref;if(c)throw Error("refs should have been handled in readInto()");return l?this.readModel(e,t):a?this.readAs(a,e,t):this.readObject(Object,e,t,n);default:throw Error("Don't know how to deserialize ".concat(o," at ").concat(t))}}}},{key:"readModel",value:function(e,t){var n=Bs.instantiateClassID(e.$model,e.id);e.$id&&this.refs.set(e.$id,n);for(var o=0,a=Object.entries(e);o<a.length;o++){var l=Ft(a[o],2),c=l[0],A=l[1];c!=="id"&&c[0]!=="$"&&this.readInto(n,c,A,t)}return n}},{key:"readObject",value:function(e,t,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=new e;t.$id&&this.refs.set(t.$id,a);for(var l=0,c=Object.entries(t);l<c.length;l++){var A=Ft(c[l],2),u=A[0],h=A[1];u[0]!=="$"&&this.readInto(a,u,h,n,o)}return a}},{key:"readArray",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=[];e.$id&&this.refs.set(e.$id,o);for(var a=0;a<e.length;a++)e[a]!==void 0&&this.readInto(o,a,e[a],t,n);return o}},{key:"readAs",value:function(e,t,n){var o={},a=new Map;if("$value"in t)o=this.read(t.$value,n,2);else for(var l=0,c=Object.entries(t);l<c.length;l++){var A=Ft(c[l],2),u=A[0],h=A[1];if(u[0]!=="$"){var f=h&&h.$ref;f?this.refs.has(f)?o[u]=this.refs.get(f):(o[u]="<unresolved>",a.set(f,u)):this.readInto(o,u,h,n,1)}}var d=this.readers.get(e)(o,n);d||e==="Undefined"||e==="NaN"||e==="NegZero"||console.warn('Reading "'.concat(e,'" returned ').concat(d," at ").concat(n)),t.$id&&this.refs.set(t.$id,d);var p,m=Gt(a.entries());try{for(m.s();!(p=m.n()).done;){var b=Ft(p.value,2),g=b[0],w=b[1];this.unresolved.push({object:d,key:w,ref:g,path:n})}}catch(I){m.e(I)}finally{m.f()}return d}},{key:"readRef",value:function(e,t,n,o){if(!n||!n.$ref)return!1;var a=n.$ref;return this.refs.has(a)?e[t]=this.refs.get(a):(e[t]="<unresolved>",this.unresolved.push({object:e,key:t,ref:a,path:o})),!0}},{key:"readInto",value:function(e,t,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!this.readRef(e,t,n,o))if(a!==0||Zt(n)!=="object"){var l=typeof t=="string"&&t.match(/^[_a-z][_a-z0-9]*$/i),c=o+(l?".".concat(t):"[".concat(JSON.stringify(t),"]"));e[t]=this.read(n,c,a>0?a-1:0)}else this.todo.push({object:e,key:t,value:n,path:o})}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.refs=new Map,t.todo=[],t.unresolved=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),i}(),DF=function(i){w1(t,aI);var e=C1(t);function t(){return Wn(this,t),e.apply(this,arguments)}return ei(t,[{key:"encode",value:function(n){var o=this.writeArray(n,"$");return this.writeDeferred(),o}},{key:"writeModel",value:function(n){return{$ref:n.id}}}]),t}(),BF=function(i){w1(t,lI);var e=C1(t);function t(){return Wn(this,t),e.apply(this,arguments)}return ei(t,[{key:"decode",value:function(n){var o=this.readArray(n,"$");return this.readDeferred(),this.resolveRefs(),o}},{key:"resolveRefs",value:function(){var n,o=Gt(this.unresolved);try{for(o.s();!(n=o.n()).done;){var a=n.value,l=a.object,c=a.key,A=a.ref,u=a.path;if(this.refs.has(A))l[c]=this.refs.get(A);else{var h=this.vm.lookUpModel(A);if(!h)throw Error("Unresolved ref: ".concat(A," at ").concat(u,"[").concat(JSON.stringify(c),"]"));l[c]=h}}}catch(f){o.e(f)}finally{o.f()}}}]),t}();function LF(i){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Set,a=Object.values(i).filter(function(d){var p=Object.prototype.toString.call(d).slice(8,-1);return(p==="Object"||p==="Array")&&!o.has(d)}),l=Gt(a);try{for(l.s();!(e=l.n()).done;){var c=e.value;o.add(c);var A=t+"."+c.constructor.name;if(n[A]){if(n[A]!==c.constructor)throw new Error("Class with name "+A+" already gathered, but new one has different identity")}else n[A]=c.constructor}}catch(d){l.e(d)}finally{l.f()}var u,h=Gt(a);try{for(h.s();!(u=h.n()).done;){var f=u.value;LF(f,t,n,o)}}catch(d){h.e(d)}finally{h.f()}}function Mq(i){for(var e=new Uint8Array(i),t=e.byteLength,n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return window.btoa(n)}var SN=ft.has("debug","classes",!1),a1=Symbol("SECRET"),l1=new WeakSet,Bs=function(i){function e(t){if(Wn(this,e),t!==a1)throw Error("You must create ".concat(this,' using create() not "new"!'))}return ei(e,[{key:"init",value:function(t){l1.delete(this)}},{key:"destroy",value:function(){oo().unsubscribeAll(this),oo().deregister(this)}},{key:"publish",value:function(t,n,o){this.__realm||this.__realmError(),this.__realm.publish(n,o,t)}},{key:"subscribe",value:function(t,n,o){return this.__realm||this.__realmError(),this.__realm.subscribe(this,t,n,o)}},{key:"unsubscribe",value:function(t,n){this.__realm||this.__realmError(),this.__realm.unsubscribe(this,t,n)}},{key:"unsubscribeAll",value:function(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}},{key:"__realmError",value:function(){if(!this.id)throw Error("".concat(this," has no ID, did you call super.init(options)?"))}},{key:"future",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return this.__realm.future(this,t,n,a)}},{key:"random",value:function(){return oo().random()}},{key:"now",value:function(){return oo().now()}},{key:"beWellKnownAs",value:function(t){oo().vm.set(t,this)}},{key:"getModel",value:function(t){return this.__realm.vm.lookUpModel(t)}},{key:"wellKnownModel",value:function(t){return this.__realm.vm.get(t)}},{key:"modelOnly",value:function(t){if(qo.current()===this.__realm.vm)return!0;var n=Error(t||"".concat(this,".modelOnly() called from outside a model!"));throw kr("view code",n),n}},{key:"sessionId",get:function(){return this.__realm.vm.id}},{key:"viewCount",get:function(){return Object.keys(this.__realm.vm.views).length}},{key:"persistSession",value:function(t){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,t)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor[Wd]||this.constructor.name;return t.includes("Model")?t:"".concat(t,"[Model]")}}],[{key:"create",value:function(t,n,o){if(!FE(this))throw Error('Model class "'.concat(this.name,'" not registered'));var a=oo(),l=new this(a1);return Object.defineProperty(l,"__realm",{value:a}),Object.defineProperty(l,"id",{value:a.register(l),enumerable:!0}),l1.add(l),typeof n=="string"&&(console.warn('Croquet: Model.create(..., "'.concat(n,'") with a well-known name argument is deprecated!')),l.beWellKnownAs(n),n=void 0),o&&l.beWellKnownAs(o),l.init(t,n),l1.has(l)&&(l1.delete(l),Object.getPrototypeOf(this)!==e&&console.warn("".concat(l," did not call super.init(options)"))),l}},{key:"createNoInit",value:function(t){var n=oo(),o=new this(a1);return Object.defineProperty(o,"__realm",{value:n}),Object.defineProperty(o,"id",{value:t,enumerable:!0}),o}},{key:"allowConstructors",value:function(){a1=void 0,console.warn("disabling error reporting for Model constructors")}},{key:"register",value:function(t){return t||(t=this.name,console.warn("Deprecation warning: ".concat(this.name,".register(classId) called without classId. See https://croquet.io/sdk/docs/Model.html#.register"))),lI.resetInstance(),aI.resetInstance(),DF.resetInstance(),BF.resetInstance(),function(n,o){var a=FN(n),l=Eu("".concat(o,":").concat(a));$E.push(l),E1()&&l.then(function(c){Ko[c].what="Class ".concat(o)})}(this,t),function(n,o){var a=Bu[o];if(a&&a!==n)throw Error("Registering model class ".concat(n.name,' failed, id "').concat(o,'" already used by ').concat(a.name));FE(n)?SN&&!a&&console.warn("ignoring re-exported model class ".concat(o)):(SN&&console.log("registering model class ".concat(o)),n[Wd]=o),Bu[o]=n}(this,t),this}},{key:"wellKnownModel",value:function(t){if(!qo.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return qo.current().get(t)}},{key:"types",value:function(){return{}}},{key:"classToID",value:function(t){return function(n){if(FE(n))return n[Wd];throw Error('Class "'.concat(n.name,'" not found, did you call ').concat(n.name,'.register("').concat(n.name,'")?'))}(t)}},{key:"classFromID",value:function(t){return IN(t)}},{key:"allClasses",value:function(){return EN()}},{key:"allClassTypes",value:function(){return function(){var t,n={},o=Gt(EN());try{for(o.s();!(t=o.n()).done;){var a=t.value;Object.assign(n,a.types())}}catch(l){o.e(l)}finally{o.f()}return Object.entries(n)}()}},{key:"instantiateClassID",value:function(t,n){return IN(t).createNoInit(n)}}]),e}(),Bu={},Wd=Symbol("CLASS_ID");function EN(){return Object.values(Bu)}function FE(i){return Object.prototype.hasOwnProperty.call(i,Wd)}function IN(i){if(Bu[i])return Bu[i];throw Error('Class "'.concat(i,'" in snapshot, but not found in current source?'))}Bs[Wd]="Croquet.Model",Bu["Croquet.Model"]=Bs;var jE=function(i){function e(t){Wn(this,e),Zt(t)==="object"&&"__realm"in t||console.warn("Croquet: argument to View constructor needs to be a Model");var n=oo("");n&&n.isViewRealm()||(n=Vd(t.__realm.vm,function(){return oo()},!0)),Object.defineProperty(this,"realm",{value:n}),Object.defineProperty(this,"id",{value:n.register(this),configurable:!0})}return ei(e,[{key:"detach",value:function(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}},{key:"reattach",value:function(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}},{key:"publish",value:function(t,n,o){this.realm.publish(n,o,t)}},{key:"subscribe",value:function(t,n,o){typeof o=="string"&&(o=this[o]),o=o.bind(this);var a=n.event?n:{event:n},l=a.event,c=a.handling;this.realm.subscribe(l,this.id,o,t,c)}},{key:"unsubscribe",value:function(t,n){this.realm.unsubscribe(n,this.id,null,t)}},{key:"unsubscribeAll",value:function(){this.realm.unsubscribeAll(this.id)}},{key:"future",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.realm.future(this,t)}},{key:"random",value:function(){return oo().random()}},{key:"now",value:function(){return this.realm.now()}},{key:"externalNow",value:function(){return this.realm.externalNow()}},{key:"extrapolatedNow",value:function(){return this.realm.extrapolatedNow()}},{key:"update",value:function(t){}},{key:"wellKnownModel",value:function(t){return this.realm.vm.get(t)}},{key:"sessionId",get:function(){return this.realm.vm.id}},{key:"session",get:function(){return this.realm.vm.controller.session}},{key:"viewId",get:function(){return this.realm.vm.controller.viewId}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor.name;return t.includes("View")?t:"".concat(t,"[View]")}}],[{key:"displayStatus",value:function(t,n){return YN(t,n)}},{key:"displayWarning",value:function(t,n){return Mu(t,n)}},{key:"displayError",value:function(t,n){return function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o&&At.showMessage(o,Fn(Fn({},a),{},{level:"error"}))}(t,n)}}]),e}(),qE=new(function(){function i(){Wn(this,i),this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}return ei(i,[{key:"setReceiver",value:function(e){this.receiver=e,this.ready=!0}},{key:"setIframeEnumerator",value:function(e){this.enumerator=e}},{key:"on",value:function(e,t){var n=this;if(!this.receiver)throw Error("setReceiver() has not been called");if(typeof t=="string"&&(t=this.receiver[t]),!t)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[e]){if(this.findIndex(this.subscriptions[e],t)>=0)throw Error("".concat(t," is already subscribed"))}else this.subscriptions[e]=[];this.subscriptions[e].push(t),this.listener||(this.listener=function(o){return n.receive(o)},window.addEventListener("message",this.listener))}},{key:"detach",value:function(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}},{key:"removeSubscription",value:function(e,t){typeof t=="string"&&(t=this.receiver[t]);var n=this.subscriptions[e];if(n){var o=this.findIndex(n,t);n.splice(o,1),n.length===0&&delete this.subscriptions[e]}}},{key:"removeAllSubscriptions",value:function(){this.subscriptions={}}},{key:"receive",value:function(e){var t=e.data,n=t.event,o=t.data,a=e.source;this.handleEvent(n,o,a)}},{key:"handleEvent",value:function(e,t,n){var o=this,a=this.subscriptions[e];a&&a.forEach(function(l){l.call(o.receiver,t,n)})}},{key:"send",value:function(e,t,n){this.isInIframe?window.top.postMessage({event:e,data:t},"*"):n?n.postMessage({event:e,data:t},"*"):this.enumerator&&this.enumerator().forEach(function(o){o.contentWindow.postMessage({event:e,data:t},"*")})}},{key:"findIndex",value:function(e,t){var n=t.name;return e.findIndex(function(o){var a=o.name;return n||a?n===a:t===o})}},{key:"startPublishingPointerMove",value:function(){var e=this;this._moveHandler||(this._moveHandler=function(t){return e.send("pointerPosition",{x:t.clientX,y:t.clientY,type:t.type})},window.document.addEventListener("pointermove",this._moveHandler,!0))}},{key:"stopPublishingPointerMove",value:function(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}}]),i}()),MN=60,QE=function(){function i(){Wn(this,i)}var e,t,n;return ei(i,null,[{key:"join",value:(n=$t(regeneratorRuntime.mark(function o(a){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,this.join_impl(a);case 3:return l.abrupt("return",l.sent);case 6:throw l.prev=6,l.t0=l.catch(0),At.showMessage(l.t0.message,{level:"fatal"}),l.t0;case 10:case"end":return l.stop()}},o,this,[[0,6]])})),function(o){return n.apply(this,arguments)})},{key:"join_impl",value:(t=$t(regeneratorRuntime.mark(function o(a){var l,c,A,u,h,f,d,p,m,b,g,w,I,v,E,S,C,M,D,T,B,R,P,_,Q,W;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(W=function(){S.model=null,S.view&&(ft.has("debug","session",!1)&&console.log(S.id,"detaching root view"),S.view.detach(),S.view.id!==""&&console.warn("Croquet: ".concat(S.view," did not call super.detach()")),S.view=null),At.clearSessionMoniker(),qE.ready&&qE.detach()},Q=function(){return(Q=$t(regeneratorRuntime.mark(function H(){return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(W(),!v.leaving){O.next=4;break}return v.leaving(!0),O.abrupt("return");case 4:if(!P){O.next=6;break}return O.abrupt("return");case 6:return P=!0,O.next=9,v.establishSession(C);case 9:P=!1,S.model=v.vm.get("modelRoot"),S.id=v.id,S.persistentId=v.persistentId,S.versionId=v.versionId,v.session=S,At.makeSessionWidgets(S.id),v.inViewRealm(function(){ft.has("debug","session",!1)&&console.log(S.id,"creating root view"),S.view=new p(S.model)});case 17:case"end":return O.stop()}},H)}))).apply(this,arguments)},_=function(){return Q.apply(this,arguments)},f=function(H,O){return H===O||H.prototype instanceof O},Zt(a)==="object"){U.next=6;break}throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/sdk/docs/Session.html#.join");case 6:l=0,c=Object.entries(a);case 7:if(!(l<c.length)){U.next=16;break}if(A=Ft(c[l],2),u=A[0],!((h=A[1])instanceof Promise)){U.next=13;break}return U.next=12,h;case 12:a[u]=U.sent;case 13:l++,U.next=7;break;case 16:if(typeof a.apiKey=="string"){U.next=18;break}throw Error("Croquet: no apiKey provided in Session.join()!");case 18:if(!(a.apiKey.length>128)){U.next=20;break}throw Error("Croquet: apiKey > 128 characters in Session.join()!");case 20:if(typeof a.name=="string"){U.next=22;break}throw Error("Croquet: no session name provided in Session.join()!");case 22:if(!(a.name.length>128)){U.next=24;break}throw Error("Croquet: session name > 128 characters in Session.join()!");case 24:if(typeof(d=a.model)=="function"&&f(d,Bs)){U.next=27;break}throw Error("Croquet: bad model class in Session.join()");case 27:if(typeof(p=a.view||jE)=="function"&&f(p,jE)){U.next=30;break}throw Error("Croquet: bad view class in Session.join()");case 30:if(typeof a.appId=="string"){U.next=32;break}throw Error("Croquet: no appId provided in Session.join()");case 32:if(!(!a.appId.length>128)){U.next=34;break}throw Error("Croquet: appId > 128 characters in Session.join()");case 34:if(a.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i)){U.next=36;break}throw Error("Croquet: malformed appId in Session.join()");case 36:if(typeof a.password=="string"&&a.password){U.next=38;break}throw Error("Croquet: no password provided in Session.join()");case 38:if((m=ft.reflector||a.reflector)&&(m.includes("://")||m.match(/^[-a-z0-9]+$/i)?ft.reflector=m:console.warn('Croquet: Not a valid websocket url, ignoring reflector "'.concat(m,'"'))),!("rejoinLimit"in a)){U.next=45;break}if(!(typeof a.rejoinLimit!="number"||a.rejoinLimit<0||a.rejoinLimit>6e4)){U.next=43;break}throw Error("rejoinLimit range: 0-60000");case 43:U.next=46;break;case 45:a.rejoinLimit=1e3;case 46:if(!("eventRateLimit"in a)){U.next=51;break}if(!(typeof a.eventRateLimit!="number"||a.eventRateLimit<1||a.eventRateLimit>60)){U.next=49;break}throw Error("eventRateLimit range: 1-60");case 49:U.next=52;break;case 51:a.eventRateLimit=20;case 52:if(!a.heraldUrl){U.next=57;break}if(!(a.heraldUrl.length>256)){U.next=55;break}throw Error("heraldUrl can only be 256 characters");case 55:if(a.heraldUrl.startsWith("https://")){U.next=57;break}throw Error("heraldUrl needs to be https");case 57:if(!a.hashOverride){U.next=62;break}if(a.hashOverride.length===43){U.next=60;break}throw Error("hashOverride must be 43 characters");case 60:if(a.hashOverride.search(/[^-_a-zA-Z0-9]/)===-1){U.next=62;break}throw Error("hashOverride must be base64url encoded");case 62:if(a.debug&&(b=function(H){return typeof H=="string"&&(H=H.split(",")),H?Array.isArray(H)?H:[H]:[]},ft.debug=[].concat(Wt(b(a.debug)),Wt(b(ft.debug))).join(",")),!("autoSleep"in a)){U.next=78;break}if(g=a.autoSleep,(w=Zt(g))!=="number"){U.next=71;break}if(!(g<0)){U.next=69;break}throw Error("an autoSleep value must be >= 0");case 69:U.next=76;break;case 71:if(w!=="boolean"){U.next=75;break}a.autoSleep=g?10:0,U.next=76;break;case 75:throw Error("autoSleep must be numeric or boolean");case 76:U.next=79;break;case 78:a.autoSleep=10;case 79:for(("expectedSimFPS"in a)&&(MN=Math.min(a.expectedSimFPS,120)),I=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewIdDebugSuffix","hashOverride"],Tq(),v=new wq,E=JSON.parse(JSON.stringify(Fn({},a.options))),U.t0=function(H){v.stepSession("animation",{frameTime:H,view:S.view,expectedSimFPS:MN})},U.t1=function(){return i.leave(S.id)},S={id:"",persistentId:"",versionId:"",model:null,view:null,step:U.t0,leave:U.t1,get latency(){return v.latency},get latencies(){return v.latencies}},C={options:E,initFn:function(H,O){return d.create(H,O,"modelRoot")},rebootModelView:_},M=0,D=Object.entries(a);M<D.length;M++)T=Ft(D[M],2),B=T[0],R=T[1],I.includes(B)&&(C[B]=R);return U.next=91,v.initFromSessionSpec(C);case 91:return P=!1,U.next=94,_();case 94:return a.step!=="manual"&&v.startStepping(S.step),U.abrupt("return",S);case 96:case"end":return U.stop()}},o)})),function(o){return t.apply(this,arguments)})},{key:"leave",value:(e=$t(regeneratorRuntime.mark(function o(a){var l,c,A;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(l=xq(a)){u.next=3;break}return u.abrupt("return",!1);case 3:if(l.reconnectTimeout&&(clearTimeout(l.reconnectTimeout),delete l.reconnectTimeout),c=new Promise(function(h){return l.leaving=h}),(A=l.connection).connected){u.next=8;break}return u.abrupt("return",!1);case 8:return A.closeConnection(1e3),u.abrupt("return",c);case 10:case"end":return u.stop()}},o)})),function(o){return e.apply(this,arguments)})},{key:"thisSession",value:function(){var o=qo.current();return o?o.id:""}}]),i}(),d1={};function RF(i){if(!Object.isFrozen(i)){Object.freeze(i);for(var e=0,t=Object.values(i);e<t.length;e++){var n=t[e];!n||Zt(n)!=="object"&&typeof n!="function"||RF(n)}}}function Tq(){Object.isFrozen(d1)||(RF(d1),function(i){var e=JSON.stringify(i,function(o,a){return typeof a=="function"?FN(a):a});if(e!=="{}"){var t=JSON.parse(e),n=Eu(yc(t));$E.push(n),E1()&&n.then(function(o){Ko[o].what="Croquet Constants"})}}(d1))}Ms.App=At,Ms.Constants=d1,Ms.Data=zd,Ms.Messenger=qE,Ms.Model=Bs,Ms.Session=QE,Ms.View=jE,Ms.gatherInternalClassTypes=function(i,e){var t={};return LF({root:i},e,t,new Set),t},Ms.startSession=function(){return At.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),QE.join.apply(QE,arguments)}});var Y5=yt((Gu,zu)=>{(function(i){var e=typeof Gu=="object"&&Gu&&!Gu.nodeType&&Gu,t=typeof zu=="object"&&zu&&!zu.nodeType&&zu,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(i=n);var o,a=2147483647,l=36,c=1,A=26,u=38,h=700,f=72,d=128,p="-",m=/^xn--/,b=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=l-c,v=Math.floor,E=String.fromCharCode,S;function C(O){throw new RangeError(w[O])}function M(O,F){for(var z=O.length,k=[];z--;)k[z]=F(O[z]);return k}function D(O,F){var z=O.split("@"),k="";z.length>1&&(k=z[0]+"@",O=z[1]),O=O.replace(g,".");var X=O.split("."),te=M(X,F).join(".");return k+te}function T(O){for(var F=[],z=0,k=O.length,X,te;z<k;)X=O.charCodeAt(z++),X>=55296&&X<=56319&&z<k?(te=O.charCodeAt(z++),(te&64512)==56320?F.push(((X&1023)<<10)+(te&1023)+65536):(F.push(X),z--)):F.push(X);return F}function B(O){return M(O,function(F){var z="";return F>65535&&(F-=65536,z+=E(F>>>10&1023|55296),F=56320|F&1023),z+=E(F),z}).join("")}function R(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function P(O,F){return O+22+75*(O<26)-((F!=0)<<5)}function _(O,F,z){var k=0;for(O=z?v(O/h):O>>1,O+=v(O/F);O>I*A>>1;k+=l)O=v(O/I);return v(k+(I+1)*O/(O+u))}function Q(O){var F=[],z=O.length,k,X=0,te=d,ie=f,re,se,oe,le,be,De,pe,K,we;for(re=O.lastIndexOf(p),re<0&&(re=0),se=0;se<re;++se)O.charCodeAt(se)>=128&&C("not-basic"),F.push(O.charCodeAt(se));for(oe=re>0?re+1:0;oe<z;){for(le=X,be=1,De=l;oe>=z&&C("invalid-input"),pe=R(O.charCodeAt(oe++)),(pe>=l||pe>v((a-X)/be))&&C("overflow"),X+=pe*be,K=De<=ie?c:De>=ie+A?A:De-ie,!(pe<K);De+=l)we=l-K,be>v(a/we)&&C("overflow"),be*=we;k=F.length+1,ie=_(X-le,k,le==0),v(X/k)>a-te&&C("overflow"),te+=v(X/k),X%=k,F.splice(X++,0,te)}return B(F)}function W(O){var F,z,k,X,te,ie,re,se,oe,le,be,De=[],pe,K,we,me;for(O=T(O),pe=O.length,F=d,z=0,te=f,ie=0;ie<pe;++ie)be=O[ie],be<128&&De.push(E(be));for(k=X=De.length,X&&De.push(p);k<pe;){for(re=a,ie=0;ie<pe;++ie)be=O[ie],be>=F&&be<re&&(re=be);for(K=k+1,re-F>v((a-z)/K)&&C("overflow"),z+=(re-F)*K,F=re,ie=0;ie<pe;++ie)if(be=O[ie],be<F&&++z>a&&C("overflow"),be==F){for(se=z,oe=l;le=oe<=te?c:oe>=te+A?A:oe-te,!(se<le);oe+=l)me=se-le,we=l-le,De.push(E(P(le+me%we,0))),se=v(me/we);De.push(E(P(se,0))),te=_(z,K,k==X),z=0,++k}++z,++F}return De.join("")}function U(O){return D(O,function(F){return m.test(F)?Q(F.slice(4).toLowerCase()):F})}function H(O){return D(O,function(F){return b.test(F)?"xn--"+W(F):F})}if(o={version:"1.4.1",ucs2:{decode:T,encode:B},decode:Q,encode:W,toASCII:H,toUnicode:U},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(e&&t)if(zu.exports==e)t.exports=o;else for(S in o)o.hasOwnProperty(S)&&(e[S]=o[S]);else i.punycode=o})(Gu)});var K5=yt((Qle,Z5)=>{"use strict";Z5.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==o||l.enumerable!==!0)return!1}return!0}});var q5=yt((Ule,j5)=>{"use strict";var J5=typeof Symbol<"u"&&Symbol,aee=K5();j5.exports=function(){return typeof J5!="function"||typeof Symbol!="function"||typeof J5("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:aee()}});var tQ=yt((Ole,eQ)=>{"use strict";var $5={foo:{}},lee=Object;eQ.exports=function(){return{__proto__:$5}.foo===$5.foo&&!({__proto__:null}instanceof lee)}});var iQ=yt((Gle,nQ)=>{"use strict";var cee="Function.prototype.bind called on incompatible ",YI=Array.prototype.slice,Aee=Object.prototype.toString,uee="[object Function]";nQ.exports=function(e){var t=this;if(typeof t!="function"||Aee.call(t)!==uee)throw new TypeError(cee+t);for(var n=YI.call(arguments,1),o,a=function(){if(this instanceof o){var h=t.apply(this,n.concat(YI.call(arguments)));return Object(h)===h?h:this}else return t.apply(e,n.concat(YI.call(arguments)))},l=Math.max(0,t.length-n.length),c=[],A=0;A<l;A++)c.push("$"+A);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var u=function(){};u.prototype=t.prototype,o.prototype=new u,u.prototype=null}return o}});var j1=yt((zle,rQ)=>{"use strict";var hee=iQ();rQ.exports=Function.prototype.bind||hee});var oQ=yt((Hle,sQ)=>{"use strict";var fee=j1();sQ.exports=fee.call(Function.call,Object.prototype.hasOwnProperty)});var ey=yt((Wle,uQ)=>{"use strict";var Rt,Xu=SyntaxError,AQ=Function,Vu=TypeError,ZI=function(i){try{return AQ('"use strict"; return ('+i+").constructor;")()}catch{}},Ec=Object.getOwnPropertyDescriptor;if(Ec)try{Ec({},"")}catch{Ec=null}var KI=function(){throw new Vu},dee=Ec?function(){try{return arguments.callee,KI}catch{try{return Ec(arguments,"callee").get}catch{return KI}}}():KI,Hu=q5()(),pee=tQ()(),hi=Object.getPrototypeOf||(pee?function(i){return i.__proto__}:null),Wu={},mee=typeof Uint8Array>"u"||!hi?Rt:hi(Uint8Array),Ic={"%AggregateError%":typeof AggregateError>"u"?Rt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Rt:ArrayBuffer,"%ArrayIteratorPrototype%":Hu&&hi?hi([][Symbol.iterator]()):Rt,"%AsyncFromSyncIteratorPrototype%":Rt,"%AsyncFunction%":Wu,"%AsyncGenerator%":Wu,"%AsyncGeneratorFunction%":Wu,"%AsyncIteratorPrototype%":Wu,"%Atomics%":typeof Atomics>"u"?Rt:Atomics,"%BigInt%":typeof BigInt>"u"?Rt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Rt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Rt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Rt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Rt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Rt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Rt:FinalizationRegistry,"%Function%":AQ,"%GeneratorFunction%":Wu,"%Int8Array%":typeof Int8Array>"u"?Rt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Rt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Rt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Hu&&hi?hi(hi([][Symbol.iterator]())):Rt,"%JSON%":typeof JSON=="object"?JSON:Rt,"%Map%":typeof Map>"u"?Rt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Hu||!hi?Rt:hi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Rt:Promise,"%Proxy%":typeof Proxy>"u"?Rt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Rt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Rt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Hu||!hi?Rt:hi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Rt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Hu&&hi?hi(""[Symbol.iterator]()):Rt,"%Symbol%":Hu?Symbol:Rt,"%SyntaxError%":Xu,"%ThrowTypeError%":dee,"%TypedArray%":mee,"%TypeError%":Vu,"%Uint8Array%":typeof Uint8Array>"u"?Rt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Rt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Rt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Rt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Rt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Rt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Rt:WeakSet};if(hi)try{null.error}catch(i){aQ=hi(hi(i)),Ic["%Error.prototype%"]=aQ}var aQ,gee=function i(e){var t;if(e==="%AsyncFunction%")t=ZI("async function () {}");else if(e==="%GeneratorFunction%")t=ZI("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=ZI("async function* () {}");else if(e==="%AsyncGenerator%"){var n=i("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=i("%AsyncGenerator%");o&&hi&&(t=hi(o.prototype))}return Ic[e]=t,t},lQ={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},op=j1(),q1=oQ(),vee=op.call(Function.call,Array.prototype.concat),yee=op.call(Function.apply,Array.prototype.splice),cQ=op.call(Function.call,String.prototype.replace),$1=op.call(Function.call,String.prototype.slice),xee=op.call(Function.call,RegExp.prototype.exec),wee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bee=/\\(\\)?/g,Cee=function(e){var t=$1(e,0,1),n=$1(e,-1);if(t==="%"&&n!=="%")throw new Xu("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Xu("invalid intrinsic syntax, expected opening `%`");var o=[];return cQ(e,wee,function(a,l,c,A){o[o.length]=c?cQ(A,bee,"$1"):l||a}),o},See=function(e,t){var n=e,o;if(q1(lQ,n)&&(o=lQ[n],n="%"+o[0]+"%"),q1(Ic,n)){var a=Ic[n];if(a===Wu&&(a=gee(n)),typeof a>"u"&&!t)throw new Vu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:a}}throw new Xu("intrinsic "+e+" does not exist!")};uQ.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Vu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Vu('"allowMissing" argument must be a boolean');if(xee(/^%?[^%]*%?$/,e)===null)throw new Xu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Cee(e),o=n.length>0?n[0]:"",a=See("%"+o+"%",t),l=a.name,c=a.value,A=!1,u=a.alias;u&&(o=u[0],yee(n,vee([0,1],u)));for(var h=1,f=!0;h<n.length;h+=1){var d=n[h],p=$1(d,0,1),m=$1(d,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Xu("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(A=!0),o+="."+d,l="%"+o+"%",q1(Ic,l))c=Ic[l];else if(c!=null){if(!(d in c)){if(!t)throw new Vu("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ec&&h+1>=n.length){var b=Ec(c,d);f=!!b,f&&"get"in b&&!("originalValue"in b.get)?c=b.get:c=c[d]}else f=q1(c,d),c=c[d];f&&!A&&(Ic[l]=c)}}return c}});var gQ=yt((Vle,ty)=>{"use strict";var JI=j1(),Yu=ey(),dQ=Yu("%Function.prototype.apply%"),pQ=Yu("%Function.prototype.call%"),mQ=Yu("%Reflect.apply%",!0)||JI.call(pQ,dQ),hQ=Yu("%Object.getOwnPropertyDescriptor%",!0),Mc=Yu("%Object.defineProperty%",!0),Eee=Yu("%Math.max%");if(Mc)try{Mc({},"a",{value:1})}catch{Mc=null}ty.exports=function(e){var t=mQ(JI,pQ,arguments);if(hQ&&Mc){var n=hQ(t,"length");n.configurable&&Mc(t,"length",{value:1+Eee(0,e.length-(arguments.length-1))})}return t};var fQ=function(){return mQ(JI,dQ,arguments)};Mc?Mc(ty.exports,"apply",{value:fQ}):ty.exports.apply=fQ});var wQ=yt((Xle,xQ)=>{"use strict";var vQ=ey(),yQ=gQ(),Iee=yQ(vQ("String.prototype.indexOf"));xQ.exports=function(e,t){var n=vQ(e,!!t);return typeof n=="function"&&Iee(e,".prototype.")>-1?yQ(n):n}});var bQ=yt(()=>{});var zQ=yt((Kle,GQ)=>{var oM=typeof Map=="function"&&Map.prototype,jI=Object.getOwnPropertyDescriptor&&oM?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,iy=oM&&jI&&typeof jI.get=="function"?jI.get:null,CQ=oM&&Map.prototype.forEach,aM=typeof Set=="function"&&Set.prototype,qI=Object.getOwnPropertyDescriptor&&aM?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ry=aM&&qI&&typeof qI.get=="function"?qI.get:null,SQ=aM&&Set.prototype.forEach,Mee=typeof WeakMap=="function"&&WeakMap.prototype,lp=Mee?WeakMap.prototype.has:null,Tee=typeof WeakSet=="function"&&WeakSet.prototype,cp=Tee?WeakSet.prototype.has:null,Dee=typeof WeakRef=="function"&&WeakRef.prototype,EQ=Dee?WeakRef.prototype.deref:null,Bee=Boolean.prototype.valueOf,Lee=Object.prototype.toString,Ree=Function.prototype.toString,kee=String.prototype.match,lM=String.prototype.slice,al=String.prototype.replace,Pee=String.prototype.toUpperCase,IQ=String.prototype.toLowerCase,_Q=RegExp.prototype.test,MQ=Array.prototype.concat,co=Array.prototype.join,_ee=Array.prototype.slice,TQ=Math.floor,tM=typeof BigInt=="function"?BigInt.prototype.valueOf:null,$I=Object.getOwnPropertySymbols,nM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Di=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Zu||"symbol")?Symbol.toStringTag:null,NQ=Object.prototype.propertyIsEnumerable,DQ=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(i){return i.__proto__}:null);function BQ(i,e){if(i===1/0||i===-1/0||i!==i||i&&i>-1e3&&i<1e3||_Q.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof i=="number"){var n=i<0?-TQ(-i):TQ(i);if(n!==i){var o=String(n),a=lM.call(e,o.length+1);return al.call(o,t,"$&_")+"."+al.call(al.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return al.call(e,t,"$&_")}var iM=bQ(),LQ=iM.custom,RQ=QQ(LQ)?LQ:null;GQ.exports=function i(e,t,n,o){var a=t||{};if(ol(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ol(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=ol(a,"customInspect")?a.customInspect:!0;if(typeof l!="boolean"&&l!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ol(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ol(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return OQ(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var A=String(e);return c?BQ(e,A):A}if(typeof e=="bigint"){var u=String(e)+"n";return c?BQ(e,u):u}var h=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return rM(e)?"[Array]":"[Object]";var f=$ee(a,n);if(typeof o>"u")o=[];else if(UQ(o,e)>=0)return"[Circular]";function d(_,Q,W){if(Q&&(o=_ee.call(o),o.push(Q)),W){var U={depth:a.depth};return ol(a,"quoteStyle")&&(U.quoteStyle=a.quoteStyle),i(_,U,n+1,o)}return i(_,a,n+1,o)}if(typeof e=="function"&&!kQ(e)){var p=Wee(e),m=ny(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+co.call(m,", ")+" }":"")}if(QQ(e)){var b=Zu?al.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):nM.call(e);return typeof e=="object"&&!Zu?ap(b):b}if(Jee(e)){for(var g="<"+IQ.call(String(e.nodeName)),w=e.attributes||[],I=0;I<w.length;I++)g+=" "+w[I].name+"="+FQ(Nee(w[I].value),"double",a);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+IQ.call(String(e.nodeName))+">",g}if(rM(e)){if(e.length===0)return"[]";var v=ny(e,d);return f&&!qee(v)?"["+sM(v,f)+"]":"[ "+co.call(v,", ")+" ]"}if(Qee(e)){var E=ny(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!NQ.call(e,"cause")?"{ ["+String(e)+"] "+co.call(MQ.call("[cause]: "+d(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+co.call(E,", ")+" }"}if(typeof e=="object"&&l){if(RQ&&typeof e[RQ]=="function"&&iM)return iM(e,{depth:h-n});if(l!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Vee(e)){var S=[];return CQ&&CQ.call(e,function(_,Q){S.push(d(Q,e,!0)+" => "+d(_,e))}),PQ("Map",iy.call(e),S,f)}if(Zee(e)){var C=[];return SQ&&SQ.call(e,function(_){C.push(d(_,e))}),PQ("Set",ry.call(e),C,f)}if(Xee(e))return eM("WeakMap");if(Kee(e))return eM("WeakSet");if(Yee(e))return eM("WeakRef");if(Oee(e))return ap(d(Number(e)));if(zee(e))return ap(d(tM.call(e)));if(Gee(e))return ap(Bee.call(e));if(Uee(e))return ap(d(String(e)));if(!Fee(e)&&!kQ(e)){var M=ny(e,d),D=DQ?DQ(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",B=!D&&Di&&Object(e)===e&&Di in e?lM.call(ll(e),8,-1):T?"Object":"",R=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",P=R+(B||T?"["+co.call(MQ.call([],B||[],T||[]),": ")+"] ":"");return M.length===0?P+"{}":f?P+"{"+sM(M,f)+"}":P+"{ "+co.call(M,", ")+" }"}return String(e)};function FQ(i,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+i+n}function Nee(i){return al.call(String(i),/"/g,"&quot;")}function rM(i){return ll(i)==="[object Array]"&&(!Di||!(typeof i=="object"&&Di in i))}function Fee(i){return ll(i)==="[object Date]"&&(!Di||!(typeof i=="object"&&Di in i))}function kQ(i){return ll(i)==="[object RegExp]"&&(!Di||!(typeof i=="object"&&Di in i))}function Qee(i){return ll(i)==="[object Error]"&&(!Di||!(typeof i=="object"&&Di in i))}function Uee(i){return ll(i)==="[object String]"&&(!Di||!(typeof i=="object"&&Di in i))}function Oee(i){return ll(i)==="[object Number]"&&(!Di||!(typeof i=="object"&&Di in i))}function Gee(i){return ll(i)==="[object Boolean]"&&(!Di||!(typeof i=="object"&&Di in i))}function QQ(i){if(Zu)return i&&typeof i=="object"&&i instanceof Symbol;if(typeof i=="symbol")return!0;if(!i||typeof i!="object"||!nM)return!1;try{return nM.call(i),!0}catch{}return!1}function zee(i){if(!i||typeof i!="object"||!tM)return!1;try{return tM.call(i),!0}catch{}return!1}var Hee=Object.prototype.hasOwnProperty||function(i){return i in this};function ol(i,e){return Hee.call(i,e)}function ll(i){return Lee.call(i)}function Wee(i){if(i.name)return i.name;var e=kee.call(Ree.call(i),/^function\s*([\w$]+)/);return e?e[1]:null}function UQ(i,e){if(i.indexOf)return i.indexOf(e);for(var t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1}function Vee(i){if(!iy||!i||typeof i!="object")return!1;try{iy.call(i);try{ry.call(i)}catch{return!0}return i instanceof Map}catch{}return!1}function Xee(i){if(!lp||!i||typeof i!="object")return!1;try{lp.call(i,lp);try{cp.call(i,cp)}catch{return!0}return i instanceof WeakMap}catch{}return!1}function Yee(i){if(!EQ||!i||typeof i!="object")return!1;try{return EQ.call(i),!0}catch{}return!1}function Zee(i){if(!ry||!i||typeof i!="object")return!1;try{ry.call(i);try{iy.call(i)}catch{return!0}return i instanceof Set}catch{}return!1}function Kee(i){if(!cp||!i||typeof i!="object")return!1;try{cp.call(i,cp);try{lp.call(i,lp)}catch{return!0}return i instanceof WeakSet}catch{}return!1}function Jee(i){return!i||typeof i!="object"?!1:typeof HTMLElement<"u"&&i instanceof HTMLElement?!0:typeof i.nodeName=="string"&&typeof i.getAttribute=="function"}function OQ(i,e){if(i.length>e.maxStringLength){var t=i.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return OQ(lM.call(i,0,e.maxStringLength),e)+n}var o=al.call(al.call(i,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,jee);return FQ(o,"single",e)}function jee(i){var e=i.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Pee.call(e.toString(16))}function ap(i){return"Object("+i+")"}function eM(i){return i+" { ? }"}function PQ(i,e,t,n){var o=n?sM(t,n):co.call(t,", ");return i+" ("+e+") {"+o+"}"}function qee(i){for(var e=0;e<i.length;e++)if(UQ(i[e],`
`)>=0)return!1;return!0}function $ee(i,e){var t;if(i.indent==="	")t="	";else if(typeof i.indent=="number"&&i.indent>0)t=co.call(Array(i.indent+1)," ");else return null;return{base:t,prev:co.call(Array(e+1),t)}}function sM(i,e){if(i.length===0)return"";var t=`
`+e.prev+e.base;return t+co.call(i,","+t)+`
`+e.prev}function ny(i,e){var t=rM(i),n=[];if(t){n.length=i.length;for(var o=0;o<i.length;o++)n[o]=ol(i,o)?e(i[o],i):""}var a=typeof $I=="function"?$I(i):[],l;if(Zu){l={};for(var c=0;c<a.length;c++)l["$"+a[c]]=a[c]}for(var A in i)ol(i,A)&&(t&&String(Number(A))===A&&A<i.length||Zu&&l["$"+A]instanceof Symbol||(_Q.call(/[^\w$]/,A)?n.push(e(A,i)+": "+e(i[A],i)):n.push(A+": "+e(i[A],i))));if(typeof $I=="function")for(var u=0;u<a.length;u++)NQ.call(i,a[u])&&n.push("["+e(a[u])+"]: "+e(i[a[u]],i));return n}});var WQ=yt((Jle,HQ)=>{"use strict";var cM=ey(),Ku=wQ(),ete=zQ(),tte=cM("%TypeError%"),sy=cM("%WeakMap%",!0),oy=cM("%Map%",!0),nte=Ku("WeakMap.prototype.get",!0),ite=Ku("WeakMap.prototype.set",!0),rte=Ku("WeakMap.prototype.has",!0),ste=Ku("Map.prototype.get",!0),ote=Ku("Map.prototype.set",!0),ate=Ku("Map.prototype.has",!0),AM=function(i,e){for(var t=i,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=i.next,i.next=n,n},lte=function(i,e){var t=AM(i,e);return t&&t.value},cte=function(i,e,t){var n=AM(i,e);n?n.value=t:i.next={key:e,next:i.next,value:t}},Ate=function(i,e){return!!AM(i,e)};HQ.exports=function(){var e,t,n,o={assert:function(a){if(!o.has(a))throw new tte("Side channel does not contain "+ete(a))},get:function(a){if(sy&&a&&(typeof a=="object"||typeof a=="function")){if(e)return nte(e,a)}else if(oy){if(t)return ste(t,a)}else if(n)return lte(n,a)},has:function(a){if(sy&&a&&(typeof a=="object"||typeof a=="function")){if(e)return rte(e,a)}else if(oy){if(t)return ate(t,a)}else if(n)return Ate(n,a);return!1},set:function(a,l){sy&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new sy),ite(e,a,l)):oy?(t||(t=new oy),ote(t,a,l)):(n||(n={key:{},next:null}),cte(n,a,l))}};return o}});var ay=yt((jle,VQ)=>{"use strict";var ute=String.prototype.replace,hte=/%20/g,uM={RFC1738:"RFC1738",RFC3986:"RFC3986"};VQ.exports={default:uM.RFC3986,formatters:{RFC1738:function(i){return ute.call(i,hte,"+")},RFC3986:function(i){return String(i)}},RFC1738:uM.RFC1738,RFC3986:uM.RFC3986}});var fM=yt((qle,YQ)=>{"use strict";var fte=ay(),hM=Object.prototype.hasOwnProperty,Tc=Array.isArray,Ao=function(){for(var i=[],e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i}(),dte=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Tc(n)){for(var o=[],a=0;a<n.length;++a)typeof n[a]<"u"&&o.push(n[a]);t.obj[t.prop]=o}}},XQ=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},pte=function i(e,t,n){if(!t)return e;if(typeof t!="object"){if(Tc(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!hM.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var o=e;return Tc(e)&&!Tc(t)&&(o=XQ(e,n)),Tc(e)&&Tc(t)?(t.forEach(function(a,l){if(hM.call(e,l)){var c=e[l];c&&typeof c=="object"&&a&&typeof a=="object"?e[l]=i(c,a,n):e.push(a)}else e[l]=a}),e):Object.keys(t).reduce(function(a,l){var c=t[l];return hM.call(a,l)?a[l]=i(a[l],c,n):a[l]=c,a},o)},mte=function(e,t){return Object.keys(t).reduce(function(n,o){return n[o]=t[o],n},e)},gte=function(i,e,t){var n=i.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},vte=function(e,t,n,o,a){if(e.length===0)return e;var l=e;if(typeof e=="symbol"?l=Symbol.prototype.toString.call(e):typeof e!="string"&&(l=String(e)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var c="",A=0;A<l.length;++A){var u=l.charCodeAt(A);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||a===fte.RFC1738&&(u===40||u===41)){c+=l.charAt(A);continue}if(u<128){c=c+Ao[u];continue}if(u<2048){c=c+(Ao[192|u>>6]+Ao[128|u&63]);continue}if(u<55296||u>=57344){c=c+(Ao[224|u>>12]+Ao[128|u>>6&63]+Ao[128|u&63]);continue}A+=1,u=65536+((u&1023)<<10|l.charCodeAt(A)&1023),c+=Ao[240|u>>18]+Ao[128|u>>12&63]+Ao[128|u>>6&63]+Ao[128|u&63]}return c},yte=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var a=t[o],l=a.obj[a.prop],c=Object.keys(l),A=0;A<c.length;++A){var u=c[A],h=l[u];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(t.push({obj:l,prop:u}),n.push(h))}return dte(t),e},xte=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},wte=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},bte=function(e,t){return[].concat(e,t)},Cte=function(e,t){if(Tc(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)};YQ.exports={arrayToObject:XQ,assign:mte,combine:bte,compact:yte,decode:gte,encode:vte,isBuffer:wte,isRegExp:xte,maybeMap:Cte,merge:pte}});var $Q=yt(($le,qQ)=>{"use strict";var JQ=WQ(),ly=fM(),Ap=ay(),Ste=Object.prototype.hasOwnProperty,ZQ={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ea=Array.isArray,Ete=Array.prototype.push,jQ=function(i,e){Ete.apply(i,ea(e)?e:[e])},Ite=Date.prototype.toISOString,KQ=Ap.default,Bi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ly.encode,encodeValuesOnly:!1,format:KQ,formatter:Ap.formatters[KQ],indices:!1,serializeDate:function(e){return Ite.call(e)},skipNulls:!1,strictNullHandling:!1},Mte=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},dM={},Tte=function i(e,t,n,o,a,l,c,A,u,h,f,d,p,m,b,g){for(var w=e,I=g,v=0,E=!1;(I=I.get(dM))!==void 0&&!E;){var S=I.get(e);if(v+=1,typeof S<"u"){if(S===v)throw new RangeError("Cyclic object value");E=!0}typeof I.get(dM)>"u"&&(v=0)}if(typeof A=="function"?w=A(t,w):w instanceof Date?w=f(w):n==="comma"&&ea(w)&&(w=ly.maybeMap(w,function(U){return U instanceof Date?f(U):U})),w===null){if(a)return c&&!m?c(t,Bi.encoder,b,"key",d):t;w=""}if(Mte(w)||ly.isBuffer(w)){if(c){var C=m?t:c(t,Bi.encoder,b,"key",d);return[p(C)+"="+p(c(w,Bi.encoder,b,"value",d))]}return[p(t)+"="+p(String(w))]}var M=[];if(typeof w>"u")return M;var D;if(n==="comma"&&ea(w))m&&c&&(w=ly.maybeMap(w,c)),D=[{value:w.length>0?w.join(",")||null:void 0}];else if(ea(A))D=A;else{var T=Object.keys(w);D=u?T.sort(u):T}for(var B=o&&ea(w)&&w.length===1?t+"[]":t,R=0;R<D.length;++R){var P=D[R],_=typeof P=="object"&&typeof P.value<"u"?P.value:w[P];if(!(l&&_===null)){var Q=ea(w)?typeof n=="function"?n(B,P):B:B+(h?"."+P:"["+P+"]");g.set(e,v);var W=JQ();W.set(dM,g),jQ(M,i(_,Q,n,o,a,l,n==="comma"&&m&&ea(w)?null:c,A,u,h,f,d,p,m,b,W))}}return M},Dte=function(e){if(!e)return Bi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Bi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ap.default;if(typeof e.format<"u"){if(!Ste.call(Ap.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Ap.formatters[n],a=Bi.filter;return(typeof e.filter=="function"||ea(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Bi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Bi.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Bi.charsetSentinel,delimiter:typeof e.delimiter>"u"?Bi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Bi.encode,encoder:typeof e.encoder=="function"?e.encoder:Bi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Bi.encodeValuesOnly,filter:a,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Bi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Bi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Bi.strictNullHandling}};qQ.exports=function(i,e){var t=i,n=Dte(e),o,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):ea(n.filter)&&(a=n.filter,o=a);var l=[];if(typeof t!="object"||t===null)return"";var c;e&&e.arrayFormat in ZQ?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var A=ZQ[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=A==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(t)),n.sort&&o.sort(n.sort);for(var h=JQ(),f=0;f<o.length;++f){var d=o[f];n.skipNulls&&t[d]===null||jQ(l,Tte(t[d],d,A,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}var p=l.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""}});var nU=yt((ece,tU)=>{"use strict";var Ju=fM(),pM=Object.prototype.hasOwnProperty,Bte=Array.isArray,fi={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ju.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Lte=function(i){return i.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},eU=function(i,e){return i&&typeof i=="string"&&e.comma&&i.indexOf(",")>-1?i.split(","):i},Rte="utf8=%26%2310003%3B",kte="utf8=%E2%9C%93",Pte=function(e,t){var n={__proto__:null},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,l=o.split(t.delimiter,a),c=-1,A,u=t.charset;if(t.charsetSentinel)for(A=0;A<l.length;++A)l[A].indexOf("utf8=")===0&&(l[A]===kte?u="utf-8":l[A]===Rte&&(u="iso-8859-1"),c=A,A=l.length);for(A=0;A<l.length;++A)if(A!==c){var h=l[A],f=h.indexOf("]="),d=f===-1?h.indexOf("="):f+1,p,m;d===-1?(p=t.decoder(h,fi.decoder,u,"key"),m=t.strictNullHandling?null:""):(p=t.decoder(h.slice(0,d),fi.decoder,u,"key"),m=Ju.maybeMap(eU(h.slice(d+1),t),function(b){return t.decoder(b,fi.decoder,u,"value")})),m&&t.interpretNumericEntities&&u==="iso-8859-1"&&(m=Lte(m)),h.indexOf("[]=")>-1&&(m=Bte(m)?[m]:m),pM.call(n,p)?n[p]=Ju.combine(n[p],m):n[p]=m}return n},_te=function(i,e,t,n){for(var o=n?e:eU(e,t),a=i.length-1;a>=0;--a){var l,c=i[a];if(c==="[]"&&t.parseArrays)l=[].concat(o);else{l=t.plainObjects?Object.create(null):{};var A=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,u=parseInt(A,10);!t.parseArrays&&A===""?l={0:o}:!isNaN(u)&&c!==A&&String(u)===A&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(l=[],l[u]=o):A!=="__proto__"&&(l[A]=o)}o=l}return o},Nte=function(e,t,n,o){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,l=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,A=n.depth>0&&l.exec(a),u=A?a.slice(0,A.index):a,h=[];if(u){if(!n.plainObjects&&pM.call(Object.prototype,u)&&!n.allowPrototypes)return;h.push(u)}for(var f=0;n.depth>0&&(A=c.exec(a))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&pM.call(Object.prototype,A[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(A[1])}return A&&h.push("["+a.slice(A.index)+"]"),_te(h,t,n,o)}},Fte=function(e){if(!e)return fi;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?fi.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?fi.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:fi.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:fi.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:fi.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:fi.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:fi.comma,decoder:typeof e.decoder=="function"?e.decoder:fi.decoder,delimiter:typeof e.delimiter=="string"||Ju.isRegExp(e.delimiter)?e.delimiter:fi.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:fi.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:fi.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:fi.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:fi.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:fi.strictNullHandling}};tU.exports=function(i,e){var t=Fte(e);if(i===""||i===null||typeof i>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof i=="string"?Pte(i,t):i,o=t.plainObjects?Object.create(null):{},a=Object.keys(n),l=0;l<a.length;++l){var c=a[l],A=Nte(c,n[c],t,typeof i=="string");o=Ju.merge(o,A,t)}return t.allowSparse===!0?o:Ju.compact(o)}});var rU=yt((tce,iU)=>{"use strict";var Qte=$Q(),Ute=nU(),Ote=ay();iU.exports={formats:Ote,parse:Ute,stringify:Qte}});var yM=yt(qu=>{"use strict";var Gte=Y5();function rs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var zte=/^([a-z0-9.+-]+:)/i,Hte=/:[0-9]*$/,Wte=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Vte=["<",">",'"',"`"," ","\r",`
`,"	"],Xte=["{","}","|","\\","^","`"].concat(Vte),mM=["'"].concat(Xte),sU=["%","/","?",";","#"].concat(mM),oU=["/","?","#"],Yte=255,aU=/^[+a-z0-9A-Z_-]{0,63}$/,Zte=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Kte={javascript:!0,"javascript:":!0},gM={javascript:!0,"javascript:":!0},ju={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vM=rU();function up(i,e,t){if(i&&typeof i=="object"&&i instanceof rs)return i;var n=new rs;return n.parse(i,e,t),n}rs.prototype.parse=function(i,e,t){if(typeof i!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var n=i.indexOf("?"),o=n!==-1&&n<i.indexOf("#")?"?":"#",a=i.split(o),l=/\\/g;a[0]=a[0].replace(l,"/"),i=a.join(o);var c=i;if(c=c.trim(),!t&&i.split("#").length===1){var A=Wte.exec(c);if(A)return this.path=c,this.href=c,this.pathname=A[1],A[2]?(this.search=A[2],e?this.query=vM.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=zte.exec(c);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,c=c.substr(u.length)}if(t||u||c.match(/^\/\/[^@/]+@[^@/]+/)){var f=c.substr(0,2)==="//";f&&!(u&&gM[u])&&(c=c.substr(2),this.slashes=!0)}if(!gM[u]&&(f||u&&!ju[u])){for(var d=-1,p=0;p<oU.length;p++){var m=c.indexOf(oU[p]);m!==-1&&(d===-1||m<d)&&(d=m)}var b,g;d===-1?g=c.lastIndexOf("@"):g=c.lastIndexOf("@",d),g!==-1&&(b=c.slice(0,g),c=c.slice(g+1),this.auth=decodeURIComponent(b)),d=-1;for(var p=0;p<sU.length;p++){var m=c.indexOf(sU[p]);m!==-1&&(d===-1||m<d)&&(d=m)}d===-1&&(d=c.length),this.host=c.slice(0,d),c=c.slice(d),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var I=this.hostname.split(/\./),p=0,v=I.length;p<v;p++){var E=I[p];if(E&&!E.match(aU)){for(var S="",C=0,M=E.length;C<M;C++)E.charCodeAt(C)>127?S+="x":S+=E[C];if(!S.match(aU)){var D=I.slice(0,p),T=I.slice(p+1),B=E.match(Zte);B&&(D.push(B[1]),T.unshift(B[2])),T.length&&(c="/"+T.join(".")+c),this.hostname=D.join(".");break}}}this.hostname.length>Yte?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=Gte.toASCII(this.hostname));var R=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+R,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),c[0]!=="/"&&(c="/"+c))}if(!Kte[h])for(var p=0,v=mM.length;p<v;p++){var _=mM[p];if(c.indexOf(_)!==-1){var Q=encodeURIComponent(_);Q===_&&(Q=escape(_)),c=c.split(_).join(Q)}}var W=c.indexOf("#");W!==-1&&(this.hash=c.substr(W),c=c.slice(0,W));var U=c.indexOf("?");if(U!==-1?(this.search=c.substr(U),this.query=c.substr(U+1),e&&(this.query=vM.parse(this.query)),c=c.slice(0,U)):e&&(this.search="",this.query={}),c&&(this.pathname=c),ju[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",H=this.search||"";this.path=R+H}return this.href=this.format(),this};function Jte(i){return typeof i=="string"&&(i=up(i)),i instanceof rs?i.format():rs.prototype.format.call(i)}rs.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=i+this.host:this.hostname&&(o=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(a=vM.stringify(this.query));var l=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ju[e])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),l&&l.charAt(0)!=="?"&&(l="?"+l),t=t.replace(/[?#]/g,function(c){return encodeURIComponent(c)}),l=l.replace("#","%23"),e+o+t+l+n};function jte(i,e){return up(i,!1,!0).resolve(e)}rs.prototype.resolve=function(i){return this.resolveObject(up(i,!1,!0)).format()};function qte(i,e){return i?up(i,!1,!0).resolveObject(e):e}rs.prototype.resolveObject=function(i){if(typeof i=="string"){var e=new rs;e.parse(i,!1,!0),i=e}for(var t=new rs,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];t[a]=this[a]}if(t.hash=i.hash,i.href==="")return t.href=t.format(),t;if(i.slashes&&!i.protocol){for(var l=Object.keys(i),c=0;c<l.length;c++){var A=l[c];A!=="protocol"&&(t[A]=i[A])}return ju[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(i.protocol&&i.protocol!==t.protocol){if(!ju[i.protocol]){for(var u=Object.keys(i),h=0;h<u.length;h++){var f=u[h];t[f]=i[f]}return t.href=t.format(),t}if(t.protocol=i.protocol,!i.host&&!gM[i.protocol]){for(var v=(i.pathname||"").split("/");v.length&&!(i.host=v.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),t.pathname=v.join("/")}else t.pathname=i.pathname;if(t.search=i.search,t.query=i.query,t.host=i.host||"",t.auth=i.auth,t.hostname=i.hostname||i.host,t.port=i.port,t.pathname||t.search){var d=t.pathname||"",p=t.search||"";t.path=d+p}return t.slashes=t.slashes||i.slashes,t.href=t.format(),t}var m=t.pathname&&t.pathname.charAt(0)==="/",b=i.host||i.pathname&&i.pathname.charAt(0)==="/",g=b||m||t.host&&i.pathname,w=g,I=t.pathname&&t.pathname.split("/")||[],v=i.pathname&&i.pathname.split("/")||[],E=t.protocol&&!ju[t.protocol];if(E&&(t.hostname="",t.port=null,t.host&&(I[0]===""?I[0]=t.host:I.unshift(t.host)),t.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(v[0]===""?v[0]=i.host:v.unshift(i.host)),i.host=null),g=g&&(v[0]===""||I[0]==="")),b)t.host=i.host||i.host===""?i.host:t.host,t.hostname=i.hostname||i.hostname===""?i.hostname:t.hostname,t.search=i.search,t.query=i.query,I=v;else if(v.length)I||(I=[]),I.pop(),I=I.concat(v),t.search=i.search,t.query=i.query;else if(i.search!=null){if(E){t.host=I.shift(),t.hostname=t.host;var S=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;S&&(t.auth=S.shift(),t.hostname=S.shift(),t.host=t.hostname)}return t.search=i.search,t.query=i.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!I.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=I.slice(-1)[0],M=(t.host||i.host||I.length>1)&&(C==="."||C==="..")||C==="",D=0,T=I.length;T>=0;T--)C=I[T],C==="."?I.splice(T,1):C===".."?(I.splice(T,1),D++):D&&(I.splice(T,1),D--);if(!g&&!w)for(;D--;D)I.unshift("..");g&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),M&&I.join("/").substr(-1)!=="/"&&I.push("");var B=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(E){t.hostname=B?"":I.length?I.shift():"",t.host=t.hostname;var S=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;S&&(t.auth=S.shift(),t.hostname=S.shift(),t.host=t.hostname)}return g=g||t.host&&I.length,g&&!B&&I.unshift(""),I.length>0?t.pathname=I.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=i.auth||t.auth,t.slashes=t.slashes||i.slashes,t.href=t.format(),t};rs.prototype.parseHost=function(){var i=this.host,e=Hte.exec(i);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(this.hostname=i)};qu.parse=up;qu.resolve=jte;qu.resolveObject=qte;qu.format=Jte;qu.Url=rs});var cU=yt((lU,cy)=>{(function(i,e){typeof define=="function"&&define.amd?define([],e):typeof cy=="object"&&cy.exports?cy.exports=e():i.xmlserializer=e()})(lU,function(){var i=function(d){return d.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},e=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n=function(d){var p=d.value;return" "+d.name+'="'+e(p)+'"'},o=function(d){var p=d.tagName;return d.namespaceURI==="http://www.w3.org/1999/xhtml"&&(p=p.toLowerCase()),p},a=function(d,p){var m=Array.prototype.map.call(d.attributes||d.attrs,function(b){return b.name}).indexOf("xmlns")>=0;return!m&&(p||d.namespaceURI!==d.parentNode.namespaceURI)?' xmlns="'+d.namespaceURI+'"':""},l=function(d){return Array.prototype.map.call(d.childNodes,function(p){return f(p)}).join("")},c=function(d,p){var m="<"+o(d);return m+=a(d,p),Array.prototype.forEach.call(d.attributes||d.attrs,function(b){m+=n(b)}),d.childNodes.length>0?(m+=">",m+=l(d),m+="</"+o(d)+">"):m+="/>",m},A=function(d){var p=d.nodeValue||d.value||"";return t(p)},u=function(d){return"<!--"+d.data.replace(/-/g,"&#45;")+"-->"},h=function(d){return"<![CDATA["+d.nodeValue+"]]>"},f=function(d,p){var m=p&&p.rootNode;if(d.nodeName==="#document"||d.nodeName==="#document-fragment")return l(d);if(d.tagName)return c(d,m);if(d.nodeName==="#text")return A(d);if(d.nodeName==="#comment")return u(d);if(d.nodeName==="#cdata-section")return h(d)};return{serializeToString:function(d){return i(f(d,{rootNode:!0}))}}})});var hU=yt(uU=>{"use strict";var $te=function(i){var e=new XMLSerializer;return Array.prototype.map.call(i.childNodes,function(t){return e.serializeToString(t)}).join("")},ene=function(i){if(i.documentElement.tagName==="parsererror"&&i.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml")return i.documentElement;if((i.documentElement.tagName==="xml"||i.documentElement.tagName==="html")&&i.documentElement.childNodes&&i.documentElement.childNodes.length>0&&i.documentElement.childNodes[0].nodeName==="parsererror")return i.documentElement.childNodes[0];if(i.documentElement.tagName==="html"&&i.documentElement.childNodes&&i.documentElement.childNodes.length>0&&i.documentElement.childNodes[0].nodeName==="body"&&i.documentElement.childNodes[0].childNodes&&i.documentElement.childNodes[0].childNodes.length&&i.documentElement.childNodes[0].childNodes[0].nodeName==="parsererror")return i.documentElement.childNodes[0].childNodes[0]},AU=[new RegExp(`^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)
?</div>`),new RegExp(`^(.+)
`)],tne=function(i){var e=$te(i),t,n;for(t=0;t<AU.length;t++)if(n=AU[t].exec(e),n)return n[1]},nne=function(i){var e;if(i===null)throw new Error("Parse error");var t=ene(i);if(t!==void 0)throw e=tne(t)||"Parse error",new Error(e)};uU.failOnParseError=function(i){return nne(i),i}});var hp=yt(Hi=>{"use strict";var ine=yM();Hi.getDocumentBaseUrl=function(i){return i.baseURI!=="about:blank"?i.baseURI:null};Hi.clone=function(i){var e={},t;for(t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e};Hi.cloneArray=function(i){return Array.prototype.slice.apply(i,[0])};Hi.joinUrl=function(i,e){return i?ine.resolve(i,e):e};Hi.isDataUri=function(i){return/^data:/.test(i)};Hi.collectAndReportErrors=function(i){var e=[];return Promise.all(i.map(function(t){return t.catch(function(n){e.push(n)})})).then(function(){return e})};var xM=null,rne=function(i,e){return e===!1||e==="none"||e==="repeated"?((xM===null||e!=="repeated")&&(xM=Date.now()),i+"?_="+xM):i};Hi.ajax=function(i,e){return new Promise(function(t,n){var o=new window.XMLHttpRequest,a=Hi.joinUrl(e.baseUrl,i),l,c=function(){n({msg:"Unable to load url",url:a})};l=rne(a,e.cache),o.addEventListener("load",function(){o.status===200||o.status===0?t(o.response):c()},!1),o.addEventListener("error",c,!1);try{o.open("GET",l,!0),o.overrideMimeType(e.mimeType),o.send(null)}catch{c()}})};Hi.binaryAjax=function(i,e){var t=Hi.clone(e);return t.mimeType="text/plain; charset=x-user-defined",Hi.ajax(i,t).then(function(n){for(var o="",a=0;a<n.length;a++)o+=String.fromCharCode(n.charCodeAt(a)&255);return o})};var sne=function(i){var e=function(t,n){return t.substring(0,n.length)===n};return e(i,"<?xml")||e(i,"<svg")?"image/svg+xml":"image/png"};Hi.getDataURIForImageURL=function(i,e){return Hi.binaryAjax(i,e).then(function(t){var n=btoa(t),o=sne(t);return"data:"+o+";base64,"+n})};var wM=[],one=function(i){return wM.indexOf(i)<0&&wM.push(i),wM.indexOf(i)};Hi.memoize=function(i,e,t){if(typeof t!="object")throw new Error("cacheBucket is not an object");return function(){var n=Array.prototype.slice.call(arguments),o=e(n),a=one(i),l;return t[a]&&t[a][o]?t[a][o]:(l=i.apply(null,n),t[a]=t[a]||{},t[a][o]=l,l)}}});var pU=yt(dU=>{"use strict";var fp=hp(),ane=function(i,e){var t=null;i.hasAttribute("src")?t=i.getAttribute("src"):i.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=i.getAttributeNS("http://www.w3.org/1999/xlink","href"):i.hasAttribute("href")&&(t=i.getAttribute("href"));var n=fp.getDocumentBaseUrl(i.ownerDocument),o=fp.clone(e);return!o.baseUrl&&n&&(o.baseUrl=n),fp.getDataURIForImageURL(t,o).then(function(a){return a},function(a){throw{resourceType:"image",url:a.url,msg:"Unable to load image "+a.url}})},lne=function(i){return i.filter(function(e){var t=null;return e.hasAttribute("src")?t=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(t=e.getAttribute("href")),t!==null&&!fp.isDataUri(t)})},cne=function(i){return Array.prototype.filter.call(i,function(e){return e.type==="image"})},fU=function(i){return Array.prototype.slice.call(i)};dU.inline=function(i,e){var t=fU(i.getElementsByTagName("img")),n=fU(i.getElementsByTagName("image")),o=cne(i.getElementsByTagName("input"));t=t.concat(n),t=t.concat(o);var a=lne(t);return fp.collectAndReportErrors(a.map(function(l){return ane(l,e).then(function(c){l.attributes.src?l.attributes.src.value=c:l.attributes["xlink:href"]?l.attributes["xlink:href"].value=c:l.attributes.href&&(l.attributes.href.value=c)})}))}});var gU=yt(mU=>{"use strict";var Ay=hp(),Ane=function(i,e){var t=i.attributes.src.value,n=Ay.getDocumentBaseUrl(i.ownerDocument),o=Ay.clone(e);return!o.baseUrl&&n&&(o.baseUrl=n),Ay.ajax(t,o).catch(function(a){throw{resourceType:"script",url:a.url,msg:"Unable to load script "+a.url}})},une=function(i){return i.replace(/<\//g,"<\\/")},hne=function(i,e){i.attributes.removeNamedItem("src"),i.textContent=une(e)},fne=function(i){var e=i.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})};mU.inline=function(i,e){var t=fne(i);return Ay.collectAndReportErrors(t.map(function(n){return Ane(n,e).then(function(o){hne(n,o)})}))}});var uy=yt(cl=>{"use strict";cl.unquoteString=function(i){var e=/^"(.*)"$/,t=/^'(.*)'$/;return e.test(i)?i.replace(e,"$1"):t.test(i)?i.replace(t,"$1"):i};cl.rulesForCssText=function(i){var e=document.implementation.createHTMLDocument(""),t=document.createElement("style"),n;return t.textContent=i,e.body.appendChild(t),n=t.sheet.cssRules,Array.prototype.slice.call(n)};cl.cssRulesToText=function(i){return i.reduce(function(e,t){return e+t.cssText},"")};cl.exchangeRule=function(i,e,t){var n=i.indexOf(e);i[n]=cl.rulesForCssText(t)[0]};cl.changeFontFaceRuleSrc=function(i,e,t){var n="@font-face { font-family: "+e.style.getPropertyValue("font-family")+"; ";e.style.getPropertyValue("font-style")&&(n+="font-style: "+e.style.getPropertyValue("font-style")+"; "),e.style.getPropertyValue("font-weight")&&(n+="font-weight: "+e.style.getPropertyValue("font-weight")+"; "),e.style.getPropertyValue("unicode-range")&&(n+="unicode-range: "+e.style.getPropertyValue("unicode-range")+"; "),n+="src: "+t+"}",cl.exchangeRule(i,e,n)}});var vU=yt(dp=>{"use strict";var dne=uy(),pne=function(i){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return i.replace(e,"$1")};dp.extractCssUrl=function(i){var e=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/,t;if(!e.test(i))throw new Error("Invalid url");return t=e.exec(i)[1],dne.unquoteString(pne(t))};var mne=function(i){var e=`\\s*(?:"[^"]*"|'[^']*'|[^\\(]+)\\s*`,t="(url\\("+e+"\\)|[^,\\s]+)",n="(?:\\s*"+t+")+",o="^\\s*("+n+")(?:\\s*,\\s*("+n+"))*\\s*$",a=new RegExp(n,"g"),l,c=[],A=function(u){var h=new RegExp(t,"g"),f=[],d;for(d=h.exec(u);d;)f.push(d[1]),d=h.exec(u);return f};if(i.match(new RegExp(o))){for(l=a.exec(i);l;)c.push(A(l[0])),l=a.exec(i);return c}return[]},gne=function(i){var e,t;for(e=0;e<i.length;e++)try{return t=dp.extractCssUrl(i[e]),{url:t,idx:e}}catch{}};dp.parse=function(i){var e=mne(i);return e.map(function(t){var n=gne(t);return n?{preUrl:t.slice(0,n.idx),url:n.url,postUrl:t.slice(n.idx+1)}:{preUrl:t}})};dp.serialize=function(i){var e=i.map(function(t){var n=[].concat(t.preUrl);return t.url&&n.push('url("'+t.url+'")'),t.postUrl&&(n=n.concat(t.postUrl)),n.join(" ")});return e.join(", ")}});var xU=yt((yU,bM)=>{(function(i){if(typeof yU=="object"&&typeof bM<"u")bM.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.cssFontFaceSrc=i()}})(function(){var i,e,t;return function n(o,a,l){function c(h,f){if(!a[h]){if(!o[h]){var d=typeof Li=="function"&&Li;if(!f&&d)return d(h,!0);if(A)return A(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var m=a[h]={exports:{}};o[h][0].call(m.exports,function(b){var g=o[h][1][b];return c(g||b)},m,m.exports,n,o,a,l)}return a[h].exports}for(var A=typeof Li=="function"&&Li,u=0;u<l.length;u++)c(l[u]);return c}({1:[function(n,o,a){"use strict";function l(u,h){function f(){this.constructor=u}f.prototype=h.prototype,u.prototype=new f}function c(u,h,f,d){this.message=u,this.expected=h,this.found=f,this.location=d,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c)}l(c,Error),c.buildMessage=function(u,h){var f={literal:function(I){return'"'+p(I.text)+'"'},class:function(I){var v="",E;for(E=0;E<I.parts.length;E++)v+=I.parts[E]instanceof Array?m(I.parts[E][0])+"-"+m(I.parts[E][1]):m(I.parts[E]);return"["+(I.inverted?"^":"")+v+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},other:function(I){return I.description}};function d(I){return I.charCodeAt(0).toString(16).toUpperCase()}function p(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+d(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+d(v)})}function m(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+d(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+d(v)})}function b(I){return f[I.type](I)}function g(I){var v=new Array(I.length),E,S;for(E=0;E<I.length;E++)v[E]=b(I[E]);if(v.sort(),v.length>0){for(E=1,S=1;E<v.length;E++)v[E-1]!==v[E]&&(v[S]=v[E],S++);v.length=S}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function w(I){return I?'"'+p(I)+'"':"end of input"}return"Expected "+g(u)+" but "+w(h)+" found."};function A(u,h){h=h!==void 0?h:{};var f={},d={start:We},p=We,m="",b=function(){return[]},g=",",w=K(",",!1),I=function(Z,L){return[Z].concat(L)},v=function(Z){return[Z]},E=function(Z,L){return{url:Z,format:L}},S=function(Z){return{url:Z}},C="url(",M=K("url(",!1),D=")",T=K(")",!1),B=function(Z){return Z},R="format(",P=K("format(",!1),_="local(",Q=K("local(",!1),W=function(Z){return{local:Z}},U=/^[^)]/,H=we([")"],!0,!1),O=function(Z){return Ce.extractValue(Z.join(""))},F=/^[ \t\r\n\f]/,z=we([" ","	","\r",`
`,"\f"],!1,!1),k=0,X=0,te=[{line:1,column:1}],ie=0,re=[],se=0,oe;if("startRule"in h){if(!(h.startRule in d))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');p=d[h.startRule]}function le(){return u.substring(X,k)}function be(){return ve(X,k)}function De(Z,L){throw L=L!==void 0?L:ve(X,k),Ie([de(Z)],u.substring(X,k),L)}function pe(Z,L){throw L=L!==void 0?L:ve(X,k),Pe(Z,L)}function K(Z,L){return{type:"literal",text:Z,ignoreCase:L}}function we(Z,L,N){return{type:"class",parts:Z,inverted:L,ignoreCase:N}}function me(){return{type:"any"}}function fe(){return{type:"end"}}function de(Z){return{type:"other",description:Z}}function Ne(Z){var L=te[Z],N;if(L)return L;for(N=Z-1;!te[N];)N--;for(L=te[N],L={line:L.line,column:L.column};N<Z;)u.charCodeAt(N)===10?(L.line++,L.column=1):L.column++,N++;return te[Z]=L,L}function ve(Z,L){var N=Ne(Z),V=Ne(L);return{start:{offset:Z,line:N.line,column:N.column},end:{offset:L,line:V.line,column:V.column}}}function Se(Z){k<ie||(k>ie&&(ie=k,re=[]),re.push(Z))}function Pe(Z,L){return new c(Z,null,null,L)}function Ie(Z,L,N){return new c(c.buildMessage(Z,L),Z,L,N)}function We(){var Z,L;return Z=j(),Z===f&&(Z=k,L=m,L!==f&&(X=Z,L=b()),Z=L),Z}function j(){var Z,L,N,V,q,ne;if(Z=k,L=G(),L!==f){for(N=[],V=_e();V!==f;)N.push(V),V=_e();if(N!==f)if(u.charCodeAt(k)===44?(V=g,k++):(V=f,se===0&&Se(w)),V!==f){for(q=[],ne=_e();ne!==f;)q.push(ne),ne=_e();q!==f?(ne=j(),ne!==f?(X=Z,L=I(L,ne),Z=L):(k=Z,Z=f)):(k=Z,Z=f)}else k=Z,Z=f;else k=Z,Z=f}else k=Z,Z=f;return Z===f&&(Z=k,L=G(),L!==f&&(X=Z,L=v(L)),Z=L),Z}function G(){var Z;return Z=Ae(),Z===f&&(Z=Ee()),Z}function Ae(){var Z,L,N,V;if(Z=k,L=Be(),L!==f){if(N=[],V=_e(),V!==f)for(;V!==f;)N.push(V),V=_e();else N=f;N!==f?(V=Re(),V!==f?(X=Z,L=E(L,V),Z=L):(k=Z,Z=f)):(k=Z,Z=f)}else k=Z,Z=f;return Z===f&&(Z=k,L=Be(),L!==f&&(X=Z,L=S(L)),Z=L),Z}function Be(){var Z,L,N,V;return Z=k,u.substr(k,4)===C?(L=C,k+=4):(L=f,se===0&&Se(M)),L!==f?(N=Fe(),N!==f?(u.charCodeAt(k)===41?(V=D,k++):(V=f,se===0&&Se(T)),V!==f?(X=Z,L=B(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Re(){var Z,L,N,V;return Z=k,u.substr(k,7)===R?(L=R,k+=7):(L=f,se===0&&Se(P)),L!==f?(N=Fe(),N!==f?(u.charCodeAt(k)===41?(V=D,k++):(V=f,se===0&&Se(T)),V!==f?(X=Z,L=B(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Ee(){var Z,L,N,V;return Z=k,u.substr(k,6)===_?(L=_,k+=6):(L=f,se===0&&Se(Q)),L!==f?(N=Fe(),N!==f?(u.charCodeAt(k)===41?(V=D,k++):(V=f,se===0&&Se(T)),V!==f?(X=Z,L=W(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Fe(){var Z,L,N;if(Z=k,L=[],U.test(u.charAt(k))?(N=u.charAt(k),k++):(N=f,se===0&&Se(H)),N!==f)for(;N!==f;)L.push(N),U.test(u.charAt(k))?(N=u.charAt(k),k++):(N=f,se===0&&Se(H));else L=f;return L!==f&&(X=Z,L=O(L)),Z=L,Z}function _e(){var Z;return F.test(u.charAt(k))?(Z=u.charAt(k),k++):(Z=f,se===0&&Se(z)),Z}var Ce=n("../util");if(oe=p(),oe!==f&&k===u.length)return oe;throw oe!==f&&k<u.length&&Se(fe()),Ie(re,ie<u.length?u.charAt(ie):null,ie<u.length?ve(ie,ie+1):ve(ie,ie))}o.exports={SyntaxError:c,parse:A}},{"../util":3}],2:[function(n,o,a){var l=n("./grammar");a.SyntaxError=function(c,A){this.message=c,this.offset=A},a.parse=function(c){try{return l.parse(c)}catch(A){throw new a.SyntaxError(A.message,A.offset)}},a.serialize=function(c){return c.map(function(A){var u;return A.url?(u='url("'+A.url+'")',A.format&&(u+=' format("'+A.format+'")')):u='local("'+A.local+'")',u}).join(", ")}},{"./grammar":1}],3:[function(n,o,a){var l=function(A){var u=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return A.replace(u,"$1")},c=function(A){var u=/^"(.*)"$/,h=/^'(.*)'$/;return u.test(A)?A.replace(u,"$1"):h.test(A)?A.replace(h,"$1"):A};a.extractValue=function(A){return c(l(A))}},{}]},{},[2])(2)})});var DU=yt($u=>{"use strict";var Ps=hp(),pp=uy(),hy=vU(),fy=xU(),bU=function(i,e,t){i.style.setProperty(e,t,i.style.getPropertyPriority(e))},CU=function(i){return i.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})},SU=function(i){var e=[];return i.forEach(function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})}),e},EU=function(i){return i.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})},IU=function(i){return i.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})},MU=function(i){var e=[];return i.forEach(function(t,n){t.url&&!Ps.isDataUri(t.url)&&e.push(n)}),e},TU=function(i){var e=[];return i.forEach(function(t,n){t.url&&!Ps.isDataUri(t.url)&&e.push(n)}),e};$u.adjustPathsOfCssResources=function(i,e){var t=CU(e),n=SU(t),o=!1;return n.forEach(function(a){var l=hy.parse(a.value),c=MU(l),A;c.length>0&&(c.forEach(function(u){var h=l[u].url,f=Ps.joinUrl(i,h);l[u].url=f}),A=hy.serialize(l),bU(a.rule,a.property,A),o=!0)}),EU(e).forEach(function(a){var l=a.style.getPropertyValue("src"),c,A;try{c=fy.parse(l)}catch{return}A=TU(c),A.length>0&&(A.forEach(function(u){var h=c[u].url,f=Ps.joinUrl(i,h);c[u].url=f}),pp.changeFontFaceRuleSrc(e,a,fy.serialize(c)),o=!0)}),IU(e).forEach(function(a){var l=a.href,c=Ps.joinUrl(i,l);pp.exchangeRule(e,a,"@import url("+c+");"),o=!0}),o};var wU=function(i,e,t){var n=i.indexOf(e);i.splice(n,1),t.forEach(function(o,a){i.splice(n+a,0,o)})},vne=function(i,e,t,n){var o=e.href,a;return o=pp.unquoteString(o),a=Ps.joinUrl(n.baseUrl,o),t.indexOf(a)>=0?(wU(i,e,[]),Promise.resolve([])):(t.push(a),Ps.ajax(o,n).then(function(l){var c=pp.rulesForCssText(l);return $u.loadCSSImportsForRules(c,t,n).then(function(A){return $u.adjustPathsOfCssResources(o,c),wU(i,e,c),A.errors})},function(l){throw{resourceType:"stylesheet",url:l.url,msg:"Unable to load stylesheet "+l.url}}))};$u.loadCSSImportsForRules=function(i,e,t){var n=IU(i),o=[],a=!1;return Promise.all(n.map(function(l){return vne(i,l,e,t).then(function(c){o=o.concat(c),a=!0},function(c){o.push(c)})})).then(function(){return{hasChanges:a,errors:o}})};var yne=function(i,e){var t=hy.parse(i),n=MU(t),o=!1;return Ps.collectAndReportErrors(n.map(function(a){var l=t[a].url;return Ps.getDataURIForImageURL(l,e).then(function(c){t[a].url=c,o=!0},function(c){throw{resourceType:"backgroundImage",url:c.url,msg:"Unable to load background-image "+c.url}})})).then(function(a){return{backgroundValue:hy.serialize(t),hasChanges:o,errors:a}})},xne=function(i,e){var t=CU(i),n=SU(t),o=[],a=!1;return Promise.all(n.map(function(l){return yne(l.value,e).then(function(c){c.hasChanges&&(bU(l.rule,l.property,c.backgroundValue),a=!0),o=o.concat(c.errors)})})).then(function(){return{hasChanges:a,errors:o}})},wne=function(i,e){var t=!1,n,o;try{n=fy.parse(i)}catch{n=[]}return o=TU(n),Ps.collectAndReportErrors(o.map(function(a){var l=n[a],c=l.format||"woff";return Ps.binaryAjax(l.url,e).then(function(A){var u=btoa(A);l.url="data:font/"+c+";base64,"+u,t=!0},function(A){throw{resourceType:"fontFace",url:A.url,msg:"Unable to load font-face "+A.url}})})).then(function(a){return{srcDeclarationValue:fy.serialize(n),hasChanges:t,errors:a}})},bne=function(i,e){var t=EU(i),n=[],o=!1;return Promise.all(t.map(function(a){var l=a.style.getPropertyValue("src");return wne(l,e).then(function(c){c.hasChanges&&(pp.changeFontFaceRuleSrc(i,a,c.srcDeclarationValue),o=!0),n=n.concat(c.errors)})})).then(function(){return{hasChanges:o,errors:n}})};$u.loadAndInlineCSSResourcesForRules=function(i,e){var t=!1,n=[];return Promise.all([xne,bne].map(function(o){return o(i,e).then(function(a){t=t||a.hasChanges,n=n.concat(a.errors)})})).then(function(){return{hasChanges:t,errors:n}})}});var LU=yt(uo=>{"use strict";var ta=hp(),Cne=pU(),Sne=gU(),mp=DU(),dy=uy(),Ene=function(i){return ta.joinUrl(i,".")},Ine=function(i){var e=i.map(function(t,n){return n===i.length-1&&(t={baseUrl:Ene(t.baseUrl)}),JSON.stringify(t)});return e},BU=function(i,e){return e.cache!==!1&&e.cache!=="none"&&e.cacheBucket?ta.memoize(i,Ine,e.cacheBucket):i},Mne=function(i,e,t){var n=dy.rulesForCssText(i);return mp.loadCSSImportsForRules(n,e,t).then(function(o){return mp.loadAndInlineCSSResourcesForRules(n,t).then(function(a){var l=o.errors.concat(a.errors),c=o.hasChanges||a.hasChanges;return c&&(i=dy.cssRulesToText(n)),{hasChanges:c,content:i,errors:l}})})},Tne=function(i,e,t){var n=i.textContent,o=BU(Mne,e);return o(n,t,e).then(function(a){return a.hasChanges&&(i.childNodes[0].nodeValue=a.content),ta.cloneArray(a.errors)})},Dne=function(i){var e=i.getElementsByTagName("style");return Array.prototype.filter.call(e,function(t){return!t.attributes.type||t.attributes.type.value==="text/css"})};uo.loadAndInlineStyles=function(i,e){var t=Dne(i),n=[],o=[],a;return a=ta.clone(e),a.baseUrl=a.baseUrl||ta.getDocumentBaseUrl(i),Promise.all(t.map(function(l){return Tne(l,a,o).then(function(c){n=n.concat(c)})})).then(function(){return n})};var Bne=function(i,e){var t=i.parentNode,n;e=e.trim(),e&&(n=i.ownerDocument.createElement("style"),n.type="text/css",n.appendChild(i.ownerDocument.createTextNode(e)),t.insertBefore(n,i)),t.removeChild(i)},Lne=function(i,e){return ta.ajax(i,e).then(function(t){var n=dy.rulesForCssText(t);return{content:t,cssRules:n}}).then(function(t){var n=mp.adjustPathsOfCssResources(i,t.cssRules);return{content:t.content,cssRules:t.cssRules,hasChanges:n}}).then(function(t){return mp.loadCSSImportsForRules(t.cssRules,[],e).then(function(n){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||n.hasChanges,errors:n.errors}})}).then(function(t){return mp.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(n){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||n.hasChanges,errors:t.errors.concat(n.errors)}})}).then(function(t){var n=t.content;return t.hasChanges&&(n=dy.cssRulesToText(t.cssRules)),{content:n,errors:t.errors}})},Rne=function(i,e){var t=i.attributes.href.value,n=ta.getDocumentBaseUrl(i.ownerDocument),o=ta.clone(e);!o.baseUrl&&n&&(o.baseUrl=n);var a=BU(Lne,e);return a(t,o).then(function(l){return{content:l.content,errors:ta.cloneArray(l.errors)}})},kne=function(i){var e=i.getElementsByTagName("link");return Array.prototype.filter.call(e,function(t){return t.attributes.rel&&t.attributes.rel.value==="stylesheet"&&(!t.attributes.type||t.attributes.type.value==="text/css")})};uo.loadAndInlineCssLinks=function(i,e){var t=kne(i),n=[];return Promise.all(t.map(function(o){return Rne(o,e).then(function(a){Bne(o,a.content+`
`),n=n.concat(a.errors)},function(a){n.push({resourceType:"stylesheet",url:a.url,msg:"Unable to load stylesheet "+a.url})})})).then(function(){return n})};uo.loadAndInlineImages=Cne.inline;uo.loadAndInlineScript=Sne.inline;uo.inlineReferences=function(i,e){var t=[],n=[uo.loadAndInlineImages,uo.loadAndInlineStyles,uo.loadAndInlineCssLinks];return e.inlineScripts!==!1&&n.push(uo.loadAndInlineScript),Promise.all(n.map(function(o){return o(i,e).then(function(a){t=t.concat(a)})})).then(function(){return t})}});var kU=yt((RU,py)=>{(function(i,e){i===void 0&&window!==void 0&&(i=window),typeof define=="function"&&define.amd?define(["url","xmlserializer","sane-domparser-error","inlineresources"],function(t,n,o,a){return i.rasterizeHTML=e(t,n,o,a)}):typeof py=="object"&&py.exports?py.exports=e(yM(),cU(),hU(),LU()):i.rasterizeHTML=e(i.url,i.xmlserializer,i.sanedomparsererror,i.inlineresources)})(RU,function(i,e,t,n){var o=function(p){"use strict";var m={},b=[];m.joinUrl=function(I,v){return I?p.resolve(I,v):v},m.getConstantUniqueIdFor=function(I){return b.indexOf(I)<0&&b.push(I),b.indexOf(I)},m.clone=function(I){var v={},E;for(E in I)I.hasOwnProperty(E)&&(v[E]=I[E]);return v};var g=function(I){return typeof I=="object"&&I!==null},w=function(I){return g(I)&&Object.prototype.toString.apply(I).match(/\[object (Canvas|HTMLCanvasElement)\]/i)};return m.parseOptionalParameters=function(I){var v={canvas:null,options:{}};return I[0]==null||w(I[0])?(v.canvas=I[0]||null,v.options=m.clone(I[1])):v.options=m.clone(I[0]),v},m}(i),a=function(p){"use strict";var m={},b=function(g,w,I){var v=g[w];return g[w]=function(){var E=Array.prototype.slice.call(arguments);return I.apply(this,[E,v])},v};return m.baseUrlRespectingXhr=function(g,w){var I=function(){var v=new g;return b(v,"open",function(E,S){var C=E.shift(),M=E.shift(),D=p.joinUrl(w,M);return S.apply(this,[C,D].concat(E))}),v};return I},m.finishNotifyingXhr=function(g){var w=0,I=0,v=!1,E,S=new Promise(function(M){E=function(){var D=w-I;D<=0&&v&&M({totalCount:w})}}),C=function(){var M=new g;return b(M,"send",function(D,T){return w+=1,T.apply(this,arguments)}),M.addEventListener("load",function(){I+=1,E()}),M};return C.waitForRequestsToFinish=function(){return v=!0,E(),S},C},m}(o),l=function(){"use strict";var p={},m=function(C){return Array.prototype.slice.call(C)};p.addClassName=function(C,M){C.className+=" "+M},p.addClassNameRecursively=function(C,M){p.addClassName(C,M),C.parentNode!==C.ownerDocument&&p.addClassNameRecursively(C.parentNode,M)};var b=function(C,M){var D=C.parentStyleSheet,T=m(D.cssRules).indexOf(C);D.insertRule(M,T+1),D.deleteRule(T)},g=function(C,M){var D=C.cssText.replace(/^[^\{]+/,""),T=M+" "+D;b(C,T)},w=function(C){return m(C).reduce(function(M,D){return M+D.cssText},"")},I=function(C){C.textContent=w(C.sheet.cssRules)},v=function(C){var M=document.implementation.createHTMLDocument(""),D=document.createElement("style");D.textContent=C.textContent,M.body.appendChild(D),C.sheet=D.sheet},E=function(C){return"((?:^|[^.#:\\w])|(?=\\W))("+C.join("|")+")(?=\\W|$)"},S=function(C,M,D){var T=E(M);m(C.querySelectorAll("style")).forEach(function(B){typeof B.sheet>"u"&&v(B);var R=m(B.sheet.cssRules).filter(function(P){return P.selectorText&&new RegExp(T,"i").test(P.selectorText)});R.length&&(R.forEach(function(P){var _=P.selectorText.replace(new RegExp(T,"gi"),function(Q,W,U){return W+D(U)});_!==P.selectorText&&g(P,_)}),I(B))})};return p.rewriteCssSelectorWith=function(C,M,D){S(C,[M],function(){return D})},p.lowercaseCssTypeSelectors=function(C,M){S(C,M,function(D){return D.toLowerCase()})},p.findHtmlOnlyNodeNames=function(C){var M=C.ownerDocument.createTreeWalker(C,NodeFilter.SHOW_ELEMENT),D={},T={},B;do B=M.currentNode.tagName.toLowerCase(),M.currentNode.namespaceURI==="http://www.w3.org/1999/xhtml"?D[B]=!0:T[B]=!0;while(M.nextNode());return Object.keys(D).filter(function(R){return!T[R]})},p}(),c=function(p){"use strict";var m={},b=function(w){return Array.prototype.slice.call(w)},g={active:!0,hover:!0,focus:!1,target:!1};return m.fakeUserAction=function(w,I,v){var E=w.querySelector(I),S=":"+v,C="rasterizehtml"+v;E&&(g[v]?p.addClassNameRecursively(E,C):p.addClassName(E,C),p.rewriteCssSelectorWith(w,S,"."+C))},m.persistInputValues=function(w){var I=w.querySelectorAll("input"),v=w.querySelectorAll("textarea"),E=function(S){return S.type==="checkbox"||S.type==="radio"};b(I).filter(E).forEach(function(S){S.checked?S.setAttribute("checked",""):S.removeAttribute("checked")}),b(I).filter(function(S){return!E(S)}).forEach(function(S){S.setAttribute("value",S.value)}),b(v).forEach(function(S){S.textContent=S.value})},m.rewriteTagNameSelectorsToLowerCase=function(w){p.lowercaseCssTypeSelectors(w,p.findHtmlOnlyNodeNames(w))},m}(l),A=function(p,m,b,g){"use strict";var w={},I=function(U,H,O,F){var z=U.createElement(H);return z.style.visibility="hidden",z.style.width=O+"px",z.style.height=F+"px",z.style.position="absolute",z.style.top=-1e4-F+"px",z.style.left=-1e4-O+"px",U.getElementsByTagName("body")[0].appendChild(z),z},v=function(U){return U>0?new Promise(function(H){setTimeout(H,U)}):Promise.resolve()};w.executeJavascript=function(U,H){return new Promise(function(O){var F=I(g.document,"iframe",H.width,H.height),z=U.outerHTML,k=[],X=H.executeJsTimeout||0,te=function(){g.document.getElementsByTagName("body")[0].removeChild(F)},ie=function(){var le=F.contentDocument;O({document:le,errors:k,cleanUp:te})},re=F.contentWindow.XMLHttpRequest,se=m.finishNotifyingXhr(re),oe=m.baseUrlRespectingXhr(se,H.baseUrl);F.onload=function(){v(X).then(se.waitForRequestsToFinish).then(ie)},F.contentDocument.open(),F.contentWindow.XMLHttpRequest=oe,F.contentWindow.onerror=function(le){k.push({resourceType:"scriptExecution",msg:le})},F.contentDocument.write("<!DOCTYPE html>"),F.contentDocument.write(z),F.contentDocument.close()})};var E=function(U,H,O){var F=U.createElement("iframe");return F.style.width=H+"px",F.style.height=O+"px",F.style.visibility="hidden",F.style.position="absolute",F.style.top=-1e4-O+"px",F.style.left=-1e4-H+"px",F.style.borderWidth=0,F.sandbox="allow-same-origin",F.scrolling="no",F},S=function(U,H,O){var F=Math.floor(U/O),z=Math.floor(H/O);return E(g.document,F,z)},C=function(U,H,O,F){return{width:Math.max(U.width*F,H),height:Math.max(U.height*F,O)}},M=function(U,H){var O=U.querySelector(H);if(O)return O;if(U.ownerDocument.querySelector(H)===U)return U;throw{message:"Clipping selector not found"}},D=function(U,H,O,F,z){var k=Math.max(U.scrollWidth,U.clientWidth),X=Math.max(U.scrollHeight,U.clientHeight),te,ie,re,se,oe,le,be,De;return H?(le=M(U,H),be=le.getBoundingClientRect(),te=be.top,ie=be.left,re=be.width,se=be.height):(te=0,ie=0,re=k,se=X),De=C({width:re,height:se},O,F,z),oe=g.getComputedStyle(U.ownerDocument.documentElement).fontSize,{left:ie,top:te,width:De.width,height:De.height,viewportWidth:k,viewportHeight:X,rootFontSize:oe}},T=function(U,H){var O=U.tagName;return H.querySelector(O)},B=function(U){var H=U.tagName.toLowerCase();return H==="html"||H==="body"?U.outerHTML:'<body style="margin: 0;">'+U.outerHTML+"</body>"};w.calculateDocumentContentSize=function(U,H){return new Promise(function(O,F){var z=H.zoom||1,k;k=S(H.width,H.height,z),g.document.getElementsByTagName("body")[0].appendChild(k),k.onload=function(){var X=k.contentDocument,te;try{te=D(T(U,X),H.clip,H.width,H.height,z),O(te)}catch(ie){F(ie)}finally{g.document.getElementsByTagName("body")[0].removeChild(k)}},k.contentDocument.open(),k.contentDocument.write("<!DOCTYPE html>"),k.contentDocument.write(B(U)),k.contentDocument.close()})},w.parseHtmlFragment=function(U){var H=g.document.implementation.createHTMLDocument("");H.documentElement.innerHTML=U;var O=H.querySelector("body").firstChild;if(!O)throw"Invalid source";return O};var R=function(U,H){var O=/<html((?:\s+[^>]*)?)>/im.exec(H),F=g.document.implementation.createHTMLDocument(""),z,k,X,te;if(O)for(z="<div"+O[1]+"></div>",F.documentElement.innerHTML=z,X=F.querySelector("div"),k=0;k<X.attributes.length;k++)te=X.attributes[k],U.documentElement.setAttribute(te.name,te.value)};w.parseHTML=function(U){var H=g.document.implementation.createHTMLDocument("");return H.documentElement.innerHTML=U,R(H,U),H};var P=function(U){try{return b.failOnParseError(U)}catch(H){throw{message:"Invalid source",originalError:H}}};w.validateXHTML=function(U){var H=new DOMParser,O=H.parseFromString(U,"application/xml");P(O)};var _=null,Q=function(U,H){return H==="none"||H==="repeated"?((_===null||H!=="repeated")&&(_=Date.now()),U+"?_="+_):U},W=function(U,H){return new Promise(function(O,F){var z=new window.XMLHttpRequest,k=p.joinUrl(H.baseUrl,U),X=Q(k,H.cache),te=function(ie){F({message:"Unable to load page",originalError:ie})};z.addEventListener("load",function(){z.status===200||z.status===0?O(z.responseXML):te(z.statusText)},!1),z.addEventListener("error",function(ie){te(ie)},!1);try{z.open("GET",X,!0),z.responseType="document",z.send(null)}catch(ie){te(ie)}})};return w.loadDocument=function(U,H){return W(U,H).then(function(O){return P(O)})},w}(o,a,t,window),u=function(p){"use strict";var m={},b=function(T,B){return B?URL.createObjectURL(new Blob([T],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(T)},g=function(T){T instanceof Blob&&URL.revokeObjectURL(T)},w='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',I=function(T){return new Promise(function(B,R){var P=document.createElement("canvas"),_=new Image;_.onload=function(){var Q=P.getContext("2d");try{Q.drawImage(_,0,0),P.toDataURL("image/png"),B(!0)}catch{B(!1)}},_.onerror=R,_.src=T})},v=function(){var T=b(w,!0);return I(T).then(function(B){return g(T),B?!1:I(b(w,!1)).then(function(R){return R})},function(){return!1})},E=function(){if(p.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch{}return!1},S=function(){return new Promise(function(T,B){E()&&p.URL?v().then(function(R){T(!R)},function(){B()}):T(!1)})},C,M=function(){return C===void 0&&(C=S()),C},D=function(T){return M().then(function(B){return b(T,B)})};return m.renderSvg=function(T){return new Promise(function(B,R){var P,_,Q=function(){_.onload=null,_.onerror=null},W=function(){P&&g(P)};_=new Image,_.onload=function(){Q(),W(),B(_)},_.onerror=function(){W(),R()},D(T).then(function(U){P=U,_.src=P},R)})},m}(window),h=function(p,m,b,g){"use strict";var w={},I=function(T,B){var R=B||1,P={width:T.width,height:T.height,"font-size":T.rootFontSize};return R!==1&&(P.style="transform:scale("+R+"); transform-origin: 0 0;"),P},v=function(T){var B,R,P,_;B=Math.round(T.viewportWidth),R=Math.round(T.viewportHeight),P=-T.left,_=-T.top;var Q={x:P,y:_,width:B,height:R};return Q},E=function(T){var B=T.style||"";T.style=B+"float: left;"},S=function(T){T.externalResourcesRequired=!0},C=function(){return'<style scoped="">html::-webkit-scrollbar { display: none; }</style>'},M=function(T){var B=Object.keys(T);return B.length?" "+B.map(function(R){return R+'="'+T[R]+'"'}).join(" "):""},D=function(T,B,R){var P=g.serializeToString(T);m.validateXHTML(P);var _=v(B);return E(_),S(_),'<svg xmlns="http://www.w3.org/2000/svg"'+M(I(B,R))+">"+C()+"<foreignObject"+M(_)+">"+P+"</foreignObject></svg>"};return w.getSvgForDocument=function(T,B,R){return b.rewriteTagNameSelectorsToLowerCase(T),D(T,B,R)},w.drawDocumentAsSvg=function(T,B){return["hover","active","focus","target"].forEach(function(R){B[R]&&b.fakeUserAction(T,B[R],R)}),m.calculateDocumentContentSize(T,B).then(function(R){return w.getSvgForDocument(T,R,B.zoom)})},w}(o,A,c,e),f=function(p,m,b,g,w,I){"use strict";var v={},E=function(T){return{message:"Error rendering page",originalError:T}},S=function(T){return w.renderSvg(T).then(function(B){return{image:B,svg:T}},function(B){throw E(B)})},C=function(T,B){try{B.getContext("2d").drawImage(T,0,0)}catch(R){throw E(R)}},M=function(T,B,R){return g.drawDocumentAsSvg(T,R).then(S).then(function(P){return B&&C(P.image,B),P})},D=function(T,B){return m.executeJavascript(T,B).then(function(R){var P=R.document;return b.persistInputValues(P),{document:P,errors:R.errors,cleanUp:R.cleanUp}})};return v.rasterize=function(T,B,R){var P;return P=p.clone(R),P.inlineScripts=R.executeJs===!0,I.inlineReferences(T,P).then(function(_){return R.executeJs?D(T,R).then(function(Q){return{element:Q.document.documentElement,errors:_.concat(Q.errors),cleanUp:Q.cleanUp}}):{element:T,errors:_,cleanUp:function(){}}}).then(function(_){return M(_.element,B,R).then(function(Q){return _.cleanUp(),{image:Q.image,svg:Q.svg,errors:_.errors}})})},v}(o,A,c,h,u,n),d=function(p,m,b){"use strict";var g={},w=function(C,M){var D=300,T=200,B=C?C.width:D,R=C?C.height:T,P=M.width!==void 0?M.width:B,_=M.height!==void 0?M.height:R;return{width:P,height:_}},I=function(C){var M=w(C.canvas,C.options),D;return D=p.clone(C.options),D.width=M.width,D.height=M.height,D};g.drawDocument=function(){var C=arguments[0],M=Array.prototype.slice.call(arguments,1),D=p.parseOptionalParameters(M),T=C.documentElement?C.documentElement:C;return b.rasterize(T,D.canvas,I(D))};var v=function(C,M,D){var T=m.parseHTML(C);return g.drawDocument(T,M,D)};g.drawHTML=function(){var C=arguments[0],M=Array.prototype.slice.call(arguments,1),D=p.parseOptionalParameters(M);return v(C,D.canvas,D.options)};var E=function(C,M,D){var T=document.implementation.createHTMLDocument("");T.replaceChild(C.documentElement,T.documentElement);var B=D?p.clone(D):{};return D.baseUrl||(B.baseUrl=M),{document:T,options:B}},S=function(C,M,D){return m.loadDocument(C,D).then(function(T){var B=E(T,C,D);return g.drawDocument(B.document,M,B.options)})};return g.drawURL=function(){var C=arguments[0],M=Array.prototype.slice.call(arguments,1),D=p.parseOptionalParameters(M);return S(C,D.canvas,D.options)},g}(o,A,f);return d})});var Ta={};fl(Ta,{ACESFilmicToneMapping:()=>lg,AddEquation:()=>Sl,AddOperation:()=>ND,AdditiveAnimationBlendMode:()=>tb,AdditiveBlending:()=>Io,AlphaFormat:()=>HD,AlwaysCompare:()=>lB,AlwaysDepth:()=>DD,AlwaysStencilFunc:()=>eB,AmbientLight:()=>Ca,AmbientLightProbe:()=>vw,AnimationAction:()=>sg,AnimationClip:()=>fs,AnimationLoader:()=>lw,AnimationMixer:()=>Xl,AnimationObjectGroup:()=>Sw,AnimationUtils:()=>x8,ArcCurve:()=>Rm,ArrayCamera:()=>Mm,ArrowHelper:()=>Hw,Audio:()=>ig,AudioAnalyser:()=>bw,AudioContext:()=>tf,AudioListener:()=>xw,AudioLoader:()=>mw,AxesHelper:()=>Ww,BackSide:()=>Yn,BasicDepthPacking:()=>qD,BasicShadowMap:()=>l4,Bone:()=>Vs,BooleanKeyframeTrack:()=>Lo,Box2:()=>Bw,Box3:()=>Cn,Box3Helper:()=>Gw,BoxGeometry:()=>En,BoxHelper:()=>Ow,BufferAttribute:()=>it,BufferGeometry:()=>qe,BufferGeometryLoader:()=>ng,ByteType:()=>GD,Cache:()=>Hl,Camera:()=>pA,CameraHelper:()=>Uw,CanvasTexture:()=>Uh,CapsuleGeometry:()=>Nm,CatmullRomCurve3:()=>Ol,CineonToneMapping:()=>UD,CircleGeometry:()=>Fm,ClampToEdgeWrapping:()=>Bn,Clock:()=>Ea,Color:()=>ke,ColorKeyframeTrack:()=>jh,ColorManagement:()=>Fr,CompressedArrayTexture:()=>iw,CompressedTexture:()=>Qh,CompressedTextureLoader:()=>cw,ConeGeometry:()=>Qm,CubeCamera:()=>Em,CubeReflectionMapping:()=>ha,CubeRefractionMapping:()=>fa,CubeTexture:()=>Nl,CubeTextureLoader:()=>Aw,CubeUVReflectionMapping:()=>DA,CubicBezierCurve:()=>Oh,CubicBezierCurve3:()=>km,CubicInterpolant:()=>Jm,CullFaceBack:()=>Ax,CullFaceFront:()=>pD,CullFaceFrontBack:()=>a4,CullFaceNone:()=>dD,Curve:()=>Qi,CurvePath:()=>_m,CustomBlending:()=>mD,CustomToneMapping:()=>OD,CylinderGeometry:()=>yr,Cylindrical:()=>Dw,Data3DTexture:()=>kh,DataArrayTexture:()=>hA,DataTexture:()=>zs,DataTextureLoader:()=>uw,DataUtils:()=>fO,DecrementStencilOp:()=>g4,DecrementWrapStencilOp:()=>y4,DefaultLoadingManager:()=>SB,DepthFormat:()=>Os,DepthStencilFormat:()=>kl,DepthTexture:()=>ma,DirectionalLight:()=>ps,DirectionalLightHelper:()=>Qw,DiscreteInterpolant:()=>jm,DisplayP3ColorSpace:()=>rb,DodecahedronGeometry:()=>Um,DoubleSide:()=>zt,DstAlphaFactor:()=>CD,DstColorFactor:()=>ED,DynamicCopyUsage:()=>k4,DynamicDrawUsage:()=>RA,DynamicReadUsage:()=>B4,EdgesGeometry:()=>Om,EllipseCurve:()=>xA,EqualCompare:()=>iB,EqualDepth:()=>LD,EqualStencilFunc:()=>C4,EquirectangularReflectionMapping:()=>Mo,EquirectangularRefractionMapping:()=>Mh,Euler:()=>Ki,EventDispatcher:()=>Ni,ExtrudeGeometry:()=>Gm,FileLoader:()=>Jn,Float16BufferAttribute:()=>Xx,Float32BufferAttribute:()=>He,Float64BufferAttribute:()=>Yx,FloatType:()=>Gr,Fog:()=>Dm,FogExp2:()=>gA,FramebufferTexture:()=>nw,FrontSide:()=>Pi,Frustum:()=>pa,GLBufferAttribute:()=>Mw,GLSL1:()=>_4,GLSL3:()=>AA,GreaterCompare:()=>sB,GreaterDepth:()=>kD,GreaterEqualCompare:()=>aB,GreaterEqualDepth:()=>RD,GreaterEqualStencilFunc:()=>M4,GreaterStencilFunc:()=>E4,GridHelper:()=>Nw,Group:()=>cn,HalfFloatType:()=>bn,HemisphereLight:()=>Vl,HemisphereLightHelper:()=>_w,HemisphereLightProbe:()=>gw,IcosahedronGeometry:()=>bA,ImageBitmapLoader:()=>ef,ImageLoader:()=>Wl,ImageUtils:()=>Rh,IncrementStencilOp:()=>m4,IncrementWrapStencilOp:()=>v4,InstancedBufferAttribute:()=>vr,InstancedBufferGeometry:()=>Sa,InstancedInterleavedBuffer:()=>nf,InstancedMesh:()=>vA,Int16BufferAttribute:()=>Wx,Int32BufferAttribute:()=>Vx,Int8BufferAttribute:()=>Gx,IntType:()=>Kw,InterleavedBuffer:()=>Ji,InterleavedBufferAttribute:()=>Ln,Interpolant:()=>Bo,InterpolateDiscrete:()=>Pl,InterpolateLinear:()=>da,InterpolateSmooth:()=>xm,InvertStencilOp:()=>x4,KeepStencilOp:()=>wm,KeyframeTrack:()=>xr,LOD:()=>Lm,LatheGeometry:()=>Wh,Layers:()=>fA,LessCompare:()=>nB,LessDepth:()=>BD,LessEqualCompare:()=>rB,LessEqualDepth:()=>bm,LessEqualStencilFunc:()=>S4,LessStencilFunc:()=>b4,Light:()=>Zs,LightProbe:()=>MA,Line:()=>ji,Line3:()=>Lw,LineBasicMaterial:()=>Rn,LineCurve:()=>wA,LineCurve3:()=>Pm,LineDashedMaterial:()=>Km,LineLoop:()=>yA,LineSegments:()=>qi,LinearEncoding:()=>ib,LinearFilter:()=>St,LinearInterpolant:()=>Jh,LinearMipMapLinearFilter:()=>f4,LinearMipMapNearestFilter:()=>h4,LinearMipmapLinearFilter:()=>us,LinearMipmapNearestFilter:()=>of,LinearSRGBColorSpace:()=>gr,LinearToneMapping:()=>FD,Loader:()=>An,LoaderUtils:()=>ms,LoadingManager:()=>qh,LoopOnce:()=>KD,LoopPingPong:()=>jD,LoopRepeat:()=>JD,LuminanceAlphaFormat:()=>VD,LuminanceFormat:()=>WD,MOUSE:()=>Ia,Material:()=>Sn,MaterialLoader:()=>tg,MathUtils:()=>ii,Matrix3:()=>dt,Matrix4:()=>Qe,MaxEquation:()=>dx,Mesh:()=>Xe,MeshBasicMaterial:()=>Qt,MeshDepthMaterial:()=>Ql,MeshDistanceMaterial:()=>Ul,MeshLambertMaterial:()=>IA,MeshMatcapMaterial:()=>Zm,MeshNormalMaterial:()=>EA,MeshPhongMaterial:()=>Ys,MeshPhysicalMaterial:()=>In,MeshStandardMaterial:()=>On,MeshToonMaterial:()=>Ym,MinEquation:()=>fx,MirroredRepeatWrapping:()=>Rl,MixOperation:()=>_D,MultiplyBlending:()=>hx,MultiplyOperation:()=>sf,NearestFilter:()=>It,NearestMipMapLinearFilter:()=>u4,NearestMipMapNearestFilter:()=>A4,NearestMipmapLinearFilter:()=>Bl,NearestMipmapNearestFilter:()=>cA,NeverCompare:()=>tB,NeverDepth:()=>TD,NeverStencilFunc:()=>w4,NoBlending:()=>Zi,NoColorSpace:()=>Gs,NoToneMapping:()=>Us,NormalAnimationBlendMode:()=>ug,NormalBlending:()=>Dl,NotEqualCompare:()=>oB,NotEqualDepth:()=>PD,NotEqualStencilFunc:()=>I4,NumberKeyframeTrack:()=>zr,Object3D:()=>ht,ObjectLoader:()=>pw,ObjectSpaceNormalMap:()=>$D,OctahedronGeometry:()=>Zh,OneFactor:()=>xD,OneMinusDstAlphaFactor:()=>SD,OneMinusDstColorFactor:()=>ID,OneMinusSrcAlphaFactor:()=>Zw,OneMinusSrcColorFactor:()=>bD,OrthographicCamera:()=>Ci,PCFShadowMap:()=>Xw,PCFSoftShadowMap:()=>ag,PMREMGenerator:()=>Fl,Path:()=>Gl,PerspectiveCamera:()=>Jt,Plane:()=>Ur,PlaneGeometry:()=>Fi,PlaneHelper:()=>zw,PointLight:()=>ds,PointLightHelper:()=>Pw,Points:()=>ya,PointsMaterial:()=>Do,PolarGridHelper:()=>Fw,PolyhedronGeometry:()=>xa,PositionalAudio:()=>ww,PropertyBinding:()=>Bt,PropertyMixer:()=>rg,QuadraticBezierCurve:()=>Gh,QuadraticBezierCurve3:()=>zh,Quaternion:()=>Lt,QuaternionKeyframeTrack:()=>wr,QuaternionLinearInterpolant:()=>qm,RED_GREEN_RGTC2_Format:()=>Nx,RED_RGTC1_Format:()=>ZD,REVISION:()=>og,RGBADepthPacking:()=>hg,RGBAFormat:()=>Xn,RGBAIntegerFormat:()=>eb,RGBA_ASTC_10x10_Format:()=>Rx,RGBA_ASTC_10x5_Format:()=>Dx,RGBA_ASTC_10x6_Format:()=>Bx,RGBA_ASTC_10x8_Format:()=>Lx,RGBA_ASTC_12x10_Format:()=>kx,RGBA_ASTC_12x12_Format:()=>Px,RGBA_ASTC_4x4_Format:()=>wx,RGBA_ASTC_5x4_Format:()=>bx,RGBA_ASTC_5x5_Format:()=>Cx,RGBA_ASTC_6x5_Format:()=>Sx,RGBA_ASTC_6x6_Format:()=>Ex,RGBA_ASTC_8x5_Format:()=>Ix,RGBA_ASTC_8x6_Format:()=>Mx,RGBA_ASTC_8x8_Format:()=>Tx,RGBA_BPTC_Format:()=>ym,RGBA_ETC2_EAC_Format:()=>xx,RGBA_PVRTC_2BPPV1_Format:()=>vx,RGBA_PVRTC_4BPPV1_Format:()=>gx,RGBA_S3TC_DXT1_Format:()=>mm,RGBA_S3TC_DXT3_Format:()=>gm,RGBA_S3TC_DXT5_Format:()=>vm,RGB_ETC1_Format:()=>YD,RGB_ETC2_Format:()=>yx,RGB_PVRTC_2BPPV1_Format:()=>mx,RGB_PVRTC_4BPPV1_Format:()=>px,RGB_S3TC_DXT1_Format:()=>pm,RGFormat:()=>XD,RGIntegerFormat:()=>$w,RawShaderMaterial:()=>Xs,Ray:()=>Ws,Raycaster:()=>rf,RectAreaLight:()=>$m,RedFormat:()=>Ag,RedIntegerFormat:()=>qw,ReinhardToneMapping:()=>QD,RepeatWrapping:()=>_i,ReplaceStencilOp:()=>p4,ReverseSubtractEquation:()=>vD,RingGeometry:()=>zm,SIGNED_RED_GREEN_RGTC2_Format:()=>Fx,SIGNED_RED_RGTC1_Format:()=>_x,SRGBColorSpace:()=>nt,Scene:()=>To,ShaderChunk:()=>mt,ShaderLib:()=>Or,ShaderMaterial:()=>pt,ShadowMaterial:()=>SA,Shape:()=>Eo,ShapeGeometry:()=>Hm,ShapePath:()=>Vw,ShapeUtils:()=>Hs,ShortType:()=>zD,Skeleton:()=>va,SkeletonHelper:()=>kw,SkinnedMesh:()=>ga,Source:()=>bo,Sphere:()=>Xt,SphereGeometry:()=>Kh,Spherical:()=>TA,SphericalHarmonics3:()=>eg,SplineCurve:()=>Hh,SpotLight:()=>ba,SpotLightHelper:()=>Rw,Sprite:()=>Bm,SpriteMaterial:()=>Nh,SrcAlphaFactor:()=>Yw,SrcAlphaSaturateFactor:()=>MD,SrcColorFactor:()=>wD,StaticCopyUsage:()=>R4,StaticDrawUsage:()=>Dh,StaticReadUsage:()=>D4,StereoCamera:()=>yw,StreamCopyUsage:()=>P4,StreamDrawUsage:()=>T4,StreamReadUsage:()=>L4,StringKeyframeTrack:()=>Ro,SubtractEquation:()=>gD,SubtractiveBlending:()=>ux,TOUCH:()=>gs,TangentSpaceNormalMap:()=>Ma,TetrahedronGeometry:()=>Wm,Texture:()=>Vt,TextureLoader:()=>ko,TorusGeometry:()=>Vm,TorusKnotGeometry:()=>CA,Triangle:()=>Co,TriangleFanDrawMode:()=>LA,TriangleStripDrawMode:()=>af,TrianglesDrawMode:()=>nb,TubeGeometry:()=>wa,TwoPassDoubleSide:()=>c4,UVMapping:()=>cg,Uint16BufferAttribute:()=>_l,Uint32BufferAttribute:()=>_h,Uint8BufferAttribute:()=>zx,Uint8ClampedBufferAttribute:()=>Hx,Uniform:()=>Ew,UniformsGroup:()=>Iw,UniformsLib:()=>Ve,UniformsUtils:()=>jn,UnsignedByteType:()=>So,UnsignedInt248Type:()=>Aa,UnsignedIntType:()=>As,UnsignedShort4444Type:()=>Jw,UnsignedShort5551Type:()=>jw,UnsignedShortType:()=>BA,VSMShadowMap:()=>Fs,Vector2:()=>he,Vector3:()=>Y,Vector4:()=>Ct,VectorKeyframeTrack:()=>hs,VideoTexture:()=>Fh,WebGL1Renderer:()=>Tm,WebGL3DRenderTarget:()=>Ox,WebGLArrayRenderTarget:()=>Ux,WebGLCoordinateSystem:()=>Qs,WebGLCubeRenderTarget:()=>Im,WebGLMultipleRenderTargets:()=>Ph,WebGLRenderTarget:()=>Mt,WebGLRenderer:()=>mA,WebGLUtils:()=>vB,WebGPUCoordinateSystem:()=>Bh,WireframeGeometry:()=>Xm,WrapAroundEnding:()=>Th,ZeroCurvatureEnding:()=>Il,ZeroFactor:()=>yD,ZeroSlopeEnding:()=>Ml,ZeroStencilOp:()=>d4,_SRGBAFormat:()=>Cm,sRGBEncoding:()=>ua});var og="154",Ia={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dD=0,Ax=1,pD=2,a4=3,l4=0,Xw=1,ag=2,Fs=3,Pi=0,Yn=1,zt=2,c4=2,Zi=0,Dl=1,Io=2,ux=3,hx=4,mD=5,Sl=100,gD=101,vD=102,fx=103,dx=104,yD=200,xD=201,wD=202,bD=203,Yw=204,Zw=205,CD=206,SD=207,ED=208,ID=209,MD=210,TD=0,DD=1,BD=2,bm=3,LD=4,RD=5,kD=6,PD=7,sf=0,_D=1,ND=2,Us=0,FD=1,QD=2,UD=3,lg=4,OD=5,cg=300,ha=301,fa=302,Mo=303,Mh=304,DA=306,_i=1e3,Bn=1001,Rl=1002,It=1003,cA=1004,A4=1004,Bl=1005,u4=1005,St=1006,of=1007,h4=1007,us=1008,f4=1008,So=1009,GD=1010,zD=1011,BA=1012,Kw=1013,As=1014,Gr=1015,bn=1016,Jw=1017,jw=1018,Aa=1020,HD=1021,Xn=1023,WD=1024,VD=1025,Os=1026,kl=1027,Ag=1028,qw=1029,XD=1030,$w=1031,eb=1033,pm=33776,mm=33777,gm=33778,vm=33779,px=35840,mx=35841,gx=35842,vx=35843,YD=36196,yx=37492,xx=37496,wx=37808,bx=37809,Cx=37810,Sx=37811,Ex=37812,Ix=37813,Mx=37814,Tx=37815,Dx=37816,Bx=37817,Lx=37818,Rx=37819,kx=37820,Px=37821,ym=36492,ZD=36283,_x=36284,Nx=36285,Fx=36286,KD=2200,JD=2201,jD=2202,Pl=2300,da=2301,xm=2302,Il=2400,Ml=2401,Th=2402,ug=2500,tb=2501,nb=0,af=1,LA=2,ib=3e3,ua=3001,qD=3200,hg=3201,Ma=0,$D=1,Gs="",nt="srgb",gr="srgb-linear",rb="display-p3",d4=0,wm=7680,p4=7681,m4=7682,g4=7683,v4=34055,y4=34056,x4=5386,w4=512,b4=513,C4=514,S4=515,E4=516,I4=517,M4=518,eB=519,tB=512,nB=513,iB=514,rB=515,sB=516,oB=517,aB=518,lB=519,Dh=35044,RA=35048,T4=35040,D4=35045,B4=35049,L4=35041,R4=35046,k4=35050,P4=35042,_4="100",AA="300 es",Cm=1035,Qs=2e3,Bh=2001,Ni=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let o=this._listeners[e];if(o!==void 0){let a=o.indexOf(t);a!==-1&&o.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let o=n.slice(0);for(let a=0,l=o.length;a<l;a++)o[a].call(this,e);e.target=null}}},wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],zM=1234567,Ll=Math.PI/180,uA=180/Math.PI;function mr(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(wi[i&255]+wi[i>>8&255]+wi[i>>16&255]+wi[i>>24&255]+"-"+wi[e&255]+wi[e>>8&255]+"-"+wi[e>>16&15|64]+wi[e>>24&255]+"-"+wi[t&63|128]+wi[t>>8&255]+"-"+wi[t>>16&255]+wi[t>>24&255]+wi[n&255]+wi[n>>8&255]+wi[n>>16&255]+wi[n>>24&255]).toLowerCase()}function wn(i,e,t){return Math.max(e,Math.min(t,i))}function sb(i,e){return(i%e+e)%e}function N4(i,e,t,n,o){return n+(i-e)*(o-n)/(t-e)}function F4(i,e,t){return i!==e?(t-i)/(e-i):0}function bh(i,e,t){return(1-t)*i+t*e}function Q4(i,e,t,n){return bh(i,e,1-Math.exp(-t*n))}function U4(i,e=1){return e-Math.abs(sb(i,e*2)-e)}function O4(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function G4(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function z4(i,e){return i+Math.floor(Math.random()*(e-i+1))}function H4(i,e){return i+Math.random()*(e-i)}function W4(i){return i*(.5-Math.random())}function V4(i){i!==void 0&&(zM=i);let e=zM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X4(i){return i*Ll}function Y4(i){return i*uA}function Qx(i){return(i&i-1)===0&&i!==0}function cB(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Sm(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Z4(i,e,t,n,o){let a=Math.cos,l=Math.sin,c=a(t/2),A=l(t/2),u=a((e+n)/2),h=l((e+n)/2),f=a((e-n)/2),d=l((e-n)/2),p=a((n-e)/2),m=l((n-e)/2);switch(o){case"XYX":i.set(c*h,A*f,A*d,c*u);break;case"YZY":i.set(A*d,c*h,A*f,c*u);break;case"ZXZ":i.set(A*f,A*d,c*h,c*u);break;case"XZX":i.set(c*h,A*m,A*p,c*u);break;case"YXY":i.set(A*p,c*h,A*m,c*u);break;case"ZYZ":i.set(A*m,A*p,c*h,c*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function pr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function xt(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var ii={DEG2RAD:Ll,RAD2DEG:uA,generateUUID:mr,clamp:wn,euclideanModulo:sb,mapLinear:N4,inverseLerp:F4,lerp:bh,damp:Q4,pingpong:U4,smoothstep:O4,smootherstep:G4,randInt:z4,randFloat:H4,randFloatSpread:W4,seededRandom:V4,degToRad:X4,radToDeg:Y4,isPowerOfTwo:Qx,ceilPowerOfTwo:cB,floorPowerOfTwo:Sm,setQuaternionFromProperEuler:Z4,normalize:xt,denormalize:pr},he=class i{constructor(e=0,t=0){i.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6],this.y=o[1]*t+o[4]*n+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(wn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),o=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*n-l*o+e.x,this.y=a*o+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},dt=class i{constructor(e,t,n,o,a,l,c,A,u){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,o,a,l,c,A,u)}set(e,t,n,o,a,l,c,A,u){let h=this.elements;return h[0]=e,h[1]=o,h[2]=c,h[3]=t,h[4]=a,h[5]=A,h[6]=n,h[7]=l,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,o=t.elements,a=this.elements,l=n[0],c=n[3],A=n[6],u=n[1],h=n[4],f=n[7],d=n[2],p=n[5],m=n[8],b=o[0],g=o[3],w=o[6],I=o[1],v=o[4],E=o[7],S=o[2],C=o[5],M=o[8];return a[0]=l*b+c*I+A*S,a[3]=l*g+c*v+A*C,a[6]=l*w+c*E+A*M,a[1]=u*b+h*I+f*S,a[4]=u*g+h*v+f*C,a[7]=u*w+h*E+f*M,a[2]=d*b+p*I+m*S,a[5]=d*g+p*v+m*C,a[8]=d*w+p*E+m*M,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],o=e[2],a=e[3],l=e[4],c=e[5],A=e[6],u=e[7],h=e[8];return t*l*h-t*c*u-n*a*h+n*c*A+o*a*u-o*l*A}invert(){let e=this.elements,t=e[0],n=e[1],o=e[2],a=e[3],l=e[4],c=e[5],A=e[6],u=e[7],h=e[8],f=h*l-c*u,d=c*A-h*a,p=u*a-l*A,m=t*f+n*d+o*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/m;return e[0]=f*b,e[1]=(o*u-h*n)*b,e[2]=(c*n-o*l)*b,e[3]=d*b,e[4]=(h*t-o*A)*b,e[5]=(o*a-c*t)*b,e[6]=p*b,e[7]=(n*A-u*t)*b,e[8]=(l*t-n*a)*b,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,o,a,l,c){let A=Math.cos(a),u=Math.sin(a);return this.set(n*A,n*u,-n*(A*l+u*c)+l+e,-o*u,o*A,-o*(-u*l+A*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Ry.makeScale(e,t)),this}rotate(e){return this.premultiply(Ry.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ry.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let o=0;o<9;o++)if(t[o]!==n[o])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Ry=new dt;function AB(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}var K4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function rA(i,e){return new K4[i](e)}function Lh(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}var HM={};function Ch(i){i in HM||(HM[i]=!0,console.warn(i))}function aA(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function ky(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var J4=new dt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),j4=new dt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function q4(i){return i.convertSRGBToLinear().applyMatrix3(j4)}function $4(i){return i.applyMatrix3(J4).convertLinearToSRGB()}var eO={[gr]:i=>i,[nt]:i=>i.convertSRGBToLinear(),[rb]:q4},tO={[gr]:i=>i,[nt]:i=>i.convertLinearToSRGB(),[rb]:$4},Fr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return gr},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;let n=eO[e],o=tO[t];if(n===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return o(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}},Nc,Rh=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nc===void 0&&(Nc=Lh("canvas")),Nc.width=e.width,Nc.height=e.height;let n=Nc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Nc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Lh("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let o=n.getImageData(0,0,e.width,e.height),a=o.data;for(let l=0;l<a.length;l++)a[l]=aA(a[l]/255)*255;return n.putImageData(o,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(aA(t[n]/255)*255):t[n]=aA(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},nO=0,bo=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nO++}),this.uuid=mr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},o=this.data;if(o!==null){let a;if(Array.isArray(o)){a=[];for(let l=0,c=o.length;l<c;l++)o[l].isDataTexture?a.push(Py(o[l].image)):a.push(Py(o[l]))}else a=Py(o);n.url=a}return t||(e.images[this.uuid]=n),n}};function Py(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Rh.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var iO=0,Vt=class i extends Ni{constructor(e=i.DEFAULT_IMAGE,t=i.DEFAULT_MAPPING,n=Bn,o=Bn,a=St,l=us,c=Xn,A=So,u=i.DEFAULT_ANISOTROPY,h=Gs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iO++}),this.uuid=mr(),this.name="",this.source=new bo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=o,this.magFilter=a,this.minFilter=l,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=A,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Ch("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===ua?nt:Gs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _i:e.x=e.x-Math.floor(e.x);break;case Bn:e.x=e.x<0?0:1;break;case Rl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _i:e.y=e.y-Math.floor(e.y);break;case Bn:e.y=e.y<0?0:1;break;case Rl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Ch("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===nt?ua:ib}set encoding(e){Ch("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ua?nt:Gs}};Vt.DEFAULT_IMAGE=null;Vt.DEFAULT_MAPPING=cg;Vt.DEFAULT_ANISOTROPY=1;var Ct=class i{constructor(e=0,t=0,n=0,o=1){i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,o){return this.x=e,this.y=t,this.z=n,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,o=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*o+l[12]*a,this.y=l[1]*t+l[5]*n+l[9]*o+l[13]*a,this.z=l[2]*t+l[6]*n+l[10]*o+l[14]*a,this.w=l[3]*t+l[7]*n+l[11]*o+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,o,a,A=e.elements,u=A[0],h=A[4],f=A[8],d=A[1],p=A[5],m=A[9],b=A[2],g=A[6],w=A[10];if(Math.abs(h-d)<.01&&Math.abs(f-b)<.01&&Math.abs(m-g)<.01){if(Math.abs(h+d)<.1&&Math.abs(f+b)<.1&&Math.abs(m+g)<.1&&Math.abs(u+p+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let v=(u+1)/2,E=(p+1)/2,S=(w+1)/2,C=(h+d)/4,M=(f+b)/4,D=(m+g)/4;return v>E&&v>S?v<.01?(n=0,o=.707106781,a=.707106781):(n=Math.sqrt(v),o=C/n,a=M/n):E>S?E<.01?(n=.707106781,o=0,a=.707106781):(o=Math.sqrt(E),n=C/o,a=D/o):S<.01?(n=.707106781,o=.707106781,a=0):(a=Math.sqrt(S),n=M/a,o=D/a),this.set(n,o,a,t),this}let I=Math.sqrt((g-m)*(g-m)+(f-b)*(f-b)+(d-h)*(d-h));return Math.abs(I)<.001&&(I=1),this.x=(g-m)/I,this.y=(f-b)/I,this.z=(d-h)/I,this.w=Math.acos((u+p+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Mt=class extends Ni{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ct(0,0,e,t),this.scissorTest=!1,this.viewport=new Ct(0,0,e,t);let o={width:e,height:t,depth:1};n.encoding!==void 0&&(Ch("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ua?nt:Gs),this.texture=new Vt(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:St,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new bo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},hA=class extends Vt{constructor(e=null,t=1,n=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:o},this.magFilter=It,this.minFilter=It,this.wrapR=Bn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Ux=class extends Mt{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new hA(null,e,t,n),this.texture.isRenderTargetTexture=!0}},kh=class extends Vt{constructor(e=null,t=1,n=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:o},this.magFilter=It,this.minFilter=It,this.wrapR=Bn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Ox=class extends Mt{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new kh(null,e,t,n),this.texture.isRenderTargetTexture=!0}},Ph=class extends Mt{constructor(e=1,t=1,n=1,o={}){super(e,t,o),this.isWebGLMultipleRenderTargets=!0;let a=this.texture;this.texture=[];for(let l=0;l<n;l++)this.texture[l]=a.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let o=0,a=this.texture.length;o<a;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Lt=class{constructor(e=0,t=0,n=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=o}static slerpFlat(e,t,n,o,a,l,c){let A=n[o+0],u=n[o+1],h=n[o+2],f=n[o+3],d=a[l+0],p=a[l+1],m=a[l+2],b=a[l+3];if(c===0){e[t+0]=A,e[t+1]=u,e[t+2]=h,e[t+3]=f;return}if(c===1){e[t+0]=d,e[t+1]=p,e[t+2]=m,e[t+3]=b;return}if(f!==b||A!==d||u!==p||h!==m){let g=1-c,w=A*d+u*p+h*m+f*b,I=w>=0?1:-1,v=1-w*w;if(v>Number.EPSILON){let S=Math.sqrt(v),C=Math.atan2(S,w*I);g=Math.sin(g*C)/S,c=Math.sin(c*C)/S}let E=c*I;if(A=A*g+d*E,u=u*g+p*E,h=h*g+m*E,f=f*g+b*E,g===1-c){let S=1/Math.sqrt(A*A+u*u+h*h+f*f);A*=S,u*=S,h*=S,f*=S}}e[t]=A,e[t+1]=u,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,o,a,l){let c=n[o],A=n[o+1],u=n[o+2],h=n[o+3],f=a[l],d=a[l+1],p=a[l+2],m=a[l+3];return e[t]=c*m+h*f+A*p-u*d,e[t+1]=A*m+h*d+u*f-c*p,e[t+2]=u*m+h*p+c*d-A*f,e[t+3]=h*m-c*f-A*d-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,o){return this._x=e,this._y=t,this._z=n,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,o=e._y,a=e._z,l=e._order,c=Math.cos,A=Math.sin,u=c(n/2),h=c(o/2),f=c(a/2),d=A(n/2),p=A(o/2),m=A(a/2);switch(l){case"XYZ":this._x=d*h*f+u*p*m,this._y=u*p*f-d*h*m,this._z=u*h*m+d*p*f,this._w=u*h*f-d*p*m;break;case"YXZ":this._x=d*h*f+u*p*m,this._y=u*p*f-d*h*m,this._z=u*h*m-d*p*f,this._w=u*h*f+d*p*m;break;case"ZXY":this._x=d*h*f-u*p*m,this._y=u*p*f+d*h*m,this._z=u*h*m+d*p*f,this._w=u*h*f-d*p*m;break;case"ZYX":this._x=d*h*f-u*p*m,this._y=u*p*f+d*h*m,this._z=u*h*m-d*p*f,this._w=u*h*f+d*p*m;break;case"YZX":this._x=d*h*f+u*p*m,this._y=u*p*f+d*h*m,this._z=u*h*m-d*p*f,this._w=u*h*f-d*p*m;break;case"XZY":this._x=d*h*f-u*p*m,this._y=u*p*f-d*h*m,this._z=u*h*m+d*p*f,this._w=u*h*f+d*p*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,o=Math.sin(n);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],o=t[4],a=t[8],l=t[1],c=t[5],A=t[9],u=t[2],h=t[6],f=t[10],d=n+c+f;if(d>0){let p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(h-A)*p,this._y=(a-u)*p,this._z=(l-o)*p}else if(n>c&&n>f){let p=2*Math.sqrt(1+n-c-f);this._w=(h-A)/p,this._x=.25*p,this._y=(o+l)/p,this._z=(a+u)/p}else if(c>f){let p=2*Math.sqrt(1+c-n-f);this._w=(a-u)/p,this._x=(o+l)/p,this._y=.25*p,this._z=(A+h)/p}else{let p=2*Math.sqrt(1+f-n-c);this._w=(l-o)/p,this._x=(a+u)/p,this._y=(A+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wn(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let o=Math.min(1,t/n);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,o=e._y,a=e._z,l=e._w,c=t._x,A=t._y,u=t._z,h=t._w;return this._x=n*h+l*c+o*u-a*A,this._y=o*h+l*A+a*c-n*u,this._z=a*h+l*u+n*A-o*c,this._w=l*h-n*c-o*A-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,o=this._y,a=this._z,l=this._w,c=l*e._w+n*e._x+o*e._y+a*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=n,this._y=o,this._z=a,this;let A=1-c*c;if(A<=Number.EPSILON){let p=1-t;return this._w=p*l+t*this._w,this._x=p*n+t*this._x,this._y=p*o+t*this._y,this._z=p*a+t*this._z,this.normalize(),this._onChangeCallback(),this}let u=Math.sqrt(A),h=Math.atan2(u,c),f=Math.sin((1-t)*h)/u,d=Math.sin(t*h)/u;return this._w=l*f+this._w*d,this._x=n*f+this._x*d,this._y=o*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),o=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(o),n*Math.sin(a),n*Math.cos(a),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Y=class i{constructor(e=0,t=0,n=0){i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(WM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(WM.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*o,this.y=a[1]*t+a[4]*n+a[7]*o,this.z=a[2]*t+a[5]*n+a[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,o=this.z,a=e.elements,l=1/(a[3]*t+a[7]*n+a[11]*o+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*o+a[12])*l,this.y=(a[1]*t+a[5]*n+a[9]*o+a[13])*l,this.z=(a[2]*t+a[6]*n+a[10]*o+a[14])*l,this}applyQuaternion(e){let t=this.x,n=this.y,o=this.z,a=e.x,l=e.y,c=e.z,A=e.w,u=A*t+l*o-c*n,h=A*n+c*t-a*o,f=A*o+a*n-l*t,d=-a*t-l*n-c*o;return this.x=u*A+d*-a+h*-c-f*-l,this.y=h*A+d*-l+f*-a-u*-c,this.z=f*A+d*-c+u*-l-h*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*o,this.y=a[1]*t+a[5]*n+a[9]*o,this.z=a[2]*t+a[6]*n+a[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,o=e.y,a=e.z,l=t.x,c=t.y,A=t.z;return this.x=o*A-a*c,this.y=a*l-n*A,this.z=n*c-o*l,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _y.copy(this).projectOnVector(e),this.sub(_y)}reflect(e){return this.sub(_y.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(wn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,o=this.z-e.z;return t*t+n*n+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let o=Math.sin(t)*e;return this.x=o*Math.sin(n),this.y=Math.cos(t)*e,this.z=o*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},_y=new Y,WM=new Lt,Cn=class{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(po.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(po.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=po.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Fc.copy(e.boundingBox),Fc.applyMatrix4(e.matrixWorld),this.union(Fc);else{let o=e.geometry;if(o!==void 0)if(t&&o.attributes!==void 0&&o.attributes.position!==void 0){let a=o.attributes.position;for(let l=0,c=a.count;l<c;l++)po.fromBufferAttribute(a,l).applyMatrix4(e.matrixWorld),this.expandByPoint(po)}else o.boundingBox===null&&o.computeBoundingBox(),Fc.copy(o.boundingBox),Fc.applyMatrix4(e.matrixWorld),this.union(Fc)}let n=e.children;for(let o=0,a=n.length;o<a;o++)this.expandByObject(n[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,po),po.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ah),Tp.subVectors(this.max,Ah),Qc.subVectors(e.a,Ah),Uc.subVectors(e.b,Ah),Oc.subVectors(e.c,Ah),sa.subVectors(Uc,Qc),oa.subVectors(Oc,Uc),dl.subVectors(Qc,Oc);let t=[0,-sa.z,sa.y,0,-oa.z,oa.y,0,-dl.z,dl.y,sa.z,0,-sa.x,oa.z,0,-oa.x,dl.z,0,-dl.x,-sa.y,sa.x,0,-oa.y,oa.x,0,-dl.y,dl.x,0];return!Ny(t,Qc,Uc,Oc,Tp)||(t=[1,0,0,0,1,0,0,0,1],!Ny(t,Qc,Uc,Oc,Tp))?!1:(Dp.crossVectors(sa,oa),t=[Dp.x,Dp.y,Dp.z],Ny(t,Qc,Uc,Oc,Tp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,po).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(po).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},fo=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],po=new Y,Fc=new Cn,Qc=new Y,Uc=new Y,Oc=new Y,sa=new Y,oa=new Y,dl=new Y,Ah=new Y,Tp=new Y,Dp=new Y,pl=new Y;function Ny(i,e,t,n,o){for(let a=0,l=i.length-3;a<=l;a+=3){pl.fromArray(i,a);let c=o.x*Math.abs(pl.x)+o.y*Math.abs(pl.y)+o.z*Math.abs(pl.z),A=e.dot(pl),u=t.dot(pl),h=n.dot(pl);if(Math.max(-Math.max(A,u,h),Math.min(A,u,h))>c)return!1}return!0}var rO=new Cn,uh=new Y,Fy=new Y,Xt=class{constructor(e=new Y,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):rO.setFromPoints(e).getCenter(n);let o=0;for(let a=0,l=e.length;a<l;a++)o=Math.max(o,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;uh.subVectors(e,this.center);let t=uh.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),o=(n-this.radius)*.5;this.center.addScaledVector(uh,o/n),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Fy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(uh.copy(e.center).add(Fy)),this.expandByPoint(uh.copy(e.center).sub(Fy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},mo=new Y,Qy=new Y,Bp=new Y,aa=new Y,Uy=new Y,Lp=new Y,Oy=new Y,Ws=class{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=mo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mo.copy(this.origin).addScaledVector(this.direction,t),mo.distanceToSquared(e))}distanceSqToSegment(e,t,n,o){Qy.copy(e).add(t).multiplyScalar(.5),Bp.copy(t).sub(e).normalize(),aa.copy(this.origin).sub(Qy);let a=e.distanceTo(t)*.5,l=-this.direction.dot(Bp),c=aa.dot(this.direction),A=-aa.dot(Bp),u=aa.lengthSq(),h=Math.abs(1-l*l),f,d,p,m;if(h>0)if(f=l*A-c,d=l*c-A,m=a*h,f>=0)if(d>=-m)if(d<=m){let b=1/h;f*=b,d*=b,p=f*(f+l*d+2*c)+d*(l*f+d+2*A)+u}else d=a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*A)+u;else d=-a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*A)+u;else d<=-m?(f=Math.max(0,-(-l*a+c)),d=f>0?-a:Math.min(Math.max(-a,-A),a),p=-f*f+d*(d+2*A)+u):d<=m?(f=0,d=Math.min(Math.max(-a,-A),a),p=d*(d+2*A)+u):(f=Math.max(0,-(l*a+c)),d=f>0?a:Math.min(Math.max(-a,-A),a),p=-f*f+d*(d+2*A)+u);else d=l>0?-a:a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*A)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,f),o&&o.copy(Qy).addScaledVector(Bp,d),p}intersectSphere(e,t){mo.subVectors(e.center,this.origin);let n=mo.dot(this.direction),o=mo.dot(mo)-n*n,a=e.radius*e.radius;if(o>a)return null;let l=Math.sqrt(a-o),c=n-l,A=n+l;return A<0?null:c<0?this.at(A,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,o,a,l,c,A,u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,o=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,o=(e.min.x-d.x)*u),h>=0?(a=(e.min.y-d.y)*h,l=(e.max.y-d.y)*h):(a=(e.max.y-d.y)*h,l=(e.min.y-d.y)*h),n>l||a>o||((a>n||isNaN(n))&&(n=a),(l<o||isNaN(o))&&(o=l),f>=0?(c=(e.min.z-d.z)*f,A=(e.max.z-d.z)*f):(c=(e.max.z-d.z)*f,A=(e.min.z-d.z)*f),n>A||c>o)||((c>n||n!==n)&&(n=c),(A<o||o!==o)&&(o=A),o<0)?null:this.at(n>=0?n:o,t)}intersectsBox(e){return this.intersectBox(e,mo)!==null}intersectTriangle(e,t,n,o,a){Uy.subVectors(t,e),Lp.subVectors(n,e),Oy.crossVectors(Uy,Lp);let l=this.direction.dot(Oy),c;if(l>0){if(o)return null;c=1}else if(l<0)c=-1,l=-l;else return null;aa.subVectors(this.origin,e);let A=c*this.direction.dot(Lp.crossVectors(aa,Lp));if(A<0)return null;let u=c*this.direction.dot(Uy.cross(aa));if(u<0||A+u>l)return null;let h=-c*aa.dot(Oy);return h<0?null:this.at(h/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Qe=class i{constructor(e,t,n,o,a,l,c,A,u,h,f,d,p,m,b,g){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,o,a,l,c,A,u,h,f,d,p,m,b,g)}set(e,t,n,o,a,l,c,A,u,h,f,d,p,m,b,g){let w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=o,w[1]=a,w[5]=l,w[9]=c,w[13]=A,w[2]=u,w[6]=h,w[10]=f,w[14]=d,w[3]=p,w[7]=m,w[11]=b,w[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,o=1/Gc.setFromMatrixColumn(e,0).length(),a=1/Gc.setFromMatrixColumn(e,1).length(),l=1/Gc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,o=e.y,a=e.z,l=Math.cos(n),c=Math.sin(n),A=Math.cos(o),u=Math.sin(o),h=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){let d=l*h,p=l*f,m=c*h,b=c*f;t[0]=A*h,t[4]=-A*f,t[8]=u,t[1]=p+m*u,t[5]=d-b*u,t[9]=-c*A,t[2]=b-d*u,t[6]=m+p*u,t[10]=l*A}else if(e.order==="YXZ"){let d=A*h,p=A*f,m=u*h,b=u*f;t[0]=d+b*c,t[4]=m*c-p,t[8]=l*u,t[1]=l*f,t[5]=l*h,t[9]=-c,t[2]=p*c-m,t[6]=b+d*c,t[10]=l*A}else if(e.order==="ZXY"){let d=A*h,p=A*f,m=u*h,b=u*f;t[0]=d-b*c,t[4]=-l*f,t[8]=m+p*c,t[1]=p+m*c,t[5]=l*h,t[9]=b-d*c,t[2]=-l*u,t[6]=c,t[10]=l*A}else if(e.order==="ZYX"){let d=l*h,p=l*f,m=c*h,b=c*f;t[0]=A*h,t[4]=m*u-p,t[8]=d*u+b,t[1]=A*f,t[5]=b*u+d,t[9]=p*u-m,t[2]=-u,t[6]=c*A,t[10]=l*A}else if(e.order==="YZX"){let d=l*A,p=l*u,m=c*A,b=c*u;t[0]=A*h,t[4]=b-d*f,t[8]=m*f+p,t[1]=f,t[5]=l*h,t[9]=-c*h,t[2]=-u*h,t[6]=p*f+m,t[10]=d-b*f}else if(e.order==="XZY"){let d=l*A,p=l*u,m=c*A,b=c*u;t[0]=A*h,t[4]=-f,t[8]=u*h,t[1]=d*f+b,t[5]=l*h,t[9]=p*f-m,t[2]=m*f-p,t[6]=c*h,t[10]=b*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sO,e,oO)}lookAt(e,t,n){let o=this.elements;return fr.subVectors(e,t),fr.lengthSq()===0&&(fr.z=1),fr.normalize(),la.crossVectors(n,fr),la.lengthSq()===0&&(Math.abs(n.z)===1?fr.x+=1e-4:fr.z+=1e-4,fr.normalize(),la.crossVectors(n,fr)),la.normalize(),Rp.crossVectors(fr,la),o[0]=la.x,o[4]=Rp.x,o[8]=fr.x,o[1]=la.y,o[5]=Rp.y,o[9]=fr.y,o[2]=la.z,o[6]=Rp.z,o[10]=fr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,o=t.elements,a=this.elements,l=n[0],c=n[4],A=n[8],u=n[12],h=n[1],f=n[5],d=n[9],p=n[13],m=n[2],b=n[6],g=n[10],w=n[14],I=n[3],v=n[7],E=n[11],S=n[15],C=o[0],M=o[4],D=o[8],T=o[12],B=o[1],R=o[5],P=o[9],_=o[13],Q=o[2],W=o[6],U=o[10],H=o[14],O=o[3],F=o[7],z=o[11],k=o[15];return a[0]=l*C+c*B+A*Q+u*O,a[4]=l*M+c*R+A*W+u*F,a[8]=l*D+c*P+A*U+u*z,a[12]=l*T+c*_+A*H+u*k,a[1]=h*C+f*B+d*Q+p*O,a[5]=h*M+f*R+d*W+p*F,a[9]=h*D+f*P+d*U+p*z,a[13]=h*T+f*_+d*H+p*k,a[2]=m*C+b*B+g*Q+w*O,a[6]=m*M+b*R+g*W+w*F,a[10]=m*D+b*P+g*U+w*z,a[14]=m*T+b*_+g*H+w*k,a[3]=I*C+v*B+E*Q+S*O,a[7]=I*M+v*R+E*W+S*F,a[11]=I*D+v*P+E*U+S*z,a[15]=I*T+v*_+E*H+S*k,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],o=e[8],a=e[12],l=e[1],c=e[5],A=e[9],u=e[13],h=e[2],f=e[6],d=e[10],p=e[14],m=e[3],b=e[7],g=e[11],w=e[15];return m*(+a*A*f-o*u*f-a*c*d+n*u*d+o*c*p-n*A*p)+b*(+t*A*p-t*u*d+a*l*d-o*l*p+o*u*h-a*A*h)+g*(+t*u*f-t*c*p-a*l*f+n*l*p+a*c*h-n*u*h)+w*(-o*c*h-t*A*f+t*c*d+o*l*f-n*l*d+n*A*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],o=e[2],a=e[3],l=e[4],c=e[5],A=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],b=e[13],g=e[14],w=e[15],I=f*g*u-b*d*u+b*A*p-c*g*p-f*A*w+c*d*w,v=m*d*u-h*g*u-m*A*p+l*g*p+h*A*w-l*d*w,E=h*b*u-m*f*u+m*c*p-l*b*p-h*c*w+l*f*w,S=m*f*A-h*b*A-m*c*d+l*b*d+h*c*g-l*f*g,C=t*I+n*v+o*E+a*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/C;return e[0]=I*M,e[1]=(b*d*a-f*g*a-b*o*p+n*g*p+f*o*w-n*d*w)*M,e[2]=(c*g*a-b*A*a+b*o*u-n*g*u-c*o*w+n*A*w)*M,e[3]=(f*A*a-c*d*a-f*o*u+n*d*u+c*o*p-n*A*p)*M,e[4]=v*M,e[5]=(h*g*a-m*d*a+m*o*p-t*g*p-h*o*w+t*d*w)*M,e[6]=(m*A*a-l*g*a-m*o*u+t*g*u+l*o*w-t*A*w)*M,e[7]=(l*d*a-h*A*a+h*o*u-t*d*u-l*o*p+t*A*p)*M,e[8]=E*M,e[9]=(m*f*a-h*b*a-m*n*p+t*b*p+h*n*w-t*f*w)*M,e[10]=(l*b*a-m*c*a+m*n*u-t*b*u-l*n*w+t*c*w)*M,e[11]=(h*c*a-l*f*a-h*n*u+t*f*u+l*n*p-t*c*p)*M,e[12]=S*M,e[13]=(h*b*o-m*f*o+m*n*d-t*b*d-h*n*g+t*f*g)*M,e[14]=(m*c*o-l*b*o-m*n*A+t*b*A+l*n*g-t*c*g)*M,e[15]=(l*f*o-h*c*o+h*n*A-t*f*A-l*n*d+t*c*d)*M,this}scale(e){let t=this.elements,n=e.x,o=e.y,a=e.z;return t[0]*=n,t[4]*=o,t[8]*=a,t[1]*=n,t[5]*=o,t[9]*=a,t[2]*=n,t[6]*=o,t[10]*=a,t[3]*=n,t[7]*=o,t[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,o))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),o=Math.sin(t),a=1-n,l=e.x,c=e.y,A=e.z,u=a*l,h=a*c;return this.set(u*l+n,u*c-o*A,u*A+o*c,0,u*c+o*A,h*c+n,h*A-o*l,0,u*A-o*c,h*A+o*l,a*A*A+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,o,a,l){return this.set(1,n,a,0,e,1,l,0,t,o,1,0,0,0,0,1),this}compose(e,t,n){let o=this.elements,a=t._x,l=t._y,c=t._z,A=t._w,u=a+a,h=l+l,f=c+c,d=a*u,p=a*h,m=a*f,b=l*h,g=l*f,w=c*f,I=A*u,v=A*h,E=A*f,S=n.x,C=n.y,M=n.z;return o[0]=(1-(b+w))*S,o[1]=(p+E)*S,o[2]=(m-v)*S,o[3]=0,o[4]=(p-E)*C,o[5]=(1-(d+w))*C,o[6]=(g+I)*C,o[7]=0,o[8]=(m+v)*M,o[9]=(g-I)*M,o[10]=(1-(d+b))*M,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,n){let o=this.elements,a=Gc.set(o[0],o[1],o[2]).length(),l=Gc.set(o[4],o[5],o[6]).length(),c=Gc.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),e.x=o[12],e.y=o[13],e.z=o[14],as.copy(this);let u=1/a,h=1/l,f=1/c;return as.elements[0]*=u,as.elements[1]*=u,as.elements[2]*=u,as.elements[4]*=h,as.elements[5]*=h,as.elements[6]*=h,as.elements[8]*=f,as.elements[9]*=f,as.elements[10]*=f,t.setFromRotationMatrix(as),n.x=a,n.y=l,n.z=c,this}makePerspective(e,t,n,o,a,l,c=Qs){let A=this.elements,u=2*a/(t-e),h=2*a/(n-o),f=(t+e)/(t-e),d=(n+o)/(n-o),p,m;if(c===Qs)p=-(l+a)/(l-a),m=-2*l*a/(l-a);else if(c===Bh)p=-l/(l-a),m=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return A[0]=u,A[4]=0,A[8]=f,A[12]=0,A[1]=0,A[5]=h,A[9]=d,A[13]=0,A[2]=0,A[6]=0,A[10]=p,A[14]=m,A[3]=0,A[7]=0,A[11]=-1,A[15]=0,this}makeOrthographic(e,t,n,o,a,l,c=Qs){let A=this.elements,u=1/(t-e),h=1/(n-o),f=1/(l-a),d=(t+e)*u,p=(n+o)*h,m,b;if(c===Qs)m=(l+a)*f,b=-2*f;else if(c===Bh)m=a*f,b=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return A[0]=2*u,A[4]=0,A[8]=0,A[12]=-d,A[1]=0,A[5]=2*h,A[9]=0,A[13]=-p,A[2]=0,A[6]=0,A[10]=b,A[14]=-m,A[3]=0,A[7]=0,A[11]=0,A[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let o=0;o<16;o++)if(t[o]!==n[o])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Gc=new Y,as=new Qe,sO=new Y(0,0,0),oO=new Y(1,1,1),la=new Y,Rp=new Y,fr=new Y,VM=new Qe,XM=new Lt,Ki=class i{constructor(e=0,t=0,n=0,o=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,o=this._order){return this._x=e,this._y=t,this._z=n,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let o=e.elements,a=o[0],l=o[4],c=o[8],A=o[1],u=o[5],h=o[9],f=o[2],d=o[6],p=o[10];switch(t){case"XYZ":this._y=Math.asin(wn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-wn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(A,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(wn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-l,u)):(this._y=0,this._z=Math.atan2(A,a));break;case"ZYX":this._y=Math.asin(-wn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(A,a)):(this._x=0,this._z=Math.atan2(-l,u));break;case"YZX":this._z=Math.asin(wn(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return VM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VM,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return XM.setFromEuler(this),this.setFromQuaternion(XM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Ki.DEFAULT_ORDER="XYZ";var fA=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},aO=0,YM=new Y,zc=new Lt,go=new Qe,kp=new Y,hh=new Y,lO=new Y,cO=new Lt,ZM=new Y(1,0,0),KM=new Y(0,1,0),JM=new Y(0,0,1),AO={type:"added"},jM={type:"removed"},ht=class i extends Ni{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aO++}),this.uuid=mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let e=new Y,t=new Ki,n=new Lt,o=new Y(1,1,1);function a(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Qe},normalMatrix:{value:new dt}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new fA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zc.setFromAxisAngle(e,t),this.quaternion.multiply(zc),this}rotateOnWorldAxis(e,t){return zc.setFromAxisAngle(e,t),this.quaternion.premultiply(zc),this}rotateX(e){return this.rotateOnAxis(ZM,e)}rotateY(e){return this.rotateOnAxis(KM,e)}rotateZ(e){return this.rotateOnAxis(JM,e)}translateOnAxis(e,t){return YM.copy(e).applyQuaternion(this.quaternion),this.position.add(YM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZM,e)}translateY(e){return this.translateOnAxis(KM,e)}translateZ(e){return this.translateOnAxis(JM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(go.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?kp.copy(e):kp.set(e,t,n);let o=this.parent;this.updateWorldMatrix(!0,!1),hh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?go.lookAt(hh,kp,this.up):go.lookAt(kp,hh,this.up),this.quaternion.setFromRotationMatrix(go),o&&(go.extractRotation(o.matrixWorld),zc.setFromRotationMatrix(go),this.quaternion.premultiply(zc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(AO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jM)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(jM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),go.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),go.multiply(e.parent.matrixWorld)),e.applyMatrix4(go),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,o=this.children.length;n<o;n++){let l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let o=0,a=this.children.length;o<a;o++){let l=this.children[o].getObjectsByProperty(e,t);l.length>0&&(n=n.concat(l))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hh,e,lO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hh,cO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,o=t.length;n<o;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let n=0,o=t.length;n<o;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,o=t.length;n<o;n++){let a=t[n];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let o=this.children;for(let a=0,l=o.length;a<l;a++){let c=o[a];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function a(c,A){return c[A.uuid]===void 0&&(c[A.uuid]=A.toJSON(e)),A.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(e.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let A=c.shapes;if(Array.isArray(A))for(let u=0,h=A.length;u<h;u++){let f=A[u];a(e.shapes,f)}else a(e.shapes,A)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let A=0,u=this.material.length;A<u;A++)c.push(a(e.materials,this.material[A]));o.material=c}else o.material=a(e.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let A=this.animations[c];o.animations.push(a(e.animations,A))}}if(t){let c=l(e.geometries),A=l(e.materials),u=l(e.textures),h=l(e.images),f=l(e.shapes),d=l(e.skeletons),p=l(e.animations),m=l(e.nodes);c.length>0&&(n.geometries=c),A.length>0&&(n.materials=A),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),f.length>0&&(n.shapes=f),d.length>0&&(n.skeletons=d),p.length>0&&(n.animations=p),m.length>0&&(n.nodes=m)}return n.object=o,n;function l(c){let A=[];for(let u in c){let h=c[u];delete h.metadata,A.push(h)}return A}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){let o=e.children[n];this.add(o.clone())}return this}};ht.DEFAULT_UP=new Y(0,1,0);ht.DEFAULT_MATRIX_AUTO_UPDATE=!0;ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var ls=new Y,vo=new Y,Gy=new Y,yo=new Y,Hc=new Y,Wc=new Y,qM=new Y,zy=new Y,Hy=new Y,Wy=new Y,Pp=!1,Co=class i{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,o){o.subVectors(n,t),ls.subVectors(e,t),o.cross(ls);let a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}static getBarycoord(e,t,n,o,a){ls.subVectors(o,t),vo.subVectors(n,t),Gy.subVectors(e,t);let l=ls.dot(ls),c=ls.dot(vo),A=ls.dot(Gy),u=vo.dot(vo),h=vo.dot(Gy),f=l*u-c*c;if(f===0)return a.set(-2,-1,-1);let d=1/f,p=(u*A-c*h)*d,m=(l*h-c*A)*d;return a.set(1-p-m,m,p)}static containsPoint(e,t,n,o){return this.getBarycoord(e,t,n,o,yo),yo.x>=0&&yo.y>=0&&yo.x+yo.y<=1}static getUV(e,t,n,o,a,l,c,A){return Pp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Pp=!0),this.getInterpolation(e,t,n,o,a,l,c,A)}static getInterpolation(e,t,n,o,a,l,c,A){return this.getBarycoord(e,t,n,o,yo),A.setScalar(0),A.addScaledVector(a,yo.x),A.addScaledVector(l,yo.y),A.addScaledVector(c,yo.z),A}static isFrontFacing(e,t,n,o){return ls.subVectors(n,t),vo.subVectors(e,t),ls.cross(vo).dot(o)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,o){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,n,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ls.subVectors(this.c,this.b),vo.subVectors(this.a,this.b),ls.cross(vo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return i.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,o,a){return Pp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Pp=!0),i.getInterpolation(e,this.a,this.b,this.c,t,n,o,a)}getInterpolation(e,t,n,o,a){return i.getInterpolation(e,this.a,this.b,this.c,t,n,o,a)}containsPoint(e){return i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,o=this.b,a=this.c,l,c;Hc.subVectors(o,n),Wc.subVectors(a,n),zy.subVectors(e,n);let A=Hc.dot(zy),u=Wc.dot(zy);if(A<=0&&u<=0)return t.copy(n);Hy.subVectors(e,o);let h=Hc.dot(Hy),f=Wc.dot(Hy);if(h>=0&&f<=h)return t.copy(o);let d=A*f-h*u;if(d<=0&&A>=0&&h<=0)return l=A/(A-h),t.copy(n).addScaledVector(Hc,l);Wy.subVectors(e,a);let p=Hc.dot(Wy),m=Wc.dot(Wy);if(m>=0&&p<=m)return t.copy(a);let b=p*u-A*m;if(b<=0&&u>=0&&m<=0)return c=u/(u-m),t.copy(n).addScaledVector(Wc,c);let g=h*m-p*f;if(g<=0&&f-h>=0&&p-m>=0)return qM.subVectors(a,o),c=(f-h)/(f-h+(p-m)),t.copy(o).addScaledVector(qM,c);let w=1/(g+b+d);return l=b*w,c=d*w,t.copy(n).addScaledVector(Hc,l).addScaledVector(Wc,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},uO=0,Sn=class extends Ni{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uO++}),this.uuid=mr(),this.name="",this.type="Material",this.blending=Dl,this.side=Pi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Yw,this.blendDst=Zw,this.blendEquation=Sl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=bm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eB,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wm,this.stencilZFail=wm,this.stencilZPass=wm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(n):o&&o.isVector3&&n&&n.isVector3?o.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Dl&&(n.blending=this.blending),this.side!==Pi&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function o(a){let l=[];for(let c in a){let A=a[c];delete A.metadata,l.push(A)}return l}if(t){let a=o(e.textures),l=o(e.images);a.length>0&&(n.textures=a),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let o=t.length;n=new Array(o);for(let a=0;a!==o;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},uB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cs={h:0,s:0,l:0},_p={h:0,s:0,l:0};function Vy(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}var ke=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){let o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=nt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,o=Fr.workingColorSpace){return this.r=e,this.g=t,this.b=n,Fr.toWorkingColorSpace(this,o),this}setHSL(e,t,n,o=Fr.workingColorSpace){if(e=sb(e,1),t=wn(t,0,1),n=wn(n,0,1),t===0)this.r=this.g=this.b=n;else{let a=n<=.5?n*(1+t):n+t-n*t,l=2*n-a;this.r=Vy(l,a,e+1/3),this.g=Vy(l,a,e),this.b=Vy(l,a,e-1/3)}return Fr.toWorkingColorSpace(this,o),this}setStyle(e,t=nt){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let a,l=o[1],c=o[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){let a=o[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=nt){let n=uB[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=aA(e.r),this.g=aA(e.g),this.b=aA(e.b),this}copyLinearToSRGB(e){return this.r=ky(e.r),this.g=ky(e.g),this.b=ky(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nt){return Fr.fromWorkingColorSpace(bi.copy(this),e),Math.round(wn(bi.r*255,0,255))*65536+Math.round(wn(bi.g*255,0,255))*256+Math.round(wn(bi.b*255,0,255))}getHexString(e=nt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Fr.workingColorSpace){Fr.fromWorkingColorSpace(bi.copy(this),t);let n=bi.r,o=bi.g,a=bi.b,l=Math.max(n,o,a),c=Math.min(n,o,a),A,u,h=(c+l)/2;if(c===l)A=0,u=0;else{let f=l-c;switch(u=h<=.5?f/(l+c):f/(2-l-c),l){case n:A=(o-a)/f+(o<a?6:0);break;case o:A=(a-n)/f+2;break;case a:A=(n-o)/f+4;break}A/=6}return e.h=A,e.s=u,e.l=h,e}getRGB(e,t=Fr.workingColorSpace){return Fr.fromWorkingColorSpace(bi.copy(this),t),e.r=bi.r,e.g=bi.g,e.b=bi.b,e}getStyle(e=nt){Fr.fromWorkingColorSpace(bi.copy(this),e);let t=bi.r,n=bi.g,o=bi.b;return e!==nt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(o*255)})`}offsetHSL(e,t,n){return this.getHSL(cs),cs.h+=e,cs.s+=t,cs.l+=n,this.setHSL(cs.h,cs.s,cs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(cs),e.getHSL(_p);let n=bh(cs.h,_p.h,t),o=bh(cs.s,_p.s,t),a=bh(cs.l,_p.l,t);return this.setHSL(n,o,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,o=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*o,this.g=a[1]*t+a[4]*n+a[7]*o,this.b=a[2]*t+a[5]*n+a[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},bi=new ke;ke.NAMES=uB;var Qt=class extends Sn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},wo=hO();function hO(){let i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),o=new Uint32Array(512);for(let A=0;A<256;++A){let u=A-127;u<-27?(n[A]=0,n[A|256]=32768,o[A]=24,o[A|256]=24):u<-14?(n[A]=1024>>-u-14,n[A|256]=1024>>-u-14|32768,o[A]=-u-1,o[A|256]=-u-1):u<=15?(n[A]=u+15<<10,n[A|256]=u+15<<10|32768,o[A]=13,o[A|256]=13):u<128?(n[A]=31744,n[A|256]=64512,o[A]=24,o[A|256]=24):(n[A]=31744,n[A|256]=64512,o[A]=13,o[A|256]=13)}let a=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let A=1;A<1024;++A){let u=A<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[A]=u|h}for(let A=1024;A<2048;++A)a[A]=939524096+(A-1024<<13);for(let A=1;A<31;++A)l[A]=A<<23;l[31]=1199570944,l[32]=2147483648;for(let A=33;A<63;++A)l[A]=2147483648+(A-32<<23);l[63]=3347054592;for(let A=1;A<64;++A)A!==32&&(c[A]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:o,mantissaTable:a,exponentTable:l,offsetTable:c}}function Yi(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=wn(i,-65504,65504),wo.floatView[0]=i;let e=wo.uint32View[0],t=e>>23&511;return wo.baseTable[t]+((e&8388607)>>wo.shiftTable[t])}function xh(i){let e=i>>10;return wo.uint32View[0]=wo.mantissaTable[wo.offsetTable[e]+(i&1023)]+wo.exponentTable[e],wo.floatView[0]}var fO={toHalfFloat:Yi,fromHalfFloat:xh},Un=new Y,Np=new he,it=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Dh,this.updateRange={offset:0,count:-1},this.gpuType=Gr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let o=0,a=this.itemSize;o<a;o++)this.array[e+o]=t.array[n+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Np.fromBufferAttribute(this,t),Np.applyMatrix3(e),this.setXY(t,Np.x,Np.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Un.fromBufferAttribute(this,t),Un.applyMatrix3(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Un.fromBufferAttribute(this,t),Un.applyMatrix4(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Un.fromBufferAttribute(this,t),Un.applyNormalMatrix(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Un.fromBufferAttribute(this,t),Un.transformDirection(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,o){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=o,this}setXYZW(e,t,n,o,a){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=o,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Dh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},Gx=class extends it{constructor(e,t,n){super(new Int8Array(e),t,n)}},zx=class extends it{constructor(e,t,n){super(new Uint8Array(e),t,n)}},Hx=class extends it{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}},Wx=class extends it{constructor(e,t,n){super(new Int16Array(e),t,n)}},_l=class extends it{constructor(e,t,n){super(new Uint16Array(e),t,n)}},Vx=class extends it{constructor(e,t,n){super(new Int32Array(e),t,n)}},_h=class extends it{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Xx=class extends it{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=xh(this.array[e*this.itemSize]);return this.normalized&&(t=pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=Yi(t),this}getY(e){let t=xh(this.array[e*this.itemSize+1]);return this.normalized&&(t=pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=Yi(t),this}getZ(e){let t=xh(this.array[e*this.itemSize+2]);return this.normalized&&(t=pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=Yi(t),this}getW(e){let t=xh(this.array[e*this.itemSize+3]);return this.normalized&&(t=pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=Yi(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(n),this}setXYZ(e,t,n,o){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(n),this.array[e+2]=Yi(o),this}setXYZW(e,t,n,o,a){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(n),this.array[e+2]=Yi(o),this.array[e+3]=Yi(a),this}},He=class extends it{constructor(e,t,n){super(new Float32Array(e),t,n)}},Yx=class extends it{constructor(e,t,n){super(new Float64Array(e),t,n)}},dO=0,Nr=new Qe,Xy=new ht,Vc=new Y,dr=new Cn,fh=new Cn,ni=new Y,qe=class i extends Ni{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dO++}),this.uuid=mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(AB(e)?_h:_l)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let a=new dt().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}let o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Nr.makeRotationFromQuaternion(e),this.applyMatrix4(Nr),this}rotateX(e){return Nr.makeRotationX(e),this.applyMatrix4(Nr),this}rotateY(e){return Nr.makeRotationY(e),this.applyMatrix4(Nr),this}rotateZ(e){return Nr.makeRotationZ(e),this.applyMatrix4(Nr),this}translate(e,t,n){return Nr.makeTranslation(e,t,n),this.applyMatrix4(Nr),this}scale(e,t,n){return Nr.makeScale(e,t,n),this.applyMatrix4(Nr),this}lookAt(e){return Xy.lookAt(e),Xy.updateMatrix(),this.applyMatrix4(Xy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vc).negate(),this.translate(Vc.x,Vc.y,Vc.z),this}setFromPoints(e){let t=[];for(let n=0,o=e.length;n<o;n++){let a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new He(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,o=t.length;n<o;n++){let a=t[n];dr.setFromBufferAttribute(a),this.morphTargetsRelative?(ni.addVectors(this.boundingBox.min,dr.min),this.boundingBox.expandByPoint(ni),ni.addVectors(this.boundingBox.max,dr.max),this.boundingBox.expandByPoint(ni)):(this.boundingBox.expandByPoint(dr.min),this.boundingBox.expandByPoint(dr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xt);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(e){let n=this.boundingSphere.center;if(dr.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){let c=t[a];fh.setFromBufferAttribute(c),this.morphTargetsRelative?(ni.addVectors(dr.min,fh.min),dr.expandByPoint(ni),ni.addVectors(dr.max,fh.max),dr.expandByPoint(ni)):(dr.expandByPoint(fh.min),dr.expandByPoint(fh.max))}dr.getCenter(n);let o=0;for(let a=0,l=e.count;a<l;a++)ni.fromBufferAttribute(e,a),o=Math.max(o,n.distanceToSquared(ni));if(t)for(let a=0,l=t.length;a<l;a++){let c=t[a],A=this.morphTargetsRelative;for(let u=0,h=c.count;u<h;u++)ni.fromBufferAttribute(c,u),A&&(Vc.fromBufferAttribute(e,u),ni.add(Vc)),o=Math.max(o,n.distanceToSquared(ni))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,o=t.position.array,a=t.normal.array,l=t.uv.array,c=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new it(new Float32Array(4*c),4));let A=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<c;B++)u[B]=new Y,h[B]=new Y;let f=new Y,d=new Y,p=new Y,m=new he,b=new he,g=new he,w=new Y,I=new Y;function v(B,R,P){f.fromArray(o,B*3),d.fromArray(o,R*3),p.fromArray(o,P*3),m.fromArray(l,B*2),b.fromArray(l,R*2),g.fromArray(l,P*2),d.sub(f),p.sub(f),b.sub(m),g.sub(m);let _=1/(b.x*g.y-g.x*b.y);isFinite(_)&&(w.copy(d).multiplyScalar(g.y).addScaledVector(p,-b.y).multiplyScalar(_),I.copy(p).multiplyScalar(b.x).addScaledVector(d,-g.x).multiplyScalar(_),u[B].add(w),u[R].add(w),u[P].add(w),h[B].add(I),h[R].add(I),h[P].add(I))}let E=this.groups;E.length===0&&(E=[{start:0,count:n.length}]);for(let B=0,R=E.length;B<R;++B){let P=E[B],_=P.start,Q=P.count;for(let W=_,U=_+Q;W<U;W+=3)v(n[W+0],n[W+1],n[W+2])}let S=new Y,C=new Y,M=new Y,D=new Y;function T(B){M.fromArray(a,B*3),D.copy(M);let R=u[B];S.copy(R),S.sub(M.multiplyScalar(M.dot(R))).normalize(),C.crossVectors(D,R);let _=C.dot(h[B])<0?-1:1;A[B*4]=S.x,A[B*4+1]=S.y,A[B*4+2]=S.z,A[B*4+3]=_}for(let B=0,R=E.length;B<R;++B){let P=E[B],_=P.start,Q=P.count;for(let W=_,U=_+Q;W<U;W+=3)T(n[W+0]),T(n[W+1]),T(n[W+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new it(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,p=n.count;d<p;d++)n.setXYZ(d,0,0,0);let o=new Y,a=new Y,l=new Y,c=new Y,A=new Y,u=new Y,h=new Y,f=new Y;if(e)for(let d=0,p=e.count;d<p;d+=3){let m=e.getX(d+0),b=e.getX(d+1),g=e.getX(d+2);o.fromBufferAttribute(t,m),a.fromBufferAttribute(t,b),l.fromBufferAttribute(t,g),h.subVectors(l,a),f.subVectors(o,a),h.cross(f),c.fromBufferAttribute(n,m),A.fromBufferAttribute(n,b),u.fromBufferAttribute(n,g),c.add(h),A.add(h),u.add(h),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(b,A.x,A.y,A.z),n.setXYZ(g,u.x,u.y,u.z)}else for(let d=0,p=t.count;d<p;d+=3)o.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),l.fromBufferAttribute(t,d+2),h.subVectors(l,a),f.subVectors(o,a),h.cross(f),n.setXYZ(d+0,h.x,h.y,h.z),n.setXYZ(d+1,h.x,h.y,h.z),n.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ni.fromBufferAttribute(e,t),ni.normalize(),e.setXYZ(t,ni.x,ni.y,ni.z)}toNonIndexed(){function e(c,A){let u=c.array,h=c.itemSize,f=c.normalized,d=new u.constructor(A.length*h),p=0,m=0;for(let b=0,g=A.length;b<g;b++){c.isInterleavedBufferAttribute?p=A[b]*c.data.stride+c.offset:p=A[b]*h;for(let w=0;w<h;w++)d[m++]=u[p++]}return new it(d,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new i,n=this.index.array,o=this.attributes;for(let c in o){let A=o[c],u=e(A,n);t.setAttribute(c,u)}let a=this.morphAttributes;for(let c in a){let A=[],u=a[c];for(let h=0,f=u.length;h<f;h++){let d=u[h],p=e(d,n);A.push(p)}t.morphAttributes[c]=A}t.morphTargetsRelative=this.morphTargetsRelative;let l=this.groups;for(let c=0,A=l.length;c<A;c++){let u=l[c];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let A=this.parameters;for(let u in A)A[u]!==void 0&&(e[u]=A[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let A in n){let u=n[A];e.data.attributes[A]=u.toJSON(e.data)}let o={},a=!1;for(let A in this.morphAttributes){let u=this.morphAttributes[A],h=[];for(let f=0,d=u.length;f<d;f++){let p=u[f];h.push(p.toJSON(e.data))}h.length>0&&(o[A]=h,a=!0)}a&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);let l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));let c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let o=e.attributes;for(let u in o){let h=o[u];this.setAttribute(u,h.clone(t))}let a=e.morphAttributes;for(let u in a){let h=[],f=a[u];for(let d=0,p=f.length;d<p;d++)h.push(f[d].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;let l=e.groups;for(let u=0,h=l.length;u<h;u++){let f=l[u];this.addGroup(f.start,f.count,f.materialIndex)}let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let A=e.boundingSphere;return A!==null&&(this.boundingSphere=A.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},$M=new Qe,ml=new Ws,Fp=new Xt,eT=new Y,Xc=new Y,Yc=new Y,Zc=new Y,Yy=new Y,Qp=new Y,Up=new he,Op=new he,Gp=new he,tT=new Y,nT=new Y,iT=new Y,zp=new Y,Hp=new Y,Xe=class extends ht{constructor(e=new qe,t=new Qt){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let o=t[n[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(e,t){let n=this.geometry,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(o,e);let c=this.morphTargetInfluences;if(a&&c){Qp.set(0,0,0);for(let A=0,u=a.length;A<u;A++){let h=c[A],f=a[A];h!==0&&(Yy.fromBufferAttribute(f,e),l?Qp.addScaledVector(Yy,h):Qp.addScaledVector(Yy.sub(t),h))}t.add(Qp)}return t}raycast(e,t){let n=this.geometry,o=this.material,a=this.matrixWorld;o!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Fp.copy(n.boundingSphere),Fp.applyMatrix4(a),ml.copy(e.ray).recast(e.near),!(Fp.containsPoint(ml.origin)===!1&&(ml.intersectSphere(Fp,eT)===null||ml.origin.distanceToSquared(eT)>(e.far-e.near)**2))&&($M.copy(a).invert(),ml.copy(e.ray).applyMatrix4($M),!(n.boundingBox!==null&&ml.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,ml)))}_computeIntersections(e,t,n){let o,a=this.geometry,l=this.material,c=a.index,A=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,f=a.attributes.normal,d=a.groups,p=a.drawRange;if(c!==null)if(Array.isArray(l))for(let m=0,b=d.length;m<b;m++){let g=d[m],w=l[g.materialIndex],I=Math.max(g.start,p.start),v=Math.min(c.count,Math.min(g.start+g.count,p.start+p.count));for(let E=I,S=v;E<S;E+=3){let C=c.getX(E),M=c.getX(E+1),D=c.getX(E+2);o=Wp(this,w,e,n,u,h,f,C,M,D),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{let m=Math.max(0,p.start),b=Math.min(c.count,p.start+p.count);for(let g=m,w=b;g<w;g+=3){let I=c.getX(g),v=c.getX(g+1),E=c.getX(g+2);o=Wp(this,l,e,n,u,h,f,I,v,E),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(A!==void 0)if(Array.isArray(l))for(let m=0,b=d.length;m<b;m++){let g=d[m],w=l[g.materialIndex],I=Math.max(g.start,p.start),v=Math.min(A.count,Math.min(g.start+g.count,p.start+p.count));for(let E=I,S=v;E<S;E+=3){let C=E,M=E+1,D=E+2;o=Wp(this,w,e,n,u,h,f,C,M,D),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{let m=Math.max(0,p.start),b=Math.min(A.count,p.start+p.count);for(let g=m,w=b;g<w;g+=3){let I=g,v=g+1,E=g+2;o=Wp(this,l,e,n,u,h,f,I,v,E),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}};function pO(i,e,t,n,o,a,l,c){let A;if(e.side===Yn?A=n.intersectTriangle(l,a,o,!0,c):A=n.intersectTriangle(o,a,l,e.side===Pi,c),A===null)return null;Hp.copy(c),Hp.applyMatrix4(i.matrixWorld);let u=t.ray.origin.distanceTo(Hp);return u<t.near||u>t.far?null:{distance:u,point:Hp.clone(),object:i}}function Wp(i,e,t,n,o,a,l,c,A,u){i.getVertexPosition(c,Xc),i.getVertexPosition(A,Yc),i.getVertexPosition(u,Zc);let h=pO(i,e,t,n,Xc,Yc,Zc,zp);if(h){o&&(Up.fromBufferAttribute(o,c),Op.fromBufferAttribute(o,A),Gp.fromBufferAttribute(o,u),h.uv=Co.getInterpolation(zp,Xc,Yc,Zc,Up,Op,Gp,new he)),a&&(Up.fromBufferAttribute(a,c),Op.fromBufferAttribute(a,A),Gp.fromBufferAttribute(a,u),h.uv1=Co.getInterpolation(zp,Xc,Yc,Zc,Up,Op,Gp,new he),h.uv2=h.uv1),l&&(tT.fromBufferAttribute(l,c),nT.fromBufferAttribute(l,A),iT.fromBufferAttribute(l,u),h.normal=Co.getInterpolation(zp,Xc,Yc,Zc,tT,nT,iT,new Y),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));let f={a:c,b:A,c:u,normal:new Y,materialIndex:0};Co.getNormal(Xc,Yc,Zc,f.normal),h.face=f}return h}var En=class i extends qe{constructor(e=1,t=1,n=1,o=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:o,heightSegments:a,depthSegments:l};let c=this;o=Math.floor(o),a=Math.floor(a),l=Math.floor(l);let A=[],u=[],h=[],f=[],d=0,p=0;m("z","y","x",-1,-1,n,t,e,l,a,0),m("z","y","x",1,-1,n,t,-e,l,a,1),m("x","z","y",1,1,e,n,t,o,l,2),m("x","z","y",1,-1,e,n,-t,o,l,3),m("x","y","z",1,-1,e,t,n,o,a,4),m("x","y","z",-1,-1,e,t,-n,o,a,5),this.setIndex(A),this.setAttribute("position",new He(u,3)),this.setAttribute("normal",new He(h,3)),this.setAttribute("uv",new He(f,2));function m(b,g,w,I,v,E,S,C,M,D,T){let B=E/M,R=S/D,P=E/2,_=S/2,Q=C/2,W=M+1,U=D+1,H=0,O=0,F=new Y;for(let z=0;z<U;z++){let k=z*R-_;for(let X=0;X<W;X++){let te=X*B-P;F[b]=te*I,F[g]=k*v,F[w]=Q,u.push(F.x,F.y,F.z),F[b]=0,F[g]=0,F[w]=C>0?1:-1,h.push(F.x,F.y,F.z),f.push(X/M),f.push(1-z/D),H+=1}}for(let z=0;z<D;z++)for(let k=0;k<M;k++){let X=d+k+W*z,te=d+k+W*(z+1),ie=d+(k+1)+W*(z+1),re=d+(k+1)+W*z;A.push(X,te,re),A.push(te,ie,re),O+=6}c.addGroup(p,O,T),p+=O,d+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function dA(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let o=i[t][n];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=o.clone():Array.isArray(o)?e[t][n]=o.slice():e[t][n]=o}}return e}function ki(i){let e={};for(let t=0;t<i.length;t++){let n=dA(i[t]);for(let o in n)e[o]=n[o]}return e}function mO(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function hB(i){return i.getRenderTarget()===null?i.outputColorSpace:gr}var jn={clone:dA,merge:ki},gO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,pt=class extends Sn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gO,this.fragmentShader=vO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dA(e.uniforms),this.uniformsGroups=mO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let o in this.uniforms){let l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let o in this.extensions)this.extensions[o]===!0&&(n[o]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},pA=class extends ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe,this.coordinateSystem=Qs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Jt=class extends pA{constructor(e=50,t=1,n=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=uA*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Ll*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uA*2*Math.atan(Math.tan(Ll*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,o,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Ll*.5*this.fov)/this.zoom,n=2*t,o=this.aspect*n,a=-.5*o,l=this.view;if(this.view!==null&&this.view.enabled){let A=l.fullWidth,u=l.fullHeight;a+=l.offsetX*o/A,t-=l.offsetY*n/u,o*=l.width/A,n*=l.height/u}let c=this.filmOffset;c!==0&&(a+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Kc=-90,Jc=1,Em=class extends ht{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;let o=new Jt(Kc,Jc,e,t);o.layers=this.layers,this.add(o);let a=new Jt(Kc,Jc,e,t);a.layers=this.layers,this.add(a);let l=new Jt(Kc,Jc,e,t);l.layers=this.layers,this.add(l);let c=new Jt(Kc,Jc,e,t);c.layers=this.layers,this.add(c);let A=new Jt(Kc,Jc,e,t);A.layers=this.layers,this.add(A);let u=new Jt(Kc,Jc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,o,a,l,c,A]=t;for(let u of t)this.remove(u);if(e===Qs)n.up.set(0,1,0),n.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),A.up.set(0,1,0),A.lookAt(0,0,-1);else if(e===Bh)n.up.set(0,-1,0),n.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),A.up.set(0,-1,0),A.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,a,l,c,A,u]=this.children,h=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=Us,e.xr.enabled=!1;let p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,o),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,l),e.setRenderTarget(n,3),e.render(t,c),e.setRenderTarget(n,4),e.render(t,A),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(h),e.toneMapping=f,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}},Nl=class extends Vt{constructor(e,t,n,o,a,l,c,A,u,h){e=e!==void 0?e:[],t=t!==void 0?t:ha,super(e,t,n,o,a,l,c,A,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Im=class extends Mt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},o=[n,n,n,n,n,n];t.encoding!==void 0&&(Ch("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ua?nt:Gs),this.texture=new Nl(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:St}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new En(5,5,5),a=new pt({name:"CubemapFromEquirect",uniforms:dA(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Yn,blending:Zi});a.uniforms.tEquirect.value=t;let l=new Xe(o,a),c=t.minFilter;return t.minFilter===us&&(t.minFilter=St),new Em(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,o){let a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,o);e.setRenderTarget(a)}},Zy=new Y,yO=new Y,xO=new dt,Ur=class{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,o){return this.normal.set(e,t,n),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let o=Zy.subVectors(n,t).cross(yO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(Zy),o=this.normal.dot(n);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/o;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||xO.getNormalMatrix(e),o=this.coplanarPoint(Zy).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-o.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},gl=new Xt,Vp=new Y,pa=class{constructor(e=new Ur,t=new Ur,n=new Ur,o=new Ur,a=new Ur,l=new Ur){this.planes=[e,t,n,o,a,l]}set(e,t,n,o,a,l){let c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(o),c[4].copy(a),c[5].copy(l),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Qs){let n=this.planes,o=e.elements,a=o[0],l=o[1],c=o[2],A=o[3],u=o[4],h=o[5],f=o[6],d=o[7],p=o[8],m=o[9],b=o[10],g=o[11],w=o[12],I=o[13],v=o[14],E=o[15];if(n[0].setComponents(A-a,d-u,g-p,E-w).normalize(),n[1].setComponents(A+a,d+u,g+p,E+w).normalize(),n[2].setComponents(A+l,d+h,g+m,E+I).normalize(),n[3].setComponents(A-l,d-h,g-m,E-I).normalize(),n[4].setComponents(A-c,d-f,g-b,E-v).normalize(),t===Qs)n[5].setComponents(A+c,d+f,g+b,E+v).normalize();else if(t===Bh)n[5].setComponents(c,f,b,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),gl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),gl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gl)}intersectsSprite(e){return gl.center.set(0,0,0),gl.radius=.7071067811865476,gl.applyMatrix4(e.matrixWorld),this.intersectsSphere(gl)}intersectsSphere(e){let t=this.planes,n=e.center,o=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<o)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let o=t[n];if(Vp.x=o.normal.x>0?e.max.x:e.min.x,Vp.y=o.normal.y>0?e.max.y:e.min.y,Vp.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Vp)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function fB(){let i=null,e=!1,t=null,n=null;function o(a,l){t(a,l),n=i.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(o),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function wO(i,e){let t=e.isWebGL2,n=new WeakMap;function o(u,h){let f=u.array,d=u.usage,p=i.createBuffer();i.bindBuffer(h,p),i.bufferData(h,f,d),u.onUploadCallback();let m;if(f instanceof Float32Array)m=i.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)m=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=i.SHORT;else if(f instanceof Uint32Array)m=i.UNSIGNED_INT;else if(f instanceof Int32Array)m=i.INT;else if(f instanceof Int8Array)m=i.BYTE;else if(f instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function a(u,h,f){let d=h.array,p=h.updateRange;i.bindBuffer(f,u),p.count===-1?i.bufferSubData(f,0,d):(t?i.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):i.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1),h.onUploadCallback()}function l(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function c(u){u.isInterleavedBufferAttribute&&(u=u.data);let h=n.get(u);h&&(i.deleteBuffer(h.buffer),n.delete(u))}function A(u,h){if(u.isGLBufferAttribute){let d=n.get(u);(!d||d.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let f=n.get(u);f===void 0?n.set(u,o(u,h)):f.version<u.version&&(a(f.buffer,u,h),f.version=u.version)}return{get:l,remove:c,update:A}}var Fi=class i extends qe{constructor(e=1,t=1,n=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:o};let a=e/2,l=t/2,c=Math.floor(n),A=Math.floor(o),u=c+1,h=A+1,f=e/c,d=t/A,p=[],m=[],b=[],g=[];for(let w=0;w<h;w++){let I=w*d-l;for(let v=0;v<u;v++){let E=v*f-a;m.push(E,-I,0),b.push(0,0,1),g.push(v/c),g.push(1-w/A)}}for(let w=0;w<A;w++)for(let I=0;I<c;I++){let v=I+u*w,E=I+u*(w+1),S=I+1+u*(w+1),C=I+1+u*w;p.push(v,E,C),p.push(E,S,C)}this.setIndex(p),this.setAttribute("position",new He(m,3)),this.setAttribute("normal",new He(b,3)),this.setAttribute("uv",new He(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.widthSegments,e.heightSegments)}},bO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,CO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,SO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,EO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IO=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,MO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,TO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,DO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,BO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,RO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,PO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_O=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,NO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,FO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,QO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,UO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,OO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,zO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,HO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,WO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,YO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ZO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,JO="gl_FragColor = linearToOutputTexel( gl_FragColor );",jO=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$O=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,eG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,AG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,hG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,dG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,yG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xG=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,CG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,IG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,MG=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,TG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,DG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,RG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kG=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,PG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_G=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,NG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,FG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,QG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,UG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,WG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,XG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ZG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$G=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,e9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,t9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,n9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,i9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,r9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,s9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,o9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,a9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,l9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,c9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,A9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,u9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,h9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,f9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,d9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,p9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,m9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,g9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,v9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,y9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,x9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,S9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E9=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,I9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,M9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,T9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,D9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,B9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,k9=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,P9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Q9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,O9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,G9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,W9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Z9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,K9=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,j9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mt={alphahash_fragment:bO,alphahash_pars_fragment:CO,alphamap_fragment:SO,alphamap_pars_fragment:EO,alphatest_fragment:IO,alphatest_pars_fragment:MO,aomap_fragment:TO,aomap_pars_fragment:DO,begin_vertex:BO,beginnormal_vertex:LO,bsdfs:RO,iridescence_fragment:kO,bumpmap_pars_fragment:PO,clipping_planes_fragment:_O,clipping_planes_pars_fragment:NO,clipping_planes_pars_vertex:FO,clipping_planes_vertex:QO,color_fragment:UO,color_pars_fragment:OO,color_pars_vertex:GO,color_vertex:zO,common:HO,cube_uv_reflection_fragment:WO,defaultnormal_vertex:VO,displacementmap_pars_vertex:XO,displacementmap_vertex:YO,emissivemap_fragment:ZO,emissivemap_pars_fragment:KO,colorspace_fragment:JO,colorspace_pars_fragment:jO,envmap_fragment:qO,envmap_common_pars_fragment:$O,envmap_pars_fragment:eG,envmap_pars_vertex:tG,envmap_physical_pars_fragment:fG,envmap_vertex:nG,fog_vertex:iG,fog_pars_vertex:rG,fog_fragment:sG,fog_pars_fragment:oG,gradientmap_pars_fragment:aG,lightmap_fragment:lG,lightmap_pars_fragment:cG,lights_lambert_fragment:AG,lights_lambert_pars_fragment:uG,lights_pars_begin:hG,lights_toon_fragment:dG,lights_toon_pars_fragment:pG,lights_phong_fragment:mG,lights_phong_pars_fragment:gG,lights_physical_fragment:vG,lights_physical_pars_fragment:yG,lights_fragment_begin:xG,lights_fragment_maps:wG,lights_fragment_end:bG,logdepthbuf_fragment:CG,logdepthbuf_pars_fragment:SG,logdepthbuf_pars_vertex:EG,logdepthbuf_vertex:IG,map_fragment:MG,map_pars_fragment:TG,map_particle_fragment:DG,map_particle_pars_fragment:BG,metalnessmap_fragment:LG,metalnessmap_pars_fragment:RG,morphcolor_vertex:kG,morphnormal_vertex:PG,morphtarget_pars_vertex:_G,morphtarget_vertex:NG,normal_fragment_begin:FG,normal_fragment_maps:QG,normal_pars_fragment:UG,normal_pars_vertex:OG,normal_vertex:GG,normalmap_pars_fragment:zG,clearcoat_normal_fragment_begin:HG,clearcoat_normal_fragment_maps:WG,clearcoat_pars_fragment:VG,iridescence_pars_fragment:XG,opaque_fragment:YG,packing:ZG,premultiplied_alpha_fragment:KG,project_vertex:JG,dithering_fragment:jG,dithering_pars_fragment:qG,roughnessmap_fragment:$G,roughnessmap_pars_fragment:e9,shadowmap_pars_fragment:t9,shadowmap_pars_vertex:n9,shadowmap_vertex:i9,shadowmask_pars_fragment:r9,skinbase_vertex:s9,skinning_pars_vertex:o9,skinning_vertex:a9,skinnormal_vertex:l9,specularmap_fragment:c9,specularmap_pars_fragment:A9,tonemapping_fragment:u9,tonemapping_pars_fragment:h9,transmission_fragment:f9,transmission_pars_fragment:d9,uv_pars_fragment:p9,uv_pars_vertex:m9,uv_vertex:g9,worldpos_vertex:v9,background_vert:y9,background_frag:x9,backgroundCube_vert:w9,backgroundCube_frag:b9,cube_vert:C9,cube_frag:S9,depth_vert:E9,depth_frag:I9,distanceRGBA_vert:M9,distanceRGBA_frag:T9,equirect_vert:D9,equirect_frag:B9,linedashed_vert:L9,linedashed_frag:R9,meshbasic_vert:k9,meshbasic_frag:P9,meshlambert_vert:_9,meshlambert_frag:N9,meshmatcap_vert:F9,meshmatcap_frag:Q9,meshnormal_vert:U9,meshnormal_frag:O9,meshphong_vert:G9,meshphong_frag:z9,meshphysical_vert:H9,meshphysical_frag:W9,meshtoon_vert:V9,meshtoon_frag:X9,points_vert:Y9,points_frag:Z9,shadow_vert:K9,shadow_frag:J9,sprite_vert:j9,sprite_frag:q9},Ve={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dt},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0},uvTransform:{value:new dt}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}}},Or={basic:{uniforms:ki([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:ki([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new ke(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:ki([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:ki([Ve.common,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.roughnessmap,Ve.metalnessmap,Ve.fog,Ve.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:ki([Ve.common,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.gradientmap,Ve.fog,Ve.lights,{emissive:{value:new ke(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:ki([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:ki([Ve.points,Ve.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:ki([Ve.common,Ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:ki([Ve.common,Ve.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:ki([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:ki([Ve.sprite,Ve.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mt.backgroundCube_vert,fragmentShader:mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:ki([Ve.common,Ve.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:ki([Ve.lights,Ve.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};Or.physical={uniforms:ki([Or.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dt},clearcoatNormalScale:{value:new he(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dt},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dt},transmissionSamplerSize:{value:new he},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dt},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dt},anisotropyVector:{value:new he},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dt}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};var Xp={r:0,b:0,g:0};function $9(i,e,t,n,o,a,l){let c=new ke(0),A=a===!0?0:1,u,h,f=null,d=0,p=null;function m(g,w){let I=!1,v=w.isScene===!0?w.background:null;switch(v&&v.isTexture&&(v=(w.backgroundBlurriness>0?t:e).get(v)),v===null?b(c,A):v&&v.isColor&&(b(v,1),I=!0),i.xr.getEnvironmentBlendMode()){case"opaque":I=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,l),I=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,l),I=!0;break}(i.autoClear||I)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),v&&(v.isCubeTexture||v.mapping===DA)?(h===void 0&&(h=new Xe(new En(1,1,1),new pt({name:"BackgroundCubeMaterial",uniforms:dA(Or.backgroundCube.uniforms),vertexShader:Or.backgroundCube.vertexShader,fragmentShader:Or.backgroundCube.fragmentShader,side:Yn,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,M,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(h)),h.material.uniforms.envMap.value=v,h.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.toneMapped=v.colorSpace!==nt,(f!==v||d!==v.version||p!==i.toneMapping)&&(h.material.needsUpdate=!0,f=v,d=v.version,p=i.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):v&&v.isTexture&&(u===void 0&&(u=new Xe(new Fi(2,2),new pt({name:"BackgroundMaterial",uniforms:dA(Or.background.uniforms),vertexShader:Or.background.vertexShader,fragmentShader:Or.background.fragmentShader,side:Pi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=v,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=v.colorSpace!==nt,v.matrixAutoUpdate===!0&&v.updateMatrix(),u.material.uniforms.uvTransform.value.copy(v.matrix),(f!==v||d!==v.version||p!==i.toneMapping)&&(u.material.needsUpdate=!0,f=v,d=v.version,p=i.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function b(g,w){g.getRGB(Xp,hB(i)),n.buffers.color.setClear(Xp.r,Xp.g,Xp.b,w,l)}return{getClearColor:function(){return c},setClearColor:function(g,w=1){c.set(g),A=w,b(c,A)},getClearAlpha:function(){return A},setClearAlpha:function(g){A=g,b(c,A)},render:m}}function ez(i,e,t,n){let o=i.getParameter(i.MAX_VERTEX_ATTRIBS),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),l=n.isWebGL2||a!==null,c={},A=g(null),u=A,h=!1;function f(Q,W,U,H,O){let F=!1;if(l){let z=b(H,U,W);u!==z&&(u=z,p(u.object)),F=w(Q,H,U,O),F&&I(Q,H,U,O)}else{let z=W.wireframe===!0;(u.geometry!==H.id||u.program!==U.id||u.wireframe!==z)&&(u.geometry=H.id,u.program=U.id,u.wireframe=z,F=!0)}O!==null&&t.update(O,i.ELEMENT_ARRAY_BUFFER),(F||h)&&(h=!1,D(Q,W,U,H),O!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(O).buffer))}function d(){return n.isWebGL2?i.createVertexArray():a.createVertexArrayOES()}function p(Q){return n.isWebGL2?i.bindVertexArray(Q):a.bindVertexArrayOES(Q)}function m(Q){return n.isWebGL2?i.deleteVertexArray(Q):a.deleteVertexArrayOES(Q)}function b(Q,W,U){let H=U.wireframe===!0,O=c[Q.id];O===void 0&&(O={},c[Q.id]=O);let F=O[W.id];F===void 0&&(F={},O[W.id]=F);let z=F[H];return z===void 0&&(z=g(d()),F[H]=z),z}function g(Q){let W=[],U=[],H=[];for(let O=0;O<o;O++)W[O]=0,U[O]=0,H[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:U,attributeDivisors:H,object:Q,attributes:{},index:null}}function w(Q,W,U,H){let O=u.attributes,F=W.attributes,z=0,k=U.getAttributes();for(let X in k)if(k[X].location>=0){let ie=O[X],re=F[X];if(re===void 0&&(X==="instanceMatrix"&&Q.instanceMatrix&&(re=Q.instanceMatrix),X==="instanceColor"&&Q.instanceColor&&(re=Q.instanceColor)),ie===void 0||ie.attribute!==re||re&&ie.data!==re.data)return!0;z++}return u.attributesNum!==z||u.index!==H}function I(Q,W,U,H){let O={},F=W.attributes,z=0,k=U.getAttributes();for(let X in k)if(k[X].location>=0){let ie=F[X];ie===void 0&&(X==="instanceMatrix"&&Q.instanceMatrix&&(ie=Q.instanceMatrix),X==="instanceColor"&&Q.instanceColor&&(ie=Q.instanceColor));let re={};re.attribute=ie,ie&&ie.data&&(re.data=ie.data),O[X]=re,z++}u.attributes=O,u.attributesNum=z,u.index=H}function v(){let Q=u.newAttributes;for(let W=0,U=Q.length;W<U;W++)Q[W]=0}function E(Q){S(Q,0)}function S(Q,W){let U=u.newAttributes,H=u.enabledAttributes,O=u.attributeDivisors;U[Q]=1,H[Q]===0&&(i.enableVertexAttribArray(Q),H[Q]=1),O[Q]!==W&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,W),O[Q]=W)}function C(){let Q=u.newAttributes,W=u.enabledAttributes;for(let U=0,H=W.length;U<H;U++)W[U]!==Q[U]&&(i.disableVertexAttribArray(U),W[U]=0)}function M(Q,W,U,H,O,F,z){z===!0?i.vertexAttribIPointer(Q,W,U,O,F):i.vertexAttribPointer(Q,W,U,H,O,F)}function D(Q,W,U,H){if(n.isWebGL2===!1&&(Q.isInstancedMesh||H.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();let O=H.attributes,F=U.getAttributes(),z=W.defaultAttributeValues;for(let k in F){let X=F[k];if(X.location>=0){let te=O[k];if(te===void 0&&(k==="instanceMatrix"&&Q.instanceMatrix&&(te=Q.instanceMatrix),k==="instanceColor"&&Q.instanceColor&&(te=Q.instanceColor)),te!==void 0){let ie=te.normalized,re=te.itemSize,se=t.get(te);if(se===void 0)continue;let oe=se.buffer,le=se.type,be=se.bytesPerElement,De=n.isWebGL2===!0&&(le===i.INT||le===i.UNSIGNED_INT||te.gpuType===Kw);if(te.isInterleavedBufferAttribute){let pe=te.data,K=pe.stride,we=te.offset;if(pe.isInstancedInterleavedBuffer){for(let me=0;me<X.locationSize;me++)S(X.location+me,pe.meshPerAttribute);Q.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let me=0;me<X.locationSize;me++)E(X.location+me);i.bindBuffer(i.ARRAY_BUFFER,oe);for(let me=0;me<X.locationSize;me++)M(X.location+me,re/X.locationSize,le,ie,K*be,(we+re/X.locationSize*me)*be,De)}else{if(te.isInstancedBufferAttribute){for(let pe=0;pe<X.locationSize;pe++)S(X.location+pe,te.meshPerAttribute);Q.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let pe=0;pe<X.locationSize;pe++)E(X.location+pe);i.bindBuffer(i.ARRAY_BUFFER,oe);for(let pe=0;pe<X.locationSize;pe++)M(X.location+pe,re/X.locationSize,le,ie,re*be,re/X.locationSize*pe*be,De)}}else if(z!==void 0){let ie=z[k];if(ie!==void 0)switch(ie.length){case 2:i.vertexAttrib2fv(X.location,ie);break;case 3:i.vertexAttrib3fv(X.location,ie);break;case 4:i.vertexAttrib4fv(X.location,ie);break;default:i.vertexAttrib1fv(X.location,ie)}}}}C()}function T(){P();for(let Q in c){let W=c[Q];for(let U in W){let H=W[U];for(let O in H)m(H[O].object),delete H[O];delete W[U]}delete c[Q]}}function B(Q){if(c[Q.id]===void 0)return;let W=c[Q.id];for(let U in W){let H=W[U];for(let O in H)m(H[O].object),delete H[O];delete W[U]}delete c[Q.id]}function R(Q){for(let W in c){let U=c[W];if(U[Q.id]===void 0)continue;let H=U[Q.id];for(let O in H)m(H[O].object),delete H[O];delete U[Q.id]}}function P(){_(),h=!0,u!==A&&(u=A,p(u.object))}function _(){A.geometry=null,A.program=null,A.wireframe=!1}return{setup:f,reset:P,resetDefaultState:_,dispose:T,releaseStatesOfGeometry:B,releaseStatesOfProgram:R,initAttributes:v,enableAttribute:E,disableUnusedAttributes:C}}function tz(i,e,t,n){let o=n.isWebGL2,a;function l(u){a=u}function c(u,h){i.drawArrays(a,u,h),t.update(h,a,1)}function A(u,h,f){if(f===0)return;let d,p;if(o)d=i,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](a,u,h,f),t.update(h,a,f)}this.setMode=l,this.render=c,this.renderInstances=A}function nz(i,e,t){let n;function o(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){let M=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function a(M){if(M==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext",c=t.precision!==void 0?t.precision:"highp",A=a(c);A!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",A,"instead."),c=A);let u=l||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,f=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_TEXTURE_SIZE),m=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),g=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),w=i.getParameter(i.MAX_VARYING_VECTORS),I=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),v=d>0,E=l||e.has("OES_texture_float"),S=v&&E,C=l?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:l,drawBuffers:u,getMaxAnisotropy:o,getMaxPrecision:a,precision:c,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:m,maxAttributes:b,maxVertexUniforms:g,maxVaryings:w,maxFragmentUniforms:I,vertexTextures:v,floatFragmentTextures:E,floatVertexTextures:S,maxSamples:C}}function iz(i){let e=this,t=null,n=0,o=!1,a=!1,l=new Ur,c=new dt,A={value:null,needsUpdate:!1};this.uniform=A,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){let p=f.length!==0||d||n!==0||o;return o=d,n=f.length,p},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,d){t=h(f,d,0)},this.setState=function(f,d,p){let m=f.clippingPlanes,b=f.clipIntersection,g=f.clipShadows,w=i.get(f);if(!o||m===null||m.length===0||a&&!g)a?h(null):u();else{let I=a?0:n,v=I*4,E=w.clippingState||null;A.value=E,E=h(m,d,v,p);for(let S=0;S!==v;++S)E[S]=t[S];w.clippingState=E,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=I}};function u(){A.value!==t&&(A.value=t,A.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(f,d,p,m){let b=f!==null?f.length:0,g=null;if(b!==0){if(g=A.value,m!==!0||g===null){let w=p+b*4,I=d.matrixWorldInverse;c.getNormalMatrix(I),(g===null||g.length<w)&&(g=new Float32Array(w));for(let v=0,E=p;v!==b;++v,E+=4)l.copy(f[v]).applyMatrix4(I,c),l.normal.toArray(g,E),g[E+3]=l.constant}A.value=g,A.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,g}}function rz(i){let e=new WeakMap;function t(l,c){return c===Mo?l.mapping=ha:c===Mh&&(l.mapping=fa),l}function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){let c=l.mapping;if(c===Mo||c===Mh)if(e.has(l)){let A=e.get(l).texture;return t(A,l.mapping)}else{let A=l.image;if(A&&A.height>0){let u=new Im(A.height/2);return u.fromEquirectangularTexture(i,l),e.set(l,u),l.addEventListener("dispose",o),t(u.texture,l.mapping)}else return null}}return l}function o(l){let c=l.target;c.removeEventListener("dispose",o);let A=e.get(c);A!==void 0&&(e.delete(c),A.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}var Ci=class extends pA{constructor(e=-1,t=1,n=1,o=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=o,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,o,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,o=(this.top+this.bottom)/2,a=n-e,l=n+e,c=o+t,A=o-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,l=a+u*this.view.width,c-=h*this.view.offsetY,A=c-h*this.view.height}this.projectionMatrix.makeOrthographic(a,l,c,A,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},sA=4,rT=[.125,.215,.35,.446,.526,.582],El=20,Ky=new Ci,sT=new ke,Jy=null,Cl=(1+Math.sqrt(5))/2,jc=1/Cl,oT=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,Cl,jc),new Y(0,Cl,-jc),new Y(jc,0,Cl),new Y(-jc,0,Cl),new Y(Cl,jc,0),new Y(-Cl,jc,0)],Fl=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,o=100){Jy=this._renderer.getRenderTarget(),this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,o,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=cT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Jy),e.scissorTest=!1,Yp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ha||e.mapping===fa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Jy=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:St,minFilter:St,generateMipmaps:!1,type:bn,format:Xn,colorSpace:gr,depthBuffer:!1},o=aT(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aT(e,t,n);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=sz(a)),this._blurMaterial=oz(a,e,t)}return o}_compileMaterial(e){let t=new Xe(this._lodPlanes[0],e);this._renderer.compile(t,Ky)}_sceneToCubeUV(e,t,n,o){let c=new Jt(90,1,t,n),A=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,d=h.toneMapping;h.getClearColor(sT),h.toneMapping=Us,h.autoClear=!1;let p=new Qt({name:"PMREM.Background",side:Yn,depthWrite:!1,depthTest:!1}),m=new Xe(new En,p),b=!1,g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,b=!0):(p.color.copy(sT),b=!0);for(let w=0;w<6;w++){let I=w%3;I===0?(c.up.set(0,A[w],0),c.lookAt(u[w],0,0)):I===1?(c.up.set(0,0,A[w]),c.lookAt(0,u[w],0)):(c.up.set(0,A[w],0),c.lookAt(0,0,u[w]));let v=this._cubeSize;Yp(o,I*v,w>2?v:0,v,v),h.setRenderTarget(o),b&&h.render(m,c),h.render(e,c)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=d,h.autoClear=f,e.background=g}_textureToCubeUV(e,t){let n=this._renderer,o=e.mapping===ha||e.mapping===fa;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=cT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lT());let a=o?this._cubemapMaterial:this._equirectMaterial,l=new Xe(this._lodPlanes[0],a),c=a.uniforms;c.envMap.value=e;let A=this._cubeSize;Yp(t,0,0,3*A,2*A),n.setRenderTarget(t),n.render(l,Ky)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){let a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=oT[(o-1)%oT.length];this._blur(e,o-1,o,a,l)}t.autoClear=n}_blur(e,t,n,o,a){let l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,o,"latitudinal",a),this._halfBlur(l,e,n,n,o,"longitudinal",a)}_halfBlur(e,t,n,o,a,l,c){let A=this._renderer,u=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,f=new Xe(this._lodPlanes[o],u),d=u.uniforms,p=this._sizeLods[n]-1,m=isFinite(a)?Math.PI/(2*p):2*Math.PI/(2*El-1),b=a/m,g=isFinite(a)?1+Math.floor(h*b):El;g>El&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${El}`);let w=[],I=0;for(let M=0;M<El;++M){let D=M/b,T=Math.exp(-D*D/2);w.push(T),M===0?I+=T:M<g&&(I+=2*T)}for(let M=0;M<w.length;M++)w[M]=w[M]/I;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=w,d.latitudinal.value=l==="latitudinal",c&&(d.poleAxis.value=c);let{_lodMax:v}=this;d.dTheta.value=m,d.mipInt.value=v-n;let E=this._sizeLods[o],S=3*E*(o>v-sA?o-v+sA:0),C=4*(this._cubeSize-E);Yp(t,S,C,3*E,2*E),A.setRenderTarget(t),A.render(f,Ky)}};function sz(i){let e=[],t=[],n=[],o=i,a=i-sA+1+rT.length;for(let l=0;l<a;l++){let c=Math.pow(2,o);t.push(c);let A=1/c;l>i-sA?A=rT[l-i+sA-1]:l===0&&(A=0),n.push(A);let u=1/(c-2),h=-u,f=1+u,d=[h,h,f,h,f,f,h,h,f,f,h,f],p=6,m=6,b=3,g=2,w=1,I=new Float32Array(b*m*p),v=new Float32Array(g*m*p),E=new Float32Array(w*m*p);for(let C=0;C<p;C++){let M=C%3*2/3-1,D=C>2?0:-1,T=[M,D,0,M+2/3,D,0,M+2/3,D+1,0,M,D,0,M+2/3,D+1,0,M,D+1,0];I.set(T,b*m*C),v.set(d,g*m*C);let B=[C,C,C,C,C,C];E.set(B,w*m*C)}let S=new qe;S.setAttribute("position",new it(I,b)),S.setAttribute("uv",new it(v,g)),S.setAttribute("faceIndex",new it(E,w)),e.push(S),o>sA&&o--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function aT(i,e,t){let n=new Mt(i,e,t);return n.texture.mapping=DA,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Yp(i,e,t,n,o){i.viewport.set(e,t,n,o),i.scissor.set(e,t,n,o)}function oz(i,e,t){let n=new Float32Array(El),o=new Y(0,1,0);return new pt({name:"SphericalGaussianBlur",defines:{n:El,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Zi,depthTest:!1,depthWrite:!1})}function lT(){return new pt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Zi,depthTest:!1,depthWrite:!1})}function cT(){return new pt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Zi,depthTest:!1,depthWrite:!1})}function ob(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function az(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){let A=c.mapping,u=A===Mo||A===Mh,h=A===ha||A===fa;if(u||h)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let f=e.get(c);return t===null&&(t=new Fl(i)),f=u?t.fromEquirectangular(c,f):t.fromCubemap(c,f),e.set(c,f),f.texture}else{if(e.has(c))return e.get(c).texture;{let f=c.image;if(u&&f&&f.height>0||h&&f&&o(f)){t===null&&(t=new Fl(i));let d=u?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,d),c.addEventListener("dispose",a),d.texture}else return null}}}return c}function o(c){let A=0,u=6;for(let h=0;h<u;h++)c[h]!==void 0&&A++;return A===u}function a(c){let A=c.target;A.removeEventListener("dispose",a);let u=e.get(A);u!==void 0&&(e.delete(A),u.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function lz(i){let e={};function t(n){if(e[n]!==void 0)return e[n];let o;switch(n){case"WEBGL_depth_texture":o=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=i.getExtension(n)}return e[n]=o,o}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){let o=t(n);return o===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),o}}}function cz(i,e,t,n){let o={},a=new WeakMap;function l(f){let d=f.target;d.index!==null&&e.remove(d.index);for(let m in d.attributes)e.remove(d.attributes[m]);for(let m in d.morphAttributes){let b=d.morphAttributes[m];for(let g=0,w=b.length;g<w;g++)e.remove(b[g])}d.removeEventListener("dispose",l),delete o[d.id];let p=a.get(d);p&&(e.remove(p),a.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function c(f,d){return o[d.id]===!0||(d.addEventListener("dispose",l),o[d.id]=!0,t.memory.geometries++),d}function A(f){let d=f.attributes;for(let m in d)e.update(d[m],i.ARRAY_BUFFER);let p=f.morphAttributes;for(let m in p){let b=p[m];for(let g=0,w=b.length;g<w;g++)e.update(b[g],i.ARRAY_BUFFER)}}function u(f){let d=[],p=f.index,m=f.attributes.position,b=0;if(p!==null){let I=p.array;b=p.version;for(let v=0,E=I.length;v<E;v+=3){let S=I[v+0],C=I[v+1],M=I[v+2];d.push(S,C,C,M,M,S)}}else{let I=m.array;b=m.version;for(let v=0,E=I.length/3-1;v<E;v+=3){let S=v+0,C=v+1,M=v+2;d.push(S,C,C,M,M,S)}}let g=new(AB(d)?_h:_l)(d,1);g.version=b;let w=a.get(f);w&&e.remove(w),a.set(f,g)}function h(f){let d=a.get(f);if(d){let p=f.index;p!==null&&d.version<p.version&&u(f)}else u(f);return a.get(f)}return{get:c,update:A,getWireframeAttribute:h}}function Az(i,e,t,n){let o=n.isWebGL2,a;function l(d){a=d}let c,A;function u(d){c=d.type,A=d.bytesPerElement}function h(d,p){i.drawElements(a,p,c,d*A),t.update(p,a,1)}function f(d,p,m){if(m===0)return;let b,g;if(o)b=i,g="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[g](a,p,c,d*A,m),t.update(p,a,m)}this.setMode=l,this.setIndex=u,this.render=h,this.renderInstances=f}function uz(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,l,c){switch(t.calls++,l){case i.TRIANGLES:t.triangles+=c*(a/3);break;case i.LINES:t.lines+=c*(a/2);break;case i.LINE_STRIP:t.lines+=c*(a-1);break;case i.LINE_LOOP:t.lines+=c*a;break;case i.POINTS:t.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:n}}function hz(i,e){return i[0]-e[0]}function fz(i,e){return Math.abs(e[1])-Math.abs(i[1])}function dz(i,e,t){let n={},o=new Float32Array(8),a=new WeakMap,l=new Ct,c=[];for(let u=0;u<8;u++)c[u]=[u,0];function A(u,h,f){let d=u.morphTargetInfluences;if(e.isWebGL2===!0){let p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=p!==void 0?p.length:0,b=a.get(h);if(b===void 0||b.count!==m){let Q=function(){P.dispose(),a.delete(h),h.removeEventListener("dispose",Q)};b!==void 0&&b.texture.dispose();let I=h.morphAttributes.position!==void 0,v=h.morphAttributes.normal!==void 0,E=h.morphAttributes.color!==void 0,S=h.morphAttributes.position||[],C=h.morphAttributes.normal||[],M=h.morphAttributes.color||[],D=0;I===!0&&(D=1),v===!0&&(D=2),E===!0&&(D=3);let T=h.attributes.position.count*D,B=1;T>e.maxTextureSize&&(B=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);let R=new Float32Array(T*B*4*m),P=new hA(R,T,B,m);P.type=Gr,P.needsUpdate=!0;let _=D*4;for(let W=0;W<m;W++){let U=S[W],H=C[W],O=M[W],F=T*B*4*W;for(let z=0;z<U.count;z++){let k=z*_;I===!0&&(l.fromBufferAttribute(U,z),R[F+k+0]=l.x,R[F+k+1]=l.y,R[F+k+2]=l.z,R[F+k+3]=0),v===!0&&(l.fromBufferAttribute(H,z),R[F+k+4]=l.x,R[F+k+5]=l.y,R[F+k+6]=l.z,R[F+k+7]=0),E===!0&&(l.fromBufferAttribute(O,z),R[F+k+8]=l.x,R[F+k+9]=l.y,R[F+k+10]=l.z,R[F+k+11]=O.itemSize===4?l.w:1)}}b={count:m,texture:P,size:new he(T,B)},a.set(h,b),h.addEventListener("dispose",Q)}let g=0;for(let I=0;I<d.length;I++)g+=d[I];let w=h.morphTargetsRelative?1:1-g;f.getUniforms().setValue(i,"morphTargetBaseInfluence",w),f.getUniforms().setValue(i,"morphTargetInfluences",d),f.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}else{let p=d===void 0?0:d.length,m=n[h.id];if(m===void 0||m.length!==p){m=[];for(let v=0;v<p;v++)m[v]=[v,0];n[h.id]=m}for(let v=0;v<p;v++){let E=m[v];E[0]=v,E[1]=d[v]}m.sort(fz);for(let v=0;v<8;v++)v<p&&m[v][1]?(c[v][0]=m[v][0],c[v][1]=m[v][1]):(c[v][0]=Number.MAX_SAFE_INTEGER,c[v][1]=0);c.sort(hz);let b=h.morphAttributes.position,g=h.morphAttributes.normal,w=0;for(let v=0;v<8;v++){let E=c[v],S=E[0],C=E[1];S!==Number.MAX_SAFE_INTEGER&&C?(b&&h.getAttribute("morphTarget"+v)!==b[S]&&h.setAttribute("morphTarget"+v,b[S]),g&&h.getAttribute("morphNormal"+v)!==g[S]&&h.setAttribute("morphNormal"+v,g[S]),o[v]=C,w+=C):(b&&h.hasAttribute("morphTarget"+v)===!0&&h.deleteAttribute("morphTarget"+v),g&&h.hasAttribute("morphNormal"+v)===!0&&h.deleteAttribute("morphNormal"+v),o[v]=0)}let I=h.morphTargetsRelative?1:1-w;f.getUniforms().setValue(i,"morphTargetBaseInfluence",I),f.getUniforms().setValue(i,"morphTargetInfluences",o)}}return{update:A}}function pz(i,e,t,n){let o=new WeakMap;function a(A){let u=n.render.frame,h=A.geometry,f=e.get(A,h);if(o.get(f)!==u&&(e.update(f),o.set(f,u)),A.isInstancedMesh&&(A.hasEventListener("dispose",c)===!1&&A.addEventListener("dispose",c),o.get(A)!==u&&(t.update(A.instanceMatrix,i.ARRAY_BUFFER),A.instanceColor!==null&&t.update(A.instanceColor,i.ARRAY_BUFFER),o.set(A,u))),A.isSkinnedMesh){let d=A.skeleton;o.get(d)!==u&&(d.update(),o.set(d,u))}return f}function l(){o=new WeakMap}function c(A){let u=A.target;u.removeEventListener("dispose",c),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:l}}var dB=new Vt,pB=new hA,mB=new kh,gB=new Nl,AT=[],uT=[],hT=new Float32Array(16),fT=new Float32Array(9),dT=new Float32Array(4);function kA(i,e,t){let n=i[0];if(n<=0||n>0)return i;let o=e*t,a=AT[o];if(a===void 0&&(a=new Float32Array(o),AT[o]=a),e!==0){n.toArray(a,0);for(let l=1,c=0;l!==e;++l)c+=t,i[l].toArray(a,c)}return a}function Zn(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Kn(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function fg(i,e){let t=uT[e];t===void 0&&(t=new Int32Array(e),uT[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function mz(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function gz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;i.uniform2fv(this.addr,e),Kn(t,e)}}function vz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zn(t,e))return;i.uniform3fv(this.addr,e),Kn(t,e)}}function yz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;i.uniform4fv(this.addr,e),Kn(t,e)}}function xz(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Zn(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,n))return;dT.set(n),i.uniformMatrix2fv(this.addr,!1,dT),Kn(t,n)}}function wz(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Zn(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,n))return;fT.set(n),i.uniformMatrix3fv(this.addr,!1,fT),Kn(t,n)}}function bz(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Zn(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Kn(t,e)}else{if(Zn(t,n))return;hT.set(n),i.uniformMatrix4fv(this.addr,!1,hT),Kn(t,n)}}function Cz(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Sz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;i.uniform2iv(this.addr,e),Kn(t,e)}}function Ez(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;i.uniform3iv(this.addr,e),Kn(t,e)}}function Iz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;i.uniform4iv(this.addr,e),Kn(t,e)}}function Mz(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Tz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;i.uniform2uiv(this.addr,e),Kn(t,e)}}function Dz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;i.uniform3uiv(this.addr,e),Kn(t,e)}}function Bz(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;i.uniform4uiv(this.addr,e),Kn(t,e)}}function Lz(i,e,t){let n=this.cache,o=t.allocateTextureUnit();n[0]!==o&&(i.uniform1i(this.addr,o),n[0]=o),t.setTexture2D(e||dB,o)}function Rz(i,e,t){let n=this.cache,o=t.allocateTextureUnit();n[0]!==o&&(i.uniform1i(this.addr,o),n[0]=o),t.setTexture3D(e||mB,o)}function kz(i,e,t){let n=this.cache,o=t.allocateTextureUnit();n[0]!==o&&(i.uniform1i(this.addr,o),n[0]=o),t.setTextureCube(e||gB,o)}function Pz(i,e,t){let n=this.cache,o=t.allocateTextureUnit();n[0]!==o&&(i.uniform1i(this.addr,o),n[0]=o),t.setTexture2DArray(e||pB,o)}function _z(i){switch(i){case 5126:return mz;case 35664:return gz;case 35665:return vz;case 35666:return yz;case 35674:return xz;case 35675:return wz;case 35676:return bz;case 5124:case 35670:return Cz;case 35667:case 35671:return Sz;case 35668:case 35672:return Ez;case 35669:case 35673:return Iz;case 5125:return Mz;case 36294:return Tz;case 36295:return Dz;case 36296:return Bz;case 35678:case 36198:case 36298:case 36306:case 35682:return Lz;case 35679:case 36299:case 36307:return Rz;case 35680:case 36300:case 36308:case 36293:return kz;case 36289:case 36303:case 36311:case 36292:return Pz}}function Nz(i,e){i.uniform1fv(this.addr,e)}function Fz(i,e){let t=kA(e,this.size,2);i.uniform2fv(this.addr,t)}function Qz(i,e){let t=kA(e,this.size,3);i.uniform3fv(this.addr,t)}function Uz(i,e){let t=kA(e,this.size,4);i.uniform4fv(this.addr,t)}function Oz(i,e){let t=kA(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Gz(i,e){let t=kA(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function zz(i,e){let t=kA(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Hz(i,e){i.uniform1iv(this.addr,e)}function Wz(i,e){i.uniform2iv(this.addr,e)}function Vz(i,e){i.uniform3iv(this.addr,e)}function Xz(i,e){i.uniform4iv(this.addr,e)}function Yz(i,e){i.uniform1uiv(this.addr,e)}function Zz(i,e){i.uniform2uiv(this.addr,e)}function Kz(i,e){i.uniform3uiv(this.addr,e)}function Jz(i,e){i.uniform4uiv(this.addr,e)}function jz(i,e,t){let n=this.cache,o=e.length,a=fg(t,o);Zn(n,a)||(i.uniform1iv(this.addr,a),Kn(n,a));for(let l=0;l!==o;++l)t.setTexture2D(e[l]||dB,a[l])}function qz(i,e,t){let n=this.cache,o=e.length,a=fg(t,o);Zn(n,a)||(i.uniform1iv(this.addr,a),Kn(n,a));for(let l=0;l!==o;++l)t.setTexture3D(e[l]||mB,a[l])}function $z(i,e,t){let n=this.cache,o=e.length,a=fg(t,o);Zn(n,a)||(i.uniform1iv(this.addr,a),Kn(n,a));for(let l=0;l!==o;++l)t.setTextureCube(e[l]||gB,a[l])}function eH(i,e,t){let n=this.cache,o=e.length,a=fg(t,o);Zn(n,a)||(i.uniform1iv(this.addr,a),Kn(n,a));for(let l=0;l!==o;++l)t.setTexture2DArray(e[l]||pB,a[l])}function tH(i){switch(i){case 5126:return Nz;case 35664:return Fz;case 35665:return Qz;case 35666:return Uz;case 35674:return Oz;case 35675:return Gz;case 35676:return zz;case 5124:case 35670:return Hz;case 35667:case 35671:return Wz;case 35668:case 35672:return Vz;case 35669:case 35673:return Xz;case 5125:return Yz;case 36294:return Zz;case 36295:return Kz;case 36296:return Jz;case 35678:case 36198:case 36298:case 36306:case 35682:return jz;case 35679:case 36299:case 36307:return qz;case 35680:case 36300:case 36308:case 36293:return $z;case 36289:case 36303:case 36311:case 36292:return eH}}var Zx=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=_z(t.type)}},Kx=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=tH(t.type)}},Jx=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let o=this.seq;for(let a=0,l=o.length;a!==l;++a){let c=o[a];c.setValue(e,t[c.id],n)}}},jy=/(\w+)(\])?(\[|\.)?/g;function pT(i,e){i.seq.push(e),i.map[e.id]=e}function nH(i,e,t){let n=i.name,o=n.length;for(jy.lastIndex=0;;){let a=jy.exec(n),l=jy.lastIndex,c=a[1],A=a[2]==="]",u=a[3];if(A&&(c=c|0),u===void 0||u==="["&&l+2===o){pT(t,u===void 0?new Zx(c,i,e):new Kx(c,i,e));break}else{let f=t.map[c];f===void 0&&(f=new Jx(c),pT(t,f)),t=f}}}var lA=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<n;++o){let a=e.getActiveUniform(t,o),l=e.getUniformLocation(t,a.name);nH(a,l,this)}}setValue(e,t,n,o){let a=this.map[t];a!==void 0&&a.setValue(e,n,o)}setOptional(e,t,n){let o=t[n];o!==void 0&&this.setValue(e,n,o)}static upload(e,t,n,o){for(let a=0,l=t.length;a!==l;++a){let c=t[a],A=n[c.id];A.needsUpdate!==!1&&c.setValue(e,A.value,o)}}static seqWithValue(e,t){let n=[];for(let o=0,a=e.length;o!==a;++o){let l=e[o];l.id in t&&n.push(l)}return n}};function mT(i,e,t){let n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}var iH=0;function rH(i,e){let t=i.split(`
`),n=[],o=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=o;l<a;l++){let c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}function sH(i){switch(i){case gr:return["Linear","( value )"];case nt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function gT(i,e,t){let n=i.getShaderParameter(e,i.COMPILE_STATUS),o=i.getShaderInfoLog(e).trim();if(n&&o==="")return"";let a=/ERROR: 0:(\d+)/.exec(o);if(a){let l=parseInt(a[1]);return t.toUpperCase()+`

`+o+`

`+rH(i.getShaderSource(e),l)}else return o}function oH(i,e){let t=sH(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function aH(i,e){let t;switch(e){case FD:t="Linear";break;case QD:t="Reinhard";break;case UD:t="OptimizedCineon";break;case lg:t="ACESFilmic";break;case OD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lH(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wh).join(`
`)}function cH(i){let e=[];for(let t in i){let n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function AH(i,e){let t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let o=0;o<n;o++){let a=i.getActiveAttrib(e,o),l=a.name,c=1;a.type===i.FLOAT_MAT2&&(c=2),a.type===i.FLOAT_MAT3&&(c=3),a.type===i.FLOAT_MAT4&&(c=4),t[l]={type:a.type,location:i.getAttribLocation(e,l),locationSize:c}}return t}function wh(i){return i!==""}function vT(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yT(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var uH=/^[ \t]*#include +<([\w\d./]+)>/gm;function jx(i){return i.replace(uH,fH)}var hH=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function fH(i,e){let t=mt[e];if(t===void 0){let n=hH.get(e);if(n!==void 0)t=mt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return jx(t)}var dH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xT(i){return i.replace(dH,pH)}function pH(i,e,t,n){let o="";for(let a=parseInt(e);a<parseInt(t);a++)o+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return o}function wT(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function mH(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Xw?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===ag?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Fs&&(e="SHADOWMAP_TYPE_VSM"),e}function gH(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case ha:case fa:e="ENVMAP_TYPE_CUBE";break;case DA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vH(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case fa:e="ENVMAP_MODE_REFRACTION";break}return e}function yH(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case sf:e="ENVMAP_BLENDING_MULTIPLY";break;case _D:e="ENVMAP_BLENDING_MIX";break;case ND:e="ENVMAP_BLENDING_ADD";break}return e}function xH(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function wH(i,e,t,n){let o=i.getContext(),a=t.defines,l=t.vertexShader,c=t.fragmentShader,A=mH(t),u=gH(t),h=vH(t),f=yH(t),d=xH(t),p=t.isWebGL2?"":lH(t),m=cH(a),b=o.createProgram(),g,w,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(wh).join(`
`),g.length>0&&(g+=`
`),w=[p,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(wh).join(`
`),w.length>0&&(w+=`
`)):(g=[wT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wh).join(`
`),w=[p,wT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Us?"#define TONE_MAPPING":"",t.toneMapping!==Us?mt.tonemapping_pars_fragment:"",t.toneMapping!==Us?aH("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",mt.colorspace_pars_fragment,oH("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(wh).join(`
`)),l=jx(l),l=vT(l,t),l=yT(l,t),c=jx(c),c=vT(c,t),c=yT(c,t),l=xT(l),c=xT(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["#define varying in",t.glslVersion===AA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);let v=I+g+l,E=I+w+c,S=mT(o,o.VERTEX_SHADER,v),C=mT(o,o.FRAGMENT_SHADER,E);if(o.attachShader(b,S),o.attachShader(b,C),t.index0AttributeName!==void 0?o.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(b,0,"position"),o.linkProgram(b),i.debug.checkShaderErrors){let T=o.getProgramInfoLog(b).trim(),B=o.getShaderInfoLog(S).trim(),R=o.getShaderInfoLog(C).trim(),P=!0,_=!0;if(o.getProgramParameter(b,o.LINK_STATUS)===!1)if(P=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(o,b,S,C);else{let Q=gT(o,S,"vertex"),W=gT(o,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(b,o.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+Q+`
`+W)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(B===""||R==="")&&(_=!1);_&&(this.diagnostics={runnable:P,programLog:T,vertexShader:{log:B,prefix:g},fragmentShader:{log:R,prefix:w}})}o.deleteShader(S),o.deleteShader(C);let M;this.getUniforms=function(){return M===void 0&&(M=new lA(o,b)),M};let D;return this.getAttributes=function(){return D===void 0&&(D=AH(o,b)),D},this.destroy=function(){n.releaseStatesOfProgram(this),o.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=iH++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=S,this.fragmentShader=C,this}var bH=0,qx=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,o=this._getShaderStage(t),a=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(o)===!1&&(l.add(o),o.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return n===void 0&&(n=new $x(e),t.set(e,n)),n}},$x=class{constructor(e){this.id=bH++,this.code=e,this.usedTimes=0}};function CH(i,e,t,n,o,a,l){let c=new fA,A=new qx,u=[],h=o.isWebGL2,f=o.logarithmicDepthBuffer,d=o.vertexTextures,p=o.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(T){return T===0?"uv":`uv${T}`}function g(T,B,R,P,_){let Q=P.fog,W=_.geometry,U=T.isMeshStandardMaterial?P.environment:null,H=(T.isMeshStandardMaterial?t:e).get(T.envMap||U),O=H&&H.mapping===DA?H.image.height:null,F=m[T.type];T.precision!==null&&(p=o.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));let z=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,k=z!==void 0?z.length:0,X=0;W.morphAttributes.position!==void 0&&(X=1),W.morphAttributes.normal!==void 0&&(X=2),W.morphAttributes.color!==void 0&&(X=3);let te,ie,re,se;if(F){let Ke=Or[F];te=Ke.vertexShader,ie=Ke.fragmentShader}else te=T.vertexShader,ie=T.fragmentShader,A.update(T),re=A.getVertexShaderID(T),se=A.getFragmentShaderID(T);let oe=i.getRenderTarget(),le=_.isInstancedMesh===!0,be=!!T.map,De=!!T.matcap,pe=!!H,K=!!T.aoMap,we=!!T.lightMap,me=!!T.bumpMap,fe=!!T.normalMap,de=!!T.displacementMap,Ne=!!T.emissiveMap,ve=!!T.metalnessMap,Se=!!T.roughnessMap,Pe=T.anisotropy>0,Ie=T.clearcoat>0,We=T.iridescence>0,j=T.sheen>0,G=T.transmission>0,Ae=Pe&&!!T.anisotropyMap,Be=Ie&&!!T.clearcoatMap,Re=Ie&&!!T.clearcoatNormalMap,Ee=Ie&&!!T.clearcoatRoughnessMap,Fe=We&&!!T.iridescenceMap,_e=We&&!!T.iridescenceThicknessMap,Ce=j&&!!T.sheenColorMap,Z=j&&!!T.sheenRoughnessMap,L=!!T.specularMap,N=!!T.specularColorMap,V=!!T.specularIntensityMap,q=G&&!!T.transmissionMap,ne=G&&!!T.thicknessMap,ae=!!T.gradientMap,J=!!T.alphaMap,ce=T.alphaTest>0,$=!!T.alphaHash,ue=!!T.extensions,xe=!!W.attributes.uv1,Ge=!!W.attributes.uv2,ze=!!W.attributes.uv3;return{isWebGL2:h,shaderID:F,shaderType:T.type,shaderName:T.name,vertexShader:te,fragmentShader:ie,defines:T.defines,customVertexShaderID:re,customFragmentShaderID:se,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,instancing:le,instancingColor:le&&_.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:oe===null?i.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:gr,map:be,matcap:De,envMap:pe,envMapMode:pe&&H.mapping,envMapCubeUVHeight:O,aoMap:K,lightMap:we,bumpMap:me,normalMap:fe,displacementMap:d&&de,emissiveMap:Ne,normalMapObjectSpace:fe&&T.normalMapType===$D,normalMapTangentSpace:fe&&T.normalMapType===Ma,metalnessMap:ve,roughnessMap:Se,anisotropy:Pe,anisotropyMap:Ae,clearcoat:Ie,clearcoatMap:Be,clearcoatNormalMap:Re,clearcoatRoughnessMap:Ee,iridescence:We,iridescenceMap:Fe,iridescenceThicknessMap:_e,sheen:j,sheenColorMap:Ce,sheenRoughnessMap:Z,specularMap:L,specularColorMap:N,specularIntensityMap:V,transmission:G,transmissionMap:q,thicknessMap:ne,gradientMap:ae,opaque:T.transparent===!1&&T.blending===Dl,alphaMap:J,alphaTest:ce,alphaHash:$,combine:T.combine,mapUv:be&&b(T.map.channel),aoMapUv:K&&b(T.aoMap.channel),lightMapUv:we&&b(T.lightMap.channel),bumpMapUv:me&&b(T.bumpMap.channel),normalMapUv:fe&&b(T.normalMap.channel),displacementMapUv:de&&b(T.displacementMap.channel),emissiveMapUv:Ne&&b(T.emissiveMap.channel),metalnessMapUv:ve&&b(T.metalnessMap.channel),roughnessMapUv:Se&&b(T.roughnessMap.channel),anisotropyMapUv:Ae&&b(T.anisotropyMap.channel),clearcoatMapUv:Be&&b(T.clearcoatMap.channel),clearcoatNormalMapUv:Re&&b(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&b(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&b(T.iridescenceMap.channel),iridescenceThicknessMapUv:_e&&b(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ce&&b(T.sheenColorMap.channel),sheenRoughnessMapUv:Z&&b(T.sheenRoughnessMap.channel),specularMapUv:L&&b(T.specularMap.channel),specularColorMapUv:N&&b(T.specularColorMap.channel),specularIntensityMapUv:V&&b(T.specularIntensityMap.channel),transmissionMapUv:q&&b(T.transmissionMap.channel),thicknessMapUv:ne&&b(T.thicknessMap.channel),alphaMapUv:J&&b(T.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(fe||Pe),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,vertexUv1s:xe,vertexUv2s:Ge,vertexUv3s:ze,pointsUvs:_.isPoints===!0&&!!W.attributes.uv&&(be||J),fog:!!Q,useFog:T.fog===!0,fogExp2:Q&&Q.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:_.isSkinnedMesh===!0,morphTargets:W.morphAttributes.position!==void 0,morphNormals:W.morphAttributes.normal!==void 0,morphColors:W.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:X,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:T.dithering,shadowMapEnabled:i.shadowMap.enabled&&R.length>0,shadowMapType:i.shadowMap.type,toneMapping:T.toneMapped?i.toneMapping:Us,useLegacyLights:i.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===zt,flipSided:T.side===Yn,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:ue&&T.extensions.derivatives===!0,extensionFragDepth:ue&&T.extensions.fragDepth===!0,extensionDrawBuffers:ue&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:ue&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function w(T){let B=[];if(T.shaderID?B.push(T.shaderID):(B.push(T.customVertexShaderID),B.push(T.customFragmentShaderID)),T.defines!==void 0)for(let R in T.defines)B.push(R),B.push(T.defines[R]);return T.isRawShaderMaterial===!1&&(I(B,T),v(B,T),B.push(i.outputColorSpace)),B.push(T.customProgramCacheKey),B.join()}function I(T,B){T.push(B.precision),T.push(B.outputColorSpace),T.push(B.envMapMode),T.push(B.envMapCubeUVHeight),T.push(B.mapUv),T.push(B.alphaMapUv),T.push(B.lightMapUv),T.push(B.aoMapUv),T.push(B.bumpMapUv),T.push(B.normalMapUv),T.push(B.displacementMapUv),T.push(B.emissiveMapUv),T.push(B.metalnessMapUv),T.push(B.roughnessMapUv),T.push(B.anisotropyMapUv),T.push(B.clearcoatMapUv),T.push(B.clearcoatNormalMapUv),T.push(B.clearcoatRoughnessMapUv),T.push(B.iridescenceMapUv),T.push(B.iridescenceThicknessMapUv),T.push(B.sheenColorMapUv),T.push(B.sheenRoughnessMapUv),T.push(B.specularMapUv),T.push(B.specularColorMapUv),T.push(B.specularIntensityMapUv),T.push(B.transmissionMapUv),T.push(B.thicknessMapUv),T.push(B.combine),T.push(B.fogExp2),T.push(B.sizeAttenuation),T.push(B.morphTargetsCount),T.push(B.morphAttributeCount),T.push(B.numDirLights),T.push(B.numPointLights),T.push(B.numSpotLights),T.push(B.numSpotLightMaps),T.push(B.numHemiLights),T.push(B.numRectAreaLights),T.push(B.numDirLightShadows),T.push(B.numPointLightShadows),T.push(B.numSpotLightShadows),T.push(B.numSpotLightShadowsWithMaps),T.push(B.shadowMapType),T.push(B.toneMapping),T.push(B.numClippingPlanes),T.push(B.numClipIntersection),T.push(B.depthPacking)}function v(T,B){c.disableAll(),B.isWebGL2&&c.enable(0),B.supportsVertexTextures&&c.enable(1),B.instancing&&c.enable(2),B.instancingColor&&c.enable(3),B.matcap&&c.enable(4),B.envMap&&c.enable(5),B.normalMapObjectSpace&&c.enable(6),B.normalMapTangentSpace&&c.enable(7),B.clearcoat&&c.enable(8),B.iridescence&&c.enable(9),B.alphaTest&&c.enable(10),B.vertexColors&&c.enable(11),B.vertexAlphas&&c.enable(12),B.vertexUv1s&&c.enable(13),B.vertexUv2s&&c.enable(14),B.vertexUv3s&&c.enable(15),B.vertexTangents&&c.enable(16),B.anisotropy&&c.enable(17),T.push(c.mask),c.disableAll(),B.fog&&c.enable(0),B.useFog&&c.enable(1),B.flatShading&&c.enable(2),B.logarithmicDepthBuffer&&c.enable(3),B.skinning&&c.enable(4),B.morphTargets&&c.enable(5),B.morphNormals&&c.enable(6),B.morphColors&&c.enable(7),B.premultipliedAlpha&&c.enable(8),B.shadowMapEnabled&&c.enable(9),B.useLegacyLights&&c.enable(10),B.doubleSided&&c.enable(11),B.flipSided&&c.enable(12),B.useDepthPacking&&c.enable(13),B.dithering&&c.enable(14),B.transmission&&c.enable(15),B.sheen&&c.enable(16),B.opaque&&c.enable(17),B.pointsUvs&&c.enable(18),T.push(c.mask)}function E(T){let B=m[T.type],R;if(B){let P=Or[B];R=jn.clone(P.uniforms)}else R=T.uniforms;return R}function S(T,B){let R;for(let P=0,_=u.length;P<_;P++){let Q=u[P];if(Q.cacheKey===B){R=Q,++R.usedTimes;break}}return R===void 0&&(R=new wH(i,B,T,a),u.push(R)),R}function C(T){if(--T.usedTimes===0){let B=u.indexOf(T);u[B]=u[u.length-1],u.pop(),T.destroy()}}function M(T){A.remove(T)}function D(){A.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:E,acquireProgram:S,releaseProgram:C,releaseShaderCache:M,programs:u,dispose:D}}function SH(){let i=new WeakMap;function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function t(a){i.delete(a)}function n(a,l,c){i.get(a)[l]=c}function o(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:o}}function EH(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function bT(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function CT(){let i=[],e=0,t=[],n=[],o=[];function a(){e=0,t.length=0,n.length=0,o.length=0}function l(f,d,p,m,b,g){let w=i[e];return w===void 0?(w={id:f.id,object:f,geometry:d,material:p,groupOrder:m,renderOrder:f.renderOrder,z:b,group:g},i[e]=w):(w.id=f.id,w.object=f,w.geometry=d,w.material=p,w.groupOrder=m,w.renderOrder=f.renderOrder,w.z=b,w.group=g),e++,w}function c(f,d,p,m,b,g){let w=l(f,d,p,m,b,g);p.transmission>0?n.push(w):p.transparent===!0?o.push(w):t.push(w)}function A(f,d,p,m,b,g){let w=l(f,d,p,m,b,g);p.transmission>0?n.unshift(w):p.transparent===!0?o.unshift(w):t.unshift(w)}function u(f,d){t.length>1&&t.sort(f||EH),n.length>1&&n.sort(d||bT),o.length>1&&o.sort(d||bT)}function h(){for(let f=e,d=i.length;f<d;f++){let p=i[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:n,transparent:o,init:a,push:c,unshift:A,finish:h,sort:u}}function IH(){let i=new WeakMap;function e(n,o){let a=i.get(n),l;return a===void 0?(l=new CT,i.set(n,[l])):o>=a.length?(l=new CT,a.push(l)):l=a[o],l}function t(){i=new WeakMap}return{get:e,dispose:t}}function MH(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new ke};break;case"SpotLight":t={position:new Y,direction:new Y,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":t={color:new ke,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return i[e.id]=t,t}}}function TH(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}var DH=0;function BH(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function LH(i,e){let t=new MH,n=TH(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)o.probe.push(new Y);let a=new Y,l=new Qe,c=new Qe;function A(h,f){let d=0,p=0,m=0;for(let R=0;R<9;R++)o.probe[R].set(0,0,0);let b=0,g=0,w=0,I=0,v=0,E=0,S=0,C=0,M=0,D=0;h.sort(BH);let T=f===!0?Math.PI:1;for(let R=0,P=h.length;R<P;R++){let _=h[R],Q=_.color,W=_.intensity,U=_.distance,H=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)d+=Q.r*W*T,p+=Q.g*W*T,m+=Q.b*W*T;else if(_.isLightProbe)for(let O=0;O<9;O++)o.probe[O].addScaledVector(_.sh.coefficients[O],W);else if(_.isDirectionalLight){let O=t.get(_);if(O.color.copy(_.color).multiplyScalar(_.intensity*T),_.castShadow){let F=_.shadow,z=n.get(_);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,o.directionalShadow[b]=z,o.directionalShadowMap[b]=H,o.directionalShadowMatrix[b]=_.shadow.matrix,E++}o.directional[b]=O,b++}else if(_.isSpotLight){let O=t.get(_);O.position.setFromMatrixPosition(_.matrixWorld),O.color.copy(Q).multiplyScalar(W*T),O.distance=U,O.coneCos=Math.cos(_.angle),O.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),O.decay=_.decay,o.spot[w]=O;let F=_.shadow;if(_.map&&(o.spotLightMap[M]=_.map,M++,F.updateMatrices(_),_.castShadow&&D++),o.spotLightMatrix[w]=F.matrix,_.castShadow){let z=n.get(_);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,o.spotShadow[w]=z,o.spotShadowMap[w]=H,C++}w++}else if(_.isRectAreaLight){let O=t.get(_);O.color.copy(Q).multiplyScalar(W),O.halfWidth.set(_.width*.5,0,0),O.halfHeight.set(0,_.height*.5,0),o.rectArea[I]=O,I++}else if(_.isPointLight){let O=t.get(_);if(O.color.copy(_.color).multiplyScalar(_.intensity*T),O.distance=_.distance,O.decay=_.decay,_.castShadow){let F=_.shadow,z=n.get(_);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,z.shadowCameraNear=F.camera.near,z.shadowCameraFar=F.camera.far,o.pointShadow[g]=z,o.pointShadowMap[g]=H,o.pointShadowMatrix[g]=_.shadow.matrix,S++}o.point[g]=O,g++}else if(_.isHemisphereLight){let O=t.get(_);O.skyColor.copy(_.color).multiplyScalar(W*T),O.groundColor.copy(_.groundColor).multiplyScalar(W*T),o.hemi[v]=O,v++}}I>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Ve.LTC_FLOAT_1,o.rectAreaLTC2=Ve.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Ve.LTC_HALF_1,o.rectAreaLTC2=Ve.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=d,o.ambient[1]=p,o.ambient[2]=m;let B=o.hash;(B.directionalLength!==b||B.pointLength!==g||B.spotLength!==w||B.rectAreaLength!==I||B.hemiLength!==v||B.numDirectionalShadows!==E||B.numPointShadows!==S||B.numSpotShadows!==C||B.numSpotMaps!==M)&&(o.directional.length=b,o.spot.length=w,o.rectArea.length=I,o.point.length=g,o.hemi.length=v,o.directionalShadow.length=E,o.directionalShadowMap.length=E,o.pointShadow.length=S,o.pointShadowMap.length=S,o.spotShadow.length=C,o.spotShadowMap.length=C,o.directionalShadowMatrix.length=E,o.pointShadowMatrix.length=S,o.spotLightMatrix.length=C+M-D,o.spotLightMap.length=M,o.numSpotLightShadowsWithMaps=D,B.directionalLength=b,B.pointLength=g,B.spotLength=w,B.rectAreaLength=I,B.hemiLength=v,B.numDirectionalShadows=E,B.numPointShadows=S,B.numSpotShadows=C,B.numSpotMaps=M,o.version=DH++)}function u(h,f){let d=0,p=0,m=0,b=0,g=0,w=f.matrixWorldInverse;for(let I=0,v=h.length;I<v;I++){let E=h[I];if(E.isDirectionalLight){let S=o.directional[d];S.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(w),d++}else if(E.isSpotLight){let S=o.spot[m];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(w),S.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(w),m++}else if(E.isRectAreaLight){let S=o.rectArea[b];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(w),c.identity(),l.copy(E.matrixWorld),l.premultiply(w),c.extractRotation(l),S.halfWidth.set(E.width*.5,0,0),S.halfHeight.set(0,E.height*.5,0),S.halfWidth.applyMatrix4(c),S.halfHeight.applyMatrix4(c),b++}else if(E.isPointLight){let S=o.point[p];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(w),p++}else if(E.isHemisphereLight){let S=o.hemi[g];S.direction.setFromMatrixPosition(E.matrixWorld),S.direction.transformDirection(w),g++}}}return{setup:A,setupView:u,state:o}}function ST(i,e){let t=new LH(i,e),n=[],o=[];function a(){n.length=0,o.length=0}function l(f){n.push(f)}function c(f){o.push(f)}function A(f){t.setup(n,f)}function u(f){t.setupView(n,f)}return{init:a,state:{lightsArray:n,shadowsArray:o,lights:t},setupLights:A,setupLightsView:u,pushLight:l,pushShadow:c}}function RH(i,e){let t=new WeakMap;function n(a,l=0){let c=t.get(a),A;return c===void 0?(A=new ST(i,e),t.set(a,[A])):l>=c.length?(A=new ST(i,e),c.push(A)):A=c[l],A}function o(){t=new WeakMap}return{get:n,dispose:o}}var Ql=class extends Sn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Ul=class extends Sn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},kH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,PH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _H(i,e,t){let n=new pa,o=new he,a=new he,l=new Ct,c=new Ql({depthPacking:hg}),A=new Ul,u={},h=t.maxTextureSize,f={[Pi]:Yn,[Yn]:Pi,[zt]:zt},d=new pt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:kH,fragmentShader:PH}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let m=new qe;m.setAttribute("position",new it(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new Xe(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Xw;let w=this.type;this.render=function(S,C,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;let D=i.getRenderTarget(),T=i.getActiveCubeFace(),B=i.getActiveMipmapLevel(),R=i.state;R.setBlending(Zi),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);let P=w!==Fs&&this.type===Fs,_=w===Fs&&this.type!==Fs;for(let Q=0,W=S.length;Q<W;Q++){let U=S[Q],H=U.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;o.copy(H.mapSize);let O=H.getFrameExtents();if(o.multiply(O),a.copy(H.mapSize),(o.x>h||o.y>h)&&(o.x>h&&(a.x=Math.floor(h/O.x),o.x=a.x*O.x,H.mapSize.x=a.x),o.y>h&&(a.y=Math.floor(h/O.y),o.y=a.y*O.y,H.mapSize.y=a.y)),H.map===null||P===!0||_===!0){let z=this.type!==Fs?{minFilter:It,magFilter:It}:{};H.map!==null&&H.map.dispose(),H.map=new Mt(o.x,o.y,z),H.map.texture.name=U.name+".shadowMap",H.camera.updateProjectionMatrix()}i.setRenderTarget(H.map),i.clear();let F=H.getViewportCount();for(let z=0;z<F;z++){let k=H.getViewport(z);l.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),R.viewport(l),H.updateMatrices(U,z),n=H.getFrustum(),E(C,M,H.camera,U,this.type)}H.isPointLightShadow!==!0&&this.type===Fs&&I(H,M),H.needsUpdate=!1}w=this.type,g.needsUpdate=!1,i.setRenderTarget(D,T,B)};function I(S,C){let M=e.update(b);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,p.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Mt(o.x,o.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,i.setRenderTarget(S.mapPass),i.clear(),i.renderBufferDirect(C,null,M,d,b,null),p.uniforms.shadow_pass.value=S.mapPass.texture,p.uniforms.resolution.value=S.mapSize,p.uniforms.radius.value=S.radius,i.setRenderTarget(S.map),i.clear(),i.renderBufferDirect(C,null,M,p,b,null)}function v(S,C,M,D){let T=null,B=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(B!==void 0)T=B;else if(T=M.isPointLight===!0?A:c,i.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){let R=T.uuid,P=C.uuid,_=u[R];_===void 0&&(_={},u[R]=_);let Q=_[P];Q===void 0&&(Q=T.clone(),_[P]=Q),T=Q}if(T.visible=C.visible,T.wireframe=C.wireframe,D===Fs?T.side=C.shadowSide!==null?C.shadowSide:C.side:T.side=C.shadowSide!==null?C.shadowSide:f[C.side],T.alphaMap=C.alphaMap,T.alphaTest=C.alphaTest,T.map=C.map,T.clipShadows=C.clipShadows,T.clippingPlanes=C.clippingPlanes,T.clipIntersection=C.clipIntersection,T.displacementMap=C.displacementMap,T.displacementScale=C.displacementScale,T.displacementBias=C.displacementBias,T.wireframeLinewidth=C.wireframeLinewidth,T.linewidth=C.linewidth,M.isPointLight===!0&&T.isMeshDistanceMaterial===!0){let R=i.properties.get(T);R.light=M}return T}function E(S,C,M,D,T){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&T===Fs)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);let P=e.update(S),_=S.material;if(Array.isArray(_)){let Q=P.groups;for(let W=0,U=Q.length;W<U;W++){let H=Q[W],O=_[H.materialIndex];if(O&&O.visible){let F=v(S,O,D,T);i.renderBufferDirect(M,null,P,F,S,H)}}}else if(_.visible){let Q=v(S,_,D,T);i.renderBufferDirect(M,null,P,Q,S,null)}}let R=S.children;for(let P=0,_=R.length;P<_;P++)E(R[P],C,M,D,T)}}function NH(i,e,t){let n=t.isWebGL2;function o(){let J=!1,ce=new Ct,$=null,ue=new Ct(0,0,0,0);return{setMask:function(xe){$!==xe&&!J&&(i.colorMask(xe,xe,xe,xe),$=xe)},setLocked:function(xe){J=xe},setClear:function(xe,Ge,ze,Ze,Ke){Ke===!0&&(xe*=Ze,Ge*=Ze,ze*=Ze),ce.set(xe,Ge,ze,Ze),ue.equals(ce)===!1&&(i.clearColor(xe,Ge,ze,Ze),ue.copy(ce))},reset:function(){J=!1,$=null,ue.set(-1,0,0,0)}}}function a(){let J=!1,ce=null,$=null,ue=null;return{setTest:function(xe){xe?oe(i.DEPTH_TEST):le(i.DEPTH_TEST)},setMask:function(xe){ce!==xe&&!J&&(i.depthMask(xe),ce=xe)},setFunc:function(xe){if($!==xe){switch(xe){case TD:i.depthFunc(i.NEVER);break;case DD:i.depthFunc(i.ALWAYS);break;case BD:i.depthFunc(i.LESS);break;case bm:i.depthFunc(i.LEQUAL);break;case LD:i.depthFunc(i.EQUAL);break;case RD:i.depthFunc(i.GEQUAL);break;case kD:i.depthFunc(i.GREATER);break;case PD:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}$=xe}},setLocked:function(xe){J=xe},setClear:function(xe){ue!==xe&&(i.clearDepth(xe),ue=xe)},reset:function(){J=!1,ce=null,$=null,ue=null}}}function l(){let J=!1,ce=null,$=null,ue=null,xe=null,Ge=null,ze=null,Ze=null,Ke=null;return{setTest:function(ot){J||(ot?oe(i.STENCIL_TEST):le(i.STENCIL_TEST))},setMask:function(ot){ce!==ot&&!J&&(i.stencilMask(ot),ce=ot)},setFunc:function(ot,gt,rt){($!==ot||ue!==gt||xe!==rt)&&(i.stencilFunc(ot,gt,rt),$=ot,ue=gt,xe=rt)},setOp:function(ot,gt,rt){(Ge!==ot||ze!==gt||Ze!==rt)&&(i.stencilOp(ot,gt,rt),Ge=ot,ze=gt,Ze=rt)},setLocked:function(ot){J=ot},setClear:function(ot){Ke!==ot&&(i.clearStencil(ot),Ke=ot)},reset:function(){J=!1,ce=null,$=null,ue=null,xe=null,Ge=null,ze=null,Ze=null,Ke=null}}}let c=new o,A=new a,u=new l,h=new WeakMap,f=new WeakMap,d={},p={},m=new WeakMap,b=[],g=null,w=!1,I=null,v=null,E=null,S=null,C=null,M=null,D=null,T=!1,B=null,R=null,P=null,_=null,Q=null,W=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),U=!1,H=0,O=i.getParameter(i.VERSION);O.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(O)[1]),U=H>=1):O.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),U=H>=2);let F=null,z={},k=i.getParameter(i.SCISSOR_BOX),X=i.getParameter(i.VIEWPORT),te=new Ct().fromArray(k),ie=new Ct().fromArray(X);function re(J,ce,$,ue){let xe=new Uint8Array(4),Ge=i.createTexture();i.bindTexture(J,Ge),i.texParameteri(J,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(J,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ze=0;ze<$;ze++)n&&(J===i.TEXTURE_3D||J===i.TEXTURE_2D_ARRAY)?i.texImage3D(ce,0,i.RGBA,1,1,ue,0,i.RGBA,i.UNSIGNED_BYTE,xe):i.texImage2D(ce+ze,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,xe);return Ge}let se={};se[i.TEXTURE_2D]=re(i.TEXTURE_2D,i.TEXTURE_2D,1),se[i.TEXTURE_CUBE_MAP]=re(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(se[i.TEXTURE_2D_ARRAY]=re(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),se[i.TEXTURE_3D]=re(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),A.setClear(1),u.setClear(0),oe(i.DEPTH_TEST),A.setFunc(bm),de(!1),Ne(Ax),oe(i.CULL_FACE),me(Zi);function oe(J){d[J]!==!0&&(i.enable(J),d[J]=!0)}function le(J){d[J]!==!1&&(i.disable(J),d[J]=!1)}function be(J,ce){return p[J]!==ce?(i.bindFramebuffer(J,ce),p[J]=ce,n&&(J===i.DRAW_FRAMEBUFFER&&(p[i.FRAMEBUFFER]=ce),J===i.FRAMEBUFFER&&(p[i.DRAW_FRAMEBUFFER]=ce)),!0):!1}function De(J,ce){let $=b,ue=!1;if(J)if($=m.get(ce),$===void 0&&($=[],m.set(ce,$)),J.isWebGLMultipleRenderTargets){let xe=J.texture;if($.length!==xe.length||$[0]!==i.COLOR_ATTACHMENT0){for(let Ge=0,ze=xe.length;Ge<ze;Ge++)$[Ge]=i.COLOR_ATTACHMENT0+Ge;$.length=xe.length,ue=!0}}else $[0]!==i.COLOR_ATTACHMENT0&&($[0]=i.COLOR_ATTACHMENT0,ue=!0);else $[0]!==i.BACK&&($[0]=i.BACK,ue=!0);ue&&(t.isWebGL2?i.drawBuffers($):e.get("WEBGL_draw_buffers").drawBuffersWEBGL($))}function pe(J){return g!==J?(i.useProgram(J),g=J,!0):!1}let K={[Sl]:i.FUNC_ADD,[gD]:i.FUNC_SUBTRACT,[vD]:i.FUNC_REVERSE_SUBTRACT};if(n)K[fx]=i.MIN,K[dx]=i.MAX;else{let J=e.get("EXT_blend_minmax");J!==null&&(K[fx]=J.MIN_EXT,K[dx]=J.MAX_EXT)}let we={[yD]:i.ZERO,[xD]:i.ONE,[wD]:i.SRC_COLOR,[Yw]:i.SRC_ALPHA,[MD]:i.SRC_ALPHA_SATURATE,[ED]:i.DST_COLOR,[CD]:i.DST_ALPHA,[bD]:i.ONE_MINUS_SRC_COLOR,[Zw]:i.ONE_MINUS_SRC_ALPHA,[ID]:i.ONE_MINUS_DST_COLOR,[SD]:i.ONE_MINUS_DST_ALPHA};function me(J,ce,$,ue,xe,Ge,ze,Ze){if(J===Zi){w===!0&&(le(i.BLEND),w=!1);return}if(w===!1&&(oe(i.BLEND),w=!0),J!==mD){if(J!==I||Ze!==T){if((v!==Sl||C!==Sl)&&(i.blendEquation(i.FUNC_ADD),v=Sl,C=Sl),Ze)switch(J){case Dl:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Io:i.blendFunc(i.ONE,i.ONE);break;case ux:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case hx:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case Dl:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Io:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case ux:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case hx:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}E=null,S=null,M=null,D=null,I=J,T=Ze}return}xe=xe||ce,Ge=Ge||$,ze=ze||ue,(ce!==v||xe!==C)&&(i.blendEquationSeparate(K[ce],K[xe]),v=ce,C=xe),($!==E||ue!==S||Ge!==M||ze!==D)&&(i.blendFuncSeparate(we[$],we[ue],we[Ge],we[ze]),E=$,S=ue,M=Ge,D=ze),I=J,T=!1}function fe(J,ce){J.side===zt?le(i.CULL_FACE):oe(i.CULL_FACE);let $=J.side===Yn;ce&&($=!$),de($),J.blending===Dl&&J.transparent===!1?me(Zi):me(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),A.setFunc(J.depthFunc),A.setTest(J.depthTest),A.setMask(J.depthWrite),c.setMask(J.colorWrite);let ue=J.stencilWrite;u.setTest(ue),ue&&(u.setMask(J.stencilWriteMask),u.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),u.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Se(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?oe(i.SAMPLE_ALPHA_TO_COVERAGE):le(i.SAMPLE_ALPHA_TO_COVERAGE)}function de(J){B!==J&&(J?i.frontFace(i.CW):i.frontFace(i.CCW),B=J)}function Ne(J){J!==dD?(oe(i.CULL_FACE),J!==R&&(J===Ax?i.cullFace(i.BACK):J===pD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):le(i.CULL_FACE),R=J}function ve(J){J!==P&&(U&&i.lineWidth(J),P=J)}function Se(J,ce,$){J?(oe(i.POLYGON_OFFSET_FILL),(_!==ce||Q!==$)&&(i.polygonOffset(ce,$),_=ce,Q=$)):le(i.POLYGON_OFFSET_FILL)}function Pe(J){J?oe(i.SCISSOR_TEST):le(i.SCISSOR_TEST)}function Ie(J){J===void 0&&(J=i.TEXTURE0+W-1),F!==J&&(i.activeTexture(J),F=J)}function We(J,ce,$){$===void 0&&(F===null?$=i.TEXTURE0+W-1:$=F);let ue=z[$];ue===void 0&&(ue={type:void 0,texture:void 0},z[$]=ue),(ue.type!==J||ue.texture!==ce)&&(F!==$&&(i.activeTexture($),F=$),i.bindTexture(J,ce||se[J]),ue.type=J,ue.texture=ce)}function j(){let J=z[F];J!==void 0&&J.type!==void 0&&(i.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function G(){try{i.compressedTexImage2D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ae(){try{i.compressedTexImage3D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Be(){try{i.texSubImage2D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Re(){try{i.texSubImage3D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ee(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Fe(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function _e(){try{i.texStorage2D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ce(){try{i.texStorage3D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Z(){try{i.texImage2D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function L(){try{i.texImage3D.apply(i,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function N(J){te.equals(J)===!1&&(i.scissor(J.x,J.y,J.z,J.w),te.copy(J))}function V(J){ie.equals(J)===!1&&(i.viewport(J.x,J.y,J.z,J.w),ie.copy(J))}function q(J,ce){let $=f.get(ce);$===void 0&&($=new WeakMap,f.set(ce,$));let ue=$.get(J);ue===void 0&&(ue=i.getUniformBlockIndex(ce,J.name),$.set(J,ue))}function ne(J,ce){let ue=f.get(ce).get(J);h.get(ce)!==ue&&(i.uniformBlockBinding(ce,ue,J.__bindingPointIndex),h.set(ce,ue))}function ae(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},F=null,z={},p={},m=new WeakMap,b=[],g=null,w=!1,I=null,v=null,E=null,S=null,C=null,M=null,D=null,T=!1,B=null,R=null,P=null,_=null,Q=null,te.set(0,0,i.canvas.width,i.canvas.height),ie.set(0,0,i.canvas.width,i.canvas.height),c.reset(),A.reset(),u.reset()}return{buffers:{color:c,depth:A,stencil:u},enable:oe,disable:le,bindFramebuffer:be,drawBuffers:De,useProgram:pe,setBlending:me,setMaterial:fe,setFlipSided:de,setCullFace:Ne,setLineWidth:ve,setPolygonOffset:Se,setScissorTest:Pe,activeTexture:Ie,bindTexture:We,unbindTexture:j,compressedTexImage2D:G,compressedTexImage3D:Ae,texImage2D:Z,texImage3D:L,updateUBOMapping:q,uniformBlockBinding:ne,texStorage2D:_e,texStorage3D:Ce,texSubImage2D:Be,texSubImage3D:Re,compressedTexSubImage2D:Ee,compressedTexSubImage3D:Fe,scissor:N,viewport:V,reset:ae}}function FH(i,e,t,n,o,a,l){let c=o.isWebGL2,A=o.maxTextures,u=o.maxCubemapSize,h=o.maxTextureSize,f=o.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,b,g=new WeakMap,w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function I(j,G){return w?new OffscreenCanvas(j,G):Lh("canvas")}function v(j,G,Ae,Be){let Re=1;if((j.width>Be||j.height>Be)&&(Re=Be/Math.max(j.width,j.height)),Re<1||G===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){let Ee=G?Sm:Math.floor,Fe=Ee(Re*j.width),_e=Ee(Re*j.height);b===void 0&&(b=I(Fe,_e));let Ce=Ae?I(Fe,_e):b;return Ce.width=Fe,Ce.height=_e,Ce.getContext("2d").drawImage(j,0,0,Fe,_e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+Fe+"x"+_e+")."),Ce}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function E(j){return Qx(j.width)&&Qx(j.height)}function S(j){return c?!1:j.wrapS!==Bn||j.wrapT!==Bn||j.minFilter!==It&&j.minFilter!==St}function C(j,G){return j.generateMipmaps&&G&&j.minFilter!==It&&j.minFilter!==St}function M(j){i.generateMipmap(j)}function D(j,G,Ae,Be,Re=!1){if(c===!1)return G;if(j!==null){if(i[j]!==void 0)return i[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ee=G;return G===i.RED&&(Ae===i.FLOAT&&(Ee=i.R32F),Ae===i.HALF_FLOAT&&(Ee=i.R16F),Ae===i.UNSIGNED_BYTE&&(Ee=i.R8)),G===i.RG&&(Ae===i.FLOAT&&(Ee=i.RG32F),Ae===i.HALF_FLOAT&&(Ee=i.RG16F),Ae===i.UNSIGNED_BYTE&&(Ee=i.RG8)),G===i.RGBA&&(Ae===i.FLOAT&&(Ee=i.RGBA32F),Ae===i.HALF_FLOAT&&(Ee=i.RGBA16F),Ae===i.UNSIGNED_BYTE&&(Ee=Be===nt&&Re===!1?i.SRGB8_ALPHA8:i.RGBA8),Ae===i.UNSIGNED_SHORT_4_4_4_4&&(Ee=i.RGBA4),Ae===i.UNSIGNED_SHORT_5_5_5_1&&(Ee=i.RGB5_A1)),(Ee===i.R16F||Ee===i.R32F||Ee===i.RG16F||Ee===i.RG32F||Ee===i.RGBA16F||Ee===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function T(j,G,Ae){return C(j,Ae)===!0||j.isFramebufferTexture&&j.minFilter!==It&&j.minFilter!==St?Math.log2(Math.max(G.width,G.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?G.mipmaps.length:1}function B(j){return j===It||j===cA||j===Bl?i.NEAREST:i.LINEAR}function R(j){let G=j.target;G.removeEventListener("dispose",R),_(G),G.isVideoTexture&&m.delete(G)}function P(j){let G=j.target;G.removeEventListener("dispose",P),W(G)}function _(j){let G=n.get(j);if(G.__webglInit===void 0)return;let Ae=j.source,Be=g.get(Ae);if(Be){let Re=Be[G.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&Q(j),Object.keys(Be).length===0&&g.delete(Ae)}n.remove(j)}function Q(j){let G=n.get(j);i.deleteTexture(G.__webglTexture);let Ae=j.source,Be=g.get(Ae);delete Be[G.__cacheKey],l.memory.textures--}function W(j){let G=j.texture,Ae=n.get(j),Be=n.get(G);if(Be.__webglTexture!==void 0&&(i.deleteTexture(Be.__webglTexture),l.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)i.deleteFramebuffer(Ae.__webglFramebuffer[Re]),Ae.__webglDepthbuffer&&i.deleteRenderbuffer(Ae.__webglDepthbuffer[Re]);else{if(i.deleteFramebuffer(Ae.__webglFramebuffer),Ae.__webglDepthbuffer&&i.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let Re=0;Re<Ae.__webglColorRenderbuffer.length;Re++)Ae.__webglColorRenderbuffer[Re]&&i.deleteRenderbuffer(Ae.__webglColorRenderbuffer[Re]);Ae.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Re=0,Ee=G.length;Re<Ee;Re++){let Fe=n.get(G[Re]);Fe.__webglTexture&&(i.deleteTexture(Fe.__webglTexture),l.memory.textures--),n.remove(G[Re])}n.remove(G),n.remove(j)}let U=0;function H(){U=0}function O(){let j=U;return j>=A&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+A),U+=1,j}function F(j){let G=[];return G.push(j.wrapS),G.push(j.wrapT),G.push(j.wrapR||0),G.push(j.magFilter),G.push(j.minFilter),G.push(j.anisotropy),G.push(j.internalFormat),G.push(j.format),G.push(j.type),G.push(j.generateMipmaps),G.push(j.premultiplyAlpha),G.push(j.flipY),G.push(j.unpackAlignment),G.push(j.colorSpace),G.join()}function z(j,G){let Ae=n.get(j);if(j.isVideoTexture&&Ie(j),j.isRenderTargetTexture===!1&&j.version>0&&Ae.__version!==j.version){let Be=j.image;if(Be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(Ae,j,G);return}}t.bindTexture(i.TEXTURE_2D,Ae.__webglTexture,i.TEXTURE0+G)}function k(j,G){let Ae=n.get(j);if(j.version>0&&Ae.__version!==j.version){be(Ae,j,G);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Ae.__webglTexture,i.TEXTURE0+G)}function X(j,G){let Ae=n.get(j);if(j.version>0&&Ae.__version!==j.version){be(Ae,j,G);return}t.bindTexture(i.TEXTURE_3D,Ae.__webglTexture,i.TEXTURE0+G)}function te(j,G){let Ae=n.get(j);if(j.version>0&&Ae.__version!==j.version){De(Ae,j,G);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Ae.__webglTexture,i.TEXTURE0+G)}let ie={[_i]:i.REPEAT,[Bn]:i.CLAMP_TO_EDGE,[Rl]:i.MIRRORED_REPEAT},re={[It]:i.NEAREST,[cA]:i.NEAREST_MIPMAP_NEAREST,[Bl]:i.NEAREST_MIPMAP_LINEAR,[St]:i.LINEAR,[of]:i.LINEAR_MIPMAP_NEAREST,[us]:i.LINEAR_MIPMAP_LINEAR},se={[tB]:i.NEVER,[lB]:i.ALWAYS,[nB]:i.LESS,[rB]:i.LEQUAL,[iB]:i.EQUAL,[aB]:i.GEQUAL,[sB]:i.GREATER,[oB]:i.NOTEQUAL};function oe(j,G,Ae){if(Ae?(i.texParameteri(j,i.TEXTURE_WRAP_S,ie[G.wrapS]),i.texParameteri(j,i.TEXTURE_WRAP_T,ie[G.wrapT]),(j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY)&&i.texParameteri(j,i.TEXTURE_WRAP_R,ie[G.wrapR]),i.texParameteri(j,i.TEXTURE_MAG_FILTER,re[G.magFilter]),i.texParameteri(j,i.TEXTURE_MIN_FILTER,re[G.minFilter])):(i.texParameteri(j,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(j,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY)&&i.texParameteri(j,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(G.wrapS!==Bn||G.wrapT!==Bn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(j,i.TEXTURE_MAG_FILTER,B(G.magFilter)),i.texParameteri(j,i.TEXTURE_MIN_FILTER,B(G.minFilter)),G.minFilter!==It&&G.minFilter!==St&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),G.compareFunction&&(i.texParameteri(j,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(j,i.TEXTURE_COMPARE_FUNC,se[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){let Be=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===It||G.minFilter!==Bl&&G.minFilter!==us||G.type===Gr&&e.has("OES_texture_float_linear")===!1||c===!1&&G.type===bn&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(i.texParameterf(j,Be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,o.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function le(j,G){let Ae=!1;j.__webglInit===void 0&&(j.__webglInit=!0,G.addEventListener("dispose",R));let Be=G.source,Re=g.get(Be);Re===void 0&&(Re={},g.set(Be,Re));let Ee=F(G);if(Ee!==j.__cacheKey){Re[Ee]===void 0&&(Re[Ee]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,Ae=!0),Re[Ee].usedTimes++;let Fe=Re[j.__cacheKey];Fe!==void 0&&(Re[j.__cacheKey].usedTimes--,Fe.usedTimes===0&&Q(G)),j.__cacheKey=Ee,j.__webglTexture=Re[Ee].texture}return Ae}function be(j,G,Ae){let Be=i.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Be=i.TEXTURE_2D_ARRAY),G.isData3DTexture&&(Be=i.TEXTURE_3D);let Re=le(j,G),Ee=G.source;t.bindTexture(Be,j.__webglTexture,i.TEXTURE0+Ae);let Fe=n.get(Ee);if(Ee.version!==Fe.__version||Re===!0){t.activeTexture(i.TEXTURE0+Ae),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);let _e=S(G)&&E(G.image)===!1,Ce=v(G.image,_e,!1,h);Ce=We(G,Ce);let Z=E(Ce)||c,L=a.convert(G.format,G.colorSpace),N=a.convert(G.type),V=D(G.internalFormat,L,N,G.colorSpace);oe(Be,G,Z);let q,ne=G.mipmaps,ae=c&&G.isVideoTexture!==!0,J=Fe.__version===void 0||Re===!0,ce=T(G,Ce,Z);if(G.isDepthTexture)V=i.DEPTH_COMPONENT,c?G.type===Gr?V=i.DEPTH_COMPONENT32F:G.type===As?V=i.DEPTH_COMPONENT24:G.type===Aa?V=i.DEPTH24_STENCIL8:V=i.DEPTH_COMPONENT16:G.type===Gr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Os&&V===i.DEPTH_COMPONENT&&G.type!==BA&&G.type!==As&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=As,N=a.convert(G.type)),G.format===kl&&V===i.DEPTH_COMPONENT&&(V=i.DEPTH_STENCIL,G.type!==Aa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Aa,N=a.convert(G.type))),J&&(ae?t.texStorage2D(i.TEXTURE_2D,1,V,Ce.width,Ce.height):t.texImage2D(i.TEXTURE_2D,0,V,Ce.width,Ce.height,0,L,N,null));else if(G.isDataTexture)if(ne.length>0&&Z){ae&&J&&t.texStorage2D(i.TEXTURE_2D,ce,V,ne[0].width,ne[0].height);for(let $=0,ue=ne.length;$<ue;$++)q=ne[$],ae?t.texSubImage2D(i.TEXTURE_2D,$,0,0,q.width,q.height,L,N,q.data):t.texImage2D(i.TEXTURE_2D,$,V,q.width,q.height,0,L,N,q.data);G.generateMipmaps=!1}else ae?(J&&t.texStorage2D(i.TEXTURE_2D,ce,V,Ce.width,Ce.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ce.width,Ce.height,L,N,Ce.data)):t.texImage2D(i.TEXTURE_2D,0,V,Ce.width,Ce.height,0,L,N,Ce.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){ae&&J&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ce,V,ne[0].width,ne[0].height,Ce.depth);for(let $=0,ue=ne.length;$<ue;$++)q=ne[$],G.format!==Xn?L!==null?ae?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$,0,0,0,q.width,q.height,Ce.depth,L,q.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,$,V,q.width,q.height,Ce.depth,0,q.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?t.texSubImage3D(i.TEXTURE_2D_ARRAY,$,0,0,0,q.width,q.height,Ce.depth,L,N,q.data):t.texImage3D(i.TEXTURE_2D_ARRAY,$,V,q.width,q.height,Ce.depth,0,L,N,q.data)}else{ae&&J&&t.texStorage2D(i.TEXTURE_2D,ce,V,ne[0].width,ne[0].height);for(let $=0,ue=ne.length;$<ue;$++)q=ne[$],G.format!==Xn?L!==null?ae?t.compressedTexSubImage2D(i.TEXTURE_2D,$,0,0,q.width,q.height,L,q.data):t.compressedTexImage2D(i.TEXTURE_2D,$,V,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?t.texSubImage2D(i.TEXTURE_2D,$,0,0,q.width,q.height,L,N,q.data):t.texImage2D(i.TEXTURE_2D,$,V,q.width,q.height,0,L,N,q.data)}else if(G.isDataArrayTexture)ae?(J&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ce,V,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,L,N,Ce.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,V,Ce.width,Ce.height,Ce.depth,0,L,N,Ce.data);else if(G.isData3DTexture)ae?(J&&t.texStorage3D(i.TEXTURE_3D,ce,V,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,L,N,Ce.data)):t.texImage3D(i.TEXTURE_3D,0,V,Ce.width,Ce.height,Ce.depth,0,L,N,Ce.data);else if(G.isFramebufferTexture){if(J)if(ae)t.texStorage2D(i.TEXTURE_2D,ce,V,Ce.width,Ce.height);else{let $=Ce.width,ue=Ce.height;for(let xe=0;xe<ce;xe++)t.texImage2D(i.TEXTURE_2D,xe,V,$,ue,0,L,N,null),$>>=1,ue>>=1}}else if(ne.length>0&&Z){ae&&J&&t.texStorage2D(i.TEXTURE_2D,ce,V,ne[0].width,ne[0].height);for(let $=0,ue=ne.length;$<ue;$++)q=ne[$],ae?t.texSubImage2D(i.TEXTURE_2D,$,0,0,L,N,q):t.texImage2D(i.TEXTURE_2D,$,V,L,N,q);G.generateMipmaps=!1}else ae?(J&&t.texStorage2D(i.TEXTURE_2D,ce,V,Ce.width,Ce.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,L,N,Ce)):t.texImage2D(i.TEXTURE_2D,0,V,L,N,Ce);C(G,Z)&&M(Be),Fe.__version=Ee.version,G.onUpdate&&G.onUpdate(G)}j.__version=G.version}function De(j,G,Ae){if(G.image.length!==6)return;let Be=le(j,G),Re=G.source;t.bindTexture(i.TEXTURE_CUBE_MAP,j.__webglTexture,i.TEXTURE0+Ae);let Ee=n.get(Re);if(Re.version!==Ee.__version||Be===!0){t.activeTexture(i.TEXTURE0+Ae),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,G.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,G.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);let Fe=G.isCompressedTexture||G.image[0].isCompressedTexture,_e=G.image[0]&&G.image[0].isDataTexture,Ce=[];for(let $=0;$<6;$++)!Fe&&!_e?Ce[$]=v(G.image[$],!1,!0,u):Ce[$]=_e?G.image[$].image:G.image[$],Ce[$]=We(G,Ce[$]);let Z=Ce[0],L=E(Z)||c,N=a.convert(G.format,G.colorSpace),V=a.convert(G.type),q=D(G.internalFormat,N,V,G.colorSpace),ne=c&&G.isVideoTexture!==!0,ae=Ee.__version===void 0||Be===!0,J=T(G,Z,L);oe(i.TEXTURE_CUBE_MAP,G,L);let ce;if(Fe){ne&&ae&&t.texStorage2D(i.TEXTURE_CUBE_MAP,J,q,Z.width,Z.height);for(let $=0;$<6;$++){ce=Ce[$].mipmaps;for(let ue=0;ue<ce.length;ue++){let xe=ce[ue];G.format!==Xn?N!==null?ne?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue,0,0,xe.width,xe.height,N,xe.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue,q,xe.width,xe.height,0,xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ne?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue,0,0,xe.width,xe.height,N,V,xe.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue,q,xe.width,xe.height,0,N,V,xe.data)}}}else{ce=G.mipmaps,ne&&ae&&(ce.length>0&&J++,t.texStorage2D(i.TEXTURE_CUBE_MAP,J,q,Ce[0].width,Ce[0].height));for(let $=0;$<6;$++)if(_e){ne?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,Ce[$].width,Ce[$].height,N,V,Ce[$].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,q,Ce[$].width,Ce[$].height,0,N,V,Ce[$].data);for(let ue=0;ue<ce.length;ue++){let Ge=ce[ue].image[$].image;ne?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue+1,0,0,Ge.width,Ge.height,N,V,Ge.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue+1,q,Ge.width,Ge.height,0,N,V,Ge.data)}}else{ne?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,N,V,Ce[$]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,q,N,V,Ce[$]);for(let ue=0;ue<ce.length;ue++){let xe=ce[ue];ne?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue+1,0,0,N,V,xe.image[$]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$,ue+1,q,N,V,xe.image[$])}}}C(G,L)&&M(i.TEXTURE_CUBE_MAP),Ee.__version=Re.version,G.onUpdate&&G.onUpdate(G)}j.__version=G.version}function pe(j,G,Ae,Be,Re){let Ee=a.convert(Ae.format,Ae.colorSpace),Fe=a.convert(Ae.type),_e=D(Ae.internalFormat,Ee,Fe,Ae.colorSpace);n.get(G).__hasExternalTextures||(Re===i.TEXTURE_3D||Re===i.TEXTURE_2D_ARRAY?t.texImage3D(Re,0,_e,G.width,G.height,G.depth,0,Ee,Fe,null):t.texImage2D(Re,0,_e,G.width,G.height,0,Ee,Fe,null)),t.bindFramebuffer(i.FRAMEBUFFER,j),Pe(G)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Be,Re,n.get(Ae).__webglTexture,0,Se(G)):(Re===i.TEXTURE_2D||Re>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Be,Re,n.get(Ae).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function K(j,G,Ae){if(i.bindRenderbuffer(i.RENDERBUFFER,j),G.depthBuffer&&!G.stencilBuffer){let Be=i.DEPTH_COMPONENT16;if(Ae||Pe(G)){let Re=G.depthTexture;Re&&Re.isDepthTexture&&(Re.type===Gr?Be=i.DEPTH_COMPONENT32F:Re.type===As&&(Be=i.DEPTH_COMPONENT24));let Ee=Se(G);Pe(G)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ee,Be,G.width,G.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Ee,Be,G.width,G.height)}else i.renderbufferStorage(i.RENDERBUFFER,Be,G.width,G.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,j)}else if(G.depthBuffer&&G.stencilBuffer){let Be=Se(G);Ae&&Pe(G)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Be,i.DEPTH24_STENCIL8,G.width,G.height):Pe(G)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Be,i.DEPTH24_STENCIL8,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,G.width,G.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,j)}else{let Be=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Re=0;Re<Be.length;Re++){let Ee=Be[Re],Fe=a.convert(Ee.format,Ee.colorSpace),_e=a.convert(Ee.type),Ce=D(Ee.internalFormat,Fe,_e,Ee.colorSpace),Z=Se(G);Ae&&Pe(G)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Z,Ce,G.width,G.height):Pe(G)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Z,Ce,G.width,G.height):i.renderbufferStorage(i.RENDERBUFFER,Ce,G.width,G.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function we(j,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,j),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),z(G.depthTexture,0);let Be=n.get(G.depthTexture).__webglTexture,Re=Se(G);if(G.depthTexture.format===Os)Pe(G)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0,Re):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0);else if(G.depthTexture.format===kl)Pe(G)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0,Re):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0);else throw new Error("Unknown depthTexture format")}function me(j){let G=n.get(j),Ae=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!G.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");we(G.__webglFramebuffer,j)}else if(Ae){G.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)t.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer[Be]),G.__webglDepthbuffer[Be]=i.createRenderbuffer(),K(G.__webglDepthbuffer[Be],j,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=i.createRenderbuffer(),K(G.__webglDepthbuffer,j,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function fe(j,G,Ae){let Be=n.get(j);G!==void 0&&pe(Be.__webglFramebuffer,j,j.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),Ae!==void 0&&me(j)}function de(j){let G=j.texture,Ae=n.get(j),Be=n.get(G);j.addEventListener("dispose",P),j.isWebGLMultipleRenderTargets!==!0&&(Be.__webglTexture===void 0&&(Be.__webglTexture=i.createTexture()),Be.__version=G.version,l.memory.textures++);let Re=j.isWebGLCubeRenderTarget===!0,Ee=j.isWebGLMultipleRenderTargets===!0,Fe=E(j)||c;if(Re){Ae.__webglFramebuffer=[];for(let _e=0;_e<6;_e++)Ae.__webglFramebuffer[_e]=i.createFramebuffer()}else{if(Ae.__webglFramebuffer=i.createFramebuffer(),Ee)if(o.drawBuffers){let _e=j.texture;for(let Ce=0,Z=_e.length;Ce<Z;Ce++){let L=n.get(_e[Ce]);L.__webglTexture===void 0&&(L.__webglTexture=i.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&j.samples>0&&Pe(j)===!1){let _e=Ee?G:[G];Ae.__webglMultisampledFramebuffer=i.createFramebuffer(),Ae.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);for(let Ce=0;Ce<_e.length;Ce++){let Z=_e[Ce];Ae.__webglColorRenderbuffer[Ce]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ae.__webglColorRenderbuffer[Ce]);let L=a.convert(Z.format,Z.colorSpace),N=a.convert(Z.type),V=D(Z.internalFormat,L,N,Z.colorSpace,j.isXRRenderTarget===!0),q=Se(j);i.renderbufferStorageMultisample(i.RENDERBUFFER,q,V,j.width,j.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ce,i.RENDERBUFFER,Ae.__webglColorRenderbuffer[Ce])}i.bindRenderbuffer(i.RENDERBUFFER,null),j.depthBuffer&&(Ae.__webglDepthRenderbuffer=i.createRenderbuffer(),K(Ae.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Re){t.bindTexture(i.TEXTURE_CUBE_MAP,Be.__webglTexture),oe(i.TEXTURE_CUBE_MAP,G,Fe);for(let _e=0;_e<6;_e++)pe(Ae.__webglFramebuffer[_e],j,G,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+_e);C(G,Fe)&&M(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ee){let _e=j.texture;for(let Ce=0,Z=_e.length;Ce<Z;Ce++){let L=_e[Ce],N=n.get(L);t.bindTexture(i.TEXTURE_2D,N.__webglTexture),oe(i.TEXTURE_2D,L,Fe),pe(Ae.__webglFramebuffer,j,L,i.COLOR_ATTACHMENT0+Ce,i.TEXTURE_2D),C(L,Fe)&&M(i.TEXTURE_2D)}t.unbindTexture()}else{let _e=i.TEXTURE_2D;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(c?_e=j.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(_e,Be.__webglTexture),oe(_e,G,Fe),pe(Ae.__webglFramebuffer,j,G,i.COLOR_ATTACHMENT0,_e),C(G,Fe)&&M(_e),t.unbindTexture()}j.depthBuffer&&me(j)}function Ne(j){let G=E(j)||c,Ae=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Be=0,Re=Ae.length;Be<Re;Be++){let Ee=Ae[Be];if(C(Ee,G)){let Fe=j.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,_e=n.get(Ee).__webglTexture;t.bindTexture(Fe,_e),M(Fe),t.unbindTexture()}}}function ve(j){if(c&&j.samples>0&&Pe(j)===!1){let G=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],Ae=j.width,Be=j.height,Re=i.COLOR_BUFFER_BIT,Ee=[],Fe=j.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,_e=n.get(j),Ce=j.isWebGLMultipleRenderTargets===!0;if(Ce)for(let Z=0;Z<G.length;Z++)t.bindFramebuffer(i.FRAMEBUFFER,_e.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Z,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,_e.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Z,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,_e.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,_e.__webglFramebuffer);for(let Z=0;Z<G.length;Z++){Ee.push(i.COLOR_ATTACHMENT0+Z),j.depthBuffer&&Ee.push(Fe);let L=_e.__ignoreDepthValues!==void 0?_e.__ignoreDepthValues:!1;if(L===!1&&(j.depthBuffer&&(Re|=i.DEPTH_BUFFER_BIT),j.stencilBuffer&&(Re|=i.STENCIL_BUFFER_BIT)),Ce&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,_e.__webglColorRenderbuffer[Z]),L===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Fe]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Fe])),Ce){let N=n.get(G[Z]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,N,0)}i.blitFramebuffer(0,0,Ae,Be,0,0,Ae,Be,Re,i.NEAREST),p&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ee)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ce)for(let Z=0;Z<G.length;Z++){t.bindFramebuffer(i.FRAMEBUFFER,_e.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Z,i.RENDERBUFFER,_e.__webglColorRenderbuffer[Z]);let L=n.get(G[Z]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,_e.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Z,i.TEXTURE_2D,L,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,_e.__webglMultisampledFramebuffer)}}function Se(j){return Math.min(f,j.samples)}function Pe(j){let G=n.get(j);return c&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function Ie(j){let G=l.render.frame;m.get(j)!==G&&(m.set(j,G),j.update())}function We(j,G){let Ae=j.colorSpace,Be=j.format,Re=j.type;return j.isCompressedTexture===!0||j.format===Cm||Ae!==gr&&Ae!==Gs&&(Ae===nt?c===!1?e.has("EXT_sRGB")===!0&&Be===Xn?(j.format=Cm,j.minFilter=St,j.generateMipmaps=!1):G=Rh.sRGBToLinear(G):(Be!==Xn||Re!==So)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ae)),G}this.allocateTextureUnit=O,this.resetTextureUnits=H,this.setTexture2D=z,this.setTexture2DArray=k,this.setTexture3D=X,this.setTextureCube=te,this.rebindTextures=fe,this.setupRenderTarget=de,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Pe}function vB(i,e,t){let n=t.isWebGL2;function o(a,l=Gs){let c;if(a===So)return i.UNSIGNED_BYTE;if(a===Jw)return i.UNSIGNED_SHORT_4_4_4_4;if(a===jw)return i.UNSIGNED_SHORT_5_5_5_1;if(a===GD)return i.BYTE;if(a===zD)return i.SHORT;if(a===BA)return i.UNSIGNED_SHORT;if(a===Kw)return i.INT;if(a===As)return i.UNSIGNED_INT;if(a===Gr)return i.FLOAT;if(a===bn)return n?i.HALF_FLOAT:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(a===HD)return i.ALPHA;if(a===Xn)return i.RGBA;if(a===WD)return i.LUMINANCE;if(a===VD)return i.LUMINANCE_ALPHA;if(a===Os)return i.DEPTH_COMPONENT;if(a===kl)return i.DEPTH_STENCIL;if(a===Cm)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(a===Ag)return i.RED;if(a===qw)return i.RED_INTEGER;if(a===XD)return i.RG;if(a===$w)return i.RG_INTEGER;if(a===eb)return i.RGBA_INTEGER;if(a===pm||a===mm||a===gm||a===vm)if(l===nt)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(a===pm)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===mm)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===gm)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===vm)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(a===pm)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===mm)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===gm)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===vm)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===px||a===mx||a===gx||a===vx)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(a===px)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===mx)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===gx)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===vx)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===YD)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===yx||a===xx)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(a===yx)return l===nt?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(a===xx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===wx||a===bx||a===Cx||a===Sx||a===Ex||a===Ix||a===Mx||a===Tx||a===Dx||a===Bx||a===Lx||a===Rx||a===kx||a===Px)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(a===wx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===bx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===Cx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===Sx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===Ex)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===Ix)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===Mx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===Tx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===Dx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===Bx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Lx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===Rx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===kx)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===Px)return l===nt?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===ym)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(a===ym)return l===nt?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===ZD||a===_x||a===Nx||a===Fx)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(a===ym)return c.COMPRESSED_RED_RGTC1_EXT;if(a===_x)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===Nx)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===Fx)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Aa?n?i.UNSIGNED_INT_24_8:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):i[a]!==void 0?i[a]:null}return{convert:o}}var Mm=class extends Jt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},cn=class extends ht{constructor(){super(),this.isGroup=!0,this.type="Group"}},QH={type:"move"},Sh=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let o=null,a=null,l=null,c=this._targetRay,A=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){l=!0;for(let b of e.hand.values()){let g=t.getJointPose(b,n),w=this._getHandJoint(u,b);g!==null&&(w.matrix.fromArray(g.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=g.radius),w.visible=g!==null}let h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=h.position.distanceTo(f.position),p=.02,m=.005;u.inputState.pinching&&d>p+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=p-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else A!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(A.matrix.fromArray(a.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,a.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(a.linearVelocity)):A.hasLinearVelocity=!1,a.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(a.angularVelocity)):A.hasAngularVelocity=!1));c!==null&&(o=t.getPose(e.targetRaySpace,n),o===null&&a!==null&&(o=a),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(QH)))}return c!==null&&(c.visible=o!==null),A!==null&&(A.visible=a!==null),u!==null&&(u.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let n=new cn;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},ma=class extends Vt{constructor(e,t,n,o,a,l,c,A,u,h){if(h=h!==void 0?h:Os,h!==Os&&h!==kl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===Os&&(n=As),n===void 0&&h===kl&&(n=Aa),super(null,o,a,l,c,A,h,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:It,this.minFilter=A!==void 0?A:It,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},ew=class extends Ni{constructor(e,t){super();let n=this,o=null,a=1,l=null,c="local-floor",A=1,u=null,h=null,f=null,d=null,p=null,m=null,b=t.getContextAttributes(),g=null,w=null,I=[],v=[],E=new Jt;E.layers.enable(1),E.viewport=new Ct;let S=new Jt;S.layers.enable(2),S.viewport=new Ct;let C=[E,S],M=new Mm;M.layers.enable(1),M.layers.enable(2);let D=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let X=I[k];return X===void 0&&(X=new Sh,I[k]=X),X.getTargetRaySpace()},this.getControllerGrip=function(k){let X=I[k];return X===void 0&&(X=new Sh,I[k]=X),X.getGripSpace()},this.getHand=function(k){let X=I[k];return X===void 0&&(X=new Sh,I[k]=X),X.getHandSpace()};function B(k){let X=v.indexOf(k.inputSource);if(X===-1)return;let te=I[X];te!==void 0&&(te.update(k.inputSource,k.frame,u||l),te.dispatchEvent({type:k.type,data:k.inputSource}))}function R(){o.removeEventListener("select",B),o.removeEventListener("selectstart",B),o.removeEventListener("selectend",B),o.removeEventListener("squeeze",B),o.removeEventListener("squeezestart",B),o.removeEventListener("squeezeend",B),o.removeEventListener("end",R),o.removeEventListener("inputsourceschange",P);for(let k=0;k<I.length;k++){let X=v[k];X!==null&&(v[k]=null,I[k].disconnect(X))}D=null,T=null,e.setRenderTarget(g),p=null,d=null,f=null,o=null,w=null,z.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){a=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){c=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||l},this.setReferenceSpace=function(k){u=k},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return o},this.setSession=async function(k){if(o=k,o!==null){if(g=e.getRenderTarget(),o.addEventListener("select",B),o.addEventListener("selectstart",B),o.addEventListener("selectend",B),o.addEventListener("squeeze",B),o.addEventListener("squeezestart",B),o.addEventListener("squeezeend",B),o.addEventListener("end",R),o.addEventListener("inputsourceschange",P),b.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let X={antialias:o.renderState.layers===void 0?b.antialias:!0,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(o,t,X),o.updateRenderState({baseLayer:p}),w=new Mt(p.framebufferWidth,p.framebufferHeight,{format:Xn,type:So,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let X=null,te=null,ie=null;b.depth&&(ie=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,X=b.stencil?kl:Os,te=b.stencil?Aa:As);let re={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:a};f=new XRWebGLBinding(o,t),d=f.createProjectionLayer(re),o.updateRenderState({layers:[d]}),w=new Mt(d.textureWidth,d.textureHeight,{format:Xn,type:So,depthTexture:new ma(d.textureWidth,d.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0});let se=e.properties.get(w);se.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(A),u=null,l=await o.requestReferenceSpace(c),z.setContext(o),z.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function P(k){for(let X=0;X<k.removed.length;X++){let te=k.removed[X],ie=v.indexOf(te);ie>=0&&(v[ie]=null,I[ie].disconnect(te))}for(let X=0;X<k.added.length;X++){let te=k.added[X],ie=v.indexOf(te);if(ie===-1){for(let se=0;se<I.length;se++)if(se>=v.length){v.push(te),ie=se;break}else if(v[se]===null){v[se]=te,ie=se;break}if(ie===-1)break}let re=I[ie];re&&re.connect(te)}}let _=new Y,Q=new Y;function W(k,X,te){_.setFromMatrixPosition(X.matrixWorld),Q.setFromMatrixPosition(te.matrixWorld);let ie=_.distanceTo(Q),re=X.projectionMatrix.elements,se=te.projectionMatrix.elements,oe=re[14]/(re[10]-1),le=re[14]/(re[10]+1),be=(re[9]+1)/re[5],De=(re[9]-1)/re[5],pe=(re[8]-1)/re[0],K=(se[8]+1)/se[0],we=oe*pe,me=oe*K,fe=ie/(-pe+K),de=fe*-pe;X.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(de),k.translateZ(fe),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert();let Ne=oe+fe,ve=le+fe,Se=we-de,Pe=me+(ie-de),Ie=be*le/ve*Ne,We=De*le/ve*Ne;k.projectionMatrix.makePerspective(Se,Pe,Ie,We,Ne,ve),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}function U(k,X){X===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(X.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(o===null)return;M.near=S.near=E.near=k.near,M.far=S.far=E.far=k.far,(D!==M.near||T!==M.far)&&(o.updateRenderState({depthNear:M.near,depthFar:M.far}),D=M.near,T=M.far);let X=k.parent,te=M.cameras;U(M,X);for(let ie=0;ie<te.length;ie++)U(te[ie],X);te.length===2?W(M,E,S):M.projectionMatrix.copy(E.projectionMatrix),H(k,M,X)};function H(k,X,te){te===null?k.matrix.copy(X.matrixWorld):(k.matrix.copy(te.matrixWorld),k.matrix.invert(),k.matrix.multiply(X.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0);let ie=k.children;for(let re=0,se=ie.length;re<se;re++)ie[re].updateMatrixWorld(!0);k.projectionMatrix.copy(X.projectionMatrix),k.projectionMatrixInverse.copy(X.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=uA*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&p===null))return A},this.setFoveation=function(k){A=k,d!==null&&(d.fixedFoveation=k),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=k)};let O=null;function F(k,X){if(h=X.getViewerPose(u||l),m=X,h!==null){let te=h.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let ie=!1;te.length!==M.cameras.length&&(M.cameras.length=0,ie=!0);for(let re=0;re<te.length;re++){let se=te[re],oe=null;if(p!==null)oe=p.getViewport(se);else{let be=f.getViewSubImage(d,se);oe=be.viewport,re===0&&(e.setRenderTargetTextures(w,be.colorTexture,d.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(w))}let le=C[re];le===void 0&&(le=new Jt,le.layers.enable(re),le.viewport=new Ct,C[re]=le),le.matrix.fromArray(se.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(se.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(oe.x,oe.y,oe.width,oe.height),re===0&&(M.matrix.copy(le.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ie===!0&&M.cameras.push(le)}}for(let te=0;te<I.length;te++){let ie=v[te],re=I[te];ie!==null&&re!==void 0&&re.update(ie,X,u||l)}O&&O(k,X),X.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:X}),m=null}let z=new fB;z.setAnimationLoop(F),this.setAnimationLoop=function(k){O=k},this.dispose=function(){}}};function UH(i,e){function t(g,w){g.matrixAutoUpdate===!0&&g.updateMatrix(),w.value.copy(g.matrix)}function n(g,w){w.color.getRGB(g.fogColor.value,hB(i)),w.isFog?(g.fogNear.value=w.near,g.fogFar.value=w.far):w.isFogExp2&&(g.fogDensity.value=w.density)}function o(g,w,I,v,E){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(g,w):w.isMeshToonMaterial?(a(g,w),f(g,w)):w.isMeshPhongMaterial?(a(g,w),h(g,w)):w.isMeshStandardMaterial?(a(g,w),d(g,w),w.isMeshPhysicalMaterial&&p(g,w,E)):w.isMeshMatcapMaterial?(a(g,w),m(g,w)):w.isMeshDepthMaterial?a(g,w):w.isMeshDistanceMaterial?(a(g,w),b(g,w)):w.isMeshNormalMaterial?a(g,w):w.isLineBasicMaterial?(l(g,w),w.isLineDashedMaterial&&c(g,w)):w.isPointsMaterial?A(g,w,I,v):w.isSpriteMaterial?u(g,w):w.isShadowMaterial?(g.color.value.copy(w.color),g.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(g,w){g.opacity.value=w.opacity,w.color&&g.diffuse.value.copy(w.color),w.emissive&&g.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.bumpMap&&(g.bumpMap.value=w.bumpMap,t(w.bumpMap,g.bumpMapTransform),g.bumpScale.value=w.bumpScale,w.side===Yn&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,t(w.normalMap,g.normalMapTransform),g.normalScale.value.copy(w.normalScale),w.side===Yn&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,t(w.displacementMap,g.displacementMapTransform),g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,g.emissiveMapTransform)),w.specularMap&&(g.specularMap.value=w.specularMap,t(w.specularMap,g.specularMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);let I=e.get(w).envMap;if(I&&(g.envMap.value=I,g.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=w.reflectivity,g.ior.value=w.ior,g.refractionRatio.value=w.refractionRatio),w.lightMap){g.lightMap.value=w.lightMap;let v=i.useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=w.lightMapIntensity*v,t(w.lightMap,g.lightMapTransform)}w.aoMap&&(g.aoMap.value=w.aoMap,g.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,g.aoMapTransform))}function l(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform))}function c(g,w){g.dashSize.value=w.dashSize,g.totalSize.value=w.dashSize+w.gapSize,g.scale.value=w.scale}function A(g,w,I,v){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.size.value=w.size*I,g.scale.value=v*.5,w.map&&(g.map.value=w.map,t(w.map,g.uvTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function u(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.rotation.value=w.rotation,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function h(g,w){g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4)}function f(g,w){w.gradientMap&&(g.gradientMap.value=w.gradientMap)}function d(g,w){g.metalness.value=w.metalness,w.metalnessMap&&(g.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,g.metalnessMapTransform)),g.roughness.value=w.roughness,w.roughnessMap&&(g.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,g.roughnessMapTransform)),e.get(w).envMap&&(g.envMapIntensity.value=w.envMapIntensity)}function p(g,w,I){g.ior.value=w.ior,w.sheen>0&&(g.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),g.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(g.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,g.sheenColorMapTransform)),w.sheenRoughnessMap&&(g.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,g.sheenRoughnessMapTransform))),w.clearcoat>0&&(g.clearcoat.value=w.clearcoat,g.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(g.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,g.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(g.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Yn&&g.clearcoatNormalScale.value.negate())),w.iridescence>0&&(g.iridescence.value=w.iridescence,g.iridescenceIOR.value=w.iridescenceIOR,g.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(g.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,g.iridescenceMapTransform)),w.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),w.transmission>0&&(g.transmission.value=w.transmission,g.transmissionSamplerMap.value=I.texture,g.transmissionSamplerSize.value.set(I.width,I.height),w.transmissionMap&&(g.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,g.transmissionMapTransform)),g.thickness.value=w.thickness,w.thicknessMap&&(g.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=w.attenuationDistance,g.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(g.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(g.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=w.specularIntensity,g.specularColor.value.copy(w.specularColor),w.specularColorMap&&(g.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,g.specularColorMapTransform)),w.specularIntensityMap&&(g.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,w){w.matcap&&(g.matcap.value=w.matcap)}function b(g,w){let I=e.get(w).light;g.referencePosition.value.setFromMatrixPosition(I.matrixWorld),g.nearDistance.value=I.shadow.camera.near,g.farDistance.value=I.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:o}}function OH(i,e,t,n){let o={},a={},l=[],c=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function A(I,v){let E=v.program;n.uniformBlockBinding(I,E)}function u(I,v){let E=o[I.id];E===void 0&&(m(I),E=h(I),o[I.id]=E,I.addEventListener("dispose",g));let S=v.program;n.updateUBOMapping(I,S);let C=e.render.frame;a[I.id]!==C&&(d(I),a[I.id]=C)}function h(I){let v=f();I.__bindingPointIndex=v;let E=i.createBuffer(),S=I.__size,C=I.usage;return i.bindBuffer(i.UNIFORM_BUFFER,E),i.bufferData(i.UNIFORM_BUFFER,S,C),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,v,E),E}function f(){for(let I=0;I<c;I++)if(l.indexOf(I)===-1)return l.push(I),I;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(I){let v=o[I.id],E=I.uniforms,S=I.__cache;i.bindBuffer(i.UNIFORM_BUFFER,v);for(let C=0,M=E.length;C<M;C++){let D=E[C];if(p(D,C,S)===!0){let T=D.__offset,B=Array.isArray(D.value)?D.value:[D.value],R=0;for(let P=0;P<B.length;P++){let _=B[P],Q=b(_);typeof _=="number"?(D.__data[0]=_,i.bufferSubData(i.UNIFORM_BUFFER,T+R,D.__data)):_.isMatrix3?(D.__data[0]=_.elements[0],D.__data[1]=_.elements[1],D.__data[2]=_.elements[2],D.__data[3]=_.elements[0],D.__data[4]=_.elements[3],D.__data[5]=_.elements[4],D.__data[6]=_.elements[5],D.__data[7]=_.elements[0],D.__data[8]=_.elements[6],D.__data[9]=_.elements[7],D.__data[10]=_.elements[8],D.__data[11]=_.elements[0]):(_.toArray(D.__data,R),R+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,T,D.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function p(I,v,E){let S=I.value;if(E[v]===void 0){if(typeof S=="number")E[v]=S;else{let C=Array.isArray(S)?S:[S],M=[];for(let D=0;D<C.length;D++)M.push(C[D].clone());E[v]=M}return!0}else if(typeof S=="number"){if(E[v]!==S)return E[v]=S,!0}else{let C=Array.isArray(E[v])?E[v]:[E[v]],M=Array.isArray(S)?S:[S];for(let D=0;D<C.length;D++){let T=C[D];if(T.equals(M[D])===!1)return T.copy(M[D]),!0}}return!1}function m(I){let v=I.uniforms,E=0,S=16,C=0;for(let M=0,D=v.length;M<D;M++){let T=v[M],B={boundary:0,storage:0},R=Array.isArray(T.value)?T.value:[T.value];for(let P=0,_=R.length;P<_;P++){let Q=R[P],W=b(Q);B.boundary+=W.boundary,B.storage+=W.storage}if(T.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=E,M>0){C=E%S;let P=S-C;C!==0&&P-B.boundary<0&&(E+=S-C,T.__offset=E)}E+=B.storage}return C=E%S,C>0&&(E+=S-C),I.__size=E,I.__cache={},this}function b(I){let v={boundary:0,storage:0};return typeof I=="number"?(v.boundary=4,v.storage=4):I.isVector2?(v.boundary=8,v.storage=8):I.isVector3||I.isColor?(v.boundary=16,v.storage=12):I.isVector4?(v.boundary=16,v.storage=16):I.isMatrix3?(v.boundary=48,v.storage=48):I.isMatrix4?(v.boundary=64,v.storage=64):I.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",I),v}function g(I){let v=I.target;v.removeEventListener("dispose",g);let E=l.indexOf(v.__bindingPointIndex);l.splice(E,1),i.deleteBuffer(o[v.id]),delete o[v.id],delete a[v.id]}function w(){for(let I in o)i.deleteBuffer(o[I]);l=[],o={},a={}}return{bind:A,update:u,dispose:w}}function GH(){let i=Lh("canvas");return i.style.display="block",i}var mA=class{constructor(e={}){let{canvas:t=GH(),context:n=null,depth:o=!0,stencil:a=!0,alpha:l=!1,antialias:c=!1,premultipliedAlpha:A=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;n!==null?d=n.getContextAttributes().alpha:d=l;let p=new Uint32Array(4),m=new Int32Array(4),b=null,g=null,w=[],I=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=nt,this.useLegacyLights=!0,this.toneMapping=Us,this.toneMappingExposure=1;let v=this,E=!1,S=0,C=0,M=null,D=-1,T=null,B=new Ct,R=new Ct,P=null,_=new ke(0),Q=0,W=t.width,U=t.height,H=1,O=null,F=null,z=new Ct(0,0,W,U),k=new Ct(0,0,W,U),X=!1,te=new pa,ie=!1,re=!1,se=null,oe=new Qe,le=new he,be=new Y,De={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function pe(){return M===null?H:1}let K=n;function we(ee,ye){for(let Te=0;Te<ee.length;Te++){let ge=ee[Te],Le=t.getContext(ge,ye);if(Le!==null)return Le}return null}try{let ee={alpha:!0,depth:o,stencil:a,antialias:c,premultipliedAlpha:A,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${og}`),t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",$,!1),t.addEventListener("webglcontextcreationerror",ue,!1),K===null){let ye=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ye.shift(),K=we(ye,ee),K===null)throw we(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&K instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let me,fe,de,Ne,ve,Se,Pe,Ie,We,j,G,Ae,Be,Re,Ee,Fe,_e,Ce,Z,L,N,V,q,ne;function ae(){me=new lz(K),fe=new nz(K,me,e),me.init(fe),V=new vB(K,me,fe),de=new NH(K,me,fe),Ne=new uz(K),ve=new SH,Se=new FH(K,me,de,ve,fe,V,Ne),Pe=new rz(v),Ie=new az(v),We=new wO(K,fe),q=new ez(K,me,We,fe),j=new cz(K,We,Ne,q),G=new pz(K,j,We,Ne),Z=new dz(K,fe,Se),Fe=new iz(ve),Ae=new CH(v,Pe,Ie,me,fe,q,Fe),Be=new UH(v,ve),Re=new IH,Ee=new RH(me,fe),Ce=new $9(v,Pe,Ie,de,G,d,A),_e=new _H(v,G,fe),ne=new OH(K,Ne,fe,de),L=new tz(K,me,Ne,fe),N=new Az(K,me,Ne,fe),Ne.programs=Ae.programs,v.capabilities=fe,v.extensions=me,v.properties=ve,v.renderLists=Re,v.shadowMap=_e,v.state=de,v.info=Ne}ae();let J=new ew(v,K);this.xr=J,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){let ee=me.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){let ee=me.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(ee){ee!==void 0&&(H=ee,this.setSize(W,U,!1))},this.getSize=function(ee){return ee.set(W,U)},this.setSize=function(ee,ye,Te=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=ee,U=ye,t.width=Math.floor(ee*H),t.height=Math.floor(ye*H),Te===!0&&(t.style.width=ee+"px",t.style.height=ye+"px"),this.setViewport(0,0,ee,ye)},this.getDrawingBufferSize=function(ee){return ee.set(W*H,U*H).floor()},this.setDrawingBufferSize=function(ee,ye,Te){W=ee,U=ye,H=Te,t.width=Math.floor(ee*Te),t.height=Math.floor(ye*Te),this.setViewport(0,0,ee,ye)},this.getCurrentViewport=function(ee){return ee.copy(B)},this.getViewport=function(ee){return ee.copy(z)},this.setViewport=function(ee,ye,Te,ge){ee.isVector4?z.set(ee.x,ee.y,ee.z,ee.w):z.set(ee,ye,Te,ge),de.viewport(B.copy(z).multiplyScalar(H).floor())},this.getScissor=function(ee){return ee.copy(k)},this.setScissor=function(ee,ye,Te,ge){ee.isVector4?k.set(ee.x,ee.y,ee.z,ee.w):k.set(ee,ye,Te,ge),de.scissor(R.copy(k).multiplyScalar(H).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(ee){de.setScissorTest(X=ee)},this.setOpaqueSort=function(ee){O=ee},this.setTransparentSort=function(ee){F=ee},this.getClearColor=function(ee){return ee.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(ee=!0,ye=!0,Te=!0){let ge=0;if(ee){let Le=!1;if(M!==null){let je=M.texture.format;Le=je===eb||je===$w||je===qw}if(Le){let je=M.texture.type,st=je===So||je===As||je===BA||je===Aa||je===Jw||je===jw,at=Ce.getClearColor(),ct=Ce.getClearAlpha(),vt=at.r,Ue=at.g,ut=at.b;st?(p[0]=vt,p[1]=Ue,p[2]=ut,p[3]=ct,K.clearBufferuiv(K.COLOR,0,p)):(m[0]=vt,m[1]=Ue,m[2]=ut,m[3]=ct,K.clearBufferiv(K.COLOR,0,m))}else ge|=K.COLOR_BUFFER_BIT}ye&&(ge|=K.DEPTH_BUFFER_BIT),Te&&(ge|=K.STENCIL_BUFFER_BIT),K.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",$,!1),t.removeEventListener("webglcontextcreationerror",ue,!1),Re.dispose(),Ee.dispose(),ve.dispose(),Pe.dispose(),Ie.dispose(),G.dispose(),q.dispose(),ne.dispose(),Ae.dispose(),J.dispose(),J.removeEventListener("sessionstart",ot),J.removeEventListener("sessionend",gt),se&&(se.dispose(),se=null),rt.stop()};function ce(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function $(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;let ee=Ne.autoReset,ye=_e.enabled,Te=_e.autoUpdate,ge=_e.needsUpdate,Le=_e.type;ae(),Ne.autoReset=ee,_e.enabled=ye,_e.autoUpdate=Te,_e.needsUpdate=ge,_e.type=Le}function ue(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function xe(ee){let ye=ee.target;ye.removeEventListener("dispose",xe),Ge(ye)}function Ge(ee){ze(ee),ve.remove(ee)}function ze(ee){let ye=ve.get(ee).programs;ye!==void 0&&(ye.forEach(function(Te){Ae.releaseProgram(Te)}),ee.isShaderMaterial&&Ae.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,ye,Te,ge,Le,je){ye===null&&(ye=De);let st=Le.isMesh&&Le.matrixWorld.determinant()<0,at=Qn(ee,ye,Te,ge,Le);de.setMaterial(ge,st);let ct=Te.index,vt=1;ge.wireframe===!0&&(ct=j.getWireframeAttribute(Te),vt=2);let Ue=Te.drawRange,ut=Te.attributes.position,ln=Ue.start*vt,en=(Ue.start+Ue.count)*vt;je!==null&&(ln=Math.max(ln,je.start*vt),en=Math.min(en,(je.start+je.count)*vt)),ct!==null?(ln=Math.max(ln,0),en=Math.min(en,ct.count)):ut!=null&&(ln=Math.max(ln,0),en=Math.min(en,ut.count));let Wi=en-ln;if(Wi<0||Wi===1/0)return;q.setup(Le,ge,at,Te,ct);let ur,tn=L;if(ct!==null&&(ur=We.get(ct),tn=N,tn.setIndex(ur)),Le.isMesh)ge.wireframe===!0?(de.setLineWidth(ge.wireframeLinewidth*pe()),tn.setMode(K.LINES)):tn.setMode(K.TRIANGLES);else if(Le.isLine){let bt=ge.linewidth;bt===void 0&&(bt=1),de.setLineWidth(bt*pe()),Le.isLineSegments?tn.setMode(K.LINES):Le.isLineLoop?tn.setMode(K.LINE_LOOP):tn.setMode(K.LINE_STRIP)}else Le.isPoints?tn.setMode(K.POINTS):Le.isSprite&&tn.setMode(K.TRIANGLES);if(Le.isInstancedMesh)tn.renderInstances(ln,Wi,Le.count);else if(Te.isInstancedBufferGeometry){let bt=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,Lc=Math.min(Te.instanceCount,bt);tn.renderInstances(ln,Wi,Lc)}else tn.render(ln,Wi)},this.compile=function(ee,ye){function Te(ge,Le,je){ge.transparent===!0&&ge.side===zt&&ge.forceSinglePass===!1?(ge.side=Yn,ge.needsUpdate=!0,hn(ge,Le,je),ge.side=Pi,ge.needsUpdate=!0,hn(ge,Le,je),ge.side=zt):hn(ge,Le,je)}g=Ee.get(ee),g.init(),I.push(g),ee.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ye.layers)&&(g.pushLight(ge),ge.castShadow&&g.pushShadow(ge))}),g.setupLights(v.useLegacyLights),ee.traverse(function(ge){let Le=ge.material;if(Le)if(Array.isArray(Le))for(let je=0;je<Le.length;je++){let st=Le[je];Te(st,ee,ge)}else Te(Le,ee,ge)}),I.pop(),g=null};let Ze=null;function Ke(ee){Ze&&Ze(ee)}function ot(){rt.stop()}function gt(){rt.start()}let rt=new fB;rt.setAnimationLoop(Ke),typeof self<"u"&&rt.setContext(self),this.setAnimationLoop=function(ee){Ze=ee,J.setAnimationLoop(ee),ee===null?rt.stop():rt.start()},J.addEventListener("sessionstart",ot),J.addEventListener("sessionend",gt),this.render=function(ee,ye){if(ye!==void 0&&ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),ye.parent===null&&ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(J.cameraAutoUpdate===!0&&J.updateCamera(ye),ye=J.getCamera()),ee.isScene===!0&&ee.onBeforeRender(v,ee,ye,M),g=Ee.get(ee,I.length),g.init(),I.push(g),oe.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),te.setFromProjectionMatrix(oe),re=this.localClippingEnabled,ie=Fe.init(this.clippingPlanes,re),b=Re.get(ee,w.length),b.init(),w.push(b),Mn(ee,ye,0,v.sortObjects),b.finish(),v.sortObjects===!0&&b.sort(O,F),this.info.render.frame++,ie===!0&&Fe.beginShadows();let Te=g.state.shadowsArray;if(_e.render(Te,ee,ye),ie===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ce.render(b,ee),g.setupLights(v.useLegacyLights),ye.isArrayCamera){let ge=ye.cameras;for(let Le=0,je=ge.length;Le<je;Le++){let st=ge[Le];Tn(b,ee,st,st.viewport)}}else Tn(b,ee,ye);M!==null&&(Se.updateMultisampleRenderTarget(M),Se.updateRenderTargetMipmap(M)),ee.isScene===!0&&ee.onAfterRender(v,ee,ye),q.resetDefaultState(),D=-1,T=null,I.pop(),I.length>0?g=I[I.length-1]:g=null,w.pop(),w.length>0?b=w[w.length-1]:b=null};function Mn(ee,ye,Te,ge){if(ee.visible===!1)return;if(ee.layers.test(ye.layers)){if(ee.isGroup)Te=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(ye);else if(ee.isLight)g.pushLight(ee),ee.castShadow&&g.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||te.intersectsSprite(ee)){ge&&be.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(oe);let st=G.update(ee),at=ee.material;at.visible&&b.push(ee,st,at,Te,be.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||te.intersectsObject(ee))){let st=G.update(ee),at=ee.material;if(ge&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),be.copy(ee.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),be.copy(st.boundingSphere.center)),be.applyMatrix4(ee.matrixWorld).applyMatrix4(oe)),Array.isArray(at)){let ct=st.groups;for(let vt=0,Ue=ct.length;vt<Ue;vt++){let ut=ct[vt],ln=at[ut.materialIndex];ln&&ln.visible&&b.push(ee,st,ln,Te,be.z,ut)}}else at.visible&&b.push(ee,st,at,Te,be.z,null)}}let je=ee.children;for(let st=0,at=je.length;st<at;st++)Mn(je[st],ye,Te,ge)}function Tn(ee,ye,Te,ge){let Le=ee.opaque,je=ee.transmissive,st=ee.transparent;g.setupLightsView(Te),ie===!0&&Fe.setGlobalState(v.clippingPlanes,Te),je.length>0&&kt(Le,je,ye,Te),ge&&de.viewport(B.copy(ge)),Le.length>0&&Dt(Le,ye,Te),je.length>0&&Dt(je,ye,Te),st.length>0&&Dt(st,ye,Te),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function kt(ee,ye,Te,ge){let Le=fe.isWebGL2;se===null&&(se=new Mt(1,1,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?bn:So,minFilter:us,samples:Le?4:0})),v.getDrawingBufferSize(le),Le?se.setSize(le.x,le.y):se.setSize(Sm(le.x),Sm(le.y));let je=v.getRenderTarget();v.setRenderTarget(se),v.getClearColor(_),Q=v.getClearAlpha(),Q<1&&v.setClearColor(16777215,.5),v.clear();let st=v.toneMapping;v.toneMapping=Us,Dt(ee,Te,ge),Se.updateMultisampleRenderTarget(se),Se.updateRenderTargetMipmap(se);let at=!1;for(let ct=0,vt=ye.length;ct<vt;ct++){let Ue=ye[ct],ut=Ue.object,ln=Ue.geometry,en=Ue.material,Wi=Ue.group;if(en.side===zt&&ut.layers.test(ge.layers)){let ur=en.side;en.side=Yn,en.needsUpdate=!0,di(ut,Te,ge,ln,en,Wi),en.side=ur,en.needsUpdate=!0,at=!0}}at===!0&&(Se.updateMultisampleRenderTarget(se),Se.updateRenderTargetMipmap(se)),v.setRenderTarget(je),v.setClearColor(_,Q),v.toneMapping=st}function Dt(ee,ye,Te){let ge=ye.isScene===!0?ye.overrideMaterial:null;for(let Le=0,je=ee.length;Le<je;Le++){let st=ee[Le],at=st.object,ct=st.geometry,vt=ge===null?st.material:ge,Ue=st.group;at.layers.test(Te.layers)&&di(at,ye,Te,ct,vt,Ue)}}function di(ee,ye,Te,ge,Le,je){ee.onBeforeRender(v,ye,Te,ge,Le,je),ee.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Le.onBeforeRender(v,ye,Te,ge,ee,je),Le.transparent===!0&&Le.side===zt&&Le.forceSinglePass===!1?(Le.side=Yn,Le.needsUpdate=!0,v.renderBufferDirect(Te,ye,ge,Le,ee,je),Le.side=Pi,Le.needsUpdate=!0,v.renderBufferDirect(Te,ye,ge,Le,ee,je),Le.side=zt):v.renderBufferDirect(Te,ye,ge,Le,ee,je),ee.onAfterRender(v,ye,Te,ge,Le,je)}function hn(ee,ye,Te){ye.isScene!==!0&&(ye=De);let ge=ve.get(ee),Le=g.state.lights,je=g.state.shadowsArray,st=Le.state.version,at=Ae.getParameters(ee,Le.state,je,ye,Te),ct=Ae.getProgramCacheKey(at),vt=ge.programs;ge.environment=ee.isMeshStandardMaterial?ye.environment:null,ge.fog=ye.fog,ge.envMap=(ee.isMeshStandardMaterial?Ie:Pe).get(ee.envMap||ge.environment),vt===void 0&&(ee.addEventListener("dispose",xe),vt=new Map,ge.programs=vt);let Ue=vt.get(ct);if(Ue!==void 0){if(ge.currentProgram===Ue&&ge.lightsStateVersion===st)return fn(ee,at),Ue}else at.uniforms=Ae.getUniforms(ee),ee.onBuild(Te,at,v),ee.onBeforeCompile(at,v),Ue=Ae.acquireProgram(at,ct),vt.set(ct,Ue),ge.uniforms=at.uniforms;let ut=ge.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(ut.clippingPlanes=Fe.uniform),fn(ee,at),ge.needsLights=yi(ee),ge.lightsStateVersion=st,ge.needsLights&&(ut.ambientLightColor.value=Le.state.ambient,ut.lightProbe.value=Le.state.probe,ut.directionalLights.value=Le.state.directional,ut.directionalLightShadows.value=Le.state.directionalShadow,ut.spotLights.value=Le.state.spot,ut.spotLightShadows.value=Le.state.spotShadow,ut.rectAreaLights.value=Le.state.rectArea,ut.ltc_1.value=Le.state.rectAreaLTC1,ut.ltc_2.value=Le.state.rectAreaLTC2,ut.pointLights.value=Le.state.point,ut.pointLightShadows.value=Le.state.pointShadow,ut.hemisphereLights.value=Le.state.hemi,ut.directionalShadowMap.value=Le.state.directionalShadowMap,ut.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,ut.spotShadowMap.value=Le.state.spotShadowMap,ut.spotLightMatrix.value=Le.state.spotLightMatrix,ut.spotLightMap.value=Le.state.spotLightMap,ut.pointShadowMap.value=Le.state.pointShadowMap,ut.pointShadowMatrix.value=Le.state.pointShadowMatrix);let ln=Ue.getUniforms(),en=lA.seqWithValue(ln.seq,ut);return ge.currentProgram=Ue,ge.uniformsList=en,Ue}function fn(ee,ye){let Te=ve.get(ee);Te.outputColorSpace=ye.outputColorSpace,Te.instancing=ye.instancing,Te.skinning=ye.skinning,Te.morphTargets=ye.morphTargets,Te.morphNormals=ye.morphNormals,Te.morphColors=ye.morphColors,Te.morphTargetsCount=ye.morphTargetsCount,Te.numClippingPlanes=ye.numClippingPlanes,Te.numIntersection=ye.numClipIntersection,Te.vertexAlphas=ye.vertexAlphas,Te.vertexTangents=ye.vertexTangents,Te.toneMapping=ye.toneMapping}function Qn(ee,ye,Te,ge,Le){ye.isScene!==!0&&(ye=De),Se.resetTextureUnits();let je=ye.fog,st=ge.isMeshStandardMaterial?ye.environment:null,at=M===null?v.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:gr,ct=(ge.isMeshStandardMaterial?Ie:Pe).get(ge.envMap||st),vt=ge.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,Ue=!!Te.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),ut=!!Te.morphAttributes.position,ln=!!Te.morphAttributes.normal,en=!!Te.morphAttributes.color,Wi=ge.toneMapped?v.toneMapping:Us,ur=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,tn=ur!==void 0?ur.length:0,bt=ve.get(ge),Lc=g.state.lights;if(ie===!0&&(re===!0||ee!==T)){let pi=ee===T&&ge.id===D;Fe.setState(ge,ee,pi)}let dn=!1;ge.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Lc.state.version||bt.outputColorSpace!==at||Le.isInstancedMesh&&bt.instancing===!1||!Le.isInstancedMesh&&bt.instancing===!0||Le.isSkinnedMesh&&bt.skinning===!1||!Le.isSkinnedMesh&&bt.skinning===!0||bt.envMap!==ct||ge.fog===!0&&bt.fog!==je||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Fe.numPlanes||bt.numIntersection!==Fe.numIntersection)||bt.vertexAlphas!==vt||bt.vertexTangents!==Ue||bt.morphTargets!==ut||bt.morphNormals!==ln||bt.morphColors!==en||bt.toneMapping!==Wi||fe.isWebGL2===!0&&bt.morphTargetsCount!==tn)&&(dn=!0):(dn=!0,bt.__version=ge.version);let _s=bt.currentProgram;dn===!0&&(_s=hn(ge,ye,Le));let Rc=!1,na=!1,ho=!1,Vn=_s.getUniforms(),Vi=bt.uniforms;if(de.useProgram(_s.program)&&(Rc=!0,na=!0,ho=!0),ge.id!==D&&(D=ge.id,na=!0),Rc||T!==ee){if(Vn.setValue(K,"projectionMatrix",ee.projectionMatrix),fe.logarithmicDepthBuffer&&Vn.setValue(K,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),T!==ee&&(T=ee,na=!0,ho=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){let pi=Vn.map.cameraPosition;pi!==void 0&&pi.setValue(K,be.setFromMatrixPosition(ee.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Vn.setValue(K,"isOrthographic",ee.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Le.isSkinnedMesh)&&Vn.setValue(K,"viewMatrix",ee.matrixWorldInverse)}if(Le.isSkinnedMesh){Vn.setOptional(K,Le,"bindMatrix"),Vn.setOptional(K,Le,"bindMatrixInverse");let pi=Le.skeleton;pi&&(fe.floatVertexTextures?(pi.boneTexture===null&&pi.computeBoneTexture(),Vn.setValue(K,"boneTexture",pi.boneTexture,Se),Vn.setValue(K,"boneTextureSize",pi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Al=Te.morphAttributes;if((Al.position!==void 0||Al.normal!==void 0||Al.color!==void 0&&fe.isWebGL2===!0)&&Z.update(Le,Te,_s),(na||bt.receiveShadow!==Le.receiveShadow)&&(bt.receiveShadow=Le.receiveShadow,Vn.setValue(K,"receiveShadow",Le.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Vi.envMap.value=ct,Vi.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),na&&(Vn.setValue(K,"toneMappingExposure",v.toneMappingExposure),bt.needsLights&&Ar(Vi,ho),je&&ge.fog===!0&&Be.refreshFogUniforms(Vi,je),Be.refreshMaterialUniforms(Vi,ge,H,U,se),lA.upload(K,bt.uniformsList,Vi,Se)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(lA.upload(K,bt.uniformsList,Vi,Se),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Vn.setValue(K,"center",Le.center),Vn.setValue(K,"modelViewMatrix",Le.modelViewMatrix),Vn.setValue(K,"normalMatrix",Le.normalMatrix),Vn.setValue(K,"modelMatrix",Le.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){let pi=ge.uniformsGroups;for(let ul=0,hl=pi.length;ul<hl;ul++)if(fe.isWebGL2){let gp=pi[ul];ne.update(gp,_s),ne.bind(gp,_s)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _s}function Ar(ee,ye){ee.ambientLightColor.needsUpdate=ye,ee.lightProbe.needsUpdate=ye,ee.directionalLights.needsUpdate=ye,ee.directionalLightShadows.needsUpdate=ye,ee.pointLights.needsUpdate=ye,ee.pointLightShadows.needsUpdate=ye,ee.spotLights.needsUpdate=ye,ee.spotLightShadows.needsUpdate=ye,ee.rectAreaLights.needsUpdate=ye,ee.hemisphereLights.needsUpdate=ye}function yi(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ee,ye,Te){ve.get(ee.texture).__webglTexture=ye,ve.get(ee.depthTexture).__webglTexture=Te;let ge=ve.get(ee);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=Te===void 0,ge.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,ye){let Te=ve.get(ee);Te.__webglFramebuffer=ye,Te.__useDefaultFramebuffer=ye===void 0},this.setRenderTarget=function(ee,ye=0,Te=0){M=ee,S=ye,C=Te;let ge=!0,Le=null,je=!1,st=!1;if(ee){let ct=ve.get(ee);ct.__useDefaultFramebuffer!==void 0?(de.bindFramebuffer(K.FRAMEBUFFER,null),ge=!1):ct.__webglFramebuffer===void 0?Se.setupRenderTarget(ee):ct.__hasExternalTextures&&Se.rebindTextures(ee,ve.get(ee.texture).__webglTexture,ve.get(ee.depthTexture).__webglTexture);let vt=ee.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(st=!0);let Ue=ve.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Le=Ue[ye],je=!0):fe.isWebGL2&&ee.samples>0&&Se.useMultisampledRTT(ee)===!1?Le=ve.get(ee).__webglMultisampledFramebuffer:Le=Ue,B.copy(ee.viewport),R.copy(ee.scissor),P=ee.scissorTest}else B.copy(z).multiplyScalar(H).floor(),R.copy(k).multiplyScalar(H).floor(),P=X;if(de.bindFramebuffer(K.FRAMEBUFFER,Le)&&fe.drawBuffers&&ge&&de.drawBuffers(ee,Le),de.viewport(B),de.scissor(R),de.setScissorTest(P),je){let ct=ve.get(ee.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ye,ct.__webglTexture,Te)}else if(st){let ct=ve.get(ee.texture),vt=ye||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,ct.__webglTexture,Te||0,vt)}D=-1},this.readRenderTargetPixels=function(ee,ye,Te,ge,Le,je,st){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=ve.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&st!==void 0&&(at=at[st]),at){de.bindFramebuffer(K.FRAMEBUFFER,at);try{let ct=ee.texture,vt=ct.format,Ue=ct.type;if(vt!==Xn&&V.convert(vt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let ut=Ue===bn&&(me.has("EXT_color_buffer_half_float")||fe.isWebGL2&&me.has("EXT_color_buffer_float"));if(Ue!==So&&V.convert(Ue)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ue===Gr&&(fe.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye>=0&&ye<=ee.width-ge&&Te>=0&&Te<=ee.height-Le&&K.readPixels(ye,Te,ge,Le,V.convert(vt),V.convert(Ue),je)}finally{let ct=M!==null?ve.get(M).__webglFramebuffer:null;de.bindFramebuffer(K.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(ee,ye,Te=0){let ge=Math.pow(2,-Te),Le=Math.floor(ye.image.width*ge),je=Math.floor(ye.image.height*ge);Se.setTexture2D(ye,0),K.copyTexSubImage2D(K.TEXTURE_2D,Te,0,0,ee.x,ee.y,Le,je),de.unbindTexture()},this.copyTextureToTexture=function(ee,ye,Te,ge=0){let Le=ye.image.width,je=ye.image.height,st=V.convert(Te.format),at=V.convert(Te.type);Se.setTexture2D(Te,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Te.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Te.unpackAlignment),ye.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,Le,je,st,at,ye.image.data):ye.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,ye.mipmaps[0].width,ye.mipmaps[0].height,st,ye.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,st,at,ye.image),ge===0&&Te.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),de.unbindTexture()},this.copyTextureToTexture3D=function(ee,ye,Te,ge,Le=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let je=ee.max.x-ee.min.x+1,st=ee.max.y-ee.min.y+1,at=ee.max.z-ee.min.z+1,ct=V.convert(ge.format),vt=V.convert(ge.type),Ue;if(ge.isData3DTexture)Se.setTexture3D(ge,0),Ue=K.TEXTURE_3D;else if(ge.isDataArrayTexture)Se.setTexture2DArray(ge,0),Ue=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ge.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ge.unpackAlignment);let ut=K.getParameter(K.UNPACK_ROW_LENGTH),ln=K.getParameter(K.UNPACK_IMAGE_HEIGHT),en=K.getParameter(K.UNPACK_SKIP_PIXELS),Wi=K.getParameter(K.UNPACK_SKIP_ROWS),ur=K.getParameter(K.UNPACK_SKIP_IMAGES),tn=Te.isCompressedTexture?Te.mipmaps[0]:Te.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,tn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,tn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,ee.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,ee.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ee.min.z),Te.isDataTexture||Te.isData3DTexture?K.texSubImage3D(Ue,Le,ye.x,ye.y,ye.z,je,st,at,ct,vt,tn.data):Te.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Ue,Le,ye.x,ye.y,ye.z,je,st,at,ct,tn.data)):K.texSubImage3D(Ue,Le,ye.x,ye.y,ye.z,je,st,at,ct,vt,tn),K.pixelStorei(K.UNPACK_ROW_LENGTH,ut),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ln),K.pixelStorei(K.UNPACK_SKIP_PIXELS,en),K.pixelStorei(K.UNPACK_SKIP_ROWS,Wi),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ur),Le===0&&ge.generateMipmaps&&K.generateMipmap(Ue),de.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?Se.setTextureCube(ee,0):ee.isData3DTexture?Se.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?Se.setTexture2DArray(ee,0):Se.setTexture2D(ee,0),de.unbindTexture()},this.resetState=function(){S=0,C=0,M=null,de.reset(),q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qs}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===nt?ua:ib}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ua?nt:gr}},Tm=class extends mA{};Tm.prototype.isWebGL1Renderer=!0;var gA=class i{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ke(e),this.density=t}clone(){return new i(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},Dm=class i{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ke(e),this.near=t,this.far=n}clone(){return new i(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},To=class extends ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},Ji=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Dh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=mr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let o=0,a=this.stride;o<a;o++)this.array[e+o]=t.array[n+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Ri=new Y,Ln=class i{constructor(e,t,n,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix4(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ri.fromBufferAttribute(this,t),Ri.applyNormalMatrix(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ri.fromBufferAttribute(this,t),Ri.transformDirection(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=pr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=pr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=pr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=pr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=o,this}setXYZW(e,t,n,o,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),n=xt(n,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=o,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let o=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return new it(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let o=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Nh=class extends Sn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},qc,dh=new Y,$c=new Y,eA=new Y,tA=new he,ph=new he,yB=new Qe,Zp=new Y,mh=new Y,Kp=new Y,ET=new he,qy=new he,IT=new he,Bm=class extends ht{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",qc===void 0){qc=new qe;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ji(t,5);qc.setIndex([0,1,2,0,2,3]),qc.setAttribute("position",new Ln(n,3,0,!1)),qc.setAttribute("uv",new Ln(n,2,3,!1))}this.geometry=qc,this.material=e!==void 0?e:new Nh,this.center=new he(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$c.setFromMatrixScale(this.matrixWorld),yB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),eA.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$c.multiplyScalar(-eA.z);let n=this.material.rotation,o,a;n!==0&&(a=Math.cos(n),o=Math.sin(n));let l=this.center;Jp(Zp.set(-.5,-.5,0),eA,l,$c,o,a),Jp(mh.set(.5,-.5,0),eA,l,$c,o,a),Jp(Kp.set(.5,.5,0),eA,l,$c,o,a),ET.set(0,0),qy.set(1,0),IT.set(1,1);let c=e.ray.intersectTriangle(Zp,mh,Kp,!1,dh);if(c===null&&(Jp(mh.set(-.5,.5,0),eA,l,$c,o,a),qy.set(0,1),c=e.ray.intersectTriangle(Zp,Kp,mh,!1,dh),c===null))return;let A=e.ray.origin.distanceTo(dh);A<e.near||A>e.far||t.push({distance:A,point:dh.clone(),uv:Co.getInterpolation(dh,Zp,mh,Kp,ET,qy,IT,new he),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Jp(i,e,t,n,o,a){tA.subVectors(i,t).addScalar(.5).multiply(n),o!==void 0?(ph.x=a*tA.x-o*tA.y,ph.y=o*tA.x+a*tA.y):ph.copy(tA),i.copy(e),i.x+=ph.x,i.y+=ph.y,i.applyMatrix4(yB)}var jp=new Y,MT=new Y,Lm=class extends ht{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let n=0,o=t.length;n<o;n++){let a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);let o=this.levels,a;for(a=0;a<o.length&&!(t<o[a].distance);a++);return o.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,o;for(n=1,o=t.length;n<o;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){jp.setFromMatrixPosition(this.matrixWorld);let o=e.ray.origin.distanceTo(jp);this.getObjectForDistance(o).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){jp.setFromMatrixPosition(e.matrixWorld),MT.setFromMatrixPosition(this.matrixWorld);let n=jp.distanceTo(MT)/e.zoom;t[0].object.visible=!0;let o,a;for(o=1,a=t.length;o<a;o++){let l=t[o].distance;if(t[o].object.visible&&(l-=l*t[o].hysteresis),n>=l)t[o-1].object.visible=!1,t[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<a;o++)t[o].object.visible=!1}}toJSON(e){let t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let o=0,a=n.length;o<a;o++){let l=n[o];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}},TT=new Y,DT=new Ct,BT=new Ct,zH=new Y,LT=new Qe,nA=new Y,$y=new Xt,RT=new Qe,ex=new Ws,ga=class extends Xe{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qe,this.bindMatrixInverse=new Qe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Cn),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)nA.fromBufferAttribute(t,n),this.applyBoneTransform(n,nA),this.boundingBox.expandByPoint(nA)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xt),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)nA.fromBufferAttribute(t,n),this.applyBoneTransform(n,nA),this.boundingSphere.expandByPoint(nA)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,o=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$y.copy(this.boundingSphere),$y.applyMatrix4(o),e.ray.intersectsSphere($y)!==!1&&(RT.copy(o).invert(),ex.copy(e.ray).applyMatrix4(RT),!(this.boundingBox!==null&&ex.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,ex)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new Ct,t=this.geometry.attributes.skinWeight;for(let n=0,o=t.count;n<o;n++){e.fromBufferAttribute(t,n);let a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,o=this.geometry;DT.fromBufferAttribute(o.attributes.skinIndex,e),BT.fromBufferAttribute(o.attributes.skinWeight,e),TT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){let l=BT.getComponent(a);if(l!==0){let c=DT.getComponent(a);LT.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(zH.copy(TT).applyMatrix4(LT),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}},Vs=class extends ht{constructor(){super(),this.isBone=!0,this.type="Bone"}},zs=class extends Vt{constructor(e=null,t=1,n=1,o,a,l,c,A,u=It,h=It,f,d){super(null,l,c,A,u,h,o,a,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},kT=new Qe,HH=new Qe,va=class i{constructor(e=[],t=[]){this.uuid=mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,o=this.bones.length;n<o;n++)this.boneInverses.push(new Qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let n=new Qe;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,o=this.boneTexture;for(let a=0,l=e.length;a<l;a++){let c=e[a]?e[a].matrixWorld:HH;kT.multiplyMatrices(c,t[a]),kT.toArray(n,a*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new i(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=cB(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new zs(t,e,e,Xn,Gr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,o=e.bones.length;n<o;n++){let a=e.bones[n],l=t[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new Vs),this.bones.push(l),this.boneInverses.push(new Qe().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let o=0,a=t.length;o<a;o++){let l=t[o];e.bones.push(l.uuid);let c=n[o];e.boneInverses.push(c.toArray())}return e}},vr=class extends it{constructor(e,t,n,o=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},iA=new Qe,PT=new Qe,qp=[],_T=new Cn,WH=new Qe,gh=new Xe,vh=new Xt,vA=class extends Xe{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new vr(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<n;o++)this.setMatrixAt(o,WH)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Cn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,iA),_T.copy(e.boundingBox).applyMatrix4(iA),this.boundingBox.union(_T)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xt),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,iA),vh.copy(e.boundingSphere).applyMatrix4(iA),this.boundingSphere.union(vh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let n=this.matrixWorld,o=this.count;if(gh.geometry=this.geometry,gh.material=this.material,gh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vh.copy(this.boundingSphere),vh.applyMatrix4(n),e.ray.intersectsSphere(vh)!==!1))for(let a=0;a<o;a++){this.getMatrixAt(a,iA),PT.multiplyMatrices(n,iA),gh.matrixWorld=PT,gh.raycast(e,qp);for(let l=0,c=qp.length;l<c;l++){let A=qp[l];A.instanceId=a,A.object=this,t.push(A)}qp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new vr(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Rn=class extends Sn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},NT=new Y,FT=new Y,QT=new Qe,tx=new Ws,$p=new Xt,ji=class extends ht{constructor(e=new qe,t=new Rn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[0];for(let o=1,a=t.count;o<a;o++)NT.fromBufferAttribute(t,o-1),FT.fromBufferAttribute(t,o),n[o]=n[o-1],n[o]+=NT.distanceTo(FT);e.setAttribute("lineDistance",new He(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,o=this.matrixWorld,a=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),$p.copy(n.boundingSphere),$p.applyMatrix4(o),$p.radius+=a,e.ray.intersectsSphere($p)===!1)return;QT.copy(o).invert(),tx.copy(e.ray).applyMatrix4(QT);let c=a/((this.scale.x+this.scale.y+this.scale.z)/3),A=c*c,u=new Y,h=new Y,f=new Y,d=new Y,p=this.isLineSegments?2:1,m=n.index,g=n.attributes.position;if(m!==null){let w=Math.max(0,l.start),I=Math.min(m.count,l.start+l.count);for(let v=w,E=I-1;v<E;v+=p){let S=m.getX(v),C=m.getX(v+1);if(u.fromBufferAttribute(g,S),h.fromBufferAttribute(g,C),tx.distanceSqToSegment(u,h,d,f)>A)continue;d.applyMatrix4(this.matrixWorld);let D=e.ray.origin.distanceTo(d);D<e.near||D>e.far||t.push({distance:D,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let w=Math.max(0,l.start),I=Math.min(g.count,l.start+l.count);for(let v=w,E=I-1;v<E;v+=p){if(u.fromBufferAttribute(g,v),h.fromBufferAttribute(g,v+1),tx.distanceSqToSegment(u,h,d,f)>A)continue;d.applyMatrix4(this.matrixWorld);let C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let o=t[n[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}},UT=new Y,OT=new Y,qi=class extends ji{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[];for(let o=0,a=t.count;o<a;o+=2)UT.fromBufferAttribute(t,o),OT.fromBufferAttribute(t,o+1),n[o]=o===0?0:n[o-1],n[o+1]=n[o]+UT.distanceTo(OT);e.setAttribute("lineDistance",new He(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},yA=class extends ji{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Do=class extends Sn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},GT=new Qe,tw=new Ws,em=new Xt,tm=new Y,ya=class extends ht{constructor(e=new qe,t=new Do){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,o=this.matrixWorld,a=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),em.copy(n.boundingSphere),em.applyMatrix4(o),em.radius+=a,e.ray.intersectsSphere(em)===!1)return;GT.copy(o).invert(),tw.copy(e.ray).applyMatrix4(GT);let c=a/((this.scale.x+this.scale.y+this.scale.z)/3),A=c*c,u=n.index,f=n.attributes.position;if(u!==null){let d=Math.max(0,l.start),p=Math.min(u.count,l.start+l.count);for(let m=d,b=p;m<b;m++){let g=u.getX(m);tm.fromBufferAttribute(f,g),zT(tm,g,A,o,e,t,this)}}else{let d=Math.max(0,l.start),p=Math.min(f.count,l.start+l.count);for(let m=d,b=p;m<b;m++)tm.fromBufferAttribute(f,m),zT(tm,m,A,o,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let o=t[n[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}};function zT(i,e,t,n,o,a,l){let c=tw.distanceSqToPoint(i);if(c<t){let A=new Y;tw.closestPointToPoint(i,A),A.applyMatrix4(n);let u=o.ray.origin.distanceTo(A);if(u<o.near||u>o.far)return;a.push({distance:u,distanceToRay:Math.sqrt(c),point:A,index:e,face:null,object:l})}}var Fh=class extends Vt{constructor(e,t,n,o,a,l,c,A,u){super(e,t,n,o,a,l,c,A,u),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:St,this.magFilter=a!==void 0?a:St,this.generateMipmaps=!1;let h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},nw=class extends Vt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=It,this.minFilter=It,this.generateMipmaps=!1,this.needsUpdate=!0}},Qh=class extends Vt{constructor(e,t,n,o,a,l,c,A,u,h,f,d){super(null,l,c,A,u,h,o,a,f,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},iw=class extends Qh{constructor(e,t,n,o,a,l){super(e,t,n,a,l),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=Bn}},Uh=class extends Vt{constructor(e,t,n,o,a,l,c,A,u){super(e,t,n,o,a,l,c,A,u),this.isCanvasTexture=!0,this.needsUpdate=!0}},Qi=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,o=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),a+=n.distanceTo(o),t.push(a),o=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n=this.getLengths(),o=0,a=n.length,l;t?l=t:l=e*n[a-1];let c=0,A=a-1,u;for(;c<=A;)if(o=Math.floor(c+(A-c)/2),u=n[o]-l,u<0)c=o+1;else if(u>0)A=o-1;else{A=o;break}if(o=A,n[o]===l)return o/(a-1);let h=n[o],d=n[o+1]-h,p=(l-h)/d;return(o+p)/(a-1)}getTangent(e,t){let o=e-1e-4,a=e+1e-4;o<0&&(o=0),a>1&&(a=1);let l=this.getPoint(o),c=this.getPoint(a),A=t||(l.isVector2?new he:new Y);return A.copy(c).sub(l).normalize(),A}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new Y,o=[],a=[],l=[],c=new Y,A=new Qe;for(let p=0;p<=e;p++){let m=p/e;o[p]=this.getTangentAt(m,new Y)}a[0]=new Y,l[0]=new Y;let u=Number.MAX_VALUE,h=Math.abs(o[0].x),f=Math.abs(o[0].y),d=Math.abs(o[0].z);h<=u&&(u=h,n.set(1,0,0)),f<=u&&(u=f,n.set(0,1,0)),d<=u&&n.set(0,0,1),c.crossVectors(o[0],n).normalize(),a[0].crossVectors(o[0],c),l[0].crossVectors(o[0],a[0]);for(let p=1;p<=e;p++){if(a[p]=a[p-1].clone(),l[p]=l[p-1].clone(),c.crossVectors(o[p-1],o[p]),c.length()>Number.EPSILON){c.normalize();let m=Math.acos(wn(o[p-1].dot(o[p]),-1,1));a[p].applyMatrix4(A.makeRotationAxis(c,m))}l[p].crossVectors(o[p],a[p])}if(t===!0){let p=Math.acos(wn(a[0].dot(a[e]),-1,1));p/=e,o[0].dot(c.crossVectors(a[0],a[e]))>0&&(p=-p);for(let m=1;m<=e;m++)a[m].applyMatrix4(A.makeRotationAxis(o[m],p*m)),l[m].crossVectors(o[m],a[m])}return{tangents:o,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},xA=class extends Qi{constructor(e=0,t=0,n=1,o=1,a=0,l=Math.PI*2,c=!1,A=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=o,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=c,this.aRotation=A}getPoint(e,t){let n=t||new he,o=Math.PI*2,a=this.aEndAngle-this.aStartAngle,l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(l?a=0:a=o),this.aClockwise===!0&&!l&&(a===o?a=-o:a=a-o);let c=this.aStartAngle+e*a,A=this.aX+this.xRadius*Math.cos(c),u=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){let h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=A-this.aX,p=u-this.aY;A=d*h-p*f+this.aX,u=d*f+p*h+this.aY}return n.set(A,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Rm=class extends xA{constructor(e,t,n,o,a,l){super(e,t,n,n,o,a,l),this.isArcCurve=!0,this.type="ArcCurve"}};function ab(){let i=0,e=0,t=0,n=0;function o(a,l,c,A){i=a,e=c,t=-3*a+3*l-2*c-A,n=2*a-2*l+c+A}return{initCatmullRom:function(a,l,c,A,u){o(l,c,u*(c-a),u*(A-l))},initNonuniformCatmullRom:function(a,l,c,A,u,h,f){let d=(l-a)/u-(c-a)/(u+h)+(c-l)/h,p=(c-l)/h-(A-l)/(h+f)+(A-c)/f;d*=h,p*=h,o(l,c,d,p)},calc:function(a){let l=a*a,c=l*a;return i+e*a+t*l+n*c}}}var nm=new Y,nx=new ab,ix=new ab,rx=new ab,Ol=class extends Qi{constructor(e=[],t=!1,n="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=o}getPoint(e,t=new Y){let n=t,o=this.points,a=o.length,l=(a-(this.closed?0:1))*e,c=Math.floor(l),A=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:A===0&&c===a-1&&(c=a-2,A=1);let u,h;this.closed||c>0?u=o[(c-1)%a]:(nm.subVectors(o[0],o[1]).add(o[0]),u=nm);let f=o[c%a],d=o[(c+1)%a];if(this.closed||c+2<a?h=o[(c+2)%a]:(nm.subVectors(o[a-1],o[a-2]).add(o[a-1]),h=nm),this.curveType==="centripetal"||this.curveType==="chordal"){let p=this.curveType==="chordal"?.5:.25,m=Math.pow(u.distanceToSquared(f),p),b=Math.pow(f.distanceToSquared(d),p),g=Math.pow(d.distanceToSquared(h),p);b<1e-4&&(b=1),m<1e-4&&(m=b),g<1e-4&&(g=b),nx.initNonuniformCatmullRom(u.x,f.x,d.x,h.x,m,b,g),ix.initNonuniformCatmullRom(u.y,f.y,d.y,h.y,m,b,g),rx.initNonuniformCatmullRom(u.z,f.z,d.z,h.z,m,b,g)}else this.curveType==="catmullrom"&&(nx.initCatmullRom(u.x,f.x,d.x,h.x,this.tension),ix.initCatmullRom(u.y,f.y,d.y,h.y,this.tension),rx.initCatmullRom(u.z,f.z,d.z,h.z,this.tension));return n.set(nx.calc(A),ix.calc(A),rx.calc(A)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let o=e.points[t];this.points.push(new Y().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function HT(i,e,t,n,o){let a=(n-e)*.5,l=(o-t)*.5,c=i*i,A=i*c;return(2*t-2*n+a+l)*A+(-3*t+3*n-2*a-l)*c+a*i+t}function VH(i,e){let t=1-i;return t*t*e}function XH(i,e){return 2*(1-i)*i*e}function YH(i,e){return i*i*e}function Eh(i,e,t,n){return VH(i,e)+XH(i,t)+YH(i,n)}function ZH(i,e){let t=1-i;return t*t*t*e}function KH(i,e){let t=1-i;return 3*t*t*i*e}function JH(i,e){return 3*(1-i)*i*i*e}function jH(i,e){return i*i*i*e}function Ih(i,e,t,n,o){return ZH(i,e)+KH(i,t)+JH(i,n)+jH(i,o)}var Oh=class extends Qi{constructor(e=new he,t=new he,n=new he,o=new he){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=o}getPoint(e,t=new he){let n=t,o=this.v0,a=this.v1,l=this.v2,c=this.v3;return n.set(Ih(e,o.x,a.x,l.x,c.x),Ih(e,o.y,a.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},km=class extends Qi{constructor(e=new Y,t=new Y,n=new Y,o=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=o}getPoint(e,t=new Y){let n=t,o=this.v0,a=this.v1,l=this.v2,c=this.v3;return n.set(Ih(e,o.x,a.x,l.x,c.x),Ih(e,o.y,a.y,l.y,c.y),Ih(e,o.z,a.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},wA=class extends Qi{constructor(e=new he,t=new he){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new he){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Pm=class extends Qi{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Gh=class extends Qi{constructor(e=new he,t=new he,n=new he){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new he){let n=t,o=this.v0,a=this.v1,l=this.v2;return n.set(Eh(e,o.x,a.x,l.x),Eh(e,o.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},zh=class extends Qi{constructor(e=new Y,t=new Y,n=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Y){let n=t,o=this.v0,a=this.v1,l=this.v2;return n.set(Eh(e,o.x,a.x,l.x),Eh(e,o.y,a.y,l.y),Eh(e,o.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Hh=class extends Qi{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new he){let n=t,o=this.points,a=(o.length-1)*e,l=Math.floor(a),c=a-l,A=o[l===0?l:l-1],u=o[l],h=o[l>o.length-2?o.length-1:l+1],f=o[l>o.length-3?o.length-1:l+2];return n.set(HT(c,A.x,u.x,h.x,f.x),HT(c,A.y,u.y,h.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let o=e.points[t];this.points.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let o=e.points[t];this.points.push(new he().fromArray(o))}return this}},lb=Object.freeze({__proto__:null,ArcCurve:Rm,CatmullRomCurve3:Ol,CubicBezierCurve:Oh,CubicBezierCurve3:km,EllipseCurve:xA,LineCurve:wA,LineCurve3:Pm,QuadraticBezierCurve:Gh,QuadraticBezierCurve3:zh,SplineCurve:Hh}),_m=class extends Qi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wA(t,e))}getPoint(e,t){let n=e*this.getLength(),o=this.getCurveLengths(),a=0;for(;a<o.length;){if(o[a]>=n){let l=o[a]-n,c=this.curves[a],A=c.getLength(),u=A===0?0:1-l/A;return c.getPointAt(u,t)}a++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,o=this.curves.length;n<o;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],n;for(let o=0,a=this.curves;o<a.length;o++){let l=a[o],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,A=l.getPoints(c);for(let u=0;u<A.length;u++){let h=A[u];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let o=e.curves[t];this.curves.push(new lb[o.type]().fromJSON(o))}return this}},Gl=class extends _m{constructor(e){super(),this.type="Path",this.currentPoint=new he,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new wA(this.currentPoint.clone(),new he(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,o){let a=new Gh(this.currentPoint.clone(),new he(e,t),new he(n,o));return this.curves.push(a),this.currentPoint.set(n,o),this}bezierCurveTo(e,t,n,o,a,l){let c=new Oh(this.currentPoint.clone(),new he(e,t),new he(n,o),new he(a,l));return this.curves.push(c),this.currentPoint.set(a,l),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new Hh(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,o,a,l){let c=this.currentPoint.x,A=this.currentPoint.y;return this.absarc(e+c,t+A,n,o,a,l),this}absarc(e,t,n,o,a,l){return this.absellipse(e,t,n,n,o,a,l),this}ellipse(e,t,n,o,a,l,c,A){let u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,n,o,a,l,c,A),this}absellipse(e,t,n,o,a,l,c,A){let u=new xA(e,t,n,o,a,l,c,A);if(this.curves.length>0){let f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);let h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Wh=class i extends qe{constructor(e=[new he(0,-.5),new he(.5,0),new he(0,.5)],t=12,n=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:o},t=Math.floor(t),o=wn(o,0,Math.PI*2);let a=[],l=[],c=[],A=[],u=[],h=1/t,f=new Y,d=new he,p=new Y,m=new Y,b=new Y,g=0,w=0;for(let I=0;I<=e.length-1;I++)switch(I){case 0:g=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,p.x=w*1,p.y=-g,p.z=w*0,b.copy(p),p.normalize(),A.push(p.x,p.y,p.z);break;case e.length-1:A.push(b.x,b.y,b.z);break;default:g=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,p.x=w*1,p.y=-g,p.z=w*0,m.copy(p),p.x+=b.x,p.y+=b.y,p.z+=b.z,p.normalize(),A.push(p.x,p.y,p.z),b.copy(m)}for(let I=0;I<=t;I++){let v=n+I*h*o,E=Math.sin(v),S=Math.cos(v);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*E,f.y=e[C].y,f.z=e[C].x*S,l.push(f.x,f.y,f.z),d.x=I/t,d.y=C/(e.length-1),c.push(d.x,d.y);let M=A[3*C+0]*E,D=A[3*C+1],T=A[3*C+0]*S;u.push(M,D,T)}}for(let I=0;I<t;I++)for(let v=0;v<e.length-1;v++){let E=v+I*e.length,S=E,C=E+e.length,M=E+e.length+1,D=E+1;a.push(S,C,D),a.push(M,D,C)}this.setIndex(a),this.setAttribute("position",new He(l,3)),this.setAttribute("uv",new He(c,2)),this.setAttribute("normal",new He(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.points,e.segments,e.phiStart,e.phiLength)}},Nm=class i extends Wh{constructor(e=1,t=1,n=4,o=8){let a=new Gl;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(n),o),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:o}}static fromJSON(e){return new i(e.radius,e.length,e.capSegments,e.radialSegments)}},Fm=class i extends qe{constructor(e=1,t=32,n=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:o},t=Math.max(3,t);let a=[],l=[],c=[],A=[],u=new Y,h=new he;l.push(0,0,0),c.push(0,0,1),A.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){let p=n+f/t*o;u.x=e*Math.cos(p),u.y=e*Math.sin(p),l.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(l[d]/e+1)/2,h.y=(l[d+1]/e+1)/2,A.push(h.x,h.y)}for(let f=1;f<=t;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new He(l,3)),this.setAttribute("normal",new He(c,3)),this.setAttribute("uv",new He(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.segments,e.thetaStart,e.thetaLength)}},yr=class i extends qe{constructor(e=1,t=1,n=1,o=32,a=1,l=!1,c=0,A=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:o,heightSegments:a,openEnded:l,thetaStart:c,thetaLength:A};let u=this;o=Math.floor(o),a=Math.floor(a);let h=[],f=[],d=[],p=[],m=0,b=[],g=n/2,w=0;I(),l===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(h),this.setAttribute("position",new He(f,3)),this.setAttribute("normal",new He(d,3)),this.setAttribute("uv",new He(p,2));function I(){let E=new Y,S=new Y,C=0,M=(t-e)/n;for(let D=0;D<=a;D++){let T=[],B=D/a,R=B*(t-e)+e;for(let P=0;P<=o;P++){let _=P/o,Q=_*A+c,W=Math.sin(Q),U=Math.cos(Q);S.x=R*W,S.y=-B*n+g,S.z=R*U,f.push(S.x,S.y,S.z),E.set(W,M,U).normalize(),d.push(E.x,E.y,E.z),p.push(_,1-B),T.push(m++)}b.push(T)}for(let D=0;D<o;D++)for(let T=0;T<a;T++){let B=b[T][D],R=b[T+1][D],P=b[T+1][D+1],_=b[T][D+1];h.push(B,R,_),h.push(R,P,_),C+=6}u.addGroup(w,C,0),w+=C}function v(E){let S=m,C=new he,M=new Y,D=0,T=E===!0?e:t,B=E===!0?1:-1;for(let P=1;P<=o;P++)f.push(0,g*B,0),d.push(0,B,0),p.push(.5,.5),m++;let R=m;for(let P=0;P<=o;P++){let Q=P/o*A+c,W=Math.cos(Q),U=Math.sin(Q);M.x=T*U,M.y=g*B,M.z=T*W,f.push(M.x,M.y,M.z),d.push(0,B,0),C.x=W*.5+.5,C.y=U*.5*B+.5,p.push(C.x,C.y),m++}for(let P=0;P<o;P++){let _=S+P,Q=R+P;E===!0?h.push(Q,Q+1,_):h.push(Q+1,Q,_),D+=3}u.addGroup(w,D,E===!0?1:2),w+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Qm=class i extends yr{constructor(e=1,t=1,n=32,o=1,a=!1,l=0,c=Math.PI*2){super(0,e,t,n,o,a,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c}}static fromJSON(e){return new i(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},xa=class i extends qe{constructor(e=[],t=[],n=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:o};let a=[],l=[];c(o),u(n),h(),this.setAttribute("position",new He(a,3)),this.setAttribute("normal",new He(a.slice(),3)),this.setAttribute("uv",new He(l,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function c(I){let v=new Y,E=new Y,S=new Y;for(let C=0;C<t.length;C+=3)p(t[C+0],v),p(t[C+1],E),p(t[C+2],S),A(v,E,S,I)}function A(I,v,E,S){let C=S+1,M=[];for(let D=0;D<=C;D++){M[D]=[];let T=I.clone().lerp(E,D/C),B=v.clone().lerp(E,D/C),R=C-D;for(let P=0;P<=R;P++)P===0&&D===C?M[D][P]=T:M[D][P]=T.clone().lerp(B,P/R)}for(let D=0;D<C;D++)for(let T=0;T<2*(C-D)-1;T++){let B=Math.floor(T/2);T%2===0?(d(M[D][B+1]),d(M[D+1][B]),d(M[D][B])):(d(M[D][B+1]),d(M[D+1][B+1]),d(M[D+1][B]))}}function u(I){let v=new Y;for(let E=0;E<a.length;E+=3)v.x=a[E+0],v.y=a[E+1],v.z=a[E+2],v.normalize().multiplyScalar(I),a[E+0]=v.x,a[E+1]=v.y,a[E+2]=v.z}function h(){let I=new Y;for(let v=0;v<a.length;v+=3){I.x=a[v+0],I.y=a[v+1],I.z=a[v+2];let E=g(I)/2/Math.PI+.5,S=w(I)/Math.PI+.5;l.push(E,1-S)}m(),f()}function f(){for(let I=0;I<l.length;I+=6){let v=l[I+0],E=l[I+2],S=l[I+4],C=Math.max(v,E,S),M=Math.min(v,E,S);C>.9&&M<.1&&(v<.2&&(l[I+0]+=1),E<.2&&(l[I+2]+=1),S<.2&&(l[I+4]+=1))}}function d(I){a.push(I.x,I.y,I.z)}function p(I,v){let E=I*3;v.x=e[E+0],v.y=e[E+1],v.z=e[E+2]}function m(){let I=new Y,v=new Y,E=new Y,S=new Y,C=new he,M=new he,D=new he;for(let T=0,B=0;T<a.length;T+=9,B+=6){I.set(a[T+0],a[T+1],a[T+2]),v.set(a[T+3],a[T+4],a[T+5]),E.set(a[T+6],a[T+7],a[T+8]),C.set(l[B+0],l[B+1]),M.set(l[B+2],l[B+3]),D.set(l[B+4],l[B+5]),S.copy(I).add(v).add(E).divideScalar(3);let R=g(S);b(C,B+0,I,R),b(M,B+2,v,R),b(D,B+4,E,R)}}function b(I,v,E,S){S<0&&I.x===1&&(l[v]=I.x-1),E.x===0&&E.z===0&&(l[v]=S/2/Math.PI+.5)}function g(I){return Math.atan2(I.z,-I.x)}function w(I){return Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.vertices,e.indices,e.radius,e.details)}},Um=class i extends xa{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,o=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-n,0,-o,n,0,o,-n,0,o,n,-o,-n,0,-o,n,0,o,-n,0,o,n,0,-n,0,-o,n,0,-o,-n,0,o,n,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new i(e.radius,e.detail)}},im=new Y,rm=new Y,sx=new Y,sm=new Co,Om=class extends qe{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let o=Math.pow(10,4),a=Math.cos(Ll*t),l=e.getIndex(),c=e.getAttribute("position"),A=l?l.count:c.count,u=[0,0,0],h=["a","b","c"],f=new Array(3),d={},p=[];for(let m=0;m<A;m+=3){l?(u[0]=l.getX(m),u[1]=l.getX(m+1),u[2]=l.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);let{a:b,b:g,c:w}=sm;if(b.fromBufferAttribute(c,u[0]),g.fromBufferAttribute(c,u[1]),w.fromBufferAttribute(c,u[2]),sm.getNormal(sx),f[0]=`${Math.round(b.x*o)},${Math.round(b.y*o)},${Math.round(b.z*o)}`,f[1]=`${Math.round(g.x*o)},${Math.round(g.y*o)},${Math.round(g.z*o)}`,f[2]=`${Math.round(w.x*o)},${Math.round(w.y*o)},${Math.round(w.z*o)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let I=0;I<3;I++){let v=(I+1)%3,E=f[I],S=f[v],C=sm[h[I]],M=sm[h[v]],D=`${E}_${S}`,T=`${S}_${E}`;T in d&&d[T]?(sx.dot(d[T].normal)<=a&&(p.push(C.x,C.y,C.z),p.push(M.x,M.y,M.z)),d[T]=null):D in d||(d[D]={index0:u[I],index1:u[v],normal:sx.clone()})}}for(let m in d)if(d[m]){let{index0:b,index1:g}=d[m];im.fromBufferAttribute(c,b),rm.fromBufferAttribute(c,g),p.push(im.x,im.y,im.z),p.push(rm.x,rm.y,rm.z)}this.setAttribute("position",new He(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Eo=class extends Gl{constructor(e){super(e),this.uuid=mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,o=this.holes.length;n<o;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let o=e.holes[t];this.holes.push(new Gl().fromJSON(o))}return this}},qH={triangulate:function(i,e,t=2){let n=e&&e.length,o=n?e[0]*t:i.length,a=xB(i,0,o,t,!0),l=[];if(!a||a.next===a.prev)return l;let c,A,u,h,f,d,p;if(n&&(a=i8(i,e,a,t)),i.length>80*t){c=u=i[0],A=h=i[1];for(let m=t;m<o;m+=t)f=i[m],d=i[m+1],f<c&&(c=f),d<A&&(A=d),f>u&&(u=f),d>h&&(h=d);p=Math.max(u-c,h-A),p=p!==0?32767/p:0}return Vh(a,l,t,c,A,p,0),l}};function xB(i,e,t,n,o){let a,l;if(o===d8(i,e,t,n)>0)for(a=e;a<t;a+=n)l=WT(a,i[a],i[a+1],l);else for(a=t-n;a>=e;a-=n)l=WT(a,i[a],i[a+1],l);return l&&dg(l,l.next)&&(Yh(l),l=l.next),l}function zl(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(dg(t,t.next)||pn(t.prev,t,t.next)===0)){if(Yh(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Vh(i,e,t,n,o,a,l){if(!i)return;!l&&a&&l8(i,n,o,a);let c=i,A,u;for(;i.prev!==i.next;){if(A=i.prev,u=i.next,a?e8(i,n,o,a):$H(i)){e.push(A.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),Yh(i),i=u.next,c=u.next;continue}if(i=u,i===c){l?l===1?(i=t8(zl(i),e,t),Vh(i,e,t,n,o,a,2)):l===2&&n8(i,e,t,n,o,a):Vh(zl(i),e,t,n,o,a,1);break}}}function $H(i){let e=i.prev,t=i,n=i.next;if(pn(e,t,n)>=0)return!1;let o=e.x,a=t.x,l=n.x,c=e.y,A=t.y,u=n.y,h=o<a?o<l?o:l:a<l?a:l,f=c<A?c<u?c:u:A<u?A:u,d=o>a?o>l?o:l:a>l?a:l,p=c>A?c>u?c:u:A>u?A:u,m=n.next;for(;m!==e;){if(m.x>=h&&m.x<=d&&m.y>=f&&m.y<=p&&oA(o,c,a,A,l,u,m.x,m.y)&&pn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function e8(i,e,t,n){let o=i.prev,a=i,l=i.next;if(pn(o,a,l)>=0)return!1;let c=o.x,A=a.x,u=l.x,h=o.y,f=a.y,d=l.y,p=c<A?c<u?c:u:A<u?A:u,m=h<f?h<d?h:d:f<d?f:d,b=c>A?c>u?c:u:A>u?A:u,g=h>f?h>d?h:d:f>d?f:d,w=rw(p,m,e,t,n),I=rw(b,g,e,t,n),v=i.prevZ,E=i.nextZ;for(;v&&v.z>=w&&E&&E.z<=I;){if(v.x>=p&&v.x<=b&&v.y>=m&&v.y<=g&&v!==o&&v!==l&&oA(c,h,A,f,u,d,v.x,v.y)&&pn(v.prev,v,v.next)>=0||(v=v.prevZ,E.x>=p&&E.x<=b&&E.y>=m&&E.y<=g&&E!==o&&E!==l&&oA(c,h,A,f,u,d,E.x,E.y)&&pn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;v&&v.z>=w;){if(v.x>=p&&v.x<=b&&v.y>=m&&v.y<=g&&v!==o&&v!==l&&oA(c,h,A,f,u,d,v.x,v.y)&&pn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;E&&E.z<=I;){if(E.x>=p&&E.x<=b&&E.y>=m&&E.y<=g&&E!==o&&E!==l&&oA(c,h,A,f,u,d,E.x,E.y)&&pn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function t8(i,e,t){let n=i;do{let o=n.prev,a=n.next.next;!dg(o,a)&&wB(o,n,n.next,a)&&Xh(o,a)&&Xh(a,o)&&(e.push(o.i/t|0),e.push(n.i/t|0),e.push(a.i/t|0),Yh(n),Yh(n.next),n=i=a),n=n.next}while(n!==i);return zl(n)}function n8(i,e,t,n,o,a){let l=i;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&u8(l,c)){let A=bB(l,c);l=zl(l,l.next),A=zl(A,A.next),Vh(l,e,t,n,o,a,0),Vh(A,e,t,n,o,a,0);return}c=c.next}l=l.next}while(l!==i)}function i8(i,e,t,n){let o=[],a,l,c,A,u;for(a=0,l=e.length;a<l;a++)c=e[a]*n,A=a<l-1?e[a+1]*n:i.length,u=xB(i,c,A,n,!1),u===u.next&&(u.steiner=!0),o.push(A8(u));for(o.sort(r8),a=0;a<o.length;a++)t=s8(o[a],t);return t}function r8(i,e){return i.x-e.x}function s8(i,e){let t=o8(i,e);if(!t)return e;let n=bB(t,i);return zl(n,n.next),zl(t,t.next)}function o8(i,e){let t=e,n=-1/0,o,a=i.x,l=i.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){let d=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=a&&d>n&&(n=d,o=t.x<t.next.x?t:t.next,d===a))return o}t=t.next}while(t!==e);if(!o)return null;let c=o,A=o.x,u=o.y,h=1/0,f;t=o;do a>=t.x&&t.x>=A&&a!==t.x&&oA(l<u?a:n,l,A,u,l<u?n:a,l,t.x,t.y)&&(f=Math.abs(l-t.y)/(a-t.x),Xh(t,i)&&(f<h||f===h&&(t.x>o.x||t.x===o.x&&a8(o,t)))&&(o=t,h=f)),t=t.next;while(t!==c);return o}function a8(i,e){return pn(i.prev,i,e.prev)<0&&pn(e.next,i,i.next)<0}function l8(i,e,t,n){let o=i;do o.z===0&&(o.z=rw(o.x,o.y,e,t,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,c8(o)}function c8(i){let e,t,n,o,a,l,c,A,u=1;do{for(t=i,i=null,a=null,l=0;t;){for(l++,n=t,c=0,e=0;e<u&&(c++,n=n.nextZ,!!n);e++);for(A=u;c>0||A>0&&n;)c!==0&&(A===0||!n||t.z<=n.z)?(o=t,t=t.nextZ,c--):(o=n,n=n.nextZ,A--),a?a.nextZ=o:i=o,o.prevZ=a,a=o;t=n}a.nextZ=null,u*=2}while(l>1);return i}function rw(i,e,t,n,o){return i=(i-t)*o|0,e=(e-n)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function A8(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function oA(i,e,t,n,o,a,l,c){return(o-l)*(e-c)>=(i-l)*(a-c)&&(i-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(a-c)>=(o-l)*(n-c)}function u8(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!h8(i,e)&&(Xh(i,e)&&Xh(e,i)&&f8(i,e)&&(pn(i.prev,i,e.prev)||pn(i,e.prev,e))||dg(i,e)&&pn(i.prev,i,i.next)>0&&pn(e.prev,e,e.next)>0)}function pn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function dg(i,e){return i.x===e.x&&i.y===e.y}function wB(i,e,t,n){let o=am(pn(i,e,t)),a=am(pn(i,e,n)),l=am(pn(t,n,i)),c=am(pn(t,n,e));return!!(o!==a&&l!==c||o===0&&om(i,t,e)||a===0&&om(i,n,e)||l===0&&om(t,i,n)||c===0&&om(t,e,n))}function om(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function am(i){return i>0?1:i<0?-1:0}function h8(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&wB(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Xh(i,e){return pn(i.prev,i,i.next)<0?pn(i,e,i.next)>=0&&pn(i,i.prev,e)>=0:pn(i,e,i.prev)<0||pn(i,i.next,e)<0}function f8(i,e){let t=i,n=!1,o=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function bB(i,e){let t=new sw(i.i,i.x,i.y),n=new sw(e.i,e.x,e.y),o=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function WT(i,e,t,n){let o=new sw(i,e,t);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Yh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function sw(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function d8(i,e,t,n){let o=0;for(let a=e,l=t-n;a<t;a+=n)o+=(i[l]-i[a])*(i[a+1]+i[l+1]),l=a;return o}var Hs=class i{static area(e){let t=e.length,n=0;for(let o=t-1,a=0;a<t;o=a++)n+=e[o].x*e[a].y-e[a].x*e[o].y;return n*.5}static isClockWise(e){return i.area(e)<0}static triangulateShape(e,t){let n=[],o=[],a=[];VT(e),XT(n,e);let l=e.length;t.forEach(VT);for(let A=0;A<t.length;A++)o.push(l),l+=t[A].length,XT(n,t[A]);let c=qH.triangulate(n,o);for(let A=0;A<c.length;A+=3)a.push(c.slice(A,A+3));return a}};function VT(i){let e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function XT(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}var Gm=class i extends qe{constructor(e=new Eo([new he(.5,.5),new he(-.5,.5),new he(-.5,-.5),new he(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,o=[],a=[];for(let c=0,A=e.length;c<A;c++){let u=e[c];l(u)}this.setAttribute("position",new He(o,3)),this.setAttribute("uv",new He(a,2)),this.computeVertexNormals();function l(c){let A=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:p-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,w=t.extrudePath,I=t.UVGenerator!==void 0?t.UVGenerator:p8,v,E=!1,S,C,M,D;w&&(v=w.getSpacedPoints(h),E=!0,d=!1,S=w.computeFrenetFrames(h,!1),C=new Y,M=new Y,D=new Y),d||(g=0,p=0,m=0,b=0);let T=c.extractPoints(u),B=T.shape,R=T.holes;if(!Hs.isClockWise(B)){B=B.reverse();for(let K=0,we=R.length;K<we;K++){let me=R[K];Hs.isClockWise(me)&&(R[K]=me.reverse())}}let _=Hs.triangulateShape(B,R),Q=B;for(let K=0,we=R.length;K<we;K++){let me=R[K];B=B.concat(me)}function W(K,we,me){return we||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(we,me)}let U=B.length,H=_.length;function O(K,we,me){let fe,de,Ne,ve=K.x-we.x,Se=K.y-we.y,Pe=me.x-K.x,Ie=me.y-K.y,We=ve*ve+Se*Se,j=ve*Ie-Se*Pe;if(Math.abs(j)>Number.EPSILON){let G=Math.sqrt(We),Ae=Math.sqrt(Pe*Pe+Ie*Ie),Be=we.x-Se/G,Re=we.y+ve/G,Ee=me.x-Ie/Ae,Fe=me.y+Pe/Ae,_e=((Ee-Be)*Ie-(Fe-Re)*Pe)/(ve*Ie-Se*Pe);fe=Be+ve*_e-K.x,de=Re+Se*_e-K.y;let Ce=fe*fe+de*de;if(Ce<=2)return new he(fe,de);Ne=Math.sqrt(Ce/2)}else{let G=!1;ve>Number.EPSILON?Pe>Number.EPSILON&&(G=!0):ve<-Number.EPSILON?Pe<-Number.EPSILON&&(G=!0):Math.sign(Se)===Math.sign(Ie)&&(G=!0),G?(fe=-Se,de=ve,Ne=Math.sqrt(We)):(fe=ve,de=Se,Ne=Math.sqrt(We/2))}return new he(fe/Ne,de/Ne)}let F=[];for(let K=0,we=Q.length,me=we-1,fe=K+1;K<we;K++,me++,fe++)me===we&&(me=0),fe===we&&(fe=0),F[K]=O(Q[K],Q[me],Q[fe]);let z=[],k,X=F.concat();for(let K=0,we=R.length;K<we;K++){let me=R[K];k=[];for(let fe=0,de=me.length,Ne=de-1,ve=fe+1;fe<de;fe++,Ne++,ve++)Ne===de&&(Ne=0),ve===de&&(ve=0),k[fe]=O(me[fe],me[Ne],me[ve]);z.push(k),X=X.concat(k)}for(let K=0;K<g;K++){let we=K/g,me=p*Math.cos(we*Math.PI/2),fe=m*Math.sin(we*Math.PI/2)+b;for(let de=0,Ne=Q.length;de<Ne;de++){let ve=W(Q[de],F[de],fe);oe(ve.x,ve.y,-me)}for(let de=0,Ne=R.length;de<Ne;de++){let ve=R[de];k=z[de];for(let Se=0,Pe=ve.length;Se<Pe;Se++){let Ie=W(ve[Se],k[Se],fe);oe(Ie.x,Ie.y,-me)}}}let te=m+b;for(let K=0;K<U;K++){let we=d?W(B[K],X[K],te):B[K];E?(M.copy(S.normals[0]).multiplyScalar(we.x),C.copy(S.binormals[0]).multiplyScalar(we.y),D.copy(v[0]).add(M).add(C),oe(D.x,D.y,D.z)):oe(we.x,we.y,0)}for(let K=1;K<=h;K++)for(let we=0;we<U;we++){let me=d?W(B[we],X[we],te):B[we];E?(M.copy(S.normals[K]).multiplyScalar(me.x),C.copy(S.binormals[K]).multiplyScalar(me.y),D.copy(v[K]).add(M).add(C),oe(D.x,D.y,D.z)):oe(me.x,me.y,f/h*K)}for(let K=g-1;K>=0;K--){let we=K/g,me=p*Math.cos(we*Math.PI/2),fe=m*Math.sin(we*Math.PI/2)+b;for(let de=0,Ne=Q.length;de<Ne;de++){let ve=W(Q[de],F[de],fe);oe(ve.x,ve.y,f+me)}for(let de=0,Ne=R.length;de<Ne;de++){let ve=R[de];k=z[de];for(let Se=0,Pe=ve.length;Se<Pe;Se++){let Ie=W(ve[Se],k[Se],fe);E?oe(Ie.x,Ie.y+v[h-1].y,v[h-1].x+me):oe(Ie.x,Ie.y,f+me)}}}ie(),re();function ie(){let K=o.length/3;if(d){let we=0,me=U*we;for(let fe=0;fe<H;fe++){let de=_[fe];le(de[2]+me,de[1]+me,de[0]+me)}we=h+g*2,me=U*we;for(let fe=0;fe<H;fe++){let de=_[fe];le(de[0]+me,de[1]+me,de[2]+me)}}else{for(let we=0;we<H;we++){let me=_[we];le(me[2],me[1],me[0])}for(let we=0;we<H;we++){let me=_[we];le(me[0]+U*h,me[1]+U*h,me[2]+U*h)}}n.addGroup(K,o.length/3-K,0)}function re(){let K=o.length/3,we=0;se(Q,we),we+=Q.length;for(let me=0,fe=R.length;me<fe;me++){let de=R[me];se(de,we),we+=de.length}n.addGroup(K,o.length/3-K,1)}function se(K,we){let me=K.length;for(;--me>=0;){let fe=me,de=me-1;de<0&&(de=K.length-1);for(let Ne=0,ve=h+g*2;Ne<ve;Ne++){let Se=U*Ne,Pe=U*(Ne+1),Ie=we+fe+Se,We=we+de+Se,j=we+de+Pe,G=we+fe+Pe;be(Ie,We,j,G)}}}function oe(K,we,me){A.push(K),A.push(we),A.push(me)}function le(K,we,me){De(K),De(we),De(me);let fe=o.length/3,de=I.generateTopUV(n,o,fe-3,fe-2,fe-1);pe(de[0]),pe(de[1]),pe(de[2])}function be(K,we,me,fe){De(K),De(we),De(fe),De(we),De(me),De(fe);let de=o.length/3,Ne=I.generateSideWallUV(n,o,de-6,de-3,de-2,de-1);pe(Ne[0]),pe(Ne[1]),pe(Ne[3]),pe(Ne[1]),pe(Ne[2]),pe(Ne[3])}function De(K){o.push(A[K*3+0]),o.push(A[K*3+1]),o.push(A[K*3+2])}function pe(K){a.push(K.x),a.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return m8(t,n,e)}static fromJSON(e,t){let n=[];for(let a=0,l=e.shapes.length;a<l;a++){let c=t[e.shapes[a]];n.push(c)}let o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new lb[o.type]().fromJSON(o)),new i(n,e.options)}},p8={generateTopUV:function(i,e,t,n,o){let a=e[t*3],l=e[t*3+1],c=e[n*3],A=e[n*3+1],u=e[o*3],h=e[o*3+1];return[new he(a,l),new he(c,A),new he(u,h)]},generateSideWallUV:function(i,e,t,n,o,a){let l=e[t*3],c=e[t*3+1],A=e[t*3+2],u=e[n*3],h=e[n*3+1],f=e[n*3+2],d=e[o*3],p=e[o*3+1],m=e[o*3+2],b=e[a*3],g=e[a*3+1],w=e[a*3+2];return Math.abs(c-h)<Math.abs(l-u)?[new he(l,1-A),new he(u,1-f),new he(d,1-m),new he(b,1-w)]:[new he(c,1-A),new he(h,1-f),new he(p,1-m),new he(g,1-w)]}};function m8(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,o=i.length;n<o;n++){let a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var bA=class i extends xa{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,o=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new i(e.radius,e.detail)}},Zh=class i extends xa{constructor(e=1,t=0){let n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,o,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new i(e.radius,e.detail)}},zm=class i extends qe{constructor(e=.5,t=1,n=32,o=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:o,thetaStart:a,thetaLength:l},n=Math.max(3,n),o=Math.max(1,o);let c=[],A=[],u=[],h=[],f=e,d=(t-e)/o,p=new Y,m=new he;for(let b=0;b<=o;b++){for(let g=0;g<=n;g++){let w=a+g/n*l;p.x=f*Math.cos(w),p.y=f*Math.sin(w),A.push(p.x,p.y,p.z),u.push(0,0,1),m.x=(p.x/t+1)/2,m.y=(p.y/t+1)/2,h.push(m.x,m.y)}f+=d}for(let b=0;b<o;b++){let g=b*(n+1);for(let w=0;w<n;w++){let I=w+g,v=I,E=I+n+1,S=I+n+2,C=I+1;c.push(v,E,C),c.push(E,S,C)}}this.setIndex(c),this.setAttribute("position",new He(A,3)),this.setAttribute("normal",new He(u,3)),this.setAttribute("uv",new He(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},Hm=class i extends qe{constructor(e=new Eo([new he(0,.5),new he(-.5,-.5),new he(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],o=[],a=[],l=[],c=0,A=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(c,A,h),c+=A,A=0;this.setIndex(n),this.setAttribute("position",new He(o,3)),this.setAttribute("normal",new He(a,3)),this.setAttribute("uv",new He(l,2));function u(h){let f=o.length/3,d=h.extractPoints(t),p=d.shape,m=d.holes;Hs.isClockWise(p)===!1&&(p=p.reverse());for(let g=0,w=m.length;g<w;g++){let I=m[g];Hs.isClockWise(I)===!0&&(m[g]=I.reverse())}let b=Hs.triangulateShape(p,m);for(let g=0,w=m.length;g<w;g++){let I=m[g];p=p.concat(I)}for(let g=0,w=p.length;g<w;g++){let I=p[g];o.push(I.x,I.y,0),a.push(0,0,1),l.push(I.x,I.y)}for(let g=0,w=b.length;g<w;g++){let I=b[g],v=I[0]+f,E=I[1]+f,S=I[2]+f;n.push(v,E,S),A+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return g8(t,e)}static fromJSON(e,t){let n=[];for(let o=0,a=e.shapes.length;o<a;o++){let l=t[e.shapes[o]];n.push(l)}return new i(n,e.curveSegments)}};function g8(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){let o=i[t];e.shapes.push(o.uuid)}else e.shapes.push(i.uuid);return e}var Kh=class i extends qe{constructor(e=1,t=32,n=16,o=0,a=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let A=Math.min(l+c,Math.PI),u=0,h=[],f=new Y,d=new Y,p=[],m=[],b=[],g=[];for(let w=0;w<=n;w++){let I=[],v=w/n,E=0;w===0&&l===0?E=.5/t:w===n&&A===Math.PI&&(E=-.5/t);for(let S=0;S<=t;S++){let C=S/t;f.x=-e*Math.cos(o+C*a)*Math.sin(l+v*c),f.y=e*Math.cos(l+v*c),f.z=e*Math.sin(o+C*a)*Math.sin(l+v*c),m.push(f.x,f.y,f.z),d.copy(f).normalize(),b.push(d.x,d.y,d.z),g.push(C+E,1-v),I.push(u++)}h.push(I)}for(let w=0;w<n;w++)for(let I=0;I<t;I++){let v=h[w][I+1],E=h[w][I],S=h[w+1][I],C=h[w+1][I+1];(w!==0||l>0)&&p.push(v,E,C),(w!==n-1||A<Math.PI)&&p.push(E,S,C)}this.setIndex(p),this.setAttribute("position",new He(m,3)),this.setAttribute("normal",new He(b,3)),this.setAttribute("uv",new He(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},Wm=class i extends xa{constructor(e=1,t=0){let n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,o,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new i(e.radius,e.detail)}},Vm=class i extends qe{constructor(e=1,t=.4,n=12,o=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:o,arc:a},n=Math.floor(n),o=Math.floor(o);let l=[],c=[],A=[],u=[],h=new Y,f=new Y,d=new Y;for(let p=0;p<=n;p++)for(let m=0;m<=o;m++){let b=m/o*a,g=p/n*Math.PI*2;f.x=(e+t*Math.cos(g))*Math.cos(b),f.y=(e+t*Math.cos(g))*Math.sin(b),f.z=t*Math.sin(g),c.push(f.x,f.y,f.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),d.subVectors(f,h).normalize(),A.push(d.x,d.y,d.z),u.push(m/o),u.push(p/n)}for(let p=1;p<=n;p++)for(let m=1;m<=o;m++){let b=(o+1)*p+m-1,g=(o+1)*(p-1)+m-1,w=(o+1)*(p-1)+m,I=(o+1)*p+m;l.push(b,g,I),l.push(g,w,I)}this.setIndex(l),this.setAttribute("position",new He(c,3)),this.setAttribute("normal",new He(A,3)),this.setAttribute("uv",new He(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},CA=class i extends qe{constructor(e=1,t=.4,n=64,o=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:o,p:a,q:l},n=Math.floor(n),o=Math.floor(o);let c=[],A=[],u=[],h=[],f=new Y,d=new Y,p=new Y,m=new Y,b=new Y,g=new Y,w=new Y;for(let v=0;v<=n;++v){let E=v/n*a*Math.PI*2;I(E,a,l,e,p),I(E+.01,a,l,e,m),g.subVectors(m,p),w.addVectors(m,p),b.crossVectors(g,w),w.crossVectors(b,g),b.normalize(),w.normalize();for(let S=0;S<=o;++S){let C=S/o*Math.PI*2,M=-t*Math.cos(C),D=t*Math.sin(C);f.x=p.x+(M*w.x+D*b.x),f.y=p.y+(M*w.y+D*b.y),f.z=p.z+(M*w.z+D*b.z),A.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),u.push(d.x,d.y,d.z),h.push(v/n),h.push(S/o)}}for(let v=1;v<=n;v++)for(let E=1;E<=o;E++){let S=(o+1)*(v-1)+(E-1),C=(o+1)*v+(E-1),M=(o+1)*v+E,D=(o+1)*(v-1)+E;c.push(S,C,D),c.push(C,M,D)}this.setIndex(c),this.setAttribute("position",new He(A,3)),this.setAttribute("normal",new He(u,3)),this.setAttribute("uv",new He(h,2));function I(v,E,S,C,M){let D=Math.cos(v),T=Math.sin(v),B=S/E*v,R=Math.cos(B);M.x=C*(2+R)*.5*D,M.y=C*(2+R)*T*.5,M.z=C*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},wa=class i extends qe{constructor(e=new zh(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,n=1,o=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:o,closed:a};let l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;let c=new Y,A=new Y,u=new he,h=new Y,f=[],d=[],p=[],m=[];b(),this.setIndex(m),this.setAttribute("position",new He(f,3)),this.setAttribute("normal",new He(d,3)),this.setAttribute("uv",new He(p,2));function b(){for(let v=0;v<t;v++)g(v);g(a===!1?t:0),I(),w()}function g(v){h=e.getPointAt(v/t,h);let E=l.normals[v],S=l.binormals[v];for(let C=0;C<=o;C++){let M=C/o*Math.PI*2,D=Math.sin(M),T=-Math.cos(M);A.x=T*E.x+D*S.x,A.y=T*E.y+D*S.y,A.z=T*E.z+D*S.z,A.normalize(),d.push(A.x,A.y,A.z),c.x=h.x+n*A.x,c.y=h.y+n*A.y,c.z=h.z+n*A.z,f.push(c.x,c.y,c.z)}}function w(){for(let v=1;v<=t;v++)for(let E=1;E<=o;E++){let S=(o+1)*(v-1)+(E-1),C=(o+1)*v+(E-1),M=(o+1)*v+E,D=(o+1)*(v-1)+E;m.push(S,C,D),m.push(C,M,D)}}function I(){for(let v=0;v<=t;v++)for(let E=0;E<=o;E++)u.x=v/t,u.y=E/o,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new i(new lb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},Xm=class extends qe{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let t=[],n=new Set,o=new Y,a=new Y;if(e.index!==null){let l=e.attributes.position,c=e.index,A=e.groups;A.length===0&&(A=[{start:0,count:c.count,materialIndex:0}]);for(let u=0,h=A.length;u<h;++u){let f=A[u],d=f.start,p=f.count;for(let m=d,b=d+p;m<b;m+=3)for(let g=0;g<3;g++){let w=c.getX(m+g),I=c.getX(m+(g+1)%3);o.fromBufferAttribute(l,w),a.fromBufferAttribute(l,I),YT(o,a,n)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}}else{let l=e.attributes.position;for(let c=0,A=l.count/3;c<A;c++)for(let u=0;u<3;u++){let h=3*c+u,f=3*c+(u+1)%3;o.fromBufferAttribute(l,h),a.fromBufferAttribute(l,f),YT(o,a,n)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new He(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function YT(i,e,t){let n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(o)===!0?!1:(t.add(n),t.add(o),!0)}var ZT=Object.freeze({__proto__:null,BoxGeometry:En,CapsuleGeometry:Nm,CircleGeometry:Fm,ConeGeometry:Qm,CylinderGeometry:yr,DodecahedronGeometry:Um,EdgesGeometry:Om,ExtrudeGeometry:Gm,IcosahedronGeometry:bA,LatheGeometry:Wh,OctahedronGeometry:Zh,PlaneGeometry:Fi,PolyhedronGeometry:xa,RingGeometry:zm,ShapeGeometry:Hm,SphereGeometry:Kh,TetrahedronGeometry:Wm,TorusGeometry:Vm,TorusKnotGeometry:CA,TubeGeometry:wa,WireframeGeometry:Xm}),SA=class extends Sn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ke(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},Xs=class extends pt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},On=class extends Sn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},In=class extends On{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},Ys=class extends Sn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Ym=class extends Sn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},EA=class extends Sn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},IA=class extends Sn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Zm=class extends Sn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ma,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},Km=class extends Rn{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function Qr(i,e,t){return cb(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function Tl(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function cb(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function CB(i){function e(o,a){return i[o]-i[a]}let t=i.length,n=new Array(t);for(let o=0;o!==t;++o)n[o]=o;return n.sort(e),n}function ow(i,e,t){let n=i.length,o=new i.constructor(n);for(let a=0,l=0;l!==n;++a){let c=t[a]*e;for(let A=0;A!==e;++A)o[l++]=i[c+A]}return o}function Ab(i,e,t,n){let o=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[o++];if(a===void 0)return;let l=a[n];if(l!==void 0)if(Array.isArray(l))do l=a[n],l!==void 0&&(e.push(a.time),t.push.apply(t,l)),a=i[o++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[n],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=i[o++];while(a!==void 0);else do l=a[n],l!==void 0&&(e.push(a.time),t.push(l)),a=i[o++];while(a!==void 0)}function v8(i,e,t,n,o=30){let a=i.clone();a.name=e;let l=[];for(let A=0;A<a.tracks.length;++A){let u=a.tracks[A],h=u.getValueSize(),f=[],d=[];for(let p=0;p<u.times.length;++p){let m=u.times[p]*o;if(!(m<t||m>=n)){f.push(u.times[p]);for(let b=0;b<h;++b)d.push(u.values[p*h+b])}}f.length!==0&&(u.times=Tl(f,u.times.constructor),u.values=Tl(d,u.values.constructor),l.push(u))}a.tracks=l;let c=1/0;for(let A=0;A<a.tracks.length;++A)c>a.tracks[A].times[0]&&(c=a.tracks[A].times[0]);for(let A=0;A<a.tracks.length;++A)a.tracks[A].shift(-1*c);return a.resetDuration(),a}function y8(i,e=0,t=i,n=30){n<=0&&(n=30);let o=t.tracks.length,a=e/n;for(let l=0;l<o;++l){let c=t.tracks[l],A=c.ValueTypeName;if(A==="bool"||A==="string")continue;let u=i.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===A});if(u===void 0)continue;let h=0,f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let d=0,p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=c.times.length-1,b;if(a<=c.times[0]){let w=h,I=f-h;b=Qr(c.values,w,I)}else if(a>=c.times[m]){let w=m*f+h,I=w+f-h;b=Qr(c.values,w,I)}else{let w=c.createInterpolant(),I=h,v=f-h;w.evaluate(a),b=Qr(w.resultBuffer,I,v)}A==="quaternion"&&new Lt().fromArray(b).normalize().conjugate().toArray(b);let g=u.times.length;for(let w=0;w<g;++w){let I=w*p+d;if(A==="quaternion")Lt.multiplyQuaternionsFlat(u.values,I,b,0,u.values,I);else{let v=p-d*2;for(let E=0;E<v;++E)u.values[I+E]-=b[E]}}}return i.blendMode=tb,i}var x8={arraySlice:Qr,convertArray:Tl,isTypedArray:cb,getKeyframeOrder:CB,sortedArray:ow,flattenJSON:Ab,subclip:v8,makeClipAdditive:y8},Bo=class{constructor(e,t,n,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,o=t[n],a=t[n-1];e:{t:{let l;n:{i:if(!(e<o)){for(let c=n+2;;){if(o===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(a=o,o=t[++n],e<o)break t}l=t.length;break n}if(!(e>=a)){let c=t[1];e<c&&(n=2,a=c);for(let A=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===A)break;if(o=a,a=t[--n-1],e>=a)break t}l=n,n=0;break n}break e}for(;n<l;){let c=n+l>>>1;e<t[c]?l=c:n=c+1}if(o=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,o)}return this.interpolate_(n,a,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=e*o;for(let l=0;l!==o;++l)t[l]=n[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Jm=class extends Bo{constructor(e,t,n,o){super(e,t,n,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Il,endingEnd:Il}}intervalChanged_(e,t,n){let o=this.parameterPositions,a=e-2,l=e+1,c=o[a],A=o[l];if(c===void 0)switch(this.getSettings_().endingStart){case Ml:a=e,c=2*t-n;break;case Th:a=o.length-2,c=t+o[a]-o[a+1];break;default:a=e,c=n}if(A===void 0)switch(this.getSettings_().endingEnd){case Ml:l=e,A=2*n-t;break;case Th:l=1,A=n+o[1]-o[0];break;default:l=e-1,A=t}let u=(n-t)*.5,h=this.valueSize;this._weightPrev=u/(t-c),this._weightNext=u/(A-n),this._offsetPrev=a*h,this._offsetNext=l*h}interpolate_(e,t,n,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,A=e*c,u=A-c,h=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,p=this._weightNext,m=(n-t)/(o-t),b=m*m,g=b*m,w=-d*g+2*d*b-d*m,I=(1+d)*g+(-1.5-2*d)*b+(-.5+d)*m+1,v=(-1-p)*g+(1.5+p)*b+.5*m,E=p*g-p*b;for(let S=0;S!==c;++S)a[S]=w*l[h+S]+I*l[u+S]+v*l[A+S]+E*l[f+S];return a}},Jh=class extends Bo{constructor(e,t,n,o){super(e,t,n,o)}interpolate_(e,t,n,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,A=e*c,u=A-c,h=(n-t)/(o-t),f=1-h;for(let d=0;d!==c;++d)a[d]=l[u+d]*f+l[A+d]*h;return a}},jm=class extends Bo{constructor(e,t,n,o){super(e,t,n,o)}interpolate_(e){return this.copySampleValue_(e-1)}},xr=class{constructor(e,t,n,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tl(t,this.TimeBufferType),this.values=Tl(n,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Tl(e.times,Array),values:Tl(e.values,Array)};let o=e.getInterpolation();o!==e.DefaultInterpolation&&(n.interpolation=o)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new jm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Jm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pl:t=this.InterpolantFactoryMethodDiscrete;break;case da:t=this.InterpolantFactoryMethodLinear;break;case xm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pl;case this.InterpolantFactoryMethodLinear:return da;case this.InterpolantFactoryMethodSmooth:return xm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let n=0,o=t.length;n!==o;++n)t[n]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let n=0,o=t.length;n!==o;++n)t[n]*=e}return this}trim(e,t){let n=this.times,o=n.length,a=0,l=o-1;for(;a!==o&&n[a]<e;)++a;for(;l!==-1&&n[l]>t;)--l;if(++l,a!==0||l!==o){a>=l&&(l=Math.max(l,1),a=l-1);let c=this.getValueSize();this.times=Qr(n,a,l),this.values=Qr(this.values,a*c,l*c)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,o=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==a;c++){let A=n[c];if(typeof A=="number"&&isNaN(A)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,A),e=!1;break}if(l!==null&&l>A){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,A,l),e=!1;break}l=A}if(o!==void 0&&cb(o))for(let c=0,A=o.length;c!==A;++c){let u=o[c];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,u),e=!1;break}}return e}optimize(){let e=Qr(this.times),t=Qr(this.values),n=this.getValueSize(),o=this.getInterpolation()===xm,a=e.length-1,l=1;for(let c=1;c<a;++c){let A=!1,u=e[c],h=e[c+1];if(u!==h&&(c!==1||u!==e[0]))if(o)A=!0;else{let f=c*n,d=f-n,p=f+n;for(let m=0;m!==n;++m){let b=t[f+m];if(b!==t[d+m]||b!==t[p+m]){A=!0;break}}}if(A){if(c!==l){e[l]=e[c];let f=c*n,d=l*n;for(let p=0;p!==n;++p)t[d+p]=t[f+p]}++l}}if(a>0){e[l]=e[a];for(let c=a*n,A=l*n,u=0;u!==n;++u)t[A+u]=t[c+u];++l}return l!==e.length?(this.times=Qr(e,0,l),this.values=Qr(t,0,l*n)):(this.times=e,this.values=t),this}clone(){let e=Qr(this.times,0),t=Qr(this.values,0),n=this.constructor,o=new n(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}};xr.prototype.TimeBufferType=Float32Array;xr.prototype.ValueBufferType=Float32Array;xr.prototype.DefaultInterpolation=da;var Lo=class extends xr{};Lo.prototype.ValueTypeName="bool";Lo.prototype.ValueBufferType=Array;Lo.prototype.DefaultInterpolation=Pl;Lo.prototype.InterpolantFactoryMethodLinear=void 0;Lo.prototype.InterpolantFactoryMethodSmooth=void 0;var jh=class extends xr{};jh.prototype.ValueTypeName="color";var zr=class extends xr{};zr.prototype.ValueTypeName="number";var qm=class extends Bo{constructor(e,t,n,o){super(e,t,n,o)}interpolate_(e,t,n,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,A=(n-t)/(o-t),u=e*c;for(let h=u+c;u!==h;u+=4)Lt.slerpFlat(a,0,l,u-c,l,u,A);return a}},wr=class extends xr{InterpolantFactoryMethodLinear(e){return new qm(this.times,this.values,this.getValueSize(),e)}};wr.prototype.ValueTypeName="quaternion";wr.prototype.DefaultInterpolation=da;wr.prototype.InterpolantFactoryMethodSmooth=void 0;var Ro=class extends xr{};Ro.prototype.ValueTypeName="string";Ro.prototype.ValueBufferType=Array;Ro.prototype.DefaultInterpolation=Pl;Ro.prototype.InterpolantFactoryMethodLinear=void 0;Ro.prototype.InterpolantFactoryMethodSmooth=void 0;var hs=class extends xr{};hs.prototype.ValueTypeName="vector";var fs=class{constructor(e,t=-1,n,o=ug){this.name=e,this.tracks=n,this.duration=t,this.blendMode=o,this.uuid=mr(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,o=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(b8(n[l]).scale(o));let a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){let t=[],n=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=n.length;a!==l;++a)t.push(xr.toJSON(n[a]));return o}static CreateFromMorphTargetSequence(e,t,n,o){let a=t.length,l=[];for(let c=0;c<a;c++){let A=[],u=[];A.push((c+a-1)%a,c,(c+1)%a),u.push(0,1,0);let h=CB(A);A=ow(A,1,h),u=ow(u,1,h),!o&&A[0]===0&&(A.push(a),u.push(u[0])),l.push(new zr(".morphTargetInfluences["+t[c].name+"]",A,u).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){let o=e;n=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<n.length;o++)if(n[o].name===t)return n[o];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let o={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,A=e.length;c<A;c++){let u=e[c],h=u.name.match(a);if(h&&h.length>1){let f=h[1],d=o[f];d||(o[f]=d=[]),d.push(u)}}let l=[];for(let c in o)l.push(this.CreateFromMorphTargetSequence(c,o[c],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(f,d,p,m,b){if(p.length!==0){let g=[],w=[];Ab(p,g,w,m),g.length!==0&&b.push(new f(d,g,w))}},o=[],a=e.name||"default",l=e.fps||30,c=e.blendMode,A=e.length||-1,u=e.hierarchy||[];for(let f=0;f<u.length;f++){let d=u[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let p={},m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let b=0;b<d[m].morphTargets.length;b++)p[d[m].morphTargets[b]]=-1;for(let b in p){let g=[],w=[];for(let I=0;I!==d[m].morphTargets.length;++I){let v=d[m];g.push(v.time),w.push(v.morphTarget===b?1:0)}o.push(new zr(".morphTargetInfluence["+b+"]",g,w))}A=p.length*l}else{let p=".bones["+t[f].name+"]";n(hs,p+".position",d,"pos",o),n(wr,p+".quaternion",d,"rot",o),n(hs,p+".scale",d,"scl",o)}}return o.length===0?null:new this(a,A,o,c)}resetDuration(){let e=this.tracks,t=0;for(let n=0,o=e.length;n!==o;++n){let a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function w8(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zr;case"vector":case"vector2":case"vector3":case"vector4":return hs;case"color":return jh;case"quaternion":return wr;case"bool":case"boolean":return Lo;case"string":return Ro}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function b8(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=w8(i.type);if(i.times===void 0){let t=[],n=[];Ab(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}var Hl={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},qh=class{constructor(e,t,n){let o=this,a=!1,l=0,c=0,A,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){c++,a===!1&&o.onStart!==void 0&&o.onStart(h,l,c),a=!0},this.itemEnd=function(h){l++,o.onProgress!==void 0&&o.onProgress(h,l,c),l===c&&(a=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(h){o.onError!==void 0&&o.onError(h)},this.resolveURL=function(h){return A?A(h):h},this.setURLModifier=function(h){return A=h,this},this.addHandler=function(h,f){return u.push(h,f),this},this.removeHandler=function(h){let f=u.indexOf(h);return f!==-1&&u.splice(f,2),this},this.getHandler=function(h){for(let f=0,d=u.length;f<d;f+=2){let p=u[f],m=u[f+1];if(p.global&&(p.lastIndex=0),p.test(h))return m}return null}}},SB=new qh,An=class{constructor(e){this.manager=e!==void 0?e:SB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(o,a){n.load(e,o,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};An.DEFAULT_MATERIAL_NAME="__DEFAULT";var xo={},aw=class extends Error{constructor(e,t){super(e),this.response=t}},Jn=class extends An{constructor(e){super(e)}load(e,t,n,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=Hl.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(xo[e]!==void 0){xo[e].push({onLoad:t,onProgress:n,onError:o});return}xo[e]=[],xo[e].push({onLoad:t,onProgress:n,onError:o});let l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,A=this.responseType;fetch(l).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let h=xo[e],f=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),p=d?parseInt(d):0,m=p!==0,b=0,g=new ReadableStream({start(w){I();function I(){f.read().then(({done:v,value:E})=>{if(v)w.close();else{b+=E.byteLength;let S=new ProgressEvent("progress",{lengthComputable:m,loaded:b,total:p});for(let C=0,M=h.length;C<M;C++){let D=h[C];D.onProgress&&D.onProgress(S)}w.enqueue(E),I()}})}}});return new Response(g)}else throw new aw(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(A){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,c));case"json":return u.json();default:if(c===void 0)return u.text();{let f=/charset="?([^;"\s]*)"?/i.exec(c),d=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(d);return u.arrayBuffer().then(m=>p.decode(m))}}}).then(u=>{Hl.add(e,u);let h=xo[e];delete xo[e];for(let f=0,d=h.length;f<d;f++){let p=h[f];p.onLoad&&p.onLoad(u)}}).catch(u=>{let h=xo[e];if(h===void 0)throw this.manager.itemError(e),u;delete xo[e];for(let f=0,d=h.length;f<d;f++){let p=h[f];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},lw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=new Jn(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(A){o?o(A):console.error(A),a.manager.itemError(e)}},n,o)}parse(e){let t=[];for(let n=0;n<e.length;n++){let o=fs.parse(e[n]);t.push(o)}return t}},cw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=[],c=new Qh,A=new Jn(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(a.withCredentials);let u=0;function h(f){A.load(e[f],function(d){let p=a.parse(d,!0);l[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(c.minFilter=St),c.image=l,c.format=p.format,c.needsUpdate=!0,t&&t(c))},n,o)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)h(f);else A.load(e,function(f){let d=a.parse(f,!0);if(d.isCubemap){let p=d.mipmaps.length/d.mipmapCount;for(let m=0;m<p;m++){l[m]={mipmaps:[]};for(let b=0;b<d.mipmapCount;b++)l[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+b]),l[m].format=d.format,l[m].width=d.width,l[m].height=d.height}c.image=l}else c.image.width=d.width,c.image.height=d.height,c.mipmaps=d.mipmaps;d.mipmapCount===1&&(c.minFilter=St),c.format=d.format,c.needsUpdate=!0,t&&t(c)},n,o);return c}},Wl=class extends An{constructor(e){super(e)}load(e,t,n,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,l=Hl.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;let c=Lh("img");function A(){h(),Hl.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(f){h(),o&&o(f),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){c.removeEventListener("load",A,!1),c.removeEventListener("error",u,!1)}return c.addEventListener("load",A,!1),c.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c}},Aw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=new Nl;a.colorSpace=nt;let l=new Wl(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function A(u){l.load(e[u],function(h){a.images[u]=h,c++,c===6&&(a.needsUpdate=!0,t&&t(a))},void 0,o)}for(let u=0;u<e.length;++u)A(u);return a}},uw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=new zs,c=new Jn(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(a.withCredentials),c.load(e,function(A){let u=a.parse(A);u&&(u.image!==void 0?l.image=u.image:u.data!==void 0&&(l.image.width=u.width,l.image.height=u.height,l.image.data=u.data),l.wrapS=u.wrapS!==void 0?u.wrapS:Bn,l.wrapT=u.wrapT!==void 0?u.wrapT:Bn,l.magFilter=u.magFilter!==void 0?u.magFilter:St,l.minFilter=u.minFilter!==void 0?u.minFilter:St,l.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?l.colorSpace=u.colorSpace:u.encoding!==void 0&&(l.encoding=u.encoding),u.flipY!==void 0&&(l.flipY=u.flipY),u.format!==void 0&&(l.format=u.format),u.type!==void 0&&(l.type=u.type),u.mipmaps!==void 0&&(l.mipmaps=u.mipmaps,l.minFilter=us),u.mipmapCount===1&&(l.minFilter=St),u.generateMipmaps!==void 0&&(l.generateMipmaps=u.generateMipmaps),l.needsUpdate=!0,t&&t(l,u))},n,o),l}},ko=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=new Vt,l=new Wl(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){a.image=c,a.needsUpdate=!0,t!==void 0&&t(a)},n,o),a}},Zs=class extends ht{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Vl=class extends Zs{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ht.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ke(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},ox=new Qe,KT=new Y,JT=new Y,$h=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new Qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pa,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new Ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;KT.setFromMatrixPosition(e.matrixWorld),t.position.copy(KT),JT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(JT),t.updateMatrixWorld(),ox.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ox),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ox)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},hw=class extends $h{constructor(){super(new Jt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=uA*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||o!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=o,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},ba=class extends Zs{constructor(e,t,n=0,o=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ht.DEFAULT_UP),this.updateMatrix(),this.target=new ht,this.distance=n,this.angle=o,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new hw}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},jT=new Qe,yh=new Y,ax=new Y,fw=class extends $h{constructor(){super(new Jt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new Ct(2,1,1,1),new Ct(0,1,1,1),new Ct(3,1,1,1),new Ct(1,1,1,1),new Ct(3,0,1,1),new Ct(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,o=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),yh.setFromMatrixPosition(e.matrixWorld),n.position.copy(yh),ax.copy(n.position),ax.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ax),n.updateMatrixWorld(),o.makeTranslation(-yh.x,-yh.y,-yh.z),jT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jT)}},ds=class extends Zs{constructor(e,t,n=0,o=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=o,this.shadow=new fw}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},dw=class extends $h{constructor(){super(new Ci(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ps=class extends Zs{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ht.DEFAULT_UP),this.updateMatrix(),this.target=new ht,this.shadow=new dw}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Ca=class extends Zs{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},$m=class extends Zs{constructor(e,t,n=10,o=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},eg=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*o),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*o)),t.addScaledVector(l[5],1.092548*(o*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(n*a)),t.addScaledVector(l[8],.546274*(n*n-o*o)),t}getIrradianceAt(e,t){let n=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*o),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*o),t.addScaledVector(l[5],2*.429043*o*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*n*a),t.addScaledVector(l[8],.429043*(n*n-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let o=0;o<9;o++)n[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){let n=this.coefficients;for(let o=0;o<9;o++)n[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){let n=e.x,o=e.y,a=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*o,t[5]=1.092548*o*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-o*o)}},MA=class extends Zs{constructor(e=new eg,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}},tg=class i extends An{constructor(e){super(e),this.textures={}}load(e,t,n,o){let a=this,l=new Jn(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(A){o?o(A):console.error(A),a.manager.itemError(e)}},n,o)}parse(e){let t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}let o=i.createMaterialFromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(o.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(o.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(o.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(o.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(o.alphaHash=e.alphaHash),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(o.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let a in e.uniforms){let l=e.uniforms[a];switch(o.uniforms[a]={},l.type){case"t":o.uniforms[a].value=n(l.value);break;case"c":o.uniforms[a].value=new ke().setHex(l.value);break;case"v2":o.uniforms[a].value=new he().fromArray(l.value);break;case"v3":o.uniforms[a].value=new Y().fromArray(l.value);break;case"v4":o.uniforms[a].value=new Ct().fromArray(l.value);break;case"m3":o.uniforms[a].value=new dt().fromArray(l.value);break;case"m4":o.uniforms[a].value=new Qe().fromArray(l.value);break;default:o.uniforms[a].value=l.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(o.glslVersion=e.glslVersion),e.extensions!==void 0)for(let a in e.extensions)o.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(o.lights=e.lights),e.clipping!==void 0&&(o.clipping=e.clipping),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=n(e.map)),e.matcap!==void 0&&(o.matcap=n(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),o.normalScale=new he().fromArray(a)}return e.displacementMap!==void 0&&(o.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new he().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(o.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(o.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(o.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=n(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){let t={ShadowMaterial:SA,SpriteMaterial:Nh,RawShaderMaterial:Xs,ShaderMaterial:pt,PointsMaterial:Do,MeshPhysicalMaterial:In,MeshStandardMaterial:On,MeshPhongMaterial:Ys,MeshToonMaterial:Ym,MeshNormalMaterial:EA,MeshLambertMaterial:IA,MeshDepthMaterial:Ql,MeshDistanceMaterial:Ul,MeshBasicMaterial:Qt,MeshMatcapMaterial:Zm,LineDashedMaterial:Km,LineBasicMaterial:Rn,Material:Sn};return new t[e]}},ms=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,o=e.length;n<o;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},Sa=class extends qe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},ng=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=new Jn(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(A){o?o(A):console.error(A),a.manager.itemError(e)}},n,o)}parse(e){let t={},n={};function o(p,m){if(t[m]!==void 0)return t[m];let g=p.interleavedBuffers[m],w=a(p,g.buffer),I=rA(g.type,w),v=new Ji(I,g.stride);return v.uuid=g.uuid,t[m]=v,v}function a(p,m){if(n[m]!==void 0)return n[m];let g=p.arrayBuffers[m],w=new Uint32Array(g).buffer;return n[m]=w,w}let l=e.isInstancedBufferGeometry?new Sa:new qe,c=e.data.index;if(c!==void 0){let p=rA(c.type,c.array);l.setIndex(new it(p,1))}let A=e.data.attributes;for(let p in A){let m=A[p],b;if(m.isInterleavedBufferAttribute){let g=o(e.data,m.data);b=new Ln(g,m.itemSize,m.offset,m.normalized)}else{let g=rA(m.type,m.array),w=m.isInstancedBufferAttribute?vr:it;b=new w(g,m.itemSize,m.normalized)}m.name!==void 0&&(b.name=m.name),m.usage!==void 0&&b.setUsage(m.usage),m.updateRange!==void 0&&(b.updateRange.offset=m.updateRange.offset,b.updateRange.count=m.updateRange.count),l.setAttribute(p,b)}let u=e.data.morphAttributes;if(u)for(let p in u){let m=u[p],b=[];for(let g=0,w=m.length;g<w;g++){let I=m[g],v;if(I.isInterleavedBufferAttribute){let E=o(e.data,I.data);v=new Ln(E,I.itemSize,I.offset,I.normalized)}else{let E=rA(I.type,I.array);v=new it(E,I.itemSize,I.normalized)}I.name!==void 0&&(v.name=I.name),b.push(v)}l.morphAttributes[p]=b}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);let f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,m=f.length;p!==m;++p){let b=f[p];l.addGroup(b.start,b.count,b.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let p=new Y;d.center!==void 0&&p.fromArray(d.center),l.boundingSphere=new Xt(p,d.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}},pw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=this.path===""?ms.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;let c=new Jn(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(A){let u=null;try{u=JSON.parse(A)}catch(f){o!==void 0&&o(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}let h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},n,o)}async loadAsync(e,t){let n=this,o=this.path===""?ms.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;let a=new Jn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);let l=await a.loadAsync(e,t),c=JSON.parse(l),A=c.metadata;if(A===void 0||A.type===void 0||A.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){let n=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,o),l=this.parseImages(e.images,function(){t!==void 0&&t(u)}),c=this.parseTextures(e.textures,l),A=this.parseMaterials(e.materials,c),u=this.parseObject(e.object,a,A,c,n),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let f=!1;for(let d in l)if(l[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),A=this.parseObject(e.object,o,c,l,t),u=this.parseSkeletons(e.skeletons,A);return this.bindSkeletons(A,u),A}parseShapes(e){let t={};if(e!==void 0)for(let n=0,o=e.length;n<o;n++){let a=new Eo().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){let n={},o={};if(t.traverse(function(a){a.isBone&&(o[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){let c=new va().fromJSON(e[a],o);n[c.uuid]=c}return n}parseGeometries(e,t){let n={};if(e!==void 0){let o=new ng;for(let a=0,l=e.length;a<l;a++){let c,A=e[a];switch(A.type){case"BufferGeometry":case"InstancedBufferGeometry":c=o.parse(A);break;default:A.type in ZT?c=ZT[A.type].fromJSON(A,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${A.type}"`)}c.uuid=A.uuid,A.name!==void 0&&(c.name=A.name),A.userData!==void 0&&(c.userData=A.userData),n[A.uuid]=c}}return n}parseMaterials(e,t){let n={},o={};if(e!==void 0){let a=new tg;a.setTextures(t);for(let l=0,c=e.length;l<c;l++){let A=e[l];n[A.uuid]===void 0&&(n[A.uuid]=a.parse(A)),o[A.uuid]=n[A.uuid]}}return o}parseAnimations(e){let t={};if(e!==void 0)for(let n=0;n<e.length;n++){let o=e[n],a=fs.parse(o);t[a.uuid]=a}return t}parseImages(e,t){let n=this,o={},a;function l(A){return n.manager.itemStart(A),a.load(A,function(){n.manager.itemEnd(A)},void 0,function(){n.manager.itemError(A),n.manager.itemEnd(A)})}function c(A){if(typeof A=="string"){let u=A,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return l(h)}else return A.data?{data:rA(A.type,A.data),width:A.width,height:A.height}:null}if(e!==void 0&&e.length>0){let A=new qh(t);a=new Wl(A),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){let f=e[u],d=f.url;if(Array.isArray(d)){let p=[];for(let m=0,b=d.length;m<b;m++){let g=d[m],w=c(g);w!==null&&(w instanceof HTMLImageElement?p.push(w):p.push(new zs(w.data,w.width,w.height)))}o[f.uuid]=new bo(p)}else{let p=c(f.url);o[f.uuid]=new bo(p)}}}return o}async parseImagesAsync(e){let t=this,n={},o;async function a(l){if(typeof l=="string"){let c=l,A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await o.loadAsync(A)}else return l.data?{data:rA(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){o=new Wl(this.manager),o.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){let A=e[l],u=A.url;if(Array.isArray(u)){let h=[];for(let f=0,d=u.length;f<d;f++){let p=u[f],m=await a(p);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new zs(m.data,m.width,m.height)))}n[A.uuid]=new bo(h)}else{let h=await a(A.url);n[A.uuid]=new bo(h)}}}return n}parseTextures(e,t){function n(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}let o={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){let c=e[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);let A=t[c.image],u=A.data,h;Array.isArray(u)?(h=new Nl,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new zs:h=new Vt,u&&(h.needsUpdate=!0)),h.source=A,h.uuid=c.uuid,c.name!==void 0&&(h.name=c.name),c.mapping!==void 0&&(h.mapping=n(c.mapping,C8)),c.channel!==void 0&&(h.channel=c.channel),c.offset!==void 0&&h.offset.fromArray(c.offset),c.repeat!==void 0&&h.repeat.fromArray(c.repeat),c.center!==void 0&&h.center.fromArray(c.center),c.rotation!==void 0&&(h.rotation=c.rotation),c.wrap!==void 0&&(h.wrapS=n(c.wrap[0],qT),h.wrapT=n(c.wrap[1],qT)),c.format!==void 0&&(h.format=c.format),c.internalFormat!==void 0&&(h.internalFormat=c.internalFormat),c.type!==void 0&&(h.type=c.type),c.colorSpace!==void 0&&(h.colorSpace=c.colorSpace),c.encoding!==void 0&&(h.encoding=c.encoding),c.minFilter!==void 0&&(h.minFilter=n(c.minFilter,$T)),c.magFilter!==void 0&&(h.magFilter=n(c.magFilter,$T)),c.anisotropy!==void 0&&(h.anisotropy=c.anisotropy),c.flipY!==void 0&&(h.flipY=c.flipY),c.generateMipmaps!==void 0&&(h.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(h.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(h.compareFunction=c.compareFunction),c.userData!==void 0&&(h.userData=c.userData),o[c.uuid]=h}return o}parseObject(e,t,n,o,a){let l;function c(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function A(d){if(d!==void 0){if(Array.isArray(d)){let p=[];for(let m=0,b=d.length;m<b;m++){let g=d[m];n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),p.push(n[g])}return p}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function u(d){return o[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),o[d]}let h,f;switch(e.type){case"Scene":l=new To,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new ke(e.background):l.background=u(e.background)),e.environment!==void 0&&(l.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Dm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new gA(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":l=new Jt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Ci(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new Ca(e.color,e.intensity);break;case"DirectionalLight":l=new ps(e.color,e.intensity);break;case"PointLight":l=new ds(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new $m(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new ba(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new Vl(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new MA().fromJSON(e);break;case"SkinnedMesh":h=c(e.geometry),f=A(e.material),l=new ga(h,f),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":h=c(e.geometry),f=A(e.material),l=new Xe(h,f);break;case"InstancedMesh":h=c(e.geometry),f=A(e.material);let d=e.count,p=e.instanceMatrix,m=e.instanceColor;l=new vA(h,f,d),l.instanceMatrix=new vr(new Float32Array(p.array),16),m!==void 0&&(l.instanceColor=new vr(new Float32Array(m.array),m.itemSize));break;case"LOD":l=new Lm;break;case"Line":l=new ji(c(e.geometry),A(e.material));break;case"LineLoop":l=new yA(c(e.geometry),A(e.material));break;case"LineSegments":l=new qi(c(e.geometry),A(e.material));break;case"PointCloud":case"Points":l=new ya(c(e.geometry),A(e.material));break;case"Sprite":l=new Bm(A(e.material));break;case"Group":l=new cn;break;case"Bone":l=new Vs;break;default:l=new ht}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){let d=e.children;for(let p=0;p<d.length;p++)l.add(this.parseObject(d[p],t,n,o,a))}if(e.animations!==void 0){let d=e.animations;for(let p=0;p<d.length;p++){let m=d[p];l.animations.push(a[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);let d=e.levels;for(let p=0;p<d.length;p++){let m=d[p],b=l.getObjectByProperty("uuid",m.object);b!==void 0&&l.addLevel(b,m.distance,m.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){let o=t[n.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(o,n.bindMatrix)}})}},C8={UVMapping:cg,CubeReflectionMapping:ha,CubeRefractionMapping:fa,EquirectangularReflectionMapping:Mo,EquirectangularRefractionMapping:Mh,CubeUVReflectionMapping:DA},qT={RepeatWrapping:_i,ClampToEdgeWrapping:Bn,MirroredRepeatWrapping:Rl},$T={NearestFilter:It,NearestMipmapNearestFilter:cA,NearestMipmapLinearFilter:Bl,LinearFilter:St,LinearMipmapNearestFilter:of,LinearMipmapLinearFilter:us},ef=class extends An{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,l=Hl.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;let c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(A){return A.blob()}).then(function(A){return createImageBitmap(A,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(A){Hl.add(e,A),t&&t(A),a.manager.itemEnd(e)}).catch(function(A){o&&o(A),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}},lm,tf=class{static getContext(){return lm===void 0&&(lm=new(window.AudioContext||window.webkitAudioContext)),lm}static setContext(e){lm=e}},mw=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=new Jn(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(A){try{let u=A.slice(0);tf.getContext().decodeAudioData(u,function(f){t(f)},c)}catch(u){c(u)}},n,o);function c(A){o?o(A):console.error(A),a.manager.itemError(e)}}},gw=class extends MA{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;let o=new ke().set(e),a=new ke().set(t),l=new Y(o.r,o.g,o.b),c=new Y(a.r,a.g,a.b),A=Math.sqrt(Math.PI),u=A*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(c).multiplyScalar(A),this.sh.coefficients[1].copy(l).sub(c).multiplyScalar(u)}},vw=class extends MA{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;let n=new ke().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}},eD=new Qe,tD=new Qe,vl=new Qe,yw=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,vl.copy(e.projectionMatrix);let o=t.eyeSep/2,a=o*t.near/t.focus,l=t.near*Math.tan(Ll*t.fov*.5)/t.zoom,c,A;tD.elements[12]=-o,eD.elements[12]=o,c=-l*t.aspect+a,A=l*t.aspect+a,vl.elements[0]=2*t.near/(A-c),vl.elements[8]=(A+c)/(A-c),this.cameraL.projectionMatrix.copy(vl),c=-l*t.aspect-a,A=l*t.aspect-a,vl.elements[0]=2*t.near/(A-c),vl.elements[8]=(A+c)/(A-c),this.cameraR.projectionMatrix.copy(vl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eD)}},Ea=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=nD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function nD(){return(typeof performance>"u"?Date:performance).now()}var yl=new Y,iD=new Lt,S8=new Y,xl=new Y,xw=class extends ht{constructor(){super(),this.type="AudioListener",this.context=tf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ea}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(yl,iD,S8),xl.set(0,0,-1).applyQuaternion(iD),t.positionX){let o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(yl.x,o),t.positionY.linearRampToValueAtTime(yl.y,o),t.positionZ.linearRampToValueAtTime(yl.z,o),t.forwardX.linearRampToValueAtTime(xl.x,o),t.forwardY.linearRampToValueAtTime(xl.y,o),t.forwardZ.linearRampToValueAtTime(xl.z,o),t.upX.linearRampToValueAtTime(n.x,o),t.upY.linearRampToValueAtTime(n.y,o),t.upZ.linearRampToValueAtTime(n.z,o)}else t.setPosition(yl.x,yl.y,yl.z),t.setOrientation(xl.x,xl.y,xl.z,n.x,n.y,n.z)}},ig=class extends ht{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},wl=new Y,rD=new Lt,E8=new Y,bl=new Y,ww=class extends ig{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(wl,rD,E8),bl.set(0,0,1).applyQuaternion(rD);let t=this.panner;if(t.positionX){let n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wl.x,n),t.positionY.linearRampToValueAtTime(wl.y,n),t.positionZ.linearRampToValueAtTime(wl.z,n),t.orientationX.linearRampToValueAtTime(bl.x,n),t.orientationY.linearRampToValueAtTime(bl.y,n),t.orientationZ.linearRampToValueAtTime(bl.z,n)}else t.setPosition(wl.x,wl.y,wl.z),t.setOrientation(bl.x,bl.y,bl.z)}},bw=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}},rg=class{constructor(e,t,n){this.binding=e,this.valueSize=n;let o,a,l;switch(t){case"quaternion":o=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:o=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,o=this.valueSize,a=e*o+o,l=this.cumulativeWeight;if(l===0){for(let c=0;c!==o;++c)n[a+c]=n[c];l=t}else{l+=t;let c=t/l;this._mixBufferRegion(n,a,0,c,o)}this.cumulativeWeight=l}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,o=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,o=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){let A=t*this._origIndex;this._mixBufferRegion(n,o,A,1-a,t)}l>0&&this._mixBufferRegionAdditive(n,o,this._addIndex*t,1,t);for(let A=t,u=t+t;A!==u;++A)if(n[A]!==n[A+t]){c.setValue(n,o);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,o=n*this._origIndex;e.getValue(t,o);for(let a=n,l=o;a!==l;++a)t[a]=t[o+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,o,a){if(o>=.5)for(let l=0;l!==a;++l)e[t+l]=e[n+l]}_slerp(e,t,n,o){Lt.slerpFlat(e,t,e,t,e,n,o)}_slerpAdditive(e,t,n,o,a){let l=this._workIndex*a;Lt.multiplyQuaternionsFlat(e,l,e,t,e,n),Lt.slerpFlat(e,t,e,t,e,l,o)}_lerp(e,t,n,o,a){let l=1-o;for(let c=0;c!==a;++c){let A=t+c;e[A]=e[A]*l+e[n+c]*o}}_lerpAdditive(e,t,n,o,a){for(let l=0;l!==a;++l){let c=t+l;e[c]=e[c]+e[n+l]*o}}},ub="\\[\\]\\.:\\/",I8=new RegExp("["+ub+"]","g"),hb="[^"+ub+"]",M8="[^"+ub.replace("\\.","")+"]",T8=/((?:WC+[\/:])*)/.source.replace("WC",hb),D8=/(WCOD+)?/.source.replace("WCOD",M8),B8=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hb),L8=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hb),R8=new RegExp("^"+T8+D8+B8+L8+"$"),k8=["material","materials","bones","map"],Cw=class{constructor(e,t,n){let o=n||Bt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,o=this._bindings[n];o!==void 0&&o.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=n.length;o!==a;++o)n[o].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Bt=class i{constructor(e,t,n){this.path=t,this.parsedPath=n||i.parseTrackName(t),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new i.Composite(e,t,n):new i(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(I8,"")}static parseTrackName(e){let t=R8.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=n.nodeName&&n.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let a=n.nodeName.substring(o+1);k8.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,o),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){let n=function(a){for(let l=0;l<a.length;l++){let c=a[l];if(c.name===t||c.uuid===t)return c;let A=n(c.children);if(A)return A}return null},o=n(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let o=0,a=n.length;o!==a;++o)e[t++]=n[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let o=0,a=n.length;o!==a;++o)n[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let o=0,a=n.length;o!==a;++o)n[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let o=0,a=n.length;o!==a;++o)n[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,o=t.propertyName,a=t.propertyIndex;if(e||(e=i.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}let l=e[o];if(l===void 0){let u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+o+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let A=this.BindingType.Direct;if(a!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}A=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(A=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(A=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=o;this.getValue=this.GetterByBindingType[A],this.setValue=this.SetterByBindingTypeAndVersioning[A][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Bt.Composite=Cw;Bt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bt.prototype.GetterByBindingType=[Bt.prototype._getValue_direct,Bt.prototype._getValue_array,Bt.prototype._getValue_arrayElement,Bt.prototype._getValue_toArray];Bt.prototype.SetterByBindingTypeAndVersioning=[[Bt.prototype._setValue_direct,Bt.prototype._setValue_direct_setNeedsUpdate,Bt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_array,Bt.prototype._setValue_array_setNeedsUpdate,Bt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_arrayElement,Bt.prototype._setValue_arrayElement_setNeedsUpdate,Bt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_fromArray,Bt.prototype._setValue_fromArray_setNeedsUpdate,Bt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Sw=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=mr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let n=0,o=arguments.length;n!==o;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length,c,A=e.length,u=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){let d=arguments[h],p=d.uuid,m=t[p];if(m===void 0){m=A++,t[p]=m,e.push(d);for(let b=0,g=l;b!==g;++b)a[b].push(new Bt(d,n[b],o[b]))}else if(m<u){c=e[m];let b=--u,g=e[b];t[g.uuid]=m,e[m]=g,t[p]=b,e[b]=d;for(let w=0,I=l;w!==I;++w){let v=a[w],E=v[b],S=v[m];v[m]=E,S===void 0&&(S=new Bt(d,n[w],o[w])),v[b]=S}}else e[m]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,o=n.length,a=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){let A=arguments[l],u=A.uuid,h=t[u];if(h!==void 0&&h>=a){let f=a++,d=e[f];t[d.uuid]=h,e[h]=d,t[u]=f,e[f]=A;for(let p=0,m=o;p!==m;++p){let b=n[p],g=b[f],w=b[h];b[h]=g,b[f]=w}}}this.nCachedObjects_=a}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,o=n.length,a=this.nCachedObjects_,l=e.length;for(let c=0,A=arguments.length;c!==A;++c){let u=arguments[c],h=u.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<a){let d=--a,p=e[d],m=--l,b=e[m];t[p.uuid]=f,e[f]=p,t[b.uuid]=d,e[d]=b,e.pop();for(let g=0,w=o;g!==w;++g){let I=n[g],v=I[d],E=I[m];I[f]=v,I[d]=E,I.pop()}}else{let d=--l,p=e[d];d>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let m=0,b=o;m!==b;++m){let g=n[m];g[f]=g[d],g.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){let n=this._bindingsIndicesByPath,o=n[e],a=this._bindings;if(o!==void 0)return a[o];let l=this._paths,c=this._parsedPaths,A=this._objects,u=A.length,h=this.nCachedObjects_,f=new Array(u);o=a.length,n[e]=o,l.push(e),c.push(t),a.push(f);for(let d=h,p=A.length;d!==p;++d){let m=A[d];f[d]=new Bt(m,e,t)}return f}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){let o=this._paths,a=this._parsedPaths,l=this._bindings,c=l.length-1,A=l[c],u=e[c];t[u]=n,l[n]=A,l.pop(),a[n]=a[c],a.pop(),o[n]=o[c],o.pop()}}},sg=class{constructor(e,t,n=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=o;let a=t.tracks,l=a.length,c=new Array(l),A={endingStart:Il,endingEnd:Il};for(let u=0;u!==l;++u){let h=a[u].createInterpolant(null);c[u]=h,h.settings=A}this._interpolantSettings=A,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let o=this._clip.duration,a=e._clip.duration,l=a/o,c=o/a;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let o=this._mixer,a=o.time,l=this.timeScale,c=this._timeScaleInterpolant;c===null&&(c=o._lendControlInterpolant(),this._timeScaleInterpolant=c);let A=c.parameterPositions,u=c.sampleValues;return A[0]=a,A[1]=a+n,u[0]=e/l,u[1]=t/l,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,o){if(!this.enabled){this._updateWeight(e);return}let a=this._startTime;if(a!==null){let A=(e-a)*n;A<0||n===0?t=0:(this._startTime=null,t=n*A)}t*=this._updateTimeScale(e);let l=this._updateTime(t),c=this._updateWeight(e);if(c>0){let A=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case tb:for(let h=0,f=A.length;h!==f;++h)A[h].evaluate(l),u[h].accumulateAdditive(c);break;case ug:default:for(let h=0,f=A.length;h!==f;++h)A[h].evaluate(l),u[h].accumulate(o,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(n!==null){let o=n.evaluate(e)[0];t*=o,e>n.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;if(n!==null){let o=n.evaluate(e)[0];t*=o,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,o=this.time+e,a=this._loopCount,l=n===jD;if(e===0)return a===-1?o:l&&(a&1)===1?t-o:o;if(n===KD){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),o>=t||o<0){let c=Math.floor(o/t);o-=t*c,a+=Math.abs(c);let A=this.repetitions-a;if(A<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(A===1){let u=e<0;this._setEndings(u,!u,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=o;if(l&&(a&1)===1)return t-o}return o}_setEndings(e,t,n){let o=this._interpolantSettings;n?(o.endingStart=Ml,o.endingEnd=Ml):(e?o.endingStart=this.zeroSlopeAtStart?Ml:Il:o.endingStart=Th,t?o.endingEnd=this.zeroSlopeAtEnd?Ml:Il:o.endingEnd=Th)}_scheduleFading(e,t,n){let o=this._mixer,a=o.time,l=this._weightInterpolant;l===null&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);let c=l.parameterPositions,A=l.sampleValues;return c[0]=a,A[0]=t,c[1]=a+e,A[1]=n,this}},P8=new Float32Array(1),Xl=class extends Ni{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,o=e._clip.tracks,a=o.length,l=e._propertyBindings,c=e._interpolants,A=n.uuid,u=this._bindingsByRootAndName,h=u[A];h===void 0&&(h={},u[A]=h);for(let f=0;f!==a;++f){let d=o[f],p=d.name,m=h[p];if(m!==void 0)++m.referenceCount,l[f]=m;else{if(m=l[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,A,p));continue}let b=t&&t._propertyBindings[f].binding.parsedPath;m=new rg(Bt.create(n,p,b),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,A,p),l[f]=m}c[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let n=(e._localRoot||this._root).uuid,o=e._clip.uuid,a=this._actionsByClip[o];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,o,n)}let t=e._propertyBindings;for(let n=0,o=t.length;n!==o;++n){let a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let n=0,o=t.length;n!==o;++n){let a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){let o=this._actions,a=this._actionsByClip,l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{let c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=o.length,o.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],o=e._cacheIndex;n._cacheIndex=o,t[o]=n,t.pop(),e._cacheIndex=null;let a=e._clip.uuid,l=this._actionsByClip,c=l[a],A=c.knownActions,u=A[A.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,A[h]=u,A.pop(),e._byClipCacheIndex=null;let f=c.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],A.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let n=0,o=t.length;n!==o;++n){let a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,o=this._nActiveActions++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,o=--this._nActiveActions,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){let o=this._bindingsByRootAndName,a=this._bindings,l=o[t];l===void 0&&(l={},o[t]=l),l[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,o=n.rootNode.uuid,a=n.path,l=this._bindingsByRootAndName,c=l[o],A=t[t.length-1],u=e._cacheIndex;A._cacheIndex=u,t[u]=A,t.pop(),delete c[a],Object.keys(c).length===0&&delete l[o]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,o=this._nActiveBindings++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,o=--this._nActiveBindings,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new Jh(new Float32Array(2),new Float32Array(2),1,P8),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,o=--this._nActiveControlInterpolants,a=t[o];e.__cacheIndex=o,t[o]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){let o=t||this._root,a=o.uuid,l=typeof e=="string"?fs.findByName(o,e):e,c=l!==null?l.uuid:e,A=this._actionsByClip[c],u=null;if(n===void 0&&(l!==null?n=l.blendMode:n=ug),A!==void 0){let f=A.actionByRoot[a];if(f!==void 0&&f.blendMode===n)return f;u=A.knownActions[0],l===null&&(l=u._clip)}if(l===null)return null;let h=new sg(this,l,t,n);return this._bindAction(h,u),this._addInactiveAction(h,c,a),h}existingAction(e,t){let n=t||this._root,o=n.uuid,a=typeof e=="string"?fs.findByName(n,e):e,l=a?a.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[o]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,o=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(o,e,a,l);let c=this._bindings,A=this._nActiveBindings;for(let u=0;u!==A;++u)c[u].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,o=this._actionsByClip,a=o[n];if(a!==void 0){let l=a.knownActions;for(let c=0,A=l.length;c!==A;++c){let u=l[c];this._deactivateAction(u);let h=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete o[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let l in n){let c=n[l].actionByRoot,A=c[t];A!==void 0&&(this._deactivateAction(A),this._removeInactiveAction(A))}let o=this._bindingsByRootAndName,a=o[t];if(a!==void 0)for(let l in a){let c=a[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){let n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Ew=class i{constructor(e){this.value=e}clone(){return new i(this.value.clone===void 0?this.value:this.value.clone())}},_8=0,Iw=class extends Ni{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_8++}),this.name="",this.usage=Dh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let n=0,o=t.length;n<o;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}},nf=class extends Ji{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},Mw=class{constructor(e,t,n,o,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=o,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},rf=class{constructor(e,t,n=0,o=1/0){this.ray=new Ws(e,t),this.near=n,this.far=o,this.camera=null,this.layers=new fA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Tw(e,this,n,t),n.sort(sD),n}intersectObjects(e,t=!0,n=[]){for(let o=0,a=e.length;o<a;o++)Tw(e[o],this,n,t);return n.sort(sD),n}};function sD(i,e){return i.distance-e.distance}function Tw(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){let o=i.children;for(let a=0,l=o.length;a<l;a++)Tw(o[a],e,t,!0)}}var TA=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(wn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},Dw=class{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}},oD=new he,Bw=class{constructor(e=new he(1/0,1/0),t=new he(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=oD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},aD=new Y,cm=new Y,Lw=class{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){aD.subVectors(e,this.start),cm.subVectors(this.end,this.start);let n=cm.dot(cm),a=cm.dot(aD)/n;return t&&(a=wn(a,0,1)),a}closestPointToPoint(e,t,n){let o=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},lD=new Y,Rw=class extends ht{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new qe,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,A=32;l<A;l++,c++){let u=l/A*Math.PI*2,h=c/A*Math.PI*2;o.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new He(o,3));let a=new Rn({fog:!1,toneMapped:!1});this.cone=new qi(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},ca=new Y,Am=new Qe,lx=new Qe,kw=class extends qi{constructor(e){let t=EB(e),n=new qe,o=[],a=[],l=new ke(0,0,1),c=new ke(0,1,0);for(let u=0;u<t.length;u++){let h=t[u];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),a.push(l.r,l.g,l.b),a.push(c.r,c.g,c.b))}n.setAttribute("position",new He(o,3)),n.setAttribute("color",new He(a,3));let A=new Rn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,A),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,o=n.getAttribute("position");lx.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){let c=t[a];c.parent&&c.parent.isBone&&(Am.multiplyMatrices(lx,c.matrixWorld),ca.setFromMatrixPosition(Am),o.setXYZ(l,ca.x,ca.y,ca.z),Am.multiplyMatrices(lx,c.parent.matrixWorld),ca.setFromMatrixPosition(Am),o.setXYZ(l+1,ca.x,ca.y,ca.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function EB(i){let e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,EB(i.children[t]));return e}var Pw=class extends Xe{constructor(e,t,n){let o=new Kh(t,4,2),a=new Qt({wireframe:!0,fog:!1,toneMapped:!1});super(o,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},N8=new Y,cD=new ke,AD=new ke,_w=class extends ht{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let o=new Zh(t);o.rotateY(Math.PI*.5),this.material=new Qt({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let a=o.getAttribute("position"),l=new Float32Array(a.count*3);o.setAttribute("color",new it(l,3)),this.add(new Xe(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");cD.copy(this.light.color),AD.copy(this.light.groundColor);for(let n=0,o=t.count;n<o;n++){let a=n<o/2?cD:AD;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(N8.setFromMatrixPosition(this.light.matrixWorld).negate())}},Nw=class extends qi{constructor(e=10,t=10,n=4473924,o=8947848){n=new ke(n),o=new ke(o);let a=t/2,l=e/t,c=e/2,A=[],u=[];for(let d=0,p=0,m=-c;d<=t;d++,m+=l){A.push(-c,0,m,c,0,m),A.push(m,0,-c,m,0,c);let b=d===a?n:o;b.toArray(u,p),p+=3,b.toArray(u,p),p+=3,b.toArray(u,p),p+=3,b.toArray(u,p),p+=3}let h=new qe;h.setAttribute("position",new He(A,3)),h.setAttribute("color",new He(u,3));let f=new Rn({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},Fw=class extends qi{constructor(e=10,t=16,n=8,o=64,a=4473924,l=8947848){a=new ke(a),l=new ke(l);let c=[],A=[];if(t>1)for(let f=0;f<t;f++){let d=f/t*(Math.PI*2),p=Math.sin(d)*e,m=Math.cos(d)*e;c.push(0,0,0),c.push(p,0,m);let b=f&1?a:l;A.push(b.r,b.g,b.b),A.push(b.r,b.g,b.b)}for(let f=0;f<n;f++){let d=f&1?a:l,p=e-e/n*f;for(let m=0;m<o;m++){let b=m/o*(Math.PI*2),g=Math.sin(b)*p,w=Math.cos(b)*p;c.push(g,0,w),A.push(d.r,d.g,d.b),b=(m+1)/o*(Math.PI*2),g=Math.sin(b)*p,w=Math.cos(b)*p,c.push(g,0,w),A.push(d.r,d.g,d.b)}}let u=new qe;u.setAttribute("position",new He(c,3)),u.setAttribute("color",new He(A,3));let h=new Rn({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},uD=new Y,um=new Y,hD=new Y,Qw=class extends ht{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let o=new qe;o.setAttribute("position",new He([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let a=new Rn({fog:!1,toneMapped:!1});this.lightPlane=new ji(o,a),this.add(this.lightPlane),o=new qe,o.setAttribute("position",new He([0,0,0,0,0,1],3)),this.targetLine=new ji(o,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),uD.setFromMatrixPosition(this.light.matrixWorld),um.setFromMatrixPosition(this.light.target.matrixWorld),hD.subVectors(um,uD),this.lightPlane.lookAt(um),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(um),this.targetLine.scale.z=hD.length()}},hm=new Y,xn=new pA,Uw=class extends qi{constructor(e){let t=new qe,n=new Rn({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(m,b){A(m),A(b)}function A(m){o.push(0,0,0),a.push(0,0,0),l[m]===void 0&&(l[m]=[]),l[m].push(o.length/3-1)}t.setAttribute("position",new He(o,3)),t.setAttribute("color",new He(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();let u=new ke(16755200),h=new ke(16711680),f=new ke(43775),d=new ke(16777215),p=new ke(3355443);this.setColors(u,h,f,d,p)}setColors(e,t,n,o,a){let c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,o.r,o.g,o.b),c.setXYZ(39,o.r,o.g,o.b),c.setXYZ(40,a.r,a.g,a.b),c.setXYZ(41,a.r,a.g,a.b),c.setXYZ(42,a.r,a.g,a.b),c.setXYZ(43,a.r,a.g,a.b),c.setXYZ(44,a.r,a.g,a.b),c.setXYZ(45,a.r,a.g,a.b),c.setXYZ(46,a.r,a.g,a.b),c.setXYZ(47,a.r,a.g,a.b),c.setXYZ(48,a.r,a.g,a.b),c.setXYZ(49,a.r,a.g,a.b),c.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,n=1,o=1;xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Dn("c",t,e,xn,0,0,-1),Dn("t",t,e,xn,0,0,1),Dn("n1",t,e,xn,-n,-o,-1),Dn("n2",t,e,xn,n,-o,-1),Dn("n3",t,e,xn,-n,o,-1),Dn("n4",t,e,xn,n,o,-1),Dn("f1",t,e,xn,-n,-o,1),Dn("f2",t,e,xn,n,-o,1),Dn("f3",t,e,xn,-n,o,1),Dn("f4",t,e,xn,n,o,1),Dn("u1",t,e,xn,n*.7,o*1.1,-1),Dn("u2",t,e,xn,-n*.7,o*1.1,-1),Dn("u3",t,e,xn,0,o*2,-1),Dn("cf1",t,e,xn,-n,0,1),Dn("cf2",t,e,xn,n,0,1),Dn("cf3",t,e,xn,0,-o,1),Dn("cf4",t,e,xn,0,o,1),Dn("cn1",t,e,xn,-n,0,-1),Dn("cn2",t,e,xn,n,0,-1),Dn("cn3",t,e,xn,0,-o,-1),Dn("cn4",t,e,xn,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Dn(i,e,t,n,o,a,l){hm.set(o,a,l).unproject(n);let c=e[i];if(c!==void 0){let A=t.getAttribute("position");for(let u=0,h=c.length;u<h;u++)A.setXYZ(c[u],hm.x,hm.y,hm.z)}}var fm=new Cn,Ow=class extends qi{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),a=new qe;a.setIndex(new it(n,1)),a.setAttribute("position",new it(o,3)),super(a,new Rn({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&fm.setFromObject(this.object),fm.isEmpty())return;let t=fm.min,n=fm.max,o=this.geometry.attributes.position,a=o.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=t.x,a[4]=n.y,a[5]=n.z,a[6]=t.x,a[7]=t.y,a[8]=n.z,a[9]=n.x,a[10]=t.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=t.z,a[15]=t.x,a[16]=n.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=n.x,a[22]=t.y,a[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Gw=class extends qi{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new qe;a.setIndex(new it(n,1)),a.setAttribute("position",new He(o,3)),super(a,new Rn({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},zw=class extends ji{constructor(e,t=1,n=16776960){let o=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new qe;l.setAttribute("position",new He(a,3)),l.computeBoundingSphere(),super(l,new Rn({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],A=new qe;A.setAttribute("position",new He(c,3)),A.computeBoundingSphere(),this.add(new Xe(A,new Qt({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},fD=new Y,dm,cx,Hw=class extends ht{constructor(e=new Y(0,0,1),t=new Y(0,0,0),n=1,o=16776960,a=n*.2,l=a*.2){super(),this.type="ArrowHelper",dm===void 0&&(dm=new qe,dm.setAttribute("position",new He([0,0,0,0,1,0],3)),cx=new yr(0,.5,1,5,1),cx.translate(0,-.5,0)),this.position.copy(t),this.line=new ji(dm,new Rn({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xe(cx,new Qt({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fD.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(fD,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},Ww=class extends qi{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new qe;o.setAttribute("position",new He(t,3)),o.setAttribute("color",new He(n,3));let a=new Rn({vertexColors:!0,toneMapped:!1});super(o,a),this.type="AxesHelper"}setColors(e,t,n){let o=new ke,a=this.geometry.attributes.color.array;return o.set(e),o.toArray(a,0),o.toArray(a,3),o.set(t),o.toArray(a,6),o.toArray(a,9),o.set(n),o.toArray(a,12),o.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Vw=class{constructor(){this.type="ShapePath",this.color=new ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,o){return this.currentPath.quadraticCurveTo(e,t,n,o),this}bezierCurveTo(e,t,n,o,a,l){return this.currentPath.bezierCurveTo(e,t,n,o,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){let I=[];for(let v=0,E=w.length;v<E;v++){let S=w[v],C=new Eo;C.curves=S.curves,I.push(C)}return I}function n(w,I){let v=I.length,E=!1;for(let S=v-1,C=0;C<v;S=C++){let M=I[S],D=I[C],T=D.x-M.x,B=D.y-M.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(M=I[C],T=-T,D=I[S],B=-B),w.y<M.y||w.y>D.y)continue;if(w.y===M.y){if(w.x===M.x)return!0}else{let R=B*(w.x-M.x)-T*(w.y-M.y);if(R===0)return!0;if(R<0)continue;E=!E}}else{if(w.y!==M.y)continue;if(D.x<=w.x&&w.x<=M.x||M.x<=w.x&&w.x<=D.x)return!0}}return E}let o=Hs.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,c,A,u=[];if(a.length===1)return c=a[0],A=new Eo,A.curves=c.curves,u.push(A),u;let h=!o(a[0].getPoints());h=e?!h:h;let f=[],d=[],p=[],m=0,b;d[m]=void 0,p[m]=[];for(let w=0,I=a.length;w<I;w++)c=a[w],b=c.getPoints(),l=o(b),l=e?!l:l,l?(!h&&d[m]&&m++,d[m]={s:new Eo,p:b},d[m].s.curves=c.curves,h&&m++,p[m]=[]):p[m].push({h:c,p:b[0]});if(!d[0])return t(a);if(d.length>1){let w=!1,I=0;for(let v=0,E=d.length;v<E;v++)f[v]=[];for(let v=0,E=d.length;v<E;v++){let S=p[v];for(let C=0;C<S.length;C++){let M=S[C],D=!0;for(let T=0;T<d.length;T++)n(M.p,d[T].p)&&(v!==T&&I++,D?(D=!1,f[T].push(M)):w=!0);D&&f[v].push(M)}}I>0&&w===!1&&(p=f)}let g;for(let w=0,I=d.length;w<I;w++){A=d[w].s,u.push(A),g=p[w];for(let v=0,E=g.length;v<E;v++)A.holes.push(g[v].h)}return u}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:og}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=og);var rC={};fl(rC,{badroty:()=>HW,bindbutton:()=>sV,campos:()=>$b,camstatus:()=>lL,camto:()=>rL,chain:()=>_W,default:()=>er,elt:()=>NW,exports:()=>oV,fbx:()=>jW,filter:()=>RW,getdatauri:()=>$W,gltf:()=>hf,gltf0:()=>JW,gltfdraco:()=>oL,grow:()=>eL,ld:()=>iL,ldmodule:()=>XW,linear:()=>kW,loadjs:()=>uL,log:()=>tC,lookto:()=>nC,lookto0:()=>YW,map:()=>LW,mk:()=>aV,objload:()=>nV,pos:()=>QW,postimg:()=>tV,pp:()=>ZW,putimg:()=>eV,quat:()=>FW,rot:()=>eC,roty:()=>nL,rroty:()=>WW,runcamstatus:()=>iV,sgltf:()=>aL,sleep:()=>VW,slide:()=>$B,throttle:()=>lV,timingloop:()=>qW,togglefullscreen:()=>FA,togglefullscreen0:()=>sL,toquat:()=>tL,tweenrunning:()=>PW,tweenupdate:()=>qB,vec3:()=>Cr,vidbox:()=>Mg,videotexture:()=>cL,wireframe:()=>AL,xhr:()=>KW,xhrpost:()=>iC,ygrow:()=>GW});var IB=function(i){return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},F8=function(i){return new Worker(i)};try{URL.revokeObjectURL(IB(""))}catch{IB=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},F8=function(e){return new Worker(e,{type:"module"})}}var Hr=Uint8Array,Da=Uint16Array,pb=Uint32Array,MB=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),TB=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Q8=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DB=function(i,e){for(var t=new Da(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var o=new pb(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return[t,o]},BB=DB(MB,2),LB=BB[0],U8=BB[1];LB[28]=258,U8[258]=28;var RB=DB(TB,0),O8=RB[0],oie=RB[1],mb=new Da(32768);for(Ht=0;Ht<32768;++Ht)Po=(Ht&43690)>>>1|(Ht&21845)<<1,Po=(Po&52428)>>>2|(Po&13107)<<2,Po=(Po&61680)>>>4|(Po&3855)<<4,mb[Ht]=((Po&65280)>>>8|(Po&255)<<8)>>>1;var Po,Ht,lf=function(i,e,t){for(var n=i.length,o=0,a=new Da(e);o<n;++o)++a[i[o]-1];var l=new Da(e);for(o=0;o<e;++o)l[o]=l[o-1]+a[o-1]<<1;var c;if(t){c=new Da(1<<e);var A=15-e;for(o=0;o<n;++o)if(i[o])for(var u=o<<4|i[o],h=e-i[o],f=l[i[o]-1]++<<h,d=f|(1<<h)-1;f<=d;++f)c[mb[f]>>>A]=u}else for(c=new Da(n),o=0;o<n;++o)i[o]&&(c[o]=mb[l[i[o]-1]++]>>>15-i[o]);return c},cf=new Hr(288);for(Ht=0;Ht<144;++Ht)cf[Ht]=8;var Ht;for(Ht=144;Ht<256;++Ht)cf[Ht]=9;var Ht;for(Ht=256;Ht<280;++Ht)cf[Ht]=7;var Ht;for(Ht=280;Ht<288;++Ht)cf[Ht]=8;var Ht,kB=new Hr(32);for(Ht=0;Ht<32;++Ht)kB[Ht]=5;var Ht;var G8=lf(cf,9,1);var z8=lf(kB,5,1),fb=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},vs=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},db=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},H8=function(i){return(i/8|0)+(i&7&&1)},W8=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof Da?Da:i instanceof pb?pb:Hr)(t-e);return n.set(i.subarray(e,t)),n},V8=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Hr(0);var o=!e||t,a=!t||t.i;t||(t={}),e||(e=new Hr(n*3));var l=function(se){var oe=e.length;if(se>oe){var le=new Hr(Math.max(oe*2,se));le.set(e),e=le}},c=t.f||0,A=t.p||0,u=t.b||0,h=t.l,f=t.d,d=t.m,p=t.n,m=n*8;do{if(!h){t.f=c=vs(i,A,1);var b=vs(i,A+1,3);if(A+=3,b)if(b==1)h=G8,f=z8,d=9,p=5;else if(b==2){var v=vs(i,A,31)+257,E=vs(i,A+10,15)+4,S=v+vs(i,A+5,31)+1;A+=14;for(var C=new Hr(S),M=new Hr(19),D=0;D<E;++D)M[Q8[D]]=vs(i,A+D*3,7);A+=E*3;for(var T=fb(M),B=(1<<T)-1,R=lf(M,T,1),D=0;D<S;){var P=R[vs(i,A,B)];A+=P&15;var g=P>>>4;if(g<16)C[D++]=g;else{var _=0,Q=0;for(g==16?(Q=3+vs(i,A,3),A+=2,_=C[D-1]):g==17?(Q=3+vs(i,A,7),A+=3):g==18&&(Q=11+vs(i,A,127),A+=7);Q--;)C[D++]=_}}var W=C.subarray(0,v),U=C.subarray(v);d=fb(W),p=fb(U),h=lf(W,d,1),f=lf(U,p,1)}else throw"invalid block type";else{var g=H8(A)+4,w=i[g-4]|i[g-3]<<8,I=g+w;if(I>n){if(a)throw"unexpected EOF";break}o&&l(u+w),e.set(i.subarray(g,I),u),t.b=u+=w,t.p=A=I*8;continue}if(A>m){if(a)throw"unexpected EOF";break}}o&&l(u+131072);for(var H=(1<<d)-1,O=(1<<p)-1,F=A;;F=A){var _=h[db(i,A)&H],z=_>>>4;if(A+=_&15,A>m){if(a)throw"unexpected EOF";break}if(!_)throw"invalid length/literal";if(z<256)e[u++]=z;else if(z==256){F=A,h=null;break}else{var k=z-254;if(z>264){var D=z-257,X=MB[D];k=vs(i,A,(1<<X)-1)+LB[D],A+=X}var te=f[db(i,A)&O],ie=te>>>4;if(!te)throw"invalid distance";A+=te&15;var U=O8[ie];if(ie>3){var X=TB[ie];U+=db(i,A)&(1<<X)-1,A+=X}if(A>m){if(a)throw"unexpected EOF";break}o&&l(u+131072);for(var re=u+k;u<re;u+=4)e[u]=e[u-U],e[u+1]=e[u+1-U],e[u+2]=e[u+2-U],e[u+3]=e[u+3-U];u=re}}t.l=h,t.p=F,t.b=u,h&&(c=1,t.m=d,t.d=f,t.n=p)}while(!c);return u==e.length?e:W8(e,0,u)};var X8=new Hr(0);var Y8=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function PB(i,e){return V8((Y8(i),i.subarray(2,-4)),e)}var Z8=typeof TextDecoder<"u"&&new TextDecoder,K8=0;try{Z8.decode(X8,{stream:!0}),K8=1}catch{}function _B(i,e,t){let n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let o=i,a=n,l=Math.floor((o+a)/2);for(;e<t[l]||e>=t[l+1];)e<t[l]?a=l:o=l,l=Math.floor((o+a)/2);return l}function j8(i,e,t,n){let o=[],a=[],l=[];o[0]=1;for(let c=1;c<=t;++c){a[c]=e-n[i+1-c],l[c]=n[i+c]-e;let A=0;for(let u=0;u<c;++u){let h=l[u+1],f=a[c-u],d=o[u]/(h+f);o[u]=A+h*d,A=f*d}o[c]=A}return o}function NB(i,e,t,n){let o=_B(i,n,e),a=j8(o,n,i,e),l=new Ct(0,0,0,0);for(let c=0;c<=i;++c){let A=t[o-i+c],u=a[c],h=A.w*u;l.x+=A.x*h,l.y+=A.y*h,l.z+=A.z*h,l.w+=A.w*u}return l}function q8(i,e,t,n,o){let a=[];for(let f=0;f<=t;++f)a[f]=0;let l=[];for(let f=0;f<=n;++f)l[f]=a.slice(0);let c=[];for(let f=0;f<=t;++f)c[f]=a.slice(0);c[0][0]=1;let A=a.slice(0),u=a.slice(0);for(let f=1;f<=t;++f){A[f]=e-o[i+1-f],u[f]=o[i+f]-e;let d=0;for(let p=0;p<f;++p){let m=u[p+1],b=A[f-p];c[f][p]=m+b;let g=c[p][f-1]/c[f][p];c[p][f]=d+m*g,d=b*g}c[f][f]=d}for(let f=0;f<=t;++f)l[0][f]=c[f][t];for(let f=0;f<=t;++f){let d=0,p=1,m=[];for(let b=0;b<=t;++b)m[b]=a.slice(0);m[0][0]=1;for(let b=1;b<=n;++b){let g=0,w=f-b,I=t-b;f>=b&&(m[p][0]=m[d][0]/c[I+1][w],g=m[p][0]*c[w][I]);let v=w>=-1?1:-w,E=f-1<=I?b-1:t-f;for(let C=v;C<=E;++C)m[p][C]=(m[d][C]-m[d][C-1])/c[I+1][w+C],g+=m[p][C]*c[w+C][I];f<=I&&(m[p][b]=-m[d][b-1]/c[I+1][f],g+=m[p][b]*c[f][I]),l[b][f]=g;let S=d;d=p,p=S}}let h=t;for(let f=1;f<=n;++f){for(let d=0;d<=t;++d)l[f][d]*=h;h*=t-f}return l}function $8(i,e,t,n,o){let a=o<i?o:i,l=[],c=_B(i,n,e),A=q8(c,n,i,a,e),u=[];for(let h=0;h<t.length;++h){let f=t[h].clone(),d=f.w;f.x*=d,f.y*=d,f.z*=d,u[h]=f}for(let h=0;h<=a;++h){let f=u[c-i].clone().multiplyScalar(A[h][0]);for(let d=1;d<=i;++d)f.add(u[c-i+d].clone().multiplyScalar(A[h][d]));l[h]=f}for(let h=a+1;h<=o+1;++h)l[h]=new Ct(0,0,0);return l}function eW(i,e){let t=1;for(let o=2;o<=i;++o)t*=o;let n=1;for(let o=2;o<=e;++o)n*=o;for(let o=2;o<=i-e;++o)n*=o;return t/n}function tW(i){let e=i.length,t=[],n=[];for(let a=0;a<e;++a){let l=i[a];t[a]=new Y(l.x,l.y,l.z),n[a]=l.w}let o=[];for(let a=0;a<e;++a){let l=t[a].clone();for(let c=1;c<=a;++c)l.sub(o[a-c].clone().multiplyScalar(eW(a,c)*n[c]));o[a]=l.divideScalar(n[0])}return o}function QB(i,e,t,n,o){let a=$8(i,e,t,n,o);return tW(a)}var pg=class extends Qi{constructor(e,t,n,o,a){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=o||0,this.endKnot=a||this.knots.length-1;for(let l=0;l<n.length;++l){let c=n[l];this.controlPoints[l]=new Ct(c.x,c.y,c.z,c.w)}}getPoint(e,t=new Y){let n=t,o=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=NB(this.degree,this.knots,this.controlPoints,o);return a.w!==1&&a.divideScalar(a.w),n.set(a.x,a.y,a.z)}getTangent(e,t=new Y){let n=t,o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=QB(this.degree,this.knots,this.controlPoints,o,1);return n.copy(a[1]).normalize(),n}};var Tt,kn,$i,gg=class extends An{constructor(e){super(e)}load(e,t,n,o){let a=this,l=a.path===""?ms.extractUrlBase(e):a.path,c=new Jn(this.manager);c.setPath(a.path),c.setResponseType("arraybuffer"),c.setRequestHeader(a.requestHeader),c.setWithCredentials(a.withCredentials),c.load(e,function(A){try{t(a.parse(A,l))}catch(u){o?o(u):console.error(u),a.manager.itemError(e)}},n,o)}parse(e,t){if(iW(e))Tt=new Cb().parse(e);else{let o=HB(e);if(!rW(o))throw new Error("THREE.FBXLoader: Unknown format.");if(UB(o)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+UB(o));Tt=new bb().parse(o)}let n=new ko(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new yb(n,this.manager).parse(Tt)}},yb=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){kn=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),o=this.parseDeformers(),a=new xb().parse(o);return this.parseScene(o,a,n),$i}parseConnections(){let e=new Map;return"Connections"in Tt&&Tt.Connections.connections.forEach(function(n){let o=n[0],a=n[1],l=n[2];e.has(o)||e.set(o,{parents:[],children:[]});let c={ID:a,relationship:l};e.get(o).parents.push(c),e.has(a)||e.set(a,{parents:[],children:[]});let A={ID:o,relationship:l};e.get(a).children.push(A)}),e}parseImages(){let e={},t={};if("Video"in Tt.Objects){let n=Tt.Objects.Video;for(let o in n){let a=n[o],l=parseInt(o);if(e[l]=a.RelativeFilename||a.Filename,"Content"in a){let c=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,A=typeof a.Content=="string"&&a.Content!=="";if(c||A){let u=this.parseImage(n[o]);t[a.RelativeFilename||a.Filename]=u}}}}for(let n in e){let o=e[n];t[o]!==void 0?e[n]=t[o]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){let t=e.Content,n=e.RelativeFilename||e.Filename,o=n.slice(n.lastIndexOf(".")+1).toLowerCase(),a;switch(o){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if(typeof t=="string")return"data:"+a+";base64,"+t;{let l=new Uint8Array(t);return window.URL.createObjectURL(new Blob([l],{type:a}))}}parseTextures(e){let t=new Map;if("Texture"in Tt.Objects){let n=Tt.Objects.Texture;for(let o in n){let a=this.parseTexture(n[o],e);t.set(parseInt(o),a)}}return t}parseTexture(e,t){let n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;let o=e.WrapModeU,a=e.WrapModeV,l=o!==void 0?o.value:0,c=a!==void 0?a.value:0;if(n.wrapS=l===0?_i:Bn,n.wrapT=c===0?_i:Bn,"Scaling"in e){let A=e.Scaling.value;n.repeat.x=A[0],n.repeat.y=A[1]}if("Translation"in e){let A=e.Translation.value;n.offset.x=A[0],n.offset.y=A[1]}return n}loadTexture(e,t){let n,o=this.textureLoader.path,a=kn.get(e.id).children;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(n=t[a[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let l,c=e.FileName.slice(-3).toLowerCase();if(c==="tga"){let A=this.manager.getHandler(".tga");A===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),l=new Vt):(A.setPath(this.textureLoader.path),l=A.load(n))}else c==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),l=new Vt):l=this.textureLoader.load(n);return this.textureLoader.setPath(o),l}parseMaterials(e){let t=new Map;if("Material"in Tt.Objects){let n=Tt.Objects.Material;for(let o in n){let a=this.parseMaterial(n[o],e);a!==null&&t.set(parseInt(o),a)}}return t}parseMaterial(e,t){let n=e.id,o=e.attrName,a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!kn.has(n))return null;let l=this.parseParameters(e,t,n),c;switch(a.toLowerCase()){case"phong":c=new Ys;break;case"lambert":c=new IA;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),c=new Ys;break}return c.setValues(l),c.name=o,c}parseParameters(e,t,n){let o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=new ke().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(o.color=new ke().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=new ke().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(o.emissive=new ke().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=new ke().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(o.specular=new ke().fromArray(e.SpecularColor.value).convertSRGBToLinear());let a=this;return kn.get(n).children.forEach(function(l){let c=l.relationship;switch(c){case"Bump":o.bumpMap=a.getTexture(t,l.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(t,l.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(t,l.ID),o.map!==void 0&&(o.map.colorSpace=nt);break;case"DisplacementColor":o.displacementMap=a.getTexture(t,l.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(t,l.ID),o.emissiveMap!==void 0&&(o.emissiveMap.colorSpace=nt);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(t,l.ID);break;case"ReflectionColor":o.envMap=a.getTexture(t,l.ID),o.envMap!==void 0&&(o.envMap.mapping=Mo,o.envMap.colorSpace=nt);break;case"SpecularColor":o.specularMap=a.getTexture(t,l.ID),o.specularMap!==void 0&&(o.specularMap.colorSpace=nt);break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(t,l.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",c);break}}),o}getTexture(e,t){return"LayeredTexture"in Tt.Objects&&t in Tt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=kn.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in Tt.Objects){let n=Tt.Objects.Deformer;for(let o in n){let a=n[o],l=kn.get(parseInt(o));if(a.attrType==="Skin"){let c=this.parseSkeleton(l,n);c.ID=o,l.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=l.parents[0].ID,e[o]=c}else if(a.attrType==="BlendShape"){let c={id:o};c.rawTargets=this.parseMorphTargets(l,n),c.id=o,l.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[o]=c}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let n=[];return e.children.forEach(function(o){let a=t[o.ID];if(a.attrType!=="Cluster")return;let l={ID:o.ID,indices:[],weights:[],transformLink:new Qe().fromArray(a.TransformLink.a)};"Indexes"in a&&(l.indices=a.Indexes.a,l.weights=a.Weights.a),n.push(l)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){let n=[];for(let o=0;o<e.children.length;o++){let a=e.children[o],l=t[a.ID],c={name:l.attrName,initialWeight:l.DeformPercent,id:l.id,fullWeights:l.FullWeights.a};if(l.attrType!=="BlendShapeChannel")return;c.geoID=kn.get(parseInt(a.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,n.push(c)}return n}parseScene(e,t,n){$i=new cn;let o=this.parseModels(e.skeletons,t,n),a=Tt.Objects.Model,l=this;o.forEach(function(A){let u=a[A.ID];l.setLookAtProperties(A,u),kn.get(A.ID).parents.forEach(function(f){let d=o.get(f.ID);d!==void 0&&d.add(A)}),A.parent===null&&$i.add(A)}),this.bindSkeleton(e.skeletons,t,o),this.createAmbientLight(),$i.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);let u=GB(A.userData.transformData);A.applyMatrix4(u),A.updateWorldMatrix()}});let c=new wb().parse();$i.children.length===1&&$i.children[0].isGroup&&($i.children[0].animations=c,$i=$i.children[0]),$i.animations=c}parseModels(e,t,n){let o=new Map,a=Tt.Objects.Model;for(let l in a){let c=parseInt(l),A=a[l],u=kn.get(c),h=this.buildSkeleton(u,e,c,A.attrName);if(!h){switch(A.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,t,n);break;case"NurbsCurve":h=this.createCurve(u,t);break;case"LimbNode":case"Root":h=new Vs;break;case"Null":default:h=new cn;break}h.name=A.attrName?Bt.sanitizeNodeName(A.attrName):"",h.ID=c}this.getTransformData(h,A),o.set(c,h)}return o}buildSkeleton(e,t,n,o){let a=null;return e.parents.forEach(function(l){for(let c in t){let A=t[c];A.rawBones.forEach(function(u,h){if(u.ID===l.ID){let f=a;a=new Vs,a.matrixWorld.copy(u.transformLink),a.name=o?Bt.sanitizeNodeName(o):"",a.ID=n,A.bones[h]=a,f!==null&&a.add(f)}})}}),a}createCamera(e){let t,n;if(e.children.forEach(function(o){let a=Tt.Objects.NodeAttribute[o.ID];a!==void 0&&(n=a)}),n===void 0)t=new ht;else{let o=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(o=1);let a=1;n.NearPlane!==void 0&&(a=n.NearPlane.value/1e3);let l=1e3;n.FarPlane!==void 0&&(l=n.FarPlane.value/1e3);let c=window.innerWidth,A=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(c=n.AspectWidth.value,A=n.AspectHeight.value);let u=c/A,h=45;n.FieldOfView!==void 0&&(h=n.FieldOfView.value);let f=n.FocalLength?n.FocalLength.value:null;switch(o){case 0:t=new Jt(h,u,a,l),f!==null&&t.setFocalLength(f);break;case 1:t=new Ci(-c/2,c/2,A/2,-A/2,a,l);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),t=new ht;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(o){let a=Tt.Objects.NodeAttribute[o.ID];a!==void 0&&(n=a)}),n===void 0)t=new ht;else{let o;n.LightType===void 0?o=0:o=n.LightType.value;let a=16777215;n.Color!==void 0&&(a=new ke().fromArray(n.Color.value).convertSRGBToLinear());let l=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(l=0);let c=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?c=0:c=n.FarAttenuationEnd.value);let A=1;switch(o){case 0:t=new ds(a,l,c,A);break;case 1:t=new ps(a,l);break;case 2:let u=Math.PI/3;n.InnerAngle!==void 0&&(u=ii.degToRad(n.InnerAngle.value));let h=0;n.OuterAngle!==void 0&&(h=ii.degToRad(n.OuterAngle.value),h=Math.max(h,1)),t=new ba(a,l,c,u,h,A);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new ds(a,l);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let o,a=null,l=null,c=[];return e.children.forEach(function(A){t.has(A.ID)&&(a=t.get(A.ID)),n.has(A.ID)&&c.push(n.get(A.ID))}),c.length>1?l=c:c.length>0?l=c[0]:(l=new Ys({name:An.DEFAULT_MATERIAL_NAME,color:13421772}),c.push(l)),"color"in a.attributes&&c.forEach(function(A){A.vertexColors=!0}),a.FBX_Deformer?(o=new ga(a,l),o.normalizeSkinWeights()):o=new Xe(a,l),o}createCurve(e,t){let n=e.children.reduce(function(a,l){return t.has(l.ID)&&(a=t.get(l.ID)),a},null),o=new Rn({name:An.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new ji(n,o)}getTransformData(e,t){let n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=zB(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&kn.get(e.ID).children.forEach(function(o){if(o.relationship==="LookAtProperty"){let a=Tt.Objects.Model[o.ID];if("Lcl_Translation"in a){let l=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(l),$i.add(e.target)):e.lookAt(new Y().fromArray(l))}}})}bindSkeleton(e,t,n){let o=this.parsePoseNodes();for(let a in e){let l=e[a];kn.get(parseInt(l.ID)).parents.forEach(function(A){if(t.has(A.ID)){let u=A.ID;kn.get(u).parents.forEach(function(f){n.has(f.ID)&&n.get(f.ID).bind(new va(l.bones),o[f.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in Tt.Objects){let t=Tt.Objects.Pose;for(let n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){let o=t[n].PoseNode;Array.isArray(o)?o.forEach(function(a){e[a.Node]=new Qe().fromArray(a.Matrix.a)}):e[o.Node]=new Qe().fromArray(o.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Tt&&"AmbientColor"in Tt.GlobalSettings){let e=Tt.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],o=e[2];if(t!==0||n!==0||o!==0){let a=new ke(t,n,o).convertSRGBToLinear();$i.add(new Ca(a,1))}}}},xb=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in Tt.Objects){let n=Tt.Objects.Geometry;for(let o in n){let a=kn.get(parseInt(o)),l=this.parseGeometry(a,n[o],e);t.set(parseInt(o),l)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){let o=n.skeletons,a=[],l=e.parents.map(function(f){return Tt.Objects.Model[f.ID]});if(l.length===0)return;let c=e.children.reduce(function(f,d){return o[d.ID]!==void 0&&(f=o[d.ID]),f},null);e.children.forEach(function(f){n.morphTargets[f.ID]!==void 0&&a.push(n.morphTargets[f.ID])});let A=l[0],u={};"RotationOrder"in A&&(u.eulerOrder=zB(A.RotationOrder.value)),"InheritType"in A&&(u.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(u.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(u.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(u.scale=A.GeometricScaling.value);let h=GB(u);return this.genGeometry(t,c,a,h)}genGeometry(e,t,n,o){let a=new qe;e.attrName&&(a.name=e.attrName);let l=this.parseGeoNode(e,t),c=this.genBuffers(l),A=new He(c.vertex,3);if(A.applyMatrix4(o),a.setAttribute("position",A),c.colors.length>0&&a.setAttribute("color",new He(c.colors,3)),t&&(a.setAttribute("skinIndex",new _l(c.weightsIndices,4)),a.setAttribute("skinWeight",new He(c.vertexWeights,4)),a.FBX_Deformer=t),c.normal.length>0){let u=new dt().getNormalMatrix(o),h=new He(c.normal,3);h.applyNormalMatrix(u),a.setAttribute("normal",h)}if(c.uvs.forEach(function(u,h){let f=h===0?"uv":`uv${h}`;a.setAttribute(f,new He(c.uvs[h],2))}),l.material&&l.material.mappingType!=="AllSame"){let u=c.materialIndex[0],h=0;if(c.materialIndex.forEach(function(f,d){f!==u&&(a.addGroup(h,d-h,u),u=f,h=d)}),a.groups.length>0){let f=a.groups[a.groups.length-1],d=f.start+f.count;d!==c.materialIndex.length&&a.addGroup(d,c.materialIndex.length-d,u)}a.groups.length===0&&a.addGroup(0,c.materialIndex.length,c.materialIndex[0])}return this.addMorphTargets(a,e,n,o),a}parseGeoNode(e,t){let n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let o=0;for(;e.LayerElementUV[o];)e.LayerElementUV[o].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[o])),o++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(o,a){o.indices.forEach(function(l,c){n.weightTable[l]===void 0&&(n.weightTable[l]=[]),n.weightTable[l].push({id:a,weight:o.weights[c]})})})),n}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,o=0,a=!1,l=[],c=[],A=[],u=[],h=[],f=[],d=this;return e.vertexIndices.forEach(function(p,m){let b,g=!1;p<0&&(p=p^-1,g=!0);let w=[],I=[];if(l.push(p*3,p*3+1,p*3+2),e.color){let v=mg(m,n,p,e.color);A.push(v[0],v[1],v[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(v){I.push(v.weight),w.push(v.id)}),I.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);let v=[0,0,0,0],E=[0,0,0,0];I.forEach(function(S,C){let M=S,D=w[C];E.forEach(function(T,B,R){if(M>T){R[B]=M,M=T;let P=v[B];v[B]=D,D=P}})}),w=v,I=E}for(;I.length<4;)I.push(0),w.push(0);for(let v=0;v<4;++v)h.push(I[v]),f.push(w[v])}if(e.normal){let v=mg(m,n,p,e.normal);c.push(v[0],v[1],v[2])}e.material&&e.material.mappingType!=="AllSame"&&(b=mg(m,n,p,e.material)[0],b<0&&(d.negativeMaterialIndices=!0,b=0)),e.uv&&e.uv.forEach(function(v,E){let S=mg(m,n,p,v);u[E]===void 0&&(u[E]=[]),u[E].push(S[0]),u[E].push(S[1])}),o++,g&&(o>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),d.genFace(t,e,l,b,c,A,u,h,f,o),n++,o=0,l=[],c=[],A=[],u=[],h=[],f=[])}),t}genFace(e,t,n,o,a,l,c,A,u,h){for(let f=2;f<h;f++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(f-1)*3]]),e.vertex.push(t.vertexPositions[n[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[n[f*3]]),e.vertex.push(t.vertexPositions[n[f*3+1]]),e.vertex.push(t.vertexPositions[n[f*3+2]]),t.skeleton&&(e.vertexWeights.push(A[0]),e.vertexWeights.push(A[1]),e.vertexWeights.push(A[2]),e.vertexWeights.push(A[3]),e.vertexWeights.push(A[(f-1)*4]),e.vertexWeights.push(A[(f-1)*4+1]),e.vertexWeights.push(A[(f-1)*4+2]),e.vertexWeights.push(A[(f-1)*4+3]),e.vertexWeights.push(A[f*4]),e.vertexWeights.push(A[f*4+1]),e.vertexWeights.push(A[f*4+2]),e.vertexWeights.push(A[f*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(f-1)*4]),e.weightsIndices.push(u[(f-1)*4+1]),e.weightsIndices.push(u[(f-1)*4+2]),e.weightsIndices.push(u[(f-1)*4+3]),e.weightsIndices.push(u[f*4]),e.weightsIndices.push(u[f*4+1]),e.weightsIndices.push(u[f*4+2]),e.weightsIndices.push(u[f*4+3])),t.color&&(e.colors.push(l[0]),e.colors.push(l[1]),e.colors.push(l[2]),e.colors.push(l[(f-1)*3]),e.colors.push(l[(f-1)*3+1]),e.colors.push(l[(f-1)*3+2]),e.colors.push(l[f*3]),e.colors.push(l[f*3+1]),e.colors.push(l[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(o),e.materialIndex.push(o),e.materialIndex.push(o)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[(f-1)*3]),e.normal.push(a[(f-1)*3+1]),e.normal.push(a[(f-1)*3+2]),e.normal.push(a[f*3]),e.normal.push(a[f*3+1]),e.normal.push(a[f*3+2])),t.uv&&t.uv.forEach(function(d,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(c[p][0]),e.uvs[p].push(c[p][1]),e.uvs[p].push(c[p][(f-1)*2]),e.uvs[p].push(c[p][(f-1)*2+1]),e.uvs[p].push(c[p][f*2]),e.uvs[p].push(c[p][f*2+1])})}addMorphTargets(e,t,n,o){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let a=this;n.forEach(function(l){l.rawTargets.forEach(function(c){let A=Tt.Objects.Geometry[c.geoID];A!==void 0&&a.genMorphGeometry(e,t,A,o,c.name)})})}genMorphGeometry(e,t,n,o,a){let l=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],c=n.Vertices!==void 0?n.Vertices.a:[],A=n.Indexes!==void 0?n.Indexes.a:[],u=e.attributes.position.count*3,h=new Float32Array(u);for(let m=0;m<A.length;m++){let b=A[m]*3;h[b]=c[m*3],h[b+1]=c[m*3+1],h[b+2]=c[m*3+2]}let f={vertexIndices:l,vertexPositions:h},d=this.genBuffers(f),p=new He(d.vertex,3);p.name=a||n.attrName,p.applyMatrix4(o),e.morphAttributes.position.push(p)}parseNormals(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,o=e.Normals.a,a=[];return n==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:o,indices:a,mappingType:t,referenceType:n}}parseUVs(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,o=e.UV.a,a=[];return n==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:o,indices:a,mappingType:t,referenceType:n}}parseVertexColors(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,o=e.Colors.a,a=[];n==="IndexToDirect"&&(a=e.ColorIndex.a);for(let l=0,c=new ke;l<o.length;l+=4)c.fromArray(o,l).convertSRGBToLinear().toArray(o,l);return{dataSize:4,buffer:o,indices:a,mappingType:t,referenceType:n}}parseMaterialIndices(e){let t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};let o=e.Materials.a,a=[];for(let l=0;l<o.length;++l)a.push(l);return{dataSize:1,buffer:o,indices:a,mappingType:t,referenceType:n}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new qe;let n=t-1,o=e.KnotVector.a,a=[],l=e.Points.a;for(let f=0,d=l.length;f<d;f+=4)a.push(new Ct().fromArray(l,f));let c,A;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){c=n,A=o.length-1-c;for(let f=0;f<n;++f)a.push(a[f])}let h=new pg(n,o,a,c,A).getPoints(a.length*12);return new qe().setFromPoints(h)}},wb=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let n in t){let o=t[n],a=this.addClip(o);e.push(a)}return e}parseClips(){if(Tt.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=Tt.Objects.AnimationCurveNode,t=new Map;for(let n in e){let o=e[n];if(o.attrName.match(/S|R|T|DeformPercent/)!==null){let a={id:o.id,attr:o.attrName,curves:{}};t.set(a.id,a)}}return t}parseAnimationCurves(e){let t=Tt.Objects.AnimationCurve;for(let n in t){let o={id:t[n].id,times:t[n].KeyTime.a.map(sW),values:t[n].KeyValueFloat.a},a=kn.get(o.id);if(a!==void 0){let l=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?e.get(l).curves.x=o:c.match(/Y/)?e.get(l).curves.y=o:c.match(/Z/)?e.get(l).curves.z=o:c.match(/DeformPercent/)&&e.has(l)&&(e.get(l).curves.morph=o)}}}parseAnimationLayers(e){let t=Tt.Objects.AnimationLayer,n=new Map;for(let o in t){let a=[],l=kn.get(parseInt(o));l!==void 0&&(l.children.forEach(function(A,u){if(e.has(A.ID)){let h=e.get(A.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(a[u]===void 0){let f=kn.get(A.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(f!==void 0){let d=Tt.Objects.Model[f.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",A);return}let p={modelName:d.attrName?Bt.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};$i.traverse(function(m){m.ID===d.id&&(p.transform=m.matrix,m.userData.transformData&&(p.eulerOrder=m.userData.transformData.eulerOrder))}),p.transform||(p.transform=new Qe),"PreRotation"in d&&(p.preRotation=d.PreRotation.value),"PostRotation"in d&&(p.postRotation=d.PostRotation.value),a[u]=p}}a[u]&&(a[u][h.attr]=h)}else if(h.curves.morph!==void 0){if(a[u]===void 0){let f=kn.get(A.ID).parents.filter(function(w){return w.relationship!==void 0})[0].ID,d=kn.get(f).parents[0].ID,p=kn.get(d).parents[0].ID,m=kn.get(p).parents[0].ID,b=Tt.Objects.Model[m],g={modelName:b.attrName?Bt.sanitizeNodeName(b.attrName):"",morphName:Tt.Objects.Deformer[f].attrName};a[u]=g}a[u][h.attr]=h}}}),n.set(parseInt(o),a))}return n}parseAnimStacks(e){let t=Tt.Objects.AnimationStack,n={};for(let o in t){let a=kn.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let l=e.get(a[0].ID);n[o]={name:t[o].attrName,layer:l}}return n}addClip(e){let t=[],n=this;return e.layer.forEach(function(o){t=t.concat(n.generateTracks(o))}),new fs(e.name,-1,t)}generateTracks(e){let t=[],n=new Y,o=new Lt,a=new Y;if(e.transform&&e.transform.decompose(n,o,a),n=n.toArray(),o=new Ki().setFromQuaternion(o,e.eulerOrder).toArray(),a=a.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let l=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");l!==void 0&&t.push(l)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let l=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotation,e.postRotation,e.eulerOrder);l!==void 0&&t.push(l)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let l=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");l!==void 0&&t.push(l)}if(e.DeformPercent!==void 0){let l=this.generateMorphTrack(e);l!==void 0&&t.push(l)}return t}generateVectorTrack(e,t,n,o){let a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);return new hs(e+"."+o,a,l)}generateRotationTrack(e,t,n,o,a,l){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(ii.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(ii.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(ii.degToRad));let c=this.getTimesForAllAxes(t),A=this.getKeyframeTrackValues(c,t,n);o!==void 0&&(o=o.map(ii.degToRad),o.push(l),o=new Ki().fromArray(o),o=new Lt().setFromEuler(o)),a!==void 0&&(a=a.map(ii.degToRad),a.push(l),a=new Ki().fromArray(a),a=new Lt().setFromEuler(a).invert());let u=new Lt,h=new Ki,f=[];for(let d=0;d<A.length;d+=3)h.set(A[d],A[d+1],A[d+2],l),u.setFromEuler(h),o!==void 0&&u.premultiply(o),a!==void 0&&u.multiply(a),u.toArray(f,d/3*4);return new wr(e+".quaternion",c,f)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,n=t.values.map(function(a){return a/100}),o=$i.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new zr(e.modelName+".morphTargetInfluences["+o+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,o){return n-o}),t.length>1){let n=1,o=t[0];for(let a=1;a<t.length;a++){let l=t[a];l!==o&&(t[n]=l,o=l,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){let o=n,a=[],l=-1,c=-1,A=-1;return e.forEach(function(u){if(t.x&&(l=t.x.times.indexOf(u)),t.y&&(c=t.y.times.indexOf(u)),t.z&&(A=t.z.times.indexOf(u)),l!==-1){let h=t.x.values[l];a.push(h),o[0]=h}else a.push(o[0]);if(c!==-1){let h=t.y.values[c];a.push(h),o[1]=h}else a.push(o[1]);if(A!==-1){let h=t.z.values[A];a.push(h),o[2]=h}else a.push(o[2])}),a}interpolateRotations(e){for(let t=1;t<e.values.length;t++){let n=e.values[t-1],o=e.values[t]-n,a=Math.abs(o);if(a>=180){let l=a/180,c=o/l,A=n+c,u=e.times[t-1],f=(e.times[t]-u)/l,d=u+f,p=[],m=[];for(;d<e.times[t];)p.push(d),d+=f,m.push(A),A+=c;e.times=OB(e.times,t,p),e.values=OB(e.values,t,m)}}}},bb=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new yg,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,n=e.split(/[\r\n]+/);return n.forEach(function(o,a){let l=o.match(/^[\s\t]*;/),c=o.match(/^[\s\t]*$/);if(l||c)return;let A=o.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=o.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=o.match("^\\t{"+(t.currentIndent-1)+"}}");A?t.parseNodeBegin(o,A):u?t.parseNodeProperty(o,u,n[++a]):h?t.popStack():o.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(o)}),this.allNodes}parseNodeBegin(e,t){let n=t[1].trim().replace(/^"/,"").replace(/"$/,""),o=t[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:n},l=this.parseNodeAttr(o),c=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,a):n in c?(n==="PoseNode"?c.PoseNode.push(a):c[n].id!==void 0&&(c[n]={},c[n][c[n].id]=c[n]),l.id!==""&&(c[n][l.id]=a)):typeof l.id=="number"?(c[n]={},c[n][l.id]=a):n!=="Properties70"&&(n==="PoseNode"?c[n]=[a]:c[n]=a),typeof l.id=="number"&&(a.id=l.id),l.name!==""&&(a.attrName=l.name),l.type!==""&&(a.attrType=l.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",o="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),o=e[2]),{id:t,name:n,type:o}}parseNodeProperty(e,t,n){let o=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();o==="Content"&&a===","&&(a=n.replace(/"/g,"").replace(/,$/,"").trim());let l=this.getCurrentNode();if(l.name==="Properties70"){this.parseNodeSpecialProperty(e,o,a);return}if(o==="C"){let A=a.split(",").slice(1),u=parseInt(A[0]),h=parseInt(A[1]),f=a.split(",").slice(3);f=f.map(function(d){return d.trim().replace(/^"/,"")}),o="connections",a=[u,h],aW(a,f),l[o]===void 0&&(l[o]=[])}o==="Node"&&(l.id=a),o in l&&Array.isArray(l[o])?l[o].push(a):o!=="a"?l[o]=a:l.a=a,this.setCurrentProp(l,o),o==="a"&&a.slice(-1)!==","&&(l.a=vb(a))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=vb(t.a))}parseNodeSpecialProperty(e,t,n){let o=n.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=o[0],l=o[1],c=o[2],A=o[3],u=o[4];switch(l){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=vb(u);break}this.getPrevNode()[a]={type:l,type2:c,flag:A,value:u},this.setCurrentProp(this.getPrevNode(),a)}},Cb=class{parse(e){let t=new vg(e);t.skip(23);let n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);let o=new yg;for(;!this.endOfContent(t);){let a=this.parseNode(t,n);a!==null&&o.add(a.name,a)}return o}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let n={},o=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let l=e.getUint8(),c=e.getString(l);if(o===0)return null;let A=[];for(let d=0;d<a;d++)A.push(this.parseProperty(e));let u=A.length>0?A[0]:"",h=A.length>1?A[1]:"",f=A.length>2?A[2]:"";for(n.singleProperty=a===1&&e.getOffset()===o;o>e.getOffset();){let d=this.parseNode(e,t);d!==null&&this.parseSubNode(c,n,d)}return n.propertyList=A,typeof u=="number"&&(n.id=u),h!==""&&(n.attrName=h),f!==""&&(n.attrType=f),c!==""&&(n.name=c),n}parseSubNode(e,t,n){if(n.singleProperty===!0){let o=n.propertyList[0];Array.isArray(o)?(t[n.name]=n,n.a=o):t[n.name]=o}else if(e==="Connections"&&n.name==="C"){let o=[];n.propertyList.forEach(function(a,l){l!==0&&o.push(a)}),t.connections===void 0&&(t.connections=[]),t.connections.push(o)}else if(n.name==="Properties70")Object.keys(n).forEach(function(a){t[a]=n[a]});else if(e==="Properties70"&&n.name==="P"){let o=n.propertyList[0],a=n.propertyList[1],l=n.propertyList[2],c=n.propertyList[3],A;o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?A=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:A=n.propertyList[4],t[o]={type:a,type2:l,flag:c,value:A}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){let t=e.getString(1),n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let o=e.getUint32(),a=e.getUint32(),l=e.getUint32();if(a===0)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}let c=PB(new Uint8Array(e.getArrayBuffer(l))),A=new vg(c.buffer);switch(t){case"b":case"c":return A.getBooleanArray(o);case"d":return A.getFloat64Array(o);case"f":return A.getFloat32Array(o);case"i":return A.getInt32Array(o);case"l":return A.getInt64Array(o)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},vg=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let o=n.indexOf(0);return o>=0&&(n=new Uint8Array(this.dv.buffer,t,o)),this._textDecoder.decode(n)}},yg=class{add(e,t){this[e]=t}};function iW(i){let e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===HB(i,0,e.length)}function rW(i){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function n(o){let a=i[o-1];return i=i.slice(t+o),t++,a}for(let o=0;o<e.length;++o)if(n(1)===e[o])return!1;return!0}function UB(i){let e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function sW(i){return i/46186158e3}var oW=[];function mg(i,e,t,n){let o;switch(n.mappingType){case"ByPolygonVertex":o=i;break;case"ByPolygon":o=e;break;case"ByVertice":o=t;break;case"AllSame":o=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(o=n.indices[o]);let a=o*n.dataSize,l=a+n.dataSize;return lW(oW,n.buffer,a,l)}var gb=new Ki,PA=new Y;function GB(i){let e=new Qe,t=new Qe,n=new Qe,o=new Qe,a=new Qe,l=new Qe,c=new Qe,A=new Qe,u=new Qe,h=new Qe,f=new Qe,d=new Qe,p=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(PA.fromArray(i.translation)),i.preRotation){let B=i.preRotation.map(ii.degToRad);B.push(i.eulerOrder||Ki.DEFAULT_ORDER),t.makeRotationFromEuler(gb.fromArray(B))}if(i.rotation){let B=i.rotation.map(ii.degToRad);B.push(i.eulerOrder||Ki.DEFAULT_ORDER),n.makeRotationFromEuler(gb.fromArray(B))}if(i.postRotation){let B=i.postRotation.map(ii.degToRad);B.push(i.eulerOrder||Ki.DEFAULT_ORDER),o.makeRotationFromEuler(gb.fromArray(B)),o.invert()}i.scale&&a.scale(PA.fromArray(i.scale)),i.scalingOffset&&c.setPosition(PA.fromArray(i.scalingOffset)),i.scalingPivot&&l.setPosition(PA.fromArray(i.scalingPivot)),i.rotationOffset&&A.setPosition(PA.fromArray(i.rotationOffset)),i.rotationPivot&&u.setPosition(PA.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(f.copy(i.parentMatrix),h.copy(i.parentMatrixWorld));let m=t.clone().multiply(n).multiply(o),b=new Qe;b.extractRotation(h);let g=new Qe;g.copyPosition(h);let w=g.clone().invert().multiply(h),I=b.clone().invert().multiply(w),v=a,E=new Qe;if(p===0)E.copy(b).multiply(m).multiply(I).multiply(v);else if(p===1)E.copy(b).multiply(I).multiply(m).multiply(v);else{let R=new Qe().scale(new Y().setFromMatrixScale(f)).clone().invert(),P=I.clone().multiply(R);E.copy(b).multiply(m).multiply(P).multiply(v)}let S=u.clone().invert(),C=l.clone().invert(),M=e.clone().multiply(A).multiply(u).multiply(t).multiply(n).multiply(o).multiply(S).multiply(c).multiply(l).multiply(a).multiply(C),D=new Qe().copyPosition(M),T=h.clone().multiply(D);return d.copyPosition(T),M=d.clone().multiply(E),M.premultiply(h.invert()),M}function zB(i){i=i||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function vb(i){return i.split(",").map(function(t){return parseFloat(t)})}function HB(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),new TextDecoder().decode(new Uint8Array(i,e,t))}function aW(i,e){for(let t=0,n=i.length,o=e.length;t<o;t++,n++)i[n]=e[t]}function lW(i,e,t,n){for(let o=t,a=0;o<n;o++,a++)i[a]=e[o];return i}function OB(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}var Sb={};fl(Sb,{computeMikkTSpaceTangents:()=>cW,computeMorphedAttributes:()=>pW,deepCloneAttribute:()=>AW,deinterleaveAttribute:()=>wg,deinterleaveGeometry:()=>hW,estimateBytesUsed:()=>fW,interleaveAttributes:()=>uW,mergeAttributes:()=>xg,mergeBufferAttributes:()=>yW,mergeBufferGeometries:()=>vW,mergeGeometries:()=>WB,mergeGroups:()=>mW,mergeVertices:()=>dW,toCreasedNormals:()=>gW,toTrianglesDrawMode:()=>bg});function cW(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(l){if(l.normalized||l.isInterleavedBufferAttribute){let c=new Float32Array(l.count*l.itemSize);for(let A=0,u=0;A<l.count;A++)c[u++]=l.getX(A),c[u++]=l.getY(A),l.itemSize>2&&(c[u++]=l.getZ(A));return c}return l.array instanceof Float32Array?l.array:new Float32Array(l.array)}let o=i.index?i.toNonIndexed():i,a=e.generateTangents(n(o.attributes.position),n(o.attributes.normal),n(o.attributes.uv));if(t)for(let l=3;l<a.length;l+=4)a[l]*=-1;return o.setAttribute("tangent",new it(a,4)),i!==o&&i.copy(o),i}function WB(i,e=!1){let t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),o=new Set(Object.keys(i[0].morphAttributes)),a={},l={},c=i[0].morphTargetsRelative,A=new qe,u=0;for(let h=0;h<i.length;++h){let f=i[h],d=0;if(t!==(f.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in f.attributes){if(!n.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;a[p]===void 0&&(a[p]=[]),a[p].push(f.attributes[p]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(c!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in f.morphAttributes){if(!o.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;l[p]===void 0&&(l[p]=[]),l[p].push(f.morphAttributes[p])}if(e){let p;if(t)p=f.index.count;else if(f.attributes.position!==void 0)p=f.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;A.addGroup(u,p,h),u+=p}}if(t){let h=0,f=[];for(let d=0;d<i.length;++d){let p=i[d].index;for(let m=0;m<p.count;++m)f.push(p.getX(m)+h);h+=i[d].attributes.position.count}A.setIndex(f)}for(let h in a){let f=xg(a[h]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+h+" attribute."),null;A.setAttribute(h,f)}for(let h in l){let f=l[h][0].length;if(f===0)break;A.morphAttributes=A.morphAttributes||{},A.morphAttributes[h]=[];for(let d=0;d<f;++d){let p=[];for(let b=0;b<l[h].length;++b)p.push(l[h][b][d]);let m=xg(p);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+h+" morphAttribute."),null;A.morphAttributes[h].push(m)}}return A}function xg(i){let e,t,n,o=-1,a=0;for(let u=0;u<i.length;++u){let h=i[u];if(h.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=h.array.constructor),e!==h.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=h.itemSize),t!==h.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=h.normalized),n!==h.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(o===-1&&(o=h.gpuType),o!==h.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=h.array.length}let l=new e(a),c=0;for(let u=0;u<i.length;++u)l.set(i[u].array,c),c+=i[u].array.length;let A=new it(l,t,n);return o!==void 0&&(A.gpuType=o),A}function AW(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?wg(i):i.isInstancedBufferAttribute?new vr().copy(i):new it().copy(i)}function uW(i){let e,t=0,n=0;for(let u=0,h=i.length;u<h;++u){let f=i[u];if(e===void 0&&(e=f.array.constructor),e!==f.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=f.array.length,n+=f.itemSize}let o=new Ji(new e(t),n),a=0,l=[],c=["getX","getY","getZ","getW"],A=["setX","setY","setZ","setW"];for(let u=0,h=i.length;u<h;u++){let f=i[u],d=f.itemSize,p=f.count,m=new Ln(o,d,a,f.normalized);l.push(m),a+=d;for(let b=0;b<p;b++)for(let g=0;g<d;g++)m[A[g]](b,f[c[g]](b))}return l}function wg(i){let e=i.data.array.constructor,t=i.count,n=i.itemSize,o=i.normalized,a=new e(t*n),l;i.isInstancedInterleavedBufferAttribute?l=new vr(a,n,o,i.meshPerAttribute):l=new it(a,n,o);for(let c=0;c<t;c++)l.setX(c,i.getX(c)),n>=2&&l.setY(c,i.getY(c)),n>=3&&l.setZ(c,i.getZ(c)),n>=4&&l.setW(c,i.getW(c));return l}function hW(i){let e=i.attributes,t=i.morphTargets,n=new Map;for(let o in e){let a=e[o];a.isInterleavedBufferAttribute&&(n.has(a)||n.set(a,wg(a)),e[o]=n.get(a))}for(let o in t){let a=t[o];a.isInterleavedBufferAttribute&&(n.has(a)||n.set(a,wg(a)),t[o]=n.get(a))}}function fW(i){let e=0;for(let n in i.attributes){let o=i.getAttribute(n);e+=o.count*o.itemSize*o.array.BYTES_PER_ELEMENT}let t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function dW(i,e=1e-4){e=Math.max(e,Number.EPSILON);let t={},n=i.getIndex(),o=i.getAttribute("position"),a=n?n.count:o.count,l=0,c=Object.keys(i.attributes),A={},u={},h=[],f=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let g=0,w=c.length;g<w;g++){let I=c[g],v=i.attributes[I];A[I]=new it(new v.array.constructor(v.count*v.itemSize),v.itemSize,v.normalized);let E=i.morphAttributes[I];E&&(u[I]=new it(new E.array.constructor(E.count*E.itemSize),E.itemSize,E.normalized))}let p=Math.log10(1/e),m=Math.pow(10,p);for(let g=0;g<a;g++){let w=n?n.getX(g):g,I="";for(let v=0,E=c.length;v<E;v++){let S=c[v],C=i.getAttribute(S),M=C.itemSize;for(let D=0;D<M;D++)I+=`${~~(C[f[D]](w)*m)},`}if(I in t)h.push(t[I]);else{for(let v=0,E=c.length;v<E;v++){let S=c[v],C=i.getAttribute(S),M=i.morphAttributes[S],D=C.itemSize,T=A[S],B=u[S];for(let R=0;R<D;R++){let P=f[R],_=d[R];if(T[_](l,C[P](w)),M)for(let Q=0,W=M.length;Q<W;Q++)B[Q][_](l,M[Q][P](w))}}t[I]=l,h.push(l),l++}}let b=i.clone();for(let g in i.attributes){let w=A[g];if(b.setAttribute(g,new it(w.array.slice(0,l*w.itemSize),w.itemSize,w.normalized)),g in u)for(let I=0;I<u[g].length;I++){let v=u[g][I];b.morphAttributes[g][I]=new it(v.array.slice(0,l*v.itemSize),v.itemSize,v.normalized)}}return b.setIndex(h),b}function bg(i,e){if(e===nb)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===LA||e===af){let t=i.getIndex();if(t===null){let l=[],c=i.getAttribute("position");if(c!==void 0){for(let A=0;A<c.count;A++)l.push(A);i.setIndex(l),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}let n=t.count-2,o=[];if(e===LA)for(let l=1;l<=n;l++)o.push(t.getX(0)),o.push(t.getX(l)),o.push(t.getX(l+1));else for(let l=0;l<n;l++)l%2===0?(o.push(t.getX(l)),o.push(t.getX(l+1)),o.push(t.getX(l+2))):(o.push(t.getX(l+2)),o.push(t.getX(l+1)),o.push(t.getX(l)));o.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let a=i.clone();return a.setIndex(o),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function pW(i){let e=new Y,t=new Y,n=new Y,o=new Y,a=new Y,l=new Y,c=new Y,A=new Y,u=new Y;function h(F,z,k,X,te,ie,re,se){e.fromBufferAttribute(z,te),t.fromBufferAttribute(z,ie),n.fromBufferAttribute(z,re);let oe=F.morphTargetInfluences;if(k&&oe){c.set(0,0,0),A.set(0,0,0),u.set(0,0,0);for(let le=0,be=k.length;le<be;le++){let De=oe[le],pe=k[le];De!==0&&(o.fromBufferAttribute(pe,te),a.fromBufferAttribute(pe,ie),l.fromBufferAttribute(pe,re),X?(c.addScaledVector(o,De),A.addScaledVector(a,De),u.addScaledVector(l,De)):(c.addScaledVector(o.sub(e),De),A.addScaledVector(a.sub(t),De),u.addScaledVector(l.sub(n),De)))}e.add(c),t.add(A),n.add(u)}F.isSkinnedMesh&&(F.applyBoneTransform(te,e),F.applyBoneTransform(ie,t),F.applyBoneTransform(re,n)),se[te*3+0]=e.x,se[te*3+1]=e.y,se[te*3+2]=e.z,se[ie*3+0]=t.x,se[ie*3+1]=t.y,se[ie*3+2]=t.z,se[re*3+0]=n.x,se[re*3+1]=n.y,se[re*3+2]=n.z}let f=i.geometry,d=i.material,p,m,b,g=f.index,w=f.attributes.position,I=f.morphAttributes.position,v=f.morphTargetsRelative,E=f.attributes.normal,S=f.morphAttributes.position,C=f.groups,M=f.drawRange,D,T,B,R,P,_,Q,W=new Float32Array(w.count*w.itemSize),U=new Float32Array(E.count*E.itemSize);if(g!==null)if(Array.isArray(d))for(D=0,B=C.length;D<B;D++)for(P=C[D],_=Math.max(P.start,M.start),Q=Math.min(P.start+P.count,M.start+M.count),T=_,R=Q;T<R;T+=3)p=g.getX(T),m=g.getX(T+1),b=g.getX(T+2),h(i,w,I,v,p,m,b,W),h(i,E,S,v,p,m,b,U);else for(_=Math.max(0,M.start),Q=Math.min(g.count,M.start+M.count),D=_,B=Q;D<B;D+=3)p=g.getX(D),m=g.getX(D+1),b=g.getX(D+2),h(i,w,I,v,p,m,b,W),h(i,E,S,v,p,m,b,U);else if(Array.isArray(d))for(D=0,B=C.length;D<B;D++)for(P=C[D],_=Math.max(P.start,M.start),Q=Math.min(P.start+P.count,M.start+M.count),T=_,R=Q;T<R;T+=3)p=T,m=T+1,b=T+2,h(i,w,I,v,p,m,b,W),h(i,E,S,v,p,m,b,U);else for(_=Math.max(0,M.start),Q=Math.min(w.count,M.start+M.count),D=_,B=Q;D<B;D+=3)p=D,m=D+1,b=D+2,h(i,w,I,v,p,m,b,W),h(i,E,S,v,p,m,b,U);let H=new He(W,3),O=new He(U,3);return{positionAttribute:w,normalAttribute:E,morphedPositionAttribute:H,morphedNormalAttribute:O}}function mW(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((l,c)=>l.materialIndex!==c.materialIndex?l.materialIndex-c.materialIndex:l.start-c.start),i.getIndex()===null){let l=i.getAttribute("position"),c=[];for(let A=0;A<l.count;A+=3)c.push(A,A+1,A+2);i.setIndex(c)}let t=i.getIndex(),n=[];for(let l=0;l<e.length;l++){let c=e[l],A=c.start,u=A+c.count;for(let h=A;h<u;h++)n.push(t.getX(h))}i.dispose(),i.setIndex(n);let o=0;for(let l=0;l<e.length;l++){let c=e[l];c.start=o,o+=c.count}let a=e[0];i.groups=[a];for(let l=1;l<e.length;l++){let c=e[l];a.materialIndex===c.materialIndex?a.count+=c.count:(a=c,i.groups.push(a))}return i}function gW(i,e=Math.PI/3){let t=Math.cos(e),n=(1+1e-10)*100,o=[new Y,new Y,new Y],a=new Y,l=new Y,c=new Y,A=new Y;function u(b){let g=~~(b.x*n),w=~~(b.y*n),I=~~(b.z*n);return`${g},${w},${I}`}let h=i.index?i.toNonIndexed():i,f=h.attributes.position,d={};for(let b=0,g=f.count/3;b<g;b++){let w=3*b,I=o[0].fromBufferAttribute(f,w+0),v=o[1].fromBufferAttribute(f,w+1),E=o[2].fromBufferAttribute(f,w+2);a.subVectors(E,v),l.subVectors(I,v);let S=new Y().crossVectors(a,l).normalize();for(let C=0;C<3;C++){let M=o[C],D=u(M);D in d||(d[D]=[]),d[D].push(S)}}let p=new Float32Array(f.count*3),m=new it(p,3,!1);for(let b=0,g=f.count/3;b<g;b++){let w=3*b,I=o[0].fromBufferAttribute(f,w+0),v=o[1].fromBufferAttribute(f,w+1),E=o[2].fromBufferAttribute(f,w+2);a.subVectors(E,v),l.subVectors(I,v),c.crossVectors(a,l).normalize();for(let S=0;S<3;S++){let C=o[S],M=u(C),D=d[M];A.set(0,0,0);for(let T=0,B=D.length;T<B;T++){let R=D[T];c.dot(R)>t&&A.add(R)}A.normalize(),m.setXYZ(w+S,A.x,A.y,A.z)}}return h.setAttribute("normal",m),h}function vW(i,e=!1){return console.warn("THREE.BufferGeometryUtils: mergeBufferGeometries() has been renamed to mergeGeometries()."),WB(i,e)}function yW(i){return console.warn("THREE.BufferGeometryUtils: mergeBufferAttributes() has been renamed to mergeAttributes()."),xg(i)}var uf=class extends An{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Lb(t)}),this.register(function(t){return new Ub(t)}),this.register(function(t){return new Ob(t)}),this.register(function(t){return new Gb(t)}),this.register(function(t){return new kb(t)}),this.register(function(t){return new Pb(t)}),this.register(function(t){return new _b(t)}),this.register(function(t){return new Nb(t)}),this.register(function(t){return new Bb(t)}),this.register(function(t){return new Fb(t)}),this.register(function(t){return new Rb(t)}),this.register(function(t){return new Qb(t)}),this.register(function(t){return new Tb(t)}),this.register(function(t){return new zb(t)}),this.register(function(t){return new Hb(t)})}load(e,t,n,o){let a=this,l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=ms.extractUrlBase(e),this.manager.itemStart(e);let c=function(u){o?o(u):console.error(u),a.manager.itemError(e),a.manager.itemEnd(e)},A=new Jn(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(u){try{a.parse(u,l,function(h){t(h),a.manager.itemEnd(e)},c)}catch(h){c(h)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,o){let a,l={},c={},A=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(A.decode(new Uint8Array(e,0,4))===KB){try{l[Pt.KHR_BINARY_GLTF]=new Wb(e)}catch(f){o&&o(f);return}a=JSON.parse(l[Pt.KHR_BINARY_GLTF].content)}else a=JSON.parse(A.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new jb(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){let f=this.pluginCallbacks[h](u);c[f.name]=f,l[f.name]=!0}if(a.extensionsUsed)for(let h=0;h<a.extensionsUsed.length;++h){let f=a.extensionsUsed[h],d=a.extensionsRequired||[];switch(f){case Pt.KHR_MATERIALS_UNLIT:l[f]=new Db;break;case Pt.KHR_DRACO_MESH_COMPRESSION:l[f]=new Vb(a,this.dracoLoader);break;case Pt.KHR_TEXTURE_TRANSFORM:l[f]=new Xb;break;case Pt.KHR_MESH_QUANTIZATION:l[f]=new Yb;break;default:d.indexOf(f)>=0&&c[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(l),u.setPlugins(c),u.parse(n,o)}parseAsync(e,t){let n=this;return new Promise(function(o,a){n.parse(e,t,o,a)})}};function xW(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}var Pt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Tb=class{constructor(e){this.parser=e,this.name=Pt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,o=t.length;n<o;n++){let a=t[n];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){let t=this.parser,n="light:"+e,o=t.cache.get(n);if(o)return o;let a=t.json,A=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],u,h=new ke(16777215);A.color!==void 0&&h.fromArray(A.color);let f=A.range!==void 0?A.range:0;switch(A.type){case"directional":u=new ps(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new ds(h),u.distance=f;break;case"spot":u=new ba(h),u.distance=f,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,u.angle=A.spot.outerConeAngle,u.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return u.position.set(0,0,0),u.decay=2,La(u,A),A.intensity!==void 0&&(u.intensity=A.intensity),u.name=t.createUniqueName(A.name||"light_"+e),o=Promise.resolve(u),t.cache.add(n,o),o}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,a=n.json.nodes[e],c=(a.extensions&&a.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(A){return n._getNodeRef(t.cache,c,A)})}},Db=class{constructor(){this.name=Pt.KHR_MATERIALS_UNLIT}getMaterialType(){return Qt}extendParams(e,t,n){let o=[];e.color=new ke(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let l=a.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}a.baseColorTexture!==void 0&&o.push(n.assignTexture(e,"map",a.baseColorTexture,nt))}return Promise.all(o)}},Bb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=o.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}},Lb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(a.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){let c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new he(c,c)}return Promise.all(a)}},Rb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}},kb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SHEEN}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new ke(0,0,0),t.sheenRoughness=0,t.sheen=1;let l=o.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&a.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,nt)),l.sheenRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}},Pb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&a.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(a)}},_b=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_VOLUME}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&a.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;let c=l.attenuationColor||[1,1,1];return t.attenuationColor=new ke(c[0],c[1],c[2]),Promise.all(a)}},Nb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_IOR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=o.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}},Fb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_SPECULAR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&a.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));let c=l.specularColorFactor||[1,1,1];return t.specularColor=new ke(c[0],c[1],c[2]),l.specularColorTexture!==void 0&&a.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,nt)),Promise.all(a)}},Qb=class{constructor(e){this.parser=e,this.name=Pt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:In}extendMaterialParams(e,t){let n=this.parser,o=n.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&a.push(n.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(a)}},Ub=class{constructor(e){this.parser=e,this.name=Pt.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,o=n.textures[e];if(!o.extensions||!o.extensions[this.name])return null;let a=o.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,l)}},Ob=class{constructor(e){this.parser=e,this.name=Pt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,o=n.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;let l=a.extensions[t],c=o.images[l.source],A=n.textureLoader;if(c.uri){let u=n.options.manager.getHandler(c.uri);u!==null&&(A=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,l.source,A);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Gb=class{constructor(e){this.parser=e,this.name=Pt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,o=n.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;let l=a.extensions[t],c=o.images[l.source],A=n.textureLoader;if(c.uri){let u=n.options.manager.getHandler(c.uri);u!==null&&(A=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,l.source,A);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},zb=class{constructor(e){this.name=Pt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){let o=n.extensions[this.name],a=this.parser.getDependency("buffer",o.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(c){let A=o.byteOffset||0,u=o.byteLength||0,h=o.count,f=o.byteStride,d=new Uint8Array(c,A,u);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(h,f,d,o.mode,o.filter).then(function(p){return p.buffer}):l.ready.then(function(){let p=new ArrayBuffer(h*f);return l.decodeGltfBuffer(new Uint8Array(p),h,f,d,o.mode,o.filter),p})})}else return null}},Hb=class{constructor(e){this.name=Pt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;let o=t.meshes[n.mesh];for(let u of o.primitives)if(u.mode!==Wr.TRIANGLES&&u.mode!==Wr.TRIANGLE_STRIP&&u.mode!==Wr.TRIANGLE_FAN&&u.mode!==void 0)return null;let l=n.extensions[this.name].attributes,c=[],A={};for(let u in l)c.push(this.parser.getDependency("accessor",l[u]).then(h=>(A[u]=h,A[u])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(u=>{let h=u.pop(),f=h.isGroup?h.children:[h],d=u[0].count,p=[];for(let m of f){let b=new Qe,g=new Y,w=new Lt,I=new Y(1,1,1),v=new vA(m.geometry,m.material,d);for(let E=0;E<d;E++)A.TRANSLATION&&g.fromBufferAttribute(A.TRANSLATION,E),A.ROTATION&&w.fromBufferAttribute(A.ROTATION,E),A.SCALE&&I.fromBufferAttribute(A.SCALE,E),v.setMatrixAt(E,b.compose(g,w,I));for(let E in A)E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&m.geometry.setAttribute(E,A[E]);ht.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),p.push(v)}return h.isGroup?(h.clear(),h.add(...p),h):p[0]}))}},KB="glTF",Af=12,VB={JSON:1313821514,BIN:5130562},Wb=class{constructor(e){this.name=Pt.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,Af),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==KB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let o=this.header.length-Af,a=new DataView(e,Af),l=0;for(;l<o;){let c=a.getUint32(l,!0);l+=4;let A=a.getUint32(l,!0);if(l+=4,A===VB.JSON){let u=new Uint8Array(e,Af+l,c);this.content=n.decode(u)}else if(A===VB.BIN){let u=Af+l;this.body=e.slice(u,u+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Vb=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,o=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},A={},u={};for(let h in l){let f=Kb[h]||h.toLowerCase();c[f]=l[h]}for(let h in e.attributes){let f=Kb[h]||h.toLowerCase();if(l[h]!==void 0){let d=n.accessors[e.attributes[h]],p=_A[d.componentType];u[f]=p.name,A[f]=d.normalized===!0}}return t.getDependency("bufferView",a).then(function(h){return new Promise(function(f){o.decodeDracoFile(h,function(d){for(let p in d.attributes){let m=d.attributes[p],b=A[p];b!==void 0&&(m.normalized=b)}f(d)},c,u)})})}},Xb=class{constructor(){this.name=Pt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},Yb=class{constructor(){this.name=Pt.KHR_MESH_QUANTIZATION}},Cg=class extends Bo{constructor(e,t,n,o){super(e,t,n,o)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=e*o*3+o;for(let l=0;l!==o;l++)t[l]=n[a+l];return t}interpolate_(e,t,n,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,A=c*2,u=c*3,h=o-t,f=(n-t)/h,d=f*f,p=d*f,m=e*u,b=m-u,g=-2*p+3*d,w=p-d,I=1-g,v=w-d+f;for(let E=0;E!==c;E++){let S=l[b+E+c],C=l[b+E+A]*h,M=l[m+E+c],D=l[m+E]*h;a[E]=I*S+v*C+g*M+w*D}return a}},wW=new Lt,Zb=class extends Cg{interpolate_(e,t,n,o){let a=super.interpolate_(e,t,n,o);return wW.fromArray(a).normalize().toArray(a),a}},Wr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},_A={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},XB={9728:It,9729:St,9984:cA,9985:of,9986:Bl,9987:us},YB={33071:Bn,33648:Rl,10497:_i},Eb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ba={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},bW={CUBICSPLINE:void 0,LINEAR:da,STEP:Pl},Ib={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function CW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new On({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Pi})),i.DefaultMaterial}function Yl(i,e,t){for(let n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function La(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function SW(i,e,t){let n=!1,o=!1,a=!1;for(let u=0,h=e.length;u<h;u++){let f=e[u];if(f.POSITION!==void 0&&(n=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(a=!0),n&&o&&a)break}if(!n&&!o&&!a)return Promise.resolve(i);let l=[],c=[],A=[];for(let u=0,h=e.length;u<h;u++){let f=e[u];if(n){let d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):i.attributes.position;l.push(d)}if(o){let d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):i.attributes.normal;c.push(d)}if(a){let d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):i.attributes.color;A.push(d)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(A)]).then(function(u){let h=u[0],f=u[1],d=u[2];return n&&(i.morphAttributes.position=h),o&&(i.morphAttributes.normal=f),a&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function EW(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,o=t.length;n<o;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function IW(i){let e,t=i.extensions&&i.extensions[Pt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Mb(t.attributes):e=i.indices+":"+Mb(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,o=i.targets.length;n<o;n++)e+=":"+Mb(i.targets[n]);return e}function Mb(i){let e="",t=Object.keys(i).sort();for(let n=0,o=t.length;n<o;n++)e+=t[n]+":"+i[t[n]]+";";return e}function Jb(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function MW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var TW=new Qe,jb=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new xW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,o=!1,a=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,a=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||o&&a<98?this.textureLoader=new ko(this.options.manager):this.textureLoader=new ef(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Jn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,o=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){let c={scene:l[0][o.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:o.asset,parser:n,userData:{}};Yl(a,c,o),La(c,o),Promise.all(n._invokeAll(function(A){return A.afterRoot&&A.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let o=0,a=t.length;o<a;o++){let l=t[o].joints;for(let c=0,A=l.length;c<A;c++)e[l[c]].isBone=!0}for(let o=0,a=e.length;o<a;o++){let l=e[o];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(n[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let o=n.clone(),a=(l,c)=>{let A=this.associations.get(l);A!=null&&this.associations.set(c,A);for(let[u,h]of l.children.entries())a(h,c.children[u])};return a(n,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let o=e(t[n]);if(o)return o}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let o=0;o<t.length;o++){let a=e(t[o]);a&&n.push(a)}return n}getDependency(e,t){let n=e+":"+t,o=this.cache.get(n);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":o=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":o=this.loadCamera(t);break;default:if(o=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(n,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(a,l){return n.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Pt.KHR_BINARY_GLTF].body);let o=this.options;return new Promise(function(a,l){n.load(ms.resolveURL(t.uri,o.path),a,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){let o=t.byteLength||0,a=t.byteOffset||0;return n.slice(a,a+o)})}loadAccessor(e){let t=this,n=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){let l=Eb[o.type],c=_A[o.componentType],A=o.normalized===!0,u=new c(o.count*l);return Promise.resolve(new it(u,l,A))}let a=[];return o.bufferView!==void 0?a.push(this.getDependency("bufferView",o.bufferView)):a.push(null),o.sparse!==void 0&&(a.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(a).then(function(l){let c=l[0],A=Eb[o.type],u=_A[o.componentType],h=u.BYTES_PER_ELEMENT,f=h*A,d=o.byteOffset||0,p=o.bufferView!==void 0?n.bufferViews[o.bufferView].byteStride:void 0,m=o.normalized===!0,b,g;if(p&&p!==f){let w=Math.floor(d/p),I="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+w+":"+o.count,v=t.cache.get(I);v||(b=new u(c,w*p,o.count*p/h),v=new Ji(b,p/h),t.cache.add(I,v)),g=new Ln(v,A,d%p/h,m)}else c===null?b=new u(o.count*A):b=new u(c,d,o.count*A),g=new it(b,A,m);if(o.sparse!==void 0){let w=Eb.SCALAR,I=_A[o.sparse.indices.componentType],v=o.sparse.indices.byteOffset||0,E=o.sparse.values.byteOffset||0,S=new I(l[1],v,o.sparse.count*w),C=new u(l[2],E,o.sparse.count*A);c!==null&&(g=new it(g.array.slice(),g.itemSize,g.normalized));for(let M=0,D=S.length;M<D;M++){let T=S[M];if(g.setX(T,C[M*A]),A>=2&&g.setY(T,C[M*A+1]),A>=3&&g.setZ(T,C[M*A+2]),A>=4&&g.setW(T,C[M*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){let t=this.json,n=this.options,a=t.textures[e].source,l=t.images[a],c=this.textureLoader;if(l.uri){let A=n.manager.getHandler(l.uri);A!==null&&(c=A)}return this.loadTextureImage(e,a,c)}loadTextureImage(e,t,n){let o=this,a=this.json,l=a.textures[e],c=a.images[t],A=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[A])return this.textureCache[A];let u=this.loadImageSource(t,n).then(function(h){h.flipY=!1,h.name=l.name||c.name||"",h.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(h.name=c.uri);let d=(a.samplers||{})[l.sampler]||{};return h.magFilter=XB[d.magFilter]||St,h.minFilter=XB[d.minFilter]||us,h.wrapS=YB[d.wrapS]||_i,h.wrapT=YB[d.wrapT]||_i,o.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[A]=u,u}loadImageSource(e,t){let n=this,o=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());let l=o.images[e],c=self.URL||self.webkitURL,A=l.uri||"",u=!1;if(l.bufferView!==void 0)A=n.getDependency("bufferView",l.bufferView).then(function(f){u=!0;let d=new Blob([f],{type:l.mimeType});return A=c.createObjectURL(d),A});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let h=Promise.resolve(A).then(function(f){return new Promise(function(d,p){let m=d;t.isImageBitmapLoader===!0&&(m=function(b){let g=new Vt(b);g.needsUpdate=!0,d(g)}),t.load(ms.resolveURL(f,a.path),m,void 0,p)})}).then(function(f){return u===!0&&c.revokeObjectURL(A),f.userData.mimeType=l.mimeType||MW(l.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),f});return this.sourceCache[e]=h,h}assignTexture(e,t,n,o){let a=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(l=l.clone(),l.channel=n.texCoord),a.extensions[Pt.KHR_TEXTURE_TRANSFORM]){let c=n.extensions!==void 0?n.extensions[Pt.KHR_TEXTURE_TRANSFORM]:void 0;if(c){let A=a.associations.get(l);l=a.extensions[Pt.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),a.associations.set(l,A)}}return o!==void 0&&(l.colorSpace=o),e[t]=l,l})}assignFinalMaterial(e){let t=e.geometry,n=e.material,o=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){let c="PointsMaterial:"+n.uuid,A=this.cache.get(c);A||(A=new Do,Sn.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,A.sizeAttenuation=!1,this.cache.add(c,A)),n=A}else if(e.isLine){let c="LineBasicMaterial:"+n.uuid,A=this.cache.get(c);A||(A=new Rn,Sn.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,this.cache.add(c,A)),n=A}if(o||a||l){let c="ClonedMaterial:"+n.uuid+":";o&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let A=this.cache.get(c);A||(A=n.clone(),a&&(A.vertexColors=!0),l&&(A.flatShading=!0),o&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(c,A),this.associations.set(A,this.associations.get(n))),n=A}e.material=n}getMaterialType(){return On}loadMaterial(e){let t=this,n=this.json,o=this.extensions,a=n.materials[e],l,c={},A=a.extensions||{},u=[];if(A[Pt.KHR_MATERIALS_UNLIT]){let f=o[Pt.KHR_MATERIALS_UNLIT];l=f.getMaterialType(),u.push(f.extendParams(c,a,t))}else{let f=a.pbrMetallicRoughness||{};if(c.color=new ke(1,1,1),c.opacity=1,Array.isArray(f.baseColorFactor)){let d=f.baseColorFactor;c.color.fromArray(d),c.opacity=d[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(c,"map",f.baseColorTexture,nt)),c.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,c.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(c,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(c,"roughnessMap",f.metallicRoughnessTexture))),l=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}a.doubleSided===!0&&(c.side=zt);let h=a.alphaMode||Ib.OPAQUE;if(h===Ib.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,h===Ib.MASK&&(c.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&l!==Qt&&(u.push(t.assignTexture(c,"normalMap",a.normalTexture)),c.normalScale=new he(1,1),a.normalTexture.scale!==void 0)){let f=a.normalTexture.scale;c.normalScale.set(f,f)}return a.occlusionTexture!==void 0&&l!==Qt&&(u.push(t.assignTexture(c,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&l!==Qt&&(c.emissive=new ke().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&l!==Qt&&u.push(t.assignTexture(c,"emissiveMap",a.emissiveTexture,nt)),Promise.all(u).then(function(){let f=new l(c);return a.name&&(f.name=a.name),La(f,a),t.associations.set(f,{materials:e}),a.extensions&&Yl(o,f,a),f})}createUniqueName(e){let t=Bt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,o=this.primitiveCache;function a(c){return n[Pt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(A){return ZB(A,c,t)})}let l=[];for(let c=0,A=e.length;c<A;c++){let u=e[c],h=IW(u),f=o[h];if(f)l.push(f.promise);else{let d;u.extensions&&u.extensions[Pt.KHR_DRACO_MESH_COMPRESSION]?d=a(u):d=ZB(new qe,u,t),o[h]={primitive:u,promise:d},l.push(d)}}return Promise.all(l)}loadMesh(e){let t=this,n=this.json,o=this.extensions,a=n.meshes[e],l=a.primitives,c=[];for(let A=0,u=l.length;A<u;A++){let h=l[A].material===void 0?CW(this.cache):this.getDependency("material",l[A].material);c.push(h)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(A){let u=A.slice(0,A.length-1),h=A[A.length-1],f=[];for(let p=0,m=h.length;p<m;p++){let b=h[p],g=l[p],w,I=u[p];if(g.mode===Wr.TRIANGLES||g.mode===Wr.TRIANGLE_STRIP||g.mode===Wr.TRIANGLE_FAN||g.mode===void 0)w=a.isSkinnedMesh===!0?new ga(b,I):new Xe(b,I),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),g.mode===Wr.TRIANGLE_STRIP?w.geometry=bg(w.geometry,af):g.mode===Wr.TRIANGLE_FAN&&(w.geometry=bg(w.geometry,LA));else if(g.mode===Wr.LINES)w=new qi(b,I);else if(g.mode===Wr.LINE_STRIP)w=new ji(b,I);else if(g.mode===Wr.LINE_LOOP)w=new yA(b,I);else if(g.mode===Wr.POINTS)w=new ya(b,I);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(w.geometry.morphAttributes).length>0&&EW(w,a),w.name=t.createUniqueName(a.name||"mesh_"+e),La(w,a),g.extensions&&Yl(o,w,g),t.assignFinalMaterial(w),f.push(w)}for(let p=0,m=f.length;p<m;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return a.extensions&&Yl(o,f[0],a),f[0];let d=new cn;a.extensions&&Yl(o,d,a),t.associations.set(d,{meshes:e});for(let p=0,m=f.length;p<m;p++)d.add(f[p]);return d})}loadCamera(e){let t,n=this.json.cameras[e],o=n[n.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Jt(ii.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):n.type==="orthographic"&&(t=new Ci(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),La(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n=[];for(let o=0,a=t.joints.length;o<a;o++)n.push(this._loadNodeShallow(t.joints[o]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(o){let a=o.pop(),l=o,c=[],A=[];for(let u=0,h=l.length;u<h;u++){let f=l[u];if(f){c.push(f);let d=new Qe;a!==null&&d.fromArray(a.array,u*16),A.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new va(c,A)})}loadAnimation(e){let t=this.json,n=this,o=t.animations[e],a=o.name?o.name:"animation_"+e,l=[],c=[],A=[],u=[],h=[];for(let f=0,d=o.channels.length;f<d;f++){let p=o.channels[f],m=o.samplers[p.sampler],b=p.target,g=b.node,w=o.parameters!==void 0?o.parameters[m.input]:m.input,I=o.parameters!==void 0?o.parameters[m.output]:m.output;b.node!==void 0&&(l.push(this.getDependency("node",g)),c.push(this.getDependency("accessor",w)),A.push(this.getDependency("accessor",I)),u.push(m),h.push(b))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(A),Promise.all(u),Promise.all(h)]).then(function(f){let d=f[0],p=f[1],m=f[2],b=f[3],g=f[4],w=[];for(let I=0,v=d.length;I<v;I++){let E=d[I],S=p[I],C=m[I],M=b[I],D=g[I];if(E===void 0)continue;E.updateMatrix&&(E.updateMatrix(),E.matrixAutoUpdate=!0);let T=n._createAnimationTracks(E,S,C,M,D);if(T)for(let B=0;B<T.length;B++)w.push(T[B])}return new fs(a,void 0,w)})}createNodeMesh(e){let t=this.json,n=this,o=t.nodes[e];return o.mesh===void 0?null:n.getDependency("mesh",o.mesh).then(function(a){let l=n._getNodeRef(n.meshCache,o.mesh,a);return o.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let A=0,u=o.weights.length;A<u;A++)c.morphTargetInfluences[A]=o.weights[A]}),l})}loadNode(e){let t=this.json,n=this,o=t.nodes[e],a=n._loadNodeShallow(e),l=[],c=o.children||[];for(let u=0,h=c.length;u<h;u++)l.push(n.getDependency("node",c[u]));let A=o.skin===void 0?Promise.resolve(null):n.getDependency("skin",o.skin);return Promise.all([a,Promise.all(l),A]).then(function(u){let h=u[0],f=u[1],d=u[2];d!==null&&h.traverse(function(p){p.isSkinnedMesh&&p.bind(d,TW)});for(let p=0,m=f.length;p<m;p++)h.add(f[p]);return h})}_loadNodeShallow(e){let t=this.json,n=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let a=t.nodes[e],l=a.name?o.createUniqueName(a.name):"",c=[],A=o._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return A&&c.push(A),a.camera!==void 0&&c.push(o.getDependency("camera",a.camera).then(function(u){return o._getNodeRef(o.cameraCache,a.camera,u)})),o._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){c.push(u)}),this.nodeCache[e]=Promise.all(c).then(function(u){let h;if(a.isBone===!0?h=new Vs:u.length>1?h=new cn:u.length===1?h=u[0]:h=new ht,h!==u[0])for(let f=0,d=u.length;f<d;f++)h.add(u[f]);if(a.name&&(h.userData.name=a.name,h.name=l),La(h,a),a.extensions&&Yl(n,h,a),a.matrix!==void 0){let f=new Qe;f.fromArray(a.matrix),h.applyMatrix4(f)}else a.translation!==void 0&&h.position.fromArray(a.translation),a.rotation!==void 0&&h.quaternion.fromArray(a.rotation),a.scale!==void 0&&h.scale.fromArray(a.scale);return o.associations.has(h)||o.associations.set(h,{}),o.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],o=this,a=new cn;n.name&&(a.name=o.createUniqueName(n.name)),La(a,n),n.extensions&&Yl(t,a,n);let l=n.nodes||[],c=[];for(let A=0,u=l.length;A<u;A++)c.push(o.getDependency("node",l[A]));return Promise.all(c).then(function(A){for(let h=0,f=A.length;h<f;h++)a.add(A[h]);let u=h=>{let f=new Map;for(let[d,p]of o.associations)(d instanceof Sn||d instanceof Vt)&&f.set(d,p);return h.traverse(d=>{let p=o.associations.get(d);p!=null&&f.set(d,p)}),f};return o.associations=u(a),a})}_createAnimationTracks(e,t,n,o,a){let l=[],c=e.name?e.name:e.uuid,A=[];Ba[a.path]===Ba.weights?e.traverse(function(d){d.morphTargetInfluences&&A.push(d.name?d.name:d.uuid)}):A.push(c);let u;switch(Ba[a.path]){case Ba.weights:u=zr;break;case Ba.rotation:u=wr;break;case Ba.position:case Ba.scale:default:switch(n.itemSize){case 1:u=zr;break;case 2:case 3:u=hs;break}break}let h=o.interpolation!==void 0?bW[o.interpolation]:da,f=this._getArrayFromAccessor(n);for(let d=0,p=A.length;d<p;d++){let m=new u(A[d]+"."+Ba[a.path],t.array,f,h);h==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),l.push(m)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let n=Jb(t.constructor),o=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a++)o[a]=t[a]*n;t=o}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){let o=this instanceof wr?Zb:Cg;return new o(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function DW(i,e,t){let n=e.attributes,o=new Cn;if(n.POSITION!==void 0){let c=t.json.accessors[n.POSITION],A=c.min,u=c.max;if(A!==void 0&&u!==void 0){if(o.set(new Y(A[0],A[1],A[2]),new Y(u[0],u[1],u[2])),c.normalized){let h=Jb(_A[c.componentType]);o.min.multiplyScalar(h),o.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let a=e.targets;if(a!==void 0){let c=new Y,A=new Y;for(let u=0,h=a.length;u<h;u++){let f=a[u];if(f.POSITION!==void 0){let d=t.json.accessors[f.POSITION],p=d.min,m=d.max;if(p!==void 0&&m!==void 0){if(A.setX(Math.max(Math.abs(p[0]),Math.abs(m[0]))),A.setY(Math.max(Math.abs(p[1]),Math.abs(m[1]))),A.setZ(Math.max(Math.abs(p[2]),Math.abs(m[2]))),d.normalized){let b=Jb(_A[d.componentType]);A.multiplyScalar(b)}c.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(c)}i.boundingBox=o;let l=new Xt;o.getCenter(l.center),l.radius=o.min.distanceTo(o.max)/2,i.boundingSphere=l}function ZB(i,e,t){let n=e.attributes,o=[];function a(l,c){return t.getDependency("accessor",l).then(function(A){i.setAttribute(c,A)})}for(let l in n){let c=Kb[l]||l.toLowerCase();c in i.attributes||o.push(a(n[l],c))}if(e.indices!==void 0&&!i.index){let l=t.getDependency("accessor",e.indices).then(function(c){i.setIndex(c)});o.push(l)}return La(i,e),DW(i,e,t),Promise.all(o).then(function(){return e.targets!==void 0?SW(i,e.targets,t):i})}var qb=new WeakMap,Sg=class extends An{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,o){let a=new Jn(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,l=>{this.parse(l,t,o)},n,o)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,nt).catch(n)}decodeDracoFile(e,t,n,o,a=gr){let l={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:a};return this.decodeGeometry(e,l).then(t)}decodeGeometry(e,t){let n=JSON.stringify(t);if(qb.has(e)){let A=qb.get(e);if(A.key===n)return A.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o,a=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(a,l).then(A=>(o=A,new Promise((u,h)=>{o._callbacks[a]={resolve:u,reject:h},o.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(A=>this._createGeometry(A.geometry));return c.catch(()=>!0).then(()=>{o&&a&&this._releaseTask(o,a)}),qb.set(e,{key:n,promise:c}),c}_createGeometry(e){let t=new qe;e.index&&t.setIndex(new it(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let o=e.attributes[n],a=o.name,l=o.array,c=o.itemSize,A=new it(l,c);a==="color"&&(this._assignVertexColorSpace(A,o.vertexColorSpace),A.normalized=!(l instanceof Float32Array)),t.setAttribute(a,A)}return t}_assignVertexColorSpace(e,t){if(t!==nt)return;let n=new ke;for(let o=0,a=e.count;o<a;o++)n.fromBufferAttribute(e,o).convertSRGBToLinear(),e.setXYZ(o,n.r,n.g,n.b)}_loadLibrary(e,t){let n=new Jn(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((o,a)=>{n.load(e,o,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{let o=n[0];e||(this.decoderConfig.wasmBinary=n[1]);let a=BW.toString(),l=["/* draco decoder */",o,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(a){let l=a.data;switch(l.type){case"decode":o._callbacks[l.id].resolve(l);break;case"error":o._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,a){return o._taskLoad>a._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function BW(){let i,e;onmessage=function(l){let c=l.data;switch(c.type){case"init":i=c.decoderConfig,e=new Promise(function(h){i.onModuleLoaded=function(f){h({draco:f})},DracoDecoderModule(i)});break;case"decode":let A=c.buffer,u=c.taskConfig;e.then(h=>{let f=h.draco,d=new f.Decoder;try{let p=t(f,d,new Int8Array(A),u),m=p.attributes.map(b=>b.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:c.id,error:p.message})}finally{f.destroy(d)}});break}};function t(l,c,A,u){let h=u.attributeIDs,f=u.attributeTypes,d,p,m=c.GetEncodedGeometryType(A);if(m===l.TRIANGULAR_MESH)d=new l.Mesh,p=c.DecodeArrayToMesh(A,A.byteLength,d);else if(m===l.POINT_CLOUD)d=new l.PointCloud,p=c.DecodeArrayToPointCloud(A,A.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let b={index:null,attributes:[]};for(let g in h){let w=self[f[g]],I,v;if(u.useUniqueIDs)v=h[g],I=c.GetAttributeByUniqueId(d,v);else{if(v=c.GetAttributeId(d,l[h[g]]),v===-1)continue;I=c.GetAttribute(d,v)}let E=o(l,c,d,g,w,I);g==="color"&&(E.vertexColorSpace=u.vertexColorSpace),b.attributes.push(E)}return m===l.TRIANGULAR_MESH&&(b.index=n(l,c,d)),l.destroy(d),b}function n(l,c,A){let h=A.num_faces()*3,f=h*4,d=l._malloc(f);c.GetTrianglesUInt32Array(A,f,d);let p=new Uint32Array(l.HEAPF32.buffer,d,h).slice();return l._free(d),{array:p,itemSize:1}}function o(l,c,A,u,h,f){let d=f.num_components(),m=A.num_points()*d,b=m*h.BYTES_PER_ELEMENT,g=a(l,h),w=l._malloc(b);c.GetAttributeDataArrayForAllPoints(A,f,g,b,w);let I=new h(l.HEAPF32.buffer,w,m).slice();return l._free(w),{name:u,array:I,itemSize:d}}function a(l,c){switch(c){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}var br=Ns(jB());function*LW(i,e){let t=0;for(let n of i)yield e(n,t++)}function*RW(i,e){let t=0;for(let n of i)e(n,t++)&&(yield n)}function er(i,e){let t=new br.Tween(i).easing(br.Easing.Cubic.InOut);return e||t.start(),t}function kW(i,e){let t=new br.Tween(i).easing(br.Easing.Linear);return e||t.start(),t}function qB(){try{br.update()}catch(i){console.warn("tween update lossage",i),br.removeAll()}}window.tween=er;window.tweenupdate=qB;function PW(){return br.isRunning()}function _W(i,e){return i.chain(e)}function NW(i){return document.querySelector(i)}function Cr(i,e,t){return new Y(i,e,t)}window.vec3=Cr;function FW(i,e,t,n){return new Lt(i,e,t,n)}function QW(i){return i.position}function UW(i,e,t){e=e||10,t=t||50;let n=!1,o=[],a=function(){if(o.length&&!n){n=!0;for(let l=0;l<e&&o.length;l++)o.shift().call();setTimeout(function(){n=!1,a()},t)}};return function(){o.push(i.bind(this,...arguments)),a()}}function OW(i,e,t){return UW(function(){i.modelsync&&i.modelsync(t)},20,51)}var NA=OW;function $B(i,e,t,n,o,a){return er(i.position,a).to({x:e,y:t,z:n},o).on("update",NA(i))}window.slide=$B;function eL(i,e,t){return er(i.scale).to({x:e,y:e,z:e},t||1e3).on("update",NA(i))}window.grow=eL;function GW(i,e,t){let n=i.scale.x,o=i.scale.z;return er(i.scale).to({x:n,y:e,z:o},t)}function tL(i,e,t,n,o,a){return er(i.quaternion).to({x:e,y:t,z:n,w:o},a||1e3).on("update",NA(i))}window.toquat=tL;function eC(i,e,t,n,o){return er(i.rotation).to({x:e,y:t,z:n},o||1e3).on("update",NA(i))}window.rot=eC;function zW(i,e,t,n,o){let a=new Lt,l=new ht,c,A={t:0};return a.copy(i.quaternion),l.quaternion.copy(a),l.rotateOnAxis(e,t),c=l.quaternion,er(A).to({t:1},n).easing(br.Easing.Linear.None).on("update",function(){i.quaternion.slerpQuaternions(a,c,A.t),o&&o()})}function nL(i,e,t){return zW(i,Cr(0,1,0),e,t,NA(i))}function HW(i,e,t){return er(i.rotation).to({y:e},t||1e3).on("update",NA(i))}function WW(i,e,t){let n=i.rotation;return eC(i,n.x,e,n.z,t)}window.roty=nL;function tC(i,e){var t=[""].concat(Array.prototype.slice.call(arguments,0));console.log.apply(console,arguments)}function VW(i){return new Promise(e=>setTimeout(e,i))}function XW(i,e){var t=document.createElement("script");t.type="module",t.readyState?t.onreadystatechange=function(){tC("ldmodule ready",t),(t.readyState=="loaded"||t.readyState=="complete")&&(t.onreadystatechange=null,e&&e(t))}:e&&(t.onload=function(){e(t)}),t.src=i,document.getElementsByTagName("head")[0].appendChild(t)}function iL(i,e){var t=document.createElement("script");t.type="application/javascript",t.readyState?t.onreadystatechange=function(){tC("ldready",t),(t.readyState=="loaded"||t.readyState=="complete")&&(t.onreadystatechange=null,e&&e(t))}:e&&(t.onload=function(){e(t)}),t.src=i,document.getElementsByTagName("head")[0].appendChild(t)}window.ld=iL;function nC(i,e,t,n){e=e||.8,t=t??.1,n=n||1e3;let o=lim,a=o.orbitcontrols,l=o.camera;return i.position&&(i=i.position.clone()),er(a.target).to({x:i.x,y:i.y,z:i.z},n/2).on("update",function(){a.update()}),er(l.position).delay(10+n/2).to({x:i.x,y:i.y+t,z:i.z+e},n).on("update",function(){a.update()})}function YW(i,e,t,n){let o=new Cn().setFromObject(i),a=o.max.y-o.min.y,l=Cr(0,a/2,0).add(i.position);return nC(l,a*1.1,a/4)}window.lookto=nC;function rL(i,e,t,n,o,a){let l=window.app,c=l.orbitcontrols,A=l.camera,u=1e3;return(n||o||a)&&er(c.target).to({x:n,y:o,z:a},u).on("update",()=>c.update()),er(A.position).to({x:i,y:e,z:t},u).on("update",()=>c.update())}window.camto=rL;function ZW(i){return JSON.stringify(i)}function FA(i,e){e=e||(i.path&&i.path.length?i.path[0]:i.srcElement),document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),e.exitFullscreen&&e.exitFullscreen()):e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}window.togglefullscreen=FA;window.togglefullscreen0=sL;function sL(i){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen()}function KW(i,e,t){let n=new XMLHttpRequest;return e&&n.overrideMimeType&&n.overrideMimeType(e),n.open("GET",i,!0),t&&(n.onreadystatechange=function(o){n.readyState==4&&t(n)}),n.send(null),n}function iC(i,e,t){let n=new XMLHttpRequest;return n.open("POST",i,!0),n.setRequestHeader("Content-type","application/json"),t&&(n.onreadystatechange=function(){n.readyState===4&&t(n)}),n.send(e),n}var Ig;function oL(i,e,t){let n=new uf;Ig||(Ig=new Sg,Ig.setDecoderPath("./jsm/libs/draco/")),n.setDRACOLoader(Ig),n.setPath(e||"./stuff/"),n.load(i,function(o){t&&t(o)})}function aL(i,e,t){let n=new ht;return e=e||"./stuff/",hf(i,e,o=>{let a=o.scene;if(o.animations.length){let l=new Xl(a);o.animations.forEach(c=>l.clipAction(c).play())}n.add(a),a.traverse(l=>{l.receiveShadow=!1,l.castShadow=!0,l.frustumCulled=!1,l.material&&(console.warn(l.material),l.material.transparent=!0)}),t&&t(n)}),n}var hf=oL;window.gltf=hf;window.sgltf=aL;function JW(i,e,t){let n=new uf;n.setPath(e||"./"),n.load(i,function(o){t&&t(o)})}function jW(i,e){new gg().load(i,n=>e&&e(n))}function qW(i,e){let t=Date.now(),n=e||1e3;for(;--n;)i();return Date.now()-t}function $W(i,e){let t=i.width,n=i.height;e&&(t*=e,n*=e);let o=document.createElement("canvas");return o.width=t,o.height=n,o.getContext("2d").drawImage(i,0,0,t,n),o.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,""),o.toDataURL("image/png")}function eV(i,e){let t=Date.now(),n={timestamp:t,data:i};return iC("https://"+localconfig.server+":"+localconfig.port+"/putimg",JSON.stringify(n),o=>console.log("putimg",o)),t}function tV(i,e){e=e||Date.now();let t={data:i,timestamp:e};return iC("https://"+localconfig.server+":"+localconfig.port+"/rdb/putimg",JSON.stringify(t)),t}function nV(i,e,t){new OBJLoader().setPath(e||"./stuff/").load(i,function(n){t&&t(n)})}function iV(i,e){setInterval(()=>lL(i),e||200)}var $b=Cr(-1,-1,-1),rV=Cr(0,0,0);function lL(i){let e=i.camera.position,t=e.distanceTo($b),n=e.distanceTo(rV);if(t<1e-6)return;$b=e.clone();let o=e.toArray().map(a=>a.toFixed(3));o.push(n.toFixed(2)),i.setstatus(o+"<br>tracking: "+i.trackingstate)}function cL(i){let e=document.createElement("video"),t=new Fh(e);return e.style.visible="hidden",e.src=i,e.muted=!0,e.autoplay=!1,e.playsinline=!1,e.webkitPlaysinline=!1,e.crossOrigin="anonymous",t.vid=e,t}function Mg(i){let e=new cL(i),t=e.vid,n=new Xe(new En(1,.8,1),new In({color:16777215,map:e,transparent:!0,side:zt}));return n.tag="vidbox",n.vid=t,t.onloadeddata=()=>{t.pause(),t.currentTime=0,t.playsinline=!0,t.loop=!0,t.fullscreen=!1},n.castShadow=!0,n.receiveShadow=!1,n}window.vidbox=Mg;function AL(i,e){e===void 0&&(e=!0),i.traverse(t=>t.material&&(t.material.wireframe=e))}window.wireframe=AL;function sV(i,e){document.getElementById(i).addEventListener("click",e)}function oV(i,e){Object.keys(e.exports).forEach(t=>{window[t]=e.exports[t]})}function aV(i){return new i}function lV(i,e){let t,n;return function(){let o=this,a=arguments;n?(clearTimeout(t),t=setTimeout(function(){Date.now()-n>=e&&(i.apply(o,a),n=Date.now())},e-(Date.now()-n))):(i.apply(o,a),n=Date.now())}}async function uL(i){return await import("./"+i)}window.loadjs=uL;function cV(i,e,t,n){return(i/=n/2)<1?t/2*i*i+e:-t/2*(--i*(i-2)-1)+e}window.easeInOutQuad=cV;function AV(i,e,t,n){return(i/=n/2)<1?t/2*i*i*i+e:t/2*((i-=2)*i*i+2)+e}window.easeInOutCubic=AV;function uV(){let i=document.createElement("iframe");return i.sandbox="allow-scripts allow-same-origin",i.src="sandbox.html",i.style.visible=!1,document.body.append(i),i.send=e=>i.contentWindow.postMessage(e),i}window.sandboxframe=uV;function hV(i){let e=new Blob([i],{type:"application/javascript"}),t=new Worker(URL.createObjectURL(e));return t.onmessage=n=>console.log("worker.onmessage",n.data),t}window.blobworker=hV;var qn=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},fV=new Ci(-1,1,1,-1,0,1),sC=new qe;sC.setAttribute("position",new He([-1,3,0,-1,-1,0,3,-1,0],3));sC.setAttribute("uv",new He([0,2,0,0,2,0],2));var tr=class{constructor(e){this._mesh=new Xe(sC,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,fV)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var Tg=class extends pt{constructor(e){super({uniforms:{uDiffuse:{value:null},uResolution:{value:new he(1,1)},uDepthBuffer:{value:null},uSurfaceBuffer:{value:null},uCameraNear:{value:e.camera.near},uCameraFar:{value:e.camera.far},uColorTexture:{value:"./textures/color-noise.png"},uCloudTexture:{value:"./textures/cloud-noise.png"}},fragmentShader:`
#include <packing>

vec2 grad(ivec2 z) {
    // 2D to 1D  (feel free to replace by some other)
    int n = z.x+z.y*11111;

    // Hugo Elias hash (feel free to replace by another one)
    n = (n<<13)^n;
    n = (n*(n*n*15731+789221)+1376312589)>>16;

    #if 0

    // simple random vectors
    return vec2(cos(float(n)), sin(float(n)));

    #else

    // Perlin style vectors
    n &= 7;
    vec2 gr = vec2(n&1, n>>1)*2.0-1.0;
    return (n>=6) ? vec2(0.0, gr.x) :
    (n>=4) ? vec2(gr.x, 0.0) :
    gr;
    #endif
}

float noise(in vec2 p) {
    ivec2 i = ivec2(floor(p));
    vec2 f = fract(p);

    vec2 u = f*f*(3.0-2.0*f);// feel free to replace by a quintic smoothstep instead

    return mix(mix(dot(grad(i+ivec2(0, 0)), f-vec2(0.0, 0.0)),
    dot(grad(i+ivec2(1, 0)), f-vec2(1.0, 0.0)), u.x),
    mix(dot(grad(i+ivec2(0, 1)), f-vec2(0.0, 1.0)),
    dot(grad(i+ivec2(1, 1)), f-vec2(1.0, 1.0)), u.x), u.y);
}

uniform sampler2D uDiffuse;
uniform sampler2D uSurfaceBuffer;
uniform sampler2D uDepthBuffer;

uniform sampler2D uCloudTexture;
uniform sampler2D uColorTexture;

uniform float uNear;
uniform float uFar;

uniform vec2 uResolution;

varying vec2 vUv;


float valueAtPoint(sampler2D image, vec2 coord, vec2 texel, vec2 point) {
    vec3 luma = vec3(0.299, 0.587, 0.114);

    return dot(texture2D(image, coord + texel * point).xyz, luma);
}

float diffuseValue(int x, int y) {
    float cutoff = 40.0;
    float offset =  0.5 / cutoff;
    float noiseValue = clamp(texture(uCloudTexture, vUv).r, 0.0, cutoff) / cutoff - offset;

    return valueAtPoint(uDiffuse, vUv + noiseValue, vec2(1.0 / uResolution.x, 1.0 / uResolution.y), vec2(x, y)) * 0.6;
}

float normalValue(int x, int y) {
    float cutoff = 50.0;
    float offset = 0.5 / cutoff;
    float noiseValue = clamp(texture(uCloudTexture, vUv).r, 0.0, cutoff) / cutoff - offset;

    return valueAtPoint(uSurfaceBuffer, vUv + noiseValue, vec2(1.0 / uResolution.x, 1.0 / uResolution.y), vec2(x, y)) * 0.3;
}

float getValue(int x, int y) {
    float noiseValue = noise(gl_FragCoord.xy);
    noiseValue = noiseValue * 2.0 - 1.0;
    noiseValue *= 10.0;

    return diffuseValue(x, y) + normalValue(x, y) * noiseValue;
}

float getPixelDepth(int x, int y) {
    float fragCoordZ = texture2D(uDepthBuffer, vUv + vec2(x, y) * 1.0 / uResolution).x;
    float viewZ = perspectiveDepthToViewZ(fragCoordZ, uNear, uFar);
    return viewZToOrthographicDepth(viewZ, uNear, uFar);
}

vec3 getSurfaceValue(int x, int y) {
    return texture2D(uSurfaceBuffer, vUv + vec2(x, y) / uResolution).rgb;
}

float sobelFloat(sampler2D diffuse, vec2 uv, vec2 texel) {
    // kernel definition (in glsl matrices are filled in column-major order)
    const mat3 Gx = mat3(-1, -2, -1, 0, 0, 0, 1, 2, 1);// x direction kernel
    const mat3 Gy = mat3(-1, 0, 1, -2, 0, 2, -1, 0, 1);// y direction kernel

    // fetch the 3x3 neighbourhood of a fragment

    // first column
    float tx0y0 = getValue(-1, -1);
    float tx0y1 = getValue(-1, 0);
    float tx0y2 = getValue(-1, 1);

    // second column
    float tx1y0 = getValue(0, -1);
    float tx1y1 = getValue(0, 0);
    float tx1y2 = getValue(0, 1);

    // third column
    float tx2y0 = getValue(1, -1);
    float tx2y1 = getValue(1, 0);
    float tx2y2 = getValue(1, 1);

    // gradient value in x direction
    float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +
    Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +
    Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;

    // gradient value in y direction
    float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +
    Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +
    Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;

    // magnitute of the total gradient
    float G = (valueGx * valueGx) + (valueGy * valueGy);
    return clamp(G, 0.0, 1.0);
}

float readDepth( sampler2D depthSampler, vec2 coord ) {
    float fragCoordZ = texture2D( depthSampler, coord ).x;
    float viewZ = perspectiveDepthToViewZ( fragCoordZ, uNear, uFar );
    return viewZToOrthographicDepth( viewZ, uNear, uFar );
}


void main() {
    vec2 size = vec2(textureSize(uDiffuse, 0));
    vec4 texel = texture2D(uDiffuse, vUv);

    vec2 fragCoord = gl_FragCoord.xy;

    vec2 noiseValue = vec2(noise(fragCoord));
    noiseValue = noiseValue * 2.0 - 1.0;
    noiseValue *= 10.0;

    vec4 cloudNoiseValue = texture2D(uCloudTexture, vUv);

    float sobelValue = sobelFloat(uDiffuse, vUv, 1.0 / uResolution);
    sobelValue = smoothstep(0.01, 0.03, sobelValue);

    vec4 uLineColor = vec4(0.32, 0.12, 0.2, 1.0);

    if (sobelValue > 0.1) {
        gl_FragColor = uLineColor * 0.5;
    } else {
        gl_FragColor = texel;
    }
}
`,vertexShader:`
varying vec2 vUv;

void main() {

    vUv = uv;

    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}

`}),this.uniforms.uResolution.value=new he(window.innerWidth,window.innerHeight)}update(){}resize(){this.uniforms.uResolution.value=new he(window.innerWidth,window.innerHeight)}};var Dg=class extends qn{constructor(e){super(),this.engine=e,this.fsQuad=new tr,this.material=new Tg(this.engine),this.fsQuad.material=this.material,console.warn("pencil",window.innerWidth,window.innerHeight);let t=new Mt(window.innerWidth,window.innerHeight);t.texture.format=Xn,t.texture.type=bn,t.texture.minFilter=It,t.texture.magFilter=It,t.texture.generateMipmaps=!1,t.stencilBuffer=!1,this.surfaceBuffer=t,this.normalMaterial=new EA,this.material.uniforms.uCameraNear.value=this.engine.camera.near,this.material.uniforms.uCameraFar.value=this.engine.camera.far}render(e,t,n){let o=t.depthBuffer;t.depthBuffer=!1,e.setRenderTarget(this.surfaceBuffer);let a=this.engine.scene.overrideMaterial;this.engine.scene.overrideMaterial=this.normalMaterial,e.render(this.engine.scene,this.engine.camera),this.engine.scene.overrideMaterial=a,this.material.uniforms.uDiffuse.value=n.texture,this.material.uniforms.uDepthBuffer.value=n.depthTexture,this.material.uniforms.uSurfaceBuffer.value=this.surfaceBuffer.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e)),t.depthBuffer=o}dispose(){this.material.dispose(),this.fsQuad.dispose()}setSize(){this.material.resize()}};var Gie=Ns(oC()),FL=Ns(Bg()),QL=Ns(hC());function UA(i){return Math.min(Math.max(i,0),1)}var Qie=window.webkit!==void 0,QV="featurePoint",UV="horizontalPlane",OV="verticalPlane",GV="existingPlane",zV="existingPlaneUsingExtent";var Pg={[QV]:1,[UV]:2,[OV]:4,[GV]:8,[zV]:16},Kl={normal:"normal",notAvailable:"notAvailable",excessiveMotion:"excessiveMotion",insufficientFeatures:"insufficientFeatures",initializing:"initializing",relocalizing:"relocalizing"};var HV={camera:{near:.001,far:1e3},pointCloud:!1,imageFrame:!1},Si=HV;var WV=new class{constructor(){(0,FL.default)(this),this.sethandlers(),(0,QL.default)(Si).on("change",this.updateConfig)}onARFrame(e){this.emit("frame",JSON.parse(e))}onHitTest(e){this.emit("hitTest",JSON.parse(e))}onAnchorsAdded(e){this.emit("anchorsAdded",JSON.parse(e))}onAnchorsRemoved(e){this.emit("anchorsRemoved",JSON.parse(e))}onSessionInterupted(){this.emit("sessionInterupted")}onSessionInteruptedEnded(){this.emit("sessionInteruptedEnded")}onTrackingStateChange(e){this.emit("trackingStateChange",e)}hitTest(e,t,n=Pg.featurePoint){let o={action:"hitTest",value:{x:UA(e,0,1),y:UA(t,0,1)},hitType:n};this.postMessage(o)}addAnchor(e=[]){let t={action:"addAnchor",value:e};this.postMessage(t)}removeAnchors(e=[]){let t={action:"removeAnchors",value:e};this.postMessage(t)}loadPage(e){let t={action:"loadPage",value:e};this.postMessage(t)}resetSession(){let e={action:"resetSession"};this.postMessage(e)}sethandlers(){this.updateConfig=()=>{let e={action:"config",value:Si};this.postMessage(e)},this.postMessage=e=>{try{window.webkit.messageHandlers.callbackHandler.postMessage(e)}catch(t){if(!window.webkit)return;console.warn("webkit callback",t)}}}},UL=WV;var Yie=Ns(oC()),OL=Ns(Bg()),GL=Ns(hC());var VV=new class{constructor(){(0,OL.default)(this),this.sethandlers(),(0,GL.default)(Si).on("change",this.updateConfig)}onARFrame(e){this.emit("frame",JSON.parse(e))}onHitTest(e){this.emit("hitTest",JSON.parse(e))}onAnchorsAdded(e){this.emit("anchorsAdded",JSON.parse(e))}onAnchorsRemoved(e){this.emit("anchorsRemoved",JSON.parse(e))}onSessionInterupted(){this.emit("sessionInterupted")}onSessionInteruptedEnded(){this.emit("sessionInteruptedEnded")}onTrackingStateChange(e){this.emit("trackingStateChange",e)}hitTest(e,t,n=Pg.featurePoint){let o={action:"hitTest",value:{x:UA(e,0,1),y:UA(t,0,1)},hitType:n};this.postMessage(o)}addAnchor(e=[]){let t={action:"addAnchor",value:e};this.postMessage(t)}removeAnchors(e=[]){let t={action:"removeAnchors",value:e};this.postMessage(t)}loadPage(e){let t={action:"loadPage",value:e};this.postMessage(t)}resetSession(){let e={action:"resetSession"};this.postMessage(e)}sethandlers(){this.updateConfig=()=>{let e={action:"config",value:Si};this.postMessage(e)},this.postMessage=e=>{try{window.webkit.messageHandlers.callbackHandler.postMessage(e)}catch(t){if(!window.webkit)return;console.warn("webkit callback",t)}}}onDebug(e){this.emit("debug",e)}},Ei=VV;var vf=class extends Jt{update(e){this.quaternion.fromArray(e.quaternion),this.position.fromArray(e.position),this.projectionMatrix.fromArray(e.projection),this.updateMatrix()}};var fC="ARAnchor",yf="ARPlaneAnchor",_g=class{constructor(e,t){this.type=t,this.identifier=e}},Ng=class extends _g{constructor(e){super(e.identifier,fC),this.group=new ht,this.group.matrixAutoUpdate=!1,this.update(e)}update(e){this.group.matrix.fromArray(e.transform)}},zL=new Fi(1,1,10,10);zL.applyMatrix4(new Qe().makeRotationX(Math.PI/2));var Fg=class extends _g{constructor(e){super(e.identifier,yf),this.group=new cn,this.group.matrixAutoUpdate=!1,this.mesh=new Xe(zL,new Qt({wireframe:!1,opacity:.3,transparent:!0,side:zt})),this.mesh.receiveShadow=!0,this.mesh.visible=!1,this.group.add(this.mesh),this.update(e)}update(e){this.group.matrix.fromArray(e.transform),this.mesh.position.fromArray(e.center),this.mesh.scale.x=e.extent[0],this.mesh.scale.z=e.extent[2]}getPosition(){return[this.group.matrix.elements[12],this.group.matrix.elements[13],this.group.matrix.elements[14]]}};var HL=.1,WL=new Fi(HL,HL,1,1);WL.applyMatrix4(new Qe().makeRotationX(-Math.PI/2));var xf=class{constructor(){this.tracking=!1,this.raycaster=new rf,this.origin=new he(.5*2-1,-.5*2+1),this.nup=0,this.nintersect=0,this.mesh=new Xe(WL,new pt({vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          varying vec2 vUv;

          float sdRect(vec2 uv2, vec2 tl, vec2 br) {
            vec2 d = max(tl - uv2, uv2 - br);
            return step(length(max(vec2(0.0), d)) + min(0.0, max(d.x, d.y)), 0.0);
          }

          void main() {
            float rect = 1.0 - sdRect(vUv, vec2(0.1), vec2(0.9));
            gl_FragColor = vec4(rect);
          }
        `,transparent:!0}))}update(e,t){this.objects=[],t.forEach(o=>{o.type===yf&&this.objects.push(o.mesh)}),this.raycaster.setFromCamera(this.origin,e);let n=this.raycaster.intersectObjects(this.objects)[0];this.nup++,n?(this.nintersect++,this.mesh.visible=!0,this.tracking=!0,this.mesh.position.copy(n.point),this.mesh.position.y+=1e-4):(this.mesh.visible=!1,this.tracking=!1)}getPosition(){return this.mesh.position}};var Qg=class i{static createButton(e){let t=document.createElement("button");function n(){let A=null;async function u(f){f.addEventListener("end",h),await e.xr.setSession(f),t.textContent="EXIT VR",A=f}function h(){A.removeEventListener("end",h),t.textContent="ENTER VR",A=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(A===null){let f={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",f).then(u)}else A.end()}}function o(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function a(){o(),t.textContent="VR NOT SUPPORTED"}function l(A){o(),console.warn("Exception when trying to call xr.isSessionSupported",A),t.textContent="VR NOT ALLOWED"}function c(A){A.style.position="absolute",A.style.bottom="20px",A.style.padding="12px 6px",A.style.border="1px solid #fff",A.style.borderRadius="4px",A.style.background="rgba(0,0,0,0.1)",A.style.color="#fff",A.style.font="normal 13px sans-serif",A.style.textAlign="center",A.style.opacity="0.5",A.style.outline="none",A.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",c(t),navigator.xr.isSessionSupported("immersive-vr").then(function(A){A?n():a(),A&&i.xrSessionIsGranted&&t.click()}).catch(l),t;{let A=document.createElement("a");return window.isSecureContext===!1?(A.href=document.location.href.replace(/^http:/,"https:"),A.innerHTML="WEBXR NEEDS HTTPS"):(A.href="https://immersiveweb.dev/",A.innerHTML="WEBXR NOT AVAILABLE"),A.style.left="calc(50% - 90px)",A.style.width="180px",A.style.textDecoration="none",c(A),A}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{i.xrSessionIsGranted=!0})}}};Qg.xrSessionIsGranted=!1;Qg.registerSessionGrantedListener();var VL={type:"change"},dC={type:"start"},XL={type:"end"},Ug=new Ws,YL=new Ur,XV=Math.cos(70*ii.DEG2RAD),Og=class extends Ni{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ia.ROTATE,MIDDLE:Ia.DOLLY,RIGHT:Ia.PAN},this.touches={ONE:gs.ROTATE,TWO:gs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Z){Z.addEventListener("keydown",G),this._domElementKeyEvents=Z},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",G),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(VL),n.update(),a=o.NONE},this.update=function(){let Z=new Y,L=new Lt().setFromUnitVectors(e.up,new Y(0,1,0)),N=L.clone().invert(),V=new Y,q=new Lt,ne=new Y,ae=2*Math.PI;return function(){let ce=n.object.position;Z.copy(ce).sub(n.target),Z.applyQuaternion(L),c.setFromVector3(Z),n.autoRotate&&a===o.NONE&&R(T()),n.enableDamping?(c.theta+=A.theta*n.dampingFactor,c.phi+=A.phi*n.dampingFactor):(c.theta+=A.theta,c.phi+=A.phi);let $=n.minAzimuthAngle,ue=n.maxAzimuthAngle;isFinite($)&&isFinite(ue)&&($<-Math.PI?$+=ae:$>Math.PI&&($-=ae),ue<-Math.PI?ue+=ae:ue>Math.PI&&(ue-=ae),$<=ue?c.theta=Math.max($,Math.min(ue,c.theta)):c.theta=c.theta>($+ue)/2?Math.max($,c.theta):Math.min(ue,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&C||n.object.isOrthographicCamera?c.radius=F(c.radius):c.radius=F(c.radius*u),Z.setFromSpherical(c),Z.applyQuaternion(N),ce.copy(n.target).add(Z),n.object.lookAt(n.target),n.enableDamping===!0?(A.theta*=1-n.dampingFactor,A.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(A.set(0,0,0),h.set(0,0,0));let xe=!1;if(n.zoomToCursor&&C){let Ge=null;if(n.object.isPerspectiveCamera){let ze=Z.length();Ge=F(ze*u);let Ze=ze-Ge;n.object.position.addScaledVector(E,Ze),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let ze=new Y(S.x,S.y,0);ze.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),xe=!0;let Ze=new Y(S.x,S.y,0);Ze.unproject(n.object),n.object.position.sub(Ze).add(ze),n.object.updateMatrixWorld(),Ge=Z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Ge!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Ge).add(n.object.position):(Ug.origin.copy(n.object.position),Ug.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ug.direction))<XV?e.lookAt(n.target):(YL.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ug.intersectPlane(YL,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),xe=!0);return u=1,C=!1,xe||V.distanceToSquared(n.object.position)>l||8*(1-q.dot(n.object.quaternion))>l||ne.distanceToSquared(n.target)>0?(n.dispatchEvent(VL),V.copy(n.object.position),q.copy(n.object.quaternion),ne.copy(n.target),xe=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Re),n.domElement.removeEventListener("pointerdown",ve),n.domElement.removeEventListener("pointercancel",Pe),n.domElement.removeEventListener("wheel",j),n.domElement.removeEventListener("pointermove",Se),n.domElement.removeEventListener("pointerup",Pe),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",G),n._domElementKeyEvents=null)};let n=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=o.NONE,l=1e-6,c=new TA,A=new TA,u=1,h=new Y,f=new he,d=new he,p=new he,m=new he,b=new he,g=new he,w=new he,I=new he,v=new he,E=new Y,S=new he,C=!1,M=[],D={};function T(){return 2*Math.PI/60/60*n.autoRotateSpeed}function B(){return Math.pow(.95,n.zoomSpeed)}function R(Z){A.theta-=Z}function P(Z){A.phi-=Z}let _=function(){let Z=new Y;return function(N,V){Z.setFromMatrixColumn(V,0),Z.multiplyScalar(-N),h.add(Z)}}(),Q=function(){let Z=new Y;return function(N,V){n.screenSpacePanning===!0?Z.setFromMatrixColumn(V,1):(Z.setFromMatrixColumn(V,0),Z.crossVectors(n.object.up,Z)),Z.multiplyScalar(N),h.add(Z)}}(),W=function(){let Z=new Y;return function(N,V){let q=n.domElement;if(n.object.isPerspectiveCamera){let ne=n.object.position;Z.copy(ne).sub(n.target);let ae=Z.length();ae*=Math.tan(n.object.fov/2*Math.PI/180),_(2*N*ae/q.clientHeight,n.object.matrix),Q(2*V*ae/q.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(_(N*(n.object.right-n.object.left)/n.object.zoom/q.clientWidth,n.object.matrix),Q(V*(n.object.top-n.object.bottom)/n.object.zoom/q.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function U(Z){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u/=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(Z){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u*=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(Z){if(!n.zoomToCursor)return;C=!0;let L=n.domElement.getBoundingClientRect(),N=Z.clientX-L.left,V=Z.clientY-L.top,q=L.width,ne=L.height;S.x=N/q*2-1,S.y=-(V/ne)*2+1,E.set(S.x,S.y,1).unproject(e).sub(e.position).normalize()}function F(Z){return Math.max(n.minDistance,Math.min(n.maxDistance,Z))}function z(Z){f.set(Z.clientX,Z.clientY)}function k(Z){O(Z),w.set(Z.clientX,Z.clientY)}function X(Z){m.set(Z.clientX,Z.clientY)}function te(Z){d.set(Z.clientX,Z.clientY),p.subVectors(d,f).multiplyScalar(n.rotateSpeed);let L=n.domElement;R(2*Math.PI*p.x/L.clientHeight),P(2*Math.PI*p.y/L.clientHeight),f.copy(d),n.update()}function ie(Z){I.set(Z.clientX,Z.clientY),v.subVectors(I,w),v.y>0?U(B()):v.y<0&&H(B()),w.copy(I),n.update()}function re(Z){b.set(Z.clientX,Z.clientY),g.subVectors(b,m).multiplyScalar(n.panSpeed),W(g.x,g.y),m.copy(b),n.update()}function se(Z){O(Z),Z.deltaY<0?H(B()):Z.deltaY>0&&U(B()),n.update()}function oe(Z){let L=!1;switch(Z.code){case n.keys.UP:Z.ctrlKey||Z.metaKey||Z.shiftKey?P(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(0,n.keyPanSpeed),L=!0;break;case n.keys.BOTTOM:Z.ctrlKey||Z.metaKey||Z.shiftKey?P(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(0,-n.keyPanSpeed),L=!0;break;case n.keys.LEFT:Z.ctrlKey||Z.metaKey||Z.shiftKey?R(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(n.keyPanSpeed,0),L=!0;break;case n.keys.RIGHT:Z.ctrlKey||Z.metaKey||Z.shiftKey?R(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(-n.keyPanSpeed,0),L=!0;break}L&&(Z.preventDefault(),n.update())}function le(){if(M.length===1)f.set(M[0].pageX,M[0].pageY);else{let Z=.5*(M[0].pageX+M[1].pageX),L=.5*(M[0].pageY+M[1].pageY);f.set(Z,L)}}function be(){if(M.length===1)m.set(M[0].pageX,M[0].pageY);else{let Z=.5*(M[0].pageX+M[1].pageX),L=.5*(M[0].pageY+M[1].pageY);m.set(Z,L)}}function De(){let Z=M[0].pageX-M[1].pageX,L=M[0].pageY-M[1].pageY,N=Math.sqrt(Z*Z+L*L);w.set(0,N)}function pe(){n.enableZoom&&De(),n.enablePan&&be()}function K(){n.enableZoom&&De(),n.enableRotate&&le()}function we(Z){if(M.length==1)d.set(Z.pageX,Z.pageY);else{let N=Ce(Z),V=.5*(Z.pageX+N.x),q=.5*(Z.pageY+N.y);d.set(V,q)}p.subVectors(d,f).multiplyScalar(n.rotateSpeed);let L=n.domElement;R(2*Math.PI*p.x/L.clientHeight),P(2*Math.PI*p.y/L.clientHeight),f.copy(d)}function me(Z){if(M.length===1)b.set(Z.pageX,Z.pageY);else{let L=Ce(Z),N=.5*(Z.pageX+L.x),V=.5*(Z.pageY+L.y);b.set(N,V)}g.subVectors(b,m).multiplyScalar(n.panSpeed),W(g.x,g.y),m.copy(b)}function fe(Z){let L=Ce(Z),N=Z.pageX-L.x,V=Z.pageY-L.y,q=Math.sqrt(N*N+V*V);I.set(0,q),v.set(0,Math.pow(I.y/w.y,n.zoomSpeed)),U(v.y),w.copy(I)}function de(Z){n.enableZoom&&fe(Z),n.enablePan&&me(Z)}function Ne(Z){n.enableZoom&&fe(Z),n.enableRotate&&we(Z)}function ve(Z){n.enabled!==!1&&(M.length===0&&(n.domElement.setPointerCapture(Z.pointerId),n.domElement.addEventListener("pointermove",Se),n.domElement.addEventListener("pointerup",Pe)),Ee(Z),Z.pointerType==="touch"?Ae(Z):Ie(Z))}function Se(Z){n.enabled!==!1&&(Z.pointerType==="touch"?Be(Z):We(Z))}function Pe(Z){Fe(Z),M.length===0&&(n.domElement.releasePointerCapture(Z.pointerId),n.domElement.removeEventListener("pointermove",Se),n.domElement.removeEventListener("pointerup",Pe)),n.dispatchEvent(XL),a=o.NONE}function Ie(Z){let L;switch(Z.button){case 0:L=n.mouseButtons.LEFT;break;case 1:L=n.mouseButtons.MIDDLE;break;case 2:L=n.mouseButtons.RIGHT;break;default:L=-1}switch(L){case Ia.DOLLY:if(n.enableZoom===!1)return;k(Z),a=o.DOLLY;break;case Ia.ROTATE:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(n.enablePan===!1)return;X(Z),a=o.PAN}else{if(n.enableRotate===!1)return;z(Z),a=o.ROTATE}break;case Ia.PAN:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(n.enableRotate===!1)return;z(Z),a=o.ROTATE}else{if(n.enablePan===!1)return;X(Z),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&n.dispatchEvent(dC)}function We(Z){switch(a){case o.ROTATE:if(n.enableRotate===!1)return;te(Z);break;case o.DOLLY:if(n.enableZoom===!1)return;ie(Z);break;case o.PAN:if(n.enablePan===!1)return;re(Z);break}}function j(Z){n.enabled===!1||n.enableZoom===!1||a!==o.NONE||(Z.preventDefault(),n.dispatchEvent(dC),se(Z),n.dispatchEvent(XL))}function G(Z){n.enabled===!1||n.enablePan===!1||oe(Z)}function Ae(Z){switch(_e(Z),M.length){case 1:switch(n.touches.ONE){case gs.ROTATE:if(n.enableRotate===!1)return;le(),a=o.TOUCH_ROTATE;break;case gs.PAN:if(n.enablePan===!1)return;be(),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(n.touches.TWO){case gs.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;pe(),a=o.TOUCH_DOLLY_PAN;break;case gs.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;K(),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&n.dispatchEvent(dC)}function Be(Z){switch(_e(Z),a){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;we(Z),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;me(Z),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;de(Z),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ne(Z),n.update();break;default:a=o.NONE}}function Re(Z){n.enabled!==!1&&Z.preventDefault()}function Ee(Z){M.push(Z)}function Fe(Z){delete D[Z.pointerId];for(let L=0;L<M.length;L++)if(M[L].pointerId==Z.pointerId){M.splice(L,1);return}}function _e(Z){let L=D[Z.pointerId];L===void 0&&(L=new he,D[Z.pointerId]=L),L.set(Z.pageX,Z.pageY)}function Ce(Z){let L=Z.pointerId===M[0].pointerId?M[1]:M[0];return D[L.pointerId]}n.domElement.addEventListener("contextmenu",Re),n.domElement.addEventListener("pointerdown",ve),n.domElement.addEventListener("pointercancel",Pe),n.domElement.addEventListener("wheel",j,{passive:!1}),this.update()}};var ZL=Ns(Bg()),wf=class{constructor(e){(0,ZL.default)(this),this.pointers=[],this.isDown=!1;let t={passive:!0};e.addEventListener("touchstart",n=>this.onTouchStart(n),t),e.addEventListener("touchmove",n=>this.onTouchMove(n),t),e.addEventListener("touchend",n=>this.onTouchEnd(n),t)}getPointers(e){let t=[];return e.touches!==void 0?Object.keys(e.touches).forEach(n=>{let o=e.touches[n];t.push({x:o.pageX/window.innerWidth,y:o.pageY/window.innerHeight})}):t.push({x:e.pageX/window.innerWidth,y:e.pageY/window.innerHeight}),t}onTouchStart(e){this.isDown=!0,this.pointers=this.getPointers(e),this.emit("start",this.pointers)}onTouchMove(e){this.isDown&&(this.pointers=this.getPointers(e),this.emit("move",this.pointers))}onTouchEnd(){this.isDown=!1,this.emit("end",this.pointers)}};var Jl={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var nr=class extends qn{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof pt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=jn.clone(e.uniforms),this.material=new pt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new tr(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var bf=class extends qn{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){let o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);let l,c;this.inverse?(l=0,c=1):(l=1,c=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,l,4294967295),a.buffers.stencil.setClear(c),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.color.setMask(!0),a.buffers.depth.setMask(!0),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}},Gg=class extends qn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var _o=class{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){let n=e.getSize(new he);this._width=n.width,this._height=n.height,t=new Mt(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:bn}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new nr(Jl),this.copyPass.material.blending=Zi,this.clock=new Ea}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),n=!1;for(let o=0,a=this.passes.length;o<a;o++){let l=this.passes[o];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),l.needsSwap){if(n){let c=this.renderer.getContext(),A=this.renderer.state.buffers.stencil;A.setFunc(c.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),A.setFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}bf!==void 0&&(l instanceof bf?n=!0:l instanceof Gg&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){let t=this.renderer.getSize(new he);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let n=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(n,o),this.renderTarget2.setSize(n,o);for(let a=0;a<this.passes.length;a++)this.passes[a].setSize(n,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var OA=class extends qn{constructor(e,t,n,o,a){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=o,this.clearAlpha=a!==void 0?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ke}render(e,t,n){let o=e.autoClear;e.autoClear=!1;let a,l;this.overrideMaterial!==void 0&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,a),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=l),e.autoClear=o}};var pC={name:"ConvolutionShader",defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new he(.001953125,0)},cKernel:{value:[]}},vertexShader:`

		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float cKernel[ KERNEL_SIZE_INT ];

		uniform sampler2D tDiffuse;
		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vec2 imageCoord = vUv;
			vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );

			for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {

				sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];
				imageCoord += uImageIncrement;

			}

			gl_FragColor = sum;

		}`,buildKernel:function(i){let t=2*Math.ceil(i*3)+1;t>25&&(t=25);let n=(t-1)*.5,o=new Array(t),a=0;for(let l=0;l<t;++l)o[l]=YV(l-n,i),a+=o[l];for(let l=0;l<t;++l)o[l]/=a;return o}};function YV(i,e){return Math.exp(-(i*i)/(2*e*e))}var GA=class i extends qn{constructor(e=1,t=25,n=4){super(),this.renderTargetX=new Mt(1,1,{type:bn}),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new Mt(1,1,{type:bn}),this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=jn.clone(zg.uniforms),this.combineUniforms.strength.value=e,this.materialCombine=new pt({name:zg.name,uniforms:this.combineUniforms,vertexShader:zg.vertexShader,fragmentShader:zg.fragmentShader,blending:Io,transparent:!0});let o=pC;this.convolutionUniforms=jn.clone(o.uniforms),this.convolutionUniforms.uImageIncrement.value=i.blurX,this.convolutionUniforms.cKernel.value=pC.buildKernel(n),this.materialConvolution=new pt({name:o.name,uniforms:this.convolutionUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new tr(null)}render(e,t,n,o,a){a&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=n.texture,this.convolutionUniforms.uImageIncrement.value=i.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=i.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,a&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.clear&&e.clear(),this.fsQuad.render(e)}setSize(e,t){this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}},zg={name:"CombineShader",uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float strength;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = strength * texel;

		}`};GA.blurX=new he(.001953125,0);GA.blurY=new he(0,.001953125);var Ra={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ke(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var Hg=class i extends qn{constructor(e,t,n,o){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=o,this.resolution=e!==void 0?new he(e.x,e.y):new he(256,256),this.clearColor=new ke(0,0,0);let a={minFilter:St,magFilter:St,format:Xn};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new Mt(l,c,a),this.renderTargetBright.texture.name="UnrealBloomPass0.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){let p=new Mt(l,c,a);p.texture.name="UnrealBloomPass0.h"+d,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);let m=new Mt(l,c,a);m.texture.name="UnrealBloomPass0.v"+d,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),l=Math.round(l/2),c=Math.round(c/2)}Ra===void 0&&console.error("THREE.UnrealBloomPass0 relies on LuminosityHighPassShader");let A=Ra;this.highPassUniforms=jn.clone(A.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new pt({uniforms:this.highPassUniforms,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,defines:{}}),this.separableBlurMaterials=[];let u=[3,5,7,9,11];l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[d])),this.separableBlurMaterials[d].uniforms.texSize.value=new he(l,c),l=Math.round(l/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;let h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,Jl===void 0&&console.error("THREE.UnrealBloomPass0 relies on CopyShader");let f=Jl;this.copyUniforms=jn.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new pt({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:Io,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ke,this.oldClearAlpha=1,this.basic=new Qt,this.fsQuad=new tr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),o=Math.round(t/2);this.renderTargetBright.setSize(n,o);for(let a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(n,o),this.renderTargetsVertical[a].setSize(n,o),this.separableBlurMaterials[a].uniforms.texSize.value=new he(n,o),n=Math.round(n/2),o=Math.round(o/2)}render(e,t,n,o,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let A=0;A<this.nMips;A++)this.fsQuad.material=this.separableBlurMaterials[A],this.separableBlurMaterials[A].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[A].uniforms.direction.value=i.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[A]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[A].uniforms.colorTexture.value=this.renderTargetsHorizontal[A].texture,this.separableBlurMaterials[A].uniforms.direction.value=i.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[A]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[A];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeperableBlurMaterial(e){return new pt({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new he(.5,.5)},direction:{value:new he(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
            varying vec2 vUv;
            uniform sampler2D colorTexture;
            uniform vec2 texSize;
            uniform vec2 direction;
            
            float gaussianPdf(in float x, in float sigma) {
                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
            }
            void main() {
                  vec2 invSize = 1.0 / texSize;
                  float fSigma = float(SIGMA);
                  float weightSum = gaussianPdf(0.0, fSigma);
                  float alphaSum = 0.0;
                  vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
                  for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
                    float x = float(i);
                    float w = gaussianPdf(x, fSigma);
                    vec2 uvOffset = direction * invSize * x;
                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
                    diffuseSum += (sample1.rgb + sample2.rgb) * w;
                    alphaSum += (sample1.a + sample2.a) * w;
                    weightSum += 2.0 * w;
                  }
                  gl_FragColor = vec4(diffuseSum/weightSum, alphaSum/weightSum);
            }`})}getCompositeMaterial(e){return new pt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform sampler2D dirtTexture;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Hg.BlurDirectionX=new he(1,0);Hg.BlurDirectionY=new he(0,1);var ka=class i extends qn{constructor(e,t,n,o){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=o,this.resolution=e!==void 0?new he(e.x,e.y):new he(256,256),this.clearColor=new ke(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let a=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new Mt(a,l,{type:bn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){let d=new Mt(a,l,{type:bn});d.texture.name="UnrealBloomPass.h"+f,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);let p=new Mt(a,l,{type:bn});p.texture.name="UnrealBloomPass.v"+f,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),a=Math.round(a/2),l=Math.round(l/2)}let c=Ra;this.highPassUniforms=jn.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new pt({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),this.separableBlurMaterials=[];let A=[3,5,7,9,11];a=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(A[f])),this.separableBlurMaterials[f].uniforms.invSize.value=new he(1/a,1/l),a=Math.round(a/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;let u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=u,this.bloomTintColors=[new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let h=Jl;this.copyUniforms=jn.clone(h.uniforms),this.blendMaterial=new pt({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:Io,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ke,this.oldClearAlpha=1,this.basic=new Qt,this.fsQuad=new tr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),o=Math.round(t/2);this.renderTargetBright.setSize(n,o);for(let a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(n,o),this.renderTargetsVertical[a].setSize(n,o),this.separableBlurMaterials[a].uniforms.invSize.value=new he(1/n,1/o),n=Math.round(n/2),o=Math.round(o/2)}render(e,t,n,o,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let A=0;A<this.nMips;A++)this.fsQuad.material=this.separableBlurMaterials[A],this.separableBlurMaterials[A].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[A].uniforms.direction.value=i.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[A]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[A].uniforms.colorTexture.value=this.renderTargetsHorizontal[A].texture,this.separableBlurMaterials[A].uniforms.direction.value=i.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[A]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[A];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeperableBlurMaterial(e){let t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new pt({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new he(.5,.5)},direction:{value:new he(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new pt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};ka.BlurDirectionX=new he(1,0);ka.BlurDirectionY=new he(0,1);var Cf={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},Sf={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},Wg={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};var Vg=class extends qn{constructor(e,t){super(),this.edgesRT=new Mt(e,t,{depthBuffer:!1,type:bn}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Mt(e,t,{depthBuffer:!1,type:bn}),this.weightsRT.texture.name="SMAAPass.weights";let n=this,o=new Image;o.src=this.getAreaTexture(),o.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new Vt,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=o,this.areaTexture.minFilter=St,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;let a=new Image;a.src=this.getSearchTexture(),a.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new Vt,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=a,this.searchTexture.magFilter=It,this.searchTexture.minFilter=It,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=jn.clone(Cf.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new pt({defines:Object.assign({},Cf.defines),uniforms:this.uniformsEdges,vertexShader:Cf.vertexShader,fragmentShader:Cf.fragmentShader}),this.uniformsWeights=jn.clone(Sf.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new pt({defines:Object.assign({},Sf.defines),uniforms:this.uniformsWeights,vertexShader:Sf.vertexShader,fragmentShader:Sf.fragmentShader}),this.uniformsBlend=jn.clone(Wg.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new pt({uniforms:this.uniformsBlend,vertexShader:Wg.vertexShader,fragmentShader:Wg.fragmentShader}),this.needsSwap=!1,this.fsQuad=new tr(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,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"}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}};var mC={uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float l = luminance( texel.rgb );

			gl_FragColor = vec4( l, l, l, texel.w );

		}`};var gC={uniforms:{tDiffuse:{value:null},resolution:{value:new he}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;

		void main() {

			vec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );

		// kernel definition (in glsl matrices are filled in column-major order)

			const mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 ); // x direction kernel
			const mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 ); // y direction kernel

		// fetch the 3x3 neighbourhood of a fragment

		// first column

			float tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;
			float tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;
			float tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;

		// second column

			float tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;
			float tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;
			float tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;

		// third column

			float tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;
			float tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;
			float tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;

		// gradient value in x direction

			float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +
				Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +
				Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;

		// gradient value in y direction

			float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +
				Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +
				Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;

		// magnitute of the total gradient

			float G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );

			gl_FragColor = vec4( vec3( G ), 1 );

		}`};var sse={uniforms:{tDiffuse:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`};var KL={uniforms:{tDiffuse:{value:null}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform sampler2D tDiffuse;
		varying vec2 vUv;
        const vec4 white = vec4(1.,1.,1.,1.);

		void main() {
			vec4 color = texture2D(tDiffuse, vUv);
			gl_FragColor = vec4(1,1,1,1) - color;
		}`};var vC={uniforms:{tDiffuse:{type:"t",value:null},threshold:{value:.8},clearsaturation:{value:.5},color:{value:[0,0,0,1]},clearcolor:{value:[0,0,0,0]},uTime:{value:0}},vertexShader:`
        varying float x, y, z;
		varying vec2 vUv;
		varying float r_mod;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0 );
            x = gl_Position.x; y = gl_Position.y; z = gl_Position.z;
            x += y; y -= x; z += x - y;
		}`,fragmentShader:`
        uniform float uTime;
		uniform sampler2D tDiffuse;
        uniform float threshold;
        uniform float clearsaturation;
        uniform vec4 color;
        uniform vec4 clearcolor;
		varying vec2 vUv;
        varying float x, y, z;
		varying float r_mod;

		float rand(float s, float r) {
            return mod(mod(s, r + r_mod) * 112341.0, 1.0);
        }
        const vec4 clear = vec4(0,0,0,0);
        const vec4 black = vec4(0,0,0,1);

		void main() {
			vec4 c = texture2D(tDiffuse, vUv);
            float bright = 0.33333 * (c.r + c.g + c.b);

            if (bright < threshold) {
                float r = rand(uTime * 1.0, x * y);
                if (r < clearsaturation)
                    c = clearcolor;
                else
                    c = color;
             } else
                c = clearcolor;
			gl_FragColor = c;
		}`};var Xg=function(){var i=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(h){h.preventDefault(),n(++i%e.children.length)},!1);function t(h){return e.appendChild(h.dom),h}function n(h){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===h?"block":"none";i=h}var o=(performance||Date).now(),a=o,l=0,c=t(new Xg.Panel("FPS","#0ff","#002")),A=t(new Xg.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new Xg.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){l++;var h=(performance||Date).now();if(A.update(h-o,200),h>=a+1e3&&(c.update(l*1e3/(h-a),100),a=h,l=0,u)){var f=performance.memory;u.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return h},update:function(){o=this.end()},domElement:e,setMode:n}};Xg.Panel=function(i,e,t){var n=1/0,o=0,a=Math.round,l=a(window.devicePixelRatio||1),c=80*l,A=48*l,u=3*l,h=2*l,f=3*l,d=15*l,p=74*l,m=30*l,b=document.createElement("canvas");b.width=c,b.height=A,b.style.cssText="width:80px;height:48px";var g=b.getContext("2d");return g.font="bold "+9*l+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,c,A),g.fillStyle=e,g.fillText(i,u,h),g.fillRect(f,d,p,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(f,d,p,m),{dom:b,update:function(w,I){n=Math.min(n,w),o=Math.max(o,w),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,c,d),g.fillStyle=e,g.fillText(a(w)+" "+i+" ("+a(n)+"-"+a(o)+")",u,h),g.drawImage(b,f+l,d,p-l,m,f,d,p-l,m),g.fillRect(f+p-l,d,l,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(f+p-l,d,l,a((1-w/I)*m))}}};var JL=new Y,ZV=new Lt,jL=new Y,Yg=class extends ht{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}};var Ks=new Qe,KV=new Qe,Ef=class{constructor(e={}){let t=this,n,o,a,l,c={camera:{fov:0,style:""},objects:new WeakMap},A=e.element!==void 0?e.element:document.createElement("div");A.style.overflow="hidden",this.domElement=A;let u=document.createElement("div");u.style.transformOrigin="0 0",u.style.pointerEvents="none",A.appendChild(u);let h=document.createElement("div");h.style.transformStyle="preserve-3d",u.appendChild(h),this.getSize=function(){return{width:n,height:o}},this.render=function(b,g){let w=g.projectionMatrix.elements[5]*l;c.camera.fov!==w&&(u.style.perspective=g.isPerspectiveCamera?w+"px":"",c.camera.fov=w),g.view&&g.view.enabled?(u.style.transform=`translate( ${-g.view.offsetX*(n/g.view.width)}px, ${-g.view.offsetY*(o/g.view.height)}px )`,u.style.transform+=`scale( ${g.view.fullWidth/g.view.width}, ${g.view.fullHeight/g.view.height} )`):u.style.transform="",b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),g.parent===null&&g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld();let I,v;g.isOrthographicCamera&&(I=-(g.right+g.left)/2,v=(g.top+g.bottom)/2);let E=g.view&&g.view.enabled?g.view.height/g.view.fullHeight:1,S=g.isOrthographicCamera?`scale( ${E} )scale(`+w+")translate("+f(I)+"px,"+f(v)+"px)"+d(g.matrixWorldInverse):`scale( ${E} )translateZ(`+w+"px)"+d(g.matrixWorldInverse),C=S+"translate("+a+"px,"+l+"px)";c.camera.style!==C&&(h.style.transform=C,c.camera.style=C),m(b,b,g,S)},this.setSize=function(b,g){n=b,o=g,a=n/2,l=o/2,A.style.width=b+"px",A.style.height=g+"px",u.style.width=b+"px",u.style.height=g+"px",h.style.width=b+"px",h.style.height=g+"px"};function f(b){return Math.abs(b)<1e-10?0:b}function d(b){let g=b.elements;return"matrix3d("+f(g[0])+","+f(-g[1])+","+f(g[2])+","+f(g[3])+","+f(g[4])+","+f(-g[5])+","+f(g[6])+","+f(g[7])+","+f(g[8])+","+f(-g[9])+","+f(g[10])+","+f(g[11])+","+f(g[12])+","+f(-g[13])+","+f(g[14])+","+f(g[15])+")"}function p(b){let g=b.elements;return"translate(-50%,-50%)"+("matrix3d("+f(g[0])+","+f(g[1])+","+f(g[2])+","+f(g[3])+","+f(-g[4])+","+f(-g[5])+","+f(-g[6])+","+f(-g[7])+","+f(g[8])+","+f(g[9])+","+f(g[10])+","+f(g[11])+","+f(g[12])+","+f(g[13])+","+f(g[14])+","+f(g[15])+")")}function m(b,g,w,I){if(b.isCSS3DObject){let v=b.visible===!0&&b.layers.test(w.layers)===!0;if(b.element.style.display=v===!0?"":"none",v===!0){b.onBeforeRender(t,g,w);let E;b.isCSS3DSprite?(Ks.copy(w.matrixWorldInverse),Ks.transpose(),b.rotation2D!==0&&Ks.multiply(KV.makeRotationZ(b.rotation2D)),b.matrixWorld.decompose(JL,ZV,jL),Ks.setPosition(JL),Ks.scale(jL),Ks.elements[3]=0,Ks.elements[7]=0,Ks.elements[11]=0,Ks.elements[15]=1,E=p(Ks)):E=p(b.matrixWorld);let S=b.element,C=c.objects.get(b);if(C===void 0||C.style!==E){S.style.transform=E;let M={style:E};c.objects.set(b,M)}S.parentNode!==h&&h.appendChild(S),b.onAfterRender(t,g,w)}}for(let v=0,E=b.children.length;v<E;v++)m(b.children[v],g,w,I)}}};var Zg=class extends To{constructor(e=null){super();let t=new En;t.deleteAttribute("uv");let n=new On({side:Yn}),o=new On,a=5;e!==null&&e._useLegacyLights===!1&&(a=900);let l=new ds(16777215,a,28,2);l.position.set(.418,16.199,.3),this.add(l);let c=new Xe(t,n);c.position.set(-.757,13.219,.717),c.scale.set(31.713,28.305,28.591),this.add(c);let A=new Xe(t,o);A.position.set(-10.906,2.009,1.846),A.rotation.set(0,-.195,0),A.scale.set(2.328,7.905,4.651),this.add(A);let u=new Xe(t,o);u.position.set(-5.607,-.754,-.758),u.rotation.set(0,.994,0),u.scale.set(1.97,1.534,3.955),this.add(u);let h=new Xe(t,o);h.position.set(6.167,.857,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),this.add(h);let f=new Xe(t,o);f.position.set(-2.017,.018,6.124),f.rotation.set(0,.333,0),f.scale.set(2.002,4.566,2.064),this.add(f);let d=new Xe(t,o);d.position.set(2.291,-.756,-2.621),d.rotation.set(0,-.286,0),d.scale.set(1.546,1.552,1.496),this.add(d);let p=new Xe(t,o);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),this.add(p);let m=new Xe(t,zA(50));m.position.set(-16.116,14.37,8.208),m.scale.set(.1,2.428,2.739),this.add(m);let b=new Xe(t,zA(50));b.position.set(-16.109,18.021,-8.207),b.scale.set(.1,2.425,2.751),this.add(b);let g=new Xe(t,zA(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);let w=new Xe(t,zA(43));w.position.set(-.462,8.89,14.52),w.scale.set(4.38,5.441,.088),this.add(w);let I=new Xe(t,zA(20));I.position.set(3.235,11.486,-12.541),I.scale.set(2.5,2,.1),this.add(I);let v=new Xe(t,zA(100));v.position.set(0,20,0),v.scale.set(1,.1,1),this.add(v)}dispose(){let e=new Set;this.traverse(t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))});for(let t of e)t.dispose()}};function zA(i){let e=new Qt;return e.color.setScalar(i),e}var Kg=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},vse=new Ci(-1,1,1,-1,0,1),qL=new qe;qL.setAttribute("position",new He([-1,3,0,-1,-1,0,3,-1,0],3));qL.setAttribute("uv",new He([0,2,0,0,2,0],2));var Mf=new qe;Mf.setAttribute("position",new it(new Float32Array([-1,-1,3,-1,-1,3]),2));Mf.setAttribute("uv",new it(new Float32Array([0,0,2,0,0,2]),2));Mf.boundingSphere=new Xt;Mf.computeBoundingSphere=function(){};var JV=new Ci,HA=class{constructor(e){this._mesh=new Xe(Mf,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,JV)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}},jV={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new Qe},viewMat:{value:new Qe},projViewMat:{value:new Qe},projectionMatrixInv:{value:new Qe},viewMatrixInv:{value:new Qe},cameraPos:{value:new Y},resolution:{value:new he},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform highp sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float[SAMPLES] samplesR;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        return getWorldPosLog(vec3(coord, depth));
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
      vec3 bitangent = cross(normal, tangent);
      mat3 tbn = mat3(tangent, bitangent, normal);
      float occluded = 0.0;
      float totalWeight = 0.0;
     /* float radiusScreen = distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(48.0, 0.0) / resolution)
      );/*vUv.x < 0.5 ? radius : min(distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(100.0, 0.0) / resolution)
      ), radius);
      float distanceFalloffScreen = radiusScreen * 0.2;*/
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      for(float i = 0.0; i < FSAMPLES; i++) {
        vec3 sampleDirection = 
        tbn * 
        samples[int(i)];
        ;
        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;
        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) 
         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/
        #ifdef LOGDEPTH
        float distSample = linearize_depth_log(sampleDepth, near, far);
        #else
        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);
        #endif
        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);
        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);
        float weight = dot(sampleDirection, normal);
          occluded += rangeCheck * weight * 
            (distSample + bias
               < distWorld ? 1.0 : 0.0) * (
          (dot(
            diff,
            diff
             
            ) < 1.0 || (sampleDepth == depth) || (
              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0
            ) ? 0.0 : 1.0)
          );
          totalWeight += weight;
      }
      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);
}`},qV={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Qe},viewMat:{value:new Qe},projectionMatrixInv:{value:new Qe},viewMatrixInv:{value:new Qe},cameraPos:{value:new Y},resolution:{value:new he},color:{value:new Y(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform highp sampler2D downsampledDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform bool fog;
    uniform bool fogExp;
    uniform bool colorMultiply;
    uniform float fogDensity;
    uniform float fogNear;
    uniform float fogFar;
    uniform float radius;
    uniform float distanceFalloff;
    uniform vec3 cameraPos;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        #ifdef HALFRES 
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

     
        float finalAo = pow(texel.a, intensity);
        float fogFactor;
        float fogDepth = distance(
            cameraPos,
            getWorldPos(depth, vUv)
        );
        if (fog) {
            if (fogExp) {
                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
            } else {
                fogFactor = smoothstep( fogNear, fogFar, fogDepth );
            }
        }
        finalAo = mix(finalAo, 1.0, fogFactor);
        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = LinearTosRGB(gl_FragColor);
        }
    }
    `},$V={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Qe},viewMat:{value:new Qe},projectionMatrixInv:{value:new Qe},viewMatrixInv:{value:new Qe},cameraPos:{value:new Y},resolution:{value:new he},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.a;
        float baseOcc = data.a;
        vec3 normal = data.rgb * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        if (d == 1.0) {
          gl_FragColor = data;
          return;
        }
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
            radiusToUse * distanceFalloff
        : distanceFalloff;


        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.a;
            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
            float rangeCheck = dSample == 1.0 ? 0.0 :exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        if (count > 0.0) {
          occlusion /= count;
        }
        #ifdef LOGDEPTH
          occlusion = clamp(occlusion, 0.0, 1.0);
          if (occlusion == 0.0) {
            occlusion = 1.0;
          }
        #endif
        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);
    }
    `},eX={uniforms:{sceneDepth:{value:null},resolution:{value:new he},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new Qe},projectionMatrixInv:{value:new Qe},logDepth:{value:!1}},vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform highp sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        vec2[] uvSamples = vec2[4](
            uv,
            uv + vec2(pixelSize.x, 0.0),
            uv + vec2(0.0, pixelSize.y),
            uv + pixelSize
        );
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[] samples = float[4](depth00, depth10, depth01, depth11);
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
       /* float[] samples = float[4](depth00, depth10, depth01, depth11);
        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);
        float[] distances = float[4](depth00, depth10, depth01, depth11);
        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));

        int remaining[3];
        int rejected[3];
        int i, j, k;

        for(i = 0, j = 0, k = 0; i < 4; ++i) {
            if (distances[i] < maxDistance) {
                remaining[j++] = i;
            } else {
                rejected[k++] = i;
            }
        }
        for(;j < 3;++j) {
            remaining[j] = rejected[--k];
        }
        vec3 s = vec3(
            samples[remaining[0]],
            samples[remaining[1]],
            samples[remaining[2]]
        );
        c = (s.x + s.y + s.z) / 3.0;

        distances[0] = abs(c - s.x);
        distances[1] = abs(c - s.y);
        distances[2] = abs(c - s.z);

        float minDistance = min(min(distances[0], distances[1]), distances[2]);

        for(i = 0; i < 3; ++i) {
            if (distances[i] == minDistance) {
                break;
            }
        }*/
      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]
        ), 0.0);*/
    }`},$L="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",bse=Uint8Array.from(atob($L),i=>i.charCodeAt(0));var tX=Uint8Array.from(atob($L),i=>i.charCodeAt(0));function eR(i,e,t){if(e.getQueryParameter(i,e.QUERY_RESULT_AVAILABLE)){let a=e.getQueryParameter(i,e.QUERY_RESULT)/1e6;t.lastTime=a}else setTimeout(()=>{eR(i,e,t)},1)}var If=class extends Kg{constructor(e,t,n=512,o=512){super(),this.width=n,this.height=o,this.clear=!0,this.camera=t,this.scene=e,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new ke(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,autoRenderBeauty:!0,colorMultiply:!0},{set:(a,l,c)=>{let A=a[l];return a[l]=c,l==="aoSamples"&&A!==c&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),l==="denoiseSamples"&&A!==c&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),l==="halfRes"&&A!==c&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),l==="depthAwareUpsampling"&&A!==c&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.beautyRenderTarget=new Mt(this.width,this.height,{minFilter:St,magFilter:It}),this.beautyRenderTarget.depthTexture=new ma(this.width,this.height,As),this.beautyRenderTarget.depthTexture.format=Os,this.writeTargetInternal=new Mt(this.width,this.height,{minFilter:St,magFilter:St,depthBuffer:!1}),this.readTargetInternal=new Mt(this.width,this.height,{minFilter:St,magFilter:St,depthBuffer:!1}),this.bluenoise=new zs(tX,128,128),this.bluenoise.colorSpace=Gs,this.bluenoise.wrapS=_i,this.bluenoise.wrapT=_i,this.bluenoise.minFilter=It,this.bluenoise.magFilter=It,this.bluenoise.needsUpdate=!0,this.lastTime=0,this._r=new he,this._c=new ke}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new Ph(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=Ag,this.depthDownsampleTarget.texture[0].type=Gr,this.depthDownsampleTarget.texture[0].minFilter=It,this.depthDownsampleTarget.texture[0].magFilter=It,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=Xn,this.depthDownsampleTarget.texture[1].type=bn,this.depthDownsampleTarget.texture[1].minFilter=It,this.depthDownsampleTarget.texture[1].magFilter=It,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new HA(new pt(eX))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);let t={...jV};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new pt(t)):this.effectShaderQuad=new HA(new pt(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);let t={...$V};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new pt(t)):this.poissonBlurQuad=new HA(new pt(t))}configureEffectCompositer(e=!1){let t={...qV};e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new pt(t)):this.effectCompositerQuad=new HA(new pt(t))}generateHemisphereSamples(e){let t=[];for(let n=0;n<e;n++){let o=2.399963*n,a=Math.sqrt(n+.5)/Math.sqrt(e),l=a*Math.cos(o),c=a*Math.sin(o),A=Math.sqrt(1-(l*l+c*c));t.push(new Y(l,c,A))}return t}generateHemisphereSamplesR(e){let t=[];for(let n=0;n<e;n++)t.push((n+1)/e);return t}generateDenoiseSamples(e,t){let n=2*Math.PI*t/e,o=1/e,a=o,l=[],c=o,A=0;for(let u=0;u<e;u++)l.push(new he(Math.cos(A),Math.sin(A)).multiplyScalar(Math.pow(c,.75))),c+=a,A+=n;return l}setSize(e,t){this.width=e,this.height=t;let n=this.configuration.halfRes?.5:1;this.beautyRenderTarget.setSize(e,t),this.writeTargetInternal.setSize(e*n,t*n),this.readTargetInternal.setSize(e*n,t*n),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*n,t*n)}render(e,t,n,o,a){e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer));let l,c,A;this.debugMode&&(l=e.getContext(),c=l.getExtension("EXT_disjoint_timer_query_webgl2"),c===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.configuration.autoRenderBeauty&&(e.setRenderTarget(this.beautyRenderTarget),e.render(this.scene,this.camera)),this.debugMode&&(A=l.createQuery(),l.beginQuery(c.TIME_ELAPSED_EXT,A));let u=e.xr.enabled;e.xr.enabled=!1,this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let h=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(h*=.5),this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Y),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=h,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let f=0;f<this.configuration.denoiseIterations;f++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Y),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=h,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=f,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=h,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Y),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.renderToScreen?null:t),this.effectCompositerQuad.render(e),this.debugMode&&(l.endQuery(c.TIME_ELAPSED_EXT),eR(A,l,this)),e.xr.enabled=u}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}};window.ARKit=Ei;window.THREE=Ta;function xs(...i){console.log("[lim]",...i)}window.nerk=xs;function Pa(){return window._embedded==!0}window.isembedded=Pa;var WA=class i extends Ni{static create=(...e)=>new i(...e);constructor(e,t){if(super(),window.app=this,this.parent=e,this.width=this.parent.clientWidth,this.height=this.parent.clientHeight,this.clock=new Ea,this.idletime=180*1e3,this.anchors={},this.mixers=[],this.updatefns=[],this.resizefns=[],this.trackingstate="",this.interval=0,this.resizeTimeout=0,this.campos=new Y,this.lastcampos=new Y,Si.imageFrame=!1,Si.pointCloud=!1,Ei.updateConfig(),Pa()||(document.body.style.background="#bbbbb0"),this.initevents(),this.makekeytab(),this.scene=new To,this.renderer=new mA({alpha:!0,antialias:!1,depth:!0,stencil:!1,powerPreference:"high-performance"}),this.renderer.outputColorSpace="srgb",this.renderer.autoClear=!0,this.renderer.info.autoReset=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=ag,this.renderer.useLegacyLights=!1,this.parent.appendChild(this.renderer.domElement),Ef&&(this.cssrend=new Ef,this.cssscene=new To,this.cssrend.domElement.id="css3d",this.cssrend.domElement.style.position="absolute",this.cssrend.domElement.style.background="rgba(0,0,0,0)",this.cssrend.domElement.style.overflow="hidden",this.cssrend.domElement.style.top=0,this.cssrend.domElement.style.left=0,this.cssrend.domElement.style.pointerEvents="none",this.parent.appendChild(this.cssrend.domElement)),Pa())this.camera=new vf,this.camera.far=400,this.camera.updateMatrixWorld();else{let l=40,c=600,A=.1,u=this.width/this.height;this.camera=new Jt(l,u,A,c),this.camera.position.set(0,.8,4)}this.camtform=new cn,this.scene.add(this.camtform),this.camtform.add(this.camera),Pa()&&(this.camtform.position.y=.8),this.composer=this.composerao(),this.lightset1();let n=new Fl(this.renderer);n.compileEquirectangularShader(),this.envmap=n.fromScene(new Zg).texture,this.envmap.colorSpace="srgb",this.scene.environment=this.envmap,this.renderer.toneMapping=lg,this.renderer.toneMappingExposure=.9,this.scene.fog=new gA(12303280,.005),this.touchControls=new wf(this.renderer.domElement),this.setuphandlers(),this.bindlisteners(),this.resize(),Pa()||(this.orbitcontrols=new Og(this.camera,this.renderer.domElement),this.orbitcontrols.enableDamping=!0,this.orbitcontrols.dampingFactor=.6,this.orbitcontrols.touches.ONE=gs.PAN,this.orbitcontrols.touches.TWO=gs.DOLLY_ROTATE,this.restorecamera()),this.makefloor(),Pa()&&(this.planeindicator=new xf,this.overlayui()),setInterval(this.checkidle.bind(this),1e3),this.anchorMesh=(()=>{let l=new En(.1,.1,.1),c=new Ys({opacity:.7,side:Pi,transparent:!0}),A=new Xe(l,c);return l.translate(0,.05,0),A.castShadow=!0,A.receiveShadow=!0,A})(),Pa()?this.renderer.setAnimationLoop(this.render.bind(this)):this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.parent.focus();let o=new On;o.color.setHex(5592405),o.transparent=!0,o.opacity=1,o.side=zt,this.overridematerial=o;let a=sotext();a.position.set(1,1,-2),this.scene.add(a),this.inited=new Date().toLocaleString()}async p0place(){let e=(await place()).a;e.position.y=-1,this.scene.add(e)}lightset0(){let e=new Vl(16777215,16777215,1),t=new ps(16777215,1);e.intensity=.5,this.hemilight=e,this.scene.add(e),t.intensity=1,t.position.set(-10,30,10),t.shadow.mapSize.set(2048,2048),t.castShadow=!0;{let n=20;t.shadow.camera.left=-n,t.shadow.camera.right=n,t.shadow.camera.top=n,t.shadow.camera.bottom=-n,t.shadow.camera.aspect=1,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.005}this.dlight=t,this.scene.add(t)}lightset1(){let e=new Vl(16777215,0,1),t=new ps(16777215,1),n=new Ca;n.intensity=.5,this.scene.add(n),e.intensity=.3,this.hemilight=e,this.scene.add(e),t.intensity=.5,t.position.set(-10,30,10),t.shadow.mapSize.set(2048,2048),t.castShadow=!0;{let o=25;t.shadow.camera.left=-o,t.shadow.camera.right=o,t.shadow.camera.top=o,t.shadow.camera.bottom=-o,t.shadow.camera.aspect=1,t.shadow.camera.near=1,t.shadow.camera.far=50}this.dlight=t,this.scene.add(t)}makefloor(){this.floor=new Xe(new yr(150,150,.001,20),new SA),this.floor.receiveShadow=!0,this.floor.material.transparent=!0,this.floor.material.opacity=.5,this.floor.renderOrder=1,this.scene.add(this.floor)}overlayui(){document.body.style.background="transparent";let e=this.makebutton("exit");e.style.position="absolute",e.style.bottom="1px",e.style.right="1px",document.body.appendChild(e),e.addEventListener("click",()=>No({action:"exit"})),e=this.makebutton("reload"),e.style.position="absolute",e.style.bottom="1px",e.style.right="60px",document.body.appendChild(e),e.addEventListener("click",()=>{No({action:"reload"})})}composerao(){let e=new _o(this.renderer),t=new If(this.scene,this.camera,this.parent.clientWidth,this.parent.clientHeight);return e.addPass(t),e}composeraoaa(){let e=new _o(this.renderer),t=new If(this.scene,this.camera,this.parent.clientWidth,this.parent.clientHeight);return e.n8aopass=t,e.addPass(new Vg),e}composerpencil(){let e=new _o(this.renderer),t=new Dg(this);return t.renderToScreen=!0,e.addPass(t),e}composerbloom(){let e=new _o(this.renderer),t=new OA(this.scene,this.camera),n=new ka(new he(window.innerWidth,window.innerHeight),2.5,1.4,.8);return e.addPass(t),e.addPass(n),e.bloom=n,e}composer0(){let e=this.parent.clientWidth,t=this.parent.clientHeight,n=new _o(this.renderer);n.addPass(new OA(this.scene,this.camera)),n.addPass(new nr(mC));let o=new nr(Ra);o.uniforms.defaultColor={value:new ke(16777215)},o.uniforms.luminosityThreshold={value:.04},n.addPass(o),this.sobel=new nr(gC);let a=()=>{let A=this.parent.offsetWidth,u=this.parent.offsetHeight;this.sobel.uniforms.resolution.value.x=A*window.devicePixelRatio,this.sobel.uniforms.resolution.value.y=A*window.devicePixelRatio};a(),this.resizefns.push(a),n.addPass(this.sobel);let l=new nr(KL);n.addPass(l),this.invertindex=n.passes.length-1,this.invertpass=l,this.thresh=new nr(vC),this.thresh.uniforms.clearsaturation.value=.15,this.thresh.uniforms.threshold.value=.99,n.addPass(this.thresh);let c=new ka(new he(window.innerWidth,window.innerHeight),1,.4,0);return this.updatefns.push(()=>{this.thresh.uniforms.uTime.value=this.clock.getElapsedTime()}),n}composer0invert(){let e=this.parent.clientWidth,t=this.parent.clientHeight,n=new _o(this.renderer);n.addPass(new OA(this.scene,this.camera)),n.addPass(new nr(mC));let o=new nr(Ra);o.uniforms.defaultColor={value:new ke(16777215)},o.uniforms.luminosityThreshold={value:.05},n.addPass(o),this.sobel=new nr(gC);let a=()=>{let u=this.parent.offsetWidth,h=this.parent.offsetHeight;this.sobel.uniforms.resolution.value.x=u*window.devicePixelRatio,this.sobel.uniforms.resolution.value.y=u*window.devicePixelRatio};a(),this.resizefns.push(a),n.addPass(this.sobel);let l=new nr(vC);l.uniforms.clearsaturation.value=.07,l.uniforms.threshold.value=.01,n.addPass(l),this.thresh=l;let c=new ka(new he(window.innerWidth,window.innerHeight),0,.4,.85),A=new GA;return this.updatefns.push(()=>{l.uniforms.uTime.value=this.clock.getElapsedTime()}),n}pause(){this.orbitcontrols&&(this.orbitcontrols.enabled=!1),this.renderer.setAnimationLoop(null)}resume(){this.orbitcontrols&&(this.orbitcontrols.enabled=!0),this.renderer.setAnimationLoop(this.render.bind(this))}hittest(){Ei.hitTest(x,y,hitType=ARHitTestResultType.featurePoint)}togglepoints(e){return e=e===void 0?!Si.pointCloud:e,Si.pointCloud=e,Ei.updateConfig(),Si.pointCloud}toggleimage(e){return e===!0||e===!1?Si.imageFrame=e:Si.imageFrame=!Si.imageFrame,Ei.updateConfig(),Si.imageFrame}bindlisteners(){window.addEventListener("resize",this.onResize,!1),this.touchControls.on("end",this.onTouch),UL.on("frame",this.onARFrame.bind(this)),Ei.on("frame",this.onARFrame.bind(this)),Ei.on("sessionInterupted",this.onARSessionInterupted),Ei.on("sessionInteruptedEnded",this.onARSessionInteruptedEnded),Ei.on("trackingStateChange",this.onARTrackingStateChange),Ei.on("anchorsAdded",this.onARAnchorsAdded),Ei.on("anchorsRemoved",this.onARAnchorsRemoved),Ei.on("debug",e=>this.onDebug(e))}onDebug(e){xs(e)}setuphandlers(){let e=this;this.onResize=()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.resize.bind(this),1)},this.onARFrame=t=>{let n=this.camera;if(this.arframedata=t,t.mapdata&&(this.mapdata=t.mapdata,console.log("mapdata",this.mapdata.length),this.onmapdata&&this.onmapdata(this.mapdata)),t.camera&&(this.camera.update(t.camera),this.dispatchEvent({type:"viewchange"})),t.ambientIntensity&&this.dlight&&(this.dlight.intensity=t.ambientIntensity),this.planeindicator&&this.planeindicator.update(this.camera,Object.values(this.anchors)),t.pointCloud)try{let o=t.pointCloud.points,a=t.image;this.pointCloud.update(t.pointCloud.points)}catch(o){console.warn(o)}if(t.image)try{let o=document.querySelector("#img0");o.src="data:image/jpeg;charset=utf-8;base64,"+t.image,imgcallback&&imgcallback(o)}catch(o){console.warn(o)}t.anchors&&t.anchors.forEach(o=>{this.anchors[o.identifier]===void 0?this.addARAnchor(o):this.updateARAnchor(o)})},this.onARAnchorsAdded=t=>{},this.onARAnchorsRemoved=t=>{t.anchors.forEach(n=>{this.anchors[n.identifier]&&this.scene.remove(this.anchors[n.identifier].group)})},this.onARSessionInterupted=()=>{xs("session interupted")},this.onARSessionInteruptedEnded=()=>{xs("session interupted ended")},this.onTouch=()=>{if(this.planeindicator&&this.planeindicator.tracking){let t=this.planeindicator.getPosition(),n=Object.values(this.anchors).filter(c=>c.type===fC),o=n.map(c=>c.identifier),a=new Qe;Ei.removeAnchors(o),a.makeTranslation(t.x,t.y,t.z),xs("floor",t.y.toFixed(2)),this.floor.position.copy(t),Ei.addAnchor(a.toArray());let l=t.toArray().map(c=>c.toFixed(1))}},this.onARTrackingStateChange=t=>{switch(t){case Kl.normal:this.trackingstate="normal";break;case Kl.notAvailable:this.trackingstate="not available";break;case Kl.excessiveMotion:this.trackingstate="too much camera motion";break;case Kl.insufficientFeatures:this.trackingstate="not enough features";break;case Kl.initializing:this.trackingstate="initialising";break;case Kl.relocalizing:this.trackingstate="relocalising";break;default:break}xs("tracking",this.trackingstate)}}addARAnchor(e){switch(e.type){case yf:{this.anchors[e.identifier]=new Fg(e);break}default:{this.anchors[e.identifier]=new Ng(e),this.anchorMesh&&(this.anchorMesh.visible=!0,this.anchors[e.identifier].group.add(this.anchorMesh));break}}this.scene.add(this.anchors[e.identifier].group)}updateARAnchor(e){this.anchors[e.identifier].update(e)}prerendertasks(e){this.updatefns.forEach(t=>t()),this.mixers.forEach(t=>t.update(e)),tweenupdate()}render(){let e=this.clock.getDelta();this.renderer.info.reset(),this.prerendertasks(e),this.orbitcontrols&&this.orbitcontrols.update(),this.composer?this.composer.render(e):this.renderer.render(this.scene,this.camera),this.cssrend&&this.cssrend.render(this.cssscene,this.camera)}checkidle(){let e=Date.now();if(Pa()){this.activitystamp=e;return}return this.checkpointcamera(),this.camera.position.equals(this.campos)||(this.campos.copy(this.camera.position),this.activitystamp=e),e-this.activitystamp>this.idletime?(this.interval||(this.interval=1e3),this.isidle=!0):this.isidle=!1,this.interval}restorecamera(){let e=localStorage.getItem("camera");try{e&&(e=JSON.parse(e),this.camera.position.fromArray(e.pos),this.orbitcontrols.target.fromArray(e.target),this.orbitcontrols.update())}catch(t){xs(t)}return e}checkpointcamera(){try{if(this.camera.position.distanceToSquared(this.lastcampos)>0){let e={pos:this.camera.position.toArray(),target:this.orbitcontrols.target.toArray()};localStorage.setItem("camera",JSON.stringify(e)),this.lastcampos.copy(this.camera.position)}}catch(e){xs(e)}}focus(){return this.parent.focus()}initevents(){let e=this.parent,t=this,n={passive:!0};e.addEventListener("mouseenter",o=>{this.focus()},!0),e.addEventListener("touchend",o=>{this.focus()}),e.addEventListener("keydown",o=>this.keydispatch(o)),["mouseenter","touchstart","touchend","touchmove","dragstart","dragend","dragmove","wheel","mousewheel","click","keypress","keyup","keydown"].forEach(o=>e.addEventListener(o,a=>t.setactive(a),n))}setactive(e){this.interval=0,this.isidle&&(this.activitystamp=Date.now(),this.idletimeout&&clearTimeout(this.idletimeout),this.rafid&&(cancelAnimationFrame(this.rafid),this.rafid=requestAnimationFrame(this.render_raf.bind(this))),this.checkidle())}render_raf(){this.interval?this.idletimeout=setTimeout(e=>this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.interval):this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.render()}resize(){let e=this.parent.clientWidth,t=this.parent.clientHeight;this.width=e,this.height=t,this.renderer.setSize(e,t),this.composer&&this.composer.setSize(e,t),this.cssrend&&this.cssrend.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.resizefns.forEach(n=>n())}makekeytab(){this.keytab={h:()=>this.home(),c:()=>repl.cfocus(),\u00E7:()=>repl.cfocus(),r:()=>this.reload()}}reload(){console.warn("reload"),this.unload("reload"),window.location.reload()}unload(e){return xs("unload...return",e,lim.inited)}keydispatch(e){if(!(e.ctrlKey||e.altKey||e.metaKey))return!1;if(e.key=="f")try{FA(null,document.body)}catch(n){xs("tfs",n)}let t=this.keytab[e.key];return t?(e.preventDefault(),t(e)):!0}synclight(){return this.pointlight.position.copy(this.camera.position)}home(e){return this.lookto(Cr(0,1.2,0),6,.1,e||1e3)}bindbutton(e,t,n){let o=document.getElementById(e);o.addEventListener("click",t),n&&(o.innerHTML=n)}makebutton(e){let t=document.createElement("div"),n=document.createElement("span");return t.id=e,t.classList.add("button"),t.appendChild(n),n.innerText=e,t}lookto(e,t,n,o){t=t||1,n=n??.1,o=o||1e3;let a=this.orbitcontrols,l=this.camera;return e.position&&(e=e.position.clone()),tween(a.target).to({x:e.x,y:e.y,z:e.z},o/2).on("update",function(){a.update()}),tween(l.position).delay(10+o/2).to({x:e.x,y:e.y+n,z:e.z+t},o).on("update",function(){a.update()})}exportmap(e){No({action:"exportmap",file:e})}importmapfile(e){No({action:"importmap",file:e})}importmap(e){No({action:"importmap",mapdata:e})}async savemap(e){e=e||"default",this.exportmap(e),this.onmapdata=async t=>{console.warn("onmapdata",t.length),await kvset(e,t),this.onmapdata=!1}}async restoremap(e){e=e||"default";let t=await kvget(e);console.warn("restoremap",t.length),this.importmap(t)}nerk(...e){xs("lim",e)}postmessage(e){return No(e)}};async function nX(i){let e=new CompressionStream("gzip"),t=e.writer.getWriter(),n=[],o=e.readable.getReader(),a=0;for(t.write(i),t.close();;){let{value:A,done:u}=await o.read();if(u)break;n.push(A),a+=A.byteLength}let l=new Uint8Array(totalSize),c=0;for(let A of n)l.set(A,c),c+=A.byteLength;return l}window.compress=nX;var No=i=>i;window.webkit&&(No=i=>Ei.postMessage(i));window.jsinterface&&(No=i=>window.jsinterface.postMessage(JSON.stringify(i)));window.postmessage=No;WA.info={version:.1,revision:1839,lastmod:"last modified: Wed Jul 19 18:06:45 2023 "};window.Lim=WA;var eE={};fl(eE,{Repl:()=>Ac,newrepl:()=>f_});window.confirm=()=>!0;var Tf=class{constructor(e){let t=_os_device_from_basic_console();this.dev=t,this.callback=e||(n=>window.lastout=n),t.use_async_input=()=>!0,t.output_add_buffer=n=>{this.callback(t.decoder.decode(n))},_program_start()}async evalsync(e){let t=this.callback,n=this;return new Promise((o,a)=>{n.callback=l=>{l.match("> ")&&(this.callback=t),l=l.trim(),l=l.replace("> ",""),o(l)},n.eval(e)})}eval(e){if(!e.length)return;let t=this.dev,n=t.read_condvar_scm;t.rbuf=t.encoder.encode(e),t.rlo=0,t.read_condvar_scm=null,n&&_os_condvar_ready_set(n,!0)}};window.Gambit=Tf;var _t=class i{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let o=[];return this.decompose(0,e,o,2),n.length&&n.decompose(0,n.length,o,3),this.decompose(t,this.length,o,1),XA.from(o,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),XA.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),o=new $l(this),a=new $l(e);for(let l=t,c=t;;){if(o.next(l),a.next(l),l=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(c+=o.value.length,o.done||c>=n)return!0}}iter(e=1){return new $l(this,e)}iterRange(e,t=this.length){return new $g(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let o=this.line(e).from;n=this.iterRange(o,Math.max(o,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new e0(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?i.empty:e.length<=32?new Sr(e):XA.from(Sr.split(e,[]))}},Sr=class i extends _t{constructor(e,t=iX(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,o){for(let a=0;;a++){let l=this.text[a],c=o+l.length;if((t?n:c)>=e)return new xC(o,c,n,l);o=c+1,n++}}decompose(e,t,n,o){let a=e<=0&&t>=this.length?this:new i(tR(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(o&1){let l=n.pop(),c=qg(a.text,l.text.slice(),0,a.length);if(c.length<=32)n.push(new i(c,l.length+a.length));else{let A=c.length>>1;n.push(new i(c.slice(0,A)),new i(c.slice(A)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof i))return super.replace(e,t,n);let o=qg(this.text,qg(n.text,tR(this.text,0,e)),t),a=this.length+n.length-(t-e);return o.length<=32?new i(o,a):XA.from(i.split(o,[]),a)}sliceString(e,t=this.length,n=`
`){let o="";for(let a=0,l=0;a<=t&&l<this.text.length;l++){let c=this.text[l],A=a+c.length;a>e&&l&&(o+=n),e<A&&t>a&&(o+=c.slice(Math.max(0,e-a),t-a)),a=A+1}return o}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],o=-1;for(let a of e)n.push(a),o+=a.length+1,n.length==32&&(t.push(new i(n,o)),n=[],o=-1);return o>-1&&t.push(new i(n,o)),t}},XA=class i extends _t{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,o){for(let a=0;;a++){let l=this.children[a],c=o+l.length,A=n+l.lines-1;if((t?A:c)>=e)return l.lineInner(e,t,n,o);o=c+1,n=A+1}}decompose(e,t,n,o){for(let a=0,l=0;l<=t&&a<this.children.length;a++){let c=this.children[a],A=l+c.length;if(e<=A&&t>=l){let u=o&((l<=e?1:0)|(A>=t?2:0));l>=e&&A<=t&&!u?n.push(c):c.decompose(e-l,t-l,n,u)}l=A+1}}replace(e,t,n){if(n.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e>=a&&t<=c){let A=l.replace(e-a,t-a,n),u=this.lines-l.lines+A.lines;if(A.lines<u>>5-1&&A.lines>u>>5+1){let h=this.children.slice();return h[o]=A,new i(h,this.length-(t-e)+n.length)}return super.replace(a,c,A)}a=c+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let o="";for(let a=0,l=0;a<this.children.length&&l<=t;a++){let c=this.children[a],A=l+c.length;l>e&&a&&(o+=n),e<A&&t>l&&(o+=c.sliceString(e-l,t-l,n)),l=A+1}return o}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof i))return 0;let n=0,[o,a,l,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=t,a+=t){if(o==l||a==c)return n;let A=this.children[o],u=e.children[a];if(A!=u)return n+A.scanIdentical(u,t);n+=A.length+1}}static from(e,t=e.reduce((n,o)=>n+o.length+1,-1)){let n=0;for(let p of e)n+=p.lines;if(n<32){let p=[];for(let m of e)m.flatten(p);return new Sr(p,t)}let o=Math.max(32,n>>5),a=o<<1,l=o>>1,c=[],A=0,u=-1,h=[];function f(p){let m;if(p.lines>a&&p instanceof i)for(let b of p.children)f(b);else p.lines>l&&(A>l||!A)?(d(),c.push(p)):p instanceof Sr&&A&&(m=h[h.length-1])instanceof Sr&&p.lines+m.lines<=32?(A+=p.lines,u+=p.length+1,h[h.length-1]=new Sr(m.text.concat(p.text),m.length+1+p.length)):(A+p.lines>o&&d(),A+=p.lines,u+=p.length+1,h.push(p))}function d(){A!=0&&(c.push(h.length==1?h[0]:i.from(h,u)),u=-1,A=h.length=0)}for(let p of e)f(p);return d(),c.length==1?c[0]:new i(c,t)}};_t.empty=new Sr([""],0);function iX(i){let e=-1;for(let t of i)e+=t.length+1;return e}function qg(i,e,t=0,n=1e9){for(let o=0,a=0,l=!0;a<i.length&&o<=n;a++){let c=i[a],A=o+c.length;A>=t&&(A>n&&(c=c.slice(0,n-o)),o<t&&(c=c.slice(t-o)),l?(e[e.length-1]+=c,l=!1):e.push(c)),o=A+1}return e}function tR(i,e,t){return qg(i,[""],e,t)}var $l=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Sr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],a=this.offsets[n],l=a>>1,c=o instanceof Sr?o.text.length:o.children.length;if(l==(t>0?c:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof Sr){let A=o.text[l+(t<0?-1:0)];if(this.offsets[n]+=t,A.length>Math.max(0,e))return this.value=e==0?A:t>0?A.slice(e):A.slice(0,A.length-e),this;e-=A.length}else{let A=o.children[l+(t<0?-1:0)];e>A.length?(e-=A.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(A),this.offsets.push(t>0?1:(A instanceof Sr?A.text.length:A.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},$g=class{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new $l(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*t,this.value=o.length<=n?o:t<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},e0=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:o}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(_t.prototype[Symbol.iterator]=function(){return this.iter()},$l.prototype[Symbol.iterator]=$g.prototype[Symbol.iterator]=e0.prototype[Symbol.iterator]=function(){return this});var xC=class{constructor(e,t,n,o){this.from=e,this.to=t,this.number=n,this.text=o}get length(){return this.to-this.from}},YA="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<YA.length;i++)YA[i]+=YA[i-1];function rX(i){for(let e=1;e<YA.length;e+=2)if(YA[e]>i)return YA[e-1]<=i;return!1}function nR(i){return i>=127462&&i<=127487}var iR=8205;function oi(i,e,t=!0,n=!0){return(t?cR:sX)(i,e,n)}function cR(i,e,t){if(e==i.length)return e;e&&AR(i.charCodeAt(e))&&uR(i.charCodeAt(e-1))&&e--;let n=Gn(i,e);for(e+=Oi(n);e<i.length;){let o=Gn(i,e);if(n==iR||o==iR||t&&rX(o))e+=Oi(o),n=o;else if(nR(o)){let a=0,l=e-2;for(;l>=0&&nR(Gn(i,l));)a++,l-=2;if(a%2==0)break;e+=2}else break}return e}function sX(i,e,t){for(;e>0;){let n=cR(i,e-2,t);if(n<e)return n;e--}return 0}function AR(i){return i>=56320&&i<57344}function uR(i){return i>=55296&&i<56320}function Gn(i,e){let t=i.charCodeAt(e);if(!uR(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return AR(n)?(t-55296<<10)+(n-56320)+65536:t}function Pf(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Oi(i){return i<65536?1:2}var wC=/\r\n?|\n/,ri=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(ri||(ri={})),Fo=class i{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,o=0;t<this.sections.length;){let a=this.sections[t++],l=this.sections[t++];l<0?(e(n,o,a),o+=a):o+=l,n+=a}}iterChangedRanges(e,t=!1){bC(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?e.push(n,o):e.push(o,n)}return new i(e)}composeDesc(e){return this.empty?e:e.empty?this:hR(this,e)}mapDesc(e,t=!1){return e.empty?this:CC(this,e,t)}mapPos(e,t=-1,n=ri.Simple){let o=0,a=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],A=this.sections[l++],u=o+c;if(A<0){if(u>e)return a+(e-o);a+=c}else{if(n!=ri.Simple&&u>=e&&(n==ri.TrackDel&&o<e&&u>e||n==ri.TrackBefore&&o<e||n==ri.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!c)return e==o||t<0?a:a+A;a+=A}o=u}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e,t=e){for(let n=0,o=0;n<this.sections.length&&o<=t;){let a=this.sections[n++],l=this.sections[n++],c=o+a;if(l>=0&&o<=t&&c>=e)return o<e&&c>t?"cover":!0;o=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];e+=(e?" ":"")+n+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new i(e)}static create(e){return new i(e)}},Gi=class i extends Fo{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return bC(this,(t,n,o,a,l)=>e=e.replace(o,o+(n-t),l),!1),e}mapDesc(e,t=!1){return CC(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let o=0,a=0;o<t.length;o+=2){let l=t[o],c=t[o+1];if(c>=0){t[o]=c,t[o+1]=l;let A=o>>1;for(;n.length<A;)n.push(_t.empty);n.push(l?e.slice(a,a+l):_t.empty)}a+=l}return new i(t,n)}compose(e){return this.empty?e:e.empty?this:hR(this,e,!0)}map(e,t=!1){return e.empty?this:CC(this,e,t,!0)}iterChanges(e,t=!1){bC(this,e,t)}get desc(){return Fo.create(this.sections)}filter(e){let t=[],n=[],o=[],a=new ec(this);e:for(let l=0,c=0;;){let A=l==e.length?1e9:e[l++];for(;c<A||c==A&&a.len==0;){if(a.done)break e;let h=Math.min(a.len,A-c);Ii(o,h,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;Ii(t,h,f),f>0&&_a(n,t,a.text),a.forward(h),c+=h}let u=e[l++];for(;c<u;){if(a.done)break e;let h=Math.min(a.len,u-c);Ii(t,h,-1),Ii(o,h,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(h),c+=h}}return{changes:new i(t,n),filtered:Fo.create(o)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],o=this.sections[t+1];o<0?e.push(n):o==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let o=[],a=[],l=0,c=null;function A(h=!1){if(!h&&!o.length)return;l<t&&Ii(o,t-l,-1);let f=new i(o,a);c=c?c.compose(f.map(c)):f,o=[],a=[],l=0}function u(h){if(Array.isArray(h))for(let f of h)u(f);else if(h instanceof i){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);A(),c=c?c.compose(h.map(c)):h}else{let{from:f,to:d=f,insert:p}=h;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let m=p?typeof p=="string"?_t.of(p.split(n||wC)):p:_t.empty,b=m.length;if(f==d&&b==0)return;f<l&&A(),f>l&&Ii(o,f-l,-1),Ii(o,d-f,b),_a(a,o,m),l=d}}return u(e),A(!c),c}static empty(e){return new i(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<o;)n.push(_t.empty);n[o]=_t.of(a.slice(1)),t.push(a[0],n[o].length)}}}return new i(t,n)}static createSet(e,t){return new i(e,t)}};function Ii(i,e,t,n=!1){if(e==0&&t<=0)return;let o=i.length-2;o>=0&&t<=0&&t==i[o+1]?i[o]+=e:e==0&&i[o]==0?i[o+1]+=t:n?(i[o]+=e,i[o+1]+=t):i.push(e,t)}function _a(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(_t.empty);i.push(t)}}function bC(i,e,t){let n=i.inserted;for(let o=0,a=0,l=0;l<i.sections.length;){let c=i.sections[l++],A=i.sections[l++];if(A<0)o+=c,a+=c;else{let u=o,h=a,f=_t.empty;for(;u+=c,h+=A,A&&n&&(f=f.append(n[l-2>>1])),!(t||l==i.sections.length||i.sections[l+1]<0);)c=i.sections[l++],A=i.sections[l++];e(o,u,a,h,f),o=u,a=h}}}function CC(i,e,t,n=!1){let o=[],a=n?[]:null,l=new ec(i),c=new ec(e);for(let A=-1;;)if(l.ins==-1&&c.ins==-1){let u=Math.min(l.len,c.len);Ii(o,u,-1),l.forward(u),c.forward(u)}else if(c.ins>=0&&(l.ins<0||A==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!t))){let u=c.len;for(Ii(o,c.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&A<l.i&&l.len<=h&&(Ii(o,0,l.ins),a&&_a(a,o,l.text),A=l.i),l.forward(h),u-=h}c.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(c.ins==-1){let f=Math.min(h,c.len);u+=f,h-=f,c.forward(f)}else if(c.ins==0&&c.len<h)h-=c.len,c.next();else break;Ii(o,u,A<l.i?l.ins:0),a&&A<l.i&&_a(a,o,l.text),A=l.i,l.forward(l.len-h)}else{if(l.done&&c.done)return a?Gi.createSet(o,a):Fo.create(o);throw new Error("Mismatched change set lengths")}}function hR(i,e,t=!1){let n=[],o=t?[]:null,a=new ec(i),l=new ec(e);for(let c=!1;;){if(a.done&&l.done)return o?Gi.createSet(n,o):Fo.create(n);if(a.ins==0)Ii(n,a.len,0,c),a.next();else if(l.len==0&&!l.done)Ii(n,0,l.ins,c),o&&_a(o,n,l.text),l.next();else{if(a.done||l.done)throw new Error("Mismatched change set lengths");{let A=Math.min(a.len2,l.len),u=n.length;if(a.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;Ii(n,A,h,c),o&&h&&_a(o,n,l.text)}else l.ins==-1?(Ii(n,a.off?0:a.len,A,c),o&&_a(o,n,a.textBit(A))):(Ii(n,a.off?0:a.len,l.off?0:l.ins,c),o&&!l.off&&_a(o,n,l.text));c=(a.ins>A||l.ins>=0&&l.len>A)&&(c||n.length>u),a.forward2(A),l.forward(A)}}}}var ec=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_t.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?_t.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},VA=class i{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,o;return this.empty?n=o=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new i(n,o,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Oe.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Oe.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Oe.range(e.anchor,e.head)}static create(e,t,n){return new i(e,t,n)}},Oe=class i{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:i.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new i([this.main],0)}addRange(e,t=!0){return i.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,i.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new i(e.ranges.map(t=>VA.fromJSON(t)),e.main)}static single(e,t=e){return new i([i.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=n:a.from<n)return i.normalized(e.slice(),t);n=a.to}return new i(e,t)}static cursor(e,t=0,n,o){return VA.create(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(o??33554431)<<5)}static range(e,t,n,o){let a=(n??33554431)<<5|(o==null?3:Math.min(2,o));return t<e?VA.create(t,e,24|a):VA.create(e,t,(t>e?4:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((o,a)=>o.from-a.from),t=e.indexOf(n);for(let o=1;o<e.length;o++){let a=e[o],l=e[o-1];if(a.empty?a.from<=l.to:a.from<l.to){let c=l.from,A=Math.max(a.to,l.to);o<=t&&t--,e.splice(--o,2,a.anchor>a.head?i.range(A,c):i.range(c,A))}}return new i(e,t)}};function fR(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var RC=0,tt=class i{constructor(e,t,n,o,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=o,this.id=RC++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}static define(e={}){return new i(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:kC),!!e.static,e.enables)}of(e){return new ZA([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ZA(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ZA(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}};function kC(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}var ZA=class{constructor(e,t,n,o){this.dependencies=e,this.facet=t,this.type=n,this.value=o,this.id=RC++}dynamicSlot(e){var t;let n=this.value,o=this.facet.compareInput,a=this.id,l=e[a]>>1,c=this.type==2,A=!1,u=!1,h=[];for(let f of this.dependencies)f=="doc"?A=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||h.push(e[f.id]);return{create(f){return f.values[l]=n(f),1},update(f,d){if(A&&d.docChanged||u&&(d.docChanged||d.selection)||SC(f,h)){let p=n(f);if(c?!rR(p,f.values[l],o):!o(p,f.values[l]))return f.values[l]=p,1}return 0},reconfigure:(f,d)=>{let p,m=d.config.address[a];if(m!=null){let b=s0(d,m);if(this.dependencies.every(g=>g instanceof tt?d.facet(g)===f.facet(g):g instanceof $n?d.field(g,!1)==f.field(g,!1):!0)||(c?rR(p=n(f),b,o):o(p=n(f),b)))return f.values[l]=b,0}else p=n(f);return f.values[l]=p,1}}}};function rR(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function SC(i,e){let t=!1;for(let n of e)Bf(i,n)&1&&(t=!0);return t}function oX(i,e,t){let n=t.map(A=>i[A.id]),o=t.map(A=>A.type),a=n.filter(A=>!(A&1)),l=i[e.id]>>1;function c(A){let u=[];for(let h=0;h<n.length;h++){let f=s0(A,n[h]);if(o[h]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(A){for(let u of n)Bf(A,u);return A.values[l]=c(A),1},update(A,u){if(!SC(A,a))return 0;let h=c(A);return e.compare(h,A.values[l])?0:(A.values[l]=h,1)},reconfigure(A,u){let h=SC(A,n),f=u.config.facets[e.id],d=u.facet(e);if(f&&!h&&kC(t,f))return A.values[l]=d,0;let p=c(A);return e.compare(p,d)?(A.values[l]=d,0):(A.values[l]=p,1)}}}var sR=tt.define({static:!0}),$n=class i{constructor(e,t,n,o,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let t=new i(RC++,e.create,e.update,e.compare||((n,o)=>n===o),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(sR).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,o)=>{let a=n.values[t],l=this.updateF(a,o);return this.compareF(a,l)?0:(n.values[t]=l,1)},reconfigure:(n,o)=>o.config.address[this.id]!=null?(n.values[t]=o.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,sR.of({field:this,create:e})]}get extension(){return this}},jl={lowest:4,low:3,default:2,high:1,highest:0};function Df(i){return e=>new n0(e,i)}var Xr={highest:Df(jl.highest),high:Df(jl.high),default:Df(jl.default),low:Df(jl.low),lowest:Df(jl.lowest)},n0=class{constructor(e,t){this.inner=e,this.prec=t}},i0=class i{of(e){return new Lf(this,e)}reconfigure(e){return i.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Lf=class{constructor(e,t){this.compartment=e,this.inner=t}},r0=class i{constructor(e,t,n,o,a,l){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=o,this.staticValues=a,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let o=[],a=Object.create(null),l=new Map;for(let d of aX(e,t,l))d instanceof $n?o.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let c=Object.create(null),A=[],u=[];for(let d of o)c[d.id]=u.length<<1,u.push(p=>d.slot(p));let h=n?.config.facets;for(let d in a){let p=a[d],m=p[0].facet,b=h&&h[d]||[];if(p.every(g=>g.type==0))if(c[m.id]=A.length<<1|1,kC(b,p))A.push(n.facet(m));else{let g=m.combine(p.map(w=>w.value));A.push(n&&m.compare(g,n.facet(m))?n.facet(m):g)}else{for(let g of p)g.type==0?(c[g.id]=A.length<<1|1,A.push(g.value)):(c[g.id]=u.length<<1,u.push(w=>g.dynamicSlot(w)));c[m.id]=u.length<<1,u.push(g=>oX(g,m,p))}}let f=u.map(d=>d(c));return new i(e,l,f,c,A,a)}};function aX(i,e,t){let n=[[],[],[],[],[]],o=new Map;function a(l,c){let A=o.get(l);if(A!=null){if(A<=c)return;let u=n[A].indexOf(l);u>-1&&n[A].splice(u,1),l instanceof Lf&&t.delete(l.compartment)}if(o.set(l,c),Array.isArray(l))for(let u of l)a(u,c);else if(l instanceof Lf){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;t.set(l.compartment,u),a(u,c)}else if(l instanceof n0)a(l.inner,l.prec);else if(l instanceof $n)n[c].push(l),l.provides&&a(l.provides,c);else if(l instanceof ZA)n[c].push(l),l.facet.extensions&&a(l.facet.extensions,jl.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,c)}}return a(i,jl.default),n.reduce((l,c)=>l.concat(c))}function Bf(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let o=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|o}function s0(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}var dR=tt.define(),pR=tt.define({combine:i=>i.some(e=>e),static:!0}),mR=tt.define({combine:i=>i.length?i[0]:void 0,static:!0}),gR=tt.define(),vR=tt.define(),yR=tt.define(),xR=tt.define({combine:i=>i.length?i[0]:!1}),ir=class{constructor(e,t){this.type=e,this.value=t}static define(){return new EC}},EC=class{of(e){return new ir(this,e)}},IC=class{constructor(e){this.map=e}of(e){return new Nt(this,e)}},Nt=class i{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new i(this.type,t)}is(e){return this.type==e}static define(e={}){return new IC(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let o of e){let a=o.map(t);a&&n.push(a)}return n}};Nt.reconfigure=Nt.define();Nt.appendConfig=Nt.define();var si=class i{constructor(e,t,n,o,a,l){this.startState=e,this.changes=t,this.selection=n,this.effects=o,this.annotations=a,this.scrollIntoView=l,this._doc=null,this._state=null,n&&fR(n,t.newLength),a.some(c=>c.type==i.time)||(this.annotations=a.concat(i.time.of(Date.now())))}static create(e,t,n,o,a,l){return new i(e,t,n,o,a,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(i.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};si.time=ir.define();si.userEvent=ir.define();si.addToHistory=ir.define();si.remote=ir.define();function lX(i,e){let t=[];for(let n=0,o=0;;){let a,l;if(n<i.length&&(o==e.length||e[o]>=i[n]))a=i[n++],l=i[n++];else if(o<e.length)a=e[o++],l=e[o++];else return t;!t.length||t[t.length-1]<a?t.push(a,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function wR(i,e,t){var n;let o,a,l;return t?(o=e.changes,a=Gi.empty(e.changes.length),l=i.changes.compose(e.changes)):(o=e.changes.map(i.changes),a=i.changes.mapDesc(e.changes,!0),l=i.changes.compose(o)),{changes:l,selection:e.selection?e.selection.map(a):(n=i.selection)===null||n===void 0?void 0:n.map(o),effects:Nt.mapEffects(i.effects,o).concat(Nt.mapEffects(e.effects,a)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function MC(i,e,t){let n=e.selection,o=KA(e.annotations);return e.userEvent&&(o=o.concat(si.userEvent.of(e.userEvent))),{changes:e.changes instanceof Gi?e.changes:Gi.of(e.changes||[],t,i.facet(mR)),selection:n&&(n instanceof Oe?n:Oe.single(n.anchor,n.head)),effects:KA(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function bR(i,e,t){let n=MC(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let l=!!e[a].sequential;n=wR(n,MC(i,e[a],l?n.changes.newLength:i.doc.length),l)}let o=si.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return AX(t?cX(o):o)}function cX(i){let e=i.startState,t=!0;for(let o of e.facet(gR)){let a=o(i);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:lX(t,a))}if(t!==!0){let o,a;if(t===!1)a=i.changes.invertedDesc,o=Gi.empty(e.doc.length);else{let l=i.changes.filter(t);o=l.changes,a=l.filtered.mapDesc(l.changes).invertedDesc}i=si.create(e,o,i.selection&&i.selection.map(a),Nt.mapEffects(i.effects,a),i.annotations,i.scrollIntoView)}let n=e.facet(vR);for(let o=n.length-1;o>=0;o--){let a=n[o](i);a instanceof si?i=a:Array.isArray(a)&&a.length==1&&a[0]instanceof si?i=a[0]:i=bR(e,KA(a),!1)}return i}function AX(i){let e=i.startState,t=e.facet(yR),n=i;for(let o=t.length-1;o>=0;o--){let a=t[o](i);a&&Object.keys(a).length&&(n=wR(n,MC(e,a,i.changes.newLength),!0))}return n==i?i:si.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}var uX=[];function KA(i){return i==null?uX:Array.isArray(i)?i:[i]}var un=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(un||(un={})),hX=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,TC;try{TC=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function fX(i){if(TC)return TC.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||hX.test(t)))return!0}return!1}function dX(i){return e=>{if(!/\S/.test(e))return un.Space;if(fX(e))return un.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return un.Word;return un.Other}}var qt=class i{constructor(e,t,n,o,a,l){this.config=e,this.doc=t,this.selection=n,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Bf(this,c<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Bf(this,n),s0(this,n)}update(...e){return bR(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:o}=t;for(let l of e.effects)l.is(i0.reconfigure)?(t&&(o=new Map,t.compartments.forEach((c,A)=>o.set(A,c)),t=null),o.set(l.value.compartment,l.value.extension)):l.is(Nt.reconfigure)?(t=null,n=l.value):l.is(Nt.appendConfig)&&(t=null,n=KA(n).concat(l.value));let a;t?a=e.startState.values.slice():(t=r0.resolve(n,o,this),a=new i(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,A)=>A.reconfigure(c,this),null).values),new i(t,e.newDoc,e.newSelection,a,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Oe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),o=this.changes(n.changes),a=[n.range],l=KA(n.effects);for(let c=1;c<t.ranges.length;c++){let A=e(t.ranges[c]),u=this.changes(A.changes),h=u.map(o);for(let d=0;d<c;d++)a[d]=a[d].map(h);let f=o.mapDesc(u,!0);a.push(A.range.map(f)),o=o.compose(h),l=Nt.mapEffects(l,h).concat(Nt.mapEffects(KA(A.effects),f))}return{changes:o,selection:Oe.create(a,t.mainIndex),effects:l}}changes(e=[]){return e instanceof Gi?e:Gi.of(e,this.doc.length,this.facet(i.lineSeparator))}toText(e){return _t.of(e.split(this.facet(i.lineSeparator)||wC))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Bf(this,t),s0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let o=e[n];o instanceof $n&&this.config.address[o.id]!=null&&(t[n]=o.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let l=n[a],c=e[a];o.push(l.init(A=>l.spec.fromJSON(c,A)))}}return i.create({doc:e.doc,selection:Oe.fromJSON(e.selection),extensions:t.extensions?o.concat([t.extensions]):o})}static create(e={}){let t=r0.resolve(e.extensions||[],new Map),n=e.doc instanceof _t?e.doc:_t.of((e.doc||"").split(t.staticFacet(i.lineSeparator)||wC)),o=e.selection?e.selection instanceof Oe?e.selection:Oe.single(e.selection.anchor,e.selection.head):Oe.single(0);return fR(o,n.length),t.staticFacet(pR)||(o=o.asSingle()),new i(t,n,o,t.dynamicSlots.map(()=>null),(a,l)=>l.create(a),null)}get tabSize(){return this.facet(i.tabSize)}get lineBreak(){return this.facet(i.lineSeparator)||`
`}get readOnly(){return this.facet(xR)}phrase(e,...t){for(let n of this.facet(i.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let o=[];for(let a of this.facet(dR))for(let l of a(this,t,n))Object.prototype.hasOwnProperty.call(l,e)&&o.push(l[e]);return o}charCategorizer(e){return dX(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),l=e-n,c=e-n;for(;l>0;){let A=oi(t,l,!1);if(a(t.slice(A,l))!=un.Word)break;l=A}for(;c<o;){let A=oi(t,c);if(a(t.slice(c,A))!=un.Word)break;c=A}return l==c?null:Oe.range(l+n,c+n)}};qt.allowMultipleSelections=pR;qt.tabSize=tt.define({combine:i=>i.length?i[0]:4});qt.lineSeparator=mR;qt.readOnly=xR;qt.phrases=tt.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(o=>i[o]==e[o])}});qt.languageData=dR;qt.changeFilter=gR;qt.transactionFilter=vR;qt.transactionExtender=yR;i0.reconfigure=Nt.define();function Er(i,e,t={}){let n={};for(let o of i)for(let a of Object.keys(o)){let l=o[a],c=n[a];if(c===void 0)n[a]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](c,l);else throw new Error("Config merge conflict for field "+a)}for(let o in e)n[o]===void 0&&(n[o]=e[o]);return n}var ws=class{eq(e){return this==e}range(e,t=e){return Rf.create(e,t,this)}};ws.prototype.startSide=ws.prototype.endSide=0;ws.prototype.point=!1;ws.prototype.mapMode=ri.TrackDel;var Rf=class i{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new i(e,t,n)}};function DC(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}var BC=class i{constructor(e,t,n,o){this.from=e,this.to=t,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,o=0){let a=n?this.to:this.from;for(let l=o,c=a.length;;){if(l==c)return l;let A=l+c>>1,u=a[A]-e||(n?this.value[A].endSide:this.value[A].startSide)-t;if(A==l)return u>=0?l:c;u>=0?c=A:l=A+1}}between(e,t,n,o){for(let a=this.findIndex(t,-1e9,!0),l=this.findIndex(n,1e9,!1,a);a<l;a++)if(o(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],o=[],a=[],l=-1,c=-1;for(let A=0;A<this.value.length;A++){let u=this.value[A],h=this.from[A]+e,f=this.to[A]+e,d,p;if(h==f){let m=t.mapPos(h,u.startSide,u.mapMode);if(m==null||(d=p=m,u.startSide!=u.endSide&&(p=t.mapPos(h,u.endSide),p<d)))continue}else if(d=t.mapPos(h,u.startSide),p=t.mapPos(f,u.endSide),d>p||d==p&&u.startSide>0&&u.endSide<=0)continue;(p-d||u.endSide-u.startSide)<0||(l<0&&(l=d),u.point&&(c=Math.max(c,p-d)),n.push(u),o.push(d-l),a.push(p-l))}return{mapped:n.length?new i(o,a,n,c):null,pos:l}}},Pn=class i{constructor(e,t,n,o){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=o}static create(e,t,n,o){return new i(e,t,n,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:o=0,filterTo:a=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(n&&(t=t.slice().sort(DC)),this.isEmpty)return t.length?i.of(t):this;let c=new o0(this,null,-1).goto(0),A=0,u=[],h=new Vr;for(;c.value||A<t.length;)if(A<t.length&&(c.from-t[A].from||c.startSide-t[A].value.startSide)>=0){let f=t[A++];h.addInner(f.from,f.to,f.value)||u.push(f)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(A==t.length||this.chunkEnd(c.chunkIndex)<t[A].from)&&(!l||o>this.chunkEnd(c.chunkIndex)||a<this.chunkPos[c.chunkIndex])&&h.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||o>c.to||a<c.from||l(c.from,c.to,c.value))&&(h.addInner(c.from,c.to,c.value)||u.push(Rf.create(c.from,c.to,c.value))),c.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?i.empty:this.nextLayer.update({add:u,filter:l,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],o=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],A=this.chunk[l],u=e.touchesRange(c,c+A.length);if(u===!1)o=Math.max(o,A.maxPoint),t.push(A),n.push(e.mapPos(c));else if(u===!0){let{mapped:h,pos:f}=A.map(c,e);h&&(o=Math.max(o,h.maxPoint),t.push(h),n.push(f))}}let a=this.nextLayer.map(e);return t.length==0?a:new i(n,t,a||i.empty,o)}between(e,t,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o];if(t>=a&&e<=a+l.length&&l.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return kf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return kf.from(e).goto(t)}static compare(e,t,n,o,a=-1){let l=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),c=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),A=oR(l,c,n),u=new ql(l,A,a),h=new ql(c,A,a);n.iterGaps((f,d,p)=>aR(u,f,h,d,p,o)),n.empty&&n.length==0&&aR(u,0,h,0,0,o)}static eq(e,t,n=0,o){o==null&&(o=1e9-1);let a=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),l=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(a.length!=l.length)return!1;if(!a.length)return!0;let c=oR(a,l),A=new ql(a,c,0).goto(n),u=new ql(l,c,0).goto(n);for(;;){if(A.to!=u.to||!LC(A.active,u.active)||A.point&&(!u.point||!A.point.eq(u.point)))return!1;if(A.to>o)return!0;A.next(),u.next()}}static spans(e,t,n,o,a=-1){let l=new ql(e,null,a).goto(t),c=t,A=l.openStart;for(;;){let u=Math.min(l.to,n);if(l.point){let h=l.activeForPoint(l.to),f=l.pointFrom<t?h.length+1:Math.min(h.length,A);o.point(c,u,l.point,h,f,l.pointRank),A=Math.min(l.openEnd(u),h.length)}else u>c&&(o.span(c,u,l.active,A),A=l.openEnd(u));if(l.to>n)return A+(l.point&&l.to>n?1:0);c=l.to,l.next()}}static of(e,t=!1){let n=new Vr;for(let o of e instanceof Rf?[e]:t?pX(e):e)n.add(o.from,o.to,o.value);return n.finish()}};Pn.empty=new Pn([],[],null,-1);function pX(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(DC(e,n)>0)return i.slice().sort(DC);e=n}return i}Pn.empty.nextLayer=Pn.empty;var Vr=class i{finishChunk(e){this.chunks.push(new BC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new i)).add(e,t,n)}addInner(e,t,n){let o=e-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Pn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Pn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function oR(i,e,t){let n=new Map;for(let a of i)for(let l=0;l<a.chunk.length;l++)a.chunk[l].maxPoint<=0&&n.set(a.chunk[l],a.chunkPos[l]);let o=new Set;for(let a of e)for(let l=0;l<a.chunk.length;l++){let c=n.get(a.chunk[l]);c!=null&&(t?t.mapPos(c):c)==a.chunkPos[l]&&!t?.touchesRange(c,c+a.chunk[l].length)&&o.add(a.chunk[l])}return o}var o0=class{constructor(e,t,n,o=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},kf=class i{constructor(e){this.heap=e}static from(e,t=null,n=-1){let o=[];for(let a=0;a<e.length;a++)for(let l=e[a];!l.isEmpty;l=l.nextLayer)l.maxPoint>=n&&o.push(new o0(l,t,n,a));return o.length==1?o[0]:new i(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)yC(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)yC(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),yC(this.heap,0)}}};function yC(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let o=i[n];if(n+1<i.length&&o.compare(i[n+1])>=0&&(o=i[n+1],n++),t.compare(o)<0)break;i[n]=t,i[e]=o,e=n}}var ql=class{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=kf.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Jg(this.active,e),Jg(this.activeTo,e),Jg(this.activeRank,e),this.minActive=lR(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:o,rank:a}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;jg(this.active,t,n),jg(this.activeTo,t,o),jg(this.activeRank,t,a),e&&jg(e,t,this.cursor.from),this.minActive=lR(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&Jg(n,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let o=n.length-1;o>=0&&n[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}};function aR(i,e,t,n,o,a){i.goto(e),t.goto(n);let l=n+o,c=n,A=n-e;for(;;){let u=i.to+A-t.to||i.endSide-t.endSide,h=u<0?i.to+A:t.to,f=Math.min(h,l);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&LC(i.activeForPoint(i.to),t.activeForPoint(t.to))||a.comparePoint(c,f,i.point,t.point):f>c&&!LC(i.active,t.active)&&a.compareRange(c,f,i.active,t.active),h>l)break;c=h,u<=0&&i.next(),u>=0&&t.next()}}function LC(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function Jg(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function jg(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function lR(i,e){let t=-1,n=1e9;for(let o=0;o<e.length;o++)(e[o]-n||i[o].endSide-i[t].endSide)<0&&(t=o,n=e[o]);return t}function tc(i,e,t=i.length){let n=0;for(let o=0;o<t;)i.charCodeAt(o)==9?(n+=e-n%e,o++):(n++,o=oi(i,o));return n}function CR(i,e,t,n){for(let o=0,a=0;;){if(a>=e)return o;if(o==i.length)break;a+=i.charCodeAt(o)==9?t-a%t:1,o=oi(i,o)}return n===!0?-1:i.length}var PC="\u037C",SR=typeof Symbol>"u"?"__"+PC:Symbol.for(PC),_C=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ER=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Yr=class{constructor(e,t){this.rules=[];let{finish:n}=t||{};function o(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function a(l,c,A,u){let h=[],f=/^@(\w+)\b/.exec(l[0]),d=f&&f[1]=="keyframes";if(f&&c==null)return A.push(l[0]+";");for(let p in c){let m=c[p];if(/&/.test(p))a(p.split(/,\s*/).map(b=>l.map(g=>b.replace(/&/,g))).reduce((b,g)=>b.concat(g)),m,A);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");a(o(p),m,h,d)}else m!=null&&h.push(p.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+m+";")}(h.length||d)&&A.push((n&&!f&&!u?l.map(n):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)a(o(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ER[SR]||1;return ER[SR]=e+1,PC+e.toString(36)}static mount(e,t){(e[_C]||new NC(e)).mount(Array.isArray(t)?t:[t])}},IR=new Map,NC=class{constructor(e){let t=e.ownerDocument||e,n=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let o=IR.get(t);if(o)return e.adoptedStyleSheets=[o.sheet,...e.adoptedStyleSheets],e[_C]=o;this.sheet=new n.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],IR.set(t,this)}else{this.styleTag=t.createElement("style");let o=e.head||e;o.insertBefore(this.styleTag,o.firstChild)}this.modules=[],e[_C]=this}mount(e){let t=this.sheet,n=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),t)for(let A=0;A<l.rules.length;A++)t.insertRule(l.rules[A],n++)}else{for(;o<c;)n+=this.modules[o++].rules.length;n+=l.rules.length,o++}}if(!t){let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a}}};var Qo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},JA={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mX=typeof navigator<"u"&&/Mac/.test(navigator.platform),gX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(zn=0;zn<10;zn++)Qo[48+zn]=Qo[96+zn]=String(zn);var zn;for(zn=1;zn<=24;zn++)Qo[zn+111]="F"+zn;var zn;for(zn=65;zn<=90;zn++)Qo[zn]=String.fromCharCode(zn+32),JA[zn]=String.fromCharCode(zn);var zn;for(a0 in Qo)JA.hasOwnProperty(a0)||(JA[a0]=Qo[a0]);var a0;function MR(i){var e=mX&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||gX&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?JA:Qo)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function w0(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function HC(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function vX(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function m0(i,e){if(!e.anchorNode)return!1;try{return HC(i,e.anchorNode)}catch{return!1}}function Gf(i){return i.nodeType==3?nu(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function b0(i,e,t,n){return t?TR(i,e,t,n,-1)||TR(i,e,t,n,1):!1}function C0(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function TR(i,e,t,n,o){for(;;){if(i==t&&e==n)return!0;if(e==(o<0?0:Ua(i))){if(i.nodeName=="DIV")return!1;let a=i.parentNode;if(!a||a.nodeType!=1)return!1;e=C0(i)+(o<0?0:1),i=a}else if(i.nodeType==1){if(i=i.childNodes[e+(o<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=o<0?Ua(i):0}else return!1}}function Ua(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function ES(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function yX(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function xX(i,e,t,n,o,a,l,c){let A=i.ownerDocument,u=A.defaultView||window;for(let h=i,f=!1;h&&!f;)if(h.nodeType==1){let d,p=h==A.body;if(p)d=yX(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(f=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();d={left:g.left,right:g.left+h.clientWidth,top:g.top,bottom:g.top+h.clientHeight}}let m=0,b=0;if(o=="nearest")e.top<d.top?(b=-(d.top-e.top+l),t>0&&e.bottom>d.bottom+b&&(b=e.bottom-d.bottom+b+l)):e.bottom>d.bottom&&(b=e.bottom-d.bottom+l,t<0&&e.top-b<d.top&&(b=-(d.top+b-e.top+l)));else{let g=e.bottom-e.top,w=d.bottom-d.top;b=(o=="center"&&g<=w?e.top+g/2-w/2:o=="start"||o=="center"&&t<0?e.top-l:e.bottom-w+l)-d.top}if(n=="nearest"?e.left<d.left?(m=-(d.left-e.left+a),t>0&&e.right>d.right+m&&(m=e.right-d.right+m+a)):e.right>d.right&&(m=e.right-d.right+a,t<0&&e.left<d.left+m&&(m=-(d.left+m-e.left+a))):m=(n=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:n=="start"==c?e.left-a:e.right-(d.right-d.left)+a)-d.left,m||b)if(p)u.scrollBy(m,b);else{let g=0,w=0;if(b){let I=h.scrollTop;h.scrollTop+=b,w=h.scrollTop-I}if(m){let I=h.scrollLeft;h.scrollLeft+=m,g=h.scrollLeft-I}e={left:e.left-g,top:e.top-w,right:e.right-g,bottom:e.bottom-w},g&&Math.abs(g-m)<1&&(n="nearest"),w&&Math.abs(w-b)<1&&(o="nearest")}if(p)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function wX(i){let e=i.ownerDocument;for(let t=i.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}var WC=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Ua(t):0),n,Math.min(e.focusOffset,n?Ua(n):0))}set(e,t,n,o){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=o}},jA=null;function Ak(i){if(i.setActive)return i.setActive();if(jA)return i.focus(jA);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(jA==null?{get preventScroll(){return jA={preventScroll:!0},!0}}:void 0),!jA){jA=!1;for(let t=0;t<e.length;){let n=e[t++],o=e[t++],a=e[t++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=a&&(n.scrollLeft=a)}}}var DR;function nu(i,e,t=e){let n=DR||(DR=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function tu(i,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},o=new KeyboardEvent("keydown",n);o.synthetic=!0,i.dispatchEvent(o);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,i.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function bX(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function uk(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function CX(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Ua(t));;)if(n){if(t.nodeType!=1)return!1;let o=t.childNodes[n-1];o.contentEditable=="false"?n--:(t=o,n=Ua(t))}else{if(t==i)return!0;n=C0(t),t=t.parentNode}}function hk(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}var rr=class i{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new i(e.parentNode,C0(e),t)}static after(e,t){return new i(e.parentNode,C0(e)+1,t)}},IS=[],sn=class i{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,o=null,a;for(let l of this.children){if(l.flags&7){if(!l.dom&&(a=o?o.nextSibling:n.firstChild)){let c=i.get(a);(!c||!c.parent&&c.canReuseDOM(l))&&l.reuseDOM(a)}l.sync(e,t),l.flags&=-8}if(a=o?o.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=l.dom&&(t.written=!0),l.dom.parentNode==n)for(;a&&a!=l.dom;)a=BR(a);else n.insertBefore(l.dom,a);o=l.dom}for(a=o?o.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=BR(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let o=Ua(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!i.get(n);)n=n.nextSibling;if(!n)return this.length;for(let o=0,a=0;;o++){let l=this.children[o];if(l.dom==n)return a;a+=l.length+l.breakAfter}}domBoundsAround(e,t,n=0){let o=-1,a=-1,l=-1,c=-1;for(let A=0,u=n,h=n;A<this.children.length;A++){let f=this.children[A],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&o==-1&&(o=A,a=u),u>t&&f.dom.parentNode==this.dom){l=A,c=h;break}h=d,u=d+f.breakAfter}return{from:a,to:c<0?n+this.length:c,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=IS){this.markDirty();for(let o=e;o<t;o++){let a=this.children[o];a.parent==this&&a.destroy()}this.children.splice(e,t-e,...n);for(let o=0;o<n.length;o++)n[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new S0(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,o,a,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}};sn.prototype.breakAfter=0;function BR(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}var S0=class{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}};function fk(i,e,t,n,o,a,l,c,A){let{children:u}=i,h=u.length?u[e]:null,f=a.length?a[a.length-1]:null,d=f?f.breakAfter:l;if(!(e==n&&h&&!l&&!d&&a.length<2&&h.merge(t,o,a.length?f:null,t==0,c,A))){if(n<u.length){let p=u[n];p&&o<p.length?(e==n&&(p=p.split(o),o=0),!d&&f&&p.merge(0,o,f,!0,0,A)?a[a.length-1]=p:(o&&p.merge(0,o,null,!1,0,A),a.push(p))):p?.breakAfter&&(f?f.breakAfter=1:l=1),n++}for(h&&(h.breakAfter=l,t>0&&(!l&&a.length&&h.merge(t,h.length,a[0],!1,c,0)?h.breakAfter=a.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,c,0),e++));e<n&&a.length;)if(u[n-1].become(a[a.length-1]))n--,a.pop(),A=a.length?0:c;else if(u[e].become(a[0]))e++,a.shift(),c=a.length?0:A;else break;!a.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,c,A)&&e--,(e<n||a.length)&&i.replaceChildren(e,n,a)}}function dk(i,e,t,n,o,a){let l=i.childCursor(),{i:c,off:A}=l.findPos(t,1),{i:u,off:h}=l.findPos(e,-1),f=e-t;for(let d of n)f+=d.length;i.length+=f,fk(i,u,h,c,A,n,0,o,a)}var qA="\uFFFF",E0=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(qt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=qA}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let o=e;;){this.findPointBefore(n,o);let a=this.text.length;this.readNode(o);let l=o.nextSibling;if(l==t)break;let c=sn.get(o),A=sn.get(l);(c&&A?c.breakAfter:(c?c.breakAfter:LR(o))||LR(l)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>a)&&this.lineBreak(),o=l}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,l=1,c;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),l=this.lineSeparator.length):(c=o.exec(t))&&(a=c.index,l=c[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),l>1)for(let A of this.points)A.node==e&&A.pos>this.text.length&&(A.pos-=l-1);n=a+l}}readNode(e){if(e.cmIgnore)return;let t=sn.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let o=n.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}};function LR(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}var I0=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},Ir=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},VC=typeof document<"u"?document:{documentElement:{style:{}}},XC=/Edge\/(\d+)/.exec(Ir.userAgent),pk=/MSIE \d/.test(Ir.userAgent),YC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ir.userAgent),N0=!!(pk||YC||XC),RR=!N0&&/gecko\/(\d+)/i.test(Ir.userAgent),FC=!N0&&/Chrome\/(\d+)/.exec(Ir.userAgent),kR="webkitFontSmoothing"in VC.documentElement.style,mk=!N0&&/Apple Computer/.test(Ir.vendor),PR=mk&&(/Mobile\/\w+/.test(Ir.userAgent)||Ir.maxTouchPoints>2),$e={mac:PR||/Mac/.test(Ir.platform),windows:/Win/.test(Ir.platform),linux:/Linux|X11/.test(Ir.platform),ie:N0,ie_version:pk?VC.documentMode||6:YC?+YC[1]:XC?+XC[1]:0,gecko:RR,gecko_version:RR?+(/Firefox\/(\d+)/.exec(Ir.userAgent)||[0,0])[1]:0,chrome:!!FC,chrome_version:FC?+FC[1]:0,ios:PR,android:/Android\b/.test(Ir.userAgent),webkit:kR,safari:mk,webkit_version:kR?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:VC.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},SX=256,Oa=class i extends sn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof i)||this.length-(t-e)+n.length>SX||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new i(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new rr(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return EX(this.dom,e,t)}},Ga=class i extends sn{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let o of t)o.setParent(this)}setAttrs(e){if(uk(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,o,a,l){return n&&(!(n instanceof i&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&l<=0)?!1:(dk(this,e,t,n?n.children:[],a-1,l-1),this.markDirty(),!0)}split(e){let t=[],n=0,o=-1,a=0;for(let c of this.children){let A=n+c.length;A>e&&t.push(n<e?c.split(e-n):c),o<0&&n>=e&&(o=a),n=A,a++}let l=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new i(this.mark,t,l)}domAtPos(e){return gk(this,e)}coordsAt(e,t){return yk(this,e,t)}};function EX(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let o=e,a=e,l=0;e==0&&t<0||e==n&&t>=0?$e.chrome||$e.gecko||(e?(o--,l=1):a<n&&(a++,l=-1)):t<0?o--:a<n&&a++;let c=nu(i,o,a).getClientRects();if(!c.length)return null;let A=c[(l?l<0:t>=0)?0:c.length-1];return $e.safari&&!l&&A.width==0&&(A=Array.prototype.find.call(c,u=>u.width)||A),l?ES(A,l<0):A||null}var M0=class i extends sn{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new i(e,t,n)}split(e){let t=i.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,o,a,l){return n&&(!(n instanceof i)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&l<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof i&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _t.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):_t.empty}domAtPos(e){return(this.length?e==0:this.side>0)?rr.before(this.dom):rr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let l=this.side?this.side<0:e>0;for(let c=l?o.length-1:0;a=o[c],!(e>0?c==0:c==o.length-1||a.top<a.bottom);c+=l?-1:1);return ES(a,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},zf=class i extends sn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof i&&e.side==this.side}split(){return new i(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?rr.before(this.dom):rr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return _t.empty}get isHidden(){return!0}};Oa.prototype.children=M0.prototype.children=zf.prototype.children=IS;function gk(i,e){let t=i.dom,{children:n}=i,o=0;for(let a=0;o<n.length;o++){let l=n[o],c=a+l.length;if(!(c==a&&l.getSide()<=0)){if(e>a&&e<c&&l.dom.parentNode==t)return l.domAtPos(e-a);if(e<=a)break;a=c}}for(let a=o;a>0;a--){let l=n[a-1];if(l.dom.parentNode==t)return l.domAtPos(l.length)}for(let a=o;a<n.length;a++){let l=n[a];if(l.dom.parentNode==t)return l.domAtPos(0)}return new rr(t,0)}function vk(i,e,t){let n,{children:o}=i;t>0&&e instanceof Ga&&o.length&&(n=o[o.length-1])instanceof Ga&&n.mark.eq(e.mark)?vk(n,e.children[0],t-1):(o.push(e),e.setParent(i)),i.length+=e.length}function yk(i,e,t){let n=null,o=-1,a=null,l=-1;function c(u,h){for(let f=0,d=0;f<u.children.length&&d<=h;f++){let p=u.children[f],m=d+p.length;m>=h&&(p.children.length?c(p,h-d):(!a||a.isHidden&&t>0)&&(m>h||d==m&&p.getSide()>0)?(a=p,l=h-d):(d<h||d==m&&p.getSide()<0&&!p.isHidden)&&(n=p,o=h-d)),d=m}}c(i,e);let A=(t<0?n:a)||n||a;return A?A.coordsAt(Math.max(0,A==n?o:l),t):IX(i)}function IX(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Gf(e);return t[t.length-1]||null}function ZC(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}var _R=Object.create(null);function MS(i,e,t){if(i==e)return!0;i||(i=_R),e||(e=_R);let n=Object.keys(i),o=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=o.length-(t&&o.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(o.indexOf(a)==-1||i[a]!==e[a]))return!1;return!0}function KC(i,e,t){let n=null;if(e)for(let o in e)t&&o in t||i.removeAttribute(n=o);if(t)for(let o in t)e&&e[o]==t[o]||i.setAttribute(n=o,t[o]);return!!n}function MX(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}var Uo=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}destroy(e){}},_n=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(_n||(_n={})),Yt=class extends ws{constructor(e,t,n,o){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(e){return new Hf(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new za(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,o;if(e.isBlockGap)n=-5e8,o=4e8;else{let{start:a,end:l}=xk(e,t);n=(a?t?-3e8:-1:5e8)-1,o=(l?t?2e8:1:-6e8)+1}return new za(e,n,o,t,e.widget||null,!0)}static line(e){return new Wf(e)}static set(e,t=!1){return Pn.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Yt.none=Pn.empty;var Hf=class i extends Yt{constructor(e){let{start:t,end:n}=xk(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof i&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&MS(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};Hf.prototype.point=!1;var Wf=class i extends Yt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof i&&this.spec.class==e.spec.class&&MS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};Wf.prototype.mapMode=ri.TrackBefore;Wf.prototype.point=!0;var za=class i extends Yt{constructor(e,t,n,o,a,l){super(t,n,a,e),this.block=o,this.isReplace=l,this.mapMode=o?t<=0?ri.TrackBefore:ri.TrackAfter:ri.TrackDel}get type(){return this.startSide<this.endSide?_n.WidgetRange:this.startSide<=0?_n.WidgetBefore:_n.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof i&&TX(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};za.prototype.point=!0;function xk(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function TX(i,e){return i==e||!!(i&&e&&i.compare(e))}function JC(i,e,t,n=0){let o=t.length-1;o>=0&&t[o]+n>=i?t[o]=Math.max(t[o],e):t.push(i,e)}var Kr=class i extends sn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,o,a,l){if(n){if(!(n instanceof i))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),dk(this,e,t,n?n.children:[],a,l),!0}split(e){let t=new i;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:o}=this.childPos(e);o&&(t.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){MS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){vk(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=ZC(t,this.attrs||{})),n&&(this.attrs=ZC({class:n},this.attrs||{}))}domAtPos(e){return gk(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(uk(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(KC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let o=this.dom.lastChild;for(;o&&sn.get(o)instanceof Ga;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((n=sn.get(o))===null||n===void 0?void 0:n.isEditable)==!1&&(!$e.ios||!this.children.some(a=>a instanceof Oa))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Oa)||/[^ -~]/.test(n.text))return null;let o=Gf(n.dom);if(o.length!=1)return null;e+=o[0].width,t=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=yk(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:o}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-o.lineHeight)<2&&o.textHeight<a){let l=(a-o.textHeight)/2;return{top:n.top+l,bottom:n.bottom-l,left:n.left,right:n.left}}}return n}become(e){return!1}get type(){return _n.Text}static find(e,t){for(let n=0,o=0;n<e.children.length;n++){let a=e.children[n],l=o+a.length;if(l>=t){if(a instanceof i)return a;if(l>t)break}o=l+a.breakAfter}return null}},Vf=class i extends sn{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,o,a,l){return n&&(!(n instanceof i)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&l<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?rr.before(this.dom):rr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new i(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return IS}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_t.empty}domBoundsAround(){return null}become(e){return e instanceof i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Qf=class i{constructor(e,t,n,o){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Vf&&e.type==_n.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Kr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(l0(new zf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:l,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(l0(new Oa(this.text.slice(this.textOff,this.textOff+o)),t),n),this.atCursorPos=!0,this.textOff+=o,e-=o,n=0}}span(e,t,n,o){this.buildText(t-e,n,o),this.pos=t,this.openStart<0&&(this.openStart=o)}point(e,t,n,o,a,l){if(this.disallowBlockEffectsFor[l]&&n instanceof za){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(n instanceof za)if(n.block){let{type:A}=n;A==_n.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Vf(n.widget||new T0("div"),c,A))}else{let A=M0.create(n.widget||new T0("span"),c,c?0:n.startSide),u=this.atCursorPos&&!A.isEditable&&a<=o.length&&(e<t||n.startSide>0),h=!A.isEditable&&(e<t||a>o.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!A.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),u&&(f.append(l0(new zf(1),o),a),a=o.length+Math.max(0,a-o.length)),f.append(l0(A,o),a),this.atCursorPos=h,this.pendingBuffer=h?e<t||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,o,a){let l=new i(e,t,n,a);return l.openEnd=Pn.spans(o,t,n,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}};function l0(i,e){for(let t of e)i=new Ga(t,[i],i.length);return i}var T0=class extends Uo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}},wk=tt.define(),bk=tt.define(),Ck=tt.define(),Sk=tt.define(),jC=tt.define(),Ek=tt.define(),Ik=tt.define(),Mk=tt.define({combine:i=>i.some(e=>e)}),Tk=tt.define({combine:i=>i.some(e=>e)}),D0=class i{constructor(e,t="nearest",n="nearest",o=5,a=5){this.range=e,this.y=t,this.x=n,this.yMargin=o,this.xMargin=a}map(e){return e.empty?this:new i(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}},NR=Nt.define({map:(i,e)=>i.map(e)});function Mr(i,e,t){let n=i.facet(Sk);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var F0=tt.define({combine:i=>i.length?i[0]:!0}),DX=0,_f=tt.define(),ai=class i{constructor(e,t,n,o){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=o(this)}static define(e,t){let{eventHandlers:n,provide:o,decorations:a}=t||{};return new i(DX++,e,n,l=>{let c=[_f.of(l)];return a&&c.push(Xf.of(A=>{let u=A.plugin(l);return u?a(u):Yt.none})),o&&c.push(o(l)),c})}static fromClass(e,t){return i.define(n=>new e(n),t)}},Uf=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Mr(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Mr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Mr(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},Dk=tt.define(),TS=tt.define(),Xf=tt.define(),DS=tt.define(),Bk=tt.define();function Lk(i){let e=0,t=0,n=0,o=0;for(let a of i.state.facet(Bk)){let l=a(i);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(t=Math.max(t,l.right)),l.top!=null&&(n=Math.max(n,l.top)),l.bottom!=null&&(o=Math.max(o,l.bottom)))}return{left:e,right:t,top:n,bottom:o}}var Nf=tt.define(),qs=class i{constructor(e,t,n,o){this.fromA=e,this.toA=t,this.fromB=n,this.toB=o}join(e){return new i(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let o=e[t-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let o=0,a=0,l=0,c=0;;o++){let A=o==e.length?null:e[o],u=l-c,h=A?A.fromB:1e9;for(;a<t.length&&t[a]<h;){let f=t[a],d=t[a+1],p=Math.max(c,f),m=Math.min(h,d);if(p<=m&&new i(p+u,m+u,p,m).addToSet(n),d>h)break;a+=2}if(!A)return n;new i(A.fromA,A.toA,A.fromB,A.toB).addToSet(n),l=A.toA,c=A.toB}}},B0=class i{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Gi.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,l,c,A)=>o.push(new qs(a,l,c,A))),this.changedRanges=o}static create(e,t,n){return new i(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},rn=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(rn||(rn={})),qC=rn.LTR,BX=rn.RTL;function Rk(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}var LX=Rk("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),RX=Rk("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$C=Object.create(null),Js=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);$C[e]=t,$C[t]=-e}function kX(i){return i<=247?LX[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?RX[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}var PX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Fa=class{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?BX:qC}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,o){let a=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=t&&c.to>=t){if(c.level==n)return l;(a<0||(o!=0?o<0?c.from<t:c.to>t:e[a].level>c.level))&&(a=l)}}if(a<0)throw new RangeError("Index out of range");return a}},mn=[];function _X(i,e){let t=i.length,n=e==qC?1:2,o=e==qC?2:1;if(!i||n==1&&!PX.test(i))return kk(t);for(let l=0,c=n,A=n;l<t;l++){let u=kX(i.charCodeAt(l));u==512?u=c:u==8&&A==4&&(u=16),mn[l]=u==4?2:u,u&7&&(A=u),c=u}for(let l=0,c=n,A=n;l<t;l++){let u=mn[l];if(u==128)l<t-1&&c==mn[l+1]&&c&24?u=mn[l]=c:mn[l]=256;else if(u==64){let h=l+1;for(;h<t&&mn[h]==64;)h++;let f=l&&c==8||h<t&&mn[h]==8?A==1?1:8:256;for(let d=l;d<h;d++)mn[d]=f;l=h-1}else u==8&&A==1&&(mn[l]=1);c=u,u&7&&(A=u)}for(let l=0,c=0,A=0,u,h,f;l<t;l++)if(h=$C[u=i.charCodeAt(l)])if(h<0){for(let d=c-3;d>=0;d-=3)if(Js[d+1]==-h){let p=Js[d+2],m=p&2?n:p&4?p&1?o:n:0;m&&(mn[l]=mn[Js[d]]=m),c=d;break}}else{if(Js.length==189)break;Js[c++]=l,Js[c++]=u,Js[c++]=A}else if((f=mn[l])==2||f==1){let d=f==n;A=d?0:1;for(let p=c-3;p>=0;p-=3){let m=Js[p+2];if(m&2)break;if(d)Js[p+2]|=2;else{if(m&4)break;Js[p+2]|=4}}}for(let l=0;l<t;l++)if(mn[l]==256){let c=l+1;for(;c<t&&mn[c]==256;)c++;let A=(l?mn[l-1]:n)==1,u=(c<t?mn[c]:n)==1,h=A==u?A?1:2:n;for(let f=l;f<c;f++)mn[f]=h;l=c-1}let a=[];if(n==1)for(let l=0;l<t;){let c=l,A=mn[l++]!=1;for(;l<t&&A==(mn[l]!=1);)l++;if(A)for(let u=l;u>c;){let h=u,f=mn[--u]!=2;for(;u>c&&f==(mn[u-1]!=2);)u--;a.push(new Fa(u,h,f?2:1))}else a.push(new Fa(c,l,0))}else for(let l=0;l<t;){let c=l,A=mn[l++]==2;for(;l<t&&A==(mn[l]==2);)l++;a.push(new Fa(c,l,A?1:2))}return a}function kk(i){return[new Fa(0,i,0)]}var Pk="";function NX(i,e,t,n,o){var a;let l=n.head-i.from,c=-1;if(l==0){if(!o||!i.length)return null;e[0].level!=t&&(l=e[0].side(!1,t),c=0)}else if(l==i.length){if(o)return null;let d=e[e.length-1];d.level!=t&&(l=d.side(!0,t),c=e.length-1)}c<0&&(c=Fa.find(e,l,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc));let A=e[c];l==A.side(o,t)&&(A=e[c+=o?1:-1],l=A.side(!o,t));let u=o==(A.dir==t),h=oi(i.text,l,u);if(Pk=i.text.slice(Math.min(l,h),Math.max(l,h)),h!=A.side(o,t))return Oe.cursor(h+i.from,u?-1:1,A.level);let f=c==(o?e.length-1:0)?null:e[c+(o?1:-1)];return!f&&A.level!=t?Oe.cursor(o?i.to:i.from,o?-1:1,t):f&&f.level<A.level?Oe.cursor(f.side(!o,t)+i.from,o?1:-1,f.level):Oe.cursor(h+i.from,o?-1:1,A.level)}var L0=class extends sn{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Kr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new qs(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:c,toA:A})=>A<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let n=this.view.inputState.composing<0?null:QX(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:c,to:A}=this.hasComposition;t=new qs(c,A,e.changes.mapPos(c,-1),e.changes.mapPos(A,1)).addToSet(t.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,($e.ie||$e.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=OX(o,a,e.changes);return t=qs.extendWithRanges(t,l),!(this.flags&7)&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=$e.chrome||$e.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||o.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof Vf&&l.widget instanceof R0&&a.push(l.dom);o.updateGaps(a)}updateChildren(e,t,n){let o=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let l=o.length-1;;l--){let c=l>=0?o[l]:null;if(!c)break;let{fromA:A,toA:u,fromB:h,toB:f}=c,d,p,m,b;if(n&&n.range.fromB<f&&n.range.toB>h){let E=Qf.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),S=Qf.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);p=E.breakAtStart,m=E.openStart,b=S.openEnd;let C=this.compositionView(n);S.breakAtStart?C.breakAfter=1:S.content.length&&C.merge(C.length,C.length,S.content[0],!1,S.openStart,0)&&(C.breakAfter=S.content[0].breakAfter,S.content.shift()),E.content.length&&C.merge(0,0,E.content[E.content.length-1],!0,0,E.openEnd)&&E.content.pop(),d=E.content.concat(C).concat(S.content)}else({content:d,breakAtStart:p,openStart:m,openEnd:b}=Qf.build(this.view.state.doc,h,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:w}=a.findPos(u,1),{i:I,off:v}=a.findPos(A,-1);fk(this,I,v,g,w,d,p,m,b)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new Oa(e.text.nodeValue);t.flags|=8;for(let{deco:o}of e.marks)t=new Ga(o,[t],t.length);let n=new Kr;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,l)=>{l.flags|=8,this.markedForComposition.add(l);let c=sn.get(a);c!=l&&(c&&(c.dom=null),l.setDOM(a))},n=this.childPos(e.range.fromB,1),o=this.children[n.i];t(e.line,o);for(let a=e.marks.length-1;a>=-1;a--)n=o.childPos(n.off,1),o=o.children[n.i],t(a>=0?e.marks[a].node:e.text,o)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,a=!o&&m0(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||t||a))return;let l=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,A=this.domAtPos(c.anchor),u=c.empty?A:this.domAtPos(c.head);if($e.gecko&&c.empty&&!this.hasComposition&&FX(A)){let f=document.createTextNode("");this.view.observer.ignore(()=>A.node.insertBefore(f,A.node.childNodes[A.offset]||null)),A=u=new rr(f,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||!b0(A.node,A.offset,h.anchorNode,h.anchorOffset)||!b0(u.node,u.offset,h.focusNode,h.focusOffset))&&(this.view.observer.ignore(()=>{$e.android&&$e.chrome&&this.dom.contains(h.focusNode)&&GX(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=w0(this.view.root);if(f)if(c.empty){if($e.gecko){let d=UX(A.node,A.offset);if(d&&d!=3){let p=Nk(A.node,A.offset,d==1?1:-1);p&&(A=new rr(p,d==1?0:p.nodeValue.length))}}f.collapse(A.node,A.offset),c.bidiLevel!=null&&h.cursorBidiLevel!=null&&(h.cursorBidiLevel=c.bidiLevel)}else if(f.extend){f.collapse(A.node,A.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();c.anchor>c.head&&([A,u]=[u,A]),d.setEnd(u.node,u.offset),d.setStart(A.node,A.offset),f.removeAllRanges(),f.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(A,u)),this.impreciseAnchor=A.precise?null:new rr(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new rr(h.focusNode,h.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=w0(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let l=Kr.find(this,t.head);if(!l)return;let c=l.posAtStart;if(t.head==c||t.head==c+l.length)return;let A=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!A||!u||A.bottom>u.top)return;let h=this.domAtPos(t.head+t.assoc);n.collapse(h.node,h.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&n.collapse(o,a)}nearest(e){for(let t=e;t;){let n=sn.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let o=this.children[t];if(n<o.length||o instanceof Kr)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,o=this.children.length-1;;o--){let a=this.children[o],l=n-a.breakAfter-a.length;if(e>l||e==l&&a.type!=_n.WidgetBefore&&a.type!=_n.WidgetAfter&&(!o||t==2||this.children[o-1].breakAfter||this.children[o-1].type==_n.WidgetBefore&&t>-2))return a.coordsAt(e-l,t);n=l}}measureVisibleLineHeights(e){let t=[],{from:n,to:o}=e,a=this.view.contentDOM.clientWidth,l=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,A=this.view.textDirection==rn.LTR;for(let u=0,h=0;h<this.children.length;h++){let f=this.children[h],d=u+f.length;if(d>o)break;if(u>=n){let p=f.dom.getBoundingClientRect();if(t.push(p.height),l){let m=f.dom.lastChild,b=m?Gf(m):[];if(b.length){let g=b[b.length-1],w=A?g.right-p.left:p.right-g.left;w>c&&(c=w,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?rn.RTL:rn.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Kr){let l=a.measureTextSize();if(l)return l}let e=document.createElement("div"),t,n,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=Gf(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,o=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:o}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new S0(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,o=0;;o++){let a=o==t.viewports.length?null:t.viewports[o],l=a?a.from-1:this.length;if(l>n){let c=t.lineBlockAt(l).bottom-t.lineBlockAt(n).top;e.push(Yt.replace({widget:new R0(c),block:!0,inclusive:!0,isBlockGap:!0}).range(n,l))}if(!a)break;n=a.to+1}return Yt.set(e)}updateDeco(){let e=this.view.state.facet(Xf).map((t,n)=>(this.dynamicDecorationMap[n]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),o;if(!n)return;!t.empty&&(o=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,o.left),top:Math.min(n.top,o.top),right:Math.max(n.right,o.right),bottom:Math.max(n.bottom,o.bottom)});let a=Lk(this.view),l={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom};xX(this.view.scrollDOM,l,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==rn.LTR)}};function FX(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}var R0=class extends Uo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function _k(i){let e=i.observer.selectionRange,t=e.focusNode&&Nk(e.focusNode,e.focusOffset,0);if(!t)return null;let n=sn.get(t),o,a;if(n instanceof Oa)o=n.posAtStart,a=o+n.length;else e:for(let l=0,c=t;;){for(let u=c.previousSibling,h;u;u=u.previousSibling){if(h=sn.get(u)){o=a=h.posAtEnd+l;break e}let f=new E0([],i.state);if(f.readNode(u),f.text.indexOf(qA)>-1)return null;l+=f.text.length}if(c=c.parentNode,!c)return null;let A=sn.get(c);if(A){o=a=A.posAtStart+l;break}}return{from:o,to:a,node:t}}function QX(i,e){let t=_k(i);if(!t)return null;let{from:n,to:o,node:a}=t,l=e.mapPos(n,-1),c=e.mapPos(o,1),A=a.nodeValue;if(/[\n\r]/.test(A))return null;if(c-l!=A.length){let d=e.mapPos(n,1),p=e.mapPos(o,-1);if(p-d==A.length)l=d,c=p;else if(i.state.doc.sliceString(c-A.length,c)==A)l=c-A.length;else if(i.state.doc.sliceString(l,l+A.length)==A)c=l+A.length;else return null}let{main:u}=i.state.selection;if(i.state.doc.sliceString(l,c)!=A||l>u.head||c<u.head)return null;let h=[],f=new qs(n,o,l,c);for(let d=a.parentNode;;d=d.parentNode){let p=sn.get(d);if(p instanceof Ga)h.push({node:d,deco:p.mark});else{if(p instanceof Kr||d.nodeName=="DIV"&&d.parentNode==i.contentDOM)return{range:f,text:a,marks:h,line:d};if(d!=i.contentDOM)h.push({node:d,deco:new Hf({inclusive:!0,attributes:MX(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Nk(i,e,t){if(t<=0)for(let n=i,o=e;;){if(n.nodeType==3)return n;if(n.nodeType==1&&o>0)n=n.childNodes[o-1],o=Ua(n);else break}if(t>=0)for(let n=i,o=e;;){if(n.nodeType==3)return n;if(n.nodeType==1&&o<n.childNodes.length&&t>=0)n=n.childNodes[o],o=0;else break}return null}function UX(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}var eS=class{constructor(){this.changes=[]}compareRange(e,t){JC(e,t,this.changes)}comparePoint(e,t){JC(e,t,this.changes)}};function OX(i,e,t){let n=new eS;return Pn.compare(i,e,t,n),n.changes}function GX(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function zX(i,e,t=1){let n=i.charCategorizer(e),o=i.doc.lineAt(e),a=e-o.from;if(o.length==0)return Oe.cursor(e);a==0?t=1:a==o.length&&(t=-1);let l=a,c=a;t<0?l=oi(o.text,a,!1):c=oi(o.text,a);let A=n(o.text.slice(l,c));for(;l>0;){let u=oi(o.text,l,!1);if(n(o.text.slice(u,l))!=A)break;l=u}for(;c<o.length;){let u=oi(o.text,c);if(n(o.text.slice(c,u))!=A)break;c=u}return Oe.range(l+o.from,c+o.from)}function HX(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function WX(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function QC(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function FR(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function QR(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function tS(i,e,t){let n,o,a,l,c=!1,A,u,h,f;for(let m=i.firstChild;m;m=m.nextSibling){let b=Gf(m);for(let g=0;g<b.length;g++){let w=b[g];o&&QC(o,w)&&(w=FR(QR(w,o.bottom),o.top));let I=HX(e,w),v=WX(t,w);if(I==0&&v==0)return m.nodeType==3?UR(m,e,t):tS(m,e,t);if(!n||l>v||l==v&&a>I){n=m,o=w,a=I,l=v;let E=v?t<w.top?-1:1:I?e<w.left?-1:1:0;c=!E||(E>0?g<b.length-1:g>0)}I==0?t>w.bottom&&(!h||h.bottom<w.bottom)?(A=m,h=w):t<w.top&&(!f||f.top>w.top)&&(u=m,f=w):h&&QC(h,w)?h=QR(h,w.bottom):f&&QC(f,w)&&(f=FR(f,w.top))}}if(h&&h.bottom>=t?(n=A,o=h):f&&f.top<=t&&(n=u,o=f),!n)return{node:i,offset:0};let d=Math.max(o.left,Math.min(o.right,e));if(n.nodeType==3)return UR(n,d,t);if(c&&n.contentEditable!="false")return tS(n,d,t);let p=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(o.left+o.right)/2?1:0);return{node:i,offset:p}}function UR(i,e,t){let n=i.nodeValue.length,o=-1,a=1e9,l=0;for(let c=0;c<n;c++){let A=nu(i,c,c+1).getClientRects();for(let u=0;u<A.length;u++){let h=A[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let f=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&f<a){let d=e>=(h.left+h.right)/2,p=d;if(($e.chrome||$e.gecko)&&nu(i,c).getBoundingClientRect().left==h.right&&(p=!d),f<=0)return{node:i,offset:c+(p?1:0)};o=c+(p?1:0),a=f}}}return{node:i,offset:o>-1?o:l>0?i.nodeValue.length:0}}function Fk(i,e,t,n=-1){var o,a;let l=i.contentDOM.getBoundingClientRect(),c=l.top+i.viewState.paddingTop,A,{docHeight:u}=i.viewState,{x:h,y:f}=e,d=f-c;if(d<0)return 0;if(d>u)return i.state.doc.length;for(let E=i.viewState.heightOracle.textHeight/2,S=!1;A=i.elementAtHeight(d),A.type!=_n.Text;)for(;d=n>0?A.bottom+E:A.top-E,!(d>=0&&d<=u);){if(S)return t?null:0;S=!0,n=-n}f=c+d;let p=A.from;if(p<i.viewport.from)return i.viewport.from==0?0:t?null:OR(i,l,A,h,f);if(p>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:OR(i,l,A,h,f);let m=i.dom.ownerDocument,b=i.root.elementFromPoint?i.root:m,g=b.elementFromPoint(h,f);g&&!i.contentDOM.contains(g)&&(g=null),g||(h=Math.max(l.left+1,Math.min(l.right-1,h)),g=b.elementFromPoint(h,f),g&&!i.contentDOM.contains(g)&&(g=null));let w,I=-1;if(g&&((o=i.docView.nearest(g))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let E=m.caretPositionFromPoint(h,f);E&&({offsetNode:w,offset:I}=E)}else if(m.caretRangeFromPoint){let E=m.caretRangeFromPoint(h,f);E&&({startContainer:w,startOffset:I}=E,(!i.contentDOM.contains(w)||$e.safari&&VX(w,I,h)||$e.chrome&&XX(w,I,h))&&(w=void 0))}}if(!w||!i.docView.dom.contains(w)){let E=Kr.find(i.docView,p);if(!E)return d>A.top+A.height/2?A.to:A.from;({node:w,offset:I}=tS(E.dom,h,f))}let v=i.docView.nearest(w);if(!v)return null;if(v.isWidget&&((a=v.dom)===null||a===void 0?void 0:a.nodeType)==1){let E=v.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(w,I)+v.posAtStart}function OR(i,e,t,n,o){let a=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let c=i.viewState.heightOracle.textHeight,A=Math.floor((o-t.top-(i.defaultLineHeight-c)*.5)/c);a+=A*i.viewState.heightOracle.lineLength}let l=i.state.sliceDoc(t.from,t.to);return t.from+CR(l,a,i.state.tabSize)}function VX(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let o=i.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return nu(i,n-1,n).getBoundingClientRect().left>t}function XX(i,e,t){if(e!=0)return!1;for(let o=i;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let n=i.nodeType==1?i.getBoundingClientRect():nu(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function nS(i,e){let t=i.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==_n.Text))return n}return t}function YX(i,e,t,n){let o=nS(i,e.head),a=!n||o.type!=_n.Text||!(i.lineWrapping||o.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(a){let l=i.dom.getBoundingClientRect(),c=i.textDirectionAt(o.from),A=i.posAtCoords({x:t==(c==rn.LTR)?l.right-1:l.left+1,y:(a.top+a.bottom)/2});if(A!=null)return Oe.cursor(A,t?-1:1)}return Oe.cursor(t?o.to:o.from,t?-1:1)}function GR(i,e,t,n){let o=i.state.doc.lineAt(e.head),a=i.bidiSpans(o),l=i.textDirectionAt(o.from);for(let c=e,A=null;;){let u=NX(o,a,l,c,t),h=Pk;if(!u){if(o.number==(t?i.state.doc.lines:1))return c;h=`
`,o=i.state.doc.line(o.number+(t?1:-1)),a=i.bidiSpans(o),u=Oe.cursor(t?o.from:o.to)}if(A){if(!A(h))return c}else{if(!n)return u;A=n(h)}c=u}}function ZX(i,e,t){let n=i.state.charCategorizer(e),o=n(t);return a=>{let l=n(a);return o==un.Space&&(o=l),o==l}}function KX(i,e,t,n){let o=e.head,a=t?1:-1;if(o==(t?i.state.doc.length:0))return Oe.cursor(o,e.assoc);let l=e.goalColumn,c,A=i.contentDOM.getBoundingClientRect(),u=i.coordsAtPos(o),h=i.documentTop;if(u)l==null&&(l=u.left-A.left),c=a<0?u.top:u.bottom;else{let p=i.viewState.lineBlockAt(o);l==null&&(l=Math.min(A.right-A.left,i.defaultCharacterWidth*(o-p.from))),c=(a<0?p.top:p.bottom)+h}let f=A.left+l,d=n??i.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let m=c+(d+p)*a,b=Fk(i,{x:f,y:m},!1,a);if(m<A.top||m>A.bottom||(a<0?b<o:b>o))return Oe.cursor(b,e.assoc,void 0,l)}}function g0(i,e,t){for(;;){let n=0;for(let o of i)o.between(e-1,e+1,(a,l,c)=>{if(e>a&&e<l){let A=n||t||(e-a<l-e?-1:1);e=A<0?a:l,n=A}});if(!n)return e}}function UC(i,e,t){let n=g0(i.state.facet(DS).map(o=>o(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:Oe.cursor(n,n<t.from?1:-1)}var iS=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(n,o)=>{this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(e,o)||(this.mustFlushObserver(o)&&e.observer.forceFlush(),this.runCustomHandlers(o.type,e,o)?o.preventDefault():n(e,o))};for(let n in Hn){let o=Hn[n];e.contentDOM.addEventListener(n,a=>{zR(e,a)&&t(o,a)},sS[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",n=>{if(n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Hn.mousedown,n),!n.defaultPrevented&&n.button==2)){let o=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=o,200)}}),e.scrollDOM.addEventListener("drop",n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Hn.drop,n)}),$e.chrome&&$e.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,$e.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let o;this.customHandlers=[];for(let a of t)if(o=(n=a.update(e).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:o});for(let l in o)this.registeredEvents.indexOf(l)<0&&l!="scroll"&&(this.registeredEvents.push(l),e.contentDOM.addEventListener(l,c=>{zR(e,c)&&this.runCustomHandlers(l,e,c)&&c.preventDefault()}))}}runCustomHandlers(e,t,n){for(let o of this.customHandlers){let a=o.handlers[e];if(a)try{if(a.call(o.plugin,n,t)||n.defaultPrevented)return!0}catch(l){Mr(t.state,l)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let o=n.handlers.scroll;if(o)try{o.call(n.plugin,t,e)}catch(a){Mr(e.state,a)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(t.keyCode!=27&&Uk.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),$e.android&&$e.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return $e.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((n=Qk.find(o=>o.keyCode==t.keyCode))&&!t.ctrlKey||JX.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=n||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,tu(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:$e.safari&&!$e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},Qk=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],JX="dthko",Uk=[16,17,18,20,91,92,224,225],c0=6;function A0(i){return Math.max(0,i)*.7+8}function jX(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}var rS=class{constructor(e,t,n,o){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=wX(e.contentDOM),this.atoms=e.state.facet(DS).map(l=>l(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(qt.allowMultipleSelections)&&qX(e,t),this.dragging=e6(e,t)&&Hk(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&jX(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,o=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},l=Lk(this.view);e.clientX-l.left<=a.left+c0?n=-A0(a.left-e.clientX):e.clientX+l.right>=a.right-c0&&(n=A0(e.clientX-a.right)),e.clientY-l.top<=a.top+c0?o=-A0(a.top-e.clientY):e.clientY+l.bottom>=a.bottom-c0&&(o=A0(e.clientY-a.bottom)),this.setScrollSpeed(n,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let o=e.ranges[n],a=null;if(o.empty){let l=g0(this.atoms,o.from,0);l!=o.from&&(a=Oe.cursor(l,-1))}else{let l=g0(this.atoms,o.from,-1),c=g0(this.atoms,o.to,1);(l!=o.from||c!=o.to)&&(a=Oe.range(o.from==o.anchor?l:c,o.from==o.head?l:c))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?Oe.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection)||n.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function qX(i,e){let t=i.state.facet(wk);return t.length?t[0](e):$e.mac?e.metaKey:e.ctrlKey}function $X(i,e){let t=i.state.facet(bk);return t.length?t[0](e):$e.mac?!e.altKey:!e.ctrlKey}function e6(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=w0(i.root);if(!n||n.rangeCount==0)return!0;let o=n.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function zR(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=sn.get(t))&&n.ignoreEvent(e))return!1;return!0}var Hn=Object.create(null),sS=Object.create(null),Ok=$e.ie&&$e.ie_version<15||$e.ios&&$e.webkit_version<604;function t6(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),Gk(i,t.value)},50)}function Gk(i,e){let{state:t}=i,n,o=1,a=t.toText(e),l=a.lines==t.selection.ranges.length;if(oS!=null&&t.selection.ranges.every(A=>A.empty)&&oS==a.toString()){let A=-1;n=t.changeByRange(u=>{let h=t.doc.lineAt(u.from);if(h.from==A)return{range:u};A=h.from;let f=t.toText((l?a.line(o++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:f},range:Oe.cursor(u.from+f.length)}})}else l?n=t.changeByRange(A=>{let u=a.line(o++);return{changes:{from:A.from,to:A.to,insert:u.text},range:Oe.cursor(A.from+u.length)}}):n=t.replaceSelection(a);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Hn.keydown=(i,e)=>{i.inputState.setSelectionOrigin("select"),e.keyCode==27&&(i.inputState.lastEscPress=Date.now())};Hn.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};Hn.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};sS.touchstart=sS.touchmove={passive:!0};Hn.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let n of i.state.facet(Ck))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=r6(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new rS(i,e,t,n)),n&&i.observer.ignore(()=>Ak(i.contentDOM)),i.inputState.mouseSelection&&i.inputState.mouseSelection.start(e)}};function HR(i,e,t,n){if(n==1)return Oe.cursor(e,t);if(n==2)return zX(i.state,e,t);{let o=Kr.find(i.docView,e),a=i.state.doc.lineAt(o?o.posAtEnd:e),l=o?o.posAtStart:a.from,c=o?o.posAtEnd:a.to;return c<i.state.doc.length&&c==a.to&&c++,Oe.range(l,c)}}var zk=(i,e)=>i>=e.top&&i<=e.bottom,WR=(i,e,t)=>zk(e,t)&&i>=t.left&&i<=t.right;function n6(i,e,t,n){let o=Kr.find(i.docView,e);if(!o)return 1;let a=e-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let l=o.coordsAt(a,-1);if(l&&WR(t,n,l))return-1;let c=o.coordsAt(a,1);return c&&WR(t,n,c)?1:l&&zk(n,l)?-1:1}function VR(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:n6(i,t,e.clientX,e.clientY)}}var i6=$e.ie&&$e.ie_version<=11,XR=null,YR=0,ZR=0;function Hk(i){if(!i6)return i.detail;let e=XR,t=ZR;return XR=i,ZR=Date.now(),YR=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(YR+1)%3:1}function r6(i,e){let t=VR(i,e),n=Hk(e),o=i.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),o=o.map(a.changes))},get(a,l,c){let A=VR(i,a),u,h=HR(i,A.pos,A.bias,n);if(t.pos!=A.pos&&!l){let f=HR(i,t.pos,t.bias,n),d=Math.min(f.from,h.from),p=Math.max(f.to,h.to);h=d<h.from?Oe.range(d,p):Oe.range(p,d)}return l?o.replaceRange(o.main.extend(h.from,h.to)):c&&n==1&&o.ranges.length>1&&(u=s6(o,A.pos))?u:c?o.addRange(h):Oe.create([h])}}}function s6(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:o}=i.ranges[t];if(n<=e&&o>=e)return Oe.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}Hn.dragstart=(i,e)=>{let{selection:{main:t}}=i.state,{mouseSelection:n}=i.inputState;n&&(n.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",i.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function KR(i,e,t,n){if(!t)return;let o=i.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:a}=i.inputState,l=n&&a&&a.dragging&&$X(i,e)?{from:a.dragging.from,to:a.dragging.to}:null,c={from:o,insert:t},A=i.state.changes(l?[l,c]:c);i.focus(),i.dispatch({changes:A,selection:{anchor:A.mapPos(o,-1),head:A.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"})}Hn.drop=(i,e)=>{if(!e.dataTransfer)return;if(i.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let n=Array(t.length),o=0,a=()=>{++o==t.length&&KR(i,e,n.filter(l=>l!=null).join(i.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let c=new FileReader;c.onerror=a,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(n[l]=c.result),a()},c.readAsText(t[l])}}else KR(i,e,e.dataTransfer.getData("Text"),!0)};Hn.paste=(i,e)=>{if(i.state.readOnly)return e.preventDefault();i.observer.flush();let t=Ok?null:e.clipboardData;t?(Gk(i,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):t6(i)};function o6(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function a6(i){let e=[],t=[],n=!1;for(let o of i.selection.ranges)o.empty||(e.push(i.sliceDoc(o.from,o.to)),t.push(o));if(!e.length){let o=-1;for(let{from:a}of i.selection.ranges){let l=i.doc.lineAt(a);l.number>o&&(e.push(l.text),t.push({from:l.from,to:Math.min(i.doc.length,l.to+1)})),o=l.number}n=!0}return{text:e.join(i.lineBreak),ranges:t,linewise:n}}var oS=null;Hn.copy=Hn.cut=(i,e)=>{let{text:t,ranges:n,linewise:o}=a6(i.state);if(!t&&!o)return;oS=o?t:null;let a=Ok?null:e.clipboardData;a?(e.preventDefault(),a.clearData(),a.setData("text/plain",t)):o6(i,t),e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};var Wk=ir.define();function Vk(i,e){let t=[];for(let n of i.facet(Ik)){let o=n(i,e);o&&t.push(o)}return t?i.update({effects:t,annotations:Wk.of(!0)}):null}function Xk(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=Vk(i.state,e);t?i.dispatch(t):i.update([])}},10)}Hn.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Xk(i)};Hn.blur=i=>{i.observer.clearSelectionRange(),Xk(i)};Hn.compositionstart=Hn.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};Hn.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,$e.chrome&&$e.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50)};Hn.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Hn.beforeinput=(i,e)=>{var t;let n;if($e.chrome&&$e.android&&(n=Qk.find(o=>o.inputType==e.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let o=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};var JR=["pre-wrap","normal","pre-line","break-spaces"],aS=class{constructor(e){this.lineWrapping=e,this.doc=_t.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return JR.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let o=e[n];o<0?n++:this.heightSamples[Math.floor(o*10)]||(t=!0,this.heightSamples[Math.floor(o*10)]=!0)}return t}refresh(e,t,n,o,a,l){let c=JR.indexOf(e)>-1,A=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=n,this.textHeight=o,this.lineLength=a,A){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return A}},lS=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},js=class i{constructor(e,t,n,o,a){this.from=e,this.length=t,this.top=n,this.height=o,this._content=a}get type(){return typeof this._content=="number"?_n.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof za?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new i(this.from,this.length+e.length,this.top,this.height+e.height,t)}},nn=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(nn||(nn={})),v0=.001,Tr=class i{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>v0&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return i.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,o){let a=this,l=n.doc;for(let c=o.length-1;c>=0;c--){let{fromA:A,toA:u,fromB:h,toB:f}=o[c],d=a.lineAt(A,nn.ByPosNoHeight,n.setDoc(t),0,0),p=d.to>=u?d:a.lineAt(u,nn.ByPosNoHeight,n,0,0);for(f+=p.to-u,u=p.to;c>0&&d.from<=o[c-1].toA;)A=o[c-1].fromA,h=o[c-1].fromB,c--,A<d.from&&(d=a.lineAt(A,nn.ByPosNoHeight,n,0,0));h+=d.from-A,A=d.from;let m=AS.build(n.setDoc(l),e,h,f);a=a.replace(A,u,m)}return a.updateHeight(n,0)}static empty(){return new Zr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,o=0,a=0;for(;;)if(t==n)if(o>a*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),n+=1+c.break,o-=c.size}else if(a>o*2){let c=e[n];c.break?e.splice(n,1,c.left,null,c.right):e.splice(n,1,c.left,c.right),n+=2+c.break,a-=c.size}else break;else if(o<a){let c=e[t++];c&&(o+=c.size)}else{let c=e[--n];c&&(a+=c.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,n++),new cS(i.of(e.slice(0,t)),l,i.of(e.slice(n)))}};Tr.prototype.size=1;var k0=class extends Tr{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,o){return new js(o,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,o,a){return this.blockAt(0,n,o,a)}forEachLine(e,t,n,o,a,l){e<=a+this.length&&t>=a&&l(this.blockAt(0,n,o,a))}updateHeight(e,t=0,n=!1,o){return o&&o.from<=t&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Zr=class i extends k0{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,o){return new js(o,this.length,n,this.height,this.breaks)}replace(e,t,n){let o=n[0];return n.length==1&&(o instanceof i||o instanceof Qa&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof Qa?o=new i(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):Tr.of(n)}updateHeight(e,t=0,n=!1,o){return o&&o.from<=t&&o.more?this.setHeight(e,o.heights[o.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Qa=class i extends Tr{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,o=e.doc.lineAt(t+this.length).number,a=o-n+1,l,c=0;if(e.lineWrapping){let A=Math.min(this.height,e.lineHeight*a);l=A/a,this.length>a+1&&(c=(this.height-A)/(this.length-a-1))}else l=this.height/a;return{firstLine:n,lastLine:o,perLine:l,perChar:c}}blockAt(e,t,n,o){let{firstLine:a,lastLine:l,perLine:c,perChar:A}=this.heightMetrics(t,o);if(t.lineWrapping){let u=o+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),h=t.doc.lineAt(u),f=c+h.length*A,d=Math.max(n,e-f/2);return new js(h.from,h.length,d,f,0)}else{let u=Math.max(0,Math.min(l-a,Math.floor((e-n)/c))),{from:h,length:f}=t.doc.line(a+u);return new js(h,f,n+c*u,c,0)}}lineAt(e,t,n,o,a){if(t==nn.ByHeight)return this.blockAt(e,n,o,a);if(t==nn.ByPosNoHeight){let{from:p,to:m}=n.doc.lineAt(e);return new js(p,m-p,0,0,0)}let{firstLine:l,perLine:c,perChar:A}=this.heightMetrics(n,a),u=n.doc.lineAt(e),h=c+u.length*A,f=u.number-l,d=o+c*f+A*(u.from-a-f);return new js(u.from,u.length,Math.max(o,Math.min(d,o+this.height-h)),h,0)}forEachLine(e,t,n,o,a,l){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:c,perLine:A,perChar:u}=this.heightMetrics(n,a);for(let h=e,f=o;h<=t;){let d=n.doc.lineAt(h);if(h==e){let m=d.number-c;f+=A*m+u*(e-a-m)}let p=A+u*d.length;l(new js(d.from,d.length,f,p,0)),f+=p,h=d.to+1}}replace(e,t,n){let o=this.length-t;if(o>0){let a=n[n.length-1];a instanceof i?n[n.length-1]=new i(a.length+o):n.push(null,new i(o-1))}if(e>0){let a=n[0];a instanceof i?n[0]=new i(e+a.length):n.unshift(new i(e-1),null)}return Tr.of(n)}decomposeLeft(e,t){t.push(new i(e-1),null)}decomposeRight(e,t){t.push(null,new i(this.length-e-1))}updateHeight(e,t=0,n=!1,o){let a=t+this.length;if(o&&o.from<=t+this.length&&o.more){let l=[],c=Math.max(t,o.from),A=-1;for(o.from>t&&l.push(new i(o.from-t-1).updateHeight(e,t));c<=a&&o.more;){let h=e.doc.lineAt(c).length;l.length&&l.push(null);let f=o.heights[o.index++];A==-1?A=f:Math.abs(f-A)>=v0&&(A=-2);let d=new Zr(h,f);d.outdated=!1,l.push(d),c+=h+1}c<=a&&l.push(null,new i(a-c).updateHeight(e,c));let u=Tr.of(l);return(A<0||Math.abs(u.height-this.height)>=v0||Math.abs(A-this.heightMetrics(e,t).perLine)>=v0)&&(e.heightChanged=!0),u}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},cS=class extends Tr{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,o){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,o):this.right.blockAt(e,t,a,o+this.left.length+this.break)}lineAt(e,t,n,o,a){let l=o+this.left.height,c=a+this.left.length+this.break,A=t==nn.ByHeight?e<l:e<c,u=A?this.left.lineAt(e,t,n,o,a):this.right.lineAt(e,t,n,l,c);if(this.break||(A?u.to<c:u.from>c))return u;let h=t==nn.ByPosNoHeight?nn.ByPosNoHeight:nn.ByPos;return A?u.join(this.right.lineAt(c,h,n,l,c)):this.left.lineAt(c,h,n,o,a).join(u)}forEachLine(e,t,n,o,a,l){let c=o+this.left.height,A=a+this.left.length+this.break;if(this.break)e<A&&this.left.forEachLine(e,t,n,o,a,l),t>=A&&this.right.forEachLine(e,t,n,c,A,l);else{let u=this.lineAt(A,nn.ByPos,n,o,a);e<u.from&&this.left.forEachLine(e,u.from-1,n,o,a,l),u.to>=e&&u.from<=t&&l(u),t>u.to&&this.right.forEachLine(u.to+1,t,n,c,A,l)}}replace(e,t,n){let o=this.left.length+this.break;if(t<o)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,t-o,n));let a=[];e>0&&this.decomposeLeft(e,a);let l=a.length;for(let c of n)a.push(c);if(e>0&&jR(a,l-1),t<this.length){let c=a.length;this.decomposeRight(t,a),jR(a,c)}return Tr.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,o=n+this.break;if(e>=o)return this.right.decomposeRight(e-o,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<o&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Tr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,o){let{left:a,right:l}=this,c=t+a.length+this.break,A=null;return o&&o.from<=t+a.length&&o.more?A=a=a.updateHeight(e,t,n,o):a.updateHeight(e,t,n),o&&o.from<=c+l.length&&o.more?A=l=l.updateHeight(e,c,n,o):l.updateHeight(e,c,n),A?this.balanced(a,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function jR(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Qa&&(n=i[e+1])instanceof Qa&&i.splice(e-1,3,new Qa(t.length+1+n.length))}var l6=5,AS=class i{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof Zr?o.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Zr(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let l=t-e;n.block?this.addBlock(new k0(l,o,n)):(l||a||o>=l6)&&this.addLineDeco(o,a,l)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Qa(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zr)return e;let t=new Zr(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let n=(t=e.deco)===null||t===void 0?void 0:t.type;n==_n.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n!=_n.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Zr)&&!this.isCovered?this.nodes.push(new Zr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let o of this.nodes)o instanceof Zr&&o.updateHeight(this.oracle,n),n+=o?o.length:1;return this.nodes}static build(e,t,n,o){let a=new i(n,e);return Pn.spans(t,n,o,a,0),a.finish(n)}};function c6(i,e,t){let n=new uS;return Pn.compare(i,e,t,n,0),n.changes}var uS=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,o){(e<t||n&&n.heightRelevant||o&&o.heightRelevant)&&JC(e,t,this.changes,5)}};function A6(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,o=n.defaultView||window,a=Math.max(0,t.left),l=Math.min(o.innerWidth,t.right),c=Math.max(0,t.top),A=Math.min(o.innerHeight,t.bottom);for(let u=i.parentNode;u&&u!=n.body;)if(u.nodeType==1){let h=u,f=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&f.overflow!="visible"){let d=h.getBoundingClientRect();a=Math.max(a,d.left),l=Math.min(l,d.right),c=Math.max(c,d.top),A=u==i.parentNode?d.bottom:Math.min(A,d.bottom)}u=f.position=="absolute"||f.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-t.left,right:Math.max(a,l)-t.left,top:c-(t.top+e),bottom:Math.max(c,A)-(t.top+e)}}function u6(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var Of=class{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let o=e[n],a=t[n];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e){return Yt.replace({widget:new hS(this.size,e)}).range(this.from,this.to)}},hS=class extends Uo{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},P0=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=qR,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=rn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(TS).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new aS(t),this.stateDeco=e.facet(Xf).filter(n=>typeof n!="function"),this.heightMap=Tr.empty().applyChanges(this.stateDeco,_t.empty,this.heightOracle.setDoc(e.doc),[new qs(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Yt.set(this.lineGaps.map(n=>n.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let o=n?t.head:t.anchor;if(!e.some(({from:a,to:l})=>o>=a&&o<=l)){let{from:a,to:l}=this.lineBlockAt(o);e.push(new $A(a,l))}}this.viewports=e.sort((n,o)=>n.from-o.from),this.scaler=this.heightMap.height<=7e6?qR:new fS(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ff(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Xf).filter(h=>typeof h!="function");let o=e.changedRanges,a=qs.extendWithRanges(o,c6(n,this.stateDeco,e?e.changes:Gi.empty(this.state.doc.length))),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=l&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let A=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<A.from||t.range.head>A.to)||!this.viewportIsAppropriate(A))&&(A=this.getViewport(0,t));let u=!e.changes.empty||e.flags&2||A.from!=this.viewport.from||A.to!=this.viewport.to;this.viewport=A,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Tk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),o=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?rn.RTL:rn.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),c=t.getBoundingClientRect(),A=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let u=0,h=0,f=parseInt(n.paddingTop)||0,d=parseInt(n.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(A=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=hk(e.scrollDOM);let p=(this.printing?u6:A6)(t,this.paddingTop),m=p.top-this.pixelViewport.top,b=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(A=!0)),!this.inView&&!this.scrollTarget)return 0;let w=c.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),A){let v=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(v)&&(l=!0),l||o.lineWrapping&&Math.abs(w-this.contentDOMWidth)>o.charWidth){let{lineHeight:E,charWidth:S,textHeight:C}=e.docView.measureTextSize();l=E>0&&o.refresh(a,E,S,C,w/S,v),l&&(e.docView.minWidth=0,u|=8)}m>0&&b>0?h=Math.max(m,b):m<0&&b<0&&(h=Math.min(m,b)),o.heightChanged=!1;for(let E of this.viewports){let S=E.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(E);this.heightMap=(l?Tr.empty().applyChanges(this.stateDeco,_t.empty,this.heightOracle,[new qs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,l,new lS(E.from,S))}o.heightChanged&&(u|=2)}let I=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return I&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(u&2||I)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,A=new $A(o.lineAt(l-n*1e3,nn.ByHeight,a,0,0).from,o.lineAt(c+(1-n)*1e3,nn.ByHeight,a,0,0).to);if(t){let{head:u}=t.range;if(u<A.from||u>A.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=o.lineAt(u,nn.ByPos,a,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&u<A.from?d=f.top:d=f.bottom-h,A=new $A(o.lineAt(d-1e3/2,nn.ByHeight,a,0,0).from,o.lineAt(d+h+1e3/2,nn.ByHeight,a,0,0).to)}}return A}mapViewport(e,t){let n=t.mapPos(e.from,-1),o=t.mapPos(e.to,1);return new $A(this.heightMap.lineAt(n,nn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,nn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,nn.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,nn.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||o<=l-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=c+Math.max(10,Math.min(n,250)))&&o>l-2*1e3&&a<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let o of e)t.touchesRange(o.from,o.to)||n.push(new Of(t.mapPos(o.from),t.mapPos(o.to),o.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,a=o>>1,l=o<<1;if(this.defaultTextDirection!=rn.LTR&&!n)return[];let c=[],A=(u,h,f,d)=>{if(h-u<a)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let g of m)if(g>u&&g<h){A(u,g-10,f,d),A(g+10,h,f,d);return}let b=f6(e,g=>g.from>=f.from&&g.to<=f.to&&Math.abs(g.from-u)<a&&Math.abs(g.to-h)<a&&!m.some(w=>g.from<w&&g.to>w));if(!b){if(h<f.to&&t&&n&&t.visibleRanges.some(g=>g.from<=h&&g.to>=h)){let g=t.moveToLineBoundary(Oe.cursor(h),!1,!0).head;g>u&&(h=g)}b=new Of(u,h,this.gapSize(f,u,h,d))}c.push(b)};for(let u of this.viewportLines){if(u.length<l)continue;let h=h6(u.from,u.to,this.stateDeco);if(h.total<l)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(n){let m=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,g;if(f!=null){let w=h0(h,f),I=((this.visibleBottom-this.visibleTop)/2+m)/u.height;b=w-I,g=w+I}else b=(this.visibleTop-u.top-m)/u.height,g=(this.visibleBottom-u.top+m)/u.height;d=u0(h,b),p=u0(h,g)}else{let m=h.total*this.heightOracle.charWidth,b=o*this.heightOracle.charWidth,g,w;if(f!=null){let I=h0(h,f),v=((this.pixelViewport.right-this.pixelViewport.left)/2+b)/m;g=I-v,w=I+v}else g=(this.pixelViewport.left-b)/m,w=(this.pixelViewport.right+b)/m;d=u0(h,g),p=u0(h,w)}d>u.from&&A(u.from,d,u,h),p<u.to&&A(p,u.to,u,h)}return c}gapSize(e,t,n,o){let a=h0(o,n)-h0(o,t);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){Of.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Yt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Pn.spans(e,this.viewport.from,this.viewport.to,{span(o,a){t.push({from:o,to:a})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=t[a].from||o.to!=t[a].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ff(this.heightMap.lineAt(e,nn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ff(this.heightMap.lineAt(this.scaler.fromDOM(e),nn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ff(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},$A=class{constructor(e,t){this.from=e,this.to=t}};function h6(i,e,t){let n=[],o=i,a=0;return Pn.spans(t,i,e,{span(){},point(l,c){l>o&&(n.push({from:o,to:l}),a+=l-o),o=c}},20),o<e&&(n.push({from:o,to:e}),a+=e-o),{total:a,ranges:n}}function u0({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let o=0;;o++){let{from:a,to:l}=e[o],c=l-a;if(n<=c)return a+n;n-=c}}function h0(i,e){let t=0;for(let{from:n,to:o}of i.ranges){if(e<=o){t+=e-n;break}t+=o-n}return t/i.total}function f6(i,e){for(let t of i)if(e(t))return t}var qR={toDOM(i){return i},fromDOM(i){return i},scale:1},fS=class{constructor(e,t,n){let o=0,a=0,l=0;this.viewports=n.map(({from:c,to:A})=>{let u=t.lineAt(c,nn.ByPos,e,0,0).top,h=t.lineAt(A,nn.ByPos,e,0,0).bottom;return o+=h-u,{from:c,to:A,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(t.height-o);for(let c of this.viewports)c.domTop=l+(c.top-a)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),a=c.bottom}toDOM(e){for(let t=0,n=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return o+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,o=a.domBottom}}fromDOM(e){for(let t=0,n=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,o=a.domBottom}}};function Ff(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new js(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(o=>Ff(o,e)):i._content)}var f0=tt.define({combine:i=>i.join(" ")}),dS=tt.define({combine:i=>i.indexOf(!0)>-1}),pS=Yr.newName(),Yk=Yr.newName(),Zk=Yr.newName(),Kk={"&light":"."+Yk,"&dark":"."+Zk};function mS(i,e,t){return new Yr(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,o=>{if(o=="&")return i;if(!t||!t[o])throw new RangeError(`Unsupported selector: ${o}`);return t[o]}):i+" "+n}})}var d6=mS("."+pS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kk),gS=class{constructor(e,t,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let c=a||l?[]:m6(e),A=new E0(c,e.state);A.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=A.text,this.newSel=g6(c,this.bounds.from)}else{let c=e.observer.selectionRange,A=a&&a.node==c.focusNode&&a.offset==c.focusOffset||!HC(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),u=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!HC(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=Oe.single(u,A)}}};function Jk(i,e){let t,{newSel:n}=e,o=i.state.selection.main,a=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:c}=e.bounds,A=o.from,u=null;(a===8||$e.android&&e.text.length<c-l)&&(A=o.to,u="end");let h=p6(i.state.doc.sliceString(l,c,qA),e.text,A-l,u);h&&($e.chrome&&a==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==qA+qA&&h.toB--,t={from:l+h.from,to:l+h.toA,insert:_t.of(e.text.slice(h.from,h.toB).split(qA))})}else n&&(!i.hasFocus&&i.state.facet(F0)||n.main.eq(o))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!o.empty&&n&&n.main.empty?t={from:o.from,to:o.to,insert:i.state.doc.slice(o.from,o.to)}:t&&t.from>=o.from&&t.to<=o.to&&(t.from!=o.from||t.to!=o.to)&&o.to-o.from-(t.to-t.from)<=4?t={from:o.from,to:o.to,insert:i.state.doc.slice(o.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,o.to))}:($e.mac||$e.android)&&t&&t.from==t.to&&t.from==o.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=Oe.single(n.main.anchor-1,n.main.head-1)),t={from:o.from,to:o.to,insert:_t.of([" "])}):$e.chrome&&t&&t.from==t.to&&t.from==o.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=Oe.single(n.main.anchor-1,n.main.head-1)),t={from:o.from,to:o.to,insert:_t.of([" "])}),t){let l=i.state;if($e.ios&&i.inputState.flushIOSKey(i)||$e.android&&(t.from==o.from&&t.to==o.to&&t.insert.length==1&&t.insert.lines==2&&tu(i.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&t.insert.length==0||a==8&&t.insert.length<t.to-t.from)&&tu(i.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&t.insert.length==0&&tu(i.contentDOM,"Delete",46)))return!0;let c=t.insert.toString();if(i.state.facet(Ek).some(h=>h(i,t.from,t.to,c)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let A;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&i.inputState.composing<0){let h=o.from<t.from?l.sliceDoc(o.from,t.from):"",f=o.to>t.to?l.sliceDoc(t.to,o.to):"";A=l.replaceSelection(i.state.toText(h+t.insert.sliceString(0,void 0,i.state.lineBreak)+f))}else{let h=l.changes(t),f=n&&n.main.to<=h.newLength?n.main:void 0;if(l.selection.ranges.length>1&&i.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let d=i.state.sliceDoc(t.from,t.to),p=_k(i)||i.state.doc.lineAt(o.head),m=o.to-t.to,b=o.to-o.from;A=l.changeByRange(g=>{if(g.from==o.from&&g.to==o.to)return{changes:h,range:f||g.map(h)};let w=g.to-m,I=w-d.length;if(g.to-g.from!=b||i.state.sliceDoc(I,w)!=d||p&&g.to>=p.from&&g.from<=p.to)return{range:g};let v=l.changes({from:I,to:w,insert:t.insert}),E=g.to-o.to;return{changes:v,range:f?Oe.range(Math.max(0,f.anchor+E),Math.max(0,f.head+E)):g.map(v)}})}else A={changes:h,selection:f&&l.selection.replaceRange(f)}}let u="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,u+=".compose",i.inputState.compositionFirstChange&&(u+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(A,{scrollIntoView:!0,userEvent:u}),!0}else if(n&&!n.main.eq(o)){let l=!1,c="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(l=!0),c=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:l,userEvent:c}),!0}else return!1}function p6(i,e,t,n){let o=Math.min(i.length,e.length),a=0;for(;a<o&&i.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==o&&i.length==e.length)return null;let l=i.length,c=e.length;for(;l>0&&c>0&&i.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(n=="end"){let A=Math.max(0,a-Math.min(l,c));t-=l+A-a}if(l<a&&i.length<e.length){let A=t<=a&&t>=l?a-t:0;a-=A,c=a+(c-l),l=a}else if(c<a){let A=t<=a&&t>=c?a-t:0;a-=A,l=a+(l-c),c=a}return{from:a,toA:l,toB:c}}function m6(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:o,focusOffset:a}=i.observer.selectionRange;return t&&(e.push(new I0(t,n)),(o!=t||a!=n)&&e.push(new I0(o,a))),e}function g6(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?Oe.single(t+e,n+e):null}var v6={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},OC=$e.ie&&$e.ie_version<=11,vS=class{constructor(e){this.view=e,this.active=!1,this.selectionRange=new WC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);($e.ie&&$e.ie_version<=11||$e.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),OC&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(F0)?n.root.activeElement!=this.dom:!m0(n.dom,o))return;let a=o.anchorNode&&n.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}($e.ie&&$e.ie_version<=11||$e.android&&$e.chrome)&&!n.state.selection.main.empty&&o.focusNode&&b0(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$e.safari&&e.root.nodeType==11&&vX(this.dom.ownerDocument)==this.dom&&y6(this.view)||w0(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=m0(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&CX(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,v6),OC&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),OC&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&tu(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,o=!1;for(let a of e){let l=this.readMutation(a);l&&(l.typeOver&&(o=!0),t==-1?{from:t,to:n}=l:(t=Math.min(l.from,t),n=Math.max(l.to,n)))}return{from:t,to:n,typeOver:o}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),o=this.selectionChanged&&m0(this.dom,this.selectionRange);return e<0&&!o?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new gS(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,o=Jk(this.view,t);return this.view.state==n&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=$R(t,e.previousSibling||e.target.previousSibling,-1),o=$R(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:o?t.posBefore(o):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,o;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect(),(o=this.resizeContent)===null||o===void 0||o.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};function $R(i,e,t){for(;e;){let n=sn.get(e);if(n&&n.parent==i)return n;let o=e.parentNode;e=o!=i.dom?o:t>0?e.nextSibling:e.previousSibling}return null}function y6(i){let e=null;function t(A){A.preventDefault(),A.stopImmediatePropagation(),e=A.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,o=e.startOffset,a=e.endContainer,l=e.endOffset,c=i.docView.domAtPos(i.state.selection.main.anchor);return b0(c.node,c.offset,a,l)&&([n,o,a,l]=[a,l,n,o]),{anchorNode:n,anchorOffset:o,focusNode:a,focusOffset:l}}var et=class i{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||bX(e.parent)||document,this.viewState=new P0(e.state||qt.create(e)),this.plugins=this.state.facet(_f).map(t=>new Uf(t));for(let t of this.plugins)t.update(this);this.observer=new vS(this),this.inputState=new iS(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new L0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let t=e.length==1&&e[0]instanceof si?e[0]:this.state.update(...e);this._dispatch(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,o,a=this.state;for(let d of e){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let l=this.hasFocus,c=0,A=null;e.some(d=>d.annotation(Wk))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,A=Vk(a,l),A||(c=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(h=null)):this.observer.clear(),a.facet(qt.phrases)!=this.state.facet(qt.phrases))return this.setState(a);o=B0.create(this,a,e),o.flags|=c;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;f=new D0(p.empty?p:Oe.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(NR)&&(f=p.value)}this.viewState.update(o,f),this.bidiCache=_0.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),t=this.docView.update(o),this.state.facet(Nf)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(f0)!=o.state.facet(f0)&&(this.viewState.mustMeasureContent=!0),(t||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let d of this.state.facet(jC))d(o);(A||h)&&Promise.resolve().then(()=>{A&&this.state==A.startState&&this.dispatch(A),h&&!Jk(this,h)&&u.force&&tu(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new P0(e),this.plugins=e.facet(_f).map(n=>new Uf(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new L0(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(_f),n=e.state.facet(_f);if(t!=n){let o=[];for(let a of n){let l=t.indexOf(a);if(l<0)o.push(new Uf(a));else{let c=this.plugins[l];c.mustUpdate=e,o.push(c)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,{scrollTop:o}=n,{scrollAnchorPos:a,scrollAnchorHeight:l}=this.viewState;o!=this.viewState.scrollTop&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(hk(n))a=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(o);a=p.from,l=p.top}this.updateState=1;let A=this.viewState.measure(this);if(!A&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];A&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(p=>{try{return p.read(this)}catch(m){return Mr(this.state,m),ek}}),f=B0.create(this,this.state,[]),d=!1;f.flags|=A,t?t.flags|=A:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f));for(let p=0;p<u.length;p++)if(h[p]!=ek)try{let m=u[p];m.write&&m.write(h[p],this)}catch(m){Mr(this.state,m)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let m=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-l;if(m>1||m<-1){o=n.scrollTop=o+m,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(jC))c(t)}get themeClasses(){return pS+" "+(this.state.facet(dS)?Zk:Yk)+" "+this.state.facet(f0)}updateAttrs(){let e=tk(this,Dk,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(F0)?"true":"false",class:"cm-content",style:`${$e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),tk(this,TS,t);let n=this.observer.ignore(()=>{let o=KC(this.contentDOM,this.contentAttrs,t),a=KC(this.dom,this.editorAttrs,e);return o||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let o of n.effects)if(o.is(i.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(Nf),Yr.mount(this.root,this.styleModules.concat(d6).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return UC(this,e,GR(this,e,t,n))}moveByGroup(e,t){return UC(this,e,GR(this,e,t,n=>ZX(this,e.head,n)))}moveToLineBoundary(e,t,n=!0){return YX(this,e,t,n)}moveVertically(e,t,n){return UC(this,e,KX(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Fk(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o),l=a[Fa.find(a,e-o.from,-1,t)];return ES(n,l.dir==rn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Mk)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>x6)return kk(e.length);let t=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t)return o.order;let n=_X(e.text,t);return this.bidiCache.push(new _0(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||$e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ak(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return NR.of(new D0(typeof e=="number"?Oe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ai.define(()=>({}),{eventHandlers:e})}static theme(e,t){let n=Yr.newName(),o=[f0.of(n),Nf.of(mS(`.${n}`,e))];return t&&t.dark&&o.push(dS.of(!0)),o}static baseTheme(e){return Xr.lowest(Nf.of(mS("."+pS,e,Kk)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),o=n&&sn.get(n)||sn.get(e);return((t=o?.rootView)===null||t===void 0?void 0:t.view)||null}};et.styleModule=Nf;et.inputHandler=Ek;et.focusChangeEffect=Ik;et.perLineTextDirection=Mk;et.exceptionSink=Sk;et.updateListener=jC;et.editable=F0;et.mouseSelectionStyle=Ck;et.dragMovesSelection=bk;et.clickAddsSelectionRange=wk;et.decorations=Xf;et.atomicRanges=DS;et.scrollMargins=Bk;et.darkTheme=dS;et.contentAttributes=TS;et.editorAttributes=Dk;et.lineWrapping=et.contentAttributes.of({class:"cm-lineWrapping"});et.announce=Nt.define();var x6=4096,ek={},_0=class i{constructor(e,t,n,o){this.from=e,this.to=t,this.dir=n,this.order=o}static update(e,t){if(t.empty)return e;let n=[],o=e.length?e[e.length-1].dir:rn.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let l=e[a];l.dir==o&&!t.touchesRange(l.from,l.to)&&n.push(new i(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.order))}return n}};function tk(i,e,t){for(let n=i.state.facet(e),o=n.length-1;o>=0;o--){let a=n[o],l=typeof a=="function"?a(i):a;l&&ZC(l,t)}return t}var w6=$e.mac?"mac":$e.windows?"win":$e.linux?"linux":"key";function b6(i,e){let t=i.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let o,a,l,c;for(let A=0;A<t.length-1;++A){let u=t[A];if(/^(cmd|meta|m)$/i.test(u))c=!0;else if(/^a(lt)?$/i.test(u))o=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?c=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return o&&(n="Alt-"+n),a&&(n="Ctrl-"+n),c&&(n="Meta-"+n),l&&(n="Shift-"+n),n}function d0(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}var C6=Xr.default(et.domEventHandlers({keydown(i,e){return $k(jk(e.state),i,e,"editor")}})),Dr=tt.define({enables:C6}),nk=new WeakMap;function jk(i){let e=i.facet(Dr),t=nk.get(e);return t||nk.set(e,t=E6(e.reduce((n,o)=>n.concat(o),[]))),t}function qk(i,e,t){return $k(jk(i.state),e,i,t)}var Na=null,S6=4e3;function E6(i,e=w6){let t=Object.create(null),n=Object.create(null),o=(l,c)=>{let A=n[l];if(A==null)n[l]=c;else if(A!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},a=(l,c,A,u,h)=>{var f,d;let p=t[l]||(t[l]=Object.create(null)),m=c.split(/ (?!$)/).map(w=>b6(w,e));for(let w=1;w<m.length;w++){let I=m.slice(0,w).join(" ");o(I,!0),p[I]||(p[I]={preventDefault:!0,stopPropagation:!1,run:[v=>{let E=Na={view:v,prefix:I,scope:l};return setTimeout(()=>{Na==E&&(Na=null)},S6),!0}]})}let b=m.join(" ");o(b,!1);let g=p[b]||(p[b]={preventDefault:!1,stopPropagation:!1,run:((d=(f=p._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});A&&g.run.push(A),u&&(g.preventDefault=!0),h&&(g.stopPropagation=!0)};for(let l of i){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of c){let h=t[u]||(t[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in h)h[f].run.push(l.any)}let A=l[e]||l.key;if(A)for(let u of c)a(u,A,l.run,l.preventDefault,l.stopPropagation),l.shift&&a(u,"Shift-"+A,l.shift,l.preventDefault,l.stopPropagation)}return t}function $k(i,e,t,n){let o=MR(e),a=Gn(o,0),l=Oi(a)==o.length&&o!=" ",c="",A=!1,u=!1,h=!1;Na&&Na.view==t&&Na.scope==n&&(c=Na.prefix+" ",Uk.indexOf(e.keyCode)<0&&(u=!0,Na=null));let f=new Set,d=g=>{if(g){for(let w of g.run)if(!f.has(w)&&(f.add(w),w(t,e)))return g.stopPropagation&&(h=!0),!0;g.preventDefault&&(g.stopPropagation&&(h=!0),u=!0)}return!1},p=i[n],m,b;return p&&(d(p[c+d0(o,e,!l)])?A=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!($e.windows&&e.ctrlKey&&e.altKey)&&(m=Qo[e.keyCode])&&m!=o?(d(p[c+d0(m,e,!0)])||e.shiftKey&&(b=JA[e.keyCode])!=o&&b!=m&&d(p[c+d0(b,e,!1)]))&&(A=!0):l&&e.shiftKey&&d(p[c+d0(o,e,!0)])&&(A=!0),!A&&d(p._any)&&(A=!0)),u&&(A=!0),A&&h&&e.stopPropagation(),A}var Yf=class i{constructor(e,t,n,o,a){this.className=e,this.left=t,this.top=n,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let o=e.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let a=e3(e);return[new i(t,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return I6(e,t,n)}};function e3(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==rn.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function ik(i,e,t){let n=Oe.cursor(e);return{from:Math.max(t.from,i.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,i.moveToLineBoundary(n,!0,!0).from),type:_n.Text}}function I6(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),o=Math.min(t.to,i.viewport.to),a=i.textDirection==rn.LTR,l=i.contentDOM,c=l.getBoundingClientRect(),A=e3(i),u=l.querySelector(".cm-line"),h=u&&window.getComputedStyle(u),f=c.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),d=c.right-(h?parseInt(h.paddingRight):0),p=nS(i,n),m=nS(i,o),b=p.type==_n.Text?p:null,g=m.type==_n.Text?m:null;if(b&&(i.lineWrapping||p.widgetLineBreaks)&&(b=ik(i,n,b)),g&&(i.lineWrapping||m.widgetLineBreaks)&&(g=ik(i,o,g)),b&&g&&b.from==g.from)return I(v(t.from,t.to,b));{let S=b?v(t.from,null,b):E(p,!1),C=g?v(null,t.to,g):E(m,!0),M=[];return(b||p).to<(g||m).from-(b&&g?1:0)||p.widgetLineBreaks>1&&S.bottom+i.defaultLineHeight/2<C.top?M.push(w(f,S.bottom,d,C.top)):S.bottom<C.top&&i.elementAtHeight((S.bottom+C.top)/2).type==_n.Text&&(S.bottom=C.top=(S.bottom+C.top)/2),I(S).concat(M).concat(I(C))}function w(S,C,M,D){return new Yf(e,S-A.left,C-A.top-.01,M-S,D-C+.01)}function I({top:S,bottom:C,horizontal:M}){let D=[];for(let T=0;T<M.length;T+=2)D.push(w(M[T],S,M[T+1],C));return D}function v(S,C,M){let D=1e9,T=-1e9,B=[];function R(Q,W,U,H,O){let F=i.coordsAtPos(Q,Q==M.to?-2:2),z=i.coordsAtPos(U,U==M.from?2:-2);!F||!z||(D=Math.min(F.top,z.top,D),T=Math.max(F.bottom,z.bottom,T),O==rn.LTR?B.push(a&&W?f:F.left,a&&H?d:z.right):B.push(!a&&H?f:z.left,!a&&W?d:F.right))}let P=S??M.from,_=C??M.to;for(let Q of i.visibleRanges)if(Q.to>P&&Q.from<_)for(let W=Math.max(Q.from,P),U=Math.min(Q.to,_);;){let H=i.state.doc.lineAt(W);for(let O of i.bidiSpans(H)){let F=O.from+H.from,z=O.to+H.from;if(F>=U)break;z>W&&R(Math.max(F,W),S==null&&F<=P,Math.min(z,U),C==null&&z>=_,O.dir)}if(W=H.to+1,W>=U)break}return B.length==0&&R(P,S==null,_,C==null,i.textDirection),{top:D,bottom:T,horizontal:B}}function E(S,C){let M=c.top+(C?S.top:S.bottom);return{top:M,bottom:M,horizontal:[]}}}function M6(i,e){return i.constructor==e.constructor&&i.eq(e)}var yS=class{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(y0)!=e.state.facet(y0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(y0);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!M6(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let o of e)o.update&&t&&o.constructor&&this.drawn[n].constructor&&o.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(o.draw(),t);for(;t;){let o=t.nextSibling;t.remove(),t=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},y0=tt.define();function t3(i){return[ai.define(e=>new yS(e,i)),y0.of(i)]}var n3=!$e.ios,Zf=tt.define({combine(i){return Er(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Q0(i={}){return[Zf.of(i),T6,D6,B6,Tk.of(!0)]}function i3(i){return i.startState.facet(Zf)!=i.state.facet(Zf)}var T6=t3({above:!0,markers(i){let{state:e}=i,t=e.facet(Zf),n=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||n3:t.drawRangeCursor){let l=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=o.empty?o:Oe.cursor(o.head,o.head>o.anchor?-1:1);for(let A of Yf.forRange(i,l,c))n.push(A)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=i3(i);return t&&rk(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){rk(e.state,i)},class:"cm-cursorLayer"});function rk(i,e){e.style.animationDuration=i.facet(Zf).cursorBlinkRate+"ms"}var D6=t3({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:Yf.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||i3(i)},class:"cm-selectionLayer"}),r3={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};n3&&(r3[".cm-line"].caretColor="transparent !important");var B6=Xr.highest(et.theme(r3));function sk(i,e,t,n,o){e.lastIndex=0;for(let a=i.iterRange(t,n),l=t,c;!a.next().done;l+=a.value.length)if(!a.lineBreak)for(;c=e.exec(a.value);)o(l+c.index,c)}function L6(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:o,to:a}of t)o=Math.max(i.state.doc.lineAt(o).from,o-e),a=Math.min(i.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=o?n[n.length-1].to=a:n.push({from:o,to:a});return n}var xS=class{constructor(e){let{regexp:t,decoration:n,decorate:o,boundary:a,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,o)this.addMatch=(c,A,u,h)=>o(h,u,u+c[0].length,c,A);else if(typeof n=="function")this.addMatch=(c,A,u,h)=>{let f=n(c,A,u);f&&h(u,u+c[0].length,f)};else if(n)this.addMatch=(c,A,u,h)=>h(u,u+c[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=l}createDeco(e){let t=new Vr,n=t.add.bind(t);for(let{from:o,to:a}of L6(e,this.maxLength))sk(e.state.doc,this.regexp,o,a,(l,c)=>this.addMatch(c,e,l,n));return t.finish()}updateDeco(e,t){let n=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((a,l,c,A)=>{A>e.view.viewport.from&&c<e.view.viewport.to&&(n=Math.min(c,n),o=Math.max(A,o))}),e.viewportChanged||o-n>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,t.map(e.changes),n,o):t}updateRange(e,t,n,o){for(let a of e.visibleRanges){let l=Math.max(a.from,n),c=Math.min(a.to,o);if(c>l){let A=e.state.doc.lineAt(l),u=A.to<c?e.state.doc.lineAt(c):A,h=Math.max(a.from,A.from),f=Math.min(a.to,u.to);if(this.boundary){for(;l>A.from;l--)if(this.boundary.test(A.text[l-1-A.from])){h=l;break}for(;c<u.to;c++)if(this.boundary.test(u.text[c-u.from])){f=c;break}}let d=[],p,m=(b,g,w)=>d.push(w.range(b,g));if(A==u)for(this.regexp.lastIndex=h-A.from;(p=this.regexp.exec(A.text))&&p.index<f-A.from;)this.addMatch(p,e,p.index+A.from,m);else sk(e.state.doc,this.regexp,h,f,(b,g)=>this.addMatch(g,e,b,m));t=t.update({filterFrom:h,filterTo:f,filter:(b,g)=>b<h||g>f,add:d})}}return t}},wS=/x/.unicode!=null?"gu":"g",R6=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,wS),k6={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},GC=null;function P6(){var i;if(GC==null&&typeof document<"u"&&document.body){let e=document.body.style;GC=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return GC||!1}var x0=tt.define({combine(i){let e=Er(i,{render:null,specialChars:R6,addSpecialChars:null});return(e.replaceTabs=!P6())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,wS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,wS)),e}});function U0(i={}){return[x0.of(i),_6()]}var ok=null;function _6(){return ok||(ok=ai.fromClass(class{constructor(i){this.view=i,this.decorations=Yt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(x0)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new xS({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:o}=t.state,a=Gn(e[0],0);if(a==9){let l=o.lineAt(n),c=t.state.tabSize,A=tc(l.text,c,n-l.from);return Yt.replace({widget:new CS((c-A%c)*this.view.defaultCharacterWidth)})}return this.decorationCache[a]||(this.decorationCache[a]=Yt.replace({widget:new bS(i,a)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(x0);i.startState.facet(x0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}var N6="\u2022";function F6(i){return i>=32?N6:i==10?"\u2424":String.fromCharCode(9216+i)}var bS=class extends Uo{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=F6(this.code),n=e.state.phrase("Control character")+" "+(k6[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,t);if(o)return o;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}},CS=class extends Uo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};var p0="-10000px",SS=class{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),o=n.filter(l=>l);if(n===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[];for(let l=0;l<o.length;l++){let c=o[l],A=-1;if(c){for(let u=0;u<this.tooltips.length;u++){let h=this.tooltips[u];h&&h.create==c.create&&(A=u)}if(A<0)a[l]=this.createTooltipView(c);else{let u=a[l]=this.tooltipViews[A];u.update&&u.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(l.dom.remove(),(t=l.destroy)===null||t===void 0||t.call(l));return this.input=n,this.tooltips=o,this.tooltipViews=a,!0}};function Q6(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}var zC=tt.define({combine:i=>{var e,t,n;return{position:$e.ios?"absolute":((e=i.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(o=>o.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(o=>o.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||Q6}}}),ak=new WeakMap,s3=ai.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(zC);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new SS(i,BS,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(zC);if(n.position!=this.position){this.position=n.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i){let e=i.create(this.view);if(e.dom.classList.add("cm-tooltip"),i.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=p0,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var i,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(i=t.destroy)===null||i===void 0||i.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(zC).tooltipSpace(this.view)}}writeMeasure(i){var e;let{editor:t,space:n}=i,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:A}=c,u=i.pos[a],h=i.size[a];if(!u||u.bottom<=Math.max(t.top,n.top)||u.top>=Math.min(t.bottom,n.bottom)||u.right<Math.max(t.left,n.left)-.1||u.left>Math.min(t.right,n.right)+.1){A.style.top=p0;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,d=f?7:0,p=h.right-h.left,m=(e=ak.get(c))!==null&&e!==void 0?e:h.bottom-h.top,b=c.offset||O6,g=this.view.textDirection==rn.LTR,w=h.width>n.right-n.left?g?n.left:n.right-h.width:g?Math.min(u.left-(f?14:0)+b.x,n.right-p):Math.max(n.left,u.left-p+(f?14:0)-b.x),I=!!l.above;!l.strictSide&&(I?u.top-(h.bottom-h.top)-b.y<n.top:u.bottom+(h.bottom-h.top)+b.y>n.bottom)&&I==n.bottom-u.bottom>u.top-n.top&&(I=!I);let v=(I?u.top-n.top:n.bottom-u.bottom)-d;if(v<m&&c.resize!==!1){if(v<this.view.defaultLineHeight){A.style.top=p0;continue}ak.set(c,m),A.style.height=(m=v)+"px"}else A.style.height&&(A.style.height="");let E=I?u.top-m-d-b.y:u.bottom+d+b.y,S=w+p;if(c.overlap!==!0)for(let C of o)C.left<S&&C.right>w&&C.top<E+m&&C.bottom>E&&(E=I?C.top-m-2-d:C.bottom+d+2);this.position=="absolute"?(A.style.top=E-i.parent.top+"px",A.style.left=w-i.parent.left+"px"):(A.style.top=E+"px",A.style.left=w+"px"),f&&(f.style.left=`${u.left+(g?b.x:-b.x)-(w+14-7)}px`),c.overlap!==!0&&o.push({left:w,top:E,right:S,bottom:E+m}),A.classList.toggle("cm-tooltip-above",I),A.classList.toggle("cm-tooltip-below",!I),c.positioned&&c.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=p0}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),U6=et.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),O6={x:0,y:0},BS=tt.define({enables:[s3,U6]});function LS(i,e){let t=i.plugin(s3);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}var lk=tt.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function RS(i,e){let t=i.plugin(o3),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}var o3=ai.fromClass(class{constructor(i){this.input=i.state.facet(iu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(lk);this.top=new eu(i,!0,e.topContainer),this.bottom=new eu(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(lk);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new eu(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new eu(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(iu);if(t!=this.input){let n=t.filter(A=>A),o=[],a=[],l=[],c=[];for(let A of n){let u=this.specs.indexOf(A),h;u<0?(h=A(i.view),c.push(h)):(h=this.panels[u],h.update&&h.update(i)),o.push(h),(h.top?a:l).push(h)}this.specs=n,this.panels=o,this.top.sync(a),this.bottom.sync(l);for(let A of c)A.dom.classList.add("cm-panel"),A.mount&&A.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>et.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),eu=class{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=ck(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=ck(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function ck(i){let e=i.nextSibling;return i.remove(),e}var iu=tt.define({enables:o3}),Oo=class extends ws{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Oo.prototype.elementClass="";Oo.prototype.toDOM=void 0;Oo.prototype.mapMode=ri.TrackBefore;Oo.prototype.startSide=Oo.prototype.endSide=-1;Oo.prototype.point=!0;var G6=0,Kf=class{constructor(e,t){this.from=e,this.to=t}},wt=class{constructor(e={}){this.id=G6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zi.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};wt.closedBy=new wt({deserialize:i=>i.split(" ")});wt.openedBy=new wt({deserialize:i=>i.split(" ")});wt.group=new wt({deserialize:i=>i.split(" ")});wt.contextHash=new wt({perNode:!0});wt.lookAhead=new wt({perNode:!0});wt.mounted=new wt({perNode:!0});var z6=Object.create(null),zi=class i{constructor(e,t,n,o=0){this.name=e,this.props=t,this.id=n,this.flags=o}static define(e){let t=e.props&&e.props.length?Object.create(null):z6,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new i(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(wt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let o of n.split(" "))t[o]=e[n];return n=>{for(let o=n.prop(wt.group),a=-1;a<(o?o.length:0);a++){let l=t[a<0?n.name:o[a]];if(l)return l}}}};zi.none=new zi("",Object.create(null),0,8);var z0=class i{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let o=null;for(let a of e){let l=a(n);l&&(o||(o=Object.assign({},n.props)),o[l[0].id]=l[1])}t.push(o?new zi(n.name,o,n.id,n.flags):n)}return new i(t)}},O0=new WeakMap,a3=new WeakMap,li;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(li||(li={}));var gn=class i{constructor(e,t,n,o,a){if(this.type=e,this.children=t,this.positions=n,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[l,c]of a)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=this.prop(wt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let o=n.toString();o&&(t&&(t+=","),t+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new su(this.topNode,e)}cursorAt(e,t=0,n=0){let o=O0.get(this)||this.topNode,a=new su(o);return a.moveTo(e,t),O0.set(this,a._tree),a}get topNode(){return new ic(this,0,0,null)}resolve(e,t=0){let n=ru(O0.get(this)||this.topNode,e,t,!1);return O0.set(this,n),n}resolveInner(e,t=0){let n=ru(a3.get(this)||this.topNode,e,t,!0);return a3.set(this,n),n}iterate(e){let{enter:t,leave:n,from:o=0,to:a=this.length}=e,l=e.mode||0,c=(l&li.IncludeAnonymous)>0;for(let A=this.cursor(l|li.IncludeAnonymous);;){let u=!1;if(A.from<=a&&A.to>=o&&(!c&&A.type.isAnonymous||t(A)!==!1)){if(A.firstChild())continue;u=!0}for(;u&&n&&(c||!A.type.isAnonymous)&&n(A),!A.nextSibling();){if(!A.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:FS(zi.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,o)=>new i(this.type,t,n,o,this.propValues),e.makeTree||((t,n,o)=>new i(zi.none,t,n,o)))}static build(e){return H6(e)}};gn.empty=new gn(zi.none,[],[],0);var kS=class i{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new i(this.buffer,this.index)}},nc=class i{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return zi.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],o=this.set.types[t],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let l=[];for(;e<n;)l.push(this.childString(e)),e=this.buffer[e+3];return a+"("+l.join(",")+")"}findChild(e,t,n,o,a){let{buffer:l}=this,c=-1;for(let A=e;A!=t&&!(c3(a,o,l[A+1],l[A+2])&&(c=A,n>0));A=l[A+3]);return c}slice(e,t,n){let o=this.buffer,a=new Uint16Array(t-e),l=0;for(let c=e,A=0;c<t;){a[A++]=o[c++],a[A++]=o[c++]-n;let u=a[A++]=o[c++]-n;a[A++]=o[c++]-e,l=Math.max(l,u)}return new i(a,l,this.set)}};function c3(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function A3(i,e){let t=i.childBefore(e);for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}function ru(i,e,t,n){for(var o;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let l=!n&&i instanceof ic&&i.index<0?null:i.parent;if(!l)return i;i=l}let a=n?0:li.IgnoreOverlays;if(n)for(let l=i,c=l.parent;c;l=c,c=l.parent)l instanceof ic&&l.index<0&&((o=c.enter(e,t,a))===null||o===void 0?void 0:o.from)!=l.from&&(i=c);for(;;){let l=i.enter(e,t,a);if(!l)return i;i=l}}var ic=class i{constructor(e,t,n,o){this._tree=e,this.from=t,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,o,a=0){for(let l=this;;){for(let{children:c,positions:A}=l._tree,u=t>0?c.length:-1;e!=u;e+=t){let h=c[e],f=A[e]+l.from;if(c3(o,n,f,f+h.length)){if(h instanceof nc){if(a&li.ExcludeBuffers)continue;let d=h.findChild(0,h.buffer.length,t,n-f,o);if(d>-1)return new Jf(new PS(l,h,e,f),null,d)}else if(a&li.IncludeAnonymous||!h.type.isAnonymous||NS(h)){let d;if(!(a&li.IgnoreMounts)&&h.props&&(d=h.prop(wt.mounted))&&!d.overlay)return new i(d.tree,f,e,l);let p=new i(h,f,e,l);return a&li.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?h.children.length-1:0,t,n,o)}}}if(a&li.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let o;if(!(n&li.IgnoreOverlays)&&(o=this._tree.prop(wt.mounted))&&o.overlay){let a=e-this.from;for(let{from:l,to:c}of o.overlay)if((t>0?l<=a:l<a)&&(t<0?c>=a:c>a))return new i(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new su(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ru(this,e,t,!1)}resolveInner(e,t=0){return ru(this,e,t,!0)}enterUnfinishedNodesBefore(e){return A3(this,e)}getChild(e,t=null,n=null){let o=H0(this,e,t,n);return o.length?o[0]:null}getChildren(e,t=null,n=null){return H0(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return W0(this,e)}};function H0(i,e,t,n){let o=i.cursor(),a=[];if(!o.firstChild())return a;if(t!=null){for(;!o.type.is(t);)if(!o.nextSibling())return a}for(;;){if(n!=null&&o.type.is(n))return a;if(o.type.is(e)&&a.push(o.node),!o.nextSibling())return n==null?a:[]}}function W0(i,e,t=e.length-1){for(let n=i.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}var PS=class{constructor(e,t,n,o){this.parent=e,this.buffer=t,this.index=n,this.start=o}},Jf=class i{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new i(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&li.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new i(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new i(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new i(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new su(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,o=this.index+4,a=n.buffer[this.index+3];if(a>o){let l=n.buffer[this.index+1];e.push(n.slice(o,a,l)),t.push(0)}return new gn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ru(this,e,t,!1)}resolveInner(e,t=0){return ru(this,e,t,!0)}enterUnfinishedNodesBefore(e){return A3(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let o=H0(this,e,t,n);return o.length?o[0]:null}getChildren(e,t=null,n=null){return H0(this,e,t,n)}get node(){return this}matchContext(e){return W0(this,e)}},su=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ic)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:o}=this.buffer;return this.type=t||o.set.types[o.buffer[e]],this.from=n+o.buffer[e+1],this.to=n+o.buffer[e+2],!0}yield(e){return e?e instanceof ic?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&li.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&li.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&li.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let o=n<0?0:this.stack[n]+4;if(this.index!=o)return this.yieldBuf(t.findChild(o,this.index,-1,0,4))}else{let o=t.buffer[this.index+3];if(o<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(o)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=o)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,l=e<0?-1:n._tree.children.length;a!=l;a+=e){let c=n._tree.children[a];if(this.mode&li.IncludeAnonymous||c instanceof nc||!c.type.isAnonymous||NS(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let o=this.index,a=this.stack.length;a>=0;){for(let l=e;l;l=l._parent)if(l.index==o){if(o==this.index)return l;t=l,n=a+1;break e}o=this.stack[--a]}for(let o=n;o<this.stack.length;o++)t=new Jf(this.buffer,t,this.stack[o]);return this.bufferNode=new Jf(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;o&&t&&t(this),o=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,o=!0}}}matchContext(e){if(!this.buffer)return W0(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return W0(this.node,e,o);let l=n[t.buffer[this.stack[a]]];if(!l.isAnonymous){if(e[o]&&e[o]!=l.name)return!1;o--}}return!0}};function NS(i){return i.children.some(e=>e instanceof nc||!e.type.isAnonymous||NS(e))}function H6(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:o=1024,reused:a=[],minRepeatType:l=n.types.length}=i,c=Array.isArray(t)?new kS(t,t.length):t,A=n.types,u=0,h=0;function f(E,S,C,M,D){let{id:T,start:B,end:R,size:P}=c,_=h;for(;P<0;)if(c.next(),P==-1){let O=a[T];C.push(O),M.push(B-E);return}else if(P==-3){u=T;return}else if(P==-4){h=T;return}else throw new RangeError(`Unrecognized record size: ${P}`);let Q=A[T],W,U,H=B-E;if(R-B<=o&&(U=b(c.pos-S,D))){let O=new Uint16Array(U.size-U.skip),F=c.pos-U.size,z=O.length;for(;c.pos>F;)z=g(U.start,O,z);W=new nc(O,R-U.start,n),H=U.start-E}else{let O=c.pos-P;c.next();let F=[],z=[],k=T>=l?T:-1,X=0,te=R;for(;c.pos>O;)k>=0&&c.id==k&&c.size>=0?(c.end<=te-o&&(p(F,z,B,X,c.end,te,k,_),X=F.length,te=c.end),c.next()):f(B,O,F,z,k);if(k>=0&&X>0&&X<F.length&&p(F,z,B,X,B,te,k,_),F.reverse(),z.reverse(),k>-1&&X>0){let ie=d(Q);W=FS(Q,F,z,0,F.length,0,R-B,ie,ie)}else W=m(Q,F,z,R-B,_-R)}C.push(W),M.push(H)}function d(E){return(S,C,M)=>{let D=0,T=S.length-1,B,R;if(T>=0&&(B=S[T])instanceof gn){if(!T&&B.type==E&&B.length==M)return B;(R=B.prop(wt.lookAhead))&&(D=C[T]+B.length+R)}return m(E,S,C,M,D)}}function p(E,S,C,M,D,T,B,R){let P=[],_=[];for(;E.length>M;)P.push(E.pop()),_.push(S.pop()+C-D);E.push(m(n.types[B],P,_,T-D,R-T)),S.push(D-C)}function m(E,S,C,M,D=0,T){if(u){let B=[wt.contextHash,u];T=T?[B].concat(T):[B]}if(D>25){let B=[wt.lookAhead,D];T=T?[B].concat(T):[B]}return new gn(E,S,C,M,T)}function b(E,S){let C=c.fork(),M=0,D=0,T=0,B=C.end-o,R={size:0,start:0,skip:0};e:for(let P=C.pos-E;C.pos>P;){let _=C.size;if(C.id==S&&_>=0){R.size=M,R.start=D,R.skip=T,T+=4,M+=4,C.next();continue}let Q=C.pos-_;if(_<0||Q<P||C.start<B)break;let W=C.id>=l?4:0,U=C.start;for(C.next();C.pos>Q;){if(C.size<0)if(C.size==-3)W+=4;else break e;else C.id>=l&&(W+=4);C.next()}D=U,M+=_,T+=W}return(S<0||M==E)&&(R.size=M,R.start=D,R.skip=T),R.size>4?R:void 0}function g(E,S,C){let{id:M,start:D,end:T,size:B}=c;if(c.next(),B>=0&&M<l){let R=C;if(B>4){let P=c.pos-(B-4);for(;c.pos>P;)C=g(E,S,C)}S[--C]=R,S[--C]=T-E,S[--C]=D-E,S[--C]=M}else B==-3?u=M:B==-4&&(h=M);return C}let w=[],I=[];for(;c.pos>0;)f(i.start||0,i.bufferStart||0,w,I,-1);let v=(e=i.length)!==null&&e!==void 0?e:w.length?I[0]+w[0].length:0;return new gn(A[i.topID],w.reverse(),I.reverse(),v)}var l3=new WeakMap;function G0(i,e){if(!i.isAnonymous||e instanceof nc||e.type!=i)return 1;let t=l3.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof gn)){t=1;break}t+=G0(i,n)}l3.set(e,t)}return t}function FS(i,e,t,n,o,a,l,c,A){let u=0;for(let m=n;m<o;m++)u+=G0(i,e[m]);let h=Math.ceil(u*1.5/8),f=[],d=[];function p(m,b,g,w,I){for(let v=g;v<w;){let E=v,S=b[v],C=G0(i,m[v]);for(v++;v<w;v++){let M=G0(i,m[v]);if(C+M>=h)break;C+=M}if(v==E+1){if(C>h){let M=m[E];p(M.children,M.positions,0,M.children.length,b[E]+I);continue}f.push(m[E])}else{let M=b[v-1]+m[v-1].length-S;f.push(FS(i,m,b,E,v,S,M,null,A))}d.push(S+I-a)}}return p(e,t,n,o,0),(c||A)(f,d,l)}var rc=class i{constructor(e,t,n,o,a=!1,l=!1){this.from=e,this.to=t,this.tree=n,this.offset=o,this.open=(a?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let o=[new i(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&o.push(a);return o}static applyChanges(e,t,n=128){if(!t.length)return e;let o=[],a=1,l=e.length?e[0]:null;for(let c=0,A=0,u=0;;c++){let h=c<t.length?t[c]:null,f=h?h.fromA:1e9;if(f-A>=n)for(;l&&l.from<f;){let d=l;if(A>=d.from||f<=d.to||u){let p=Math.max(d.from,A)-u,m=Math.min(d.to,f)-u;d=p>=m?null:new i(p,m,d.tree,d.offset+u,c>0,!!h)}if(d&&o.push(d),l.to>f)break;l=a<e.length?e[a++]:null}if(!h)break;A=h.toA,u=h.toA-h.toB}return o}},jf=class{startParse(e,t,n){return typeof e=="string"&&(e=new _S(e)),n=n?n.length?n.map(o=>new Kf(o.from,o.to)):[new Kf(0,0)]:[new Kf(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let o=this.startParse(e,t,n);for(;;){let a=o.advance();if(a)return a}}},_S=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var Uoe=new wt({perNode:!0});var W6=0,no=class i{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=W6++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new i([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Z0;return t=>t.modified.indexOf(e)>-1?t:Z0.get(t.base||t,t.modified.concat(e).sort((n,o)=>n.id-o.id))}},V6=0,Z0=class i{constructor(){this.instances=[],this.id=V6++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(c=>c.base==e&&X6(t,c.modified));if(n)return n;let o=[],a=new no(o,e,t);for(let c of t)c.instances.push(a);let l=Y6(t);for(let c of e.set)if(!c.modified.length)for(let A of l)o.push(i.get(c,A));return a}};function X6(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function Y6(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,o=e.length;n<o;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function f3(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let o of t.split(" "))if(o){let a=[],l=2,c=o;for(let f=0;;){if(c=="..."&&f>0&&f+3==o.length){l=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!d)throw new RangeError("Invalid path: "+o);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==o.length)break;let p=o[f++];if(f==o.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+o);c=o.slice(f)}let A=a.length-1,u=a[A];if(!u)throw new RangeError("Invalid path: "+o);let h=new ou(n,l,A>0?a.slice(0,A):null);e[u]=h.sort(e[u])}}return d3.add(e)}var d3=new wt,ou=class{constructor(e,t,n,o){this.tags=e,this.mode=t,this.context=n,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};ou.empty=new ou([],2,null);function GS(i,e){let t=Object.create(null);for(let a of i)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let l of a.tag)t[l.id]=a.class;let{scope:n,all:o=null}=e||{};return{style:a=>{let l=o;for(let c of a)for(let A of c.set){let u=t[A.id];if(u){l=l?l+" "+u:u;break}}return l},scope:n}}function Z6(i,e){let t=null;for(let n of i){let o=n.style(e);o&&(t=t?t+" "+o:o)}return t}function p3(i,e,t,n=0,o=i.length){let a=new US(n,Array.isArray(e)?e:[e],t);a.highlightRange(i.cursor(),n,o,"",a.highlighters),a.flush(o)}var US=class{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,o,a){let{type:l,from:c,to:A}=e;if(c>=n||A<=t)return;l.isTop&&(a=this.highlighters.filter(p=>!p.scope||p.scope(l)));let u=o,h=K6(e)||ou.empty,f=Z6(a,h.tags);if(f&&(u&&(u+=" "),u+=f,h.mode==1&&(o+=(o?" ":"")+f)),this.startSpan(Math.max(t,c),u),h.opaque)return;let d=e.tree&&e.tree.prop(wt.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+c,1),m=this.highlighters.filter(g=>!g.scope||g.scope(d.tree.type)),b=e.firstChild();for(let g=0,w=c;;g++){let I=g<d.overlay.length?d.overlay[g]:null,v=I?I.from+c:A,E=Math.max(t,w),S=Math.min(n,v);if(E<S&&b)for(;e.from<S&&(this.highlightRange(e,E,S,o,a),this.startSpan(Math.min(S,e.to),u),!(e.to>=v||!e.nextSibling())););if(!I||v>n)break;w=I.to+c,w>t&&(this.highlightRange(p.cursor(),Math.max(t,I.from+c),Math.min(n,w),"",m),this.startSpan(Math.min(n,w),u))}b&&e.parent()}else if(e.firstChild()){d&&(o="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,o,a),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}};function K6(i){let e=i.type.prop(d3);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}var Ye=no.define,V0=Ye(),Ha=Ye(),u3=Ye(Ha),h3=Ye(Ha),Wa=Ye(),X0=Ye(Wa),QS=Ye(Wa),to=Ye(),sc=Ye(to),$s=Ye(),eo=Ye(),OS=Ye(),qf=Ye(OS),Y0=Ye(),Me={comment:V0,lineComment:Ye(V0),blockComment:Ye(V0),docComment:Ye(V0),name:Ha,variableName:Ye(Ha),typeName:u3,tagName:Ye(u3),propertyName:h3,attributeName:Ye(h3),className:Ye(Ha),labelName:Ye(Ha),namespace:Ye(Ha),macroName:Ye(Ha),literal:Wa,string:X0,docString:Ye(X0),character:Ye(X0),attributeValue:Ye(X0),number:QS,integer:Ye(QS),float:Ye(QS),bool:Ye(Wa),regexp:Ye(Wa),escape:Ye(Wa),color:Ye(Wa),url:Ye(Wa),keyword:$s,self:Ye($s),null:Ye($s),atom:Ye($s),unit:Ye($s),modifier:Ye($s),operatorKeyword:Ye($s),controlKeyword:Ye($s),definitionKeyword:Ye($s),moduleKeyword:Ye($s),operator:eo,derefOperator:Ye(eo),arithmeticOperator:Ye(eo),logicOperator:Ye(eo),bitwiseOperator:Ye(eo),compareOperator:Ye(eo),updateOperator:Ye(eo),definitionOperator:Ye(eo),typeOperator:Ye(eo),controlOperator:Ye(eo),punctuation:OS,separator:Ye(OS),bracket:qf,angleBracket:Ye(qf),squareBracket:Ye(qf),paren:Ye(qf),brace:Ye(qf),content:to,heading:sc,heading1:Ye(sc),heading2:Ye(sc),heading3:Ye(sc),heading4:Ye(sc),heading5:Ye(sc),heading6:Ye(sc),contentSeparator:Ye(to),list:Ye(to),quote:Ye(to),emphasis:Ye(to),strong:Ye(to),link:Ye(to),monospace:Ye(to),strikethrough:Ye(to),inserted:Ye(),deleted:Ye(),changed:Ye(),invalid:Ye(),meta:Y0,documentMeta:Ye(Y0),annotation:Ye(Y0),processingInstruction:Ye(Y0),definition:no.defineModifier(),constant:no.defineModifier(),function:no.defineModifier(),standard:no.defineModifier(),local:no.defineModifier(),special:no.defineModifier()},zoe=GS([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var zS,au=new wt;function J6(i){return tt.define({combine:i?e=>e.concat(i):void 0})}var j6=new wt,Br=class{constructor(e,t,n=[],o=""){this.data=e,this.name=o,qt.prototype.hasOwnProperty("tree")||Object.defineProperty(qt.prototype,"tree",{get(){return Mi(this)}}),this.parser=t,this.extension=[lu.of(this),qt.languageData.of((a,l,c)=>{let A=m3(a,l,c),u=A.type.prop(au);if(!u)return[];let h=a.facet(u),f=A.type.prop(j6);if(f){let d=A.resolve(l-A.from,c);for(let p of f)if(p.test(d,a)){let m=a.facet(p.facet);return p.type=="replace"?m:m.concat(h)}}return h})].concat(n)}isActiveAt(e,t,n=-1){return m3(e,t,n).type.prop(au)==this.data}findRegions(e){let t=e.facet(lu);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],o=(a,l)=>{if(a.prop(au)==this.data){n.push({from:l,to:l+a.length});return}let c=a.prop(wt.mounted);if(c){if(c.tree.prop(au)==this.data){if(c.overlay)for(let A of c.overlay)n.push({from:A.from+l,to:A.to+l});else n.push({from:l,to:l+a.length});return}else if(c.overlay){let A=n.length;if(o(c.tree,c.overlay[0].from+l),n.length>A)return}}for(let A=0;A<a.children.length;A++){let u=a.children[A];u instanceof gn&&o(u,a.positions[A]+l)}};return o(Mi(e),0),n}get allowsNesting(){return!0}};Br.setState=Nt.define();function m3(i,e,t){let n=i.facet(lu),o=Mi(i).topNode;if(!n||n.allowsNesting)for(let a=o;a;a=a.enter(e,t,li.ExcludeBuffers))a.type.isTop&&(o=a);return o}function Mi(i){let e=i.field(Br.state,!1);return e?e.tree:gn.empty}var XS=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},$f=null,ed=class i{constructor(e,t,n=[],o,a,l,c,A){this.parser=e,this.state=t,this.fragments=n,this.tree=o,this.treeLen=a,this.viewport=l,this.skipped=c,this.scheduleOn=A,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new i(e,t,[],gn.empty,0,n,[],null)}startParse(){return this.parser.startParse(new XS(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=gn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(rc.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(rc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=$f;$f=this;try{return e()}finally{$f=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=g3(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:o,treeLen:a,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let A=[];if(e.iterChangedRanges((u,h,f,d)=>A.push({fromA:u,toA:h,fromB:f,toB:d})),n=rc.applyChanges(n,A),o=gn.empty,a=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);h<f&&c.push({from:h,to:f})}}}return new i(this.parser,t,n,o,a,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:o,to:a}=this.skipped[n];o<e.to&&a>e.from&&(this.fragments=g3(this.fragments,o,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends jf{createParse(t,n,o){let a=o[0].from,l=o[o.length-1].to;return{parsedPos:a,advance(){let A=$f;if(A){for(let u of o)A.tempSkipped.push(u);e&&(A.scheduleOn=A.scheduleOn?Promise.all([A.scheduleOn,e]):e)}return this.parsedPos=l,new gn(zi.none,[],[],l-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return $f}};function g3(i,e,t){return rc.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}var td=class i{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new i(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=ed.create(e.facet(lu).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new i(n)}};Br.state=$n.define({create:td.init,update(i,e){for(let t of e.effects)if(t.is(Br.setState))return t.value;return e.startState.facet(lu)!=e.state.facet(lu)?td.init(e.state):i.apply(e)}});var w3=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(w3=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var HS=typeof navigator<"u"&&(!((zS=navigator.scheduling)===null||zS===void 0)&&zS.isInputPending)?()=>navigator.scheduling.isInputPending():null,q6=ai.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Br.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Br.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=w3(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,a=n.field(Br.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!HS?Math.max(25,e.timeRemaining()-5):1e9),c=a.context.treeLen<o&&n.doc.length>o+1e3,A=a.context.work(()=>HS&&HS()||Date.now()>l,o+(c?0:1e5));this.chunkBudget-=Date.now()-t,(A||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Br.setState.of(new td(a.context))})),this.chunkBudget>0&&!(A&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Mr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),lu=tt.define({combine(i){return i.length?i[0]:null},enables:i=>[Br.state,q6,et.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});var b3=tt.define(),id=tt.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Cs(i){let e=i.facet(id);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Au(i,e){let t="",n=i.tabSize,o=i.facet(id)[0];if(o=="	"){for(;e>=n;)t+="	",e-=n;o=" "}for(let a=0;a<e;a++)t+=o;return t}function q0(i,e){i instanceof qt&&(i=new oc(i));for(let n of i.state.facet(b3)){let o=n(i,e);if(o!==void 0)return o}let t=Mi(i.state);return t?eY(i,t,e):null}var oc=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Cs(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=n.from&&o<=n.to?a&&o==e?{text:"",from:e}:(t<0?o<e:o<=e)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(e,t);return n.slice(e-o,Math.min(n.length,e+100-o))}column(e,t=1){let{text:n,from:o}=this.lineAt(e,t),a=this.countColumn(n,e-o),l=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return l>-1&&(a+=l-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return tc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:o}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let l=a(o);if(l>-1)return l}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},$6=new wt;function eY(i,e,t){return C3(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,i)}function tY(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function nY(i){let e=i.type.prop($6);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(wt.closedBy))){let o=i.lastChild,a=o&&n.indexOf(o.name)>-1;return l=>oY(l,!0,1,void 0,a&&!tY(l)?o.from:void 0)}return i.parent==null?iY:null}function C3(i,e,t){for(;i;i=i.parent){let n=nY(i);if(n)return n(YS.create(t,e,i))}return null}function iY(){return 0}var YS=class i extends oc{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new i(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(rY(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?C3(e,this.pos,this.base):0}};function rY(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function sY(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let o=i.options.simulateBreak,a=i.state.doc.lineAt(t.from),l=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let c=t.to;;){let A=e.childAfter(c);if(!A||A==n)return null;if(!A.type.isSkipped)return A.from<l?t:null;c=A.to}}function oY(i,e,t,n,o){let a=i.textAfter,l=a.match(/^\s*/)[0].length,c=n&&a.slice(l,l+n.length)==n||o==i.pos+l,A=e?sY(i):null;return A?c?i.column(A.from):i.column(A.to):i.baseIndent+(c?0:i.unit*t)}var aY=200;function $S(){return qt.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,o=t.lineAt(n);if(n>o.from+aY)return i;let a=t.sliceString(o.from,n);if(!e.some(u=>u.test(a)))return i;let{state:l}=i,c=-1,A=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==c)continue;c=h.from;let f=q0(l,h.from);if(f==null)continue;let d=/^\s*/.exec(h.text)[0],p=Au(l,f);d!=p&&A.push({from:h.from,to:h.from+d.length,insert:p})}return A.length?[i,{changes:A,sequential:!0}]:i})}var cu=class i{constructor(e,t){this.specs=e;let n;function o(c){let A=Yr.newName();return(n||(n=Object.create(null)))["."+A]=c,A}let a=typeof t.all=="string"?t.all:t.all?o(t.all):void 0,l=t.scope;this.scope=l instanceof Br?c=>c.prop(au)==l.data:l?c=>c==l:void 0,this.style=GS(e.map(c=>({tag:c.tag,class:c.class||o(Object.assign({},c,{tag:null}))})),{all:a}).style,this.module=n?new Yr(n):null,this.themeType=t.themeType}static define(e,t){return new i(e,t||{})}},ZS=tt.define(),S3=tt.define({combine(i){return i.length?[i[0]]:null}});function WS(i){let e=i.facet(ZS);return e.length?e:i.facet(S3)}function $0(i,e){let t=[lY],n;return i instanceof cu&&(i.module&&t.push(et.styleModule.of(i.module)),n=i.themeType),e?.fallback?t.push(S3.of(i)):n?t.push(ZS.computeN([et.darkTheme],o=>o.facet(et.darkTheme)==(n=="dark")?[i]:[])):t.push(ZS.of(i)),t}var KS=class{constructor(e){this.markCache=Object.create(null),this.tree=Mi(e.state),this.decorations=this.buildDeco(e,WS(e.state))}update(e){let t=Mi(e.state),n=WS(e.state),o=n!=WS(e.startState);t.length<e.view.viewport.to&&!o&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||o)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return Yt.none;let n=new Vr;for(let{from:o,to:a}of e.visibleRanges)p3(this.tree,t,(l,c,A)=>{n.add(l,c,this.markCache[A]||(this.markCache[A]=Yt.mark({class:A})))},o,a);return n.finish()}},lY=Xr.high(ai.fromClass(KS,{decorations:i=>i.decorations})),E3=cu.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),cY=et.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),I3=1e4,M3="()[]{}",T3=tt.define({combine(i){return Er(i,{afterCursor:!0,brackets:M3,maxScanDistance:I3,renderMatch:hY})}}),AY=Yt.mark({class:"cm-matchingBracket"}),uY=Yt.mark({class:"cm-nonmatchingBracket"});function hY(i){let e=[],t=i.matched?AY:uY;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}var fY=$n.define({create(){return Yt.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(T3);for(let o of e.state.selection.ranges){if(!o.empty)continue;let a=bs(e.state,o.head,-1,n)||o.head>0&&bs(e.state,o.head-1,1,n)||n.afterCursor&&(bs(e.state,o.head,1,n)||o.head<e.state.doc.length&&bs(e.state,o.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return Yt.set(t,!0)},provide:i=>et.decorations.from(i)}),dY=[fY,cY];function e2(i={}){return[T3.of(i),dY]}var pY=new wt;function JS(i,e,t){let n=i.prop(e<0?wt.openedBy:wt.closedBy);if(n)return n;if(i.name.length==1){let o=t.indexOf(i.name);if(o>-1&&o%2==(e<0?1:0))return[t[o+e]]}return null}function jS(i){let e=i.type.prop(pY);return e?e(i.node):i}function bs(i,e,t,n={}){let o=n.maxScanDistance||I3,a=n.brackets||M3,l=Mi(i),c=l.resolveInner(e,t);for(let A=c;A;A=A.parent){let u=JS(A.type,t,a);if(u&&A.from<A.to){let h=jS(A);if(h&&(t>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return mY(i,e,t,A,h,u,a)}}return gY(i,e,t,l,c.type,o,a)}function mY(i,e,t,n,o,a,l){let c=n.parent,A={from:o.from,to:o.to},u=0,h=c?.cursor();if(h&&(t<0?h.childBefore(n.from):h.childAfter(n.to)))do if(t<0?h.to<=n.from:h.from>=n.to){if(u==0&&a.indexOf(h.type.name)>-1&&h.from<h.to){let f=jS(h);return{start:A,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(JS(h.type,t,l))u++;else if(JS(h.type,-t,l)){if(u==0){let f=jS(h);return{start:A,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?h.prevSibling():h.nextSibling());return{start:A,matched:!1}}function gY(i,e,t,n,o,a,l){let c=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),A=l.indexOf(c);if(A<0||A%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},h=i.doc.iterRange(e,t>0?i.doc.length:0),f=0;for(let d=0;!h.next().done&&d<=a;){let p=h.value;t<0&&(d+=p.length);let m=e+d*t;for(let b=t>0?0:p.length-1,g=t>0?p.length:-1;b!=g;b+=t){let w=l.indexOf(p[b]);if(!(w<0||n.resolveInner(m+b,1).type!=o))if(w%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:m+b,to:m+b+1},matched:w>>1==A>>1};f--}}t>0&&(d+=p.length)}return h.done?{start:u,matched:!1}:null}function v3(i,e,t,n=0,o=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let a=o;for(let l=n;l<e;l++)i.charCodeAt(l)==9?a+=t-a%t:a++;return a}var K0=class{constructor(e,t,n,o){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=o,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=v3(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:v3(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let o=l=>n?l.toLowerCase():l,a=this.string.substr(this.pos,e.length);return o(a)==o(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&t!==!1&&(this.pos+=o[0].length),o)}}current(){return this.string.slice(this.start,this.pos)}};function vY(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||yY,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||n2}}function yY(i){if(typeof i!="object")return i;let e={};for(let t in i){let n=i[t];e[t]=n instanceof Array?n.slice():n}return e}var y3=new WeakMap,J0=class i extends Br{constructor(e){let t=J6(e.languageData),n=vY(e),o,a=new class extends jf{createParse(l,c,A){return new qS(o,l,c,A)}};super(t,a,[b3.of((l,c)=>this.getIndent(l,c))],e.name),this.topNode=CY(t),o=this,this.streamParser=n,this.stateAfter=new wt({perNode:!0}),this.tokenTable=e.tokenTable?new j0(n.tokenTable):bY}static define(e){return new i(e)}getIndent(e,t){let n=Mi(e.state),o=n.resolve(t);for(;o&&o.type!=this.topNode;)o=o.parent;if(!o)return null;let a,{overrideIndentation:l}=e.options;l&&(a=y3.get(e.state),a!=null&&a<t-1e4&&(a=void 0));let c=t2(this,n,0,o.from,a??t),A,u;if(c?(u=c.state,A=c.pos+1):(u=this.streamParser.startState(e.unit),A=0),t-A>1e4)return null;for(;A<t;){let f=e.state.doc.lineAt(A),d=Math.min(t,f.to);if(f.length){let p=l?l(f.from):-1,m=new K0(f.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;m.pos<d-f.from;)B3(this.streamParser.token,m,u)}else this.streamParser.blankLine(u,e.unit);if(d==t)break;A=f.to+1}let h=e.lineAt(t);return l&&a==null&&y3.set(e.state,h.from),this.streamParser.indent(u,/^\s*(.*)/.exec(h.text)[1],e)}get allowsNesting(){return!1}};function t2(i,e,t,n,o){let a=t>=n&&t+e.length<=o&&e.prop(i.stateAfter);if(a)return{state:i.streamParser.copyState(a),pos:t+e.length};for(let l=e.children.length-1;l>=0;l--){let c=e.children[l],A=t+e.positions[l],u=c instanceof gn&&A<o&&t2(i,c,A,n,o);if(u)return u}return null}function D3(i,e,t,n,o){if(o&&t<=0&&n>=e.length)return e;!o&&e.type==i.topNode&&(o=!0);for(let a=e.children.length-1;a>=0;a--){let l=e.positions[a],c=e.children[a],A;if(l<n&&c instanceof gn){if(!(A=D3(i,c,t-l,n-l,o)))break;return o?new gn(e.type,e.children.slice(0,a).concat(A),e.positions.slice(0,a+1),l+A.length):A}}return null}function xY(i,e,t,n){for(let o of e){let a=o.from+(o.openStart?25:0),l=o.to-(o.openEnd?25:0),c=a<=t&&l>t&&t2(i,o.tree,0-o.offset,t,l),A;if(c&&(A=D3(i,o.tree,t+o.offset,c.pos+o.offset,!1)))return{state:c.state,tree:A}}return{state:i.streamParser.startState(n?Cs(n):4),tree:gn.empty}}var qS=class{constructor(e,t,n,o){this.lang=e,this.input=t,this.fragments=n,this.ranges=o,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=o[o.length-1].to;let a=ed.get(),l=o[0].from,{state:c,tree:A}=xY(e,n,l,a?.state);this.state=c,this.parsedPos=this.chunkStart=l+A.length;for(let u=0;u<A.children.length;u++)this.chunks.push(A.children[u]),this.chunkPos.push(A.positions[u]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Cs(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=ed.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let o=this.rangeIndex;;){let a=this.ranges[o].to;if(a>=n||(t=t.slice(0,a-(n-t.length)),o++,o==this.ranges.length))break;let l=this.ranges[o].from,c=this.lineAfter(l);t+=c,n=l+c.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let o=this.ranges[this.rangeIndex].to,a=e+t;if(n>0?o>a:o>=a)break;let l=this.ranges[++this.rangeIndex].from;t+=l-o}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,o,a){if(this.ranges.length>1){a=this.skipGapsTo(t,a,1),t+=a;let l=this.chunk.length;a=this.skipGapsTo(n,a,-1),n+=a,o+=this.chunk.length-l}return this.chunk.push(e,t,n,o),a}parseLine(e){let{line:t,end:n}=this.nextLine(),o=0,{streamParser:a}=this.lang,l=new K0(t,e?e.state.tabSize:4,e?Cs(e.state):2);if(l.eol())a.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let c=B3(a.token,l,this.state);if(c&&(o=this.emitToken(this.lang.tokenTable.resolve(c),this.parsedPos+l.start,this.parsedPos+l.pos,4,o)),l.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=gn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:wY,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new gn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new gn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function B3(i,e,t){e.start=e.pos;for(let n=0;n<10;n++){let o=i(e,t);if(e.pos>e.start)return o}throw new Error("Stream parser failed to advance stream.")}var n2=Object.create(null),nd=[zi.none],wY=new z0(nd),x3=[],L3=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])L3[i]=R3(n2,e);var j0=class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),L3)}resolve(e){return e?this.table[e]||(this.table[e]=R3(this.extra,e)):0}},bY=new j0(n2);function VS(i,e){x3.indexOf(i)>-1||(x3.push(i),console.warn(e))}function R3(i,e){let t=null;for(let a of e.split(".")){let l=i[a]||Me[a];l?typeof l=="function"?t?t=l(t):VS(a,`Modifier ${a} used at start of tag`):t?VS(a,`Tag ${a} used as modifier`):t=l:VS(a,`Unknown highlighting tag ${a}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),o=zi.define({id:nd.length,name:n,props:[f3({[n]:t})]});return nd.push(o),o.id}function CY(i){let e=zi.define({id:nd.length,name:"Document",props:[au.add(()=>i)]});return nd.push(e),e}var ov=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),n=o2(i.state,t.from);return n.line?SY(i):n.block?IY(i):!1};function s2(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let o=i(e,t);return o?(n(t.update(o)),!0):!1}}var SY=s2(DY,0);var EY=s2(k3,0);var IY=s2((i,e)=>k3(i,e,TY(e)),0);function o2(i,e){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var rd=50;function MY(i,{open:e,close:t},n,o){let a=i.sliceDoc(n-rd,n),l=i.sliceDoc(o,o+rd),c=/\s*$/.exec(a)[0].length,A=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-e.length,u)==e&&l.slice(A,A+t.length)==t)return{open:{pos:n-c,margin:c&&1},close:{pos:o+A,margin:A&&1}};let h,f;o-n<=2*rd?h=f=i.sliceDoc(n,o):(h=i.sliceDoc(n,n+rd),f=i.sliceDoc(o-rd,o));let d=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(f)[0].length,m=f.length-p-t.length;return h.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:n+d+e.length,margin:/\s/.test(h.charAt(d+e.length))?1:0},close:{pos:o-p-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function TY(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),o=t.to<=n.to?n:i.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=o.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:o.to})}return e}function k3(i,e,t=e.selection.ranges){let n=t.map(a=>o2(e,a.from).block);if(!n.every(a=>a))return null;let o=t.map((a,l)=>MY(e,n[l],a.from,a.to));if(i!=2&&!o.every(a=>a))return{changes:e.changes(t.map((a,l)=>o[l]?[]:[{from:a.from,insert:n[l].open+" "},{from:a.to,insert:" "+n[l].close}]))};if(i!=1&&o.some(a=>a)){let a=[];for(let l=0,c;l<o.length;l++)if(c=o[l]){let A=n[l],{open:u,close:h}=c;a.push({from:u.pos-A.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+A.close.length})}return{changes:a}}return null}function DY(i,e,t=e.selection.ranges){let n=[],o=-1;for(let{from:a,to:l}of t){let c=n.length,A=1e9,u=o2(e,a).line;if(u){for(let h=a;h<=l;){let f=e.doc.lineAt(h);if(f.from>o&&(a==l||l>f.from)){o=f.from;let d=/^\s*/.exec(f.text)[0].length,p=d==f.length,m=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<A&&(A=d),n.push({line:f,comment:m,token:u,indent:d,empty:p,single:!1})}h=f.to+1}if(A<1e9)for(let h=c;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=A);n.length==c+1&&(n[c].single=!0)}}if(i!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:A,indent:u,empty:h,single:f}of n)(f||!h)&&a.push({from:c.from+u,insert:A+" "});let l=e.changes(a);return{changes:l,selection:e.selection.map(l,1)}}else if(i!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:c,token:A}of n)if(c>=0){let u=l.from+c,h=u+A.length;l.text[h-l.from]==" "&&h++,a.push({from:u,to:h})}return{changes:a}}return null}var r2=ir.define(),BY=ir.define(),LY=tt.define(),P3=tt.define({combine(i){return Er(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,o)=>e(n,o)||t(n,o)})}});function RY(i){let e=0;return i.iterChangedRanges((t,n)=>e=n),e}var _3=$n.define({create(){return ac.empty},update(i,e){let t=e.state.facet(P3),n=e.annotation(r2);if(n){let A=e.docChanged?Oe.single(RY(e.changes)):void 0,u=Ss.fromTransaction(e,A),h=n.side,f=h==0?i.undone:i.done;return u?f=tv(f,f.length,t.minDepth,u):f=Q3(f,e.startState.selection),new ac(h==0?n.rest:f,h==0?f:n.rest)}let o=e.annotation(BY);if((o=="full"||o=="before")&&(i=i.isolate()),e.annotation(si.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let a=Ss.fromTransaction(e),l=e.annotation(si.time),c=e.annotation(si.userEvent);return a?i=i.addChanges(a,l,c,t,e):e.selection&&(i=i.addSelection(e.startState.selection,l,c,t.newGroupDelay)),(o=="full"||o=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new ac(i.done.map(Ss.fromJSON),i.undone.map(Ss.fromJSON))}});function N3(i={}){return[_3,P3.of(i),et.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?lv:e.inputType=="historyRedo"?sd:null;return n?(e.preventDefault(),n(t)):!1}})]}function av(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let o=t.field(_3,!1);if(!o)return!1;let a=o.pop(i,t,e);return a?(n(a),!0):!1}}var lv=av(0,!1),sd=av(1,!1),kY=av(0,!0),PY=av(1,!0);var Ss=class i{constructor(e,t,n,o,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new i(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new i(e.changes&&Gi.fromJSON(e.changes),[],e.mapped&&Fo.fromJSON(e.mapped),e.startSelection&&Oe.fromJSON(e.startSelection),e.selectionsAfter.map(Oe.fromJSON))}static fromTransaction(e,t){let n=Jr;for(let o of e.startState.facet(LY)){let a=o(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new i(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Jr)}static selection(e){return new i(void 0,Jr,void 0,void 0,e)}};function tv(i,e,t,n){let o=e+1>t+20?e-t-1:0,a=i.slice(o,e);return a.push(n),a}function _Y(i,e){let t=[],n=!1;return i.iterChangedRanges((o,a)=>t.push(o,a)),e.iterChangedRanges((o,a,l,c)=>{for(let A=0;A<t.length;){let u=t[A++],h=t[A++];c>=u&&l<=h&&(n=!0)}}),n}function NY(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function F3(i,e){return i.length?e.length?i.concat(e):i:e}var Jr=[],FY=200;function Q3(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-FY));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),tv(i,i.length-1,1e9,t.setSelAfter(n)))}else return[Ss.selection([e])]}function QY(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function i2(i,e){if(!i.length)return i;let t=i.length,n=Jr;for(;t;){let o=UY(i[t-1],e,n);if(o.changes&&!o.changes.empty||o.effects.length){let a=i.slice(0,t);return a[t-1]=o,a}else e=o.mapped,t--,n=o.selectionsAfter}return n.length?[Ss.selection(n)]:Jr}function UY(i,e,t){let n=F3(i.selectionsAfter.length?i.selectionsAfter.map(c=>c.map(e)):Jr,t);if(!i.changes)return Ss.selection(n);let o=i.changes.map(e),a=e.mapDesc(i.changes,!0),l=i.mapped?i.mapped.composeDesc(a):a;return new Ss(o,Nt.mapEffects(i.effects,e),l,i.startSelection.map(a),n)}var OY=/^(input\.type|delete)($|\.)/,ac=class i{constructor(e,t,n=0,o=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new i(this.done,this.undone):this}addChanges(e,t,n,o,a){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!n||OY.test(n))&&(!c.selectionsAfter.length&&t-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,_Y(c.changes,e.changes))||n=="input.type.compose")?l=tv(l,l.length-1,o.minDepth,new Ss(e.changes.compose(c.changes),F3(e.effects,c.effects),c.mapped,c.startSelection,Jr)):l=tv(l,l.length,o.minDepth,e),new i(l,Jr,t,n)}addSelection(e,t,n,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Jr;return a.length>0&&t-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&NY(a[a.length-1],e)?this:new i(Q3(this.done,e),this.undone,t,n)}addMapping(e){return new i(i2(this.done,e),i2(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let o=e==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1];if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:r2.of({side:e,rest:QY(o)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=o.length==1?Jr:o.slice(0,o.length-1);return a.mapped&&(l=i2(l,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:r2.of({side:e,rest:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};ac.empty=new ac(Jr,Jr);var U3=[{key:"Mod-z",run:lv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:sd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:sd,preventDefault:!0},{key:"Mod-u",run:kY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:PY,preventDefault:!0}];function hu(i,e){return Oe.create(i.ranges.map(e),i.mainIndex)}function io(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Es({state:i,dispatch:e},t){let n=hu(i.selection,t);return n.eq(i.selection)?!1:(e(io(i,n)),!0)}function cv(i,e){return Oe.cursor(e?i.to:i.from)}function Av(i,e){return Es(i,t=>t.empty?i.moveByChar(t,e):cv(t,e))}function Ti(i){return i.textDirectionAt(i.state.selection.main.head)==rn.LTR}var O3=i=>Av(i,!Ti(i)),G3=i=>Av(i,Ti(i)),z3=i=>Av(i,!0),H3=i=>Av(i,!1);function W3(i,e){return Es(i,t=>t.empty?i.moveByGroup(t,e):cv(t,e))}var a2=i=>W3(i,!Ti(i)),l2=i=>W3(i,Ti(i));function GY(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function uv(i,e,t){let n=Mi(i).resolveInner(e.head),o=t?wt.closedBy:wt.openedBy;for(let A=e.head;;){let u=t?n.childAfter(A):n.childBefore(A);if(!u)break;GY(i,u,o)?n=u:A=t?u.to:u.from}let a=n.type.prop(o),l,c;return a&&(l=t?bs(i,n.from,1):bs(i,n.to,-1))&&l.matched?c=t?l.end.to:l.end.from:c=t?n.to:n.from,Oe.cursor(c,t?-1:1)}var zY=i=>Es(i,e=>uv(i.state,e,!Ti(i))),HY=i=>Es(i,e=>uv(i.state,e,Ti(i)));function V3(i,e){return Es(i,t=>{if(!t.empty)return cv(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}var hv=i=>V3(i,!1),fv=i=>V3(i,!0);function X3(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,n=0,o;if(e){for(let a of i.state.facet(et.scrollMargins)){let l=a(i);l?.top&&(t=Math.max(l?.top,t)),l?.bottom&&(n=Math.max(l?.bottom,n))}o=i.scrollDOM.clientHeight-t-n}else o=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(i.defaultLineHeight,o-5)}}function Y3(i,e){let t=X3(i),{state:n}=i,o=hu(n.selection,l=>l.empty?i.moveVertically(l,e,t.height):cv(l,e));if(o.eq(n.selection))return!1;let a;if(t.selfScroll){let l=i.coordsAtPos(n.selection.main.head),c=i.scrollDOM.getBoundingClientRect(),A=c.top+t.marginTop,u=c.bottom-t.marginBottom;l&&l.top>A&&l.bottom<u&&(a=et.scrollIntoView(o.main.head,{y:"start",yMargin:l.top-A}))}return i.dispatch(io(n,o),{effects:a}),!0}var nv=i=>Y3(i,!1),od=i=>Y3(i,!0);function Va(i,e,t){let n=i.lineBlockAt(e.head),o=i.moveToLineBoundary(e,t);if(o.head==e.head&&o.head!=(t?n.to:n.from)&&(o=i.moveToLineBoundary(e,t,!1)),!t&&o.head==n.from&&n.length){let a=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(o=Oe.cursor(n.from+a))}return o}var WY=i=>Es(i,e=>Va(i,e,!0)),VY=i=>Es(i,e=>Va(i,e,!1)),XY=i=>Es(i,e=>Va(i,e,!Ti(i))),YY=i=>Es(i,e=>Va(i,e,Ti(i))),c2=i=>Es(i,e=>Oe.cursor(i.lineBlockAt(e.head).from,1)),A2=i=>Es(i,e=>Oe.cursor(i.lineBlockAt(e.head).to,-1));function ZY(i,e,t){let n=!1,o=hu(i.selection,a=>{let l=bs(i,a.head,-1)||bs(i,a.head,1)||a.head>0&&bs(i,a.head-1,1)||a.head<i.doc.length&&bs(i,a.head+1,-1);if(!l||!l.end)return a;n=!0;let c=l.start.from==a.head?l.end.to:l.end.from;return t?Oe.range(a.anchor,c):Oe.cursor(c)});return n?(e(io(i,o)),!0):!1}var KY=({state:i,dispatch:e})=>ZY(i,e,!1);function jr(i,e){let t=hu(i.state.selection,n=>{let o=e(n);return Oe.range(n.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(io(i.state,t)),!0)}function dv(i,e){return jr(i,t=>i.moveByChar(t,e))}var Z3=i=>dv(i,!Ti(i)),K3=i=>dv(i,Ti(i)),u2=i=>dv(i,!0),h2=i=>dv(i,!1);function pv(i,e){return jr(i,t=>i.moveByGroup(t,e))}var f2=i=>pv(i,!Ti(i)),d2=i=>pv(i,Ti(i)),J3=i=>pv(i,!0),j3=i=>pv(i,!1);var JY=i=>jr(i,e=>uv(i.state,e,!Ti(i))),jY=i=>jr(i,e=>uv(i.state,e,Ti(i)));function q3(i,e){return jr(i,t=>i.moveVertically(t,e))}var Ad=i=>q3(i,!1),ud=i=>q3(i,!0);function $3(i,e){return jr(i,t=>i.moveVertically(t,e,X3(i).height))}var iv=i=>$3(i,!1),uu=i=>$3(i,!0),qY=i=>jr(i,e=>Va(i,e,!0)),$Y=i=>jr(i,e=>Va(i,e,!1)),eZ=i=>jr(i,e=>Va(i,e,!Ti(i))),tZ=i=>jr(i,e=>Va(i,e,Ti(i))),mv=i=>jr(i,e=>Oe.cursor(i.lineBlockAt(e.head).from)),gv=i=>jr(i,e=>Oe.cursor(i.lineBlockAt(e.head).to)),rv=({state:i,dispatch:e})=>(e(io(i,{anchor:0})),!0),sv=({state:i,dispatch:e})=>(e(io(i,{anchor:i.doc.length})),!0),ad=({state:i,dispatch:e})=>(e(io(i,{anchor:i.selection.main.anchor,head:0})),!0),ld=({state:i,dispatch:e})=>(e(io(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),p2=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),nZ=({state:i,dispatch:e})=>{let t=wv(i).map(({from:n,to:o})=>Oe.range(n,Math.min(o+1,i.doc.length)));return e(i.update({selection:Oe.create(t),userEvent:"select"})),!0},iZ=({state:i,dispatch:e})=>{let t=hu(i.selection,n=>{var o;let a=Mi(i).resolveInner(n.head,1);for(;!(a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from||!(!((o=a.parent)===null||o===void 0)&&o.parent));)a=a.parent;return Oe.range(a.to,a.from)});return e(io(i,t)),!0},eP=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=Oe.create([t.main]):t.main.empty||(n=Oe.create([Oe.cursor(t.main.head)])),n?(e(io(i,n)),!0):!1};function vv(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,o=n.changeByRange(a=>{let{from:l,to:c}=a;if(l==c){let A=e(l);A<l?(t="delete.backward",A=ev(i,A,!1)):A>l&&(t="delete.forward",A=ev(i,A,!0)),l=Math.min(l,A),c=Math.max(c,A)}else l=ev(i,l,!1),c=ev(i,c,!0);return l==c?{range:a}:{changes:{from:l,to:c},range:Oe.cursor(l)}});return o.changes.empty?!1:(i.dispatch(n.update(o,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?et.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function ev(i,e,t){if(i instanceof et)for(let n of i.state.facet(et.atomicRanges).map(o=>o(i)))n.between(e,e,(o,a)=>{o<e&&a>e&&(e=t?a:o)});return e}var tP=(i,e)=>vv(i,t=>{let{state:n}=i,o=n.doc.lineAt(t),a,l;if(!e&&t>o.from&&t<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,t-o.from))){if(a[a.length-1]=="	")return t-1;let c=tc(a,n.tabSize),A=c%Cs(n)||Cs(n);for(let u=0;u<A&&a[a.length-1-u]==" ";u++)t--;l=t}else l=oi(o.text,t-o.from,e,e)+o.from,l==t&&o.number!=(e?n.doc.lines:1)&&(l+=e?1:-1);return l}),cd=i=>tP(i,!1),yv=i=>tP(i,!0),nP=(i,e)=>vv(i,t=>{let n=t,{state:o}=i,a=o.doc.lineAt(n),l=o.charCategorizer(n);for(let c=null;;){if(n==(e?a.to:a.from)){n==t&&a.number!=(e?o.doc.lines:1)&&(n+=e?1:-1);break}let A=oi(a.text,n-a.from,e)+a.from,u=a.text.slice(Math.min(n,A)-a.from,Math.max(n,A)-a.from),h=l(u);if(c!=null&&h!=c)break;(u!=" "||n!=t)&&(c=h),n=A}return n}),iP=i=>nP(i,!1),rZ=i=>nP(i,!0),rP=i=>vv(i,e=>{let t=i.lineBlockAt(e).to;return e<t?t:Math.min(i.state.doc.length,e+1)}),sZ=i=>vv(i,e=>{let t=i.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)});var xv=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:_t.of(["",""])},range:Oe.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},m2=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let o=n.from,a=i.doc.lineAt(o),l=o==a.from?o-1:oi(a.text,o-a.from,!1)+a.from,c=o==a.to?o+1:oi(a.text,o-a.from,!0)+a.from;return{changes:{from:l,to:c,insert:i.doc.slice(o,c).append(i.doc.slice(l,o))},range:Oe.cursor(c)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function wv(i){let e=[],t=-1;for(let n of i.selection.ranges){let o=i.doc.lineAt(n.from),a=i.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=i.doc.lineAt(n.to-1)),t>=o.number){let l=e[e.length-1];l.to=a.to,l.ranges.push(n)}else e.push({from:o.from,to:a.to,ranges:[n]});t=a.number+1}return e}function sP(i,e,t){if(i.readOnly)return!1;let n=[],o=[];for(let a of wv(i)){if(t?a.to==i.doc.length:a.from==0)continue;let l=i.doc.lineAt(t?a.to+1:a.from-1),c=l.length+1;if(t){n.push({from:a.to,to:l.to},{from:a.from,insert:l.text+i.lineBreak});for(let A of a.ranges)o.push(Oe.range(Math.min(i.doc.length,A.anchor+c),Math.min(i.doc.length,A.head+c)))}else{n.push({from:l.from,to:a.from},{from:a.to,insert:i.lineBreak+l.text});for(let A of a.ranges)o.push(Oe.range(A.anchor-c,A.head-c))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:Oe.create(o,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}var oZ=({state:i,dispatch:e})=>sP(i,e,!1),aZ=({state:i,dispatch:e})=>sP(i,e,!0);function oP(i,e,t){if(i.readOnly)return!1;let n=[];for(let o of wv(i))t?n.push({from:o.from,insert:i.doc.slice(o.from,o.to)+i.lineBreak}):n.push({from:o.to,insert:i.lineBreak+i.doc.slice(o.from,o.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var lZ=({state:i,dispatch:e})=>oP(i,e,!1),cZ=({state:i,dispatch:e})=>oP(i,e,!0),AZ=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(wv(e).map(({from:o,to:a})=>(o>0?o--:a<e.doc.length&&a++,{from:o,to:a}))),n=hu(e.selection,o=>i.moveVertically(o,!0)).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function uZ(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Mi(i).resolveInner(e),n=t.childBefore(e),o=t.childAfter(e),a;return n&&o&&n.to<=e&&o.from>=e&&(a=n.type.prop(wt.closedBy))&&a.indexOf(o.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(o.from).from?{from:n.to,to:o.from}:null}var hZ=aP(!1),fZ=aP(!0);function aP(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(o=>{let{from:a,to:l}=o,c=e.doc.lineAt(a),A=!i&&a==l&&uZ(e,a);i&&(a=l=(l<=c.to?c:e.doc.lineAt(l)).to);let u=new oc(e,{simulateBreak:a,simulateDoubleBreak:!!A}),h=q0(u,a);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(a).text)[0].length);l<c.to&&/\s/.test(c.text[l-c.from]);)l++;A?{from:a,to:l}=A:a>c.from&&a<c.from+100&&!/\S/.test(c.text.slice(0,a))&&(a=c.from);let f=["",Au(e,h)];return A&&f.push(Au(e,u.lineIndent(c.from,-1))),{changes:{from:a,to:l,insert:_t.of(f)},range:Oe.cursor(a+1+f[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function g2(i,e){let t=-1;return i.changeByRange(n=>{let o=[];for(let l=n.from;l<=n.to;){let c=i.doc.lineAt(l);c.number>t&&(n.empty||n.to>c.from)&&(e(c,o,n),t=c.number),l=c.to+1}let a=i.changes(o);return{changes:o,range:Oe.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}var v2=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new oc(i,{overrideIndentation:a=>{let l=t[a];return l??-1}}),o=g2(i,(a,l,c)=>{let A=q0(n,a.from);if(A==null)return;/\S/.test(a.text)||(A=0);let u=/^\s*/.exec(a.text)[0],h=Au(i,A);(u!=h||c.from<a.from+u.length)&&(t[a.from]=A,l.push({from:a.from,to:a.from+u.length,insert:h}))});return o.changes.empty||e(i.update(o,{userEvent:"indent"})),!0},lP=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(g2(i,(t,n)=>{n.push({from:t.from,insert:i.facet(id)})}),{userEvent:"input.indent"})),!0),cP=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(g2(i,(t,n)=>{let o=/^\s*/.exec(t.text)[0];if(!o)return;let a=tc(o,i.tabSize),l=0,c=Au(i,Math.max(0,a-Cs(i)));for(;l<o.length&&l<c.length&&o.charCodeAt(l)==c.charCodeAt(l);)l++;n.push({from:t.from+l,to:t.from+o.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0);var dZ=[{key:"Ctrl-b",run:O3,shift:Z3,preventDefault:!0},{key:"Ctrl-f",run:G3,shift:K3},{key:"Ctrl-p",run:hv,shift:Ad},{key:"Ctrl-n",run:fv,shift:ud},{key:"Ctrl-a",run:c2,shift:mv},{key:"Ctrl-e",run:A2,shift:gv},{key:"Ctrl-d",run:yv},{key:"Ctrl-h",run:cd},{key:"Ctrl-k",run:rP},{key:"Ctrl-Alt-h",run:iP},{key:"Ctrl-o",run:xv},{key:"Ctrl-t",run:m2},{key:"Ctrl-v",run:od}],pZ=[{key:"ArrowLeft",run:O3,shift:Z3,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:a2,shift:f2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:XY,shift:eZ,preventDefault:!0},{key:"ArrowRight",run:G3,shift:K3,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:l2,shift:d2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:YY,shift:tZ,preventDefault:!0},{key:"ArrowUp",run:hv,shift:Ad,preventDefault:!0},{mac:"Cmd-ArrowUp",run:rv,shift:ad},{mac:"Ctrl-ArrowUp",run:nv,shift:iv},{key:"ArrowDown",run:fv,shift:ud,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sv,shift:ld},{mac:"Ctrl-ArrowDown",run:od,shift:uu},{key:"PageUp",run:nv,shift:iv},{key:"PageDown",run:od,shift:uu},{key:"Home",run:VY,shift:$Y,preventDefault:!0},{key:"Mod-Home",run:rv,shift:ad},{key:"End",run:WY,shift:qY,preventDefault:!0},{key:"Mod-End",run:sv,shift:ld},{key:"Enter",run:hZ},{key:"Mod-a",run:p2},{key:"Backspace",run:cd,shift:cd},{key:"Delete",run:yv},{key:"Mod-Backspace",mac:"Alt-Backspace",run:iP},{key:"Mod-Delete",mac:"Alt-Delete",run:rZ},{mac:"Mod-Backspace",run:sZ},{mac:"Mod-Delete",run:rP}].concat(dZ.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),AP=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:zY,shift:JY},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:HY,shift:jY},{key:"Alt-ArrowUp",run:oZ},{key:"Shift-Alt-ArrowUp",run:lZ},{key:"Alt-ArrowDown",run:aZ},{key:"Shift-Alt-ArrowDown",run:cZ},{key:"Escape",run:eP},{key:"Mod-Enter",run:fZ},{key:"Alt-l",mac:"Ctrl-l",run:nZ},{key:"Mod-i",run:iZ,preventDefault:!0},{key:"Mod-[",run:cP},{key:"Mod-]",run:lP},{key:"Mod-Alt-\\",run:v2},{key:"Shift-Mod-k",run:AZ},{key:"Shift-Mod-\\",run:KY},{key:"Mod-/",run:ov},{key:"Alt-A",run:EY}].concat(pZ),uP={key:"Tab",run:lP,shift:cP};function sr(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=t[n];typeof o=="string"?i.setAttribute(n,o):o!=null&&(i[n]=o)}e++}for(;e<arguments.length;e++)hP(i,arguments[e]);return i}function hP(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)hP(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}var fP=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i,Sv=class{constructor(e,t,n=0,o=e.length,a,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,o),this.bufferStart=n,this.normalize=a?c=>a(fP(c)):fP,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Gn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Pf(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Oi(e);let o=this.normalize(t);for(let a=0,l=n;;a++){let c=o.charCodeAt(a),A=this.match(c,l);if(A)return this.value=A,this;if(a==o.length-1)break;l==n&&a<t.length&&t.charCodeAt(a)==c&&l++}}}match(e,t){let n=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[o+1],to:t+1}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}};typeof Symbol<"u"&&(Sv.prototype[Symbol.iterator]=function(){return this});var gP={from:-1,to:-1,match:/.*/.exec("")},S2="gm"+(/x/.unicode==null?"":"u"),Ev=class{constructor(e,t,n,o=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=gP,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Mv(e,t,n,o,a);this.re=new RegExp(t,S2+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let l=e.lineAt(o);this.curLineStart=l.from,this.matchPos=Tv(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,o=n+t[0].length;if(this.matchPos=Tv(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,t)))return this.value={from:n,to:o,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},y2=new WeakMap,Iv=class i{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let o=y2.get(e);if(!o||o.from>=n||o.to<=t){let c=new i(t,e.sliceString(t,n));return y2.set(e,c),c}if(o.from==t&&o.to==n)return o;let{text:a,from:l}=o;return l>t&&(a=e.sliceString(t,l)+a,l=t),o.to<n&&(a+=e.sliceString(o.to,n)),y2.set(e,new i(l,a)),new i(t,a.slice(t-l,n-l))}},Mv=class{constructor(e,t,n,o,a){this.text=e,this.to=a,this.done=!1,this.value=gP,this.matchPos=Tv(e,o),this.re=new RegExp(t,S2+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=Iv.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,o=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,o,t)))return this.value={from:n,to:o,match:t},this.matchPos=Tv(this.text,o+(n==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Iv.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Ev.prototype[Symbol.iterator]=Mv.prototype[Symbol.iterator]=function(){return this});function gZ(i){try{return new RegExp(i,S2),!0}catch{return!1}}function Tv(i,e){if(e>=i.length)return e;let t=i.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}var pu=tt.define({combine(i){return Er(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new C2(e),scrollToMatch:e=>et.scrollIntoView(e)})}});var Dv=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||gZ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new w2(this):new x2(this)}getCursor(e,t=0,n){let o=e.doc?e:qt.create({doc:e});return n==null&&(n=o.doc.length),this.regexp?du(this,o,t,n):fu(this,o,t,n)}},Bv=class{constructor(e){this.spec=e}};function fu(i,e,t,n){return new Sv(e.doc,i.unquoted,t,n,i.caseSensitive?void 0:o=>o.toLowerCase(),i.wholeWord?vZ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function vZ(i,e){return(t,n,o,a)=>((a>t||a+o.length<n)&&(a=Math.max(0,t-2),o=i.sliceString(a,Math.min(i.length,n+2))),(e(Lv(o,t-a))!=un.Word||e(Rv(o,t-a))!=un.Word)&&(e(Rv(o,n-a))!=un.Word||e(Lv(o,n-a))!=un.Word))}var x2=class extends Bv{constructor(e){super(e)}nextMatch(e,t,n){let o=fu(this.spec,e,n,e.doc.length).nextOverlapping();return o.done&&(o=fu(this.spec,e,0,t).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,t,n){for(let o=n;;){let a=Math.max(t,o-1e4-this.spec.unquoted.length),l=fu(this.spec,e,a,o),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(a==t)return null;o-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=fu(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=t)return null;o.push(n.value)}return o}highlight(e,t,n,o){let a=fu(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}};function du(i,e,t,n){return new Ev(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?yZ(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function Lv(i,e){return i.slice(oi(i,e,!1),e)}function Rv(i,e){return i.slice(e,oi(i,e))}function yZ(i){return(e,t,n)=>!n[0].length||(i(Lv(n.input,n.index))!=un.Word||i(Rv(n.input,n.index))!=un.Word)&&(i(Rv(n.input,n.index+n[0].length))!=un.Word||i(Lv(n.input,n.index+n[0].length))!=un.Word)}var w2=class extends Bv{nextMatch(e,t,n){let o=du(this.spec,e,n,e.doc.length).next();return o.done&&(o=du(this.spec,e,0,t).next()),o.done?null:o.value}prevMatchInRange(e,t,n){for(let o=1;;o++){let a=Math.max(t,n-o*1e4),l=du(this.spec,e,a,n),c=null;for(;!l.next().done;)c=l.value;if(c&&(a==t||c.from>a+10))return c;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=du(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=t)return null;o.push(n.value)}return o}highlight(e,t,n,o){let a=du(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}},fd=Nt.define(),E2=Nt.define(),Xa=$n.define({create(i){return new hd(b2(i).create(),null)},update(i,e){for(let t of e.effects)t.is(fd)?i=new hd(t.value.create(),i.panel):t.is(E2)&&(i=new hd(i.query,t.value?I2:null));return i},provide:i=>iu.from(i,e=>e.panel)});var hd=class{constructor(e,t){this.query=e,this.panel=t}},xZ=Yt.mark({class:"cm-searchMatch"}),wZ=Yt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),bZ=ai.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Xa))}update(i){let e=i.state.field(Xa);(e!=i.startState.field(Xa)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return Yt.none;let{view:t}=this,n=new Vr;for(let o=0,a=t.visibleRanges,l=a.length;o<l;o++){let{from:c,to:A}=a[o];for(;o<l-1&&A>a[o+1].from-2*250;)A=a[++o].to;i.highlight(t.state,c,A,(u,h)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==h);n.add(u,h,f?wZ:xZ)})}return n.finish()}},{decorations:i=>i.decorations});function dd(i){return e=>{let t=e.state.field(Xa,!1);return t&&t.query.spec.valid?i(e,t):kv(e)}}var dP=dd((i,{query:e})=>{let{to:t}=i.state.selection.main,n=e.nextMatch(i.state,t,t);if(!n)return!1;let o=Oe.single(n.from,n.to),a=i.state.facet(pu);return i.dispatch({selection:o,effects:[M2(i,n),a.scrollToMatch(o.main,i)],userEvent:"select.search"}),yP(i),!0}),pP=dd((i,{query:e})=>{let{state:t}=i,{from:n}=t.selection.main,o=e.prevMatch(t,n,n);if(!o)return!1;let a=Oe.single(o.from,o.to),l=i.state.facet(pu);return i.dispatch({selection:a,effects:[M2(i,o),l.scrollToMatch(a.main,i)],userEvent:"select.search"}),yP(i),!0}),CZ=dd((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:Oe.create(t.map(n=>Oe.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)});var mP=dd((i,{query:e})=>{let{state:t}=i,{from:n,to:o}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let l=[],c,A,u=[];if(a.from==n&&a.to==o&&(A=t.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:A}),a=e.nextMatch(t,a.from,a.to),u.push(et.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let h=l.length==0||l[0].from>=a.to?0:a.to-a.from-A.length;c=Oe.single(a.from-h,a.to-h),u.push(M2(i,a)),u.push(t.facet(pu).scrollToMatch(c.main,i))}return i.dispatch({changes:l,selection:c,effects:u,userEvent:"input.replace"}),!0}),SZ=dd((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(o=>{let{from:a,to:l}=o;return{from:a,to:l,insert:e.getReplacement(o)}});if(!t.length)return!1;let n=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:et.announce.of(n),userEvent:"input.replace.all"}),!0});function I2(i){return i.state.facet(pu).createPanel(i)}function b2(i,e){var t,n,o,a,l;let c=i.selection.main,A=c.empty||c.to>c.from+100?"":i.sliceDoc(c.from,c.to);if(e&&!A)return e;let u=i.facet(pu);return new Dv({search:((t=e?.literal)!==null&&t!==void 0?t:u.literal)?A:A.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:u.literal,regexp:(a=e?.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function vP(i){let e=RS(i,I2);return e&&e.dom.querySelector("[main-field]")}function yP(i){let e=vP(i);e&&e==i.root.activeElement&&e.select()}var kv=i=>{let e=i.state.field(Xa,!1);if(e&&e.panel){let t=vP(i);if(t&&t!=i.root.activeElement){let n=b2(i.state,e.query.spec);n.valid&&i.dispatch({effects:fd.of(n)}),t.focus(),t.select()}}else i.dispatch({effects:[E2.of(!0),e?fd.of(b2(i.state,e.query.spec)):Nt.appendConfig.of(MZ)]});return!0},EZ=i=>{let e=i.state.field(Xa,!1);if(!e||!e.panel)return!1;let t=RS(i,I2);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:E2.of(!1)}),!0};var C2=class{constructor(e){this.view=e;let t=this.query=e.state.field(Xa).query.spec;this.commit=this.commit.bind(this),this.searchField=sr("input",{value:t.search,placeholder:Lr(e,"Find"),"aria-label":Lr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=sr("input",{value:t.replace,placeholder:Lr(e,"Replace"),"aria-label":Lr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=sr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=sr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=sr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(o,a,l){return sr("button",{class:"cm-button",name:o,onclick:a,type:"button"},l)}this.dom=sr("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,n("next",()=>dP(e),[Lr(e,"next")]),n("prev",()=>pP(e),[Lr(e,"previous")]),n("select",()=>CZ(e),[Lr(e,"all")]),sr("label",null,[this.caseField,Lr(e,"match case")]),sr("label",null,[this.reField,Lr(e,"regexp")]),sr("label",null,[this.wordField,Lr(e,"by word")]),...e.state.readOnly?[]:[sr("br"),this.replaceField,n("replace",()=>mP(e),[Lr(e,"replace")]),n("replaceAll",()=>SZ(e),[Lr(e,"replace all")])],sr("button",{name:"close",onclick:()=>EZ(e),"aria-label":Lr(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Dv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:fd.of(e)}))}keydown(e){qk(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?pP:dP)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),mP(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(fd)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pu).top}};function Lr(i,e){return i.state.phrase(e)}var bv=30,Cv=/[\s\.,:;?!]/;function M2(i,{from:e,to:t}){let n=i.state.doc.lineAt(e),o=i.state.doc.lineAt(t).to,a=Math.max(n.from,e-bv),l=Math.min(o,t+bv),c=i.state.sliceDoc(a,l);if(a!=n.from){for(let A=0;A<bv;A++)if(!Cv.test(c[A+1])&&Cv.test(c[A])){c=c.slice(A);break}}if(l!=o){for(let A=c.length-1;A>c.length-bv;A--)if(!Cv.test(c[A-1])&&Cv.test(c[A])){c=c.slice(0,A);break}}return et.announce.of(`${i.state.phrase("current match")}. ${c} ${i.state.phrase("on line")} ${n.number}.`)}var IZ=et.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),MZ=[Xa,Xr.lowest(bZ),IZ];var _v=class{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=Mi(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),o=t.text.slice(n-t.from,this.pos-t.from),a=o.search(DP(e,!1));return a<0?null:{from:n+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};function xP(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function TZ(i){let e=Object.create(null),t=Object.create(null);for(let{label:o}of i){e[o[0]]=!0;for(let a=1;a<o.length;a++)t[o[a]]=!0}let n=xP(e)+xP(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function DZ(i){let e=i.map(o=>typeof o=="string"?{label:o}:o),[t,n]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:TZ(e);return o=>{let a=o.matchBefore(n);return a||o.explicit?{from:a?a.from:o.pos,options:e,validFor:t}:null}}var Nv=class{constructor(e,t,n,o){this.completion=e,this.source=t,this.match=n,this.score=o}};function Ya(i){return i.selection.main.from}function DP(i,e){var t;let{source:n}=i,o=e&&n[0]!="^",a=n[n.length-1]!="$";return!o&&!a?i:new RegExp(`${o?"^":""}(?:${n})${a?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}var BZ=ir.define();function LZ(i,e,t,n){let{main:o}=i.selection,a=t-o.from,l=n-o.from;return Object.assign(Object.assign({},i.changeByRange(c=>c!=o&&t!=n&&i.sliceDoc(c.from+a,c.from+l)!=i.sliceDoc(t,n)?{range:c}:{changes:{from:c.from+a,to:n==o.from?c.to:c.from+l,insert:e},range:Oe.cursor(c.from+a+e.length)})),{userEvent:"input.complete"})}var wP=new WeakMap;function RZ(i){if(!Array.isArray(i))return i;let e=wP.get(i);return e||wP.set(i,e=DZ(i)),e}var _2=Nt.define(),pd=Nt.define(),D2=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Gn(e,t),o=Oi(n);this.chars.push(n);let a=e.slice(t,t+o),l=a.toUpperCase();this.folded.push(Gn(l==a?a.toLowerCase():l,0)),t+=o}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:n,any:o,precise:a,byWord:l}=this;if(t.length==1){let I=Gn(e,0),v=Oi(I),E=v==e.length?0:-100;if(I!=t[0])if(I==n[0])E+=-200;else return!1;return this.ret(E,[0,v])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let A=t.length,u=0;if(c<0){for(let I=0,v=Math.min(e.length,200);I<v&&u<A;){let E=Gn(e,I);(E==t[u]||E==n[u])&&(o[u++]=I),I+=Oi(E)}if(u<A)return!1}let h=0,f=0,d=!1,p=0,m=-1,b=-1,g=/[a-z]/.test(e),w=!0;for(let I=0,v=Math.min(e.length,200),E=0;I<v&&f<A;){let S=Gn(e,I);c<0&&(h<A&&S==t[h]&&(a[h++]=I),p<A&&(S==t[p]||S==n[p]?(p==0&&(m=I),b=I+1,p++):p=0));let C,M=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(C=Pf(S))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!I||M==1&&g||E==0&&M!=0)&&(t[f]==S||n[f]==S&&(d=!0)?l[f++]=I:l.length&&(w=!1)),E=M,I+=Oi(S)}return f==A&&l[0]==0&&w?this.result(-100+(d?-200:0),l,e):p==A&&m==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):p==A?this.ret(-200+-700-e.length,[m,b]):f==A?this.result(-100+(d?-200:0)+-700+(w?0:-1100),l,e):t.length==2?!1:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,t,n){let o=[],a=0;for(let l of t){let c=l+(this.astral?Oi(Gn(n,l)):1);a&&o[a-1]==l?o[a-1]=c:(o[a++]=l,o[a++]=c)}return this.ret(e-n.length,o)}},or=tt.define({combine(i){return Er(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:kZ,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>bP(e(n),t(n)),optionClass:(e,t)=>n=>bP(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function bP(i,e){return i?e?i+" "+e:i:e}function kZ(i,e,t,n,o){let a=i.textDirection==rn.RTL,l=a,c=!1,A="top",u,h,f=e.left-o.left,d=o.right-e.right,p=n.right-n.left,m=n.bottom-n.top;if(l&&f<Math.min(p,d)?l=!1:!l&&d<Math.min(p,f)&&(l=!0),p<=(l?f:d))u=Math.max(o.top,Math.min(t.top,o.bottom-m))-e.top,h=Math.min(400,l?f:d);else{c=!0,h=Math.min(400,(a?e.right:o.right-e.left)-30);let b=o.bottom-e.bottom;b>=m||b>e.top?u=t.bottom-e.top:(A="bottom",u=e.bottom-t.top)}return{style:`${A}: ${u}px; max-width: ${h}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function PZ(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,o){let a=document.createElement("span");a.className="cm-completionLabel";let l=t.displayLabel||t.label,c=0;for(let A=0;A<o.length;){let u=o[A++],h=o[A++];u>c&&a.appendChild(document.createTextNode(l.slice(c,u)));let f=a.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(u,h))),f.className="cm-completionMatchedText",c=h}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function CP(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let o=Math.floor(e/t);return{from:o*t,to:(o+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}var B2=class{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:A=>this.placeInfo(A),key:this},this.space=null,this.currentClass="";let o=e.state.field(t),{options:a,selected:l}=o.open,c=e.state.facet(or);this.optionContent=PZ(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=CP(a.length,l,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",A=>{for(let u=A.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<a.length){this.applyCompletion(e,a[+h[1]]),A.preventDefault();return}}),this.dom.addEventListener("focusout",A=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(or).closeOnBlur&&A.relatedTarget!=e.contentDOM&&e.dispatch({effects:pd.of(null)})}),this.list=this.dom.appendChild(this.createListBox(a,o.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,n,o;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=l&&(this.updateSel(),((t=a.open)===null||t===void 0?void 0:t.disabled)!=((n=l.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((o=a.open)===null||o===void 0)&&o.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=CP(t.options.length,t.selected,this.view.state.facet(or).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:o}=n;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(n);if(!a)return;"then"in a?a.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>Mr(this.view.state,l,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:a}=e;n.appendChild(o),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)n.nodeName!="LI"||!n.id?o--:o==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&NZ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let l=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:l.innerWidth,bottom:l.innerHeight}}return o.top>Math.min(a.bottom,t.bottom)-10||o.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(or).positionInfo(this.view,t,o,n,a)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let o=document.createElement("ul");o.id=t,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let l=n.from;l<n.to;l++){let{completion:c,match:A}=e[l],{section:u}=c;if(u){let d=typeof u=="string"?u:u.name;if(d!=a&&(l>n.from||n.from==0))if(a=d,typeof u!="string"&&u.header)o.appendChild(u.header(u));else{let p=o.appendChild(document.createElement("completion-section"));p.textContent=d}}let h=o.appendChild(document.createElement("li"));h.id=t+"-"+l,h.setAttribute("role","option");let f=this.optionClass(c);f&&(h.className=f);for(let d of this.optionContent){let p=d(c,this.view.state,A);p&&h.appendChild(p)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function _Z(i,e){return t=>new B2(t,i,e)}function NZ(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?i.scrollTop-=t.top-n.top:n.bottom>t.bottom&&(i.scrollTop+=n.bottom-t.bottom)}function SP(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function FZ(i,e){let t=[],n=null,o=A=>{t.push(A);let{section:u}=A.completion;if(u){n||(n=[]);let h=typeof u=="string"?u:u.name;n.some(f=>f.name==h)||n.push(typeof u=="string"?{name:h}:u)}};for(let A of i)if(A.hasResult()){let u=A.result.getMatch;if(A.result.filter===!1)for(let h of A.result.options)o(new Nv(h,A.source,u?u(h):[],1e9-t.length));else{let h=new D2(e.sliceDoc(A.from,A.to));for(let f of A.result.options)if(h.match(f.label)){let d=f.displayLabel?u?u(f,h.matched):[]:h.matched;o(new Nv(f,A.source,d,h.score+(f.boost||0)))}}}if(n){let A=Object.create(null),u=0,h=(f,d)=>{var p,m;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(f.name<d.name?-1:1)};for(let f of n.sort(h))u-=1e5,A[f.name]=u;for(let f of t){let{section:d}=f.completion;d&&(f.score+=A[typeof d=="string"?d:d.name])}}let a=[],l=null,c=e.facet(or).compareCompletions;for(let A of t.sort((u,h)=>h.score-u.score||c(u.completion,h.completion))){let u=A.completion;!l||l.label!=u.label||l.detail!=u.detail||l.type!=null&&u.type!=null&&l.type!=u.type||l.apply!=u.apply||l.boost!=u.boost?a.push(A):SP(A.completion)>SP(l)&&(a[a.length-1]=A),l=A.completion}return a}var L2=class i{constructor(e,t,n,o,a,l){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=o,this.selected=a,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new i(this.options,EP(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,o,a){let l=FZ(e,t);if(!l.length)return o&&e.some(A=>A.state==1)?new i(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let c=t.facet(or).selectOnOpen?0:-1;if(o&&o.selected!=c&&o.selected!=-1){let A=o.options[o.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==A){c=u;break}}return new i(l,EP(n,c),{pos:e.reduce((A,u)=>u.hasResult()?Math.min(A,u.from):A,1e8),create:_Z(Rr,RP),above:a.aboveCursor},o?o.timestamp:Date.now(),c,!1)}map(e){return new i(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}},R2=class i{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new i(OZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(or),a=(n.override||t.languageDataAt("autocomplete",Ya(t)).map(RZ)).map(c=>(this.active.find(u=>u.source==c)||new Go(c,this.active.some(u=>u.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((c,A)=>c==this.active[A])&&(a=this.active);let l=this.open;l&&e.docChanged&&(l=l.map(e.changes)),e.selection||a.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!QZ(a,this.active)?l=L2.build(a,t,this.id,l,n):l&&l.disabled&&!a.some(c=>c.state==1)&&(l=null),!l&&a.every(c=>c.state!=1)&&a.some(c=>c.hasResult())&&(a=a.map(c=>c.hasResult()?new Go(c.source,0):c));for(let c of e.effects)c.is(LP)&&(l=l&&l.setSelected(c.value,this.id));return a==this.active&&l==this.open?this:new i(a,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:UZ}};function QZ(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let o=t==i.length,a=n==e.length;if(o||a)return o==a;if(i[t++].result!=e[n++].result)return!1}}var UZ={"aria-autocomplete":"list"};function EP(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}var OZ=[];function k2(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}var Go=class i{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=k2(e),o=this;n?o=o.handleUserEvent(e,n,t):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new i(o.source,0));for(let a of e.effects)if(a.is(_2))o=new i(o.source,1,a.value?Ya(e.state):-1);else if(a.is(pd))o=new i(o.source,0);else if(a.is(BP))for(let l of a.value)l.source==o.source&&(o=l);return o}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new i(this.source,1)}handleChange(e){return e.changes.touchesRange(Ya(e.startState))?new i(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new i(this.source,this.state,e.mapPos(this.explicitPos))}},Fv=class i extends Go{constructor(e,t,n,o,a){super(e,2,t),this.result=n,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var o;let a=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=Ya(e.state);if((this.explicitPos<0?c<=a:c<this.from)||c>l||t=="delete"&&Ya(e.startState)==this.from)return new Go(this.source,t=="input"&&n.activateOnTyping?1:0);let A=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return GZ(this.result.validFor,e.state,a,l)?new i(this.source,A,this.result,a,l):this.result.update&&(u=this.result.update(this.result,a,l,new _v(e.state,c,A>=0)))?new i(this.source,A,u,u.from,(o=u.to)!==null&&o!==void 0?o:Ya(e.state)):new Go(this.source,1,A)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Go(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new i(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};function GZ(i,e,t,n){if(!i)return!1;let o=e.sliceDoc(t,n);return typeof i=="function"?i(o,t,n,e):DP(i,!0).test(o)}var BP=Nt.define({map(i,e){return i.map(t=>t.map(e))}}),LP=Nt.define(),Rr=$n.define({create(){return R2.start()},update(i,e){return i.update(e)},provide:i=>[BS.from(i,e=>e.tooltip),et.contentAttributes.from(i,e=>e.attrs)]});function RP(i,e){let t=e.completion.apply||e.completion.label,n=i.state.field(Rr).active.find(o=>o.source==e.source);return n instanceof Fv?(typeof t=="string"?i.dispatch(Object.assign(Object.assign({},LZ(i.state,t,n.from,n.to)),{annotations:BZ.of(e.completion)})):t(i,e.completion,n.from,n.to),!0):!1}function Pv(i,e="option"){return t=>{let n=t.state.field(Rr,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(or).interactionDelay)return!1;let o=1,a;e=="page"&&(a=LS(t,n.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:l}=n.open.options,c=n.open.selected>-1?n.open.selected+o*(i?1:-1):i?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),t.dispatch({effects:LP.of(c)}),!0}}var zZ=i=>{let e=i.state.field(Rr,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(or).interactionDelay?!1:RP(i,e.open.options[e.open.selected])},N2=i=>i.state.field(Rr,!1)?(i.dispatch({effects:_2.of(!0)}),!0):!1,HZ=i=>{let e=i.state.field(Rr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:pd.of(null)}),!0)},P2=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},IP=50,WZ=50,VZ=1e3,XZ=ai.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of i.state.field(Rr).active)e.state==1&&this.startQuery(e)}update(i){let e=i.state.field(Rr);if(!i.selectionSet&&!i.docChanged&&i.startState.field(Rr)==e)return;let t=i.transactions.some(n=>(n.selection||n.docChanged)&&!k2(n));for(let n=0;n<this.running.length;n++){let o=this.running[n];if(t||o.updates.length+i.transactions.length>WZ&&Date.now()-o.time>VZ){for(let a of o.context.abortListeners)try{a()}catch(l){Mr(this.view.state,l)}o.context.abortListeners=null,this.running.splice(n--,1)}else o.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(o=>o.active.source==n.source))?setTimeout(()=>this.startUpdate(),IP):-1,this.composing!=0)for(let n of i.transactions)k2(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,e=i.field(Rr);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(i){let{state:e}=this.view,t=Ya(e),n=new _v(e,t,i.explicitPos==t),o=new P2(i,n);this.running.push(o),Promise.resolve(i.source(n)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:pd.of(null)}),Mr(this.view.state,a)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),IP))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(or);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(o.done===void 0)continue;if(this.running.splice(n--,1),o.done){let l=new Fv(o.active.source,o.active.explicitPos,o.done,o.done.from,(i=o.done.to)!==null&&i!==void 0?i:Ya(o.updates.length?o.updates[0].startState:this.view.state));for(let c of o.updates)l=l.update(c,t);if(l.hasResult()){e.push(l);continue}}let a=this.view.state.field(Rr).active.find(l=>l.source==o.active.source);if(a&&a.state==1)if(o.done==null){let l=new Go(o.active.source,0);for(let c of o.updates)l=l.update(c,t);l.state!=1&&e.push(l)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:BP.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(Rr,!1);if(e&&e.tooltip&&this.view.state.facet(or).closeOnBlur){let t=e.open&&LS(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&this.view.dispatch({effects:pd.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:_2.of(!1)}),20),this.composing=0}}}),YZ=et.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var md={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},lc=Nt.define({map(i,e){let t=e.mapPos(i,-1,ri.TrackAfter);return t??void 0}}),F2=new class extends ws{};F2.startSide=1;F2.endSide=-1;var kP=$n.define({create(){return Pn.empty},update(i,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(i=Pn.empty)}i=i.map(e.changes);for(let t of e.effects)t.is(lc)&&(i=i.update({add:[F2.range(t.value,t.value+1)]}));return i}});function PP(){return[KZ,kP]}var T2="()[]{}<>";function _P(i){for(let e=0;e<T2.length;e+=2)if(T2.charCodeAt(e)==i)return T2.charAt(e+1);return Pf(i<128?i:i+1)}function NP(i,e){return i.languageDataAt("closeBrackets",e)[0]||md}var ZZ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),KZ=et.inputHandler.of((i,e,t,n)=>{if((ZZ?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let o=i.state.selection.main;if(n.length>2||n.length==2&&Oi(Gn(n,0))==1||e!=o.from||t!=o.to)return!1;let a=jZ(i.state,n);return a?(i.dispatch(a),!0):!1}),JZ=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=NP(i,i.selection.main.head).brackets||md.brackets,o=null,a=i.changeByRange(l=>{if(l.empty){let c=qZ(i.doc,l.head);for(let A of n)if(A==c&&Qv(i.doc,l.head)==_P(Gn(A,0)))return{changes:{from:l.head-A.length,to:l.head+A.length},range:Oe.cursor(l.head-A.length)}}return{range:o=l}});return o||e(i.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},FP=[{key:"Backspace",run:JZ}];function jZ(i,e){let t=NP(i,i.selection.main.head),n=t.brackets||md.brackets;for(let o of n){let a=_P(Gn(o,0));if(e==o)return a==o?tK(i,o,n.indexOf(o+o+o)>-1,t):$Z(i,o,a,t.before||md.before);if(e==a&&QP(i,i.selection.main.from))return eK(i,o,a)}return null}function QP(i,e){let t=!1;return i.field(kP).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Qv(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Oi(Gn(t,0)))}function qZ(i,e){let t=i.sliceString(e-2,e);return Oi(Gn(t,0))==t.length?t:t.slice(1)}function $Z(i,e,t,n){let o=null,a=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:t,from:l.to}],effects:lc.of(l.to+e.length),range:Oe.range(l.anchor+e.length,l.head+e.length)};let c=Qv(i.doc,l.head);return!c||/\s/.test(c)||n.indexOf(c)>-1?{changes:{insert:e+t,from:l.head},effects:lc.of(l.head+e.length),range:Oe.cursor(l.head+e.length)}:{range:o=l}});return o?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function eK(i,e,t){let n=null,o=i.changeByRange(a=>a.empty&&Qv(i.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:Oe.cursor(a.head+t.length)}:n={range:a});return n?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function tK(i,e,t,n){let o=n.stringPrefixes||md.stringPrefixes,a=null,l=i.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:lc.of(c.to+e.length),range:Oe.range(c.anchor+e.length,c.head+e.length)};let A=c.head,u=Qv(i.doc,A),h;if(u==e){if(MP(i,A))return{changes:{insert:e+e,from:A},effects:lc.of(A+e.length),range:Oe.cursor(A+e.length)};if(QP(i,A)){let d=t&&i.sliceDoc(A,A+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:A,to:A+d.length,insert:d},range:Oe.cursor(A+d.length)}}}else{if(t&&i.sliceDoc(A-2*e.length,A)==e+e&&(h=TP(i,A-2*e.length,o))>-1&&MP(i,h))return{changes:{insert:e+e+e+e,from:A},effects:lc.of(A+e.length),range:Oe.cursor(A+e.length)};if(i.charCategorizer(A)(u)!=un.Word&&TP(i,A,o)>-1&&!nK(i,A,e,o))return{changes:{insert:e+e,from:A},effects:lc.of(A+e.length),range:Oe.cursor(A+e.length)}}return{range:a=c}});return a?null:i.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function MP(i,e){let t=Mi(i).resolveInner(e+1);return t.parent&&t.from==e}function nK(i,e,t,n){let o=Mi(i).resolveInner(e,-1),a=n.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=i.sliceDoc(o.from,Math.min(o.to,o.from+t.length+a)),A=c.indexOf(t);if(!A||A>-1&&n.indexOf(c.slice(0,A))>-1){let h=o.firstChild;for(;h&&h.from==o.from&&h.to-h.from>t.length+A;){if(i.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let u=o.to==e&&o.parent;if(!u)break;o=u}return!1}function TP(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=un.Word)return e;for(let o of t){let a=e-o.length;if(i.sliceDoc(a,e)==o&&n(i.sliceDoc(a-1,a))!=un.Word)return a}return-1}function UP(i={}){return[Rr,or.of(i),XZ,iK,YZ]}var Q2=[{key:"Ctrl-Space",run:N2},{key:"Escape",run:HZ},{key:"ArrowDown",run:Pv(!0)},{key:"ArrowUp",run:Pv(!1)},{key:"PageDown",run:Pv(!0,"page")},{key:"PageUp",run:Pv(!1,"page")},{key:"Enter",run:zZ}],iK=Xr.highest(Dr.computeN([or],i=>i.facet(or).defaultKeymap?[Q2]:[]));var OP=(()=>[U0(),N3(),Q0(),$0(E3,{fallback:!0}),Dr.of([...AP,...U3])])();var rK=i=>{let e=O2(i.state);return e.line?sK(i):e.block?aK(i):!1};function U2(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let o=i(e,t);return o?(n(t.update(o)),!0):!1}}var sK=U2(AK,0);var oK=U2(zP,0);var aK=U2((i,e)=>zP(i,e,cK(e)),0),GP=[{key:"Mod-/",run:rK},{key:"Alt-A",run:oK}];function O2(i,e=i.selection.main.head){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var gd=50;function lK(i,{open:e,close:t},n,o){let a=i.sliceDoc(n-gd,n),l=i.sliceDoc(o,o+gd),c=/\s*$/.exec(a)[0].length,A=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-e.length,u)==e&&l.slice(A,A+t.length)==t)return{open:{pos:n-c,margin:c&&1},close:{pos:o+A,margin:A&&1}};let h,f;o-n<=2*gd?h=f=i.sliceDoc(n,o):(h=i.sliceDoc(n,n+gd),f=i.sliceDoc(o-gd,o));let d=/^\s*/.exec(h)[0].length,p=/\s*$/.exec(f)[0].length,m=f.length-p-t.length;return h.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:n+d+e.length,margin:/\s/.test(h.charAt(d+e.length))?1:0},close:{pos:o-p-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function cK(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),o=t.to<=n.to?n:i.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=o.to:e.push({from:n.from,to:o.to})}return e}function zP(i,e,t=e.selection.ranges){let n=t.map(a=>O2(e,a.from).block);if(!n.every(a=>a))return null;let o=t.map((a,l)=>lK(e,n[l],a.from,a.to));if(i!=2&&!o.every(a=>a))return{changes:e.changes(t.map((a,l)=>o[l]?[]:[{from:a.from,insert:n[l].open+" "},{from:a.to,insert:" "+n[l].close}]))};if(i!=1&&o.some(a=>a)){let a=[];for(let l=0,c;l<o.length;l++)if(c=o[l]){let A=n[l],{open:u,close:h}=c;a.push({from:u.pos-A.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+A.close.length})}return{changes:a}}return null}function AK(i,e,t=e.selection.ranges){let n=[],o=-1;for(let{from:a,to:l}of t){let c=n.length,A=1e9;for(let u=a;u<=l;){let h=e.doc.lineAt(u);if(h.from>o&&(a==l||l>h.from)){o=h.from;let f=O2(e,u).line;if(!f)continue;let d=/^\s*/.exec(h.text)[0].length,p=d==h.length,m=h.text.slice(d,d+f.length)==f?d:-1;d<h.text.length&&d<A&&(A=d),n.push({line:h,comment:m,token:f,indent:d,empty:p,single:!1})}u=h.to+1}if(A<1e9)for(let u=c;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=A);n.length==c+1&&(n[c].single=!0)}if(i!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:A,indent:u,empty:h,single:f}of n)(f||!h)&&a.push({from:c.from+u,insert:A+" "});let l=e.changes(a);return{changes:l,selection:e.selection.map(l,1)}}else if(i!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:c,token:A}of n)if(c>=0){let u=l.from+c,h=u+A.length;l.text[h-l.from]==" "&&h++,a.push({from:u,to:h})}return{changes:a}}return null}var uK="builtin",cc="comment",HP="string",WP="symbol",vd="atom",VP="number",XP="bracket",hK=2;function KP(i){for(var e={},t=i.split(" "),n=0;n<t.length;++n)e[t[n]]=!0;return e}var YP=KP("\u03BB case-lambda call/cc class cond-expand define-class define-values exit-handler field import inherit init-field interface let*-values let-values let/ec mixin opt-lambda override protect provide public rename require require-for-syntax syntax syntax-case syntax-error unit/sig unless when with-syntax and begin call-with-current-continuation call-with-input-file call-with-output-file case cond define define-syntax define-macro defmacro delay do dynamic-wind else for-each if lambda let let* let-syntax letrec letrec-syntax map or syntax-rules abs acos angle append apply asin assoc assq assv atan boolean? caar cadr call-with-input-file call-with-output-file call-with-values car cdddar cddddr cdr ceiling char->integer char-alphabetic? char-ci<=? char-ci<? char-ci=? char-ci>=? char-ci>? char-downcase char-lower-case? char-numeric? char-ready? char-upcase char-upper-case? char-whitespace? char<=? char<? char=? char>=? char>? char? close-input-port close-output-port complex? cons cos current-input-port current-output-port denominator display eof-object? eq? equal? eqv? eval even? exact->inexact exact? exp expt #f floor force gcd imag-part inexact->exact inexact? input-port? integer->char integer? interaction-environment lcm length list list->string list->vector list-ref list-tail list? load log magnitude make-polar make-rectangular make-string make-vector max member memq memv min modulo negative? newline not null-environment null? number->string number? numerator odd? open-input-file open-output-file output-port? pair? peek-char port? positive? procedure? quasiquote quote quotient rational? rationalize read read-char real-part real? remainder reverse round scheme-report-environment set! set-car! set-cdr! sin sqrt string string->list string->number string->symbol string-append string-ci<=? string-ci<? string-ci=? string-ci>=? string-ci>? string-copy string-fill! string-length string-ref string-set! string<=? string<? string=? string>=? string>? string? substring symbol->string symbol? #t tan transcript-off transcript-on truncate values vector vector->list vector-fill! vector-length vector-ref vector-set! with-input-from-file with-output-to-file write write-char zero?"),fK=KP("define let letrec let* lambda define-macro defmacro let-syntax letrec-syntax let-values let*-values define-syntax syntax-rules define-values when unless");function dK(i,e,t){this.indent=i,this.type=e,this.prev=t}function G2(i,e,t){i.indentStack=new dK(e,t,i.indentStack)}function pK(i){i.indentStack=i.indentStack.prev}var mK=new RegExp(/^(?:[-+]i|[-+][01]+#*(?:\/[01]+#*)?i|[-+]?[01]+#*(?:\/[01]+#*)?@[-+]?[01]+#*(?:\/[01]+#*)?|[-+]?[01]+#*(?:\/[01]+#*)?[-+](?:[01]+#*(?:\/[01]+#*)?)?i|[-+]?[01]+#*(?:\/[01]+#*)?)(?=[()\s;"]|$)/i),gK=new RegExp(/^(?:[-+]i|[-+][0-7]+#*(?:\/[0-7]+#*)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?@[-+]?[0-7]+#*(?:\/[0-7]+#*)?|[-+]?[0-7]+#*(?:\/[0-7]+#*)?[-+](?:[0-7]+#*(?:\/[0-7]+#*)?)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?)(?=[()\s;"]|$)/i),vK=new RegExp(/^(?:[-+]i|[-+][\da-f]+#*(?:\/[\da-f]+#*)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?@[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?[-+](?:[\da-f]+#*(?:\/[\da-f]+#*)?)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?)(?=[()\s;"]|$)/i),yK=new RegExp(/^(?:[-+]i|[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)i|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)@[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)?i|(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*))(?=[()\s;"]|$)/i);function xK(i){return i.match(mK)}function wK(i){return i.match(gK)}function z2(i,e){return e===!0&&i.backUp(1),i.match(yK)}function bK(i){return i.match(vK)}function ZP(i,e){for(var t,n=!1;(t=i.next())!=null;){if(t==e.token&&!n){e.state.mode=!1;break}n=!n&&t=="\\"}}var JP={name:"scheme",startState:function(){return{indentStack:null,indentation:0,mode:!1,sExprComment:!1,sExprQuote:!1}},token:function(i,e){if(e.indentStack==null&&i.sol()&&(e.indentation=i.indentation()),i.eatSpace())return null;var t=null;switch(e.mode){case"string":ZP(i,{token:'"',state:e}),t=HP;break;case"symbol":ZP(i,{token:"|",state:e}),t=WP;break;case"comment":for(var n,o=!1;(n=i.next())!=null;){if(n=="#"&&o){e.mode=!1;break}o=n=="|"}t=cc;break;case"s-expr-comment":if(e.mode=!1,i.peek()=="("||i.peek()=="[")e.sExprComment=0;else{i.eatWhile(/[^\s\(\)\[\]]/),t=cc;break}default:var a=i.next();if(a=='"')e.mode="string",t=HP;else if(a=="'")i.peek()=="("||i.peek()=="["?(typeof e.sExprQuote!="number"&&(e.sExprQuote=0),t=vd):(i.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),t=vd);else if(a=="|")e.mode="symbol",t=WP;else if(a=="#")if(i.eat("|"))e.mode="comment",t=cc;else if(i.eat(/[tf]/i))t=vd;else if(i.eat(";"))e.mode="s-expr-comment",t=cc;else{var l=null,c=!1,A=!0;i.eat(/[ei]/i)?c=!0:i.backUp(1),i.match(/^#b/i)?l=xK:i.match(/^#o/i)?l=wK:i.match(/^#x/i)?l=bK:i.match(/^#d/i)?l=z2:i.match(/^[-+0-9.]/,!1)?(A=!1,l=z2):c||i.eat("#"),l!=null&&(A&&!c&&i.match(/^#[ei]/i),l(i)&&(t=VP))}else if(/^[-+0-9.]/.test(a)&&z2(i,!0))t=VP;else if(a==";")i.skipToEnd(),t=cc;else if(a=="("||a=="["){for(var u="",h=i.column(),f;(f=i.eat(/[^\s\(\[\;\)\]]/))!=null;)u+=f;u.length>0&&fK.propertyIsEnumerable(u)?G2(e,h+hK,a):(i.eatSpace(),i.eol()||i.peek()==";"?G2(e,h+1,a):G2(e,h+i.current().length,a)),i.backUp(i.current().length-1),typeof e.sExprComment=="number"&&e.sExprComment++,typeof e.sExprQuote=="number"&&e.sExprQuote++,t=XP}else a==")"||a=="]"?(t=XP,e.indentStack!=null&&e.indentStack.type==(a==")"?"(":"[")&&(pK(e),typeof e.sExprComment=="number"&&--e.sExprComment==0&&(t=cc,e.sExprComment=!1),typeof e.sExprQuote=="number"&&--e.sExprQuote==0&&(t=vd,e.sExprQuote=!1))):(i.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),YP&&YP.propertyIsEnumerable(i.current())?t=uK:t="variable")}return typeof e.sExprComment=="number"?cc:typeof e.sExprQuote=="number"?vd:t},indent:function(i){return i.indentStack==null?i.indentation:i.indentStack.indent},languageData:{closeBrackets:{brackets:["(","[","{",'"']},commentTokens:{line:";;"}}};var W2=class{constructor(e,t,n,o,a,l){this.left=e,this.top=t,this.height=n,this.className=o,this.letter=a,this.partial=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.color=this.partial?"transparent":"",e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.letter==e.letter&&this.height==e.height&&this.className==e.className}},V2=class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,t=[];for(let n of e.selection.ranges){let o=n==e.selection.main,a=IK(null,this.view,n,o);a&&t.push(a)}return{cursors:t}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((t,n)=>!t.eq(this.cursors[n]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let n of e)this.cursorLayer.appendChild(n.draw())}else e.forEach((n,o)=>n.adjust(t[o]));this.cursors=e}}destroy(){this.cursorLayer.remove()}},CK={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696"}},SK=Xr.highest(et.theme(CK));function EK(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==rn.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function IK(i,e,t,n){let o=t.head;var a=1;let l=e.coordsAtPos(o,1);if(!l)return null;let c=EK(e),A=o<e.state.doc.length&&e.state.sliceDoc(o,o+1);(!A||A==`
`||A=="\r")&&(A="\xA0");let u=l.bottom-l.top;return new W2(l.left-c.left,l.top-c.top+u*(1-a),u*a,n?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",A,a!=1)}var MK=et.theme({".cm-emacsMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"5px 10px",backgroundColor:"#fffa8f",fontFamily:"monospace"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"#fffa8f"}}),TK=ai.fromClass(class{constructor(i){this.status="",this.view=i,this.em=new yd(i),this.blockCursor=new V2(i),this.view.scrollDOM.classList.add("cm-emacsMode")}update(i){i.docChanged&&(this.em.$emacsMark=null,this.em.updateMarksOnChange(i.changes)),this.blockCursor.update(i)}destroy(){this.view.scrollDOM.classList.remove("cm-emacsMode"),this.blockCursor.destroy()}},{eventHandlers:{mousedown:function(){this.em.$emacsMark=null}},provide:i=>Dr.of([{any:function(e,t){var n;return!!(!((n=e.plugin(i))===null||n===void 0)&&n.em.handleKeyboard(t))}}])}),DK=Nt.define(),BK=$n.define({create:()=>!1,update(i,e){for(let t of e.effects)t.is(DK)&&(i=t.value);return i},provide:i=>iu.from(i,e=>e?LK:null)});function LK(i){let e=document.createElement("div");return e.className="cm-vim-panel",{top:!1,dom:e}}function qP(i={}){return[MK,TK,SK,BK]}var RK={Return:"Return",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Return",Divide:"/",Slash:"/",Multiply:"*",Subtract:"-",Minus:"-",Equal:"="},kK={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1},H2={},yd=class i{constructor(e){this.view=e,this.$data={count:0,keyChain:"",lastCommand:""},this.$emacsMarkRing=[],this.$emacsMark=null}static bindKey(e,t){e.split("|").forEach(function(n){let o="",a=n.split(/\s+/);a.forEach(function(l,c){let A=l.split(/-(?=.)/),u=A.pop();A.length&&(o+=A.sort().join("-")+"-"),o+=u,c===a.length-1?H2[o]=t:(H2[o]="null",o+=" ")})})}static getKey(e){var t=e.code,n=e.key;if(kK[n])return["","",""];t.length>1&&(t[0]=="N"&&(t=t.replace(/^Numpad/,"")),t[0]=="K"&&(t=t.replace(/^Key/,""))),t=RK[t]||t,t.length==1&&(t=t.toLowerCase());var o="";return e.ctrlKey&&(o+="C-"),e.metaKey&&(o+="CMD-"),e.altKey&&(o+="M-"),e.shiftKey&&(o+="S-"),[t,o,n]}static addCommands(e){Object.keys(e).forEach(function(t){var n=e[t];typeof n=="function"&&(n={exec:n}),i.commands[t]=n})}static execCommand(e,t,n,o=1){var a=void 0;if(typeof e=="function")for(var l=0;l<o;l++)e(t.view);else if(e!=="null")if(e.exec){o>1&&e.handlesCount&&(n||(n={}),typeof n=="object"&&(n.count=o),o=1);for(var l=0;l<o;l++)a=e.exec(t,n||{})}else throw new Error("missformed command");return a}handleKeyboard(e){var t=i.getKey(e),n=this.findCommand(t);if(n&&n.command){var o=i.execCommand(n.command,this,n.args,n.count);if(o===!1)return}return n}findCommand([e,t,n]){if(e){var o=this,a=this.$data;if(!t&&e.length==1&&(o.pushEmacsMark(),a.count)){var l=new Array(a.count+1).join(n);return a.count=null,{command:"insertstring",args:l}}if(t=="C-"||a.count){var u=parseInt(e[e.length-1]);if(typeof u=="number"&&!isNaN(u))return a.count=Math.max(a.count||0,0),a.count=10*a.count+u,{command:"null"}}t&&(e=t+e),a.keyChain&&(e=a.keyChain+=" "+e);var c=H2[e];if(a.keyChain=c=="null"?e:"",!!c){if(c==="null")return{command:"null"};if(c==="universalArgument")return a.count=-4,{command:"null"};var A;if(typeof c!="string"&&(A=c.args,c.command&&(c=c.command)),(c==="insertstring"||c===xv||c===ov)&&o.pushEmacsMark(),!(typeof c=="string"&&(c=i.commands[c],!c))){!c.readOnly&&!c.isYank&&(a.lastCommand=null);var u=a.count||1;return a.count&&(a.count=0),{command:c,args:A,count:u}}}}}showCommandLine(e){console.error("TODO")}updateMarksOnChange(e){this.$emacsMark&&(this.$emacsMark=this.updateMark(this.$emacsMark,e)),this.$emacsMarkRing=this.$emacsMarkRing.map(t=>this.updateMark(t,e)).filter(Boolean)}updateMark(e,t){if(e){var n=e.map(function(o){return t.mapPos(o,1,ri.TrackDel)}).filter(o=>o!=null);return n.length==0?null:n}}emacsMark(){return this.$emacsMark}setEmacsMark(e){this.$emacsMark=e}pushEmacsMark(e,t){var n=this.$emacsMark;n&&this.$emacsMarkRing.push(n),!e||t?this.setEmacsMark(e):this.$emacsMarkRing.push(e)}popEmacsMark(){var e=this.emacsMark();return e?(this.setEmacsMark(null),e):this.$emacsMarkRing.pop()}getLastEmacsMark(){return this.$emacsMark||this.$emacsMarkRing.slice(-1)[0]}getCopyText(){var e=this.view.state;return e.selection.ranges.map(t=>e.sliceDoc(t.from,t.to)).join(`
`)}clearSelection(){var e=this.view,t=e.state.selection,n=!t.ranges.some(a=>a.from!=a.to);if(n)return!1;var o=t.ranges.map(a=>Oe.range(a.head,a.head));return e.dispatch({selection:Oe.create(o,t.mainIndex)}),!0}onPaste(e){var t=this.view,n=t.state.selection,o;if(n.ranges.length>1){var a=e.split(`
`);a.length==n.ranges.length&&(o=a)}var l=0,c=t.state.changeByRange(A=>{var u=o?o[l]:e;return l++,{changes:{from:A.from,to:A.to,insert:u},range:Oe.cursor(A.from+u.length)}});t.dispatch(c)}};yd.commands={};var jP={"Up|C-p":{command:"goOrSelect",args:[hv,Ad]},"Down|C-n":{command:"goOrSelect",args:[fv,ud]},"Left|C-b":{command:"goOrSelect",args:[H3,h2]},"Right|C-f":{command:"goOrSelect",args:[z3,u2]},"C-Left|M-b":{command:"goOrSelect",args:[a2,f2]},"C-Right|M-f":{command:"goOrSelect",args:[l2,d2]},"Home|C-a":{command:"goOrSelect",args:[c2,mv]},"End|C-e":{command:"goOrSelect",args:[A2,gv]},"C-Home|S-M-,":{command:"goOrSelect",args:[rv,ad]},"C-End|S-M-.":{command:"goOrSelect",args:[sv,ld]},"S-Up|S-C-p":Ad,"S-Down|S-C-n":ud,"S-Left|S-C-b":h2,"S-Right|S-C-f":u2,"S-C-Left|S-M-b":j3,"S-C-Right|S-M-f":J3,"S-Home|S-C-a":mv,"S-End|S-C-e":gv,"S-C-Home":ad,"S-C-End":ld,"C-l":"recenterTopBottom","M-s":"centerSelection","M-g":"gotoline","C-x C-p|C-x h":p2,"PageDown|C-v|C-Down":{command:"goOrSelect",args:[od,uu]},"PageUp|M-v|C-Up":{command:"goOrSelect",args:[nv,uu]},"S-C-Down":uu,"S-C-Up":iv,"C-s":kv,"C-r":kv,"M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:cd,"Delete|C-d":yv,"Return|C-m":{command:"insertstring",args:`
`},"C-o":xv,"M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","M-h":"selectParagraph","M-@|M-S-2":"markWord","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-w":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":m2,"M-u":{command:"changeCase",args:{dir:1}},"M-l":{command:"changeCase",args:{dir:-1}},"C-x C-u":{command:"changeCase",args:{dir:1,region:!0}},"C-x C-l":{command:"changeCase",args:{dir:1,region:!0}},"M-/":N2,"C-u":"universalArgument","M-;":ov,"C-/|C-x u|S-C--|C-z":lv,"S-C-/|S-C-x u|C--|S-C-z":sd,"C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "},Esc:"unsetTransientMark"};for(let i in jP)jP[i];var PK="#282828",_K="#3c3836",NK="#665c54",FK="#928374",QK="#ebdbb2",UK="#d5c4a1",OK="#bdae93",GK="#a89984",zK="#fb4934",HK="#b8bb26",WK="#fabd2f",i_="#83a598",VK="#d3869b",XK="#8ec07c",YK="#fe8019",r_=PK,Z2=_K,xd=NK,$P=FK,mu=QK,ZK=UK,KK=OK,JK=GK,zv=zK,Uv=HK,wd=WK,e_=i_,Ov=VK,Gv=XK,Hv=YK,t_=zv,K2=Z2,X2=K2,jK=r_,Y2=Z2,qK=K2,n_=Hv,$K=et.theme({"&":{color:mu,backgroundColor:jK},".cm-content":{caretColor:n_},".cm-cursor, .cm-dropCursor":{borderLeftColor:n_},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qK},".cm-panels":{backgroundColor:K2,color:mu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:r_,color:wd,outline:`1px solid ${xd}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:xd},".cm-activeLine":{backgroundColor:X2},".cm-selectionMatch":{backgroundColor:xd},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${xd}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:xd},".cm-gutters":{backgroundColor:Z2,color:KK,border:"none"},".cm-activeLineGutter":{backgroundColor:X2},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Y2},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Y2,borderBottomColor:Y2},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:X2,color:ZK}}},{dark:!0}),e7=cu.define([{tag:Me.keyword,color:zv},{tag:[Me.name,Me.deleted,Me.character,Me.propertyName,Me.macroName],color:Gv},{tag:[Me.variableName],color:e_},{tag:[Me.function(Me.variableName)],color:Uv,fontStyle:"bold"},{tag:[Me.labelName],color:mu},{tag:[Me.color,Me.constant(Me.name),Me.standard(Me.name)],color:Ov},{tag:[Me.definition(Me.name),Me.separator],color:mu},{tag:[Me.brace],color:mu},{tag:[Me.annotation],color:t_},{tag:[Me.number,Me.changed,Me.annotation,Me.modifier,Me.self,Me.namespace],color:Ov},{tag:[Me.typeName,Me.className],color:wd},{tag:[Me.operator,Me.operatorKeyword],color:zv},{tag:[Me.tagName],color:Gv,fontStyle:"bold"},{tag:[Me.squareBracket],color:Hv},{tag:[Me.angleBracket],color:e_},{tag:[Me.attributeName],color:Gv},{tag:[Me.regexp],color:Gv},{tag:[Me.quote],color:$P},{tag:[Me.string],color:mu},{tag:Me.link,color:JK,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[Me.url,Me.escape,Me.special(Me.string)],color:Ov},{tag:[Me.meta],color:wd},{tag:[Me.comment],color:$P,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold",color:Hv},{tag:Me.emphasis,fontStyle:"italic",color:Uv},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.heading,fontWeight:"bold",color:Uv},{tag:[Me.heading1,Me.heading2],fontWeight:"bold",color:Uv},{tag:[Me.heading3,Me.heading4],fontWeight:"bold",color:wd},{tag:[Me.heading5,Me.heading6],color:wd},{tag:[Me.atom,Me.bool,Me.special(Me.variableName)],color:Ov},{tag:[Me.processingInstruction,Me.inserted],color:i_},{tag:[Me.contentSeparator],color:zv},{tag:Me.invalid,color:Hv,borderBottom:`1px dotted ${t_}`}]),s_=[$K,$0(e7)];function t7(i,e=i.state){let t=new Set;for(let{from:n,to:o}of i.visibleRanges){let a=n;for(;a<=o;){let l=e.doc.lineAt(a);t.has(l)||t.add(l),a=l.to+1}}return t}function J2(i){let e=i.selection.main.head;return i.doc.lineAt(e)}function o_(i,e){let t=0;e:for(let n=0;n<i.length;n++)switch(i[n]){case" ":{t+=1;continue e}case"	":{t+=e-t%e;continue e}case"\r":continue e;default:break e}return t}var Vv=tt.define({combine(i){return Er(i,{highlightActiveBlock:!0,hideFirstIndent:!1})}}),j2=class{constructor(e,t,n){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=n;for(let o of this.lines)this.add(o);this.state.facet(Vv).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has(typeof e=="number"?e:e.number)}get(e){let t=this.map.get(typeof e=="number"?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,n){let o=!e.text.trim().length,a={line:e,col:t,level:n,empty:o};return this.map.set(a.line.number,a),a}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(e.number===1)return this.set(e,0,0);if(e.number===this.state.doc.lines){let l=this.closestNonEmpty(e,-1);return this.set(e,0,l.level)}let o=this.closestNonEmpty(e,-1),a=this.closestNonEmpty(e,1);return o.level>=a.level?this.set(e,0,o.level):o.empty&&o.level===0&&a.level!==0?this.set(e,0,0):a.level>o.level?this.set(e,0,o.level+1):this.set(e,0,a.level)}let t=o_(e.text,this.state.tabSize),n=Math.floor(t/this.unitWidth);return this.set(e,t,n)}closestNonEmpty(e,t){let n=e.number+t;for(;t===-1?n>=1:n<=this.state.doc.lines;){if(this.has(n)){let l=this.get(n);if(!l.empty)return l}let a=this.state.doc.line(n);if(a.text.trim().length){let l=o_(a.text,this.state.tabSize),c=Math.floor(l/this.unitWidth);return this.set(a,l,c)}n+=t}let o=this.state.doc.line(t===-1?1:this.state.doc.lines);return this.set(o,0,0)}findAndSetActiveLines(){let e=J2(this.state);if(!this.has(e))return;let t=this.get(e);if(this.has(t.line.number+1)){let a=this.get(t.line.number+1);a.level>t.level&&(t=a)}if(this.has(t.line.number-1)){let a=this.get(t.line.number-1);a.level>t.level&&(t=a)}if(t.level===0)return;t.active=t.level;let n,o;for(n=t.line.number;n>1;n--){if(!this.has(n-1))continue;let a=this.get(n-1);if(a.level<t.level)break;a.active=t.level}for(o=t.line.number;o<this.state.doc.lines;o++){if(!this.has(o+1))continue;let a=this.get(o+1);if(a.level<t.level)break;a.active=t.level}}},n7="#F0F1F2",i7="#2B3245",r7="#E4E5E6",s7="#3C445C",a_="1px",o7=et.baseTheme({"&light":{"--indent-marker-bg-color":n7,"--indent-marker-active-bg-color":r7},"&dark":{"--indent-marker-bg-color":i7,"--indent-marker-active-bg-color":s7},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}});function Wv(i,e,t,n){return`${`repeating-linear-gradient(to right, var(${i}) 0 ${a_}, transparent ${a_} ${e}ch)`} ${t*e}.5ch/calc(${e*n}ch - 1px) no-repeat`}function a7(i,e,t){let{level:n,active:o}=i;if(t&&n===0)return[];let a=t?1:0,l=[];if(o!==void 0){let c=o-a-1;c>0&&l.push(Wv("--indent-marker-bg-color",e,a,c)),l.push(Wv("--indent-marker-active-bg-color",e,o-1,1)),o!==n&&l.push(Wv("--indent-marker-bg-color",e,o,n-o))}else l.push(Wv("--indent-marker-bg-color",e,a,n-a));return l.join(",")}var q2=class{constructor(e){this.view=e,this.unitWidth=Cs(e.state),this.currentLineNumber=J2(e.state).number,this.generate(e.state)}update(e){let t=Cs(e.state),n=t!==this.unitWidth;n&&(this.unitWidth=t);let o=J2(e.state).number,a=o!==this.currentLineNumber;this.currentLineNumber=o;let l=e.state.facet(Vv).highlightActiveBlock&&a;(e.docChanged||e.viewportChanged||n||l)&&this.generate(e.state)}generate(e){let t=new Vr,n=t7(this.view,e),o=new j2(n,e,this.unitWidth),{hideFirstIndent:a}=e.facet(Vv);for(let l of n){let c=o.get(l.number);if(!c?.level)continue;let A=a7(c,this.unitWidth,a);t.add(l.from,l.from,Yt.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${A}`}}))}this.decorations=t.finish()}};function l_(i={}){return[Vv.of(i),o7,ai.fromClass(q2,{decorations:e=>e.decorations})]}var l7=["(include-macros)",'(apropos "def")'],Ac=class{constructor(e){let t=[OP,s_,qP(),J0.define(JP),UP(),Q0(),e2(),PP(),U0(),l_(),$S(),Dr.of(GP),Dr.of(uP),Dr.of(FP),Dr.of(Q2),Dr.of([{key:"Ctrl-Enter",run:c_(this)},{key:"Alt-Enter",run:c_(this)},{key:"Ctrl-r",run:c7},{key:"Ctrl-P",run:o=>this.prevhist()},{key:"Alt-p",run:o=>this.prevhist(),preventDefault:!0},{key:"Mod-p",run:o=>this.prevhist(),preventDefault:!0},{key:"Alt-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Mod-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Ctrl-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Ctrl-c",run:h_(this)},{key:"Ctrl-h",run:u_(this)},{key:"Alt-h",run:u_(this)},{key:"Ctrl-Shift-f",run:A_()},{key:"Alt-f",run:A_()},{key:"Alt-q",run:v2}])];this.view=new et({state:qt.create({extensions:t}),parent:e}),this.history=localStorage.getItem("history")?JSON.parse(localStorage.getItem("history")):l7||[],this.vm=new Tf(this.initrcv.bind(this)),e.addEventListener("ontouchmove",o=>o.preventDefault()),e.addEventListener("mouseenter",o=>this.getfocus(o)),e.addEventListener("focus",o=>this.getfocus()),A7(this);let n=document.querySelector("#repldiv");setTimeout(()=>n.classList.remove("repldiv0"),800),setTimeout(()=>n.classList.add("repldivtransition"),1e3),d_("hidden")}initrcv(e){e.startsWith("Gambit")||e.startsWith("GAMBEXT")?this.banner=e:e.match(":sentinel:")&&(this.vm.callback=this.rcv.bind(this))}rcv(e){this.append(e)}getfocus(e){this.focus()}reparent(e){let t=this.view.state;this.view.destroy(),this.view=new et({state:t,parent:e}),e.addEventListener("ontouchmove",n=>n.preventDefault()),e.addEventListener("mouseenter",n=>this.focus()),e.addEventListener("focus",n=>this.focus())}cfocus(){this.view.focus()}focus(){this.view.focus()}unfocus(){this.view.contentDOM.blur(),document.querySelector("#limina").focus()}insertat(e,t){let n=this.view.state.doc,o=n.length+t.length;this.view.dispatch({changes:{from:e,insert:t},selection:{anchor:o},scrollIntoView:!0})}deleterange(e,t){this.view.dispatch({changes:{from:e,to:t}})}setselection(e){this.view.dispatch({selection:{anchor:e},scrollIntoView:!0})}append(e){this.insertat(this.view.state.doc.length,e)}docstring(){return this.view.state.doc.toString()}eval(e){return this.vm.eval(e)}evalview(){let e=this.view.state.doc.toString(),t=e.lastIndexOf("> "),n=e.substring(t+2);this.append(`
`),console.warn("input.push",n),this.history.push(n),this.histcursor=this.history.length-1,localStorage.setItem("history",JSON.stringify(this.history)),this.vm.eval(n)}histcursor=0;prevhist(){this.dhist(-1)}nexthist(){this.dhist(1)}dhist(e){if(!this.history.length)return;this.histcursor+=e,this.histcursor<0&&(this.histcursor=this.history.length-1),this.histcursor==this.history.length&&(this.histcursor=0);let t=this.view.state.doc.toString(),n=t.lastIndexOf("> ");this.deleterange(n+2,t.length);let o=this.history[this.histcursor];this.insertat(n+2,o)}};function c_(i){return e=>(i.append(" "),i.evalview(),!0)}function A_(){return i=>(FA(null,document.body),!0)}var c7=i=>(console.warn("repl.reload"),window.lim.reload(),!0);function u_(i){return e=>(window.lim.home(),!0)}function h_(i){return e=>(e.contentDOM.blur(),document.querySelector("#limina").focus(),!0)}window.unfocus=h_;function $2(i){let e=document.createElement("div");return e.classList.add("replbutton"),e.innerText=i,e}function A7(i){let e=document.querySelector("#replbuttons"),t=$2("\u1403");t.addEventListener("click",()=>i.prevhist()),e.appendChild(t),t=$2("\u1401"),t.addEventListener("click",()=>i.nexthist()),e.appendChild(t),t=$2("\u808F"),t.addEventListener("click",()=>{i.evalview(),i.focus()}),e.appendChild(t)}Ac.info={version:.1,revision:1589,lastmod:"last modified: Sun Jul 16 13:41:38 2023"};function f_(i){let e=document.createElement("div");e.setAttribute("id",i),e.class="repldiv",e.style.width="600px",e.style.height="200px",document.body.appendChild(e);let t=new Ac(e);return t.div=e,t.eval('(begin (println ";;; :sentinel:"))'),t}window.newrepl=f_;function d_(i){let e=document.querySelectorAll(".cm-scroller");for(let t=0;t<e.length;t++)e[t].style.overflowX=i}window.hackscroller=d_;var wI={};fl(wI,{QCell:()=>ep,QObj:()=>Nu,_getobj:()=>Oq,_viewpub:()=>pI,croquetsession:()=>k1,downloadscene:()=>c5,getcell:()=>r5,getobj:()=>$o,getobjbyname:()=>gI,getscene:()=>P1,getsession:()=>s5,getview:()=>tp,killobj:()=>yI,loadscene:()=>Vq,lsrestorescene:()=>Xq,makeobj:()=>vI,model_setdata:()=>qF,model_setpos:()=>ZF,model_setpqs:()=>jF,model_setquat:()=>KF,model_setscale:()=>JF,objctor:()=>n5,objname:()=>t5,objs:()=>e5,objsend:()=>$F,reparentobj:()=>o5,restorescene:()=>l5,savescene:()=>a5,set_view_listener_hook:()=>zF,setdata:()=>mI,setpos:()=>VF,setpqs:()=>WF,setquat:()=>XF,setscale:()=>YF,storescene:()=>Wq,view_notify_object_changed:()=>xI,viewpub:()=>_r,vobj:()=>i5});var ks=Ns(kF());var ule=new Error("timeout while waiting for mutex to become available"),hle=new Error("mutex already locked"),fle=new Error("request for lock canceled");function AI(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function Dq(i,e){let t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);let n=AI(t);return(o,a)=>n.then(l=>a(l.transaction(e,o).objectStore(e)))}var cI;function PF(){return cI||(cI=Dq("keyval-store","keyval")),cI}function _F(i,e=PF()){return e("readonly",t=>AI(t.get(i)))}function NF(i,e,t=PF()){return t("readwrite",n=>(n.put(e,i),AI(n.transaction)))}async function FF(i){return _F(i)}async function QF(i,e){return await NF(i,e)}window.Croquet=ks;ks.App.root=!1;var _u={};window.viewobjs=_u;var GF={};window.dispatchfns=GF;var B1,ti,Lq;var ep=class extends ks.Model{init(){super.init(),ti=this,window.currentcell=this,this.objmap=new Map,this.namemap=new Map,this.subscribe(this.sessionId,"view-join",this._viewjoined),this.subscribe(this.sessionId,"view-exit",this._viewexited),this.subscribe(this.sessionId,"makeobj",this._makeobj),this.subscribe(this.sessionId,"killobj",this._killobj)}objs(){return Array.from(this.objmap.values())}getobj(e){return this.objmap.get(e)}getobjbyname(e){return this.namemap.get(e)}_viewjoined(e){this.viewid=e}_viewexited(e){this.viewid=null}_makeobj([e,t,n]){let o=this.getobjbyname(e);o||(o=Nu.create([e,t]),this.objmap.set(o.id,o),this.namemap.set(e,o));let a=Hq(n,"then die");return a&&setTimeout(()=>a(o),0),o}_killobj(e){let t=e instanceof Nu?e:this.getobj(e);this.objmap.delete(e),t&&(this.namemap.delete(t.name),t._kill())}work(e){this.$worklist||(this.$worklist=[]),this.$worklist.push(e),this.future(0).dowork()}dowork(e){try{for(;this.$worklist.length;)this.$worklist.shift()()}catch(t){window.lasterr=t,console.warn("dowork err",this.$worklist.length,e)}}static types(){return{"THREE.Color":ke}}};ep.register("QCell");var Nu=class extends ks.Model{init([e,t]){super.init(),this.data={},this.name=e,this.ctor=t,this.scale=[1,1,1],this.position=[0,0,0],this.quaternion=[0,0,0,1],this.subscribe(this.id,"setpos",this._setpos),this.subscribe(this.id,"setquat",this._setquat),this.subscribe(this.id,"setscale",this._setscale),this.subscribe(this.id,"setpqs",this._setpqs),this.subscribe(this.id,{event:"immedsetpqs",handling:"immediate"},this._setpqs),this.subscribe(this.id,"transformed",this._transformed),this.subscribe(this.id,"setdata",this._setdata),this.subscribe(this.id,"objmsg",this._objreceive),this.subscribe(this.id,"kill",this._kill),this.publish("view","syncviewobj",this.id),qobj_init_hook&&qobj_init_hook(this)}viewobj(){return _u[this.id]}objsend(e,t){_r(this.id,"objmsg",[e,t])}linkviewobj(e){return _u[this.id]=e,e.model=this,xI(this),e}buildviewobj(){let e=this.viewobj();if(e)return this.linkviewobj(e);let t=o=>(o instanceof _Scheme&&(o=_foreign2host(o)),this.linkviewobj(o),o.modelsync=l=>this.modelsync(l),setTimeout(()=>{this.data&&this.data.parentid&&$o(this.data.parentid)?setTimeout(()=>{let l=$o(this.data.parentid);l&&l.viewobj().add(o)},500):this.data&&this.data.parentname&&$o(this.data.parentname)?setTimeout(()=>{let l=gI(this.data.parentname);l&&l.viewobj().add(o)},500):(lim.scene.add(o),o.twin&&lim.cssscene.add(o.twin))},5),o),n=(0,eval)(this.ctor)(this);n instanceof Promise?n.then(t):t(n)}kill(){yI(this)}killviewobj(){delete _u[this.id]}destroy(){super.destroy()}viewobjsync(){let e=this.viewobj();e.position.set(...this.position),e.quaternion.set(...this.quaternion),e.scale.set(...this.scale)}modelsync(e){let t=this.viewobj(),n=t.position.toArray(),o=t.quaternion.toArray(),a=t.scale.toArray(),l=1e-5,c=OF(n,this.position)>l,A=Math.abs(Qq(o,this.quaternion))>l*.001,u=OF(a,this.scale)>l;if(e||c||A||u){let h=[c||e?n:void 0,A?o:void 0,u?a:void 0];this.$positiondirty=0,this.$quaterniondirty=0,this.$scaledirty=0,dI(this,this.id,"setpqs",h)}}syncdirty(e){let t=this.$positiondirty,n=this.$quaterniondirty,o=this.$scaledirty;if(e||t||n||o){let a=[t||e?this.position:void 0,n||e?this.quaternion:void 0,o||e?this.scale:void 0];this.$positiondirty=0,this.$quaterniondirty=0,this.$scaledirty=0,dI(this,this.id,"setpqs",a)}}_kill(){let e=this.viewobj();e&&e.twin&&lim.cssscene.remove(e.twin),lim.scene.remove(e),qobj_destroy_hook&&qobj_destroy_hook(this),this.killviewobj(),this.destroy()}_setdata(e){e&&e._replace?(delete e._replace,this.data=e):(this.data=this.data||{},Object.assign(this.data,e)),this.publish("view","datachanged",this.id)}$ndispatch=0;_objreceive([e,t]){error("_objreceive fuck off"),++this.$ndispatch;let n=GF[this.id]||qobj_dispatch,o=n(this.$ndispatch,this,e,t||!1)}_setpqs([e,t,n]){e&&(this.position=e,this.$positiondirty=1),t&&(this.quaternion=t,this.$quaterniondirty=1),n&&(this.scale=n,this.$scaledirty=1),this.transformed()}_setpos(e){this.position=e,this.$positiondirty=1,this.transformed()}_setquat(e){this.quaternion=e,this.$quaterniondirty=1,this.transformed()}_setscale(e){this.scale=e,this.$scaledirty=1,this.transformed()}_transformed(){this.transformed()}transformed(){try{this.publish("view","transformchanged",this.id)}catch(e){console.warn("transformed err",window.lasterr=e)}}work(e,t){ti.work(()=>e(this),t||"cellwork")}};Nu.register("QObj");var T1,D1;function UF(i,e){let t=Date.now(),n=new Y,o=new Lt;return function(a){let l=i.position,c=i.quaternion,A=Date.now();A-t<51||h();function h(){let f,d,p=1e-5;l.distanceToSquared(n)>p&&(f=l.toArray(),n.copy(l)),Math.abs(c.angleTo(o))>p*.01&&(d=c.toArray(),o.copy(c)),(f||d)&&(t=A,_r(e.id,"setpqs",d?[f,d]:[f]),uI&&uI(f,d,tp().now()))}}}var uI=(i,e,t)=>console.warn("vlh");function zF(i){uI=i}window.set_view_listener_hook=zF;var hI=class extends ks.View{constructor(e){super(e),this.cell=e,ti=e,B1=this,this.subscribe(this.viewId,"synced",this._synced),this.subscribe("view","datachanged",this._ondatachanged),this.subscribe("view","transformchanged",this._ontransformchanged),this.subscribe("view","syncviewobj",this._syncviewobj),this.setup(),this.cell.objs().forEach(n=>n.buildviewobj());let t=window.view_init_hook;t&&t(this)}_synced(e){this.$lastsync=this.now()}detach(){super.detach(),B1=null;let e=window.view_detach_hook;e&&e(this)}setup(){let e=this.cell.getobjbyname("f0");e&&(lim.orbitcontrols&&(T1&&lim.orbitcontrols.removeEventListener("change",T1),T1=UF(lim.camera,e),lim.orbitcontrols.addEventListener("change",T1)),D1&&lim.removeEventListener("viewchange",D1),D1=UF(lim.camera,e),lim.addEventListener("viewchange",D1))}notify_object_changed(e){this.publish("view","transformchanged",e.id),this.publish("view","datachanged",e.id)}_syncviewobj(e){this.cell.getobj(e).buildviewobj()}_ondatachanged(e){let t=_u[e];if(!t)return;let n=this.cell.getobj(e);t.ondatachanged&&t.ondatachanged(n),default_object_data_changed(n)}_ontransformchanged(e){let t=this.cell.getobj(e);if(!t)return console.warn("_ontransformchanged wtf",e);let n=t.viewobj();n&&(n.position.set(...t.position),n.quaternion.set(...t.quaternion),n.scale.set(...t.scale),n.ontransformchanged&&n.ontransformchanged(t))}},fI=60/2,Rq=50;function kq(i){let e=fI;return fI=i,e}window.setburstsize=kq;function HF(i){let e=!1,t=[],n=function(){if(t.length&&!e){e=!0;for(let o=0;o<fI&&t.length;o++)t.shift().call();setTimeout(function(){e=!1,n()},Rq)}};return function(){t.push(i.bind(this,...arguments)),n()}}function pI(i,e,t){let n=tp();return n&&n.publish(i,e,t)}var Pq=HF(pI);function _r(i,e,t){return i=="view"||i==B1.viewId?pI(i,e,t):Pq(i,e,t)}window.viewpub=_r;function _q(i,e,t,n){i.future(0).publish(e,t,n)}var dI=HF(_q);window.objpub=dI;function mI(i,e){return _r(i.id,"setdata",e)}function WF(i,e,t,n){_r(i.id,"setpqs",[e,t,n])}function VF(i,e){_r(i.id,"setpos",e)}function XF(i,e){_r(i.id,"setquat",e)}function YF(i,e){_r(i.id,"setscale",e)}function Fu(i){return ti.work(i)}window.cellwork=Fu;function ZF(i,e){Fu(()=>{i.publish(i.id,"setpos",e),i.future(0).syncdirty()})}function KF(i,e){Fu(()=>{i.publish(i.id,"setquat",e),i.future(0).syncdirty()})}function JF(i,e){Fu(()=>{i.publish(i.id,"setscale",e),i.future(0).syncdirty()})}function jF(i,e,t,n){Fu(()=>{i.publish(i.id,"setpqs",[e,t,n]),i.future(0).syncdirty()})}function qF(i,e){Fu(()=>{i.publish(i.id,"setdata",e),i.future(0).syncdirty()})}window.model_setpos=ZF;window.model_setquat=KF;window.model_setscale=JF;window.model_setdata=qF;window.model_setpqs=jF;window.setdata=mI;window.setpqs=WF;window.setpos=VF;window.setquat=XF;window.setscale=YF;function $F(i,e,t){_r(i.id,"objmsg",[e,t])}window.objsend=$F;function OF(i,e){let t=i[0]-e[0],n=i[1]-e[1],o=i[2]-e[2];return t*t+n*n+o*o}function Nq(i,e,t){return Math.max(e,Math.min(t,i))}function Fq(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]+i[3]*e[3]}function Qq(i,e){return 2*Math.acos(Math.abs(Nq(Fq(i,e),-1,1)))}function Uq(i){document.onkeydown=e=>{if(!(e.ctrlKey||e.altKey||e.metaKey)||e.repeat)return;let t=i[e.key];t&&t(e)}}Uq({t:()=>lim.composer=lim.composer?!1:lim.composer0invert(),z:()=>console.warn("fuck off")});function k1(){let i="fuck",e="aym4NwIKf5RWIig-kfWw2Q";ks.Session.join({appId:"com.gmail.zeroish.jerk",apiKey:"11AxeqxgNgmDnbBOgP867IG08ghJzFcsHhtHDgjAs",name:i,password:e,sdebug:["snapshot"],xdebug:["snapshot","classes","session","messages","data","hashing"],model:ep,view:hI}).then(t=>{window.currentsession=t,window.currentcell=ti})}window.croquetsession=k1;window.currentcell=!1;function e5(i){return i=i||ti,i.objs()}function t5(i){return i.name}function n5(i){return i.ctor}function $o(i){return ti.getobjbyname(i)||ti.getobj(i)||!1}function Oq(i){return ti.getobj(i)||!1}function gI(i){return ti.getobjbyname(i)||!1}function i5(i){let e=$o(i);return _u[e.id]||!1}function tp(){return B1||!1}function r5(){return ti||!1}function s5(){return Lq||!1}var L1={},Gq=0;window.callbacks=L1;function zq(i){let e="cb#"+Gq++;return L1[e]=i,e}function Hq(i,e){let t=L1[i];return e&&delete L1[i],t}function vI(i,e,t){let n=zq(t);return _r(ti.sessionId,"makeobj",[i,e,n])}function yI(i){return _r(ti.sessionId,"killobj",i.id)}function o5(i,e){if(!e.data)return;let t=i.data&&i.data.parentid;if(t&&$o(t)){let n=$o(t).data.children;n instanceof Set&&n.has(i.id)&&n.delete(i.id)}if(i.data.parentid=e.id,e.data.children instanceof Set||(e.data.children=new Set),e.data.children.add(i.id),e.viewobj()&&i.viewobj())return e.viewobj().add(i.viewobj())}window.reparentobj=o5;window.makeobj=vI;window.killobj=yI;window.getview=tp;window.getcell=r5;window.getsession=s5;window.objs=e5;window.obj=$o;window.getobj=$o;window.getobjbyname=gI;window.objname=t5;window.objctor=n5;window.vobj=i5;function R1(i){return i=i||ti,i.objs().map(e=>({name:e.name,ctor:e.ctor,data:e.data,position:e.position,quaternion:e.quaternion,scale:e.scale}))}function Wq(i,e){e=e||ti,FB.fsuploadstring(i,JSON.stringify(R1(e)))}async function Vq(i,e){e=e||ti;let t=JSON.parse(await FB.fsgetstring(i));return _1(t),t}function a5(i,e){e=e||ti,localStorage.setItem(i,JSON.stringify(R1(e))),QF(i,JSON.stringify(R1(e)))}async function P1(i){return JSON.parse(await FF(i))}async function l5(i,e){e=e||ti;let t=await P1(i);return _1(t),t}function Xq(i,e){e=e||ti;let t=JSON.parse(localStorage.getItem(i));return _1(t),t}function _1(i){let e=(t,n,o,a)=>{_r(t.id,"setpqs",[n,o,a])};i.forEach(t=>{let n=t.position,o=t.quaternion,a=t.scale,l=t.data,c=A=>{mI(A,l),e(A,n,o,a)};vI(t.name,t.ctor,c)})}async function c5(i){let e=await P1(i),t=document.createElement("a"),n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4));console.warn(n),t.setAttribute("href",n),t.setAttribute("download",`${i}.lmnl`),t.click()}window.scenerep=R1;window.savescene=a5;window.getscene=P1;window.restorescene=l5;window.downloadscene=c5;window.rescene=_1;function xI(i){tp().notify_object_changed(i)}window.view_notify_object_changed=xI;function Yq(i){return i instanceof Object}window.isobject=Yq;var IM={};fl(IM,{box:()=>GU,cavegen:()=>NU,cbox:()=>VU,css3dbox:()=>OU,css3dobj:()=>vy,cylinder:()=>KU,sball:()=>UU,sculpty:()=>QU,softxel:()=>FU,sogltf:()=>zU,soknot:()=>WU,sopoints:()=>XU,sorm:()=>HU,sotext:()=>YU,splinetube:()=>ZU,splinetube0:()=>Vne});var F1=class extends Xe{constructor(e,t,n=!1,o=!1,a=1e4){let l=new qe;super(l,t),this.isMarchingCubes=!0;let c=this,A=new Float32Array(12*3),u=new Float32Array(12*3),h=new Float32Array(12*3);this.enableUvs=n,this.enableColors=o,this.init=function(I){this.resolution=I,this.isolation=80,this.size=I,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;let v=a*3;this.positionArray=new Float32Array(v*3);let E=new it(this.positionArray,3);E.setUsage(RA),l.setAttribute("position",E),this.normalArray=new Float32Array(v*3);let S=new it(this.normalArray,3);if(S.setUsage(RA),l.setAttribute("normal",S),this.enableUvs){this.uvArray=new Float32Array(v*2);let C=new it(this.uvArray,2);C.setUsage(RA),l.setAttribute("uv",C)}if(this.enableColors){this.colorArray=new Float32Array(v*3);let C=new it(this.colorArray,3);C.setUsage(RA),l.setAttribute("color",C)}l.boundingSphere=new Xt(new Y,1)};function f(I,v,E){return I+(v-I)*E}function d(I,v,E,S,C,M,D,T,B,R){let P=(E-D)/(T-D),_=c.normal_cache;A[v+0]=S+P*c.delta,A[v+1]=C,A[v+2]=M,u[v+0]=f(_[I+0],_[I+3],P),u[v+1]=f(_[I+1],_[I+4],P),u[v+2]=f(_[I+2],_[I+5],P),h[v+0]=f(c.palette[B*3+0],c.palette[R*3+0],P),h[v+1]=f(c.palette[B*3+1],c.palette[R*3+1],P),h[v+2]=f(c.palette[B*3+2],c.palette[R*3+2],P)}function p(I,v,E,S,C,M,D,T,B,R){let P=(E-D)/(T-D),_=c.normal_cache;A[v+0]=S,A[v+1]=C+P*c.delta,A[v+2]=M;let Q=I+c.yd*3;u[v+0]=f(_[I+0],_[Q+0],P),u[v+1]=f(_[I+1],_[Q+1],P),u[v+2]=f(_[I+2],_[Q+2],P),h[v+0]=f(c.palette[B*3+0],c.palette[R*3+0],P),h[v+1]=f(c.palette[B*3+1],c.palette[R*3+1],P),h[v+2]=f(c.palette[B*3+2],c.palette[R*3+2],P)}function m(I,v,E,S,C,M,D,T,B,R){let P=(E-D)/(T-D),_=c.normal_cache;A[v+0]=S,A[v+1]=C,A[v+2]=M+P*c.delta;let Q=I+c.zd*3;u[v+0]=f(_[I+0],_[Q+0],P),u[v+1]=f(_[I+1],_[Q+1],P),u[v+2]=f(_[I+2],_[Q+2],P),h[v+0]=f(c.palette[B*3+0],c.palette[R*3+0],P),h[v+1]=f(c.palette[B*3+1],c.palette[R*3+1],P),h[v+2]=f(c.palette[B*3+2],c.palette[R*3+2],P)}function b(I){let v=I*3;c.normal_cache[v]===0&&(c.normal_cache[v+0]=c.field[I-1]-c.field[I+1],c.normal_cache[v+1]=c.field[I-c.yd]-c.field[I+c.yd],c.normal_cache[v+2]=c.field[I-c.zd]-c.field[I+c.zd])}function g(I,v,E,S,C){let M=S+1,D=S+c.yd,T=S+c.zd,B=M+c.yd,R=M+c.zd,P=S+c.yd+c.zd,_=M+c.yd+c.zd,Q=0,W=c.field[S],U=c.field[M],H=c.field[D],O=c.field[B],F=c.field[T],z=c.field[R],k=c.field[P],X=c.field[_];W<C&&(Q|=1),U<C&&(Q|=2),H<C&&(Q|=8),O<C&&(Q|=4),F<C&&(Q|=16),z<C&&(Q|=32),k<C&&(Q|=128),X<C&&(Q|=64);let te=Zq[Q];if(te===0)return 0;let ie=c.delta,re=I+ie,se=v+ie,oe=E+ie;te&1&&(b(S),b(M),d(S*3,0,C,I,v,E,W,U,S,M)),te&2&&(b(M),b(B),p(M*3,3,C,re,v,E,U,O,M,B)),te&4&&(b(D),b(B),d(D*3,6,C,I,se,E,H,O,D,B)),te&8&&(b(S),b(D),p(S*3,9,C,I,v,E,W,H,S,D)),te&16&&(b(T),b(R),d(T*3,12,C,I,v,oe,F,z,T,R)),te&32&&(b(R),b(_),p(R*3,15,C,re,v,oe,z,X,R,_)),te&64&&(b(P),b(_),d(P*3,18,C,I,se,oe,k,X,P,_)),te&128&&(b(T),b(P),p(T*3,21,C,I,v,oe,F,k,T,P)),te&256&&(b(S),b(T),m(S*3,24,C,I,v,E,W,F,S,T)),te&512&&(b(M),b(R),m(M*3,27,C,re,v,E,U,z,M,R)),te&1024&&(b(B),b(_),m(B*3,30,C,re,se,E,O,X,B,_)),te&2048&&(b(D),b(P),m(D*3,33,C,I,se,E,H,k,D,P)),Q<<=4;let le,be,De,pe=0,K=0;for(;N1[Q+K]!=-1;)le=Q+K,be=le+1,De=le+2,w(A,u,h,3*N1[le],3*N1[be],3*N1[De]),K+=3,pe++;return pe}function w(I,v,E,S,C,M){let D=c.count*3;if(c.positionArray[D+0]=I[S],c.positionArray[D+1]=I[S+1],c.positionArray[D+2]=I[S+2],c.positionArray[D+3]=I[C],c.positionArray[D+4]=I[C+1],c.positionArray[D+5]=I[C+2],c.positionArray[D+6]=I[M],c.positionArray[D+7]=I[M+1],c.positionArray[D+8]=I[M+2],c.material.flatShading===!0){let T=(v[S+0]+v[C+0]+v[M+0])/3,B=(v[S+1]+v[C+1]+v[M+1])/3,R=(v[S+2]+v[C+2]+v[M+2])/3;c.normalArray[D+0]=T,c.normalArray[D+1]=B,c.normalArray[D+2]=R,c.normalArray[D+3]=T,c.normalArray[D+4]=B,c.normalArray[D+5]=R,c.normalArray[D+6]=T,c.normalArray[D+7]=B,c.normalArray[D+8]=R}else c.normalArray[D+0]=v[S+0],c.normalArray[D+1]=v[S+1],c.normalArray[D+2]=v[S+2],c.normalArray[D+3]=v[C+0],c.normalArray[D+4]=v[C+1],c.normalArray[D+5]=v[C+2],c.normalArray[D+6]=v[M+0],c.normalArray[D+7]=v[M+1],c.normalArray[D+8]=v[M+2];if(c.enableUvs){let T=c.count*2;c.uvArray[T+0]=I[S+0],c.uvArray[T+1]=I[S+2],c.uvArray[T+2]=I[C+0],c.uvArray[T+3]=I[C+2],c.uvArray[T+4]=I[M+0],c.uvArray[T+5]=I[M+2]}c.enableColors&&(c.colorArray[D+0]=E[S+0],c.colorArray[D+1]=E[S+1],c.colorArray[D+2]=E[S+2],c.colorArray[D+3]=E[C+0],c.colorArray[D+4]=E[C+1],c.colorArray[D+5]=E[C+2],c.colorArray[D+6]=E[M+0],c.colorArray[D+7]=E[M+1],c.colorArray[D+8]=E[M+2]),c.count+=3}this.addBall=function(I,v,E,S,C,M){let D=Math.sign(S);S=Math.abs(S);let T=M!=null,B=new ke(I,v,E);if(T)try{B=M instanceof ke?M:Array.isArray(M)?new ke(Math.min(Math.abs(M[0]),1),Math.min(Math.abs(M[1]),1),Math.min(Math.abs(M[2]),1)):new ke(M)}catch{B=new ke(I,v,E)}let R=this.size*Math.sqrt(S/C),P=E*this.size,_=v*this.size,Q=I*this.size,W=Math.floor(P-R);W<1&&(W=1);let U=Math.floor(P+R);U>this.size-1&&(U=this.size-1);let H=Math.floor(_-R);H<1&&(H=1);let O=Math.floor(_+R);O>this.size-1&&(O=this.size-1);let F=Math.floor(Q-R);F<1&&(F=1);let z=Math.floor(Q+R);z>this.size-1&&(z=this.size-1);let k,X,te,ie,re,se,oe,le,be,De,pe;for(te=W;te<U;te++)for(re=this.size2*te,le=te/this.size-E,be=le*le,X=H;X<O;X++)for(ie=re+this.size*X,oe=X/this.size-v,De=oe*oe,k=F;k<z;k++)if(se=k/this.size-I,pe=S/(1e-6+se*se+De+be)-C,pe>0){this.field[ie+k]+=pe*D;let K=Math.sqrt((k-Q)*(k-Q)+(X-_)*(X-_)+(te-P)*(te-P))/R,we=1-K*K*K*(K*(K*6-15)+10);this.palette[(ie+k)*3+0]+=B.r*we,this.palette[(ie+k)*3+1]+=B.g*we,this.palette[(ie+k)*3+2]+=B.b*we}},this.addPlaneX=function(I,v){let E=this.size,S=this.yd,C=this.zd,M=this.field,D,T,B,R,P,_,Q,W=E*Math.sqrt(I/v);for(W>E&&(W=E),D=0;D<W;D++)if(_=D/E,R=_*_,P=I/(1e-4+R)-v,P>0)for(T=0;T<E;T++)for(Q=D+T*S,B=0;B<E;B++)M[C*B+Q]+=P},this.addPlaneY=function(I,v){let E=this.size,S=this.yd,C=this.zd,M=this.field,D,T,B,R,P,_,Q,W,U=E*Math.sqrt(I/v);for(U>E&&(U=E),T=0;T<U;T++)if(_=T/E,R=_*_,P=I/(1e-4+R)-v,P>0)for(Q=T*S,D=0;D<E;D++)for(W=Q+D,B=0;B<E;B++)M[C*B+W]+=P},this.addPlaneZ=function(I,v){let E=this.size,S=this.yd,C=this.zd,M=this.field,D,T,B,R,P,_,Q,W,U=E*Math.sqrt(I/v);for(U>E&&(U=E),B=0;B<U;B++)if(_=B/E,R=_*_,P=I/(1e-4+R)-v,P>0)for(Q=C*B,T=0;T<E;T++)for(W=Q+T*S,D=0;D<E;D++)M[W+D]+=P},this.setCell=function(I,v,E,S){let C=this.size2*E+this.size*v+I;this.field[C]=S},this.getCell=function(I,v,E){let S=this.size2*E+this.size*v+I;return this.field[S]},this.blur=function(I=1){let v=this.field,E=v.slice(),S=this.size,C=this.size2;for(let M=0;M<S;M++)for(let D=0;D<S;D++)for(let T=0;T<S;T++){let B=C*T+S*D+M,R=E[B],P=1;for(let _=-1;_<=1;_+=2){let Q=_+M;if(!(Q<0||Q>=S))for(let W=-1;W<=1;W+=2){let U=W+D;if(!(U<0||U>=S))for(let H=-1;H<=1;H+=2){let O=H+T;if(O<0||O>=S)continue;let F=C*O+S*U+Q,z=E[F];P++,R+=I*(z-R)/P}}}v[B]=R}},this.reset=function(){for(let I=0;I<this.size3;I++)this.normal_cache[I*3]=0,this.field[I]=0,this.palette[I*3]=this.palette[I*3+1]=this.palette[I*3+2]=0},this.update=function(){this.count=0;let I=this.size-2;for(let v=1;v<I;v++){let E=this.size2*v,S=(v-this.halfsize)/this.halfsize;for(let C=1;C<I;C++){let M=E+this.size*C,D=(C-this.halfsize)/this.halfsize;for(let T=1;T<I;T++){let B=(T-this.halfsize)/this.halfsize,R=M+T;g(B,D,S,R,this.isolation)}}}this.geometry.setDrawRange(0,this.count),l.getAttribute("position").needsUpdate=!0,l.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(l.getAttribute("uv").needsUpdate=!0),this.enableColors&&(l.getAttribute("color").needsUpdate=!0),this.count/3>a&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}},Zq=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),N1=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var X1={};fl(X1,{GlyphsGeometry:()=>W1,Text:()=>Ou,configureTextBuilder:()=>b$,createTextDerivedMaterial:()=>_5,dumpSDFTextures:()=>I$,getCaretAtPoint:()=>Q$,getSelectionRects:()=>U$,preloadFont:()=>LI,typesetterWorkerModule:()=>P5});function Kq(){var i=Object.create(null);function e(o,a){var l=o.id,c=o.name,A=o.dependencies;A===void 0&&(A=[]);var u=o.init;u===void 0&&(u=function(){});var h=o.getTransferables;if(h===void 0&&(h=null),!i[l])try{A=A.map(function(d){return d&&d.isWorkerModule&&(e(d,function(p){if(p instanceof Error)throw p}),d=i[d.id].value),d}),u=n("<"+c+">.init",u),h&&(h=n("<"+c+">.getTransferables",h));var f=null;typeof u=="function"?f=u.apply(void 0,A):console.error("worker module init function failed to rehydrate"),i[l]={id:l,value:f,getTransferables:h},a(f)}catch(d){d&&d.noLog||console.error(d),a(d)}}function t(o,a){var l,c=o.id,A=o.args;(!i[c]||typeof i[c].value!="function")&&a(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var u=(l=i[c]).value.apply(l,A);u&&typeof u.then=="function"?u.then(h,function(f){return a(f instanceof Error?f:new Error(""+f))}):h(u)}catch(f){a(f)}function h(f){try{var d=i[c].getTransferables&&i[c].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),a(f,d)}catch(p){console.error(p),a(p)}}}function n(o,a){var l=void 0;self.troikaDefine=function(A){return l=A};var c=URL.createObjectURL(new Blob(["/** "+o.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(A){console.error(A)}return URL.revokeObjectURL(c),delete self.troikaDefine,l}self.addEventListener("message",function(o){var a=o.data,l=a.messageId,c=a.action,A=a.data;try{c==="registerModule"&&e(A,function(u){u instanceof Error?postMessage({messageId:l,success:!1,error:u.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof u=="function"}})}),c==="callModule"&&t(A,function(u,h){u instanceof Error?postMessage({messageId:l,success:!1,error:u.message}):postMessage({messageId:l,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:l,success:!1,error:u.stack})}})}function Jq(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(o){if(typeof o=="function")return o.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(a){return a&&a._getInitResult?a._getInitResult():a}):[];var o=Promise.all(t).then(function(a){return n.apply(null,a)});return e._getInitResult=function(){return o},o},e}var u5=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return u5=function(){return i},i},jq=0,qq=0,bI=!1,np=Object.create(null),ip=Object.create(null),CI=Object.create(null);function Qu(i){if((!i||typeof i.init!="function")&&!bI)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,o=i.workerId;if(!u5())return Jq(i);o==null&&(o="#default");var a="workerModule"+ ++jq,l=i.name||a,c=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(bI=!0,u=Qu({workerId:o,name:"<"+l+"> function dependency: "+u.name,init:`function(){return (
`+Q1(u)+`
)}`}),bI=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function A(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];if(!c){c=A5(o,"registerModule",A.workerModuleData);var f=function(){c=null,ip[o].delete(f)};(ip[o]||(ip[o]=new Set)).add(f)}return c.then(function(d){var p=d.isCallable;if(p)return A5(o,"callModule",{id:a,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return A.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:e,init:Q1(t),getTransferables:n&&Q1(n)},A}function h5(i){ip[i]&&ip[i].forEach(function(e){e()}),np[i]&&(np[i].terminate(),delete np[i])}function Q1(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function $q(i){var e=np[i];if(!e){var t=Q1(Kq);e=np[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var o=n.data,a=o.messageId,l=CI[a];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete CI[a],l(o)}}return e}function A5(i,e,t){return new Promise(function(n,o){var a=++qq;CI[a]=function(l){l.success?n(l.result):o(new Error("Error in worker "+e+" call: "+l.error))},$q(i).postMessage({messageId:a,action:e,data:t})})}function SI(){var i=function(e){function t(F,z,k,X,te,ie,re,se){var oe=1-re;se.x=oe*oe*F+2*oe*re*k+re*re*te,se.y=oe*oe*z+2*oe*re*X+re*re*ie}function n(F,z,k,X,te,ie,re,se,oe,le){var be=1-oe;le.x=be*be*be*F+3*be*be*oe*k+3*be*oe*oe*te+oe*oe*oe*re,le.y=be*be*be*z+3*be*be*oe*X+3*be*oe*oe*ie+oe*oe*oe*se}function o(F,z){for(var k=/([MLQCZ])([^MLQCZ]*)/g,X,te,ie,re,se;X=k.exec(F);){var oe=X[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(le){return parseFloat(le)});switch(X[1]){case"M":re=te=oe[0],se=ie=oe[1];break;case"L":(oe[0]!==re||oe[1]!==se)&&z("L",re,se,re=oe[0],se=oe[1]);break;case"Q":{z("Q",re,se,re=oe[2],se=oe[3],oe[0],oe[1]);break}case"C":{z("C",re,se,re=oe[4],se=oe[5],oe[0],oe[1],oe[2],oe[3]);break}case"Z":(re!==te||se!==ie)&&z("L",re,se,te,ie);break}}}function a(F,z,k){k===void 0&&(k=16);var X={x:0,y:0};o(F,function(te,ie,re,se,oe,le,be,De,pe){switch(te){case"L":z(ie,re,se,oe);break;case"Q":{for(var K=ie,we=re,me=1;me<k;me++)t(ie,re,le,be,se,oe,me/(k-1),X),z(K,we,X.x,X.y),K=X.x,we=X.y;break}case"C":{for(var fe=ie,de=re,Ne=1;Ne<k;Ne++)n(ie,re,le,be,De,pe,se,oe,Ne/(k-1),X),z(fe,de,X.x,X.y),fe=X.x,de=X.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",A=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(F,z){var k=F.getContext?F.getContext("webgl",u):F,X=A.get(k);if(!X){let be=function(fe){var de=ie[fe];if(!de&&(de=ie[fe]=k.getExtension(fe),!de))throw new Error(fe+" not supported");return de},De=function(fe,de){var Ne=k.createShader(de);return k.shaderSource(Ne,fe),k.compileShader(Ne),Ne},pe=function(fe,de,Ne,ve){if(!re[fe]){var Se={},Pe={},Ie=k.createProgram();k.attachShader(Ie,De(de,k.VERTEX_SHADER)),k.attachShader(Ie,De(Ne,k.FRAGMENT_SHADER)),k.linkProgram(Ie),re[fe]={program:Ie,transaction:function(j){k.useProgram(Ie),j({setUniform:function(Ae,Be){for(var Re=[],Ee=arguments.length-2;Ee-- >0;)Re[Ee]=arguments[Ee+2];var Fe=Pe[Be]||(Pe[Be]=k.getUniformLocation(Ie,Be));k["uniform"+Ae].apply(k,[Fe].concat(Re))},setAttribute:function(Ae,Be,Re,Ee,Fe){var _e=Se[Ae];_e||(_e=Se[Ae]={buf:k.createBuffer(),loc:k.getAttribLocation(Ie,Ae),data:null}),k.bindBuffer(k.ARRAY_BUFFER,_e.buf),k.vertexAttribPointer(_e.loc,Be,k.FLOAT,!1,0,0),k.enableVertexAttribArray(_e.loc),te?k.vertexAttribDivisor(_e.loc,Ee):be("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(_e.loc,Ee),Fe!==_e.data&&(k.bufferData(k.ARRAY_BUFFER,Fe,Re),_e.data=Fe)}})}}}re[fe].transaction(ve)},K=function(fe,de){oe++;try{k.activeTexture(k.TEXTURE0+oe);var Ne=se[fe];Ne||(Ne=se[fe]=k.createTexture(),k.bindTexture(k.TEXTURE_2D,Ne),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.bindTexture(k.TEXTURE_2D,Ne),de(Ne,oe)}finally{oe--}},we=function(fe,de,Ne){var ve=k.createFramebuffer();le.push(ve),k.bindFramebuffer(k.FRAMEBUFFER,ve),k.activeTexture(k.TEXTURE0+de),k.bindTexture(k.TEXTURE_2D,fe),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,fe,0);try{Ne(ve)}finally{k.deleteFramebuffer(ve),k.bindFramebuffer(k.FRAMEBUFFER,le[--le.length-1]||null)}},me=function(){ie={},re={},se={},oe=-1,le.length=0};var te=typeof WebGL2RenderingContext<"u"&&k instanceof WebGL2RenderingContext,ie={},re={},se={},oe=-1,le=[];k.canvas.addEventListener("webglcontextlost",function(fe){me(),fe.preventDefault()},!1),A.set(k,X={gl:k,isWebGL2:te,getExtension:be,withProgram:pe,withTexture:K,withTextureFramebuffer:we,handleContextLoss:me})}z(X)}function f(F,z,k,X,te,ie,re,se){re===void 0&&(re=15),se===void 0&&(se=null),h(F,function(oe){var le=oe.gl,be=oe.withProgram,De=oe.withTexture;De("copy",function(pe,K){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,te,ie,0,le.RGBA,le.UNSIGNED_BYTE,z),be("copy",l,c,function(we){var me=we.setUniform,fe=we.setAttribute;fe("aUV",2,le.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",K),le.bindFramebuffer(le.FRAMEBUFFER,se||null),le.disable(le.BLEND),le.colorMask(re&8,re&4,re&2,re&1),le.viewport(k,X,te,ie),le.scissor(k,X,te,ie),le.drawArrays(le.TRIANGLES,0,3)})})})}function d(F,z,k){var X=F.width,te=F.height;h(F,function(ie){var re=ie.gl,se=new Uint8Array(X*te*4);re.readPixels(0,0,X,te,re.RGBA,re.UNSIGNED_BYTE,se),F.width=z,F.height=k,f(re,se,0,0,X,te)})}var p=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function m(F,z,k,X,te,ie){ie===void 0&&(ie=1);var re=new Uint8Array(F*z),se=X[2]-X[0],oe=X[3]-X[1],le=[];a(k,function(fe,de,Ne,ve){le.push({x1:fe,y1:de,x2:Ne,y2:ve,minX:Math.min(fe,Ne),minY:Math.min(de,ve),maxX:Math.max(fe,Ne),maxY:Math.max(de,ve)})}),le.sort(function(fe,de){return fe.maxX-de.maxX});for(var be=0;be<F;be++)for(var De=0;De<z;De++){var pe=we(X[0]+se*(be+.5)/F,X[1]+oe*(De+.5)/z),K=Math.pow(1-Math.abs(pe)/te,ie)/2;pe<0&&(K=1-K),K=Math.max(0,Math.min(255,Math.round(K*255))),re[De*F+be]=K}return re;function we(fe,de){for(var Ne=1/0,ve=1/0,Se=le.length;Se--;){var Pe=le[Se];if(Pe.maxX+ve<=fe)break;if(fe+ve>Pe.minX&&de-ve<Pe.maxY&&de+ve>Pe.minY){var Ie=w(fe,de,Pe.x1,Pe.y1,Pe.x2,Pe.y2);Ie<Ne&&(Ne=Ie,ve=Math.sqrt(Ne))}}return me(fe,de)&&(ve=-ve),ve}function me(fe,de){for(var Ne=0,ve=le.length;ve--;){var Se=le[ve];if(Se.maxX<=fe)break;var Pe=Se.y1>de!=Se.y2>de&&fe<(Se.x2-Se.x1)*(de-Se.y1)/(Se.y2-Se.y1)+Se.x1;Pe&&(Ne+=Se.y1<Se.y2?1:-1)}return Ne!==0}}function b(F,z,k,X,te,ie,re,se,oe,le){ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0),g(F,z,k,X,te,ie,re,null,se,oe,le)}function g(F,z,k,X,te,ie,re,se,oe,le,be){ie===void 0&&(ie=1),oe===void 0&&(oe=0),le===void 0&&(le=0),be===void 0&&(be=0);for(var De=m(F,z,k,X,te,ie),pe=new Uint8Array(De.length*4),K=0;K<De.length;K++)pe[K*4+be]=De[K];f(re,pe,oe,le,F,z,1<<3-be,se)}function w(F,z,k,X,te,ie){var re=te-k,se=ie-X,oe=re*re+se*se,le=oe?Math.max(0,Math.min(1,((F-k)*re+(z-X)*se)/oe)):0,be=F-(k+le*re),De=z-(X+le*se);return be*be+De*De}var I=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:b,generateIntoFramebuffer:g}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),M=null,D=!1,T={},B=new WeakMap;function R(F){if(!D&&!W(F))throw new Error("WebGL generation not supported")}function P(F,z,k,X,te,ie,re){if(ie===void 0&&(ie=1),re===void 0&&(re=null),!re&&(re=M,!re)){var se=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!se)throw new Error("OffscreenCanvas or DOM canvas not supported");re=M=se.getContext("webgl",{depth:!1})}R(re);var oe=new Uint8Array(F*z*4);h(re,function(pe){var K=pe.gl,we=pe.withTexture,me=pe.withTextureFramebuffer;we("readable",function(fe,de){K.texImage2D(K.TEXTURE_2D,0,K.RGBA,F,z,0,K.RGBA,K.UNSIGNED_BYTE,null),me(fe,de,function(Ne){Q(F,z,k,X,te,ie,K,Ne,0,0,0),K.readPixels(0,0,F,z,K.RGBA,K.UNSIGNED_BYTE,oe)})})});for(var le=new Uint8Array(F*z),be=0,De=0;be<oe.length;be+=4)le[De++]=oe[be];return le}function _(F,z,k,X,te,ie,re,se,oe,le){ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0),Q(F,z,k,X,te,ie,re,null,se,oe,le)}function Q(F,z,k,X,te,ie,re,se,oe,le,be){ie===void 0&&(ie=1),oe===void 0&&(oe=0),le===void 0&&(le=0),be===void 0&&(be=0),R(re);var De=[];a(k,function(pe,K,we,me){De.push(pe,K,we,me)}),De=new Float32Array(De),h(re,function(pe){var K=pe.gl,we=pe.isWebGL2,me=pe.getExtension,fe=pe.withProgram,de=pe.withTexture,Ne=pe.withTextureFramebuffer,ve=pe.handleContextLoss;if(de("rawDistances",function(Se,Pe){(F!==Se._lastWidth||z!==Se._lastHeight)&&K.texImage2D(K.TEXTURE_2D,0,K.RGBA,Se._lastWidth=F,Se._lastHeight=z,0,K.RGBA,K.UNSIGNED_BYTE,null),fe("main",v,E,function(Ie){var We=Ie.setAttribute,j=Ie.setUniform,G=!we&&me("ANGLE_instanced_arrays"),Ae=!we&&me("EXT_blend_minmax");We("aUV",2,K.STATIC_DRAW,0,C),We("aLineSegment",4,K.DYNAMIC_DRAW,1,De),j.apply(void 0,["4f","uGlyphBounds"].concat(X)),j("1f","uMaxDistance",te),j("1f","uExponent",ie),Ne(Se,Pe,function(Be){K.enable(K.BLEND),K.colorMask(!0,!0,!0,!0),K.viewport(0,0,F,z),K.scissor(0,0,F,z),K.blendFunc(K.ONE,K.ONE),K.blendEquationSeparate(K.FUNC_ADD,we?K.MAX:Ae.MAX_EXT),K.clear(K.COLOR_BUFFER_BIT),we?K.drawArraysInstanced(K.TRIANGLES,0,3,De.length/4):G.drawArraysInstancedANGLE(K.TRIANGLES,0,3,De.length/4)})}),fe("post",l,S,function(Ie){Ie.setAttribute("aUV",2,K.STATIC_DRAW,0,C),Ie.setUniform("1i","tex",Pe),K.bindFramebuffer(K.FRAMEBUFFER,se),K.disable(K.BLEND),K.colorMask(be===0,be===1,be===2,be===3),K.viewport(oe,le,F,z),K.scissor(oe,le,F,z),K.drawArrays(K.TRIANGLES,0,3)})}),K.isContextLost())throw ve(),new Error("webgl context lost")})}function W(F){var z=!F||F===M?T:F.canvas||F,k=B.get(z);if(k===void 0){D=!0;var X=null;try{var te=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=P(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,F);k=ie&&te.length===ie.length&&ie.every(function(re,se){return re===te[se]}),k||(X="bad trial run results",console.info(te,ie))}catch(re){k=!1,X=re.message}X&&console.warn("WebGL SDF generation not supported:",X),D=!1,B.set(z,k)}return k}var U=Object.freeze({__proto__:null,generate:P,generateIntoCanvas:_,generateIntoFramebuffer:Q,isSupported:W});function H(F,z,k,X,te,ie){te===void 0&&(te=Math.max(X[2]-X[0],X[3]-X[1])/2),ie===void 0&&(ie=1);try{return P.apply(U,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),m.apply(I,arguments)}}function O(F,z,k,X,te,ie,re,se,oe,le){te===void 0&&(te=Math.max(X[2]-X[0],X[3]-X[1])/2),ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0);try{return _.apply(U,arguments)}catch(be){return console.info("WebGL SDF generation failed, falling back to JS",be),b.apply(I,arguments)}}return e.forEachPathCommand=o,e.generate=H,e.generateIntoCanvas=O,e.javascript=I,e.pathToLineSegments=a,e.webgl=U,e.webglUtils=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}function e$(){var i=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},o={};n.L=1,o[1]="L",Object.keys(t).forEach(function(ve,Se){n[ve]=1<<Se+1,o[n[ve]]=ve}),Object.freeze(n);var a=n.LRI|n.RLI|n.FSI,l=n.L|n.R|n.AL,c=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,A=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,u=n.S|n.WS|n.B|a|n.PDI|A,h=null;function f(){if(!h){h=new Map;var ve=function(Pe){if(t.hasOwnProperty(Pe)){var Ie=0;t[Pe].split(",").forEach(function(We){var j=We.split("+"),G=j[0],Ae=j[1];G=parseInt(G,36),Ae=Ae?parseInt(Ae,36):0,h.set(Ie+=G,n[Pe]);for(var Be=0;Be<Ae;Be++)h.set(++Ie,n[Pe])})}};for(var Se in t)ve(Se)}}function d(ve){return f(),h.get(ve.codePointAt(0))||n.L}function p(ve){return o[d(ve)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function b(ve,Se){var Pe=36,Ie=0,We=new Map,j=Se&&new Map,G;return ve.split(",").forEach(function Ae(Be){if(Be.indexOf("+")!==-1)for(var Re=+Be;Re--;)Ae(G);else{G=Be;var Ee=Be.split(">"),Fe=Ee[0],_e=Ee[1];Fe=String.fromCodePoint(Ie+=parseInt(Fe,Pe)),_e=String.fromCodePoint(Ie+=parseInt(_e,Pe)),We.set(Fe,_e),Se&&j.set(_e,Fe)}}),{map:We,reverseMap:j}}var g,w,I;function v(){if(!g){var ve=b(m.pairs,!0),Se=ve.map,Pe=ve.reverseMap;g=Se,w=Pe,I=b(m.canonical,!1).map}}function E(ve){return v(),g.get(ve)||null}function S(ve){return v(),w.get(ve)||null}function C(ve){return v(),I.get(ve)||null}var M=n.L,D=n.R,T=n.EN,B=n.ES,R=n.ET,P=n.AN,_=n.CS,Q=n.B,W=n.S,U=n.ON,H=n.BN,O=n.NSM,F=n.AL,z=n.LRO,k=n.RLO,X=n.LRE,te=n.RLE,ie=n.PDF,re=n.LRI,se=n.RLI,oe=n.FSI,le=n.PDI;function be(ve,Se){for(var Pe=125,Ie=new Uint32Array(ve.length),We=0;We<ve.length;We++)Ie[We]=d(ve[We]);var j=new Map;function G(xi,os){var Xi=Ie[xi];Ie[xi]=os,j.set(Xi,j.get(Xi)-1),Xi&c&&j.set(c,j.get(c)-1),j.set(os,(j.get(os)||0)+1),os&c&&j.set(c,(j.get(c)||0)+1)}for(var Ae=new Uint8Array(ve.length),Be=new Map,Re=[],Ee=null,Fe=0;Fe<ve.length;Fe++)Ee||Re.push(Ee={start:Fe,end:ve.length-1,level:Se==="rtl"?1:Se==="ltr"?0:OM(Fe,!1)}),Ie[Fe]&Q&&(Ee.end=Fe,Ee=null);for(var _e=te|X|k|z|a|le|ie|Q,Ce=function(xi){return xi+(xi&1?1:2)},Z=function(xi){return xi+(xi&1?2:1)},L=0;L<Re.length;L++){Ee=Re[L];var N=[{_level:Ee.level,_override:0,_isolate:0}],V=void 0,q=0,ne=0,ae=0;j.clear();for(var J=Ee.start;J<=Ee.end;J++){var ce=Ie[J];if(V=N[N.length-1],j.set(ce,(j.get(ce)||0)+1),ce&c&&j.set(c,(j.get(c)||0)+1),ce&_e)if(ce&(te|X)){Ae[J]=V._level;var $=(ce===te?Z:Ce)(V._level);$<=Pe&&!q&&!ne?N.push({_level:$,_override:0,_isolate:0}):q||ne++}else if(ce&(k|z)){Ae[J]=V._level;var ue=(ce===k?Z:Ce)(V._level);ue<=Pe&&!q&&!ne?N.push({_level:ue,_override:ce&k?D:M,_isolate:0}):q||ne++}else if(ce&a){ce&oe&&(ce=OM(J+1,!0)===1?se:re),Ae[J]=V._level,V._override&&G(J,V._override);var xe=(ce===se?Z:Ce)(V._level);xe<=Pe&&q===0&&ne===0?(ae++,N.push({_level:xe,_override:0,_isolate:1,_isolInitIndex:J})):q++}else if(ce&le){if(q>0)q--;else if(ae>0){for(ne=0;!N[N.length-1]._isolate;)N.pop();var Ge=N[N.length-1]._isolInitIndex;Ge!=null&&(Be.set(Ge,J),Be.set(J,Ge)),N.pop(),ae--}V=N[N.length-1],Ae[J]=V._level,V._override&&G(J,V._override)}else ce&ie?(q===0&&(ne>0?ne--:!V._isolate&&N.length>1&&(N.pop(),V=N[N.length-1])),Ae[J]=V._level):ce&Q&&(Ae[J]=Ee.level);else Ae[J]=V._level,V._override&&ce!==H&&G(J,V._override)}for(var ze=[],Ze=null,Ke=Ee.start;Ke<=Ee.end;Ke++){var ot=Ie[Ke];if(!(ot&A)){var gt=Ae[Ke],rt=ot&a,Mn=ot===le;Ze&&gt===Ze._level?(Ze._end=Ke,Ze._endsWithIsolInit=rt):ze.push(Ze={_start:Ke,_end:Ke,_level:gt,_startsWithPDI:Mn,_endsWithIsolInit:rt})}}for(var Tn=[],kt=0;kt<ze.length;kt++){var Dt=ze[kt];if(!Dt._startsWithPDI||Dt._startsWithPDI&&!Be.has(Dt._start)){for(var di=[Ze=Dt],hn=void 0;Ze&&Ze._endsWithIsolInit&&(hn=Be.get(Ze._end))!=null;)for(var fn=kt+1;fn<ze.length;fn++)if(ze[fn]._start===hn){di.push(Ze=ze[fn]);break}for(var Qn=[],Ar=0;Ar<di.length;Ar++)for(var yi=di[Ar],ee=yi._start;ee<=yi._end;ee++)Qn.push(ee);for(var ye=Ae[Qn[0]],Te=Ee.level,ge=Qn[0]-1;ge>=0;ge--)if(!(Ie[ge]&A)){Te=Ae[ge];break}var Le=Qn[Qn.length-1],je=Ae[Le],st=Ee.level;if(!(Ie[Le]&a)){for(var at=Le+1;at<=Ee.end;at++)if(!(Ie[at]&A)){st=Ae[at];break}}Tn.push({_seqIndices:Qn,_sosType:Math.max(Te,ye)%2?D:M,_eosType:Math.max(st,je)%2?D:M})}}for(var ct=0;ct<Tn.length;ct++){var vt=Tn[ct],Ue=vt._seqIndices,ut=vt._sosType,ln=vt._eosType;if(j.get(O))for(var en=0;en<Ue.length;en++){var Wi=Ue[en];if(Ie[Wi]&O){for(var ur=ut,tn=en-1;tn>=0;tn--)if(!(Ie[Ue[tn]]&A)){ur=Ie[Ue[tn]];break}G(Wi,ur&(a|le)?U:ur)}}if(j.get(T))for(var bt=0;bt<Ue.length;bt++){var Lc=Ue[bt];if(Ie[Lc]&T)for(var dn=bt-1;dn>=-1;dn--){var _s=dn===-1?ut:Ie[Ue[dn]];if(_s&l){_s===F&&G(Lc,P);break}}}if(j.get(F))for(var Rc=0;Rc<Ue.length;Rc++){var na=Ue[Rc];Ie[na]&F&&G(na,D)}if(j.get(B)||j.get(_))for(var ho=1;ho<Ue.length-1;ho++){var Vn=Ue[ho];if(Ie[Vn]&(B|_)){for(var Vi=0,Al=0,pi=ho-1;pi>=0&&(Vi=Ie[Ue[pi]],!!(Vi&A));pi--);for(var ul=ho+1;ul<Ue.length&&(Al=Ie[Ue[ul]],!!(Al&A));ul++);Vi===Al&&(Ie[Vn]===B?Vi===T:Vi&(T|P))&&G(Vn,Vi)}}if(j.get(T))for(var hl=0;hl<Ue.length;hl++){var gp=Ue[hl];if(Ie[gp]&T){for(var vp=hl-1;vp>=0&&Ie[Ue[vp]]&(R|A);vp--)G(Ue[vp],T);for(var yp=hl+1;yp<Ue.length&&Ie[Ue[yp]]&(R|A);yp++)G(Ue[yp],T)}}if(j.get(R)||j.get(B)||j.get(_))for(var th=0;th<Ue.length;th++){var DM=Ue[th];if(Ie[DM]&(R|B|_)){G(DM,U);for(var xp=th-1;xp>=0&&Ie[Ue[xp]]&A;xp--)G(Ue[xp],U);for(var wp=th+1;wp<Ue.length&&Ie[Ue[wp]]&A;wp++)G(Ue[wp],U)}}if(j.get(T))for(var by=0,BM=ut;by<Ue.length;by++){var LM=Ue[by],Cy=Ie[LM];Cy&T?BM===M&&G(LM,M):Cy&l&&(BM=Cy)}if(j.get(c)){var nh=D|T|P,RM=nh|M,bp=[];{for(var kc=[],Pc=0;Pc<Ue.length;Pc++)if(Ie[Ue[Pc]]&c){var ih=ve[Ue[Pc]],kM=void 0;if(E(ih)!==null)if(kc.length<63)kc.push({char:ih,seqIndex:Pc});else break;else if((kM=S(ih))!==null)for(var rh=kc.length-1;rh>=0;rh--){var Sy=kc[rh].char;if(Sy===kM||Sy===S(C(ih))||E(C(Sy))===ih){bp.push([kc[rh].seqIndex,Pc]),kc.length=rh;break}}}bp.sort(function(xi,os){return xi[0]-os[0]})}for(var Ey=0;Ey<bp.length;Ey++){for(var PM=bp[Ey],sh=PM[0],Cp=PM[1],_M=!1,ss=0,Iy=sh+1;Iy<Cp;Iy++){var My=Ue[Iy];if(Ie[My]&RM){_M=!0;var NM=Ie[My]&nh?D:M;if(NM===_c(My)){ss=NM;break}}}if(_M&&!ss){ss=ut;for(var Ty=sh-1;Ty>=0;Ty--){var Sp=Ue[Ty];if(Ie[Sp]&RM){var FM=Ie[Sp]&nh?D:M;FM!==_c(Sp)?ss=FM:ss=_c(Sp);break}}}if(ss){if(Ie[Ue[sh]]=Ie[Ue[Cp]]=ss,ss!==_c(Ue[sh])){for(var oh=sh+1;oh<Ue.length;oh++)if(!(Ie[Ue[oh]]&A)){d(ve[Ue[oh]])&O&&(Ie[Ue[oh]]=ss);break}}if(ss!==_c(Ue[Cp])){for(var ah=Cp+1;ah<Ue.length;ah++)if(!(Ie[Ue[ah]]&A)){d(ve[Ue[ah]])&O&&(Ie[Ue[ah]]=ss);break}}}}for(var ia=0;ia<Ue.length;ia++)if(Ie[Ue[ia]]&c){for(var QM=ia,Dy=ia,By=ut,lh=ia-1;lh>=0;lh--)if(Ie[Ue[lh]]&A)QM=lh;else{By=Ie[Ue[lh]]&nh?D:M;break}for(var UM=ln,ch=ia+1;ch<Ue.length;ch++)if(Ie[Ue[ch]]&(c|A))Dy=ch;else{UM=Ie[Ue[ch]]&nh?D:M;break}for(var Ep=QM;Ep<=Dy;Ep++)Ie[Ue[Ep]]=By===UM?By:_c(Ue[Ep]);ia=Dy}}}for(var hr=Ee.start;hr<=Ee.end;hr++){var $U=Ae[hr],Ip=Ie[hr];if($U&1?Ip&(M|T|P)&&Ae[hr]++:Ip&D?Ae[hr]++:Ip&(P|T)&&(Ae[hr]+=2),Ip&A&&(Ae[hr]=hr===0?Ee.level:Ae[hr-1]),hr===Ee.end||d(ve[hr])&(W|Q))for(var Mp=hr;Mp>=0&&d(ve[Mp])&u;Mp--)Ae[Mp]=Ee.level}}return{levels:Ae,paragraphs:Re};function OM(xi,os){for(var Xi=xi;Xi<ve.length;Xi++){var ra=Ie[Xi];if(ra&(D|F))return 1;if(ra&(Q|M)||os&&ra===le)return 0;if(ra&a){var GM=e4(Xi);Xi=GM===-1?ve.length:GM}}return 0}function e4(xi){for(var os=1,Xi=xi+1;Xi<ve.length;Xi++){var ra=Ie[Xi];if(ra&Q)break;if(ra&le){if(--os===0)return Xi}else ra&a&&os++}return-1}function _c(xi){return Ae[xi]&1?D:M}}var De="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",pe;function K(){if(!pe){var ve=b(De,!0),Se=ve.map,Pe=ve.reverseMap;Pe.forEach(function(Ie,We){Se.set(We,Ie)}),pe=Se}}function we(ve){return K(),pe.get(ve)||null}function me(ve,Se,Pe,Ie){var We=ve.length;Pe=Math.max(0,Pe==null?0:+Pe),Ie=Math.min(We-1,Ie==null?We-1:+Ie);for(var j=new Map,G=Pe;G<=Ie;G++)if(Se[G]&1){var Ae=we(ve[G]);Ae!==null&&j.set(G,Ae)}return j}function fe(ve,Se,Pe,Ie){var We=ve.length;Pe=Math.max(0,Pe==null?0:+Pe),Ie=Math.min(We-1,Ie==null?We-1:+Ie);var j=[];return Se.paragraphs.forEach(function(G){var Ae=Math.max(Pe,G.start),Be=Math.min(Ie,G.end);if(Ae<Be){for(var Re=Se.levels.slice(Ae,Be+1),Ee=Be;Ee>=Ae&&d(ve[Ee])&u;Ee--)Re[Ee]=G.level;for(var Fe=G.level,_e=1/0,Ce=0;Ce<Re.length;Ce++){var Z=Re[Ce];Z>Fe&&(Fe=Z),Z<_e&&(_e=Z|1)}for(var L=Fe;L>=_e;L--)for(var N=0;N<Re.length;N++)if(Re[N]>=L){for(var V=N;N+1<Re.length&&Re[N+1]>=L;)N++;N>V&&j.push([V+Pe,N+Pe])}}}),j}function de(ve,Se,Pe,Ie){var We=Ne(ve,Se,Pe,Ie),j=[].concat(ve);return We.forEach(function(G,Ae){j[Ae]=(Se.levels[G]&1?we(ve[G]):null)||ve[G]}),j.join("")}function Ne(ve,Se,Pe,Ie){for(var We=fe(ve,Se,Pe,Ie),j=[],G=0;G<ve.length;G++)j[G]=G;return We.forEach(function(Ae){for(var Be=Ae[0],Re=Ae[1],Ee=j.slice(Be,Re+1),Fe=Ee.length;Fe--;)j[Re-Fe]=Ee[Fe]}),j}return e.closingToOpeningBracket=S,e.getBidiCharType=d,e.getBidiCharTypeName=p,e.getCanonicalBracket=C,e.getEmbeddingLevels=be,e.getMirroredCharacter=we,e.getMirroredCharactersMap=me,e.getReorderSegments=fe,e.getReorderedIndices=Ne,e.getReorderedString=de,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}var f5=e$;var II=/\bvoid\s+main\s*\(\s*\)\s*{/g;function EI(i){let e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,o){let a=mt[o];return a?EI(a):n}return i.replace(e,t)}var vi=[];for(let i=0;i<256;i++)vi[i]=(i<16?"0":"")+i.toString(16);function t$(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(vi[i&255]+vi[i>>8&255]+vi[i>>16&255]+vi[i>>24&255]+"-"+vi[e&255]+vi[e>>8&255]+"-"+vi[e>>16&15|64]+vi[e>>24&255]+"-"+vi[t&63|128]+vi[t>>8&255]+"-"+vi[t>>16&255]+vi[t>>24&255]+vi[n&255]+vi[n>>8&255]+vi[n>>16&255]+vi[n>>24&255]).toUpperCase()}var wc=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},n$=Date.now(),d5=new WeakMap,p5=new Map,i$=1e10;function U1(i,e){let t=a$(e),n=d5.get(i);if(n||d5.set(i,n=Object.create(null)),n[t])return new n[t];let o=`_onBeforeCompile${t}`,a=function(u,h){i.onBeforeCompile.call(this,u,h);let f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader,d=p5[f];if(!d){let p=r$(this,u,e,t);d=p5[f]=p}u.vertexShader=d.vertexShader,u.fragmentShader=d.fragmentShader,wc(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-n$}}),this[o]&&this[o](u)},l=function(){return c(e.chained?i:i.clone())},c=function(u){let h=Object.create(u,A);return Object.defineProperty(h,"baseMaterial",{value:i}),Object.defineProperty(h,"id",{value:i$++}),h.uuid=t$(),h.uniforms=wc({},u.uniforms,e.uniforms),h.defines=wc({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",h.extensions=wc({},u.extensions,e.extensions),h._listeners=void 0,h},A={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return a},set(u){this[o]=u}},copy:{writable:!0,configurable:!0,value:function(u){return i.copy.call(this,u),!i.isShaderMaterial&&!i.isDerivedMaterial&&(wc(this.extensions,u.extensions),wc(this.defines,u.defines),wc(this.uniforms,jn.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){let u=new i.constructor;return c(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=U1(i.isDerivedMaterial?i.getDepthMaterial():new Ql({depthPacking:hg}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=U1(i.isDerivedMaterial?i.getDistanceMaterial():new Ul,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),i.dispose.call(this)}}};return n[t]=l,new l}function r$(i,{vertexShader:e,fragmentShader:t},n,o){let{vertexDefs:a,vertexMainIntro:l,vertexMainOutro:c,vertexTransform:A,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:p,timeUniform:m}=n;if(a=a||"",l=l||"",c=c||"",u=u||"",h=h||"",f=f||"",(A||p)&&(e=EI(e)),(d||p)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=EI(t)),p){let b=p({vertexShader:e,fragmentShader:t});e=b.vertexShader,t=b.fragmentShader}if(d){let b=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(b.push(g),"")),f=`${d}
${b.join(`
`)}
${f}`}if(m){let b=`
uniform float ${m};
`;a=b+a,u=b+u}return A&&(e=`vec3 troika_position_${o};
vec3 troika_normal_${o};
vec2 troika_uv_${o};
${e}
`,a=`${a}
void troikaVertexTransform${o}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${A}
}
`,l=`
troika_position_${o} = vec3(position);
troika_normal_${o} = vec3(normal);
troika_uv_${o} = vec2(uv);
troikaVertexTransform${o}(troika_position_${o}, troika_normal_${o}, troika_uv_${o});
${l}
`,e=e.replace(/\b(position|normal|uv)\b/g,(b,g,w,I)=>/\battribute\s+vec[23]\s+$/.test(I.substr(0,w))?g:`troika_${g}_${o}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${o}`))),e=m5(e,o,a,l,c),t=m5(t,o,u,h,f),{vertexShader:e,fragmentShader:t}}function m5(i,e,t,n,o){return(n||o||t)&&(i=i.replace(II,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${o}
}`),i}function s$(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}var o$=0,g5=new Map;function a$(i){let e=JSON.stringify(i,s$),t=g5.get(e);return t==null&&g5.set(e,t=++o$),t}function l$(i,e,t){let{defaultFontURL:n}=t,o=Object.create(null),a=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,c="[^\\S\\u00A0]",A=new RegExp(`${c}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(I,v){function E(){let S=C=>{console.error(`Failure loading font ${I}${I===n?"":"; trying fallback"}`,C),I!==n&&(I=n,E())};try{let C=new XMLHttpRequest;C.open("get",I,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)S(new Error(C.statusText));else if(C.status>0)try{let M=i(C.response);v(M)}catch(M){S(M)}},C.onerror=S,C.send()}catch(C){S(C)}}E()}function h(I,v){I||(I=n);let E=o[I];E?E.pending?E.pending.push(v):v(E):(o[I]={pending:[v]},u(I,S=>{let C=o[I].pending;o[I]=S,C.forEach(M=>M(S))}))}function f({text:I="",font:v=n,sdfGlyphSize:E=64,fontSize:S=1,letterSpacing:C=0,lineHeight:M="normal",maxWidth:D=a,direction:T,textAlign:B="left",textIndent:R=0,whiteSpace:P="normal",overflowWrap:_="normal",anchorX:Q=0,anchorY:W=0,includeCaretPositions:U=!1,chunkedBoundsSize:H=8192,colorRanges:O=null},F,z=!1){let k=b(),X={fontLoad:0,typesetting:0};I.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),I=I.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),S=+S,C=+C,D=+D,M=M||"normal",R=+R,h(v,te=>{let ie=isFinite(D),re=null,se=null,oe=null,le=null,be=null,De=null,pe=null,K=0,we=0,me=P!=="nowrap",{ascender:fe,descender:de,unitsPerEm:Ne,lineGap:ve,capHeight:Se,xHeight:Pe}=te;X.fontLoad=b()-k;let Ie=b(),We=S/Ne;M==="normal"&&(M=(fe-de+ve)/Ne),M=M*S;let j=(M-(fe-de)*We)/2,G=-(fe*We+j),Ae=Math.min(M,(fe-de)*We),Be=(fe+de)/2*We-Ae/2,Re=R,Ee=new g,Fe=[Ee];te.forEachGlyph(I,S,C,(Z,L,N)=>{let V=I.charAt(N),q=Z.advanceWidth*We,ne=Ee.count,ae;if("isEmpty"in Z||(Z.isWhitespace=!!V&&new RegExp(c).test(V),Z.canBreakAfter=!!V&&A.test(V),Z.isEmpty=Z.xMin===Z.xMax||Z.yMin===Z.yMax||l.test(V)),!Z.isWhitespace&&!Z.isEmpty&&we++,me&&ie&&!Z.isWhitespace&&L+q+Re>D&&ne){if(Ee.glyphAt(ne-1).glyphObj.canBreakAfter)ae=new g,Re=-L;else for(let ce=ne;ce--;)if(ce===0&&_==="break-word"){ae=new g,Re=-L;break}else if(Ee.glyphAt(ce).glyphObj.canBreakAfter){ae=Ee.splitAt(ce+1);let $=ae.glyphAt(0).x;Re-=$;for(let ue=ae.count;ue--;)ae.glyphAt(ue).x-=$;break}ae&&(Ee.isSoftWrapped=!0,Ee=ae,Fe.push(Ee),K=D)}let J=Ee.glyphAt(Ee.count);J.glyphObj=Z,J.x=L+Re,J.width=q,J.charIndex=N,V===`
`&&(Ee=new g,Fe.push(Ee),Re=-(L+q+C*S)+R)}),Fe.forEach(Z=>{for(let L=Z.count;L--;){let{glyphObj:N,x:V,width:q}=Z.glyphAt(L);if(!N.isWhitespace){Z.width=V+q,Z.width>K&&(K=Z.width);return}}});let _e=0,Ce=0;if(Q&&(typeof Q=="number"?_e=-Q:typeof Q=="string"&&(_e=-K*(Q==="left"?0:Q==="center"?.5:Q==="right"?1:p(Q)))),W){if(typeof W=="number")Ce=-W;else if(typeof W=="string"){let Z=Fe.length*M;Ce=W==="top"?0:W==="top-baseline"?-G:W==="top-cap"?-G-Se*We:W==="top-ex"?-G-Pe*We:W==="middle"?Z/2:W==="bottom"?Z:W==="bottom-baseline"?Z-j+de*We:p(W)*Z}}if(!z){let Z=e.getEmbeddingLevels(I,T);re=new Uint16Array(we),se=new Float32Array(we*2),oe={},De=[a,a,-a,-a],pe=[];let L=G;U&&(be=new Float32Array(I.length*3)),O&&(le=new Uint8Array(we*3));let N=0,V=-1,q=-1,ne,ae;if(Fe.forEach((J,ce)=>{let{count:$,width:ue}=J;if($>0){let xe=0;for(let gt=$;gt--&&J.glyphAt(gt).glyphObj.isWhitespace;)xe++;let Ge=0,ze=0;if(B==="center")Ge=(K-ue)/2;else if(B==="right")Ge=K-ue;else if(B==="justify"&&J.isSoftWrapped){let gt=0;for(let rt=$-xe;rt--;)J.glyphAt(rt).glyphObj.isWhitespace&&gt++;ze=(K-ue)/gt}if(ze||Ge){let gt=0;for(let rt=0;rt<$;rt++){let Mn=J.glyphAt(rt),Tn=Mn.glyphObj;Mn.x+=Ge+gt,ze!==0&&Tn.isWhitespace&&rt<$-xe&&(gt+=ze,Mn.width+=ze)}}let Ze=e.getReorderSegments(I,Z,J.glyphAt(0).charIndex,J.glyphAt(J.count-1).charIndex);for(let gt=0;gt<Ze.length;gt++){let[rt,Mn]=Ze[gt],Tn=1/0,kt=-1/0;for(let Dt=0;Dt<$;Dt++)if(J.glyphAt(Dt).charIndex>=rt){let di=Dt,hn=Dt;for(;hn<$;hn++){let fn=J.glyphAt(hn);if(fn.charIndex>Mn)break;hn<$-xe&&(Tn=Math.min(Tn,fn.x),kt=Math.max(kt,fn.x+fn.width))}for(let fn=di;fn<hn;fn++){let Qn=J.glyphAt(fn);Qn.x=kt-(Qn.x+Qn.width-Tn)}break}}let Ke,ot=gt=>Ke=gt;for(let gt=0;gt<$;gt++){let rt=J.glyphAt(gt);Ke=rt.glyphObj;let Mn=Ke.index,Tn=Z.levels[rt.charIndex]&1;if(Tn){let kt=e.getMirroredCharacter(I[rt.charIndex]);kt&&te.forEachGlyph(kt,0,0,ot)}if(U){let{charIndex:kt}=rt,Dt=rt.x+_e,di=rt.x+rt.width+_e;be[kt*3]=Tn?di:Dt,be[kt*3+1]=Tn?Dt:di,be[kt*3+2]=L+Be+Ce;let hn=kt-V;hn>1&&m(be,V,hn),V=kt}if(O){let{charIndex:kt}=rt;for(;kt>q;)q++,O.hasOwnProperty(q)&&(ae=O[q])}if(!Ke.isWhitespace&&!Ke.isEmpty){let kt=N++;oe[Mn]||(oe[Mn]={path:Ke.path,pathBounds:[Ke.xMin,Ke.yMin,Ke.xMax,Ke.yMax]});let Dt=rt.x+_e,di=L+Ce;se[kt*2]=Dt,se[kt*2+1]=di;let hn=Dt+Ke.xMin*We,fn=di+Ke.yMin*We,Qn=Dt+Ke.xMax*We,Ar=di+Ke.yMax*We;hn<De[0]&&(De[0]=hn),fn<De[1]&&(De[1]=fn),Qn>De[2]&&(De[2]=Qn),Ar>De[3]&&(De[3]=Ar),kt%H===0&&(ne={start:kt,end:kt,rect:[a,a,-a,-a]},pe.push(ne)),ne.end++;let yi=ne.rect;if(hn<yi[0]&&(yi[0]=hn),fn<yi[1]&&(yi[1]=fn),Qn>yi[2]&&(yi[2]=Qn),Ar>yi[3]&&(yi[3]=Ar),re[kt]=Mn,O){let ee=kt*3;le[ee]=ae>>16&255,le[ee+1]=ae>>8&255,le[ee+2]=ae&255}}}}L-=M}),be){let J=I.length-V;J>1&&m(be,V,J)}}X.typesetting=b()-Ie,F({glyphIds:re,glyphPositions:se,glyphData:oe,caretPositions:be,caretHeight:Ae,glyphColors:le,chunkedBounds:pe,fontSize:S,unitsPerEm:Ne,ascender:fe*We,descender:de*We,capHeight:Se*We,xHeight:Pe*We,lineHeight:M,topBaseline:G,blockBounds:[_e,Ce-Fe.length*M,_e+K,Ce],visibleBounds:De,timings:X})})}function d(I,v){f(I,E=>{let[S,C,M,D]=E.blockBounds;v({width:M-S,height:D-C})},{metricsOnly:!0})}function p(I){let v=I.match(/^([\d.]+)%$/),E=v?parseFloat(v[1]):NaN;return isNaN(E)?0:E/100}function m(I,v,E){let S=I[v*3],C=I[v*3+1],M=I[v*3+2],D=(C-S)/E;for(let T=0;T<E;T++){let B=(v+T)*3;I[B]=S+D*T,I[B+1]=S+D*(T+1),I[B+2]=M}}function b(){return(self.performance||Date).now()}function g(){this.data=[]}let w=["glyphObj","x","width","charIndex"];return g.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/w.length)},glyphAt(I){let v=g.flyweight;return v.data=this.data,v.index=I,v},splitAt(I){let v=new g;return v.data=this.data.splice(I*w.length),v}},g.flyweight=w.reduce((I,v,E,S)=>(Object.defineProperty(I,v,{get(){return this.data[this.index*w.length+E]},set(C){this.data[this.index*w.length+E]=C}}),I),{data:null,index:0}),{typeset:f,measure:d,loadFont:h}}var Cc=()=>(self.performance||Date).now(),V1=SI(),v5;function c$(i,e,t,n,o,a,l,c,A,u,h=!0){return h?u$(i,e,t,n,o,a,l,c,A,u).then(null,f=>(v5||(console.warn("WebGL SDF generation failed, falling back to JS",f),v5=!0),x5(i,e,t,n,o,a,l,c,A,u))):x5(i,e,t,n,o,a,l,c,A,u)}var z1=[],A$=5,BI=0;function T5(){let i=Cc();for(;z1.length&&Cc()-i<A$;)z1.shift()();BI=z1.length?setTimeout(T5,0):0}var u$=(...i)=>new Promise((e,t)=>{z1.push(()=>{let n=Cc();try{V1.webgl.generateIntoCanvas(...i),e({timing:Cc()-n})}catch(o){t(o)}}),BI||(BI=setTimeout(T5,0))}),h$=4,f$=2e3,y5={},d$=0;function x5(i,e,t,n,o,a,l,c,A,u){let h="TroikaTextSDFGenerator_JS_"+d$++%h$,f=y5[h];return f||(f=y5[h]={workerModule:Qu({name:h,workerId:h,dependencies:[SI,Cc],init(d,p){let m=d().javascript.generate;return function(...b){let g=p();return{textureData:m(...b),timing:p()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(i,e,t,n,o,a).then(({textureData:d,timing:p})=>{let m=Cc(),b=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)b[g*4+u]=d[g];return V1.webglUtils.renderImageData(l,b,c,A,i,e,1<<3-u),p+=Cc()-m,--f.requests===0&&(f.idleTimer=setTimeout(()=>{h5(h)},f$)),{timing:p}})}function p$(i){i._warm||(V1.webgl.isSupported(i),i._warm=!0)}var m$=V1.webglUtils.resizeWebGLCanvasWithoutClearing;function g$(){return typeof window>"u"&&(self.window=self),function(i){var e={parse:function(o){var a=e._bin,l=new Uint8Array(o);if(a.readASCII(l,0,4)=="ttcf"){var c=4;a.readUshort(l,c),c+=2,a.readUshort(l,c),c+=2;var A=a.readUint(l,c);c+=4;for(var u=[],h=0;h<A;h++){var f=a.readUint(l,c);c+=4,u.push(e._readFont(l,f))}return u}return[e._readFont(l,0)]},_readFont:function(o,a){var l=e._bin,c=a;l.readFixed(o,a),a+=4;var A=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],h={_data:o,_offset:c},f={},d=0;d<A;d++){var p=l.readASCII(o,a,4);a+=4,l.readUint(o,a),a+=4;var m=l.readUint(o,a);a+=4;var b=l.readUint(o,a);a+=4,f[p]={offset:m,length:b}}for(d=0;d<u.length;d++){var g=u[d];f[g]&&(h[g.trim()]=e[g.trim()].parse(o,f[g].offset,f[g].length,h))}return h},_tabOffset:function(o,a,l){for(var c=e._bin,A=c.readUshort(o,l+4),u=l+12,h=0;h<A;h++){var f=c.readASCII(o,u,4);u+=4,c.readUint(o,u),u+=4;var d=c.readUint(o,u);if(u+=4,c.readUint(o,u),u+=4,f==a)return d}return 0}};e._bin={readFixed:function(o,a){return(o[a]<<8|o[a+1])+(o[a+2]<<8|o[a+3])/65540},readF2dot14:function(o,a){return e._bin.readShort(o,a)/16384},readInt:function(o,a){return e._bin._view(o).getInt32(a)},readInt8:function(o,a){return e._bin._view(o).getInt8(a)},readShort:function(o,a){return e._bin._view(o).getInt16(a)},readUshort:function(o,a){return e._bin._view(o).getUint16(a)},readUshorts:function(o,a,l){for(var c=[],A=0;A<l;A++)c.push(e._bin.readUshort(o,a+2*A));return c},readUint:function(o,a){return e._bin._view(o).getUint32(a)},readUint64:function(o,a){return 4294967296*e._bin.readUint(o,a)+e._bin.readUint(o,a+4)},readASCII:function(o,a,l){for(var c="",A=0;A<l;A++)c+=String.fromCharCode(o[a+A]);return c},readUnicode:function(o,a,l){for(var c="",A=0;A<l;A++){var u=o[a++]<<8|o[a++];c+=String.fromCharCode(u)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(o,a,l){var c=e._bin._tdec;return c&&a==0&&l==o.length?c.decode(o):e._bin.readASCII(o,a,l)},readBytes:function(o,a,l){for(var c=[],A=0;A<l;A++)c.push(o[a+A]);return c},readASCIIArray:function(o,a,l){for(var c=[],A=0;A<l;A++)c.push(String.fromCharCode(o[a+A]));return c},_view:function(o){return o._dataView||(o._dataView=o.buffer?new DataView(o.buffer,o.byteOffset,o.byteLength):new DataView(new Uint8Array(o).buffer))}},e._lctf={},e._lctf.parse=function(o,a,l,c,A){var u=e._bin,h={},f=a;u.readFixed(o,a),a+=4;var d=u.readUshort(o,a);a+=2;var p=u.readUshort(o,a);a+=2;var m=u.readUshort(o,a);return a+=2,h.scriptList=e._lctf.readScriptList(o,f+d),h.featureList=e._lctf.readFeatureList(o,f+p),h.lookupList=e._lctf.readLookupList(o,f+m,A),h},e._lctf.readLookupList=function(o,a,l){var c=e._bin,A=a,u=[],h=c.readUshort(o,a);a+=2;for(var f=0;f<h;f++){var d=c.readUshort(o,a);a+=2;var p=e._lctf.readLookupTable(o,A+d,l);u.push(p)}return u},e._lctf.readLookupTable=function(o,a,l){var c=e._bin,A=a,u={tabs:[]};u.ltype=c.readUshort(o,a),a+=2,u.flag=c.readUshort(o,a),a+=2;var h=c.readUshort(o,a);a+=2;for(var f=u.ltype,d=0;d<h;d++){var p=c.readUshort(o,a);a+=2;var m=l(o,f,A+p,u);u.tabs.push(m)}return u},e._lctf.numOfOnes=function(o){for(var a=0,l=0;l<32;l++)o>>>l&1&&a++;return a},e._lctf.readClassDef=function(o,a){var l=e._bin,c=[],A=l.readUshort(o,a);if(a+=2,A==1){var u=l.readUshort(o,a);a+=2;var h=l.readUshort(o,a);a+=2;for(var f=0;f<h;f++)c.push(u+f),c.push(u+f),c.push(l.readUshort(o,a)),a+=2}if(A==2){var d=l.readUshort(o,a);for(a+=2,f=0;f<d;f++)c.push(l.readUshort(o,a)),a+=2,c.push(l.readUshort(o,a)),a+=2,c.push(l.readUshort(o,a)),a+=2}return c},e._lctf.getInterval=function(o,a){for(var l=0;l<o.length;l+=3){var c=o[l],A=o[l+1];if(o[l+2],c<=a&&a<=A)return l}return-1},e._lctf.readCoverage=function(o,a){var l=e._bin,c={};c.fmt=l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);return a+=2,c.fmt==1&&(c.tab=l.readUshorts(o,a,A)),c.fmt==2&&(c.tab=l.readUshorts(o,a,3*A)),c},e._lctf.coverageIndex=function(o,a){var l=o.tab;if(o.fmt==1)return l.indexOf(a);if(o.fmt==2){var c=e._lctf.getInterval(l,a);if(c!=-1)return l[c+2]+(a-l[c])}return-1},e._lctf.readFeatureList=function(o,a){var l=e._bin,c=a,A=[],u=l.readUshort(o,a);a+=2;for(var h=0;h<u;h++){var f=l.readASCII(o,a,4);a+=4;var d=l.readUshort(o,a);a+=2;var p=e._lctf.readFeatureTable(o,c+d);p.tag=f.trim(),A.push(p)}return A},e._lctf.readFeatureTable=function(o,a){var l=e._bin,c=a,A={},u=l.readUshort(o,a);a+=2,u>0&&(A.featureParams=c+u);var h=l.readUshort(o,a);a+=2,A.tab=[];for(var f=0;f<h;f++)A.tab.push(l.readUshort(o,a+2*f));return A},e._lctf.readScriptList=function(o,a){var l=e._bin,c=a,A={},u=l.readUshort(o,a);a+=2;for(var h=0;h<u;h++){var f=l.readASCII(o,a,4);a+=4;var d=l.readUshort(o,a);a+=2,A[f.trim()]=e._lctf.readScriptTable(o,c+d)}return A},e._lctf.readScriptTable=function(o,a){var l=e._bin,c=a,A={},u=l.readUshort(o,a);a+=2,A.default=e._lctf.readLangSysTable(o,c+u);var h=l.readUshort(o,a);a+=2;for(var f=0;f<h;f++){var d=l.readASCII(o,a,4);a+=4;var p=l.readUshort(o,a);a+=2,A[d.trim()]=e._lctf.readLangSysTable(o,c+p)}return A},e._lctf.readLangSysTable=function(o,a){var l=e._bin,c={};l.readUshort(o,a),a+=2,c.reqFeature=l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);return a+=2,c.features=l.readUshorts(o,a,A),c},e.CFF={},e.CFF.parse=function(o,a,l){var c=e._bin;(o=new Uint8Array(o.buffer,a,l))[a=0],o[++a],o[++a],o[++a],a++;var A=[];a=e.CFF.readIndex(o,a,A);for(var u=[],h=0;h<A.length-1;h++)u.push(c.readASCII(o,a+A[h],A[h+1]-A[h]));a+=A[A.length-1];var f=[];a=e.CFF.readIndex(o,a,f);var d=[];for(h=0;h<f.length-1;h++)d.push(e.CFF.readDict(o,a+f[h],a+f[h+1]));a+=f[f.length-1];var p=d[0],m=[];a=e.CFF.readIndex(o,a,m);var b=[];for(h=0;h<m.length-1;h++)b.push(c.readASCII(o,a+m[h],m[h+1]-m[h]));if(a+=m[m.length-1],e.CFF.readSubrs(o,a,p),p.CharStrings){a=p.CharStrings,m=[],a=e.CFF.readIndex(o,a,m);var g=[];for(h=0;h<m.length-1;h++)g.push(c.readBytes(o,a+m[h],m[h+1]-m[h]));p.CharStrings=g}if(p.ROS){a=p.FDArray;var w=[];for(a=e.CFF.readIndex(o,a,w),p.FDArray=[],h=0;h<w.length-1;h++){var I=e.CFF.readDict(o,a+w[h],a+w[h+1]);e.CFF._readFDict(o,I,b),p.FDArray.push(I)}a+=w[w.length-1],a=p.FDSelect,p.FDSelect=[];var v=o[a];if(a++,v!=3)throw v;var E=c.readUshort(o,a);for(a+=2,h=0;h<E+1;h++)p.FDSelect.push(c.readUshort(o,a),o[a+2]),a+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(o,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(o,p.charset,p.CharStrings.length)),e.CFF._readFDict(o,p,b),p},e.CFF._readFDict=function(o,a,l){var c;for(var A in a.Private&&(c=a.Private[1],a.Private=e.CFF.readDict(o,c,c+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(o,c+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(A)!=-1&&(a[A]=l[a[A]-426+35])},e.CFF.readSubrs=function(o,a,l){var c=e._bin,A=[];a=e.CFF.readIndex(o,a,A);var u,h=A.length;u=h<1240?107:h<33900?1131:32768,l.Bias=u,l.Subrs=[];for(var f=0;f<A.length-1;f++)l.Subrs.push(c.readBytes(o,a+A[f],A[f+1]-A[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(o,a){for(var l=0;l<o.charset.length;l++)if(o.charset[l]==a)return l;return-1},e.CFF.glyphBySE=function(o,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(o,e.CFF.tableSE[a])},e.CFF.readEncoding=function(o,a,l){e._bin;var c=[".notdef"],A=o[a];if(a++,A!=0)throw"error: unknown encoding format: "+A;var u=o[a];a++;for(var h=0;h<u;h++)c.push(o[a+h]);return c},e.CFF.readCharset=function(o,a,l){var c=e._bin,A=[".notdef"],u=o[a];if(a++,u==0)for(var h=0;h<l;h++){var f=c.readUshort(o,a);a+=2,A.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;A.length<l;){f=c.readUshort(o,a),a+=2;var d=0;for(u==1?(d=o[a],a++):(d=c.readUshort(o,a),a+=2),h=0;h<=d;h++)A.push(f),f++}}return A},e.CFF.readIndex=function(o,a,l){var c=e._bin,A=c.readUshort(o,a)+1,u=o[a+=2];if(a++,u==1)for(var h=0;h<A;h++)l.push(o[a+h]);else if(u==2)for(h=0;h<A;h++)l.push(c.readUshort(o,a+2*h));else if(u==3)for(h=0;h<A;h++)l.push(16777215&c.readUint(o,a+3*h-1));else if(A!=1)throw"unsupported offset size: "+u+", count: "+A;return(a+=A*u)-1},e.CFF.getCharString=function(o,a,l){var c=e._bin,A=o[a],u=o[a+1];o[a+2],o[a+3],o[a+4];var h=1,f=null,d=null;A<=20&&(f=A,h=1),A==12&&(f=100*A+u,h=2),21<=A&&A<=27&&(f=A,h=1),A==28&&(d=c.readShort(o,a+1),h=3),29<=A&&A<=31&&(f=A,h=1),32<=A&&A<=246&&(d=A-139,h=1),247<=A&&A<=250&&(d=256*(A-247)+u+108,h=2),251<=A&&A<=254&&(d=256*-(A-251)-u-108,h=2),A==255&&(d=c.readInt(o,a+1)/65535,h=5),l.val=d??"o"+f,l.size=h},e.CFF.readCharString=function(o,a,l){for(var c=a+l,A=e._bin,u=[];a<c;){var h=o[a],f=o[a+1];o[a+2],o[a+3],o[a+4];var d=1,p=null,m=null;h<=20&&(p=h,d=1),h==12&&(p=100*h+f,d=2),h!=19&&h!=20||(p=h,d=2),21<=h&&h<=27&&(p=h,d=1),h==28&&(m=A.readShort(o,a+1),d=3),29<=h&&h<=31&&(p=h,d=1),32<=h&&h<=246&&(m=h-139,d=1),247<=h&&h<=250&&(m=256*(h-247)+f+108,d=2),251<=h&&h<=254&&(m=256*-(h-251)-f-108,d=2),h==255&&(m=A.readInt(o,a+1)/65535,d=5),u.push(m??"o"+p),a+=d}return u},e.CFF.readDict=function(o,a,l){for(var c=e._bin,A={},u=[];a<l;){var h=o[a],f=o[a+1];o[a+2],o[a+3],o[a+4];var d=1,p=null,m=null;if(h==28&&(m=c.readShort(o,a+1),d=3),h==29&&(m=c.readInt(o,a+1),d=5),32<=h&&h<=246&&(m=h-139,d=1),247<=h&&h<=250&&(m=256*(h-247)+f+108,d=2),251<=h&&h<=254&&(m=256*-(h-251)-f-108,d=2),h==255)throw m=c.readInt(o,a+1)/65535,d=5,"unknown number";if(h==30){var b=[];for(d=1;;){var g=o[a+d];d++;var w=g>>4,I=15&g;if(w!=15&&b.push(w),I!=15&&b.push(I),I==15)break}for(var v="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<b.length;S++)v+=E[b[S]];m=parseFloat(v)}h<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],d=1,h==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),p!=null?(A[p]=u.length==1?u[0]:u,u=[]):u.push(m),a+=d}return A},e.cmap={},e.cmap.parse=function(o,a,l){o=new Uint8Array(o.buffer,a,l),a=0;var c=e._bin,A={};c.readUshort(o,a),a+=2;var u=c.readUshort(o,a);a+=2;var h=[];A.tables=[];for(var f=0;f<u;f++){var d=c.readUshort(o,a);a+=2;var p=c.readUshort(o,a);a+=2;var m=c.readUint(o,a);a+=4;var b="p"+d+"e"+p,g=h.indexOf(m);if(g==-1){var w;g=A.tables.length,h.push(m);var I=c.readUshort(o,m);I==0?w=e.cmap.parse0(o,m):I==4?w=e.cmap.parse4(o,m):I==6?w=e.cmap.parse6(o,m):I==12?w=e.cmap.parse12(o,m):console.debug("unknown format: "+I,d,p,m),A.tables.push(w)}if(A[b]!=null)throw"multiple tables for one platform+encoding";A[b]=g}return A},e.cmap.parse0=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2,c.map=[];for(var u=0;u<A-6;u++)c.map.push(o[a+u]);return c},e.cmap.parse4=function(o,a){var l=e._bin,c=a,A={};A.format=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2;var h=l.readUshort(o,a);a+=2;var f=h/2;A.searchRange=l.readUshort(o,a),a+=2,A.entrySelector=l.readUshort(o,a),a+=2,A.rangeShift=l.readUshort(o,a),a+=2,A.endCount=l.readUshorts(o,a,f),a+=2*f,a+=2,A.startCount=l.readUshorts(o,a,f),a+=2*f,A.idDelta=[];for(var d=0;d<f;d++)A.idDelta.push(l.readShort(o,a)),a+=2;for(A.idRangeOffset=l.readUshorts(o,a,f),a+=2*f,A.glyphIdArray=[];a<c+u;)A.glyphIdArray.push(l.readUshort(o,a)),a+=2;return A},e.cmap.parse6=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,c.firstCode=l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);a+=2,c.glyphIdArray=[];for(var u=0;u<A;u++)c.glyphIdArray.push(l.readUshort(o,a)),a+=2;return c},e.cmap.parse12=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2,a+=2,l.readUint(o,a),a+=4,l.readUint(o,a),a+=4;var A=l.readUint(o,a);a+=4,c.groups=[];for(var u=0;u<A;u++){var h=a+12*u,f=l.readUint(o,h+0),d=l.readUint(o,h+4),p=l.readUint(o,h+8);c.groups.push([f,d,p])}return c},e.glyf={},e.glyf.parse=function(o,a,l,c){for(var A=[],u=0;u<c.maxp.numGlyphs;u++)A.push(null);return A},e.glyf._parseGlyf=function(o,a){var l=e._bin,c=o._data,A=e._tabOffset(c,"glyf",o._offset)+o.loca[a];if(o.loca[a]==o.loca[a+1])return null;var u={};if(u.noc=l.readShort(c,A),A+=2,u.xMin=l.readShort(c,A),A+=2,u.yMin=l.readShort(c,A),A+=2,u.xMax=l.readShort(c,A),A+=2,u.yMax=l.readShort(c,A),A+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(l.readUshort(c,A)),A+=2;var f=l.readUshort(c,A);if(A+=2,c.length-A<f)return null;u.instructions=l.readBytes(c,A,f),A+=f;var d=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<d;h++){var p=c[A];if(A++,u.flags.push(p),(8&p)!=0){var m=c[A];A++;for(var b=0;b<m;b++)u.flags.push(p),h++}}for(u.xs=[],h=0;h<d;h++){var g=(2&u.flags[h])!=0,w=(16&u.flags[h])!=0;g?(u.xs.push(w?c[A]:-c[A]),A++):w?u.xs.push(0):(u.xs.push(l.readShort(c,A)),A+=2)}for(u.ys=[],h=0;h<d;h++)g=(4&u.flags[h])!=0,w=(32&u.flags[h])!=0,g?(u.ys.push(w?c[A]:-c[A]),A++):w?u.ys.push(0):(u.ys.push(l.readShort(c,A)),A+=2);var I=0,v=0;for(h=0;h<d;h++)I+=u.xs[h],v+=u.ys[h],u.xs[h]=I,u.ys[h]=v}else{var E;u.parts=[];do{E=l.readUshort(c,A),A+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(S),S.glyphIndex=l.readUshort(c,A),A+=2,1&E){var C=l.readShort(c,A);A+=2;var M=l.readShort(c,A);A+=2}else C=l.readInt8(c,A),A++,M=l.readInt8(c,A),A++;2&E?(S.m.tx=C,S.m.ty=M):(S.p1=C,S.p2=M),8&E?(S.m.a=S.m.d=l.readF2dot14(c,A),A+=2):64&E?(S.m.a=l.readF2dot14(c,A),A+=2,S.m.d=l.readF2dot14(c,A),A+=2):128&E&&(S.m.a=l.readF2dot14(c,A),A+=2,S.m.b=l.readF2dot14(c,A),A+=2,S.m.c=l.readF2dot14(c,A),A+=2,S.m.d=l.readF2dot14(c,A),A+=2)}while(32&E);if(256&E){var D=l.readUshort(c,A);for(A+=2,u.instr=[],h=0;h<D;h++)u.instr.push(c[A]),A++}}return u},e.GPOS={},e.GPOS.parse=function(o,a,l,c){return e._lctf.parse(o,a,l,c,e.GPOS.subt)},e.GPOS.subt=function(o,a,l,c){var A=e._bin,u=l,h={};if(h.fmt=A.readUshort(o,l),l+=2,a==1||a==2||a==3||a==7||a==8&&h.fmt<=2){var f=A.readUshort(o,l);l+=2,h.coverage=e._lctf.readCoverage(o,f+u)}if(a==1&&h.fmt==1){var d=A.readUshort(o,l);l+=2;var p=e._lctf.numOfOnes(d);d!=0&&(h.pos=e.GPOS.readValueRecord(o,l,d))}else if(a==2&&h.fmt>=1&&h.fmt<=2){d=A.readUshort(o,l),l+=2;var m=A.readUshort(o,l);l+=2,p=e._lctf.numOfOnes(d);var b=e._lctf.numOfOnes(m);if(h.fmt==1){h.pairsets=[];var g=A.readUshort(o,l);l+=2;for(var w=0;w<g;w++){var I=u+A.readUshort(o,l);l+=2;var v=A.readUshort(o,I);I+=2;for(var E=[],S=0;S<v;S++){var C=A.readUshort(o,I);I+=2,d!=0&&(P=e.GPOS.readValueRecord(o,I,d),I+=2*p),m!=0&&(_=e.GPOS.readValueRecord(o,I,m),I+=2*b),E.push({gid2:C,val1:P,val2:_})}h.pairsets.push(E)}}if(h.fmt==2){var M=A.readUshort(o,l);l+=2;var D=A.readUshort(o,l);l+=2;var T=A.readUshort(o,l);l+=2;var B=A.readUshort(o,l);for(l+=2,h.classDef1=e._lctf.readClassDef(o,u+M),h.classDef2=e._lctf.readClassDef(o,u+D),h.matrix=[],w=0;w<T;w++){var R=[];for(S=0;S<B;S++){var P=null,_=null;d!=0&&(P=e.GPOS.readValueRecord(o,l,d),l+=2*p),m!=0&&(_=e.GPOS.readValueRecord(o,l,m),l+=2*b),R.push({val1:P,val2:_})}h.matrix.push(R)}}}else{if(a==9&&h.fmt==1){var Q=A.readUshort(o,l);l+=2;var W=A.readUint(o,l);if(l+=4,c.ltype==9)c.ltype=Q;else if(c.ltype!=Q)throw"invalid extension substitution";return e.GPOS.subt(o,c.ltype,u+W)}console.debug("unsupported GPOS table LookupType",a,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(o,a,l){var c=e._bin,A=[];return A.push(1&l?c.readShort(o,a):0),a+=1&l?2:0,A.push(2&l?c.readShort(o,a):0),a+=2&l?2:0,A.push(4&l?c.readShort(o,a):0),a+=4&l?2:0,A.push(8&l?c.readShort(o,a):0),a+=8&l?2:0,A},e.GSUB={},e.GSUB.parse=function(o,a,l,c){return e._lctf.parse(o,a,l,c,e.GSUB.subt)},e.GSUB.subt=function(o,a,l,c){var A=e._bin,u=l,h={};if(h.fmt=A.readUshort(o,l),l+=2,a!=1&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==4||a==5&&h.fmt<=2||a==6&&h.fmt<=2){var f=A.readUshort(o,l);l+=2,h.coverage=e._lctf.readCoverage(o,u+f)}if(a==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=A.readShort(o,l),l+=2;else if(h.fmt==2){var d=A.readUshort(o,l);l+=2,h.newg=A.readUshorts(o,l,d),l+=2*h.newg.length}}else if(a==4){h.vals=[],d=A.readUshort(o,l),l+=2;for(var p=0;p<d;p++){var m=A.readUshort(o,l);l+=2,h.vals.push(e.GSUB.readLigatureSet(o,u+m))}}else if(a==5&&h.fmt==2){if(h.fmt==2){var b=A.readUshort(o,l);l+=2,h.cDef=e._lctf.readClassDef(o,u+b),h.scset=[];var g=A.readUshort(o,l);for(l+=2,p=0;p<g;p++){var w=A.readUshort(o,l);l+=2,h.scset.push(w==0?null:e.GSUB.readSubClassSet(o,u+w))}}}else if(a==6&&h.fmt==3){if(h.fmt==3){for(p=0;p<3;p++){d=A.readUshort(o,l),l+=2;for(var I=[],v=0;v<d;v++)I.push(e._lctf.readCoverage(o,u+A.readUshort(o,l+2*v)));l+=2*d,p==0&&(h.backCvg=I),p==1&&(h.inptCvg=I),p==2&&(h.ahedCvg=I)}d=A.readUshort(o,l),l+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(o,l,d)}}else{if(a==7&&h.fmt==1){var E=A.readUshort(o,l);l+=2;var S=A.readUint(o,l);if(l+=4,c.ltype==9)c.ltype=E;else if(c.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(o,c.ltype,u+S)}console.debug("unsupported GSUB table LookupType",a,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(o,a){var l=e._bin.readUshort,c=a,A=[],u=l(o,a);a+=2;for(var h=0;h<u;h++){var f=l(o,a);a+=2,A.push(e.GSUB.readSubClassRule(o,c+f))}return A},e.GSUB.readSubClassRule=function(o,a){var l=e._bin.readUshort,c={},A=l(o,a),u=l(o,a+=2);a+=2,c.input=[];for(var h=0;h<A-1;h++)c.input.push(l(o,a)),a+=2;return c.substLookupRecords=e.GSUB.readSubstLookupRecords(o,a,u),c},e.GSUB.readSubstLookupRecords=function(o,a,l){for(var c=e._bin.readUshort,A=[],u=0;u<l;u++)A.push(c(o,a),c(o,a+2)),a+=4;return A},e.GSUB.readChainSubClassSet=function(o,a){var l=e._bin,c=a,A=[],u=l.readUshort(o,a);a+=2;for(var h=0;h<u;h++){var f=l.readUshort(o,a);a+=2,A.push(e.GSUB.readChainSubClassRule(o,c+f))}return A},e.GSUB.readChainSubClassRule=function(o,a){for(var l=e._bin,c={},A=["backtrack","input","lookahead"],u=0;u<A.length;u++){var h=l.readUshort(o,a);a+=2,u==1&&h--,c[A[u]]=l.readUshorts(o,a,h),a+=2*c[A[u]].length}return h=l.readUshort(o,a),a+=2,c.subst=l.readUshorts(o,a,2*h),a+=2*c.subst.length,c},e.GSUB.readLigatureSet=function(o,a){var l=e._bin,c=a,A=[],u=l.readUshort(o,a);a+=2;for(var h=0;h<u;h++){var f=l.readUshort(o,a);a+=2,A.push(e.GSUB.readLigature(o,c+f))}return A},e.GSUB.readLigature=function(o,a){var l=e._bin,c={chain:[]};c.nglyph=l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);a+=2;for(var u=0;u<A-1;u++)c.chain.push(l.readUshort(o,a)),a+=2;return c},e.head={},e.head.parse=function(o,a,l){var c=e._bin,A={};return c.readFixed(o,a),a+=4,A.fontRevision=c.readFixed(o,a),a+=4,c.readUint(o,a),a+=4,c.readUint(o,a),a+=4,A.flags=c.readUshort(o,a),a+=2,A.unitsPerEm=c.readUshort(o,a),a+=2,A.created=c.readUint64(o,a),a+=8,A.modified=c.readUint64(o,a),a+=8,A.xMin=c.readShort(o,a),a+=2,A.yMin=c.readShort(o,a),a+=2,A.xMax=c.readShort(o,a),a+=2,A.yMax=c.readShort(o,a),a+=2,A.macStyle=c.readUshort(o,a),a+=2,A.lowestRecPPEM=c.readUshort(o,a),a+=2,A.fontDirectionHint=c.readShort(o,a),a+=2,A.indexToLocFormat=c.readShort(o,a),a+=2,A.glyphDataFormat=c.readShort(o,a),a+=2,A},e.hhea={},e.hhea.parse=function(o,a,l){var c=e._bin,A={};return c.readFixed(o,a),a+=4,A.ascender=c.readShort(o,a),a+=2,A.descender=c.readShort(o,a),a+=2,A.lineGap=c.readShort(o,a),a+=2,A.advanceWidthMax=c.readUshort(o,a),a+=2,A.minLeftSideBearing=c.readShort(o,a),a+=2,A.minRightSideBearing=c.readShort(o,a),a+=2,A.xMaxExtent=c.readShort(o,a),a+=2,A.caretSlopeRise=c.readShort(o,a),a+=2,A.caretSlopeRun=c.readShort(o,a),a+=2,A.caretOffset=c.readShort(o,a),a+=2,a+=8,A.metricDataFormat=c.readShort(o,a),a+=2,A.numberOfHMetrics=c.readUshort(o,a),a+=2,A},e.hmtx={},e.hmtx.parse=function(o,a,l,c){for(var A=e._bin,u={aWidth:[],lsBearing:[]},h=0,f=0,d=0;d<c.maxp.numGlyphs;d++)d<c.hhea.numberOfHMetrics&&(h=A.readUshort(o,a),a+=2,f=A.readShort(o,a),a+=2),u.aWidth.push(h),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(o,a,l,c){var A=e._bin,u=A.readUshort(o,a);if(a+=2,u==1)return e.kern.parseV1(o,a-2,l,c);var h=A.readUshort(o,a);a+=2;for(var f={glyph1:[],rval:[]},d=0;d<h;d++){a+=2,l=A.readUshort(o,a),a+=2;var p=A.readUshort(o,a);a+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;a=e.kern.readFormat0(o,a,f)}return f},e.kern.parseV1=function(o,a,l,c){var A=e._bin;A.readFixed(o,a),a+=4;var u=A.readUint(o,a);a+=4;for(var h={glyph1:[],rval:[]},f=0;f<u;f++){A.readUint(o,a),a+=4;var d=A.readUshort(o,a);a+=2,A.readUshort(o,a),a+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;a=e.kern.readFormat0(o,a,h)}return h},e.kern.readFormat0=function(o,a,l){var c=e._bin,A=-1,u=c.readUshort(o,a);a+=2,c.readUshort(o,a),a+=2,c.readUshort(o,a),a+=2,c.readUshort(o,a),a+=2;for(var h=0;h<u;h++){var f=c.readUshort(o,a);a+=2;var d=c.readUshort(o,a);a+=2;var p=c.readShort(o,a);a+=2,f!=A&&(l.glyph1.push(f),l.rval.push({glyph2:[],vals:[]}));var m=l.rval[l.rval.length-1];m.glyph2.push(d),m.vals.push(p),A=f}return a},e.loca={},e.loca.parse=function(o,a,l,c){var A=e._bin,u=[],h=c.head.indexToLocFormat,f=c.maxp.numGlyphs+1;if(h==0)for(var d=0;d<f;d++)u.push(A.readUshort(o,a+(d<<1))<<1);if(h==1)for(d=0;d<f;d++)u.push(A.readUint(o,a+(d<<2)));return u},e.maxp={},e.maxp.parse=function(o,a,l){var c=e._bin,A={},u=c.readUint(o,a);return a+=4,A.numGlyphs=c.readUshort(o,a),a+=2,u==65536&&(A.maxPoints=c.readUshort(o,a),a+=2,A.maxContours=c.readUshort(o,a),a+=2,A.maxCompositePoints=c.readUshort(o,a),a+=2,A.maxCompositeContours=c.readUshort(o,a),a+=2,A.maxZones=c.readUshort(o,a),a+=2,A.maxTwilightPoints=c.readUshort(o,a),a+=2,A.maxStorage=c.readUshort(o,a),a+=2,A.maxFunctionDefs=c.readUshort(o,a),a+=2,A.maxInstructionDefs=c.readUshort(o,a),a+=2,A.maxStackElements=c.readUshort(o,a),a+=2,A.maxSizeOfInstructions=c.readUshort(o,a),a+=2,A.maxComponentElements=c.readUshort(o,a),a+=2,A.maxComponentDepth=c.readUshort(o,a),a+=2),A},e.name={},e.name.parse=function(o,a,l){var c=e._bin,A={};c.readUshort(o,a),a+=2;var u=c.readUshort(o,a);a+=2,c.readUshort(o,a);for(var h,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=a+=2,p=0;p<u;p++){var m=c.readUshort(o,a);a+=2;var b=c.readUshort(o,a);a+=2;var g=c.readUshort(o,a);a+=2;var w=c.readUshort(o,a);a+=2;var I=c.readUshort(o,a);a+=2;var v=c.readUshort(o,a);a+=2;var E,S=f[w],C=d+12*u+v;if(m==0)E=c.readUnicode(o,C,I/2);else if(m==3&&b==0)E=c.readUnicode(o,C,I/2);else if(b==0)E=c.readASCII(o,C,I);else if(b==1)E=c.readUnicode(o,C,I/2);else if(b==3)E=c.readUnicode(o,C,I/2);else{if(m!=1)throw"unknown encoding "+b+", platformID: "+m;E=c.readASCII(o,C,I),console.debug("reading unknown MAC encoding "+b+" as ASCII")}var M="p"+m+","+g.toString(16);A[M]==null&&(A[M]={}),A[M][S!==void 0?S:w]=E,A[M]._lang=g}for(var D in A)if(A[D].postScriptName!=null&&A[D]._lang==1033)return A[D];for(var D in A)if(A[D].postScriptName!=null&&A[D]._lang==0)return A[D];for(var D in A)if(A[D].postScriptName!=null&&A[D]._lang==3084)return A[D];for(var D in A)if(A[D].postScriptName!=null)return A[D];for(var D in A){h=D;break}return console.debug("returning name table with languageID "+A[h]._lang),A[h]},e["OS/2"]={},e["OS/2"].parse=function(o,a,l){var c=e._bin.readUshort(o,a);a+=2;var A={};if(c==0)e["OS/2"].version0(o,a,A);else if(c==1)e["OS/2"].version1(o,a,A);else if(c==2||c==3||c==4)e["OS/2"].version2(o,a,A);else{if(c!=5)throw"unknown OS/2 table version: "+c;e["OS/2"].version5(o,a,A)}return A},e["OS/2"].version0=function(o,a,l){var c=e._bin;return l.xAvgCharWidth=c.readShort(o,a),a+=2,l.usWeightClass=c.readUshort(o,a),a+=2,l.usWidthClass=c.readUshort(o,a),a+=2,l.fsType=c.readUshort(o,a),a+=2,l.ySubscriptXSize=c.readShort(o,a),a+=2,l.ySubscriptYSize=c.readShort(o,a),a+=2,l.ySubscriptXOffset=c.readShort(o,a),a+=2,l.ySubscriptYOffset=c.readShort(o,a),a+=2,l.ySuperscriptXSize=c.readShort(o,a),a+=2,l.ySuperscriptYSize=c.readShort(o,a),a+=2,l.ySuperscriptXOffset=c.readShort(o,a),a+=2,l.ySuperscriptYOffset=c.readShort(o,a),a+=2,l.yStrikeoutSize=c.readShort(o,a),a+=2,l.yStrikeoutPosition=c.readShort(o,a),a+=2,l.sFamilyClass=c.readShort(o,a),a+=2,l.panose=c.readBytes(o,a,10),a+=10,l.ulUnicodeRange1=c.readUint(o,a),a+=4,l.ulUnicodeRange2=c.readUint(o,a),a+=4,l.ulUnicodeRange3=c.readUint(o,a),a+=4,l.ulUnicodeRange4=c.readUint(o,a),a+=4,l.achVendID=[c.readInt8(o,a),c.readInt8(o,a+1),c.readInt8(o,a+2),c.readInt8(o,a+3)],a+=4,l.fsSelection=c.readUshort(o,a),a+=2,l.usFirstCharIndex=c.readUshort(o,a),a+=2,l.usLastCharIndex=c.readUshort(o,a),a+=2,l.sTypoAscender=c.readShort(o,a),a+=2,l.sTypoDescender=c.readShort(o,a),a+=2,l.sTypoLineGap=c.readShort(o,a),a+=2,l.usWinAscent=c.readUshort(o,a),a+=2,l.usWinDescent=c.readUshort(o,a),a+=2},e["OS/2"].version1=function(o,a,l){var c=e._bin;return a=e["OS/2"].version0(o,a,l),l.ulCodePageRange1=c.readUint(o,a),a+=4,l.ulCodePageRange2=c.readUint(o,a),a+=4},e["OS/2"].version2=function(o,a,l){var c=e._bin;return a=e["OS/2"].version1(o,a,l),l.sxHeight=c.readShort(o,a),a+=2,l.sCapHeight=c.readShort(o,a),a+=2,l.usDefault=c.readUshort(o,a),a+=2,l.usBreak=c.readUshort(o,a),a+=2,l.usMaxContext=c.readUshort(o,a),a+=2},e["OS/2"].version5=function(o,a,l){var c=e._bin;return a=e["OS/2"].version2(o,a,l),l.usLowerOpticalPointSize=c.readUshort(o,a),a+=2,l.usUpperOpticalPointSize=c.readUshort(o,a),a+=2},e.post={},e.post.parse=function(o,a,l){var c=e._bin,A={};return A.version=c.readFixed(o,a),a+=4,A.italicAngle=c.readFixed(o,a),a+=4,A.underlinePosition=c.readShort(o,a),a+=2,A.underlineThickness=c.readShort(o,a),a+=2,A},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(o,a){var l=o.cmap,c=-1;if(l.p0e4!=null?c=l.p0e4:l.p3e1!=null?c=l.p3e1:l.p1e0!=null?c=l.p1e0:l.p0e3!=null&&(c=l.p0e3),c==-1)throw"no familiar platform and encoding!";var A=l.tables[c];if(A.format==0)return a>=A.map.length?0:A.map[a];if(A.format==4){for(var u=-1,h=0;h<A.endCount.length;h++)if(a<=A.endCount[h]){u=h;break}return u==-1||A.startCount[u]>a?0:65535&(A.idRangeOffset[u]!=0?A.glyphIdArray[a-A.startCount[u]+(A.idRangeOffset[u]>>1)-(A.idRangeOffset.length-u)]:a+A.idDelta[u])}if(A.format==12){if(a>A.groups[A.groups.length-1][1])return 0;for(h=0;h<A.groups.length;h++){var f=A.groups[h];if(f[0]<=a&&a<=f[1])return f[2]+(a-f[0])}return 0}throw"unknown cmap table format "+A.format},e.U.glyphToPath=function(o,a){var l={cmds:[],crds:[]};if(o.SVG&&o.SVG.entries[a]){var c=o.SVG.entries[a];return c==null?l:(typeof c=="string"&&(c=e.SVG.toPath(c),o.SVG.entries[a]=c),c)}if(o.CFF){var A={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:o.CFF.Private?o.CFF.Private.defaultWidthX:0,open:!1},u=o.CFF,h=o.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=a;)f+=2;h=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(o.CFF.CharStrings[a],A,u,h,l)}else o.glyf&&e.U._drawGlyf(a,o,l);return l},e.U._drawGlyf=function(o,a,l){var c=a.glyf[o];c==null&&(c=a.glyf[o]=e.glyf._parseGlyf(a,o)),c!=null&&(c.noc>-1?e.U._simpleGlyph(c,l):e.U._compoGlyph(c,a,l))},e.U._simpleGlyph=function(o,a){for(var l=0;l<o.noc;l++){for(var c=l==0?0:o.endPts[l-1]+1,A=o.endPts[l],u=c;u<=A;u++){var h=u==c?A:u-1,f=u==A?c:u+1,d=1&o.flags[u],p=1&o.flags[h],m=1&o.flags[f],b=o.xs[u],g=o.ys[u];if(u==c)if(d){if(!p){e.U.P.moveTo(a,b,g);continue}e.U.P.moveTo(a,o.xs[h],o.ys[h])}else p?e.U.P.moveTo(a,o.xs[h],o.ys[h]):e.U.P.moveTo(a,(o.xs[h]+b)/2,(o.ys[h]+g)/2);d?p&&e.U.P.lineTo(a,b,g):m?e.U.P.qcurveTo(a,b,g,o.xs[f],o.ys[f]):e.U.P.qcurveTo(a,b,g,(b+o.xs[f])/2,(g+o.ys[f])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(o,a,l){for(var c=0;c<o.parts.length;c++){var A={cmds:[],crds:[]},u=o.parts[c];e.U._drawGlyf(u.glyphIndex,a,A);for(var h=u.m,f=0;f<A.crds.length;f+=2){var d=A.crds[f],p=A.crds[f+1];l.crds.push(d*h.a+p*h.b+h.tx),l.crds.push(d*h.c+p*h.d+h.ty)}for(f=0;f<A.cmds.length;f++)l.cmds.push(A.cmds[f])}},e.U._getGlyphClass=function(o,a){var l=e._lctf.getInterval(a,o);return l==-1?0:a[l+2]},e.U.getPairAdjustment=function(o,a,l){var c=!1;if(o.GPOS)for(var A=o.GPOS,u=A.lookupList,h=A.featureList,f=[],d=0;d<h.length;d++){var p=h[d];if(p.tag=="kern"){c=!0;for(var m=0;m<p.tab.length;m++)if(!f[p.tab[m]]){f[p.tab[m]]=!0;for(var b=u[p.tab[m]],g=0;g<b.tabs.length;g++)if(b.tabs[g]!=null){var w,I=b.tabs[g];if((!I.coverage||(w=e._lctf.coverageIndex(I.coverage,a))!=-1)&&b.ltype!=1){if(b.ltype==2){var v=null;if(I.fmt==1){var E=I.pairsets[w];for(d=0;d<E.length;d++)E[d].gid2==l&&(v=E[d])}else if(I.fmt==2){var S=e.U._getGlyphClass(a,I.classDef1),C=e.U._getGlyphClass(l,I.classDef2);v=I.matrix[S][C]}if(v){var M=0;return v.val1&&v.val1[2]&&(M+=v.val1[2]),v.val2&&v.val2[0]&&(M+=v.val2[0]),M}}}}}}}if(o.kern&&!c){var D=o.kern.glyph1.indexOf(a);if(D!=-1){var T=o.kern.rval[D].glyph2.indexOf(l);if(T!=-1)return o.kern.rval[D].vals[T]}}return 0},e.U._applySubs=function(o,a,l,c){for(var A=o.length-a-1,u=0;u<l.tabs.length;u++)if(l.tabs[u]!=null){var h,f=l.tabs[u];if(!f.coverage||(h=e._lctf.coverageIndex(f.coverage,o[a]))!=-1){if(l.ltype==1)o[a],f.fmt==1?o[a]=o[a]+f.delta:o[a]=f.newg[h];else if(l.ltype==4)for(var d=f.vals[h],p=0;p<d.length;p++){var m=d[p],b=m.chain.length;if(!(b>A)){for(var g=!0,w=0,I=0;I<b;I++){for(;o[a+w+(1+I)]==-1;)w++;m.chain[I]!=o[a+w+(1+I)]&&(g=!1)}if(g){for(o[a]=m.nglyph,I=0;I<b+w;I++)o[a+I+1]=-1;break}}}else if(l.ltype==5&&f.fmt==2)for(var v=e._lctf.getInterval(f.cDef,o[a]),E=f.cDef[v+2],S=f.scset[E],C=0;C<S.length;C++){var M=S[C],D=M.input;if(!(D.length>A)){for(g=!0,I=0;I<D.length;I++){var T=e._lctf.getInterval(f.cDef,o[a+1+I]);if(v==-1&&f.cDef[T+2]!=D[I]){g=!1;break}}if(g){var B=M.substLookupRecords;for(p=0;p<B.length;p+=2)B[p],B[p+1]}}}else if(l.ltype==6&&f.fmt==3){if(!e.U._glsCovered(o,f.backCvg,a-f.backCvg.length)||!e.U._glsCovered(o,f.inptCvg,a)||!e.U._glsCovered(o,f.ahedCvg,a+f.inptCvg.length))continue;var R=f.lookupRec;for(C=0;C<R.length;C+=2){v=R[C];var P=c[R[C+1]];e.U._applySubs(o,a+v,P,c)}}}}},e.U._glsCovered=function(o,a,l){for(var c=0;c<a.length;c++)if(e._lctf.coverageIndex(a[c],o[l+c])==-1)return!1;return!0},e.U.glyphsToPath=function(o,a,l){for(var c={cmds:[],crds:[]},A=0,u=0;u<a.length;u++){var h=a[u];if(h!=-1){for(var f=u<a.length-1&&a[u+1]!=-1?a[u+1]:0,d=e.U.glyphToPath(o,h),p=0;p<d.crds.length;p+=2)c.crds.push(d.crds[p]+A),c.crds.push(d.crds[p+1]);for(l&&c.cmds.push(l),p=0;p<d.cmds.length;p++)c.cmds.push(d.cmds[p]);l&&c.cmds.push("X"),A+=o.hmtx.aWidth[h],u<a.length-1&&(A+=e.U.getPairAdjustment(o,h,f))}}return c},e.U.P={},e.U.P.moveTo=function(o,a,l){o.cmds.push("M"),o.crds.push(a,l)},e.U.P.lineTo=function(o,a,l){o.cmds.push("L"),o.crds.push(a,l)},e.U.P.curveTo=function(o,a,l,c,A,u,h){o.cmds.push("C"),o.crds.push(a,l,c,A,u,h)},e.U.P.qcurveTo=function(o,a,l,c,A){o.cmds.push("Q"),o.crds.push(a,l,c,A)},e.U.P.closePath=function(o){o.cmds.push("Z")},e.U._drawCFF=function(o,a,l,c,A){for(var u=a.stack,h=a.nStems,f=a.haveWidth,d=a.width,p=a.open,m=0,b=a.x,g=a.y,w=0,I=0,v=0,E=0,S=0,C=0,M=0,D=0,T=0,B=0,R={val:0,size:0};m<o.length;){e.CFF.getCharString(o,m,R);var P=R.val;if(m+=R.size,P=="o1"||P=="o18")u.length%2!=0&&!f&&(d=u.shift()+c.nominalWidthX),h+=u.length>>1,u.length=0,f=!0;else if(P=="o3"||P=="o23")u.length%2!=0&&!f&&(d=u.shift()+c.nominalWidthX),h+=u.length>>1,u.length=0,f=!0;else if(P=="o4")u.length>1&&!f&&(d=u.shift()+c.nominalWidthX,f=!0),p&&e.U.P.closePath(A),g+=u.pop(),e.U.P.moveTo(A,b,g),p=!0;else if(P=="o5")for(;u.length>0;)b+=u.shift(),g+=u.shift(),e.U.P.lineTo(A,b,g);else if(P=="o6"||P=="o7")for(var _=u.length,Q=P=="o6",W=0;W<_;W++){var U=u.shift();Q?b+=U:g+=U,Q=!Q,e.U.P.lineTo(A,b,g)}else if(P=="o8"||P=="o24"){_=u.length;for(var H=0;H+6<=_;)w=b+u.shift(),I=g+u.shift(),v=w+u.shift(),E=I+u.shift(),b=v+u.shift(),g=E+u.shift(),e.U.P.curveTo(A,w,I,v,E,b,g),H+=6;P=="o24"&&(b+=u.shift(),g+=u.shift(),e.U.P.lineTo(A,b,g))}else{if(P=="o11")break;if(P=="o1234"||P=="o1235"||P=="o1236"||P=="o1237")P=="o1234"&&(I=g,v=(w=b+u.shift())+u.shift(),B=E=I+u.shift(),C=E,D=g,b=(M=(S=(T=v+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(A,w,I,v,E,T,B),e.U.P.curveTo(A,S,C,M,D,b,g)),P=="o1235"&&(w=b+u.shift(),I=g+u.shift(),v=w+u.shift(),E=I+u.shift(),T=v+u.shift(),B=E+u.shift(),S=T+u.shift(),C=B+u.shift(),M=S+u.shift(),D=C+u.shift(),b=M+u.shift(),g=D+u.shift(),u.shift(),e.U.P.curveTo(A,w,I,v,E,T,B),e.U.P.curveTo(A,S,C,M,D,b,g)),P=="o1236"&&(w=b+u.shift(),I=g+u.shift(),v=w+u.shift(),B=E=I+u.shift(),C=E,M=(S=(T=v+u.shift())+u.shift())+u.shift(),D=C+u.shift(),b=M+u.shift(),e.U.P.curveTo(A,w,I,v,E,T,B),e.U.P.curveTo(A,S,C,M,D,b,g)),P=="o1237"&&(w=b+u.shift(),I=g+u.shift(),v=w+u.shift(),E=I+u.shift(),T=v+u.shift(),B=E+u.shift(),S=T+u.shift(),C=B+u.shift(),M=S+u.shift(),D=C+u.shift(),Math.abs(M-b)>Math.abs(D-g)?b=M+u.shift():g=D+u.shift(),e.U.P.curveTo(A,w,I,v,E,T,B),e.U.P.curveTo(A,S,C,M,D,b,g));else if(P=="o14"){if(u.length>0&&!f&&(d=u.shift()+l.nominalWidthX,f=!0),u.length==4){var O=u.shift(),F=u.shift(),z=u.shift(),k=u.shift(),X=e.CFF.glyphBySE(l,z),te=e.CFF.glyphBySE(l,k);e.U._drawCFF(l.CharStrings[X],a,l,c,A),a.x=O,a.y=F,e.U._drawCFF(l.CharStrings[te],a,l,c,A)}p&&(e.U.P.closePath(A),p=!1)}else if(P=="o19"||P=="o20")u.length%2!=0&&!f&&(d=u.shift()+c.nominalWidthX),h+=u.length>>1,u.length=0,f=!0,m+=h+7>>3;else if(P=="o21")u.length>2&&!f&&(d=u.shift()+c.nominalWidthX,f=!0),g+=u.pop(),b+=u.pop(),p&&e.U.P.closePath(A),e.U.P.moveTo(A,b,g),p=!0;else if(P=="o22")u.length>1&&!f&&(d=u.shift()+c.nominalWidthX,f=!0),b+=u.pop(),p&&e.U.P.closePath(A),e.U.P.moveTo(A,b,g),p=!0;else if(P=="o25"){for(;u.length>6;)b+=u.shift(),g+=u.shift(),e.U.P.lineTo(A,b,g);w=b+u.shift(),I=g+u.shift(),v=w+u.shift(),E=I+u.shift(),b=v+u.shift(),g=E+u.shift(),e.U.P.curveTo(A,w,I,v,E,b,g)}else if(P=="o26")for(u.length%2&&(b+=u.shift());u.length>0;)w=b,I=g+u.shift(),b=v=w+u.shift(),g=(E=I+u.shift())+u.shift(),e.U.P.curveTo(A,w,I,v,E,b,g);else if(P=="o27")for(u.length%2&&(g+=u.shift());u.length>0;)I=g,v=(w=b+u.shift())+u.shift(),E=I+u.shift(),b=v+u.shift(),g=E,e.U.P.curveTo(A,w,I,v,E,b,g);else if(P=="o10"||P=="o29"){var ie=P=="o10"?c:l;if(u.length==0)console.debug("error: empty stack");else{var re=u.pop(),se=ie.Subrs[re+ie.Bias];a.x=b,a.y=g,a.nStems=h,a.haveWidth=f,a.width=d,a.open=p,e.U._drawCFF(se,a,l,c,A),b=a.x,g=a.y,h=a.nStems,f=a.haveWidth,d=a.width,p=a.open}}else if(P=="o30"||P=="o31"){var oe=u.length,le=(H=0,P=="o31");for(H+=oe-(_=-3&oe);H<_;)le?(I=g,v=(w=b+u.shift())+u.shift(),g=(E=I+u.shift())+u.shift(),_-H==5?(b=v+u.shift(),H++):b=v,le=!1):(w=b,I=g+u.shift(),v=w+u.shift(),E=I+u.shift(),b=v+u.shift(),_-H==5?(g=E+u.shift(),H++):g=E,le=!0),e.U.P.curveTo(A,w,I,v,E,b,g),H+=4}else{if((P+"").charAt(0)=="o")throw console.debug("Unknown operation: "+P,o),P;u.push(P)}}}a.x=b,a.y=g,a.nStems=h,a.haveWidth=f,a.width=d,a.open=p};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}function v$(){return function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,o=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(P,_){for(var Q=new t(31),W=0;W<31;++W)Q[W]=_+=1<<P[W-1];var U=new n(Q[30]);for(W=1;W<30;++W)for(var H=Q[W];H<Q[W+1];++H)U[H]=H-Q[W]<<5|W;return[Q,U]},A=c(o,2),u=A[0],h=A[1];u[28]=258,h[258]=28;for(var f=c(a,0)[0],d=new t(32768),p=0;p<32768;++p){var m=(43690&p)>>>1|(21845&p)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,d[p]=((65280&m)>>>8|(255&m)<<8)>>>1}var b=function(P,_,Q){for(var W=P.length,U=0,H=new t(_);U<W;++U)++H[P[U]-1];var O,F=new t(_);for(U=0;U<_;++U)F[U]=F[U-1]+H[U-1]<<1;if(Q){O=new t(1<<_);var z=15-_;for(U=0;U<W;++U)if(P[U])for(var k=U<<4|P[U],X=_-P[U],te=F[P[U]-1]++<<X,ie=te|(1<<X)-1;te<=ie;++te)O[d[te]>>>z]=k}else for(O=new t(W),U=0;U<W;++U)P[U]&&(O[U]=d[F[P[U]-1]++]>>>15-P[U]);return O},g=new e(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var w=new e(32);for(p=0;p<32;++p)w[p]=5;var I=b(g,9,1),v=b(w,5,1),E=function(P){for(var _=P[0],Q=1;Q<P.length;++Q)P[Q]>_&&(_=P[Q]);return _},S=function(P,_,Q){var W=_/8|0;return(P[W]|P[W+1]<<8)>>(7&_)&Q},C=function(P,_){var Q=_/8|0;return(P[Q]|P[Q+1]<<8|P[Q+2]<<16)>>(7&_)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(P,_,Q){var W=new Error(_||M[P]);if(W.code=P,Error.captureStackTrace&&Error.captureStackTrace(W,D),!Q)throw W;return W},T=function(P,_,Q){var W=P.length;if(!W||Q&&!Q.l&&W<5)return _||new e(0);var U=!_||Q,H=!Q||Q.i;Q||(Q={}),_||(_=new e(3*W));var O,F=function(V){var q=_.length;if(V>q){var ne=new e(Math.max(2*q,V));ne.set(_),_=ne}},z=Q.f||0,k=Q.p||0,X=Q.b||0,te=Q.l,ie=Q.d,re=Q.m,se=Q.n,oe=8*W;do{if(!te){Q.f=z=S(P,k,1);var le=S(P,k+1,3);if(k+=3,!le){var be=P[(Pe=((O=k)/8|0)+(7&O&&1)+4)-4]|P[Pe-3]<<8,De=Pe+be;if(De>W){H&&D(0);break}U&&F(X+be),_.set(P.subarray(Pe,De),X),Q.b=X+=be,Q.p=k=8*De;continue}if(le==1)te=I,ie=v,re=9,se=5;else if(le==2){var pe=S(P,k,31)+257,K=S(P,k+10,15)+4,we=pe+S(P,k+5,31)+1;k+=14;for(var me=new e(we),fe=new e(19),de=0;de<K;++de)fe[l[de]]=S(P,k+3*de,7);k+=3*K;var Ne=E(fe),ve=(1<<Ne)-1,Se=b(fe,Ne,1);for(de=0;de<we;){var Pe,Ie=Se[S(P,k,ve)];if(k+=15&Ie,(Pe=Ie>>>4)<16)me[de++]=Pe;else{var We=0,j=0;for(Pe==16?(j=3+S(P,k,3),k+=2,We=me[de-1]):Pe==17?(j=3+S(P,k,7),k+=3):Pe==18&&(j=11+S(P,k,127),k+=7);j--;)me[de++]=We}}var G=me.subarray(0,pe),Ae=me.subarray(pe);re=E(G),se=E(Ae),te=b(G,re,1),ie=b(Ae,se,1)}else D(1);if(k>oe){H&&D(0);break}}U&&F(X+131072);for(var Be=(1<<re)-1,Re=(1<<se)-1,Ee=k;;Ee=k){var Fe=(We=te[C(P,k)&Be])>>>4;if((k+=15&We)>oe){H&&D(0);break}if(We||D(2),Fe<256)_[X++]=Fe;else{if(Fe==256){Ee=k,te=null;break}var _e=Fe-254;if(Fe>264){var Ce=o[de=Fe-257];_e=S(P,k,(1<<Ce)-1)+u[de],k+=Ce}var Z=ie[C(P,k)&Re],L=Z>>>4;if(Z||D(3),k+=15&Z,Ae=f[L],L>3&&(Ce=a[L],Ae+=C(P,k)&(1<<Ce)-1,k+=Ce),k>oe){H&&D(0);break}U&&F(X+131072);for(var N=X+_e;X<N;X+=4)_[X]=_[X-Ae],_[X+1]=_[X+1-Ae],_[X+2]=_[X+2-Ae],_[X+3]=_[X+3-Ae];X=N}}Q.l=te,Q.p=Ee,Q.b=X,te&&(z=1,Q.m=re,Q.d=ie,Q.n=se)}while(!z);return X==_.length?_:function(V,q,ne){(q==null||q<0)&&(q=0),(ne==null||ne>V.length)&&(ne=V.length);var ae=new(V instanceof t?t:V instanceof n?n:e)(ne-q);return ae.set(V.subarray(q,ne)),ae}(_,0,X)},B=new e(0),R=typeof TextDecoder<"u"&&new TextDecoder;try{R.decode(B,{stream:!0})}catch{}return i.convert_streams=function(P){var _=new DataView(P),Q=0;function W(){var pe=_.getUint16(Q);return Q+=2,pe}function U(){var pe=_.getUint32(Q);return Q+=4,pe}function H(pe){be.setUint16(De,pe),De+=2}function O(pe){be.setUint32(De,pe),De+=4}for(var F={signature:U(),flavor:U(),length:U(),numTables:W(),reserved:W(),totalSfntSize:U(),majorVersion:W(),minorVersion:W(),metaOffset:U(),metaLength:U(),metaOrigLength:U(),privOffset:U(),privLength:U()},z=0;Math.pow(2,z)<=F.numTables;)z++;z--;for(var k=16*Math.pow(2,z),X=16*F.numTables-k,te=12,ie=[],re=0;re<F.numTables;re++)ie.push({tag:U(),offset:U(),compLength:U(),origLength:U(),origChecksum:U()}),te+=16;var se,oe=new Uint8Array(12+16*ie.length+ie.reduce(function(pe,K){return pe+K.origLength+4},0)),le=oe.buffer,be=new DataView(le),De=0;return O(F.flavor),H(F.numTables),H(k),H(z),H(X),ie.forEach(function(pe){O(pe.tag),O(pe.origChecksum),O(te),O(pe.origLength),pe.outOffset=te,(te+=pe.origLength)%4!=0&&(te+=4-te%4)}),ie.forEach(function(pe){var K,we=P.slice(pe.offset,pe.offset+pe.compLength);if(pe.compLength!=pe.origLength){var me=new Uint8Array(pe.origLength);K=new Uint8Array(we,2),T(K,me)}else me=new Uint8Array(we);oe.set(me,pe.outOffset);var fe=0;(te=pe.outOffset+pe.origLength)%4!=0&&(fe=4-te%4),oe.set(new Uint8Array(fe).buffer,pe.outOffset+pe.origLength),se=te+fe}),le.slice(0,se)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function y$(i,e){let t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},o=1,a=2,l=4,c=8,A=16,u=32,h;function f(S){if(!h){let C={R:a,L:o,D:l,C:A,U:u,T:c};h=new Map;for(let M in n){let D=0;n[M].split(",").forEach(T=>{let[B,R]=T.split("+");B=parseInt(B,36),R=R?parseInt(R,36):0,h.set(D+=B,C[M]);for(let P=R;P--;)h.set(++D,C[M])})}}return h.get(S)||u}let d=1,p=2,m=3,b=4,g=[null,"isol","init","fina","medi"];function w(S){let C=new Uint8Array(S.length),M=u,D=d,T=-1;for(let B=0;B<S.length;B++){let R=S.codePointAt(B),P=f(R)|0,_=d;P&c||(M&(o|l|A)?P&(a|l|A)?(_=m,(D===d||D===m)&&C[T]++):P&(o|u)&&(D===p||D===b)&&C[T]--:M&(a|u)&&(D===p||D===b)&&C[T]--,D=C[B]=_,M=P,T=B,R>65535&&B++)}return C}function I(S,C){let M=[];for(let T=0;T<C.length;T++){let B=C.codePointAt(T);B>65535&&T++,M.push(i.U.codeToGlyph(S,B))}let D=S.GSUB;if(D){let{lookupList:T,featureList:B}=D,R,P=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,_=[];B.forEach(Q=>{if(P.test(Q.tag))for(let W=0;W<Q.tab.length;W++){if(_[Q.tab[W]])continue;_[Q.tab[W]]=!0;let U=T[Q.tab[W]],H=/^(isol|init|fina|medi)$/.test(Q.tag);H&&!R&&(R=w(C));for(let O=0;O<M.length;O++)(!R||!H||g[R[O]]===Q.tag)&&i.U._applySubs(M,O,U,T)}})}return M}function v(...S){for(let C=0;C<S.length;C++)if(typeof S[C]=="number")return S[C]}function E(S){let C=Object.create(null),M=S["OS/2"],D=S.hhea,T=S.head.unitsPerEm,B=v(M&&M.sTypoAscender,D&&D.ascender,T),R={unitsPerEm:T,ascender:B,descender:v(M&&M.sTypoDescender,D&&D.descender,0),capHeight:v(M&&M.sCapHeight,B),xHeight:v(M&&M.sxHeight,B),lineGap:v(M&&M.sTypoLineGap,D&&D.lineGap),forEachGlyph(P,_,Q,W){let U=0,H=1/R.unitsPerEm*_,O=I(S,P),F=0,z=-1;return O.forEach((k,X)=>{if(k!==-1){let te=C[k];if(!te){let{cmds:ie,crds:re}=i.U.glyphToPath(S,k),se="",oe=0;for(let K=0,we=ie.length;K<we;K++){let me=t[ie[K]];se+=ie[K];for(let fe=1;fe<=me;fe++)se+=(fe>1?",":"")+re[oe++]}let le,be,De,pe;if(re.length){le=be=1/0,De=pe=-1/0;for(let K=0,we=re.length;K<we;K+=2){let me=re[K],fe=re[K+1];me<le&&(le=me),fe<be&&(be=fe),me>De&&(De=me),fe>pe&&(pe=fe)}}else le=De=be=pe=0;te=C[k]={index:k,advanceWidth:S.hmtx.aWidth[k],xMin:le,yMin:be,xMax:De,yMax:pe,path:se,pathCommandCount:ie.length}}z!==-1&&(U+=i.U.getPairAdjustment(S,z,k)*H),W.call(null,te,U,F),te.advanceWidth&&(U+=te.advanceWidth*H),Q&&(U+=Q*_),z=k}F+=P.codePointAt(F)>65535?2:1}),U}};return R}return function(C){let M=new Uint8Array(C,0,4),D=i._bin.readASCII(M,0,4);if(D==="wOFF")C=e(C);else if(D==="wOF2")throw new Error("woff2 fonts not supported");return E(i.parse(C)[0])}}var x$=Qu({name:"Typr Font Parser",dependencies:[g$,v$,y$],init(i,e,t){let n=i(),o=e();return t(n,o)}}),bc={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},w$=new ke,D5=!1;function Uu(){return(self.performance||Date).now()}function b$(i){D5?console.warn("configureTextBuilder called after first font request; will be ignored."):R5(bc,i)}var H1=Object.create(null);function B5(i,e){D5=!0,i=R5({},i);let t=Uu();if(i.font=S$(i.font||bc.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||bc.sdfGlyphSize,i.colorRanges!=null){let f={};for(let d in i.colorRanges)if(i.colorRanges.hasOwnProperty(d)){let p=i.colorRanges[d];typeof p!="number"&&(p=w$.set(p).getHex()),f[d]=p}i.colorRanges=f}Object.freeze(i);let{textureWidth:n,sdfExponent:o}=bc,{sdfGlyphSize:a}=i,l=n/a*4,c=H1[a];if(!c){let f=document.createElement("canvas");f.width=n,f.height=a*256/l,c=H1[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:f,sdfTexture:new Vt(f,void 0,void 0,void 0,St,St),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,C$(c)}let{sdfTexture:A,sdfCanvas:u}=c,h=c.glyphsByFont.get(i.font);h||c.glyphsByFont.set(i.font,h=new Map),E$(i).then(f=>{let{glyphIds:d,glyphPositions:p,fontSize:m,unitsPerEm:b,timings:g}=f,w=[],I=new Float32Array(d.length*4),v=m/b,E=0,S=0,C=Uu();d.forEach((R,P)=>{let _=h.get(R);if(!_){let{path:H,pathBounds:O}=f.glyphData[R],F=Math.max(O[2]-O[0],O[3]-O[1])/a*(bc.sdfMargin*a+.5),z=c.glyphCount++,k=[O[0]-F,O[1]-F,O[2]+F,O[3]+F];h.set(R,_={path:H,atlasIndex:z,sdfViewBox:k}),w.push(_)}let{sdfViewBox:Q}=_,W=p[S++],U=p[S++];I[E++]=W+Q[0]*v,I[E++]=U+Q[1]*v,I[E++]=W+Q[2]*v,I[E++]=U+Q[3]*v,d[P]=_.atlasIndex}),g.quads=(g.quads||0)+(Uu()-C);let M=Uu();g.sdf={};let D=u.height,T=Math.ceil(c.glyphCount/l),B=Math.pow(2,Math.ceil(Math.log2(T*a)));B>D&&(console.info(`Increasing SDF texture size ${D}->${B}`),m$(u,n,B),A.dispose()),Promise.all(w.map(R=>L5(R,c,i.gpuAccelerateSDF).then(({timing:P})=>{g.sdf[R.atlasIndex]=P}))).then(()=>{w.length&&!c.contextLost&&(k5(c),A.needsUpdate=!0),g.sdfTotal=Uu()-M,g.total=Uu()-t,e(Object.freeze({parameters:i,sdfTexture:A,sdfGlyphSize:a,sdfExponent:o,glyphBounds:I,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{c.contextLost||p$(u)})}function L5({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:o,contextLost:a},l){if(a)return Promise.resolve({timing:-1});let{textureWidth:c,sdfExponent:A}=bc,u=Math.max(t[2]-t[0],t[3]-t[1]),h=Math.floor(e/4),f=h%(c/n)*n,d=Math.floor(h/(c/n))*n,p=e%4;return c$(n,n,i,t,u,A,o,f,d,p,l)}function C$(i){let e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;let n=[];i.glyphsByFont.forEach(o=>{o.forEach(a=>{n.push(L5(a,i,!0))})}),Promise.all(n).then(()=>{k5(i),i.sdfTexture.needsUpdate=!0})})}function LI({font:i,characters:e,sdfGlyphSize:t},n){let o=Array.isArray(e)?e.join(`
`):""+e;B5({font:i,sdfGlyphSize:t,text:o},n)}function R5(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}var O1;function S$(i){return O1||(O1=typeof document>"u"?{}:document.createElement("a")),O1.href=i,O1.href}function k5(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:o}=e,a=i.sdfCanvas.getContext("webgl"),l=t.image.data;(!l||l.length!==n*o*4)&&(l=new Uint8Array(n*o*4),t.image={width:n,height:o,data:l},t.flipY=!1,t.isDataTexture=!0),a.readPixels(0,0,n,o,a.RGBA,a.UNSIGNED_BYTE,l)}}var P5=Qu({name:"Typesetter",dependencies:[bc,x$,l$,f5],init(i,e,t,n){let{defaultFontURL:o}=i;return t(e,n(),{defaultFontURL:o})}}),E$=Qu({name:"Typesetter",dependencies:[P5],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){let e=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&e.push(i.caretPositions.buffer),i.glyphColors&&e.push(i.glyphColors.buffer),e}});function I$(){Object.keys(H1).forEach(i=>{let e=H1[i].sdfCanvas,{width:t,height:n}=e;console.log("%c.",`
      background: url(${e.toDataURL()});
      background-size: ${t}px ${n}px;
      color: transparent;
      font-size: 0;
      line-height: ${n}px;
      padding-left: ${t}px;
    `)})}var w5={};function M$(i){let e=w5[i];if(!e){let t=new Fi(1,1,i,i),n=t.clone(),o=t.attributes,a=n.attributes,l=new qe,c=o.uv.count;for(let A=0;A<c;A++)a.position.array[A*3]*=-1,a.normal.array[A*3+2]*=-1;["position","normal","uv"].forEach(A=>{l.setAttribute(A,new He([...o[A].array,...a[A].array],o[A].itemSize))}),l.setIndex([...t.index.array,...n.index.array.map(A=>A+c)]),l.translate(.5,.5,0),e=w5[i]=l}return e}var T$="aTroikaGlyphBounds",b5="aTroikaGlyphIndex",D$="aTroikaGlyphColor",W1=class extends Sa{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Xt,this.boundingBox=new Cn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){let t=this.getIndex().count;this.setDrawRange(e===Yn?t/2:0,e===zt?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=M$(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,o,a){MI(this,T$,e,4),MI(this,b5,t,1),MI(this,D$,a,3),this._blockBounds=n,this._chunkedBounds=o,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){let e=this._blockBounds;if(e){let{curveRadius:t,boundingBox:n}=this;if(t){let{PI:o,floor:a,min:l,max:c,sin:A,cos:u}=Math,h=o/2,f=o*2,d=Math.abs(t),p=e[0]/d,m=e[2]/d,b=a((p+h)/f)!==a((m+h)/f)?-d:l(A(p)*d,A(m)*d),g=a((p-h)/f)!==a((m-h)/f)?d:c(A(p)*d,A(m)*d),w=a((p+o)/f)!==a((m+o)/f)?d*2:c(d-u(p)*d,d-u(m)*d);n.min.set(b,e[1],t<0?-w:0),n.max.set(g,e[3],t<0?0:w)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(b5).count,n=this._chunkedBounds;if(n)for(let o=n.length;o--;){t=n[o].end;let a=n[o].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=t}};function MI(i,e,t,n){let o=i.getAttribute(e);t?o&&o.array.length===t.length?(o.array.set(t),o.needsUpdate=!0):(i.setAttribute(e,new vr(t,n)),delete i._maxInstanceCount,i.dispose()):o&&i.deleteAttribute(e)}var B$=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,L$=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,R$=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,k$=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function _5(i){let e=U1(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new he},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ct(0,0,0,0)},uTroikaClipRect:{value:new Ct(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new he},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ke},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new dt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:B$,vertexTransform:L$,fragmentDefs:R$,fragmentColorTransform:k$,customRewriter({vertexShader:t,fragmentShader:n}){let o=/\buniform\s+vec3\s+diffuse\b/;return o.test(n)&&(n=n.replace(o,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),o.test(t)||(t=t.replace(II,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}var RI=new Qt({color:16777215,side:zt,transparent:!0}),C5=8421504,S5=new Qe,G1=new Y,TI=new Y,rp=[],P$=new Y,DI="+x+y";function E5(i){return Array.isArray(i)?i[0]:i}var N5=()=>{let i=new Xe(new Fi(1,1),RI);return N5=()=>i,i},F5=()=>{let i=new Xe(new Fi(1,1,32,1),RI);return F5=()=>i,i},_$={type:"syncstart"},N$={type:"synccomplete"},Q5=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],F$=Q5.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),Ou=class extends Xe{constructor(){let e=new W1;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=C5,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=DI,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(_$),B5({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);let n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(o=>o&&o())})),this.dispatchEvent(N$),e&&e()})))}onBeforeRender(e,t,n,o,a,l){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a),a._hadOwnSide=a.hasOwnProperty("side"),this.geometry.setSide(a._actualSide=a.side),a.side=Pi}onAfterRender(e,t,n,o,a,l){a._hadOwnSide?a.side=a._actualSide:delete a.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=RI.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=_5(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function o(){e.removeEventListener("dispose",o),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return E5(this.material).getDepthMaterial()}get customDistanceMaterial(){return E5(this.material).getDistanceMaterial()}_prepareForRender(e){let t=e.isTextOutlineMaterial,n=e.uniforms,o=this.textRenderInfo;if(o){let{sdfTexture:c,blockBounds:A}=o;n.uTroikaSDFTexture.value=c,n.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),n.uTroikaSDFGlyphSize.value=o.sdfGlyphSize,n.uTroikaSDFExponent.value=o.sdfExponent,n.uTroikaTotalBounds.value.fromArray(A),n.uTroikaUseGlyphColors.value=!t&&!!o.glyphColors;let u=0,h=0,f=0,d,p,m,b=0,g=0;if(t){let{outlineWidth:I,outlineOffsetX:v,outlineOffsetY:E,outlineBlur:S,outlineOpacity:C}=this;u=this._parsePercent(I)||0,h=Math.max(0,this._parsePercent(S)||0),d=C,b=this._parsePercent(v)||0,g=this._parsePercent(E)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(m=this.strokeColor,n.uTroikaStrokeColor.value.set(m??C5),p=this.strokeOpacity,p==null&&(p=1)),d=this.fillOpacity;n.uTroikaDistanceOffset.value=u,n.uTroikaPositionOffset.value.set(b,g),n.uTroikaBlurRadius.value=h,n.uTroikaStrokeWidth.value=f,n.uTroikaStrokeOpacity.value=p,n.uTroikaFillOpacity.value=d??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)n.uTroikaClipRect.value.fromArray(w);else{let I=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(A[0]-I,A[1]-I,A[2]+I,A[3]+I)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;let a=t?this.outlineColor||0:this.color;if(a==null)delete e.color;else{let c=e.hasOwnProperty("color")?e.color:e.color=new ke;(a!==c._input||typeof a=="object")&&c.set(c._input=a)}let l=this.orientation||DI;if(l!==e._orientation){let c=n.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let A=l!==DI&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(A){let[,u,h,f,d]=A;G1.set(0,0,0)[h]=u==="-"?1:-1,TI.set(0,0,0)[d]=f==="-"?-1:1,S5.lookAt(P$,G1.cross(TI),TI),c.setFromMatrix4(S5)}else c.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new he){t.copy(e);let n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new he){return G1.copy(e),this.localPositionToTextCoords(this.worldToLocal(G1),t)}raycast(e,t){let{textRenderInfo:n,curveRadius:o}=this;if(n){let a=n.blockBounds,l=o?F5():N5(),c=l.geometry,{position:A,uv:u}=c.attributes;for(let h=0;h<u.count;h++){let f=a[0]+u.getX(h)*(a[2]-a[0]),d=a[1]+u.getY(h)*(a[3]-a[1]),p=0;o&&(p=o-Math.cos(f/o)*o,f=Math.sin(f/o)*o),A.setXYZ(h,f,d,p)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,rp.length=0,l.raycast(e,rp);for(let h=0;h<rp.length;h++)rp[h].object=this,t.push(rp[h])}}copy(e){let t=this.geometry;return super.copy(e),this.geometry=t,F$.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};Q5.forEach(i=>{let e="_private_"+i;Object.defineProperty(Ou.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});function Q$(i,e,t){let n=null,{caretHeight:o}=i,a=O$(i),l=1/0;return a.forEach((c,A)=>{Math.abs(t-(A+o/2))<Math.abs(t-(l+o/2))&&(l=A)}),a.get(l).forEach(c=>{(!n||Math.abs(e-c.x)<Math.abs(e-n.x))&&(n=c)}),n}var I5=new WeakMap;function U$(i,e,t){let n;if(i){let o=I5.get(i);if(o&&o.start===e&&o.end===t)return o.rects;let{caretPositions:a,caretHeight:l}=i;if(t<e){let A=e;e=t,t=A}e=Math.max(e,0),t=Math.min(t,a.length+1),n=[];let c=null;for(let A=e;A<t;A++){let u=a[A*3],h=a[A*3+1],f=Math.min(u,h),d=Math.max(u,h),p=a[A*3+2];(!c||p!==c.bottom||f>c.right||d<c.left)&&(c={left:1/0,right:-1/0,bottom:p,top:p+l},n.push(c)),c.left=Math.min(f,c.left),c.right=Math.max(d,c.right)}n.sort((A,u)=>u.bottom-A.bottom||A.left-u.left);for(let A=n.length-1;A-- >0;){let u=n[A],h=n[A+1];u.bottom===h.bottom&&u.left<=h.right&&u.right>=h.left&&(h.left=Math.min(h.left,u.left),h.right=Math.max(h.right,u.right),n.splice(A,1))}I5.set(i,{start:e,end:t,rects:n})}return n}var M5=new WeakMap;function O$(i){let e=M5.get(i);if(!e){let{caretPositions:t,caretHeight:n}=i;e=new Map;for(let o=0;o<t.length;o+=3){let a=t[o+2],l=e.get(a);l||e.set(a,l=[]),l.push({x:t[o],y:a,height:n,charIndex:o/3}),o+3>=t.length&&l.push({x:t[o+1],y:a,height:n,charIndex:o/3+1})}}return M5.set(i,e),e}var QI=class{chunkSize;data;constructor(e=32){this.chunkSize=e,this.data=new Map}get(e,t,n){let{chunkSize:o}=this,a=`${e}:${t}:${n}`,l=this.data.get(a);return l||(l=new Uint32Array(o*o*o),this.data.set(a,l)),l}save(){}},UI=class extends Xe{constructor(e){super(new qe,e),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}raycast(){}update({bounds:e,vertices:t}){let{geometry:n}=this,o=new Ji(t,9);n.setAttribute("position",new Ln(o,3,0)),n.setAttribute("normal",new Ln(o,3,3)),n.setAttribute("color",new Ln(o,3,6)),n.boundingBox||(n.boundingBox=new Cn),n.boundingBox.min.set(e[0],e[1],e[2]),n.boundingBox.max.set(e[3],e[4],e[5]),n.boundingSphere||(n.boundingSphere=new Xt),n.boundingBox.getBoundingSphere(n.boundingSphere)}},G$=new ke,sp=new Xe(new En(1,1,1)),kI=[],PI=new Xt,z$=new Qe,Y1=new Y,OI=class extends Xe{constructor(e){let t=new Sa;t.boundingSphere=new Xt,t.setIndex(sp.geometry.getIndex()),t.setAttribute("position",sp.geometry.getAttribute("position")),t.setAttribute("normal",sp.geometry.getAttribute("normal")),super(t,e),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}getColor(e){let{geometry:t}=this,n=t.getAttribute("color");return G$.fromBufferAttribute(n,e).convertLinearToSRGB()}raycast(e,t){let{geometry:n,matrixWorld:o,parent:a}=this;if(!a?.visible||!n.boundingSphere||(PI.copy(n.boundingSphere),PI.applyMatrix4(o),!e.ray.intersectsSphere(PI)))return;let l=n.getAttribute("instance");for(let c=0,A=n.instanceCount;c<A;c++)Y1.fromBufferAttribute(l,c),sp.matrixWorld.multiplyMatrices(o,z$.makeTranslation(Y1.x,Y1.y,Y1.z)),sp.raycast(e,kI),kI.forEach(u=>{u.object=this,u.instanceId=c,t.push(u)}),kI.length=0}update({voxels:e}){let{geometry:t}=this,n=new nf(e,6,1);t.setAttribute("instance",new Ln(n,3,0)),t.setAttribute("color",new Ln(n,3,3)),t.instanceCount=t._maxInstanceCount=n.count}},GI=class extends cn{triangles;voxels;request=0;version=0;constructor({geometry:e,materials:t,position:n}){super(),this.position.copy(n),this.updateMatrixWorld(),this.matrixAutoUpdate=!1,this.triangles=new UI(t.triangles),this.add(this.triangles),this.voxels=new OI(t.voxels),this.add(this.voxels),this.update(e)}dispose(){let{triangles:e,voxels:t}=this;e.dispose(),t.dispose()}update(e){if(!e)return void(this.visible=!1);let{triangles:t,voxels:n}=this;t.update(e),n.update(e),n.geometry.boundingBox=t.geometry.boundingBox,n.geometry.boundingSphere=t.geometry.boundingSphere,this.visible=!0}},zI=class{instances;queue;constructor({buffer:e,concurrency:t=navigator.hardwareConcurrency||1,options:n,program:o,script:a}){this.queue=[],o().then(l=>{this.instances=Array.from({length:t},()=>{let c=new a;c.buffer=new Uint32Array(e),c.isBusy=!0,c.run=({buffers:h,resolve:f})=>{c.isBusy=!0,c.resolve=f;let d=h[0].length;h.forEach((p,m)=>{c.buffer.set(p,d*m)}),c.postMessage(c.buffer,[c.buffer.buffer])};let A=()=>{c.removeEventListener("message",A),c.addEventListener("message",u);let h=this.queue.shift();h?c.run(h):c.isBusy=!1},u=({data:{buffer:h,data:f}})=>{c.buffer=h;let{resolve:d}=c;delete c.resolve,d(f);let p=this.queue.shift();p?c.run(p):c.isBusy=!1};return c.addEventListener("message",A),c.postMessage({options:n,program:l}),c})})}dispose(){let{instances:e}=this;e&&e.forEach(t=>t.terminate())}run(e){let{instances:t,queue:n}=this;return new Promise(o=>{if(!t)return void n.push({buffers:e,resolve:o});let a;for(let l=0,c=t.length;l<c;l++)if(!t[l].isBusy){a=t[l];break}a?a.run({buffers:e,resolve:o}):n.push({buffers:e,resolve:o})})}};function H$(i){return function(e,t,n,o){function a(m,b,g){var w=g?WebAssembly.instantiateStreaming:WebAssembly.instantiate,I=g?WebAssembly.compileStreaming:WebAssembly.compile;return b?w(m,b):I(m)}var l=null,c=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;if(!1)var A,u;if(t)return a(fetch(t),o,!0);if(c)l=Buffer.from(n,"base64");else{var h=globalThis.atob(n),f=h.length;l=new Uint8Array(new ArrayBuffer(f));for(var d=0;d<f;d++)l[d]=h.charCodeAt(d)}if(e){var p=new WebAssembly.Module(l);return o?new WebAssembly.Instance(p,o):p}return a(l,o,!1)}(0,null,"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AACsCwAArAQAAKUFAACvBgAApgcAAKoAAACjAQAAqQIAAKADAAAwDQAAOQwAADMPAAA6DgAANgkAAD8IAAA1CwAAPAoAADwFAAA1BAAAPwcAADYGAAA6AQAAMwAAADkDAAAwAgAAkA4AAJkPAACTDAAAmg0AAJYKAACfCwAAlQgAAJwJAACcBgAAlQcAAJ8EAACWBQAAmgIAAJMDAACZAAAAkAEAAAAPAAAJDgAAAw0AAAoMAAAGCwAADwoAAAUJAAAMCAAADAcAAAUGAAAPBQAABgQAAAoDAAADAgAACQEAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAA/////////////////////////////////////////////////////////////////////wAAAAABAAAACQAAAP////////////////////////////////////////////////////////////////////8BAAAACAAAAAMAAAAJAAAACAAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAAKAAAA/////////////////////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAEAAAACAAAACgAAAP////////////////////////////////////////////////////8JAAAAAgAAAAoAAAAAAAAAAgAAAAkAAAD/////////////////////////////////////////////////////AgAAAAgAAAADAAAAAgAAAAoAAAAIAAAACgAAAAkAAAAIAAAA/////////////////////////////////////wMAAAALAAAAAgAAAP////////////////////////////////////////////////////////////////////8AAAAACwAAAAIAAAAIAAAACwAAAAAAAAD/////////////////////////////////////////////////////AQAAAAkAAAAAAAAAAgAAAAMAAAALAAAA/////////////////////////////////////////////////////wEAAAALAAAAAgAAAAEAAAAJAAAACwAAAAkAAAAIAAAACwAAAP////////////////////////////////////8DAAAACgAAAAEAAAALAAAACgAAAAMAAAD/////////////////////////////////////////////////////AAAAAAoAAAABAAAAAAAAAAgAAAAKAAAACAAAAAsAAAAKAAAA/////////////////////////////////////wMAAAAJAAAAAAAAAAMAAAALAAAACQAAAAsAAAAKAAAACQAAAP////////////////////////////////////8JAAAACAAAAAoAAAAKAAAACAAAAAsAAAD/////////////////////////////////////////////////////BAAAAAcAAAAIAAAA/////////////////////////////////////////////////////////////////////wQAAAADAAAAAAAAAAcAAAADAAAABAAAAP////////////////////////////////////////////////////8AAAAAAQAAAAkAAAAIAAAABAAAAAcAAAD/////////////////////////////////////////////////////BAAAAAEAAAAJAAAABAAAAAcAAAABAAAABwAAAAMAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAgAAAAEAAAABwAAAP////////////////////////////////////////////////////8DAAAABAAAAAcAAAADAAAAAAAAAAQAAAABAAAAAgAAAAoAAAD/////////////////////////////////////CQAAAAIAAAAKAAAACQAAAAAAAAACAAAACAAAAAQAAAAHAAAA/////////////////////////////////////wIAAAAKAAAACQAAAAIAAAAJAAAABwAAAAIAAAAHAAAAAwAAAAcAAAAJAAAABAAAAP////////////////////8IAAAABAAAAAcAAAADAAAACwAAAAIAAAD/////////////////////////////////////////////////////CwAAAAQAAAAHAAAACwAAAAIAAAAEAAAAAgAAAAAAAAAEAAAA/////////////////////////////////////wkAAAAAAAAAAQAAAAgAAAAEAAAABwAAAAIAAAADAAAACwAAAP////////////////////////////////////8EAAAABwAAAAsAAAAJAAAABAAAAAsAAAAJAAAACwAAAAIAAAAJAAAAAgAAAAEAAAD/////////////////////AwAAAAoAAAABAAAAAwAAAAsAAAAKAAAABwAAAAgAAAAEAAAA/////////////////////////////////////wEAAAALAAAACgAAAAEAAAAEAAAACwAAAAEAAAAAAAAABAAAAAcAAAALAAAABAAAAP////////////////////8EAAAABwAAAAgAAAAJAAAAAAAAAAsAAAAJAAAACwAAAAoAAAALAAAAAAAAAAMAAAD/////////////////////BAAAAAcAAAALAAAABAAAAAsAAAAJAAAACQAAAAsAAAAKAAAA/////////////////////////////////////wkAAAAFAAAABAAAAP////////////////////////////////////////////////////////////////////8JAAAABQAAAAQAAAAAAAAACAAAAAMAAAD/////////////////////////////////////////////////////AAAAAAUAAAAEAAAAAQAAAAUAAAAAAAAA/////////////////////////////////////////////////////wgAAAAFAAAABAAAAAgAAAADAAAABQAAAAMAAAABAAAABQAAAP////////////////////////////////////8BAAAAAgAAAAoAAAAJAAAABQAAAAQAAAD/////////////////////////////////////////////////////AwAAAAAAAAAIAAAAAQAAAAIAAAAKAAAABAAAAAkAAAAFAAAA/////////////////////////////////////wUAAAACAAAACgAAAAUAAAAEAAAAAgAAAAQAAAAAAAAAAgAAAP////////////////////////////////////8CAAAACgAAAAUAAAADAAAAAgAAAAUAAAADAAAABQAAAAQAAAADAAAABAAAAAgAAAD/////////////////////CQAAAAUAAAAEAAAAAgAAAAMAAAALAAAA/////////////////////////////////////////////////////wAAAAALAAAAAgAAAAAAAAAIAAAACwAAAAQAAAAJAAAABQAAAP////////////////////////////////////8AAAAABQAAAAQAAAAAAAAAAQAAAAUAAAACAAAAAwAAAAsAAAD/////////////////////////////////////AgAAAAEAAAAFAAAAAgAAAAUAAAAIAAAAAgAAAAgAAAALAAAABAAAAAgAAAAFAAAA/////////////////////woAAAADAAAACwAAAAoAAAABAAAAAwAAAAkAAAAFAAAABAAAAP////////////////////////////////////8EAAAACQAAAAUAAAAAAAAACAAAAAEAAAAIAAAACgAAAAEAAAAIAAAACwAAAAoAAAD/////////////////////BQAAAAQAAAAAAAAABQAAAAAAAAALAAAABQAAAAsAAAAKAAAACwAAAAAAAAADAAAA/////////////////////wUAAAAEAAAACAAAAAUAAAAIAAAACgAAAAoAAAAIAAAACwAAAP////////////////////////////////////8JAAAABwAAAAgAAAAFAAAABwAAAAkAAAD/////////////////////////////////////////////////////CQAAAAMAAAAAAAAACQAAAAUAAAADAAAABQAAAAcAAAADAAAA/////////////////////////////////////wAAAAAHAAAACAAAAAAAAAABAAAABwAAAAEAAAAFAAAABwAAAP////////////////////////////////////8BAAAABQAAAAMAAAADAAAABQAAAAcAAAD/////////////////////////////////////////////////////CQAAAAcAAAAIAAAACQAAAAUAAAAHAAAACgAAAAEAAAACAAAA/////////////////////////////////////woAAAABAAAAAgAAAAkAAAAFAAAAAAAAAAUAAAADAAAAAAAAAAUAAAAHAAAAAwAAAP////////////////////8IAAAAAAAAAAIAAAAIAAAAAgAAAAUAAAAIAAAABQAAAAcAAAAKAAAABQAAAAIAAAD/////////////////////AgAAAAoAAAAFAAAAAgAAAAUAAAADAAAAAwAAAAUAAAAHAAAA/////////////////////////////////////wcAAAAJAAAABQAAAAcAAAAIAAAACQAAAAMAAAALAAAAAgAAAP////////////////////////////////////8JAAAABQAAAAcAAAAJAAAABwAAAAIAAAAJAAAAAgAAAAAAAAACAAAABwAAAAsAAAD/////////////////////AgAAAAMAAAALAAAAAAAAAAEAAAAIAAAAAQAAAAcAAAAIAAAAAQAAAAUAAAAHAAAA/////////////////////wsAAAACAAAAAQAAAAsAAAABAAAABwAAAAcAAAABAAAABQAAAP////////////////////////////////////8JAAAABQAAAAgAAAAIAAAABQAAAAcAAAAKAAAAAQAAAAMAAAAKAAAAAwAAAAsAAAD/////////////////////BQAAAAcAAAAAAAAABQAAAAAAAAAJAAAABwAAAAsAAAAAAAAAAQAAAAAAAAAKAAAACwAAAAoAAAAAAAAA/////wsAAAAKAAAAAAAAAAsAAAAAAAAAAwAAAAoAAAAFAAAAAAAAAAgAAAAAAAAABwAAAAUAAAAHAAAAAAAAAP////8LAAAACgAAAAUAAAAHAAAACwAAAAUAAAD/////////////////////////////////////////////////////CgAAAAYAAAAFAAAA/////////////////////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAUAAAAKAAAABgAAAP////////////////////////////////////////////////////8JAAAAAAAAAAEAAAAFAAAACgAAAAYAAAD/////////////////////////////////////////////////////AQAAAAgAAAADAAAAAQAAAAkAAAAIAAAABQAAAAoAAAAGAAAA/////////////////////////////////////wEAAAAGAAAABQAAAAIAAAAGAAAAAQAAAP////////////////////////////////////////////////////8BAAAABgAAAAUAAAABAAAAAgAAAAYAAAADAAAAAAAAAAgAAAD/////////////////////////////////////CQAAAAYAAAAFAAAACQAAAAAAAAAGAAAAAAAAAAIAAAAGAAAA/////////////////////////////////////wUAAAAJAAAACAAAAAUAAAAIAAAAAgAAAAUAAAACAAAABgAAAAMAAAACAAAACAAAAP////////////////////8CAAAAAwAAAAsAAAAKAAAABgAAAAUAAAD/////////////////////////////////////////////////////CwAAAAAAAAAIAAAACwAAAAIAAAAAAAAACgAAAAYAAAAFAAAA/////////////////////////////////////wAAAAABAAAACQAAAAIAAAADAAAACwAAAAUAAAAKAAAABgAAAP////////////////////////////////////8FAAAACgAAAAYAAAABAAAACQAAAAIAAAAJAAAACwAAAAIAAAAJAAAACAAAAAsAAAD/////////////////////BgAAAAMAAAALAAAABgAAAAUAAAADAAAABQAAAAEAAAADAAAA/////////////////////////////////////wAAAAAIAAAACwAAAAAAAAALAAAABQAAAAAAAAAFAAAAAQAAAAUAAAALAAAABgAAAP////////////////////8DAAAACwAAAAYAAAAAAAAAAwAAAAYAAAAAAAAABgAAAAUAAAAAAAAABQAAAAkAAAD/////////////////////BgAAAAUAAAAJAAAABgAAAAkAAAALAAAACwAAAAkAAAAIAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAQAAAAHAAAACAAAAP////////////////////////////////////////////////////8EAAAAAwAAAAAAAAAEAAAABwAAAAMAAAAGAAAABQAAAAoAAAD/////////////////////////////////////AQAAAAkAAAAAAAAABQAAAAoAAAAGAAAACAAAAAQAAAAHAAAA/////////////////////////////////////woAAAAGAAAABQAAAAEAAAAJAAAABwAAAAEAAAAHAAAAAwAAAAcAAAAJAAAABAAAAP////////////////////8GAAAAAQAAAAIAAAAGAAAABQAAAAEAAAAEAAAABwAAAAgAAAD/////////////////////////////////////AQAAAAIAAAAFAAAABQAAAAIAAAAGAAAAAwAAAAAAAAAEAAAAAwAAAAQAAAAHAAAA/////////////////////wgAAAAEAAAABwAAAAkAAAAAAAAABQAAAAAAAAAGAAAABQAAAAAAAAACAAAABgAAAP////////////////////8HAAAAAwAAAAkAAAAHAAAACQAAAAQAAAADAAAAAgAAAAkAAAAFAAAACQAAAAYAAAACAAAABgAAAAkAAAD/////AwAAAAsAAAACAAAABwAAAAgAAAAEAAAACgAAAAYAAAAFAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAQAAAAHAAAAAgAAAAQAAAACAAAAAAAAAAIAAAAHAAAACwAAAP////////////////////8AAAAAAQAAAAkAAAAEAAAABwAAAAgAAAACAAAAAwAAAAsAAAAFAAAACgAAAAYAAAD/////////////////////CQAAAAIAAAABAAAACQAAAAsAAAACAAAACQAAAAQAAAALAAAABwAAAAsAAAAEAAAABQAAAAoAAAAGAAAA/////wgAAAAEAAAABwAAAAMAAAALAAAABQAAAAMAAAAFAAAAAQAAAAUAAAALAAAABgAAAP////////////////////8FAAAAAQAAAAsAAAAFAAAACwAAAAYAAAABAAAAAAAAAAsAAAAHAAAACwAAAAQAAAAAAAAABAAAAAsAAAD/////AAAAAAUAAAAJAAAAAAAAAAYAAAAFAAAAAAAAAAMAAAAGAAAACwAAAAYAAAADAAAACAAAAAQAAAAHAAAA/////wYAAAAFAAAACQAAAAYAAAAJAAAACwAAAAQAAAAHAAAACQAAAAcAAAALAAAACQAAAP////////////////////8KAAAABAAAAAkAAAAGAAAABAAAAAoAAAD/////////////////////////////////////////////////////BAAAAAoAAAAGAAAABAAAAAkAAAAKAAAAAAAAAAgAAAADAAAA/////////////////////////////////////woAAAAAAAAAAQAAAAoAAAAGAAAAAAAAAAYAAAAEAAAAAAAAAP////////////////////////////////////8IAAAAAwAAAAEAAAAIAAAAAQAAAAYAAAAIAAAABgAAAAQAAAAGAAAAAQAAAAoAAAD/////////////////////AQAAAAQAAAAJAAAAAQAAAAIAAAAEAAAAAgAAAAYAAAAEAAAA/////////////////////////////////////wMAAAAAAAAACAAAAAEAAAACAAAACQAAAAIAAAAEAAAACQAAAAIAAAAGAAAABAAAAP////////////////////8AAAAAAgAAAAQAAAAEAAAAAgAAAAYAAAD/////////////////////////////////////////////////////CAAAAAMAAAACAAAACAAAAAIAAAAEAAAABAAAAAIAAAAGAAAA/////////////////////////////////////woAAAAEAAAACQAAAAoAAAAGAAAABAAAAAsAAAACAAAAAwAAAP////////////////////////////////////8AAAAACAAAAAIAAAACAAAACAAAAAsAAAAEAAAACQAAAAoAAAAEAAAACgAAAAYAAAD/////////////////////AwAAAAsAAAACAAAAAAAAAAEAAAAGAAAAAAAAAAYAAAAEAAAABgAAAAEAAAAKAAAA/////////////////////wYAAAAEAAAAAQAAAAYAAAABAAAACgAAAAQAAAAIAAAAAQAAAAIAAAABAAAACwAAAAgAAAALAAAAAQAAAP////8JAAAABgAAAAQAAAAJAAAAAwAAAAYAAAAJAAAAAQAAAAMAAAALAAAABgAAAAMAAAD/////////////////////CAAAAAsAAAABAAAACAAAAAEAAAAAAAAACwAAAAYAAAABAAAACQAAAAEAAAAEAAAABgAAAAQAAAABAAAA/////wMAAAALAAAABgAAAAMAAAAGAAAAAAAAAAAAAAAGAAAABAAAAP////////////////////////////////////8GAAAABAAAAAgAAAALAAAABgAAAAgAAAD/////////////////////////////////////////////////////BwAAAAoAAAAGAAAABwAAAAgAAAAKAAAACAAAAAkAAAAKAAAA/////////////////////////////////////wAAAAAHAAAAAwAAAAAAAAAKAAAABwAAAAAAAAAJAAAACgAAAAYAAAAHAAAACgAAAP////////////////////8KAAAABgAAAAcAAAABAAAACgAAAAcAAAABAAAABwAAAAgAAAABAAAACAAAAAAAAAD/////////////////////CgAAAAYAAAAHAAAACgAAAAcAAAABAAAAAQAAAAcAAAADAAAA/////////////////////////////////////wEAAAACAAAABgAAAAEAAAAGAAAACAAAAAEAAAAIAAAACQAAAAgAAAAGAAAABwAAAP////////////////////8CAAAABgAAAAkAAAACAAAACQAAAAEAAAAGAAAABwAAAAkAAAAAAAAACQAAAAMAAAAHAAAAAwAAAAkAAAD/////BwAAAAgAAAAAAAAABwAAAAAAAAAGAAAABgAAAAAAAAACAAAA/////////////////////////////////////wcAAAADAAAAAgAAAAYAAAAHAAAAAgAAAP////////////////////////////////////////////////////8CAAAAAwAAAAsAAAAKAAAABgAAAAgAAAAKAAAACAAAAAkAAAAIAAAABgAAAAcAAAD/////////////////////AgAAAAAAAAAHAAAAAgAAAAcAAAALAAAAAAAAAAkAAAAHAAAABgAAAAcAAAAKAAAACQAAAAoAAAAHAAAA/////wEAAAAIAAAAAAAAAAEAAAAHAAAACAAAAAEAAAAKAAAABwAAAAYAAAAHAAAACgAAAAIAAAADAAAACwAAAP////8LAAAAAgAAAAEAAAALAAAAAQAAAAcAAAAKAAAABgAAAAEAAAAGAAAABwAAAAEAAAD/////////////////////CAAAAAkAAAAGAAAACAAAAAYAAAAHAAAACQAAAAEAAAAGAAAACwAAAAYAAAADAAAAAQAAAAMAAAAGAAAA/////wAAAAAJAAAAAQAAAAsAAAAGAAAABwAAAP////////////////////////////////////////////////////8HAAAACAAAAAAAAAAHAAAAAAAAAAYAAAADAAAACwAAAAAAAAALAAAABgAAAAAAAAD/////////////////////BwAAAAsAAAAGAAAA/////////////////////////////////////////////////////////////////////wcAAAAGAAAACwAAAP////////////////////////////////////////////////////////////////////8DAAAAAAAAAAgAAAALAAAABwAAAAYAAAD/////////////////////////////////////////////////////AAAAAAEAAAAJAAAACwAAAAcAAAAGAAAA/////////////////////////////////////////////////////wgAAAABAAAACQAAAAgAAAADAAAAAQAAAAsAAAAHAAAABgAAAP////////////////////////////////////8KAAAAAQAAAAIAAAAGAAAACwAAAAcAAAD/////////////////////////////////////////////////////AQAAAAIAAAAKAAAAAwAAAAAAAAAIAAAABgAAAAsAAAAHAAAA/////////////////////////////////////wIAAAAJAAAAAAAAAAIAAAAKAAAACQAAAAYAAAALAAAABwAAAP////////////////////////////////////8GAAAACwAAAAcAAAACAAAACgAAAAMAAAAKAAAACAAAAAMAAAAKAAAACQAAAAgAAAD/////////////////////BwAAAAIAAAADAAAABgAAAAIAAAAHAAAA/////////////////////////////////////////////////////wcAAAAAAAAACAAAAAcAAAAGAAAAAAAAAAYAAAACAAAAAAAAAP////////////////////////////////////8CAAAABwAAAAYAAAACAAAAAwAAAAcAAAAAAAAAAQAAAAkAAAD/////////////////////////////////////AQAAAAYAAAACAAAAAQAAAAgAAAAGAAAAAQAAAAkAAAAIAAAACAAAAAcAAAAGAAAA/////////////////////woAAAAHAAAABgAAAAoAAAABAAAABwAAAAEAAAADAAAABwAAAP////////////////////////////////////8KAAAABwAAAAYAAAABAAAABwAAAAoAAAABAAAACAAAAAcAAAABAAAAAAAAAAgAAAD/////////////////////AAAAAAMAAAAHAAAAAAAAAAcAAAAKAAAAAAAAAAoAAAAJAAAABgAAAAoAAAAHAAAA/////////////////////wcAAAAGAAAACgAAAAcAAAAKAAAACAAAAAgAAAAKAAAACQAAAP////////////////////////////////////8GAAAACAAAAAQAAAALAAAACAAAAAYAAAD/////////////////////////////////////////////////////AwAAAAYAAAALAAAAAwAAAAAAAAAGAAAAAAAAAAQAAAAGAAAA/////////////////////////////////////wgAAAAGAAAACwAAAAgAAAAEAAAABgAAAAkAAAAAAAAAAQAAAP////////////////////////////////////8JAAAABAAAAAYAAAAJAAAABgAAAAMAAAAJAAAAAwAAAAEAAAALAAAAAwAAAAYAAAD/////////////////////BgAAAAgAAAAEAAAABgAAAAsAAAAIAAAAAgAAAAoAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAMAAAAAAAAACwAAAAAAAAAGAAAACwAAAAAAAAAEAAAABgAAAP////////////////////8EAAAACwAAAAgAAAAEAAAABgAAAAsAAAAAAAAAAgAAAAkAAAACAAAACgAAAAkAAAD/////////////////////CgAAAAkAAAADAAAACgAAAAMAAAACAAAACQAAAAQAAAADAAAACwAAAAMAAAAGAAAABAAAAAYAAAADAAAA/////wgAAAACAAAAAwAAAAgAAAAEAAAAAgAAAAQAAAAGAAAAAgAAAP////////////////////////////////////8AAAAABAAAAAIAAAAEAAAABgAAAAIAAAD/////////////////////////////////////////////////////AQAAAAkAAAAAAAAAAgAAAAMAAAAEAAAAAgAAAAQAAAAGAAAABAAAAAMAAAAIAAAA/////////////////////wEAAAAJAAAABAAAAAEAAAAEAAAAAgAAAAIAAAAEAAAABgAAAP////////////////////////////////////8IAAAAAQAAAAMAAAAIAAAABgAAAAEAAAAIAAAABAAAAAYAAAAGAAAACgAAAAEAAAD/////////////////////CgAAAAEAAAAAAAAACgAAAAAAAAAGAAAABgAAAAAAAAAEAAAA/////////////////////////////////////wQAAAAGAAAAAwAAAAQAAAADAAAACAAAAAYAAAAKAAAAAwAAAAAAAAADAAAACQAAAAoAAAAJAAAAAwAAAP////8KAAAACQAAAAQAAAAGAAAACgAAAAQAAAD/////////////////////////////////////////////////////BAAAAAkAAAAFAAAABwAAAAYAAAALAAAA/////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAQAAAAJAAAABQAAAAsAAAAHAAAABgAAAP////////////////////////////////////8FAAAAAAAAAAEAAAAFAAAABAAAAAAAAAAHAAAABgAAAAsAAAD/////////////////////////////////////CwAAAAcAAAAGAAAACAAAAAMAAAAEAAAAAwAAAAUAAAAEAAAAAwAAAAEAAAAFAAAA/////////////////////wkAAAAFAAAABAAAAAoAAAABAAAAAgAAAAcAAAAGAAAACwAAAP////////////////////////////////////8GAAAACwAAAAcAAAABAAAAAgAAAAoAAAAAAAAACAAAAAMAAAAEAAAACQAAAAUAAAD/////////////////////BwAAAAYAAAALAAAABQAAAAQAAAAKAAAABAAAAAIAAAAKAAAABAAAAAAAAAACAAAA/////////////////////wMAAAAEAAAACAAAAAMAAAAFAAAABAAAAAMAAAACAAAABQAAAAoAAAAFAAAAAgAAAAsAAAAHAAAABgAAAP////8HAAAAAgAAAAMAAAAHAAAABgAAAAIAAAAFAAAABAAAAAkAAAD/////////////////////////////////////CQAAAAUAAAAEAAAAAAAAAAgAAAAGAAAAAAAAAAYAAAACAAAABgAAAAgAAAAHAAAA/////////////////////wMAAAAGAAAAAgAAAAMAAAAHAAAABgAAAAEAAAAFAAAAAAAAAAUAAAAEAAAAAAAAAP////////////////////8GAAAAAgAAAAgAAAAGAAAACAAAAAcAAAACAAAAAQAAAAgAAAAEAAAACAAAAAUAAAABAAAABQAAAAgAAAD/////CQAAAAUAAAAEAAAACgAAAAEAAAAGAAAAAQAAAAcAAAAGAAAAAQAAAAMAAAAHAAAA/////////////////////wEAAAAGAAAACgAAAAEAAAAHAAAABgAAAAEAAAAAAAAABwAAAAgAAAAHAAAAAAAAAAkAAAAFAAAABAAAAP////8EAAAAAAAAAAoAAAAEAAAACgAAAAUAAAAAAAAAAwAAAAoAAAAGAAAACgAAAAcAAAADAAAABwAAAAoAAAD/////BwAAAAYAAAAKAAAABwAAAAoAAAAIAAAABQAAAAQAAAAKAAAABAAAAAgAAAAKAAAA/////////////////////wYAAAAJAAAABQAAAAYAAAALAAAACQAAAAsAAAAIAAAACQAAAP////////////////////////////////////8DAAAABgAAAAsAAAAAAAAABgAAAAMAAAAAAAAABQAAAAYAAAAAAAAACQAAAAUAAAD/////////////////////AAAAAAsAAAAIAAAAAAAAAAUAAAALAAAAAAAAAAEAAAAFAAAABQAAAAYAAAALAAAA/////////////////////wYAAAALAAAAAwAAAAYAAAADAAAABQAAAAUAAAADAAAAAQAAAP////////////////////////////////////8BAAAAAgAAAAoAAAAJAAAABQAAAAsAAAAJAAAACwAAAAgAAAALAAAABQAAAAYAAAD/////////////////////AAAAAAsAAAADAAAAAAAAAAYAAAALAAAAAAAAAAkAAAAGAAAABQAAAAYAAAAJAAAAAQAAAAIAAAAKAAAA/////wsAAAAIAAAABQAAAAsAAAAFAAAABgAAAAgAAAAAAAAABQAAAAoAAAAFAAAAAgAAAAAAAAACAAAABQAAAP////8GAAAACwAAAAMAAAAGAAAAAwAAAAUAAAACAAAACgAAAAMAAAAKAAAABQAAAAMAAAD/////////////////////BQAAAAgAAAAJAAAABQAAAAIAAAAIAAAABQAAAAYAAAACAAAAAwAAAAgAAAACAAAA/////////////////////wkAAAAFAAAABgAAAAkAAAAGAAAAAAAAAAAAAAAGAAAAAgAAAP////////////////////////////////////8BAAAABQAAAAgAAAABAAAACAAAAAAAAAAFAAAABgAAAAgAAAADAAAACAAAAAIAAAAGAAAAAgAAAAgAAAD/////AQAAAAUAAAAGAAAAAgAAAAEAAAAGAAAA/////////////////////////////////////////////////////wEAAAADAAAABgAAAAEAAAAGAAAACgAAAAMAAAAIAAAABgAAAAUAAAAGAAAACQAAAAgAAAAJAAAABgAAAP////8KAAAAAQAAAAAAAAAKAAAAAAAAAAYAAAAJAAAABQAAAAAAAAAFAAAABgAAAAAAAAD/////////////////////AAAAAAMAAAAIAAAABQAAAAYAAAAKAAAA/////////////////////////////////////////////////////woAAAAFAAAABgAAAP////////////////////////////////////////////////////////////////////8LAAAABQAAAAoAAAAHAAAABQAAAAsAAAD/////////////////////////////////////////////////////CwAAAAUAAAAKAAAACwAAAAcAAAAFAAAACAAAAAMAAAAAAAAA/////////////////////////////////////wUAAAALAAAABwAAAAUAAAAKAAAACwAAAAEAAAAJAAAAAAAAAP////////////////////////////////////8KAAAABwAAAAUAAAAKAAAACwAAAAcAAAAJAAAACAAAAAEAAAAIAAAAAwAAAAEAAAD/////////////////////CwAAAAEAAAACAAAACwAAAAcAAAABAAAABwAAAAUAAAABAAAA/////////////////////////////////////wAAAAAIAAAAAwAAAAEAAAACAAAABwAAAAEAAAAHAAAABQAAAAcAAAACAAAACwAAAP////////////////////8JAAAABwAAAAUAAAAJAAAAAgAAAAcAAAAJAAAAAAAAAAIAAAACAAAACwAAAAcAAAD/////////////////////BwAAAAUAAAACAAAABwAAAAIAAAALAAAABQAAAAkAAAACAAAAAwAAAAIAAAAIAAAACQAAAAgAAAACAAAA/////wIAAAAFAAAACgAAAAIAAAADAAAABQAAAAMAAAAHAAAABQAAAP////////////////////////////////////8IAAAAAgAAAAAAAAAIAAAABQAAAAIAAAAIAAAABwAAAAUAAAAKAAAAAgAAAAUAAAD/////////////////////CQAAAAAAAAABAAAABQAAAAoAAAADAAAABQAAAAMAAAAHAAAAAwAAAAoAAAACAAAA/////////////////////wkAAAAIAAAAAgAAAAkAAAACAAAAAQAAAAgAAAAHAAAAAgAAAAoAAAACAAAABQAAAAcAAAAFAAAAAgAAAP////8BAAAAAwAAAAUAAAADAAAABwAAAAUAAAD/////////////////////////////////////////////////////AAAAAAgAAAAHAAAAAAAAAAcAAAABAAAAAQAAAAcAAAAFAAAA/////////////////////////////////////wkAAAAAAAAAAwAAAAkAAAADAAAABQAAAAUAAAADAAAABwAAAP////////////////////////////////////8JAAAACAAAAAcAAAAFAAAACQAAAAcAAAD/////////////////////////////////////////////////////BQAAAAgAAAAEAAAABQAAAAoAAAAIAAAACgAAAAsAAAAIAAAA/////////////////////////////////////wUAAAAAAAAABAAAAAUAAAALAAAAAAAAAAUAAAAKAAAACwAAAAsAAAADAAAAAAAAAP////////////////////8AAAAAAQAAAAkAAAAIAAAABAAAAAoAAAAIAAAACgAAAAsAAAAKAAAABAAAAAUAAAD/////////////////////CgAAAAsAAAAEAAAACgAAAAQAAAAFAAAACwAAAAMAAAAEAAAACQAAAAQAAAABAAAAAwAAAAEAAAAEAAAA/////wIAAAAFAAAAAQAAAAIAAAAIAAAABQAAAAIAAAALAAAACAAAAAQAAAAFAAAACAAAAP////////////////////8AAAAABAAAAAsAAAAAAAAACwAAAAMAAAAEAAAABQAAAAsAAAACAAAACwAAAAEAAAAFAAAAAQAAAAsAAAD/////AAAAAAIAAAAFAAAAAAAAAAUAAAAJAAAAAgAAAAsAAAAFAAAABAAAAAUAAAAIAAAACwAAAAgAAAAFAAAA/////wkAAAAEAAAABQAAAAIAAAALAAAAAwAAAP////////////////////////////////////////////////////8CAAAABQAAAAoAAAADAAAABQAAAAIAAAADAAAABAAAAAUAAAADAAAACAAAAAQAAAD/////////////////////BQAAAAoAAAACAAAABQAAAAIAAAAEAAAABAAAAAIAAAAAAAAA/////////////////////////////////////wMAAAAKAAAAAgAAAAMAAAAFAAAACgAAAAMAAAAIAAAABQAAAAQAAAAFAAAACAAAAAAAAAABAAAACQAAAP////8FAAAACgAAAAIAAAAFAAAAAgAAAAQAAAABAAAACQAAAAIAAAAJAAAABAAAAAIAAAD/////////////////////CAAAAAQAAAAFAAAACAAAAAUAAAADAAAAAwAAAAUAAAABAAAA/////////////////////////////////////wAAAAAEAAAABQAAAAEAAAAAAAAABQAAAP////////////////////////////////////////////////////8IAAAABAAAAAUAAAAIAAAABQAAAAMAAAAJAAAAAAAAAAUAAAAAAAAAAwAAAAUAAAD/////////////////////CQAAAAQAAAAFAAAA/////////////////////////////////////////////////////////////////////wQAAAALAAAABwAAAAQAAAAJAAAACwAAAAkAAAAKAAAACwAAAP////////////////////////////////////8AAAAACAAAAAMAAAAEAAAACQAAAAcAAAAJAAAACwAAAAcAAAAJAAAACgAAAAsAAAD/////////////////////AQAAAAoAAAALAAAAAQAAAAsAAAAEAAAAAQAAAAQAAAAAAAAABwAAAAQAAAALAAAA/////////////////////wMAAAABAAAABAAAAAMAAAAEAAAACAAAAAEAAAAKAAAABAAAAAcAAAAEAAAACwAAAAoAAAALAAAABAAAAP////8EAAAACwAAAAcAAAAJAAAACwAAAAQAAAAJAAAAAgAAAAsAAAAJAAAAAQAAAAIAAAD/////////////////////CQAAAAcAAAAEAAAACQAAAAsAAAAHAAAACQAAAAEAAAALAAAAAgAAAAsAAAABAAAAAAAAAAgAAAADAAAA/////wsAAAAHAAAABAAAAAsAAAAEAAAAAgAAAAIAAAAEAAAAAAAAAP////////////////////////////////////8LAAAABwAAAAQAAAALAAAABAAAAAIAAAAIAAAAAwAAAAQAAAADAAAAAgAAAAQAAAD/////////////////////AgAAAAkAAAAKAAAAAgAAAAcAAAAJAAAAAgAAAAMAAAAHAAAABwAAAAQAAAAJAAAA/////////////////////wkAAAAKAAAABwAAAAkAAAAHAAAABAAAAAoAAAACAAAABwAAAAgAAAAHAAAAAAAAAAIAAAAAAAAABwAAAP////8DAAAABwAAAAoAAAADAAAACgAAAAIAAAAHAAAABAAAAAoAAAABAAAACgAAAAAAAAAEAAAAAAAAAAoAAAD/////AQAAAAoAAAACAAAACAAAAAcAAAAEAAAA/////////////////////////////////////////////////////wQAAAAJAAAAAQAAAAQAAAABAAAABwAAAAcAAAABAAAAAwAAAP////////////////////////////////////8EAAAACQAAAAEAAAAEAAAAAQAAAAcAAAAAAAAACAAAAAEAAAAIAAAABwAAAAEAAAD/////////////////////BAAAAAAAAAADAAAABwAAAAQAAAADAAAA/////////////////////////////////////////////////////wQAAAAIAAAABwAAAP////////////////////////////////////////////////////////////////////8JAAAACgAAAAgAAAAKAAAACwAAAAgAAAD/////////////////////////////////////////////////////AwAAAAAAAAAJAAAAAwAAAAkAAAALAAAACwAAAAkAAAAKAAAA/////////////////////////////////////wAAAAABAAAACgAAAAAAAAAKAAAACAAAAAgAAAAKAAAACwAAAP////////////////////////////////////8DAAAAAQAAAAoAAAALAAAAAwAAAAoAAAD/////////////////////////////////////////////////////AQAAAAIAAAALAAAAAQAAAAsAAAAJAAAACQAAAAsAAAAIAAAA/////////////////////////////////////wMAAAAAAAAACQAAAAMAAAAJAAAACwAAAAEAAAACAAAACQAAAAIAAAALAAAACQAAAP////////////////////8AAAAAAgAAAAsAAAAIAAAAAAAAAAsAAAD/////////////////////////////////////////////////////AwAAAAIAAAALAAAA/////////////////////////////////////////////////////////////////////wIAAAADAAAACAAAAAIAAAAIAAAACgAAAAoAAAAIAAAACQAAAP////////////////////////////////////8JAAAACgAAAAIAAAAAAAAACQAAAAIAAAD/////////////////////////////////////////////////////AgAAAAMAAAAIAAAAAgAAAAgAAAAKAAAAAAAAAAEAAAAIAAAAAQAAAAoAAAAIAAAA/////////////////////wEAAAAKAAAAAgAAAP////////////////////////////////////////////////////////////////////8BAAAAAwAAAAgAAAAJAAAAAQAAAAgAAAD/////////////////////////////////////////////////////AAAAAAkAAAABAAAA/////////////////////////////////////////////////////////////////////wAAAAADAAAACAAAAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AI4CBG5hbWUB5gETABJfX3dhc21faW5pdF9tZW1vcnkBBWFib3J0AgRzYnJrAwZtYWxsb2MECGRsbWFsbG9jBQVkdW1teQYRX193YXNtX2NhbGxfZHRvcnMHDl9fbWF0aF9pbnZhbGlkCAxfX21hdGhfeGZsb3cJDF9fbWF0aF9vZmxvdwoMX19tYXRoX3VmbG93CwNwb3cMCGNoZWNraW50DQtzcGVjaWFsY2FzZQ4DcnVuDwNnZXQQC2ludGVycG9sYXRlERJydW4uY29tbWFuZF9leHBvcnQSFW1hbGxvYy5jb21tYW5kX2V4cG9ydAcSAQAPX19zdGFja19wb2ludGVyCQoBAAcucm9kYXRhACYJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5nBjE1LjAuNgAeD3RhcmdldF9mZWF0dXJlcwErC2J1bGstbWVtb3J5",i)}var O5=null;try{U5=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Li=="function"&&Li("worker_threads"),O5=U5.Worker}catch{}var U5;function W$(i,e,t){var n=e===void 0?null:e,o=function(c,A){return Buffer.from(c,"base64").toString(A?"utf16":"utf8")}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:"");return function(c){return new O5(l,Object.assign({},c,{eval:!0}))}}function V$(i,e,t){var n=e===void 0?null:e,o=function(A,u){var h=atob(A);if(u){for(var f=new Uint8Array(h.length),d=0,p=h.length;d<p;++d)f[d]=h.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return h}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var X$=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",_I,NI,FI,Y$=(_I="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0fSxwcm9ncmFtOm99fSk9PnsoKHttZW1vcnk6ZSxwcm9ncmFtOnN9KT0+e2NvbnN0IHI9TWF0aC5jZWlsKGUucmVkdWNlKCgoZSx7dHlwZTpzLHNpemU6cn0pPT5lK3Iqcy5CWVRFU19QRVJfRUxFTUVOVCksMCkvNjU1MzYpKzIsdD1uZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtpbml0aWFsOnIsbWF4aW11bTpyfSk7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHMse2Vudjp7bWVtb3J5OnR9fSkudGhlbigocz0+KHttZW1vcnk6ZS5yZWR1Y2UoKChlLHtpZDpyLHR5cGU6byxzaXplOm19KT0+e2NvbnN0IG49cy5leHBvcnRzLm1hbGxvYyhtKm8uQllURVNfUEVSX0VMRU1FTlQpO3JldHVybiBlW3JdPXthZGRyZXNzOm4sdmlldzpuZXcgbyh0LmJ1ZmZlcixuLG0pfSxlfSkse30pLHJ1bjpzLmV4cG9ydHMucnVufSkpKX0pKHttZW1vcnk6W3tpZDoiY2h1bmtzIix0eXBlOlVpbnQzMkFycmF5LHNpemU6dCp0KnQqOH0se2lkOiJjb3VudHMiLHR5cGU6SW50MzJBcnJheSxzaXplOjJ9LHtpZDoidmVydGljZXMiLHR5cGU6RmxvYXQzMkFycmF5LHNpemU6dCp0KnQqMyo5KjV9LHtpZDoidm94ZWxzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOnQqdCp0Ki41KjZ9LHtpZDoiYm91bmRzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOjZ9XSxwcm9ncmFtOm99KS50aGVuKCgoe21lbW9yeTpvLHJ1bjptfSk9PntlPXtjaHVua1NpemU6dCxtZW1vcnk6byxydW46bX0sc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHIpLHNlbGYucG9zdE1lc3NhZ2UoITApfSkpfTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpO2NvbnN0IHI9KHtkYXRhOnN9KT0+e2UubWVtb3J5LmNodW5rcy52aWV3LnNldChzKSxlLnJ1bihlLm1lbW9yeS5jaHVua3MuYWRkcmVzcyxlLm1lbW9yeS5jb3VudHMuYWRkcmVzcyxlLm1lbW9yeS52ZXJ0aWNlcy5hZGRyZXNzLGUubWVtb3J5LnZveGVscy5hZGRyZXNzLGUubWVtb3J5LmJvdW5kcy5hZGRyZXNzLGUuY2h1bmtTaXplKTtjb25zdFtyLHRdPWUubWVtb3J5LmNvdW50cy52aWV3O2lmKDA9PT1yKXJldHVybiB2b2lkIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6ITF9LFtzLmJ1ZmZlcl0pO2NvbnN0IG89ZS5tZW1vcnkuYm91bmRzLnZpZXcuc2xpY2UoMCksbT1lLm1lbW9yeS52ZXJ0aWNlcy52aWV3LnNsaWNlKDAsMypyKjkpLG49ZS5tZW1vcnkudm94ZWxzLnZpZXcuc2xpY2UoMCw2KnQpO3NlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6e2JvdW5kczpvLHZlcnRpY2VzOm0sdm94ZWxzOm59fSxbcy5idWZmZXIsby5idWZmZXIsbS5idWZmZXIsbi5idWZmZXJdKX19KCk7Cgo=",NI=null,FI=!1,X$?W$(_I,NI,FI):function(i,e,t){var n;return function(o){return n=n||V$(i,e,t),new Worker(n,o)}}(_I,NI,FI)),Z$=typeof self.queueMicrotask=="function"?self.queueMicrotask:i=>{Promise.resolve().then(i).catch(e=>setTimeout(()=>{throw e}))},Z1=class extends cn{chunks;queue;materials;mesher;history;storage;constructor({history:e=!1,materials:t={},storage:n=new QI}={}){super(),this.chunks=new Map,this.queue=new Map,this.materials={triangles:t.triangles||new Qt({vertexColors:!0}),voxels:t.voxels||new Qt({visible:!1})};let{chunkSize:o}=n;this.mesher=new zI({buffer:o*o*o*8,options:{chunkSize:o},program:H$,script:Y$}),this.history={enabled:e,last:-1,undo:[],redo:[]},this.storage=n}dispose(){let{chunks:e,mesher:t,queue:n}=this;e.forEach(o=>o.dispose()),t.dispose(),n.clear()}undo(){let{history:e}=this,t=e.undo.pop();t&&(e.last=-1,e.redo.push(t),this.update(t.map(({x:n,y:o,z:a,undo:l})=>({x:n,y:o,z:a,r:l>>8&255,g:l>>16&255,b:l>>24&255,value:255&l})),-1,!0))}redo(){let{history:e}=this,t=e.redo.pop();t&&(e.last=-1,e.undo.push(t),this.update(t.map(({x:n,y:o,z:a,redo:l})=>({x:n,y:o,z:a,r:l>>8&255,g:l>>16&255,b:l>>24&255,value:255&l})),-1,!0))}updateChunk(e,t,n){let{materials:o,mesher:a,storage:l}=this,{chunkSize:c}=l,A=`${e}:${t}:${n}`,u=this.chunks.get(A);u||(u=new GI({materials:o,position:new Y(e*c+-.5*c,t*c+-.5*c,n*c+-.5*c)}),this.add(u),this.chunks.set(A,u));let h=[];for(let d=n-1;d<=n;d++)for(let p=t-1;p<=t;p++)for(let m=e-1;m<=e;m++)h.push(l.get(m,p,d));let f=++u.request;a.run(h).then(d=>{u&&u.version<f&&(u.update(d),u.version=f,this.dispatchEvent({type:"change"}))})}update(e,t=-1,n=!1){let{history:o,queue:a,storage:l}=this,{chunkSize:c}=l,A=.5*c,u=!!a.size,h=new Map,f=e.reduce((d,{x:p,y:m,z:b,value:g,r:w=0,g:I=0,b:v=0})=>{let E=Math.floor(p/c),S=Math.floor(m/c),C=Math.floor(b/c),M=p-E*c,D=m-S*c,T=b-C*c,B=T*c*c+D*c+M,R=l.get(E,S,C),P=R[B];if(g===void 0&&(g=255&P)===0)return d;let _=v<<24^I<<16^w<<8^g;R[B]=_;for(let W=0;W<2;W++)for(let U=0;U<2;U++)for(let H=0;H<2;H++)if(M>=H*A-1&&M<=(H+1)*A&&D>=U*A-1&&D<=(U+1)*A&&T>=W*A-1&&T<=(W+1)*A){let O=E+H,F=S+U,z=C+W,k=`${O}:${F}:${z}`;a.has(k)||a.set(k,{x:O,y:F,z})}let Q=`${E}:${S}:${C}`;return h.has(Q)||h.set(Q,{x:E,y:S,z:C}),o.enabled&&!n&&d.push({x:p,y:m,z:b,undo:P,redo:_}),d},[]);if(o.enabled&&!n){let d=o.undo[o.undo.length-1];t!==-1&&o.last===t&&d.length<1e4?f.forEach(p=>{let m=d.find(({x:b,y:g,z:w})=>b===p.x&&g===p.y&&w===p.z);m?m.redo=p.redo:d.push(p)}):o.undo.push(f),o.last=t,o.redo.length=0}h.forEach(({x:d,y:p,z:m})=>l.save(d,p,m)),!u&&a.size&&Z$(()=>{a.forEach(({x:d,y:p,z:m})=>this.updateChunk(d,p,m)),a.clear()})}};var XI=class i extends Xe{static setupMaterial(){i.material=new Qt({vertexColors:!0})}constructor({chunkMaterial:e,chunkSize:t,geometry:n,position:o}){i.material||i.setupMaterial(),super(new qe,e||i.material),this.geometry.boundingBox=new Cn,this.geometry.boundingSphere=new Xt,this.update(n),this.position.copy(o).multiplyScalar(t),this.updateMatrixWorld(),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}update({bounds:e,vertices:t}){let{geometry:n}=this,o=new Ji(t,9);n.setAttribute("position",new Ln(o,3,0)),n.setAttribute("normal",new Ln(o,3,3)),n.setAttribute("color",new Ln(o,3,6)),n.boundingBox.min.set(e[0],e[1],e[2]),n.boundingBox.max.set(e[3],e[4],e[5]),n.boundingBox.getBoundingSphere(n.boundingSphere)}},K1=class{constructor({buffer:e,concurrency:t=navigator.hardwareConcurrency||1,options:n,program:o,script:a}){this.queue=[],o().then(l=>{this.instances=Array.from({length:t},()=>{let c=new a;e&&(c.buffer=new Uint8Array(e)),c.isBusy=!0,c.run=({operation:h,resolve:f})=>{if(c.isBusy=!0,c.resolve=f,e){let d=h[0].length;h.forEach((p,m)=>{c.buffer.set(p,d*m)}),c.postMessage(c.buffer,[c.buffer.buffer])}else c.postMessage(h)};let A=()=>{c.removeEventListener("message",A),c.addEventListener("message",u);let h=this.queue.shift();h?c.run(h):c.isBusy=!1},u=({data:h})=>{e&&(c.buffer=h.buffer,h=h.data);let{resolve:f}=c;delete c.resolve,f(h);let d=this.queue.shift();d?c.run(d):c.isBusy=!1};return c.addEventListener("message",A),c.postMessage({options:n,program:l}),c})})}dispose(){let{instances:e}=this;e.forEach(t=>t.terminate())}run(e){let{instances:t,queue:n}=this;return new Promise(o=>{if(!t)return void n.push({operation:e,resolve:o});let a;for(let l=0,c=t.length;l<c;l++)if(!t[l].isBusy){a=t[l];break}a?a.run({operation:e,resolve:o}):n.push({operation:e,resolve:o})})}};function W5(i,e,t,n){function o(p,m,b){var g=b?WebAssembly.instantiateStreaming:WebAssembly.instantiate,w=b?WebAssembly.compileStreaming:WebAssembly.compile;return m?g(p,m):w(p)}var a=null,l=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;if(e&&l){var c=null,A=null;return new Promise((p,m)=>{c.readFile(A.resolve(__dirname,e),(b,g)=>{b!=null&&m(b),p(o(g,n,!1))})})}if(e)return o(fetch(e),n,!0);if(l)a=Buffer.from(t,"base64");else{var u=globalThis.atob(t),h=u.length;a=new Uint8Array(new ArrayBuffer(h));for(var f=0;f<h;f++)a[f]=u.charCodeAt(f)}if(i){var d=new WebAssembly.Module(a);return n?new WebAssembly.Instance(d,n):d}return o(a,n,!1)}function J$(i){return W5(0,null,"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AADDCgAAyQkAAMAIAADACAAAyQkAAMMKAADKCwAAxgwAAM8NAADFDgAAzA8AAMwAAADFAQAAzwIAAMYDAADKBAAAwwUAAMkGAADABwAAUAkAAFkIAABTCwAAWgoAAFYNAABfDAAAVQ8AAFwOAABcAQAAVQAAAF8DAABWAgAAWgUAAFMEAABZBwAAUAYAAPAKAAD5CwAA8wgAAPoJAAD2DgAA/w8AAPUMAAD8DQAA/AIAAPUDAAD/AAAA9gEAAPoGAADzBwAA+QQAAPAFAABgCwAAaQoAAGMJAABqCAAAZg8AAG8OAABlDQAAbAwAAGwDAABlAgAAbwEAAGYAAABqBwAAYwYAAGkFAABgBAAAoAwAAKkNAACjDgAAqg8AAKYIAACvCQAApQoAAKwLAACsBAAApQUAAK8GAACmBwAAqgAAAKMBAACpAgAAoAMAADANAAA5DAAAMw8AADoOAAA2CQAAPwgAADULAAA8CgAAPAUAADUEAAA/BwAANgYAADoBAAAzAAAAOQMAADACAACQDgAAmQ8AAJMMAACaDQAAlgoAAJ8LAACVCAAAnAkAAJwGAACVBwAAnwQAAJYFAACaAgAAkwMAAJkAAACQAQAAAA8AAAkOAAADDQAACgwAAAYLAAAPCgAABQkAAAwIAAAMBwAABQYAAA8FAAAGBAAACgMAAAMCAAAJAQAAAAAAAP////////////////////////////////////////////////////////////////////////////////////8AAAAACAAAAAMAAAD/////////////////////////////////////////////////////////////////////AAAAAAEAAAAJAAAA/////////////////////////////////////////////////////////////////////wEAAAAIAAAAAwAAAAkAAAAIAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAAoAAAD/////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAAAQAAAAIAAAAKAAAA/////////////////////////////////////////////////////wkAAAACAAAACgAAAAAAAAACAAAACQAAAP////////////////////////////////////////////////////8CAAAACAAAAAMAAAACAAAACgAAAAgAAAAKAAAACQAAAAgAAAD/////////////////////////////////////AwAAAAsAAAACAAAA/////////////////////////////////////////////////////////////////////wAAAAALAAAAAgAAAAgAAAALAAAAAAAAAP////////////////////////////////////////////////////8BAAAACQAAAAAAAAACAAAAAwAAAAsAAAD/////////////////////////////////////////////////////AQAAAAsAAAACAAAAAQAAAAkAAAALAAAACQAAAAgAAAALAAAA/////////////////////////////////////wMAAAAKAAAAAQAAAAsAAAAKAAAAAwAAAP////////////////////////////////////////////////////8AAAAACgAAAAEAAAAAAAAACAAAAAoAAAAIAAAACwAAAAoAAAD/////////////////////////////////////AwAAAAkAAAAAAAAAAwAAAAsAAAAJAAAACwAAAAoAAAAJAAAA/////////////////////////////////////wkAAAAIAAAACgAAAAoAAAAIAAAACwAAAP////////////////////////////////////////////////////8EAAAABwAAAAgAAAD/////////////////////////////////////////////////////////////////////BAAAAAMAAAAAAAAABwAAAAMAAAAEAAAA/////////////////////////////////////////////////////wAAAAABAAAACQAAAAgAAAAEAAAABwAAAP////////////////////////////////////////////////////8EAAAAAQAAAAkAAAAEAAAABwAAAAEAAAAHAAAAAwAAAAEAAAD/////////////////////////////////////AQAAAAIAAAAKAAAACAAAAAQAAAAHAAAA/////////////////////////////////////////////////////wMAAAAEAAAABwAAAAMAAAAAAAAABAAAAAEAAAACAAAACgAAAP////////////////////////////////////8JAAAAAgAAAAoAAAAJAAAAAAAAAAIAAAAIAAAABAAAAAcAAAD/////////////////////////////////////AgAAAAoAAAAJAAAAAgAAAAkAAAAHAAAAAgAAAAcAAAADAAAABwAAAAkAAAAEAAAA/////////////////////wgAAAAEAAAABwAAAAMAAAALAAAAAgAAAP////////////////////////////////////////////////////8LAAAABAAAAAcAAAALAAAAAgAAAAQAAAACAAAAAAAAAAQAAAD/////////////////////////////////////CQAAAAAAAAABAAAACAAAAAQAAAAHAAAAAgAAAAMAAAALAAAA/////////////////////////////////////wQAAAAHAAAACwAAAAkAAAAEAAAACwAAAAkAAAALAAAAAgAAAAkAAAACAAAAAQAAAP////////////////////8DAAAACgAAAAEAAAADAAAACwAAAAoAAAAHAAAACAAAAAQAAAD/////////////////////////////////////AQAAAAsAAAAKAAAAAQAAAAQAAAALAAAAAQAAAAAAAAAEAAAABwAAAAsAAAAEAAAA/////////////////////wQAAAAHAAAACAAAAAkAAAAAAAAACwAAAAkAAAALAAAACgAAAAsAAAAAAAAAAwAAAP////////////////////8EAAAABwAAAAsAAAAEAAAACwAAAAkAAAAJAAAACwAAAAoAAAD/////////////////////////////////////CQAAAAUAAAAEAAAA/////////////////////////////////////////////////////////////////////wkAAAAFAAAABAAAAAAAAAAIAAAAAwAAAP////////////////////////////////////////////////////8AAAAABQAAAAQAAAABAAAABQAAAAAAAAD/////////////////////////////////////////////////////CAAAAAUAAAAEAAAACAAAAAMAAAAFAAAAAwAAAAEAAAAFAAAA/////////////////////////////////////wEAAAACAAAACgAAAAkAAAAFAAAABAAAAP////////////////////////////////////////////////////8DAAAAAAAAAAgAAAABAAAAAgAAAAoAAAAEAAAACQAAAAUAAAD/////////////////////////////////////BQAAAAIAAAAKAAAABQAAAAQAAAACAAAABAAAAAAAAAACAAAA/////////////////////////////////////wIAAAAKAAAABQAAAAMAAAACAAAABQAAAAMAAAAFAAAABAAAAAMAAAAEAAAACAAAAP////////////////////8JAAAABQAAAAQAAAACAAAAAwAAAAsAAAD/////////////////////////////////////////////////////AAAAAAsAAAACAAAAAAAAAAgAAAALAAAABAAAAAkAAAAFAAAA/////////////////////////////////////wAAAAAFAAAABAAAAAAAAAABAAAABQAAAAIAAAADAAAACwAAAP////////////////////////////////////8CAAAAAQAAAAUAAAACAAAABQAAAAgAAAACAAAACAAAAAsAAAAEAAAACAAAAAUAAAD/////////////////////CgAAAAMAAAALAAAACgAAAAEAAAADAAAACQAAAAUAAAAEAAAA/////////////////////////////////////wQAAAAJAAAABQAAAAAAAAAIAAAAAQAAAAgAAAAKAAAAAQAAAAgAAAALAAAACgAAAP////////////////////8FAAAABAAAAAAAAAAFAAAAAAAAAAsAAAAFAAAACwAAAAoAAAALAAAAAAAAAAMAAAD/////////////////////BQAAAAQAAAAIAAAABQAAAAgAAAAKAAAACgAAAAgAAAALAAAA/////////////////////////////////////wkAAAAHAAAACAAAAAUAAAAHAAAACQAAAP////////////////////////////////////////////////////8JAAAAAwAAAAAAAAAJAAAABQAAAAMAAAAFAAAABwAAAAMAAAD/////////////////////////////////////AAAAAAcAAAAIAAAAAAAAAAEAAAAHAAAAAQAAAAUAAAAHAAAA/////////////////////////////////////wEAAAAFAAAAAwAAAAMAAAAFAAAABwAAAP////////////////////////////////////////////////////8JAAAABwAAAAgAAAAJAAAABQAAAAcAAAAKAAAAAQAAAAIAAAD/////////////////////////////////////CgAAAAEAAAACAAAACQAAAAUAAAAAAAAABQAAAAMAAAAAAAAABQAAAAcAAAADAAAA/////////////////////wgAAAAAAAAAAgAAAAgAAAACAAAABQAAAAgAAAAFAAAABwAAAAoAAAAFAAAAAgAAAP////////////////////8CAAAACgAAAAUAAAACAAAABQAAAAMAAAADAAAABQAAAAcAAAD/////////////////////////////////////BwAAAAkAAAAFAAAABwAAAAgAAAAJAAAAAwAAAAsAAAACAAAA/////////////////////////////////////wkAAAAFAAAABwAAAAkAAAAHAAAAAgAAAAkAAAACAAAAAAAAAAIAAAAHAAAACwAAAP////////////////////8CAAAAAwAAAAsAAAAAAAAAAQAAAAgAAAABAAAABwAAAAgAAAABAAAABQAAAAcAAAD/////////////////////CwAAAAIAAAABAAAACwAAAAEAAAAHAAAABwAAAAEAAAAFAAAA/////////////////////////////////////wkAAAAFAAAACAAAAAgAAAAFAAAABwAAAAoAAAABAAAAAwAAAAoAAAADAAAACwAAAP////////////////////8FAAAABwAAAAAAAAAFAAAAAAAAAAkAAAAHAAAACwAAAAAAAAABAAAAAAAAAAoAAAALAAAACgAAAAAAAAD/////CwAAAAoAAAAAAAAACwAAAAAAAAADAAAACgAAAAUAAAAAAAAACAAAAAAAAAAHAAAABQAAAAcAAAAAAAAA/////wsAAAAKAAAABQAAAAcAAAALAAAABQAAAP////////////////////////////////////////////////////8KAAAABgAAAAUAAAD/////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAABQAAAAoAAAAGAAAA/////////////////////////////////////////////////////wkAAAAAAAAAAQAAAAUAAAAKAAAABgAAAP////////////////////////////////////////////////////8BAAAACAAAAAMAAAABAAAACQAAAAgAAAAFAAAACgAAAAYAAAD/////////////////////////////////////AQAAAAYAAAAFAAAAAgAAAAYAAAABAAAA/////////////////////////////////////////////////////wEAAAAGAAAABQAAAAEAAAACAAAABgAAAAMAAAAAAAAACAAAAP////////////////////////////////////8JAAAABgAAAAUAAAAJAAAAAAAAAAYAAAAAAAAAAgAAAAYAAAD/////////////////////////////////////BQAAAAkAAAAIAAAABQAAAAgAAAACAAAABQAAAAIAAAAGAAAAAwAAAAIAAAAIAAAA/////////////////////wIAAAADAAAACwAAAAoAAAAGAAAABQAAAP////////////////////////////////////////////////////8LAAAAAAAAAAgAAAALAAAAAgAAAAAAAAAKAAAABgAAAAUAAAD/////////////////////////////////////AAAAAAEAAAAJAAAAAgAAAAMAAAALAAAABQAAAAoAAAAGAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAEAAAAJAAAAAgAAAAkAAAALAAAAAgAAAAkAAAAIAAAACwAAAP////////////////////8GAAAAAwAAAAsAAAAGAAAABQAAAAMAAAAFAAAAAQAAAAMAAAD/////////////////////////////////////AAAAAAgAAAALAAAAAAAAAAsAAAAFAAAAAAAAAAUAAAABAAAABQAAAAsAAAAGAAAA/////////////////////wMAAAALAAAABgAAAAAAAAADAAAABgAAAAAAAAAGAAAABQAAAAAAAAAFAAAACQAAAP////////////////////8GAAAABQAAAAkAAAAGAAAACQAAAAsAAAALAAAACQAAAAgAAAD/////////////////////////////////////BQAAAAoAAAAGAAAABAAAAAcAAAAIAAAA/////////////////////////////////////////////////////wQAAAADAAAAAAAAAAQAAAAHAAAAAwAAAAYAAAAFAAAACgAAAP////////////////////////////////////8BAAAACQAAAAAAAAAFAAAACgAAAAYAAAAIAAAABAAAAAcAAAD/////////////////////////////////////CgAAAAYAAAAFAAAAAQAAAAkAAAAHAAAAAQAAAAcAAAADAAAABwAAAAkAAAAEAAAA/////////////////////wYAAAABAAAAAgAAAAYAAAAFAAAAAQAAAAQAAAAHAAAACAAAAP////////////////////////////////////8BAAAAAgAAAAUAAAAFAAAAAgAAAAYAAAADAAAAAAAAAAQAAAADAAAABAAAAAcAAAD/////////////////////CAAAAAQAAAAHAAAACQAAAAAAAAAFAAAAAAAAAAYAAAAFAAAAAAAAAAIAAAAGAAAA/////////////////////wcAAAADAAAACQAAAAcAAAAJAAAABAAAAAMAAAACAAAACQAAAAUAAAAJAAAABgAAAAIAAAAGAAAACQAAAP////8DAAAACwAAAAIAAAAHAAAACAAAAAQAAAAKAAAABgAAAAUAAAD/////////////////////////////////////BQAAAAoAAAAGAAAABAAAAAcAAAACAAAABAAAAAIAAAAAAAAAAgAAAAcAAAALAAAA/////////////////////wAAAAABAAAACQAAAAQAAAAHAAAACAAAAAIAAAADAAAACwAAAAUAAAAKAAAABgAAAP////////////////////8JAAAAAgAAAAEAAAAJAAAACwAAAAIAAAAJAAAABAAAAAsAAAAHAAAACwAAAAQAAAAFAAAACgAAAAYAAAD/////CAAAAAQAAAAHAAAAAwAAAAsAAAAFAAAAAwAAAAUAAAABAAAABQAAAAsAAAAGAAAA/////////////////////wUAAAABAAAACwAAAAUAAAALAAAABgAAAAEAAAAAAAAACwAAAAcAAAALAAAABAAAAAAAAAAEAAAACwAAAP////8AAAAABQAAAAkAAAAAAAAABgAAAAUAAAAAAAAAAwAAAAYAAAALAAAABgAAAAMAAAAIAAAABAAAAAcAAAD/////BgAAAAUAAAAJAAAABgAAAAkAAAALAAAABAAAAAcAAAAJAAAABwAAAAsAAAAJAAAA/////////////////////woAAAAEAAAACQAAAAYAAAAEAAAACgAAAP////////////////////////////////////////////////////8EAAAACgAAAAYAAAAEAAAACQAAAAoAAAAAAAAACAAAAAMAAAD/////////////////////////////////////CgAAAAAAAAABAAAACgAAAAYAAAAAAAAABgAAAAQAAAAAAAAA/////////////////////////////////////wgAAAADAAAAAQAAAAgAAAABAAAABgAAAAgAAAAGAAAABAAAAAYAAAABAAAACgAAAP////////////////////8BAAAABAAAAAkAAAABAAAAAgAAAAQAAAACAAAABgAAAAQAAAD/////////////////////////////////////AwAAAAAAAAAIAAAAAQAAAAIAAAAJAAAAAgAAAAQAAAAJAAAAAgAAAAYAAAAEAAAA/////////////////////wAAAAACAAAABAAAAAQAAAACAAAABgAAAP////////////////////////////////////////////////////8IAAAAAwAAAAIAAAAIAAAAAgAAAAQAAAAEAAAAAgAAAAYAAAD/////////////////////////////////////CgAAAAQAAAAJAAAACgAAAAYAAAAEAAAACwAAAAIAAAADAAAA/////////////////////////////////////wAAAAAIAAAAAgAAAAIAAAAIAAAACwAAAAQAAAAJAAAACgAAAAQAAAAKAAAABgAAAP////////////////////8DAAAACwAAAAIAAAAAAAAAAQAAAAYAAAAAAAAABgAAAAQAAAAGAAAAAQAAAAoAAAD/////////////////////BgAAAAQAAAABAAAABgAAAAEAAAAKAAAABAAAAAgAAAABAAAAAgAAAAEAAAALAAAACAAAAAsAAAABAAAA/////wkAAAAGAAAABAAAAAkAAAADAAAABgAAAAkAAAABAAAAAwAAAAsAAAAGAAAAAwAAAP////////////////////8IAAAACwAAAAEAAAAIAAAAAQAAAAAAAAALAAAABgAAAAEAAAAJAAAAAQAAAAQAAAAGAAAABAAAAAEAAAD/////AwAAAAsAAAAGAAAAAwAAAAYAAAAAAAAAAAAAAAYAAAAEAAAA/////////////////////////////////////wYAAAAEAAAACAAAAAsAAAAGAAAACAAAAP////////////////////////////////////////////////////8HAAAACgAAAAYAAAAHAAAACAAAAAoAAAAIAAAACQAAAAoAAAD/////////////////////////////////////AAAAAAcAAAADAAAAAAAAAAoAAAAHAAAAAAAAAAkAAAAKAAAABgAAAAcAAAAKAAAA/////////////////////woAAAAGAAAABwAAAAEAAAAKAAAABwAAAAEAAAAHAAAACAAAAAEAAAAIAAAAAAAAAP////////////////////8KAAAABgAAAAcAAAAKAAAABwAAAAEAAAABAAAABwAAAAMAAAD/////////////////////////////////////AQAAAAIAAAAGAAAAAQAAAAYAAAAIAAAAAQAAAAgAAAAJAAAACAAAAAYAAAAHAAAA/////////////////////wIAAAAGAAAACQAAAAIAAAAJAAAAAQAAAAYAAAAHAAAACQAAAAAAAAAJAAAAAwAAAAcAAAADAAAACQAAAP////8HAAAACAAAAAAAAAAHAAAAAAAAAAYAAAAGAAAAAAAAAAIAAAD/////////////////////////////////////BwAAAAMAAAACAAAABgAAAAcAAAACAAAA/////////////////////////////////////////////////////wIAAAADAAAACwAAAAoAAAAGAAAACAAAAAoAAAAIAAAACQAAAAgAAAAGAAAABwAAAP////////////////////8CAAAAAAAAAAcAAAACAAAABwAAAAsAAAAAAAAACQAAAAcAAAAGAAAABwAAAAoAAAAJAAAACgAAAAcAAAD/////AQAAAAgAAAAAAAAAAQAAAAcAAAAIAAAAAQAAAAoAAAAHAAAABgAAAAcAAAAKAAAAAgAAAAMAAAALAAAA/////wsAAAACAAAAAQAAAAsAAAABAAAABwAAAAoAAAAGAAAAAQAAAAYAAAAHAAAAAQAAAP////////////////////8IAAAACQAAAAYAAAAIAAAABgAAAAcAAAAJAAAAAQAAAAYAAAALAAAABgAAAAMAAAABAAAAAwAAAAYAAAD/////AAAAAAkAAAABAAAACwAAAAYAAAAHAAAA/////////////////////////////////////////////////////wcAAAAIAAAAAAAAAAcAAAAAAAAABgAAAAMAAAALAAAAAAAAAAsAAAAGAAAAAAAAAP////////////////////8HAAAACwAAAAYAAAD/////////////////////////////////////////////////////////////////////BwAAAAYAAAALAAAA/////////////////////////////////////////////////////////////////////wMAAAAAAAAACAAAAAsAAAAHAAAABgAAAP////////////////////////////////////////////////////8AAAAAAQAAAAkAAAALAAAABwAAAAYAAAD/////////////////////////////////////////////////////CAAAAAEAAAAJAAAACAAAAAMAAAABAAAACwAAAAcAAAAGAAAA/////////////////////////////////////woAAAABAAAAAgAAAAYAAAALAAAABwAAAP////////////////////////////////////////////////////8BAAAAAgAAAAoAAAADAAAAAAAAAAgAAAAGAAAACwAAAAcAAAD/////////////////////////////////////AgAAAAkAAAAAAAAAAgAAAAoAAAAJAAAABgAAAAsAAAAHAAAA/////////////////////////////////////wYAAAALAAAABwAAAAIAAAAKAAAAAwAAAAoAAAAIAAAAAwAAAAoAAAAJAAAACAAAAP////////////////////8HAAAAAgAAAAMAAAAGAAAAAgAAAAcAAAD/////////////////////////////////////////////////////BwAAAAAAAAAIAAAABwAAAAYAAAAAAAAABgAAAAIAAAAAAAAA/////////////////////////////////////wIAAAAHAAAABgAAAAIAAAADAAAABwAAAAAAAAABAAAACQAAAP////////////////////////////////////8BAAAABgAAAAIAAAABAAAACAAAAAYAAAABAAAACQAAAAgAAAAIAAAABwAAAAYAAAD/////////////////////CgAAAAcAAAAGAAAACgAAAAEAAAAHAAAAAQAAAAMAAAAHAAAA/////////////////////////////////////woAAAAHAAAABgAAAAEAAAAHAAAACgAAAAEAAAAIAAAABwAAAAEAAAAAAAAACAAAAP////////////////////8AAAAAAwAAAAcAAAAAAAAABwAAAAoAAAAAAAAACgAAAAkAAAAGAAAACgAAAAcAAAD/////////////////////BwAAAAYAAAAKAAAABwAAAAoAAAAIAAAACAAAAAoAAAAJAAAA/////////////////////////////////////wYAAAAIAAAABAAAAAsAAAAIAAAABgAAAP////////////////////////////////////////////////////8DAAAABgAAAAsAAAADAAAAAAAAAAYAAAAAAAAABAAAAAYAAAD/////////////////////////////////////CAAAAAYAAAALAAAACAAAAAQAAAAGAAAACQAAAAAAAAABAAAA/////////////////////////////////////wkAAAAEAAAABgAAAAkAAAAGAAAAAwAAAAkAAAADAAAAAQAAAAsAAAADAAAABgAAAP////////////////////8GAAAACAAAAAQAAAAGAAAACwAAAAgAAAACAAAACgAAAAEAAAD/////////////////////////////////////AQAAAAIAAAAKAAAAAwAAAAAAAAALAAAAAAAAAAYAAAALAAAAAAAAAAQAAAAGAAAA/////////////////////wQAAAALAAAACAAAAAQAAAAGAAAACwAAAAAAAAACAAAACQAAAAIAAAAKAAAACQAAAP////////////////////8KAAAACQAAAAMAAAAKAAAAAwAAAAIAAAAJAAAABAAAAAMAAAALAAAAAwAAAAYAAAAEAAAABgAAAAMAAAD/////CAAAAAIAAAADAAAACAAAAAQAAAACAAAABAAAAAYAAAACAAAA/////////////////////////////////////wAAAAAEAAAAAgAAAAQAAAAGAAAAAgAAAP////////////////////////////////////////////////////8BAAAACQAAAAAAAAACAAAAAwAAAAQAAAACAAAABAAAAAYAAAAEAAAAAwAAAAgAAAD/////////////////////AQAAAAkAAAAEAAAAAQAAAAQAAAACAAAAAgAAAAQAAAAGAAAA/////////////////////////////////////wgAAAABAAAAAwAAAAgAAAAGAAAAAQAAAAgAAAAEAAAABgAAAAYAAAAKAAAAAQAAAP////////////////////8KAAAAAQAAAAAAAAAKAAAAAAAAAAYAAAAGAAAAAAAAAAQAAAD/////////////////////////////////////BAAAAAYAAAADAAAABAAAAAMAAAAIAAAABgAAAAoAAAADAAAAAAAAAAMAAAAJAAAACgAAAAkAAAADAAAA/////woAAAAJAAAABAAAAAYAAAAKAAAABAAAAP////////////////////////////////////////////////////8EAAAACQAAAAUAAAAHAAAABgAAAAsAAAD/////////////////////////////////////////////////////AAAAAAgAAAADAAAABAAAAAkAAAAFAAAACwAAAAcAAAAGAAAA/////////////////////////////////////wUAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAcAAAAGAAAACwAAAP////////////////////////////////////8LAAAABwAAAAYAAAAIAAAAAwAAAAQAAAADAAAABQAAAAQAAAADAAAAAQAAAAUAAAD/////////////////////CQAAAAUAAAAEAAAACgAAAAEAAAACAAAABwAAAAYAAAALAAAA/////////////////////////////////////wYAAAALAAAABwAAAAEAAAACAAAACgAAAAAAAAAIAAAAAwAAAAQAAAAJAAAABQAAAP////////////////////8HAAAABgAAAAsAAAAFAAAABAAAAAoAAAAEAAAAAgAAAAoAAAAEAAAAAAAAAAIAAAD/////////////////////AwAAAAQAAAAIAAAAAwAAAAUAAAAEAAAAAwAAAAIAAAAFAAAACgAAAAUAAAACAAAACwAAAAcAAAAGAAAA/////wcAAAACAAAAAwAAAAcAAAAGAAAAAgAAAAUAAAAEAAAACQAAAP////////////////////////////////////8JAAAABQAAAAQAAAAAAAAACAAAAAYAAAAAAAAABgAAAAIAAAAGAAAACAAAAAcAAAD/////////////////////AwAAAAYAAAACAAAAAwAAAAcAAAAGAAAAAQAAAAUAAAAAAAAABQAAAAQAAAAAAAAA/////////////////////wYAAAACAAAACAAAAAYAAAAIAAAABwAAAAIAAAABAAAACAAAAAQAAAAIAAAABQAAAAEAAAAFAAAACAAAAP////8JAAAABQAAAAQAAAAKAAAAAQAAAAYAAAABAAAABwAAAAYAAAABAAAAAwAAAAcAAAD/////////////////////AQAAAAYAAAAKAAAAAQAAAAcAAAAGAAAAAQAAAAAAAAAHAAAACAAAAAcAAAAAAAAACQAAAAUAAAAEAAAA/////wQAAAAAAAAACgAAAAQAAAAKAAAABQAAAAAAAAADAAAACgAAAAYAAAAKAAAABwAAAAMAAAAHAAAACgAAAP////8HAAAABgAAAAoAAAAHAAAACgAAAAgAAAAFAAAABAAAAAoAAAAEAAAACAAAAAoAAAD/////////////////////BgAAAAkAAAAFAAAABgAAAAsAAAAJAAAACwAAAAgAAAAJAAAA/////////////////////////////////////wMAAAAGAAAACwAAAAAAAAAGAAAAAwAAAAAAAAAFAAAABgAAAAAAAAAJAAAABQAAAP////////////////////8AAAAACwAAAAgAAAAAAAAABQAAAAsAAAAAAAAAAQAAAAUAAAAFAAAABgAAAAsAAAD/////////////////////BgAAAAsAAAADAAAABgAAAAMAAAAFAAAABQAAAAMAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAkAAAAFAAAACwAAAAkAAAALAAAACAAAAAsAAAAFAAAABgAAAP////////////////////8AAAAACwAAAAMAAAAAAAAABgAAAAsAAAAAAAAACQAAAAYAAAAFAAAABgAAAAkAAAABAAAAAgAAAAoAAAD/////CwAAAAgAAAAFAAAACwAAAAUAAAAGAAAACAAAAAAAAAAFAAAACgAAAAUAAAACAAAAAAAAAAIAAAAFAAAA/////wYAAAALAAAAAwAAAAYAAAADAAAABQAAAAIAAAAKAAAAAwAAAAoAAAAFAAAAAwAAAP////////////////////8FAAAACAAAAAkAAAAFAAAAAgAAAAgAAAAFAAAABgAAAAIAAAADAAAACAAAAAIAAAD/////////////////////CQAAAAUAAAAGAAAACQAAAAYAAAAAAAAAAAAAAAYAAAACAAAA/////////////////////////////////////wEAAAAFAAAACAAAAAEAAAAIAAAAAAAAAAUAAAAGAAAACAAAAAMAAAAIAAAAAgAAAAYAAAACAAAACAAAAP////8BAAAABQAAAAYAAAACAAAAAQAAAAYAAAD/////////////////////////////////////////////////////AQAAAAMAAAAGAAAAAQAAAAYAAAAKAAAAAwAAAAgAAAAGAAAABQAAAAYAAAAJAAAACAAAAAkAAAAGAAAA/////woAAAABAAAAAAAAAAoAAAAAAAAABgAAAAkAAAAFAAAAAAAAAAUAAAAGAAAAAAAAAP////////////////////8AAAAAAwAAAAgAAAAFAAAABgAAAAoAAAD/////////////////////////////////////////////////////CgAAAAUAAAAGAAAA/////////////////////////////////////////////////////////////////////wsAAAAFAAAACgAAAAcAAAAFAAAACwAAAP////////////////////////////////////////////////////8LAAAABQAAAAoAAAALAAAABwAAAAUAAAAIAAAAAwAAAAAAAAD/////////////////////////////////////BQAAAAsAAAAHAAAABQAAAAoAAAALAAAAAQAAAAkAAAAAAAAA/////////////////////////////////////woAAAAHAAAABQAAAAoAAAALAAAABwAAAAkAAAAIAAAAAQAAAAgAAAADAAAAAQAAAP////////////////////8LAAAAAQAAAAIAAAALAAAABwAAAAEAAAAHAAAABQAAAAEAAAD/////////////////////////////////////AAAAAAgAAAADAAAAAQAAAAIAAAAHAAAAAQAAAAcAAAAFAAAABwAAAAIAAAALAAAA/////////////////////wkAAAAHAAAABQAAAAkAAAACAAAABwAAAAkAAAAAAAAAAgAAAAIAAAALAAAABwAAAP////////////////////8HAAAABQAAAAIAAAAHAAAAAgAAAAsAAAAFAAAACQAAAAIAAAADAAAAAgAAAAgAAAAJAAAACAAAAAIAAAD/////AgAAAAUAAAAKAAAAAgAAAAMAAAAFAAAAAwAAAAcAAAAFAAAA/////////////////////////////////////wgAAAACAAAAAAAAAAgAAAAFAAAAAgAAAAgAAAAHAAAABQAAAAoAAAACAAAABQAAAP////////////////////8JAAAAAAAAAAEAAAAFAAAACgAAAAMAAAAFAAAAAwAAAAcAAAADAAAACgAAAAIAAAD/////////////////////CQAAAAgAAAACAAAACQAAAAIAAAABAAAACAAAAAcAAAACAAAACgAAAAIAAAAFAAAABwAAAAUAAAACAAAA/////wEAAAADAAAABQAAAAMAAAAHAAAABQAAAP////////////////////////////////////////////////////8AAAAACAAAAAcAAAAAAAAABwAAAAEAAAABAAAABwAAAAUAAAD/////////////////////////////////////CQAAAAAAAAADAAAACQAAAAMAAAAFAAAABQAAAAMAAAAHAAAA/////////////////////////////////////wkAAAAIAAAABwAAAAUAAAAJAAAABwAAAP////////////////////////////////////////////////////8FAAAACAAAAAQAAAAFAAAACgAAAAgAAAAKAAAACwAAAAgAAAD/////////////////////////////////////BQAAAAAAAAAEAAAABQAAAAsAAAAAAAAABQAAAAoAAAALAAAACwAAAAMAAAAAAAAA/////////////////////wAAAAABAAAACQAAAAgAAAAEAAAACgAAAAgAAAAKAAAACwAAAAoAAAAEAAAABQAAAP////////////////////8KAAAACwAAAAQAAAAKAAAABAAAAAUAAAALAAAAAwAAAAQAAAAJAAAABAAAAAEAAAADAAAAAQAAAAQAAAD/////AgAAAAUAAAABAAAAAgAAAAgAAAAFAAAAAgAAAAsAAAAIAAAABAAAAAUAAAAIAAAA/////////////////////wAAAAAEAAAACwAAAAAAAAALAAAAAwAAAAQAAAAFAAAACwAAAAIAAAALAAAAAQAAAAUAAAABAAAACwAAAP////8AAAAAAgAAAAUAAAAAAAAABQAAAAkAAAACAAAACwAAAAUAAAAEAAAABQAAAAgAAAALAAAACAAAAAUAAAD/////CQAAAAQAAAAFAAAAAgAAAAsAAAADAAAA/////////////////////////////////////////////////////wIAAAAFAAAACgAAAAMAAAAFAAAAAgAAAAMAAAAEAAAABQAAAAMAAAAIAAAABAAAAP////////////////////8FAAAACgAAAAIAAAAFAAAAAgAAAAQAAAAEAAAAAgAAAAAAAAD/////////////////////////////////////AwAAAAoAAAACAAAAAwAAAAUAAAAKAAAAAwAAAAgAAAAFAAAABAAAAAUAAAAIAAAAAAAAAAEAAAAJAAAA/////wUAAAAKAAAAAgAAAAUAAAACAAAABAAAAAEAAAAJAAAAAgAAAAkAAAAEAAAAAgAAAP////////////////////8IAAAABAAAAAUAAAAIAAAABQAAAAMAAAADAAAABQAAAAEAAAD/////////////////////////////////////AAAAAAQAAAAFAAAAAQAAAAAAAAAFAAAA/////////////////////////////////////////////////////wgAAAAEAAAABQAAAAgAAAAFAAAAAwAAAAkAAAAAAAAABQAAAAAAAAADAAAABQAAAP////////////////////8JAAAABAAAAAUAAAD/////////////////////////////////////////////////////////////////////BAAAAAsAAAAHAAAABAAAAAkAAAALAAAACQAAAAoAAAALAAAA/////////////////////////////////////wAAAAAIAAAAAwAAAAQAAAAJAAAABwAAAAkAAAALAAAABwAAAAkAAAAKAAAACwAAAP////////////////////8BAAAACgAAAAsAAAABAAAACwAAAAQAAAABAAAABAAAAAAAAAAHAAAABAAAAAsAAAD/////////////////////AwAAAAEAAAAEAAAAAwAAAAQAAAAIAAAAAQAAAAoAAAAEAAAABwAAAAQAAAALAAAACgAAAAsAAAAEAAAA/////wQAAAALAAAABwAAAAkAAAALAAAABAAAAAkAAAACAAAACwAAAAkAAAABAAAAAgAAAP////////////////////8JAAAABwAAAAQAAAAJAAAACwAAAAcAAAAJAAAAAQAAAAsAAAACAAAACwAAAAEAAAAAAAAACAAAAAMAAAD/////CwAAAAcAAAAEAAAACwAAAAQAAAACAAAAAgAAAAQAAAAAAAAA/////////////////////////////////////wsAAAAHAAAABAAAAAsAAAAEAAAAAgAAAAgAAAADAAAABAAAAAMAAAACAAAABAAAAP////////////////////8CAAAACQAAAAoAAAACAAAABwAAAAkAAAACAAAAAwAAAAcAAAAHAAAABAAAAAkAAAD/////////////////////CQAAAAoAAAAHAAAACQAAAAcAAAAEAAAACgAAAAIAAAAHAAAACAAAAAcAAAAAAAAAAgAAAAAAAAAHAAAA/////wMAAAAHAAAACgAAAAMAAAAKAAAAAgAAAAcAAAAEAAAACgAAAAEAAAAKAAAAAAAAAAQAAAAAAAAACgAAAP////8BAAAACgAAAAIAAAAIAAAABwAAAAQAAAD/////////////////////////////////////////////////////BAAAAAkAAAABAAAABAAAAAEAAAAHAAAABwAAAAEAAAADAAAA/////////////////////////////////////wQAAAAJAAAAAQAAAAQAAAABAAAABwAAAAAAAAAIAAAAAQAAAAgAAAAHAAAAAQAAAP////////////////////8EAAAAAAAAAAMAAAAHAAAABAAAAAMAAAD/////////////////////////////////////////////////////BAAAAAgAAAAHAAAA/////////////////////////////////////////////////////////////////////wkAAAAKAAAACAAAAAoAAAALAAAACAAAAP////////////////////////////////////////////////////8DAAAAAAAAAAkAAAADAAAACQAAAAsAAAALAAAACQAAAAoAAAD/////////////////////////////////////AAAAAAEAAAAKAAAAAAAAAAoAAAAIAAAACAAAAAoAAAALAAAA/////////////////////////////////////wMAAAABAAAACgAAAAsAAAADAAAACgAAAP////////////////////////////////////////////////////8BAAAAAgAAAAsAAAABAAAACwAAAAkAAAAJAAAACwAAAAgAAAD/////////////////////////////////////AwAAAAAAAAAJAAAAAwAAAAkAAAALAAAAAQAAAAIAAAAJAAAAAgAAAAsAAAAJAAAA/////////////////////wAAAAACAAAACwAAAAgAAAAAAAAACwAAAP////////////////////////////////////////////////////8DAAAAAgAAAAsAAAD/////////////////////////////////////////////////////////////////////AgAAAAMAAAAIAAAAAgAAAAgAAAAKAAAACgAAAAgAAAAJAAAA/////////////////////////////////////wkAAAAKAAAAAgAAAAAAAAAJAAAAAgAAAP////////////////////////////////////////////////////8CAAAAAwAAAAgAAAACAAAACAAAAAoAAAAAAAAAAQAAAAgAAAABAAAACgAAAAgAAAD/////////////////////AQAAAAoAAAACAAAA/////////////////////////////////////////////////////////////////////wEAAAADAAAACAAAAAkAAAABAAAACAAAAP////////////////////////////////////////////////////8AAAAACQAAAAEAAAD/////////////////////////////////////////////////////////////////////AAAAAAMAAAAIAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8A/AEEbmFtZQHUAREAEl9fd2FzbV9pbml0X21lbW9yeQEFYWJvcnQCBHNicmsDBm1hbGxvYwQIZGxtYWxsb2MFBWR1bW15BhFfX3dhc21fY2FsbF9kdG9ycwcOX19tYXRoX2ludmFsaWQIDF9fbWF0aF94ZmxvdwkMX19tYXRoX29mbG93CgxfX21hdGhfdWZsb3cLA3BvdwwIY2hlY2tpbnQNC3NwZWNpYWxjYXNlDgNydW4PEnJ1bi5jb21tYW5kX2V4cG9ydBAVbWFsbG9jLmNvbW1hbmRfZXhwb3J0BxIBAA9fX3N0YWNrX3BvaW50ZXIJCgEABy5yb2RhdGEAJglwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQEFY2xhbmcGMTQuMC40AB4PdGFyZ2V0X2ZlYXR1cmVzASsLYnVsay1tZW1vcnk=",i)}var V5=null;try{G5=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Li=="function"&&Li("worker_threads"),V5=G5.Worker}catch{}var G5;function j$(i,e,t){var n=e===void 0?null:e,o=function(c,A){return Buffer.from(c,"base64").toString(A?"utf16":"utf8")}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:"");return function(c){return new V5(l,Object.assign({},c,{eval:!0}))}}function q$(i,e,t){var n=e===void 0?null:e,o=function(A,u){var h=atob(A);if(u){for(var f=new Uint8Array(h.length),d=0,p=h.length;d<p;++d)f[d]=h.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return h}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var $$=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",HI,WI,VI,eee=(HI="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0fSxwcm9ncmFtOm59fSk9PnsoKHttZW1vcnk6ZSxwcm9ncmFtOnN9KT0+e2NvbnN0IHI9TWF0aC5jZWlsKGUucmVkdWNlKCgoZSx7dHlwZTpzLHNpemU6cn0pPT5lK3Iqcy5CWVRFU19QRVJfRUxFTUVOVCksMCkvNjU1MzYpKzIsdD1uZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtpbml0aWFsOnIsbWF4aW11bTpyfSk7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHMse2Vudjp7bWVtb3J5OnR9fSkudGhlbigocz0+KHttZW1vcnk6ZS5yZWR1Y2UoKChlLHtpZDpyLHR5cGU6bixzaXplOm99KT0+e2NvbnN0IGk9cy5leHBvcnRzLm1hbGxvYyhvKm4uQllURVNfUEVSX0VMRU1FTlQpO3JldHVybiBlW3JdPXthZGRyZXNzOmksdmlldzpuZXcgbih0LmJ1ZmZlcixpLG8pfSxlfSkse30pLHJ1bjpzLmV4cG9ydHMucnVufSkpKX0pKHttZW1vcnk6W3tpZDoiY2h1bmtzIix0eXBlOlVpbnQ4QXJyYXksc2l6ZTp0KnQqdCo0Kjh9LHtpZDoidmVydGljZXMiLHR5cGU6RmxvYXQzMkFycmF5LHNpemU6dCp0KnQqMyo5KjV9LHtpZDoiYm91bmRzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOjZ9XSxwcm9ncmFtOm59KS50aGVuKCgoe21lbW9yeTpuLHJ1bjpvfSk9PntlPXtjaHVua1NpemU6dCxtZW1vcnk6bixydW46b30sc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHIpLHNlbGYucG9zdE1lc3NhZ2UoITApfSkpfTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpO2NvbnN0IHI9KHtkYXRhOnN9KT0+e2UubWVtb3J5LmNodW5rcy52aWV3LnNldChzKTtjb25zdCByPWUucnVuKGUubWVtb3J5LmNodW5rcy5hZGRyZXNzLGUubWVtb3J5LnZlcnRpY2VzLmFkZHJlc3MsZS5tZW1vcnkuYm91bmRzLmFkZHJlc3MsZS5jaHVua1NpemUpO2lmKDA9PT1yKXJldHVybiB2b2lkIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6ITF9LFtzLmJ1ZmZlcl0pO2NvbnN0IHQ9ZS5tZW1vcnkuYm91bmRzLnZpZXcuc2xpY2UoMCksbj1lLm1lbW9yeS52ZXJ0aWNlcy52aWV3LnNsaWNlKDAsMypyKjkpO3NlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6e2JvdW5kczp0LHZlcnRpY2VzOm59fSxbcy5idWZmZXIsdC5idWZmZXIsbi5idWZmZXJdKX19KCk7Cgo=",WI=null,VI=!1,$$?j$(HI,WI,VI):function(i,e,t){var n;return function(o){return n=n||q$(i,e,t),new Worker(n,o)}}(HI,WI,VI)),tee=typeof self.queueMicrotask=="function"?self.queueMicrotask:i=>{Promise.resolve().then(i).catch(e=>setTimeout(()=>{throw e}))},Et=new Y,z5=new Y,ui=new Y,Sc=class i extends cn{constructor({chunkMaterial:e=null,chunkSize:t=32,renderRadius:n=5,storage:o=null,worldgen:a=null}={}){super(),this.chunkMaterial=e,this.chunkSize=t,this.anchorChunk=new Y(1/0,1/0,1/0),this.dataChunks=new Map,this.renderChunks=new Map,this.renderRadius=n,this.renderGrid=i.getRenderGrid(n),this.loading={data:new Map,mesh:new Map},this.saving=new Map,this.storage=o,this.updateQueue=new Map,this.workers={mesher:new K1({buffer:t*t*t*4*8,options:{chunkSize:t},program:J$,script:eee}),...a?{worldgen:a(t)}:{}}}dispose(){let{loading:e,renderChunks:t,updateQueue:n,workers:o}=this;[e.data,e.mesh].forEach(a=>{a.forEach(l=>{l.abort=!0}),a.clear()}),t.forEach(a=>a.dispose()),n.clear(),[o.mesher,o.worldgen].forEach(a=>{a&&a.dispose()})}reset(){let{anchorChunk:e,dataChunks:t,loading:n,renderChunks:o,updateQueue:a,workers:l}=this;e.set(1/0,1/0,1/0),t.clear(),[n.data,n.mesh].forEach(c=>{c.forEach(A=>{A.abort=!0}),c.clear()}),o.size&&(o.forEach(c=>{c.dispose(),this.remove(c)}),o.clear(),this.dispatchEvent({type:"update"})),a.clear(),[l.mesher,l.worldgen].forEach(c=>{c&&(c.queue.length=0)})}getChunk(e,t,n){let{chunkSize:o,dataChunks:a,loading:{data:l},storage:c,workers:A}=this,u=`${e}:${t}:${n}`;return new Promise(h=>{if(a.has(u))return void h(a.get(u));if(l.has(u))return void l.get(u).promises.push(h);let f={abort:!1,promises:[h]};l.set(u,f),(c?c.get(u):Promise.resolve(!1)).then(d=>{if(!f.abort)return d||(A.worldgen?A.worldgen.run({x:e,y:t,z:n}):new Uint8Array(o*o*o*4))}).then(d=>{f.abort||(l.delete(u),a.set(u,d),f.promises.forEach(p=>p(d)))})})}loadChunk(e,t,n){let{chunkMaterial:o,chunkSize:a,renderChunks:l,loading:{mesh:c},workers:A}=this,u=`${e}:${t}:${n}`;if(c.has(u))return;let h={abort:!1};return c.set(u,h),Promise.all(i.chunkGrid.map(f=>this.getChunk(e+f.x,t+f.y,n+f.z))).then(f=>{if(!h.abort)return A.mesher.run(f)}).then(f=>{if(h.abort)return;c.delete(u);let d=l.get(u);if(d)f?d.update(f):(d.dispose(),this.remove(d));else if(f){let p=new XI({chunkMaterial:o,chunkSize:a,geometry:f,position:{x:e,y:t,z:n}});this.add(p),l.set(u,p)}this.dispatchEvent({type:"update"})})}importChunks(e,t=!0,n=!0){let{chunkSize:o,dataChunks:a}=this,[l]=new Uint16Array(e.slice(0,2)),c=JSON.parse(new TextDecoder().decode(e.slice(2,2+l))),A=6+o*o*o*4;if(c.chunkSize!==o)throw new Error("World chunkSize is: ${chunkSize} but imported chunkSize is: ${metadata.chunkSize}. They need to match.");this.reset();for(let u=2+l;u<e.byteLength;u+=A){let h=new Int16Array(e.slice(u,u+6));a.set(`${h[0]}:${h[1]}:${h[2]}`,new Uint8Array(e.slice(u+6,u+A)))}return t&&this.updateLoadedChunks(),n&&(this.scale.setScalar(c.scale),this.updateMatrixWorld()),c}updateChunks(e){let{anchorChunk:t,chunkSize:n,dataChunks:o,loading:{mesh:a},renderChunks:l,renderGrid:c,renderRadius:A}=this;if(this.worldToLocal(Et.copy(e)).divideScalar(n).floor(),t.equals(Et))return;t.copy(Et);let u=!1,h=A+2;o.forEach((f,d)=>{let[p,m,b]=d.split(":");if(Et.set(parseInt(p,10),parseInt(m,10),parseInt(b,10)),t.distanceTo(Et)>h){o.delete(d),a.has(d)&&(a.get(d).abort=!0,a.delete(d));let g=l.get(d);g&&(l.delete(d),g.dispose(),this.remove(g),u=!0)}}),u&&this.dispatchEvent({type:"update"}),c.forEach(f=>{Et.addVectors(t,f);let d=`${Et.x}:${Et.y}:${Et.z}`;l.has(d)||this.loadChunk(Et.x,Et.y,Et.z)})}updateLoadedChunks(){let{dataChunks:e,renderChunks:t}=this,n=new Y(-.5,-.5,-.5),o=[];for(let a of e.keys())if(!t.has(a)){let[l,c,A]=a.split(":");o.push(new Y(parseInt(l,10),parseInt(c,10),parseInt(A,10)))}o.sort((a,l)=>a.distanceTo(n)-l.distanceTo(n)).forEach(({x:a,y:l,z:c})=>this.loadChunk(a,l,c))}updateVolume(e,t,n,o){let{chunkSize:a,dataChunks:l,loading:{mesh:c},updateQueue:A}=this,u=!!A.size;this.worldToLocal(z5.copy(e)).floor(),i.getBrush(t).forEach(h=>{ui.addVectors(z5,h),Et.copy(ui).divideScalar(a).floor(),ui.addScaledVector(Et,-a).floor();let f=`${Et.x}:${Et.y}:${Et.z}`,d=l.get(f);if(d){let p=4*(ui.z*a*a+ui.y*a+ui.x);d[p]=n,o&&d.set([o.r,o.g,o.b],p+1),this.saveChunk(f),A.set(f,!0),ui.x===0&&A.set(`${Et.x-1}:${Et.y}:${Et.z}`,!0),ui.y===0&&A.set(`${Et.x}:${Et.y-1}:${Et.z}`,!0),ui.z===0&&A.set(`${Et.x}:${Et.y}:${Et.z-1}`,!0),ui.x===0&&ui.y===0&&ui.z===0&&A.set(`${Et.x-1}:${Et.y-1}:${Et.z-1}`,!0),ui.x===0&&ui.y===0&&A.set(`${Et.x-1}:${Et.y-1}:${Et.z}`,!0),ui.y===0&&ui.z===0&&A.set(`${Et.x}:${Et.y-1}:${Et.z-1}`,!0),ui.x===0&&ui.z===0&&A.set(`${Et.x-1}:${Et.y}:${Et.z-1}`,!0)}}),!u&&A.size&&tee(()=>{A.forEach((h,f)=>{c.has(f)&&(c.get(f).abort=!0,c.delete(f));let[d,p,m]=f.split(":");this.loadChunk(parseInt(d,10),parseInt(p,10),parseInt(m,10))}),A.clear()})}saveChunk(e){let{dataChunks:t,saving:n,storage:o}=this;o&&o.set&&!n.has(e)&&(n.set(e,!0),setTimeout(()=>{n.delete(e);let a=t.get(e);a&&o.set(e,a)},o.saveInterval||0))}static getBrush(e){let{brushes:t}=i,n=t.get(e);if(!n){n=[];let o=new Y().setScalar(.5);for(let a=-e;a<=e+1;a+=1)for(let l=-e;l<=e+1;l+=1)for(let c=-e;c<=e+1;c+=1){let A=new Y(c,l,a);A.distanceTo(o)<=e&&n.push(A)}n.sort((a,l)=>a.distanceTo(o)-l.distanceTo(o)),t.set(e,n)}return n}static getRenderGrid(e){let t=[],n=new Y;for(let o=-e;o<=e;o+=1)for(let a=-e;a<=e;a+=1)for(let l=-e;l<=e;l+=1){let c=new Y(l,a,o);c.distanceTo(n)<=e&&t.push(c)}return t.sort((o,a)=>o.distanceTo(n)-a.distanceTo(n)),t}};function nee(i){return W5(0,null,"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",i)}Sc.brushes=new Map,Sc.chunkGrid=(()=>{let i=[];for(let e=0;e<2;e++)for(let t=0;t<2;t++)for(let n=0;n<2;n++)i.push(new Y(n,t,e));return i})();var X5=null;try{H5=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Li=="function"&&Li("worker_threads"),X5=H5.Worker}catch{}var H5;function iee(i,e,t){var n=e===void 0?null:e,o=function(c,A){return Buffer.from(c,"base64").toString(A?"utf16":"utf8")}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:"");return function(c){return new X5(l,Object.assign({},c,{eval:!0}))}}function ree(i,e,t){var n=e===void 0?null:e,o=function(A,u){var h=atob(A);if(u){for(var f=new Uint8Array(h.length),d=0,p=h.length;d<p;++d)f[d]=h.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return h}(i,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(n?"//# sourceMappingURL="+n:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var see=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",oee=function(i,e,t){return see?iee(i,e,t):function(n,o,a){var l;return function(c){return l=l||ree(n,o,a),new Worker(l,c)}}(i,e,t)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcj17Y2F2ZTowLHRlcnJhaW46MX0scz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0LGdlbmVyYXRvcjptLHNlZWQ6b30scHJvZ3JhbTphfX0pPT57KCh7bWVtb3J5OmUscHJvZ3JhbTpyfSk9Pntjb25zdCBzPU1hdGguY2VpbChlLnJlZHVjZSgoKGUse3R5cGU6cixzaXplOnN9KT0+ZStzKnIuQllURVNfUEVSX0VMRU1FTlQpLDApLzY1NTM2KSsyLG49bmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7aW5pdGlhbDpzLG1heGltdW06c30pO3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShyLHtlbnY6e21lbW9yeTpufX0pLnRoZW4oKHI9Pih7bWVtb3J5OmUucmVkdWNlKCgoZSx7aWQ6cyx0eXBlOnQsc2l6ZTptfSk9Pntjb25zdCBvPXIuZXhwb3J0cy5tYWxsb2MobSp0LkJZVEVTX1BFUl9FTEVNRU5UKTtyZXR1cm4gZVtzXT17YWRkcmVzczpvLHZpZXc6bmV3IHQobi5idWZmZXIsbyxtKX0sZX0pLHt9KSxydW46ci5leHBvcnRzLnJ1bn0pKSl9KSh7bWVtb3J5Olt7aWQ6ImNodW5rIix0eXBlOlVpbnQ4QXJyYXksc2l6ZTp0KnQqdCo0fV0scHJvZ3JhbTphfSkudGhlbigoKHttZW1vcnk6YSxydW46aX0pPT57ZT17Y2h1bmtTaXplOnQsZ2VuZXJhdG9yOnJbbV18fDAsbWVtb3J5OmEscnVuOmksc2VlZDpvfSxzZWxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbiksc2VsZi5wb3N0TWVzc2FnZSghMCl9KSl9O3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIscyk7Y29uc3Qgbj0oe2RhdGE6e3g6cix5OnMsejpufX0pPT57ZS5ydW4oZS5tZW1vcnkuY2h1bmsuYWRkcmVzcyxlLmNodW5rU2l6ZSxlLmdlbmVyYXRvcixlLnNlZWQscixzLG4pO2NvbnN0IHQ9ZS5tZW1vcnkuY2h1bmsudmlldy5zbGljZSgwKTtzZWxmLnBvc3RNZXNzYWdlKHQsW3QuYnVmZmVyXSl9fSgpOwoK",null,!1),J1=({generator:i="cave",seed:e=Math.floor(2147483647*Math.random())}={})=>t=>new K1({options:{chunkSize:t,generator:i,seed:e},program:nee,script:oee});var gy=Ns(kU());var Pne=`#ifdef ENVMAP_TYPE_CUBE_UV

#define PI 3.141592653589793
#define RECIPROCAL_PI 0.3183098861837907

struct GeometricContext {
  vec3 normal;
  vec3 viewDir;
};

struct PhysicalMaterial {
  vec3 diffuseColor;
  float roughness;
  vec3 specularColor;
  float specularF90;
};

struct ReflectedLight {
  vec3 indirectDiffuse;
  vec3 indirectSpecular;
};

vec3 BRDF_Lambert(const in vec3 diffuseColor) {
  return RECIPROCAL_PI * diffuseColor;
}

vec2 DFGApprox(const in vec3 normal, const in vec3 viewDir, const in float roughness) {
  float dotNV = saturate(dot(normal, viewDir));
  const vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);
  const vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);
  vec4 r = roughness * c0 + c1;
  float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;
  vec2 fab = vec2(-1.04, 1.04) * a004 + r.zw;
  return fab;
}

void computeMultiscattering(const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter) {
  vec2 fab = DFGApprox(normal, viewDir, roughness);
  vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
  float Ess = fab.x + fab.y;
  float Ems = 1.0 - Ess;
  vec3 Favg = specularColor + (1.0 - specularColor) * 0.047619;
  vec3 Fms = FssEss * Favg / (1.0 - Ems * Favg);
  singleScatter += FssEss;
  multiScatter += Fms * Ems;
}

void RE_IndirectDiffuse(const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert(material.diffuseColor);
}

void RE_IndirectSpecular(const in vec3 radiance, const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
  vec3 singleScattering = vec3(0.0);
  vec3 multiScattering = vec3(0.0);
  vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
  computeMultiscattering(geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering);
  vec3 diffuse = material.diffuseColor * (1.0 - (singleScattering + multiScattering));
  reflectedLight.indirectSpecular += radiance * singleScattering;
  reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
  reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}

vec3 getIBLRadiance(const in vec3 viewDir, const in vec3 normal, const in float roughness) {
  vec3 reflectVec = reflect(-viewDir, normal);
  reflectVec = normalize(mix(reflectVec, normal, roughness * roughness));
  vec4 envMapColor = textureCubeUV(envMap, reflectVec, roughness);
  return envMapColor.rgb * envMapIntensity;
}

vec3 getIBLIrradiance(const in vec3 normal) {
  vec3 envMapColor = textureCubeUV(envMap, normal, 1.0).rgb;
  return PI * envMapColor * envMapIntensity;
}

vec3 getLight(const in vec3 position, const in vec3 normal, const in vec3 diffuse) {
  GeometricContext geometry;
  geometry.normal = normal;
  geometry.viewDir = normalize(cameraPosition - position);

  PhysicalMaterial material;
  material.diffuseColor = diffuse * (1.0 - metalness);
  material.roughness = max(min(roughness, 1.0), 0.0525);
  material.specularColor = mix(vec3(0.04), diffuse, metalness);
  material.specularF90 = 1.0;

  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0));
  vec3 radiance = getIBLRadiance(geometry.viewDir, geometry.normal, material.roughness);
  vec3 irradiance = getIBLIrradiance(geometry.normal);
  RE_IndirectDiffuse(irradiance, geometry, material, reflectedLight);
  RE_IndirectSpecular(radiance, irradiance, geometry, material, reflectedLight);

  return reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;
}

#else

vec3 getLight(const in vec3 position, const in vec3 normal, const in vec3 diffuse) {
  return diffuse * envMapIntensity;
}

#endif
`,_ne=`precision highp float;
precision highp int;

struct Bounds {
  vec3 center;
  float radius;
};

struct Entity {
  vec3 color;
  int operation;
  vec3 position;
  vec4 rotation;
  vec3 scale;
  int shape;
};

struct SDF {
  float distance;
  vec3 color;
};

out vec4 fragColor;
in vec3 ray;
uniform float blending;
uniform Bounds bounds;
uniform vec3 cameraDirection;
uniform float cameraFar;
uniform float cameraFov;
uniform float cameraNear;
uniform vec3 cameraPosition;
uniform Entity entities[MAX_ENTITIES];
uniform sampler2D envMap;
uniform float envMapIntensity;
uniform float metalness;
uniform int numEntities;
uniform vec2 resolution;
uniform float roughness;

#define saturate(a) clamp(a, 0.0, 1.0)
#define texture2D texture
#include <cube_uv_reflection_fragment>
#include <encodings_pars_fragment>
#include <lighting>

vec3 applyQuaternion(const in vec3 p, const in vec4 q) {
  return p + 2.0 * cross(-q.xyz, cross(-q.xyz, p) + q.w * p);
}

float sdBox(const in vec3 p, const in vec3 r) {
  vec3 q = abs(p)-r;
  return length(max(q,0.0))+min(max(q.x,max(q.y,q.z)),0.0);
}

float sdCapsule(in vec3 p, const in vec3 r) {
  p.y -= clamp(p.y,-r.y+r.x,r.y-r.x);
  return length(p)-r.x;
}

float sdEllipsoid(const in vec3 p, const in vec3 r) {
  float k0 = length(p/r);
  float k1 = length(p/(r*r));
  return k0*(k0-1.0)/k1;
}

float sdSphere(const in vec3 p, const in float r) {
  return length(p)-r;
}

SDF sdEntity(in vec3 p, const in Entity e) {
  float distance;
  p = applyQuaternion(p - e.position, normalize(e.rotation));
  switch (e.shape) {
    default:
    case 0:
      distance = sdBox(p, e.scale * 0.5 - vec3(0.1)) - 0.1;
      break;
    case 1:
      distance = sdCapsule(p, e.scale * 0.5);
      break;
    case 2:
      distance = sdEllipsoid(p, e.scale * 0.5);
      break;
  }
  return SDF(distance, e.color);
}

SDF opSmoothUnion(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 + 0.5 * (b.distance - a.distance) / k);
  return SDF(
    mix(b.distance, a.distance, h) - k*h*(1.0-h),
    mix(b.color, a.color, h)
  );
}

SDF opSmoothSubtraction(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 - 0.5 * (a.distance + b.distance) / k);
  return SDF(
    mix(a.distance, -b.distance, h) + k*h*(1.0-h),
    mix(a.color, b.color, h)
  );
}

SDF opSmoothIntersection(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 + 0.5 * (b.distance - a.distance) / k);
  return SDF(
    mix(a.distance, b.distance, h) + k*h*(1.0-h),
    mix(a.color, b.color, h)
  );
}

SDF map(const in vec3 p) {
  SDF scene = sdEntity(p, entities[0]);
  for (int i = 1, l = min(numEntities, MAX_ENTITIES); i < l; i++) {
    switch (entities[i].operation) {
      default:
      case 0:
        scene = opSmoothUnion(scene, sdEntity(p, entities[i]), blending);
        break;
      case 1:
        scene = opSmoothSubtraction(scene, sdEntity(p, entities[i]), blending);
        break;
      case 2:
        scene = opSmoothIntersection(scene, sdEntity(p, entities[i]), blending);
        break;
    }
  }
  return scene;
}

vec3 getNormal(const in vec3 p, const in float d) {
  const vec2 o = vec2(0.001, 0);
  return normalize(
    d - vec3(
      map(p - o.xyy).distance,
      map(p - o.yxy).distance,
      map(p - o.yyx).distance
    )
  );
}

#ifdef CONETRACING
void march(inout vec4 color, inout float distance) {
  float closest = MAX_DISTANCE;
  float coverage = 1.0;
  float coneRadius = (2.0 * tan(cameraFov / 2.0)) / resolution.y;
  for (int i = 0; i < MAX_ITERATIONS && distance < MAX_DISTANCE; i++) {
    vec3 position = cameraPosition + ray * distance;
    float distanceToBounds = sdSphere(position - bounds.center, bounds.radius);
    if (distanceToBounds > 0.1) {
      distance += distanceToBounds;
    } else {
      SDF step = map(position);
      float cone = coneRadius * distance;
      if (step.distance < cone) {
        if (closest > distance) {
          closest = distance;
        }
        float alpha = smoothstep(cone, -cone, step.distance);
        vec3 pixel = getLight(position, getNormal(position, step.distance), step.color);
        color.rgb += coverage * (alpha * pixel);
        coverage *= (1.0 - alpha);
        if (coverage <= MIN_COVERAGE) {
          break;
        }
      }
      distance += max(abs(step.distance), MIN_DISTANCE);
    }
  }
  distance = closest;
  color.a = 1.0 - (max(coverage - MIN_COVERAGE, 0.0) / (1.0 - MIN_COVERAGE));
}
#else
void march(inout vec4 color, inout float distance) {
  for (int i = 0; i < MAX_ITERATIONS && distance < MAX_DISTANCE; i++) {
    vec3 position = cameraPosition + ray * distance;
    float distanceToBounds = sdSphere(position - bounds.center, bounds.radius);
    if (distanceToBounds > 0.1) {
      distance += distanceToBounds;
    } else {
      SDF step = map(position);
      if (step.distance <= MIN_DISTANCE) {
        color = vec4(getLight(position, getNormal(position, step.distance), step.color), 1.0);
        break;
      }
      distance += step.distance;
    }
  }
}
#endif

void main() {
  vec4 color = vec4(0.0);
  float distance = cameraNear;
  march(color, distance);
  fragColor = saturate(LinearTosRGB(color));
  float z = (distance >= MAX_DISTANCE) ? cameraFar : (distance * dot(cameraDirection, ray));
  float ndcDepth = -((cameraFar + cameraNear) / (cameraNear - cameraFar)) + ((2.0 * cameraFar * cameraNear) / (cameraNear - cameraFar)) / z;
  gl_FragDepth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
}
`,Nne=`out vec3 ray;
in vec3 position;
uniform float cameraFov;
uniform vec2 resolution;
uniform mat4 viewMatrix;

void main() {
  gl_Position = vec4(position.xy, 0, 1);
  float aspect = resolution.y / resolution.x;
  vec2 uv = vec2(position.x, position.y * aspect);
  float cameraDistance = (1.0 / tan(cameraFov / 2.0)) * aspect;
  ray = normalize(vec3(uv, -cameraDistance) * mat3(viewMatrix));
}
`,Fne=`precision highp float;

out vec4 fragColor;
in vec2 uv;
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;

void main() {
  fragColor = texture(colorTexture, uv);
  gl_FragDepth = texture(depthTexture, uv).r;
}
`,Qne=`out vec2 uv;
in vec3 position;

void main() {
  gl_Position = vec4(position.xy, 0, 1);
  uv = position.xy * 0.5 + 0.5;
}
`,CM=[],Une=[new En(1,1,1),new yr(.5,.5,1),new bA(.5,2)].map(i=>(i.computeBoundingSphere(),new Xe(i))),PU=new pa,_U=new Y,One=new Qe,eh=new he,SM=new Xt,Dc=class i extends Xe{constructor({blending:e=.5,conetracing:t=!0,envMap:n=null,envMapIntensity:o=1,metalness:a=0,layers:l=[],resolution:c=1,roughness:A=1}={}){let u=new Fi(2,2,1,1);u.deleteAttribute("normal"),u.deleteAttribute("uv");let h=new Mt(1,1,{depthTexture:new ma(1,1,BA)}),f=new Xs({glslVersion:AA,transparent:!!t,vertexShader:Qne,fragmentShader:Fne,uniforms:{colorTexture:{value:h.texture},depthTexture:{value:h.depthTexture}}});super(u,f);let d=new Xs({glslVersion:AA,transparent:!!t,vertexShader:Nne,fragmentShader:_ne.replace("#include <lighting>",Pne),defines:{CONETRACING:!!t,MAX_ENTITIES:0,MAX_DISTANCE:"1000.0",MAX_ITERATIONS:200,MIN_COVERAGE:"0.02",MIN_DISTANCE:"0.05"},uniforms:{blending:{value:e},bounds:{value:{center:new Y,radius:0}},cameraDirection:{value:new Y},cameraFar:{value:0},cameraFov:{value:0},cameraNear:{value:0},envMap:{value:null},envMapIntensity:{value:o},metalness:{value:a},resolution:{value:new he},roughness:{value:A},numEntities:{value:0},entities:{value:[],properties:{color:{},operation:{},position:{},rotation:{},scale:{},shape:{}}}}}),{defines:p,uniforms:m}=d;this.userData={get blending(){return m.blending.value},set blending(b){m.blending.value=b},get conetracing(){return p.CONETRACING},set conetracing(b){p.CONETRACING!==!!b&&(p.CONETRACING=!!b,d.transparent=f.transparent=!!b,d.needsUpdate=!0)},get envMap(){return m.envMap.value},set envMap(b){if(m.envMap.value=b,p.ENVMAP_TYPE_CUBE_UV!==!!b&&(p.ENVMAP_TYPE_CUBE_UV=!!b,d.needsUpdate=!0),b){let g=Math.log2(b.image.height)-2,w=1/(3*Math.max(Math.pow(2,g),7*16)),I=1/b.image.height;p.CUBEUV_MAX_MIP!==`${g}.0`&&(p.CUBEUV_MAX_MIP=`${g}.0`,d.needsUpdate=!0),p.CUBEUV_TEXEL_WIDTH!==w&&(p.CUBEUV_TEXEL_WIDTH=w,d.needsUpdate=!0),p.CUBEUV_TEXEL_HEIGHT!==I&&(p.CUBEUV_TEXEL_HEIGHT=I,d.needsUpdate=!0)}},get envMapIntensity(){return m.envMapIntensity.value},set envMapIntensity(b){m.envMapIntensity.value=b},get metalness(){return m.metalness.value},set metalness(b){m.metalness.value=b},get roughness(){return m.roughness.value},set roughness(b){m.roughness.value=b},layers:l,raymarcher:new Xe(u,d),resolution:c,target:h},this.matrixAutoUpdate=this.userData.raymarcher.matrixAutoUpdate=!1,this.frustumCulled=this.userData.raymarcher.frustumCulled=!1,n&&(this.userData.envMap=n)}copy(e){let{userData:t}=this,{userData:{blending:n,conetracing:o,envMap:a,envMapIntensity:l,metalness:c,layers:A,resolution:u,roughness:h}}=e;return t.blending=n,t.conetracing=o,t.envMap=a,t.envMapIntensity=l,t.metalness=c,t.layers=A.map(f=>f.map(i.cloneEntity)),t.resolution=u,t.roughness=h,this}dispose(){let{material:e,geometry:t,userData:{raymarcher:n,target:o}}=this;e.dispose(),t.dispose(),n.material.dispose(),o.dispose(),o.depthTexture.dispose(),o.texture.dispose()}onBeforeRender(e,t,n){let{userData:{layers:o,resolution:a,raymarcher:l,target:c}}=this,{material:{defines:A,uniforms:u}}=l;n.getWorldDirection(u.cameraDirection.value),u.cameraFar.value=n.far,u.cameraFov.value=ii.degToRad(n.fov),u.cameraNear.value=n.near,PU.setFromProjectionMatrix(One.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse)),n.getWorldPosition(_U);let h=o.reduce((g,w,I)=>{A.MAX_ENTITIES<w.length&&(A.MAX_ENTITIES=w.length,u.entities.value=w.map(i.cloneEntity),l.material.needsUpdate=!0);let v=i.getLayerBounds(I);return w.forEach(E=>{let{geometry:{boundingSphere:S},matrixWorld:C}=i.getEntityCollider(E);SM.copy(S).applyMatrix4(C),v.isEmpty()?v.copy(SM):v.union(SM)}),PU.intersectsSphere(v)&&g.push({bounds:v,distance:v.center.distanceTo(_U),entities:w}),g},[]).sort(({distance:g},{distance:w})=>A.CONETRACING?w-g:g-w);e.getDrawingBufferSize(eh).multiplyScalar(a).floor(),(c.width!==eh.x||c.height!==eh.y)&&(c.setSize(eh.x,eh.y),u.resolution.value.copy(eh));let f=e.autoClear,d=e.getClearAlpha(),p=e.getRenderTarget(),m=e.shadowMap.autoUpdate,b=e.xr.enabled;e.autoClear=!1,e.shadowMap.autoUpdate=!1,e.xr.enabled=!1,e.setClearAlpha(0),e.setRenderTarget(c),e.state.buffers.depth.setMask(!0),e.clear(),h.forEach(({bounds:g,entities:w})=>{u.bounds.value.center.copy(g.center),u.bounds.value.radius=g.radius,u.numEntities.value=w.length,w.forEach(({color:I,operation:v,position:E,rotation:S,scale:C,shape:M},D)=>{let T=u.entities.value[D];T.color.copy(I),T.operation=v,T.position.copy(E),T.rotation.copy(S),T.scale.copy(C),T.shape=M}),e.render(l,n)}),e.autoClear=f,e.shadowMap.autoUpdate=m,e.xr.enabled=b,e.setClearAlpha(d),e.setRenderTarget(p),n.viewport&&e.state.viewport(n.viewport)}raycast(e,t){let{userData:{layers:n}}=this;n.forEach((o,a)=>o.forEach((l,c)=>{let A=[];i.getEntityCollider(l).raycast(e,A),A.forEach(u=>{u.entity=l,u.entityId=c,u.layer=o,u.layerId=a,u.object=this,t.push(u)})}))}static cloneEntity({color:e,operation:t,position:n,rotation:o,scale:a,shape:l}){return{color:e.clone(),operation:t,position:n.clone(),rotation:o.clone(),scale:a.clone(),shape:l}}static getEntityCollider({position:e,rotation:t,scale:n,shape:o}){let a=Une[o];return a.position.copy(e),a.quaternion.copy(t),a.scale.copy(n),o===i.shapes.capsule&&(a.scale.z=a.scale.x),a.updateMatrixWorld(),a}static getLayerBounds(e){return CM[e]||(CM[e]=new Xt),CM[e].makeEmpty()}};Dc.operations={union:0,substraction:1,intersection:2};Dc.shapes={box:0,capsule:1,sphere:2};window.rasterizeHTML=gy.default;window.BufferGeometryUtils=Sb;window.MarchingCubes=F1;window.troika=X1;window.WorldGen=J1;window.SXWorld=Sc;function NU(i){return J1({generator:"cave",seed:i})}window.cavegen=NU;function FU(){let i=new Sc({worldgen:J1({generator:"terrain",seed:2}),renderRadius:2,chunkSize:32,chunkMaterial:new On({side:zt,transparent:!0,opacity:.5,color:13421755})});i.castShadow=!0,i.receiveShadow=!0;let e={r:180,g:150,b:110};return i.ball=(t,n,o,a,l)=>{l=l===void 0?255:l,i.updateVolume(Cr(t,n,o),a,l,e),i.updateChunks(Cr(t,n,o)),console.warn("ball",t,n,o,a)},i.up=(t,n,o)=>{console.warn("up",t,n,o),i.updateChunks(Cr(t,n,o))},i.up(0,0,0),i}window.softxel=FU;function QU(){let i=new On({side:zt,envMapIntensity:1,vertexColors:!0,metalness:.1,roughness:.8});i.defines={USE_OUTPUT_NORMAL:1,USE_OUTPUT_POSITION:1};let e=new On({envMapIntensity:.5,vertexColors:!0,visible:!1});e.defines={USE_INSTANCED_POSITION:1,USE_OUTPUT_NORMAL:1,USE_OUTPUT_POSITION:1};let t={triangles:i,voxels:e},n=new Z1({history:!1,materials:t}),o=()=>Math.floor(Math.random()*155);return n.castShadow=!0,n.receiveShadow=!0,n.ball=(a,l,c,A,u,h)=>{a=Math.floor(a),l=Math.floor(l),c=Math.floor(c),A=Math.floor(A),u=u||[170,150,150],h=h=="undefined"?1:h;let f=[];for(let d=a-A;d<a+A;d++)for(let p=l-A;p<l+A;p++)for(let m=c-A;m<c+A;m++){let b=a-d,g=l-p,w=c-m;Math.sqrt(b*b+g*g+w*w)<A&&f.push({x:d,y:p,z:m,r:u[0],g:u[1],b:u[2],value:h})}n.update(f)},n}window.sculpty=QU;function UU(i,e,t,n,o){return i.ball(Math.floor(e*100),Math.floor(t*100),Math.floor(n*100),o,[180,170,170],1)}window.sball=UU;function vy(i){let e=document.createElement("div"),t=new Yg(e);return e.style.width="1000px",e.style.minWidth="1000px",e.style.height="800px",e.style.background="rgba(0,0,0,0.2)",e.style.position="absolute",e.style.backfaceVisibility="hidden",e.style.webkitBackfaceVisibility="hidden",e.style.pointerEvents="none",e.style.transformStyle="preserve-3d",t}window.css3dobj=vy;function OU(i,e,t){e=e||1e3,t=t||800;let n=vy(),o=new Xe(new En(e,t,20),new On({color:16777215,side:zt,blending:Zi}));return o.geometry.translate(0,0,-20),o.castShadow=!0,o.sync=()=>{console.warn("box.sync"),n.position.copy(o.position),n.rotation.copy(o.rotation),n.scale.copy(o.scale)},o.ontransformchanged=a=>o.sync(),o.ondatachanged=async a=>{console.warn("box.ondatachanged");let l=a.data,c=l.html,A=l.url;c?n.element.innerHTML=c:A&&(n.element.innerHTML=await fetch(A))},o.focus=a=>{n.element.style.pointerEvents=a?"all":"none"},o.twin=n,o}window.css3dbox=OU;function Gne(){let i=vy(),e=new Xe(new(void 0)(1e3,800),new Qt({color:16711680,side:zt,blending:Zi}));return e.geometry.translate(0,0,-.01),e.sync=()=>{console.warn("plane.sync"),i.position.copy(e.position),i.rotation.copy(e.rotation),i.scale.copy(e.scale)},e.ondatachanged=t=>{let n=t.data,o=n.html;i.el.innerHTML=o},e.ontransformchanged=t=>e.sync(),e.twin=i,e}window.css3dplane=Gne;function GU(i,e,t){i=i||1,e=e||i,t=t||i;let n=new Xe(new En(i,e,t),new In({color:1381653,transparent:!0,opacity:1}));return n.castShadow=!0,n.receiveShadow=!0,n.tag="box - don't do this",n}window.box=GU;function zU(i,e,t){let n="https://rx.0x.no:8401/",o=new ht,a=n||"";return o.tag=e||i,o.contenthook=()=>{i.indexOf(".")>0||(i+=".glb"),hf(i,a+"stuff/",l=>{let c=l.scene;if(l.animations.length){let A=new Xl(c);l.animations.forEach(u=>A.clipAction(u).play()),window.app.mixers.push(A),A.timeScale=.8}o.add(c),c.traverse(A=>{if(A.receiveShadow=!0,A.castShadow=!0,A.frustumCulled=!1,A.geometry,A.material){let u=h=>{};Array.isArray(A.material)?A.material.map(u):u(A.material)}}),o.onload&&o.onload(),t&&t(o)})},o.contenthook(),o}window.sogltf=zU;function zne(){let i=Mg("https://rx.0x.no:8401/stuff/norm1.mp4");return i.vid.autoplay=!1,window._embedded||setTimeout(()=>{i.vid.play()},1e3),i.tag="vidbox",i}window.sovidbox=zne;var{operations:Hne,shapes:my}=Dc;function HU(){let i=()=>(Math.random()-.5)*2,e=new Dc({conetracing:!0,resolution:.3,blending:.1,roughness:1,metalness:.8,envMapIntensity:.7,envMap:lim.envmap,layers:[Array.from({length:6},()=>{let t=new Y(2,.5,-2),n=[my.box,my.capsule,my.sphere][Math.floor(Math.random()*3)];n=my.box;let o=()=>Math.random(),a=()=>Math.random()*1,l=o()*.5;return{color:new ke(l-0,l,l),operation:Hne.union,position:new Y(a(),a(),a()).add(t),rotation:new Lt().setFromAxisAngle(new Y(o()*20,o()*20,o()*20),o()*20),scale:new Y(...(s=.5,[s,s,s])),shape:n}})]});return e.castShadow=!0,e.receiveShadow=!0,e.tag="rm",e}window.sorm=HU;function WU(){let i=new CA(4,1.8,100,10),e=new In({color:7829360}),t=new Xe(i,e);return t.castShadow=!0,t.tag="knot",t}window.soknot=WU;function VU(){let i=new En(1,1,1),e=new In({color:3355443,opacity:.9,transparent:!0,clearcoat:!0}),t=new Xe(i,e);return t.castShadow=!0,t.receiveShadow=!0,t.tag="cbox",t}window.cbox=VU;function XU(){let i=new qe,e=[],t=[],n=200,o=3e4;for(let A=0;A<o;A++){let u=Math.random()*n-n/2,h=Math.random()*n/20,f=Math.random()*n-n/2,d=16,p=Math.random()*Math.PI*2,m=Math.random()*Math.PI*2,b=Math.random()*d;u=b*Math.sin(p)*Math.cos(m),h=.3*b*Math.sin(p)*Math.sin(m),f=b*Math.cos(p),e.push(u,h,f);let w=(()=>Math.random()*.8+.1)();t.push(0,0,0)}i.setAttribute("position",new He(e,3)),i.setAttribute("color",new He(t,3)),i.computeBoundingSphere();let a=new ko().load("stuff/textures/disc.png"),l=new Do({size:.05,map:a,vertexColors:!0,transparent:!0,toneMapped:!1,fog:!0,opacity:.5}),c=new ya(i,l);return c.renderOrder=2,c.castShadow=!1,c.tag="sopoints",c}window.sopoints=XU;X1&&LI({font:"./stuff/SpecialElite-Regular.ttf",characters:"abcdefghijklmnopqrstuvwxyz"},i=>i);function YU(i,e){let t=new Ou;return t.text=e||`there is
nothing here`,t.font="./stuff/SpecialElite-Regular.ttf",t.fontSize=.2,t.position.y=.2,t.material.transparent=!0,t.castShadow=!0,t.fillOpacity=.2,t.outlineColor=0,t.outlineOpacity=.2,t.outlineWidth=.002,t.strokeColor=16777215,t.strokeColor=0,t.strokeWidth=.007,t.strokeOpacity=1,t.sync(),t}window.sotext=YU;function Wne(){let i=EM();i.position.set(0,100,0),i.tag="sostatus";let e=()=>i.html("<body style='margin:0px;background:transparent'><pre style='margin:0px; padding:5px; font-size:28px;color:rgba(200,230,230,0.8);text-shadow: 1px 1px 4px black;background:rgba(0,0,0,0.2);height:512px;'>"+JSON.stringify({ts:Date.now(),render:app.renderer.info.render,mem:app.renderer.info.memory},null,2));return e(),setInterval(e,1e3),i}window.sostatus=Wne;function EM(){let i=document.createElement("canvas"),e=i.getContext("2d");i.width=512,i.height=512;let t=new Uh(i),n=new Xe(new En(1,1,.01),new On({color:16777215,map:t,opacity:1,transparent:!0}));return n.tex=t,n.canvas=i,n.castShadow=!0,n.receiveShadow=!0,n.html=o=>gy.default.drawHTML(o,i).then(a=>{e.clearRect(0,0,i.width,i.height),e.drawImage(a.image,0,0),n.tex.needsUpdate=!0}),n.url=o=>gy.default.drawURL(o,i).then(a=>n.tex.needsUpdate=!0),n.html("<h1>...</h1>"),n}window.xtmlbox=EM;window.htmlbox=EM;function Vne(i){let e=new Ol([new Y(0,10,-10),new Y(10,0,-10),new Y(20,0,0),new Y(30,0,10),new Y(30,0,20),new Y(20,0,30),new Y(10,0,30),new Y(0,0,30),new Y(-10,10,30),new Y(-10,20,30),new Y(0,30,30),new Y(10,30,30),new Y(20,30,15),new Y(10,30,10),new Y(0,30,10),new Y(-10,20,10),new Y(-10,10,10),new Y(0,0,10),new Y(10,-10,10),new Y(20,-15,10),new Y(30,-15,10),new Y(40,-15,10),new Y(50,-15,10),new Y(60,0,10),new Y(70,0,0),new Y(80,0,0),new Y(90,0,0),new Y(400,0,0)],!1),t=new wa(e,300,10,10,!1),n=new In({color:3359812,side:zt,opacity:1,clearcoat:.2,transparent:!0}),o=new Xe(t,n);return e.closed=!0,o.castShadow=!0,o.receiveShadow=!0,o}window.splinetube=ZU;function ZU(i){let e=[],t=new wa,n=new In({color:3359812,side:zt,opacity:1,clearcoat:.5,transparent:!0}),o=new Xe(t,n),a=()=>{let l=new Ol(e.map(c=>Cr(...c)),!1);t=new wa(l,o.lseg,2,o.rseg,!1),o.geometry.copy(t)};return o.lseg=100,o.rseg=10,o.pts=e,o.retube=a,o.addpt=(l,c,A)=>{e.push([l,c,A]),e.length>1&&a()},o.castShadow=!0,o.receiveShadow=!0,o}function KU(i,e,t,n,o,a,l){var c=new Xe(new yr(e,t,n,o,a,l),new In({color:16777215,transparent:!0}));return c.castShadow=!0,c.receiveShadow=!0,c}window.cylinder=KU;function Xne(){let i=new Xs({depthTest:!0,transparent:!0,side:zt,uniforms:{ambientLightColor:{type:"vec3",value:new ke("#878FA3")},diffuse:{type:"vec3",value:new ke("#7F7F7F")},opacity:{type:"float",value:1},shininess:{type:"float",value:32},specular:{type:"vec3",value:new ke("#FFFFFF")},directionalLights:{type:"vec3",value:null},pointLights:{type:"vec3",value:null},lightProbe:{type:"vec3",value:null},directionalLightShadows:{type:"vec3",value:null},spotLights:{type:"vec3",value:null},spotLightShadows:{type:"vec3",value:null},rectAreaLights:{type:"vec3",value:null},ltc_1:{type:"vec3",value:null},ltc_2:{type:"vec3",value:null},pointLightShadows:{type:"vec3",value:null},hemisphereLights:{type:"vec3",value:null},directionalShadowMap:{type:"vec3",value:null},directionalShadowMatrix:{type:"vec3",value:null},spotShadowMap:{type:"vec3",value:null},spotShadowMatrix:{type:"vec3",value:null},pointShadowMap:{type:"vec3",value:null},pointShadowMatrix:{type:"vec3",value:null}},extensions:{derivatives:!0},vertexShader:`#version 300 es
        in	vec3    position;
        in  vec3    normal;
        in	vec2    uv;
        
        uniform     mat4    modelMatrix;
        uniform     mat4    viewMatrix;
        uniform     mat4    projectionMatrix;

        out vec3    fragVPos;  // View Space Position, THREEJS DOES LIGHTING IN VIEW SPACE
        out vec3    fragWPos;  // World Space Position
        out vec3    fragNorm;
        out vec2    fragUV;
        
        void main(){
            vec4 wPos 	        = modelMatrix * vec4( position, 1.0 );  // World Space
            vec4 vPos           = viewMatrix * wPos;                    // View Space
            
            fragUV              = uv;
            fragWPos            = wPos.xyz;
            fragVPos            = vPos.xyz;
            fragNorm            = ( modelMatrix * vec4( normal, 0.0 ) ).xyz;

            gl_Position			= projectionMatrix * vPos;
        }`,fragmentShader:`#version 300 es
        precision mediump float;

        uniform vec3 cameraPosition;

        in  vec3    fragVPos;
        in  vec3    fragWPos;
        in  vec3    fragNorm;
        in  vec2    fragUV;
        out vec4    outColor;

        // #####################################################################
        // THREE.JS LIGHTING - REQUIRED FOR MATERIAL.LIGHTS = TRUE

        uniform vec3  ambientLightColor;
        uniform vec3  diffuse;
        uniform float opacity;
        uniform float shininess;
        uniform vec3  specular;

        struct IncidentLight {
            vec3 color;
            vec3 direction;
            bool visible;
        };

        struct Material{
            vec3 diffuseColor;
            vec3 specularColor;
            float specularShininess;
            float specularStrength;
        };

        struct ReflectedLight {
            vec3 directDiffuse;
            vec3 directSpecular;
        };

        struct GeometricContext{
            vec3 position;
            vec3 normal;
            vec3 viewDir;
        };

        float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
            #if defined ( PHYSICALLY_CORRECT_LIGHTS )
                float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
                if ( cutoffDistance > 0.0 ) {
                    distanceFalloff *= pow2( clamp( 1.0 - pow4( lightDistance / cutoffDistance, 0.0, 1.0 ) ) );
                }
                return distanceFalloff;
            #else
                if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
                    return pow( clamp( - lightDistance / cutoffDistance + 1.0, 0.0, 1.0 ), decayExponent );
                }
                return 1.0;
            #endif
        }

        // --------------------------------------
        #if NUM_DIR_LIGHTS > 0
            struct DirectionalLight {
                vec3 direction;
                vec3 color;
            };
            
            uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
            
            void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
                light.color     = directionalLight.color;
                light.direction = directionalLight.direction;
                light.visible   = true;
            }
        #endif

        // --------------------------------------
        #if NUM_POINT_LIGHTS > 0
            struct PointLight {
                vec3 position;
                vec3 color;
                float distance;
                float decay;
            };
                
            uniform PointLight pointLights[ NUM_POINT_LIGHTS ];

            void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
                vec3 lVector         = pointLight.position - geometry.position;
                light.direction      = normalize( lVector );
                float lightDistance  = length( lVector );
                light.color          = pointLight.color;
                light.color         *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
                light.visible       = ( light.color != vec3( 0.0 ) );
            }
        #endif

        // #####################################################################

        // THREE TONE TOON LIGHTING
        void RE_Direct( const in IncidentLight directLight, const in GeometricContext geometry, const in Material material, inout ReflectedLight reflectedLight ) {
            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Three tone toon shading
            // Basically, full shadow when the light and the surface dot product is under 0.33 (step gives 0.0)
            // Smooth partial shadow when dot product is between 0.33 and 0.66 (step gives 0.5 due to the remap)
            // Smooth enlightment when dot product is above 0.66
            
            float dotNL = max( 0.0, dot( directLight.direction, geometry.normal ) );
            float fw    = fwidth( dotNL );
            //dotNL    *= ( step( 0.33, dotNL ) + step( 0.66, dotNL) ) * 0.5; // If remapping 2 to 1, just cut in half.
            dotNL      *= ( smoothstep( 0.33-fw, 0.33+fw, dotNL ) + smoothstep( 0.66-fw, 0.66+fw, dotNL ) ) * 0.5;  // * 0.5 is to remap 0-2 to 0-1
            
            reflectedLight.directDiffuse += dotNL * directLight.color;

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Phong specular
            vec3 reflectDir = normalize( reflect( -directLight.direction, geometry.normal ) );
            float specular  = max( 0.0, dot( geometry.viewDir, reflectDir ) );
            specular        = pow( specular, material.specularShininess );
            
            reflectedLight.directSpecular += material.specularColor * specular * material.specularStrength;
        }

        // Ground and Sky Reflected Light
        vec3 RE_HemiLight( const in GeometricContext geometry ){
            float hemiMix       = geometry.normal.y * 0.5 + 0.5;
            vec3 skyColour      = vec3( 0.0, 0.3, 0.6 );
            vec3 groundColour   = vec3( 0.6, 0.3, 0.1 );
            vec3 Light          = mix( groundColour, skyColour, hemiMix );
            return Light;
        }

        float RE_HemiRimFresnel( const in GeometricContext geometry ){
            // Hemi rim lighting Fresnel
            float fresnel = 1.0 -  max( 0.0, dot( geometry.viewDir, geometry.normal ) );
            //fresnel      *= smoothstep( 0.6, 0.61, pow( fresnel, 2.0 ) );

            // Add a bit of smoothly
            float fwfresnel = fwidth( fresnel );
            fresnel        *= smoothstep( 0.6-fwfresnel, 0.62+fwfresnel, pow( fresnel, 2.0 ) );
            return fresnel;
        }

        // #####################################################################
        void main(){

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Geometry Related Data
            GeometricContext geometry;
            geometry.position           = fragVPos; // MUST USE VIEW SPACE POSITION, 3JS DOES LIGHTING THERE INSTEAD OF WORLD SPACE
            geometry.normal             = normalize( fragNorm );
            geometry.viewDir            = normalize( cameraPosition - fragVPos );

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Material Related Data
            Material material;
            material.diffuseColor       = diffuse;
            material.specularColor      = specular;
            material.specularShininess  = shininess;
            material.specularStrength   = 1.0;

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Execute Direction and Point Lights
            ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ) );
            IncidentLight directLight;

            #if ( NUM_DIR_LIGHTS > 0 )
                DirectionalLight directionalLight;

                #pragma unroll_loop_start
                for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
                    directionalLight = directionalLights[ i ];
                    getDirectionalLightInfo( directionalLight, geometry, directLight );
                    RE_Direct( directLight, geometry, material, reflectedLight );
                }
                #pragma unroll_loop_end
            #endif

            #if ( NUM_POINT_LIGHTS > 0 )
                PointLight pointLight;

                #pragma unroll_loop_start
                for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
                    pointLight = pointLights[ i ];
                    getPointLightInfo( pointLight, geometry, directLight );
                    RE_Direct( directLight, geometry, material, reflectedLight );
                }
                #pragma unroll_loop_end
            #endif

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // EXTRA LIGHTS
            vec3 hemiLight  = RE_HemiLight( geometry );         // Reflective light from Ground and Sky
            float fresnel   = RE_HemiRimFresnel( geometry );    // Fresnel

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // PUT IT ALL TOGETHER
            vec3 colour = material.diffuseColor *                                             // Start with a specific color
                        ( reflectedLight.directDiffuse + hemiLight * ( 0.2 + fresnel ) ) +    // Merging All the Light Models
                        reflectedLight.directSpecular;                                        // Add Specular on top
            
            // Gamma correction equivalent to the linearTosRGB
            colour      = pow( colour, vec3( 1.0/2.2 ) );

            outColor    = vec4( colour, 1.0 );
        }`});return i.lights=!0,i}window.customMaterial=Xne;function Yne(i){return new Xs({depthTest:!0,transparent:!0,side:zt,uniforms:{tex01:{type:"sampler2D",value:i}},extensions:{derivatives:!0},vertexShader:`#version 300 es
        in	vec3    position;
        in  vec3    normal;
        in	vec2    uv;
        
        uniform     mat4    modelMatrix;
        uniform     mat4    viewMatrix;
        uniform     mat4    projectionMatrix;

        out vec3    fragWPos;  // World Space Position
        out vec3    fragNorm;
        out vec2    fragUV;
        
        void main(){
            vec4 wPos 	        = modelMatrix * vec4( position, 1.0 );  // World Space
            vec4 vPos           = viewMatrix * wPos;                    // View Space
            
            fragUV              = uv;
            fragWPos            = wPos.xyz;
            fragNorm            = ( modelMatrix * vec4( normal, 0.0 ) ).xyz;

            gl_Position			= projectionMatrix * vPos;
        }`,fragmentShader:`#version 300 es
        precision mediump float;
        
        uniform sampler2D tex01;
        uniform vec3 cameraPosition;

        in  vec3    fragWPos;
        in  vec3    fragNorm;
        in  vec2    fragUV;
        out vec4    outColor;

        // #####################################################################
        void main(){
            // ----------------------------
            vec3 norm   = normalize( fragNorm );

            // ----------------------------
            // https://www.clicktorelease.com/blog/creating-spherical-environment-mapping-shader/
            // This creates a pinch artifact in the back of meshes
            //vec3 camDir	= normalize( fragWPos - cameraPosition );
            //vec3 refDir 	= camDir - 2.0 * dot( norm, camDir ) * norm; // Reflect Equation
		    //vec3 refDir 	= reflect( camDir, norm );	                 // Or use built in Equation

            //float m = 2.0 * sqrt( pow( refDir.x, 2.0 ) + pow( refDir.y, 2.0 ) + pow( refDir.z + 1.0, 2.0 ) );
            //float m = 2.0 * sqrt( refDir.x*refDir.x + refDir.y*refDir.y + (refDir.z+1.0)*(refDir.z+1.0) );
            //float m = 2.8284271247461903 * sqrt( refDir.z + 1.0 );
            //vec2 uv = refDir.xy / m + 0.5;

            // ----------------------------
            // ThreeJS's way
            // https://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderLib/meshmatcap.glsl.js#L82

            /* NOTE:
            Trying to understand the math, its trying to create an 3 direction axes with the cam direction being forward
            First is gets a perpendicular direction of the camera by rotating by -90 degrees then projected to XZ plane, creating a Right Axis
            Then using cross product to get the Up Axis.
            Since eveything is normalized, can determing the XY position the meshe's normal is within this Axes, produces values -1 to 1
            Then Remapping the values from -1 to 1 into 0 to 1 for UV goodness.
            */

            vec3 camDir = normalize( cameraPosition );
	        vec3 x      = normalize( vec3( camDir.z, 0.0, -camDir.x ) );        // NOTE: This looks like a -90 YAxis rotation then projected down to XZ plane?
	        vec3 y      = cross( camDir, x );
	        vec2 uv     = vec2( dot( x, norm ), dot( y, norm ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks

            // ----------------------------
            // Very simple, but the lighting becomes very static & doesn't seem to move in relation to the camera
            //vec2 uv = norm.xy * 0.5 + vec2( 0.5 );

            // ----------------------------
            outColor = texture( tex01, uv ); //* base_color;
        }`})}window.customMaterial2=Yne;window.CELL=wI;window.EXT=IM;window.REPL=eE;window.UTIL=rC;function JU(i){console.warn(i,Date.now()-t0)}window.uptime=JU;function Zne(i){return localStorage.getItem(i)}function Kne(i,e){return localStorage.setItem(i,e)}function Jne(){return"{xuid#"+Date.now()+"#"+Math.floor(Math.random()*1e8)+"}"}var MM=Zne("xuid");MM||(Kne("xuid",MM=Jne()),console.warn("xuid",MM));async function jne(){JU("boot"),eie("VM.min.js",()=>{let i=new Ac(document.querySelector("#repl"));i.eval('(begin (load "~~/scm/init.scm") (println ";;; :sentinel:"))'),window.repl=i})}var xy;function qne(){return xy=window.lim=new WA(document.querySelector("#limina")),k1(),xy}function $ne(i){xy&&xy.unload()}window.nlim=qne;window.addEventListener("load",jne);window.addEventListener("unload",$ne);function eie(i,e){var t=document.createElement("script");t.type="application/javascript",t.onload=e,t.src=i,document.getElementsByTagName("head")[0].appendChild(t)}var yy;yy||(yy=console.log,window.native_console_log=yy);var jU=(...i)=>{yy(...i),window.gambit_log_function&&window.gambit_log_function(...i)};window.hacked_console_log=jU;console.log=jU;window.boop=(...i)=>console.error("boop",...i);var Bc=navigator.userAgent,wy=Bc.indexOf("Chrome")>-1,Mce=Bc.indexOf("MSIE")>-1,tie=Bc.indexOf("Firefox")>-1,TM=Bc.indexOf("Safari")>-1,qU=Bc.indexOf("AppleWebKit")>-1,nie=Bc.indexOf("iPhone OS")>-1,iie=qU&&nie,rie=Bc.toLowerCase().indexOf("op")>-1;wy&&TM&&(TM=!1);wy&&rie&&(wy=!1);window.is_chrome=wy;window.is_safari=TM;window.is_firefox=tie;window.is_webkit=qU;window.is_ioswebkit=iie;window.r=Math.random;window.fr=()=>Math.floor(5*r());})();
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/
/*! Bundled license information:

object.observe/dist/object-observe.js:
  (*!
   * Object.observe polyfill - v0.2.4
   * by Massimo Artizzu (MaxArt2501)
   *
   * https://github.com/MaxArt2501/object-observe
   *
   * Licensed under the MIT License
   * See LICENSE for details
   *)

observed/lib/change.js:
  (*!
   * Change object constructor
   *
   * The `change` object passed to Object.observe callbacks
   * is immutable so we create a new one to modify.
   *)

observed/lib/observed.js:
  (*!
   * Creates an Object.observe `onchange` listener
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

rasterizehtml/dist/rasterizeHTML.js:
  (*! rasterizeHTML.js - v1.3.1 - 2022-01-16
  * http://www.github.com/cburgmer/rasterizeHTML.js
  * Copyright (c) 2022 Christoph Burgmer; Licensed MIT *)

three/build/three.module.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

troika-three-text/dist/troika-three-text.esm.js:
  (*!
  Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
  Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
  *)
  (*!
  Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
  (https://github.com/101arrowz/fflate) for use in Troika text rendering. 
  Original licenses apply: 
  - fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
  - woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
  *)
*/
