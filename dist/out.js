"use strict";(()=>{var rX=Object.create;var SC=Object.defineProperty;var sX=Object.getOwnPropertyDescriptor;var oX=Object.getOwnPropertyNames;var aX=Object.getPrototypeOf,lX=Object.prototype.hasOwnProperty;var Yi=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var cX=(n,e)=>()=>(n&&(e=n(n=0)),e);var bt=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),ho=(n,e)=>{for(var t in e)SC(n,t,{get:e[t],enumerable:!0})},uX=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of oX(e))!lX.call(n,o)&&o!==t&&SC(n,o,{get:()=>e[o],enumerable:!(i=sX(e,o))||i.enumerable});return n};var Ao=(n,e,t)=>(t=n!=null?rX(aX(n)):{},uX(e||!n||!n.__esModule?SC(t,"default",{value:n,enumerable:!0}):t,n));var q3=bt((Zy,J3)=>{(function(n,e){typeof Zy=="object"&&typeof J3<"u"?e(Zy):typeof define=="function"&&define.amd?define(["exports"],e):e((n=n||self).TWEEN={})})(Zy,function(n){"use strict";function e(L){var N=A.indexOf(L);-1<N&&A.splice(N,1),A.push(L),b=0,d&&!f&&(a=m(v),f=!0)}function t(L){for(var N=0;N<A.length;N++)if(L===A[N])return A[N];return null}function i(){return f}function o(){return w}var a,l=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:this||(n!==void 0?n:{}),c=l.requestAnimationFrame||function(L){return l.setTimeout(L,50/3)},u=l.cancelAnimationFrame||function(L){return l.clearTimeout(L)},h=function(){if(typeof process>"u"||process.hrtime===void 0||process.versions&&process.versions.electron!==void 0){if(l.performance!==void 0&&l.performance.now!==void 0)return l.performance.now.bind(l.performance);var L=l.performance&&l.performance.timing&&l.performance.timing.navigationStart?l.performance.timing.navigationStart:Date.now();return function(){return Date.now()-L}}return function(){var N=process.hrtime();return 1e3*N[0]+N[1]/1e6}}(),A=[],f=!1,d=!1,p=[],m=c,b=0,g=120,w=!0,I=function(L){var N=A.indexOf(L);N!==-1&&A.splice(N,1),A.length===0&&(u(a),f=!1)},v=function L(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:h(),X=1<arguments.length?arguments[1]:void 0;if(g<=b&&w)return f=!1,b=0,u(a),!1;d&&f?a=m(L):function(){for(var ae=0;ae<p.length;ae++)p[ae]()}(),A.length||b++;for(var q=0,ne=A.length;q<ne;)A[q++].update(N,X),ne>A.length&&q--,ne=A.length;return!0},C={},E={Linear:{None:function(L){return L}},Quadratic:{In:function(L){return Math.pow(L,2)},Out:function(L){return L*(2-L)},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,2):-.5*(--L*(L-2)-1)}},Cubic:{In:function(L){return Math.pow(L,3)},Out:function(L){return--L*L*L+1},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,3):.5*((L-=2)*L*L+2)}},Quartic:{In:function(L){return Math.pow(L,4)},Out:function(L){return 1- --L*L*L*L},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,4):-.5*((L-=2)*L*L*L-2)}},Quintic:{In:function(L){return Math.pow(L,5)},Out:function(L){return--L*L*L*L*L+1},InOut:function(L){return(L*=2)<1?.5*Math.pow(L,5):.5*((L-=2)*L*L*L*L+2)}},Sinusoidal:{In:function(L){return 1-Math.cos(L*Math.PI/2)},Out:function(L){return Math.sin(L*Math.PI/2)},InOut:function(L){return .5*(1-Math.cos(Math.PI*L))}},Exponential:{In:function(L){return L===0?0:Math.pow(1024,L-1)},Out:function(L){return L===1?1:1-Math.pow(2,-10*L)},InOut:function(L){return L===0?0:L===1?1:(L*=2)<1?.5*Math.pow(1024,L-1):.5*(2-Math.pow(2,-10*(L-1)))}},Circular:{In:function(L){return 1-Math.sqrt(1-L*L)},Out:function(L){return Math.sqrt(1- --L*L)},InOut:function(L){return(L*=2)<1?-.5*(Math.sqrt(1-L*L)-1):.5*(Math.sqrt(1-(L-=2)*L)+1)}},Elastic:{In:function(L){return L===0?0:L===1?1:-Math.pow(2,10*(L-1))*Math.sin(5*(L-1.1)*Math.PI)},Out:function(L){return L===0?0:L===1?1:Math.pow(2,-10*L)*Math.sin(5*(L-.1)*Math.PI)+1},InOut:function(L){return L===0?0:L===1?1:(L*=2)<1?-.5*Math.pow(2,10*(L-1))*Math.sin(5*(L-1.1)*Math.PI):.5*Math.pow(2,-10*(L-1))*Math.sin(5*(L-1.1)*Math.PI)+1}},Back:{In:function(L){return L*L*(2.70158*L-1.70158)},Out:function(L){return--L*L*(2.70158*L+1.70158)+1},InOut:function(L){var N=2.5949095;return(L*=2)<1?L*L*((1+N)*L-N)*.5:.5*((L-=2)*L*((1+N)*L+N)+2)}},Bounce:{In:function(L){return 1-E.Bounce.Out(1-L)},Out:function(L){var N=2.75,X=7.5625;return L<1/N?X*L*L:L<2/N?X*(L-=1.5/N)*L+.75:L<2.5/N?X*(L-=2.25/N)*L+.9375:X*(L-=2.625/N)*L+.984375},InOut:function(L){return L<.5?.5*E.Bounce.In(2*L):.5*E.Bounce.Out(2*L-1)+.5}},Stepped:{steps:function(L){return function(N){return(N*L|0)/L}}}};function S(L){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(L)}function M(L,N){if(!(L instanceof N))throw new TypeError("Cannot call a class as a function")}function _(L,N){for(var X=0;X<N.length;X++){var q=N[X];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,q.key,q)}}function T(L,N,X){return N&&_(L.prototype,N),X&&_(L,X),L}function D(L,N){var X=Object.keys(L);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(L);N&&(q=q.filter(function(ne){return Object.getOwnPropertyDescriptor(L,ne).enumerable})),X.push.apply(X,q)}return X}function R(L){for(var N=1;N<arguments.length;N++){var X=arguments[N]!=null?arguments[N]:{};N%2?D(Object(X),!0).forEach(function(q){var ne,ae,j;ne=L,j=X[ae=q],ae in ne?Object.defineProperty(ne,ae,{value:j,enumerable:!0,configurable:!0,writable:!0}):ne[ae]=j}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(X)):D(Object(X)).forEach(function(q){Object.defineProperty(L,q,Object.getOwnPropertyDescriptor(X,q))})}return L}function B(L){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(L)}function P(L,N){return(P=Object.setPrototypeOf||function(X,q){return X.__proto__=q,X})(L,N)}function F(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function z(L,N){return!N||typeof N!="object"&&typeof N!="function"?F(L):N}function Q(L,N){return function(X){if(Array.isArray(X))return X}(L)||function(X,q){if(Symbol.iterator in Object(X)||Object.prototype.toString.call(X)==="[object Arguments]"){var ne=[],ae=!0,j=!1,ce=void 0;try{for(var $,Ae=X[Symbol.iterator]();!(ae=($=Ae.next()).done)&&(ne.push($.value),!q||ne.length!==q);ae=!0);}catch(we){j=!0,ce=we}finally{try{ae||Ae.return==null||Ae.return()}finally{if(j)throw ce}}return ne}}(L,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=50/3,G="_chainedTweens",O="Callback",W="update",k="complete",Y="start",te="repeat",ie="reverse",re="restart",se="STRING_PROP",oe=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function le(L){if(L&&L.nodeType||L===void 0||S(L)!=="object")return L;if(Array.isArray(L))return[].concat(L);if(S(L)!=="object")return L;var N={};for(var X in L)N[X]=le(L[X]);return N}var xe=function(L){return isNaN(+L)||(L[0]==="+"||L[0]==="-")&&L[1]==="="||L===""||L===" "},_e=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,pe=function(L,N){var X,q,ne;N.length===3&&(N=(X=N[0])+X+(q=N[1])+q+(ne=N[2])+ne);var ae=parseInt(N,16);return"rgb("+(X=ae>>16&255)+", "+(q=ae>>8&255)+", "+(ne=255&ae)+")"};function K(L){if(L&&L.splice&&L.isString||typeof L!="string"||L.charAt(1)==="=")return L;var N=L.replace(_e,pe).match(oe).map(function(X){return xe(X)?X:+X});return N.isString=!0,N}function be(L,N,X,q){var ne=X[L],ae=q[L];if(ne===ae)return!0;if(Array.isArray(ne)&&Array.isArray(ae)&&ne.length===ae.length)for(var j=0,ce=ae.length;j<ce;j++){var $=ne[j],Ae=ae[j];$===Ae||typeof $=="number"&&typeof Ae=="number"||be(j,N[L],ne,ae)}if(!(typeof ne=="number"&&typeof ae=="number"||ne&&ne.splice&&ne.isString&&ae&&ae.splice&&ae.isString)){if(typeof ne=="string"&&Array.isArray(ae)){var we=K(ne),Ge=ae.map(K);return X[L]=we,q[L]=Ge,!0}if(typeof ne=="string"||typeof ae=="string"){var ze=Array.isArray(ne)&&ne[0]===se?ne:K(ne),Ze=Array.isArray(ae)&&ae[0]===se?ae:K(ae);if(ze===void 0)return;for(var je=1;je<ze.length;)ze[je]===Ze[je]&&typeof ze[je-1]=="string"?(ze.splice(je-1,2,ze[je-1]+ze[je]),Ze.splice(je-1,2,Ze[je-1]+Ze[je])):je++;return ze[je=0]===se&&ze.shift(),Ze[0]===se&&Ze.shift(),X[L]=ze,q[L]=Ze,!0}if(S(ne)==="object"&&S(ae)==="object"){if(Array.isArray(ne)&&!ne.isString)return ne.map(function(vt,st){return be(st,N[L],ne,ae)});for(var at in ae)be(at,N[L],ne,ae);return!0}}return!1}var me="rgba(",fe=function(L,N,X){var q=2<arguments.length&&X!==void 0?X:"rgb(";return typeof L[N]=="number"&&(L[N-1]===q||L[N-3]===q||L[N-5]===q)};function de(L,N,X,q,ne,ae,j){var ce=j?X:X[L],$=j?q:q[L];if($===void 0)return ce;if(ce===void 0||typeof ce=="string"||ce===$)return $;if(S(ce)==="object"&&S($)==="object"){if(!ce||!$)return N[L];if(S(ce)==="object"&&ce&&ce.isString&&$&&$.splice&&$.isString){for(var Ae="",we=0,Ge=ce.length;we<Ge;we++)if(ce[we]!==$[we]||typeof ce[we]!="number"||typeof $[we]=="number"){var ze=typeof ce[we]=="number"&&typeof $[we]=="string"&&$[we][1]==="=",Ze=typeof ce[we]!="number"?ce[we]:ze?ce[we]+parseFloat($[we][0]+$[we].substr(2))*ne:ce[we]+($[we]-ce[we])*ne;(fe(ce,we)||fe(ce,we,me))&&(Ze|=0),Ae+=Ze,ze&&ae===1&&(ce[we]=ce[we]+parseFloat($[we][0]+$[we].substr(2)))}else Ae+=ce[we];return j||(N[L]=Ae),Ae}if(Array.isArray(ce)&&ce[0]!==se)for(var je=0,at=ce.length;je<at;je++)ce[je]!==$[je]&&typeof N[L]!="string"&&de(je,N[L],ce,$,ne,ae);else if(S(ce)==="object"&&ce&&!ce.isString)for(var vt in ce)ce[vt]!==$[vt]&&de(vt,N[L],ce,$,ne,ae)}else if(typeof ce=="number"){var st=typeof $=="string";N[L]=st?ce+parseFloat($[0]+$.substr(2))*ne:ce+($-ce)*ne,st&&ae===1&&(X[L]=N[L])}else typeof $=="function"&&(N[L]=$(ne));return N[L]}function Fe(L,N){var X=L[N],q=N.replace(Ee,"").split(Pe),ne=q.length-1,ae=Array.isArray(L),j=S(L)==="object"&&!ae;return j?(L[N]=null,delete L[N]):ae&&L.splice(N,1),q.reduce(function(ce,$,Ae){ae&&$!=="."&&$!=="["&&($*=1);var we=q[Ae+1]==="[";if($==="."||$==="[")return $==="."?ae=!(j=!0):$==="["&&(ae=!(j=!1)),ce;if(ce[$]===void 0){if(ae||j)return ce[$]=Ae===ne?X:ae||we?[]:j?{}:null,j=ae=!1,ce[$]}else if(ce[$]!==void 0)return Ae===ne&&(ce[$]=X),ce[$];return ce},L)}function ye(L){if(S(L)==="object"&&L){for(var N in L)if(N.indexOf(".")!==-1||N.indexOf("[")!==-1)Fe(L,N);else if(S(L[N])==="object"&&L[N]){var X=L[N];for(var q in X)if(q.indexOf(".")!==-1||q.indexOf("[")!==-1)Fe(X,q);else if(S(X[q])==="object"&&X[q]){var ne=X[q];for(var ae in ne)ae.indexOf(".")===-1&&ae.indexOf("[")===-1||Fe(ne,ae)}}}return L}var Se,Pe=/([.[])/g,Ee=/\]/g,We=Object.freeze({__proto__:null,FRAME_MS:V,TOO_LONG_FRAME_MS:250,CHAINED_TWEENS:G,EVENT_CALLBACK:O,EVENT_UPDATE:W,EVENT_COMPLETE:k,EVENT_START:Y,EVENT_REPEAT:te,EVENT_REVERSE:ie,EVENT_PAUSE:"pause",EVENT_PLAY:"play",EVENT_RESTART:re,EVENT_STOP:"stop",EVENT_SEEK:"seek",STRING_PROP:se,NUM_REGEX:oe,deepCopy:le,decomposeString:K,decompose:be,RGB:"rgb(",RGBA:me,isRGBColor:fe,recompose:de,SET_NESTED:ye}),J={Linear:function(L,N,X){var q=L.length-1,ne=q*N,ae=Math.floor(ne),j=J.Utils.Linear;return N<0?j(L[0],L[1],ne,X):1<N?j(L[q],L[q-1],q-ne,X):j(L[ae],L[q<ae+1?q:ae+1],ne-ae,X)},Bezier:function(L,N,X){for(var q=J.Utils.Reset(X),ne=L.length-1,ae=Math.pow,j=J.Utils.Bernstein,ce=Array.isArray(q),$=0;$<=ne;$++)if(typeof q=="number")q+=ae(1-N,ne-$)*ae(N,$)*L[$]*j(ne,$);else if(ce)for(var Ae=0,we=q.length;Ae<we;Ae++)typeof q[Ae]=="number"?q[Ae]+=ae(1-N,ne-$)*ae(N,$)*L[$][Ae]*j(ne,$):q[Ae]=L[$][Ae];else if(S(q)==="object")for(var Ge in q)typeof q[Ge]=="number"?q[Ge]+=ae(1-N,ne-$)*ae(N,$)*L[$][Ge]*j(ne,$):q[Ge]=L[$][Ge];else if(typeof q=="string"){for(var ze="",Ze=L[Math.round(ne*N)],je=1,at=Ze.length;je<at;je++)ze+=Ze[je];return ze}return q},CatmullRom:function(L,N,X){var q=L.length-1,ne=q*N,ae=Math.floor(ne),j=J.Utils.CatmullRom;return L[0]===L[q]?(N<0&&(ae=Math.floor(ne=q*(1+N))),j(L[(ae-1+q)%q],L[ae],L[(ae+1)%q],L[(ae+2)%q],ne-ae,X)):N<0?j(L[1],L[1],L[0],L[0],-N,X):1<N?j(L[q-1],L[q-1],L[q],L[q],(0|N)-N,X):j(L[ae?ae-1:0],L[ae],L[q<ae+1?q:ae+1],L[q<ae+2?q:ae+2],ne-ae,X)},Utils:{Linear:function(L,N,X,q){if(L===N||typeof L=="string"){if(N.length&&N.splice&&N.isString){N="";for(var ne=0,ae=L.length;ne<ae;ne++)N+=L[ne]}return N}if(typeof L=="number")return typeof L=="function"?L(X):L+(N-L)*X;if(S(L)==="object"){if(L.length!==void 0){var j=typeof L[0]=="string"||L.isString;if(j||L[0]===se){for(var ce="",$=j?0:1,Ae=L.length;$<Ae;$++){var we=X===0?L[$]:X!==1&&typeof L[$]=="number"?L[$]+(N[$]-L[$])*X:N[$];(0<X&&X<1&&fe(L,$)||fe(L,$,me))&&(we|=0),ce+=we}return ce}if(q&&q.length&&q.splice)for(var Ge=0,ze=q.length;Ge<ze;Ge++)q[Ge]=J.Utils.Linear(L[Ge],N[Ge],X,q[Ge])}else for(var Ze in q)q[Ze]=J.Utils.Linear(L[Ze],N[Ze],X,q[Ze]);return q}},Reset:function(L){if(Array.isArray(L)){for(var N=0,X=L.length;N<X;N++)L[N]=J.Utils.Reset(L[N]);return L}if(S(L)!=="object")return typeof L=="number"?0:L;for(var q in L)L[q]=J.Utils.Reset(L[q]);return L},Bernstein:function(L,N){var X=J.Utils.Factorial;return X(L)/X(N)/X(L-N)},Factorial:(Se=[1],function(L){var N=1;if(Se[L])return Se[L];for(var X=L;1<X;X--)N*=X;return Se[L]=N}),CatmullRom:function(L,N,X,q,ne,ae){if(typeof L=="string")return N;if(typeof L=="number"){var j=.5*(X-L),ce=.5*(q-N),$=ne*ne;return(2*N-2*X+j+ce)*(ne*$)+(-3*N+3*X-2*j-ce)*$+j*ne+N}if(S(L)==="object"){if(L.length!==void 0){if(L[0]===se){for(var Ae="",we=1,Ge=L.length;we<Ge;we++){var ze=typeof L[we]=="number"?J.Utils.CatmullRom(L[we],N[we],X[we],q[we],ne):q[we];(fe(L,we)||fe(L,we,me))&&(ze|=0),Ae+=ze}return Ae}for(var Ze=0,je=ae.length;Ze<je;Ze++)ae[Ze]=J.Utils.CatmullRom(L[Ze],N[Ze],X[Ze],q[Ze],ne,ae[Ze])}else for(var at in ae)ae[at]=J.Utils.CatmullRom(L[at],N[at],X[at],q[at],ne,ae[at]);return ae}}}},H={};function ue(L,N,X){if(!L||!L.nodeType)return N;var q=L.queueID||"q_"+Date.now();L.queueID||(L.queueID=q);var ne=H[q];if(ne){if(ne.object===N&&L===ne.tween.node&&X._startTime===ne.tween._startTime)I(ne.tween);else if(S(N)==="object"&&N&&ne.object){for(var ae in N)ae in ne.object&&(X._startTime===ne.tween._startTime?delete ne.object[ae]:ne.propNormaliseRequired=!0);Object.assign(ne.object,N)}return ne.object}return S(N)==="object"&&N?(H[q]={tween:X,object:N,propNormaliseRequired:!1},H[q].object):N}function Re(L,N,X){return N?L?typeof window<"u"&&L===window||typeof document<"u"&&L===document?[L]:typeof L=="string"?!!document.querySelectorAll&&document.querySelectorAll(L):Array.isArray(L)?L:L.nodeType?[L]:X?L:[]:null:L?typeof window<"u"&&L===window||typeof document<"u"&&L===document?L:typeof L=="string"?!!document.querySelector&&document.querySelector(L):Array.isArray(L)?L[0]:L.nodeType||X?L:null:null}var Be=0,Ie=E.Linear.None,Ue=function(){function L(N,X){return M(this,L),this.id=Be++,!N||S(N)!=="object"||X||N.nodeType?N&&(N.nodeType||N.length||typeof N=="string")&&(N=this.node=Re(N),X=this.object=ue(N,X,this)):(X=this.object=N,N=null),this._valuesEnd=null,this._valuesStart=Array.isArray(X)?[]:{},this._duration=1e3,this._easingFunction=Ie,this._easingReverse=Ie,this._interpolationFunction=J.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return T(L,null,[{key:"fromTo",value:function(N,X,q,ne){var ae=3<arguments.length&&ne!==void 0?ne:{};ae.quickRender=ae.quickRender?ae.quickRender:!q;var j=new L(N,X).to(q,ae);return ae.quickRender&&(j.render().update(j._startTime),j._rendered=!1,j._onStartCallbackFired=!1),j}},{key:"to",value:function(N,X,q){return L.fromTo(N,null,X,q)}},{key:"from",value:function(N,X,q){return L.fromTo(N,X,null,q)}}]),T(L,[{key:"setMaxListener",value:function(N){var X=0<arguments.length&&N!==void 0?N:15;return this._maxListener=X,this}},{key:"on",value:function(N,X){for(var q=this._maxListener,ne=N+O,ae=0;ae<q;ae++){var j=ne+ae;if(!this[j]){this[j]=X;break}}return this}},{key:"once",value:function(N,X){for(var q=this,ne=this._maxListener,ae=N+O,j=function($){var Ae=ae+$;if(!q[Ae])return q[Ae]=function(){for(var we=arguments.length,Ge=new Array(we),ze=0;ze<we;ze++)Ge[ze]=arguments[ze];X.apply(q,Ge),q[Ae]=null},"break"},ce=0;ce<ne&&j(ce)!=="break";ce++);return this}},{key:"off",value:function(N,X){for(var q=this._maxListener,ne=N+O,ae=0;ae<q;ae++){var j=ne+ae;this[j]===X&&(this[j]=null)}return this}},{key:"emit",value:function(N,X,q,ne){var ae=this._maxListener,j=N+O;if(!this[j+0])return this;for(var ce=0;ce<ae;ce++){var $=j+ce;this[$]&&this[$](X,q,ne)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(N){var X=this._reversed;return this._reversed=N!==void 0?N:!X,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,I(this),this._pausedTime=h(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=h()-this._pausedTime,this._initTime=this._startTime,e(this),this._pausedTime=h(),this.emit("play",this.object))}},{key:"restart",value:function(){return this._repeat=this._r,this.reassignValues(),e(this),this.emit(re,this.object)}},{key:"seek",value:function(N,X){var q=this._duration,ne=this._initTime,ae=this._startTime,j=this._reversed,ce=ne+N;return this._isPlaying=!0,ce<ae&&ne<=ae&&(this._startTime-=q,this._reversed=!j),this.update(N,!1),this.emit("seek",N,this.object),X?this:this.pause()}},{key:"duration",value:function(N){return this._duration=typeof N=="function"?N(this._duration):N,this}},{key:"to",value:function(N,X){var q=1<arguments.length&&X!==void 0?X:1e3;if(this._valuesEnd=N,typeof q=="number"||typeof q=="function")this._duration=typeof q=="function"?q(this._duration):q;else if(S(q)==="object"){for(var ne in q)if(typeof this[ne]=="function"){var ae=Q(Array.isArray(q[ne])?q[ne]:[q[ne]],4),j=ae[0],ce=j===void 0?null:j,$=ae[1],Ae=$===void 0?null:$,we=ae[2],Ge=we===void 0?null:we,ze=ae[3],Ze=ze===void 0?null:ze;this[ne](ce,Ae,Ge,Ze)}}return this}},{key:"render",value:function(){if(this._rendered)return this;var N=this._valuesStart,X=this._valuesEnd,q=this.object,ne=this.node,ae=this.InitialValues;if(ye(q),ye(X),ne&&ne.queueID&&H[ne.queueID]){var j=H[ne.queueID];if(j.propNormaliseRequired&&j.tween!==this){for(var ce in X)j.tween._valuesEnd[ce];j.normalisedProp=!0,j.propNormaliseRequired=!1}}if(ne&&ae&&(q&&Object.keys(q).length!==0?X&&Object.keys(X).length!==0||(X=this._valuesEnd=ae(ne,q)):q=this.object=ue(ne,ae(ne,X),this)),!N.processed){for(var $ in X){var Ae=q&&q[$]&&le(q[$]),we=X[$];if(!(C[$]&&C[$].init&&(C[$].init.call(this,Ae,we,$,q),Ae===void 0&&N[$]&&(Ae=N[$]),C[$].skipProcess))&&!(typeof Ae=="number"&&isNaN(Ae)||Ae===null||we===null||Ae===!1||we===!1||Ae===void 0||we===void 0||Ae===we)){if(N[$]=Ae,Array.isArray(we))if(Array.isArray(Ae))we.isString&&q[$].isString&&!Ae.isString?Ae.isString=!0:be($,q,N,X);else{we.unshift(Ae);for(var Ge=0,ze=we.length;Ge<ze;Ge++)typeof we[Ge]=="string"&&(we[Ge]=K(we[Ge]))}else be($,q,N,X);typeof Ae!="number"||typeof we!="string"||we[1]}}N.processed=!0}return L.Renderer&&this.node&&L.Renderer.init&&(L.Renderer.init.call(this,q,N,X),this.__render=!0),this._rendered=!0,this}},{key:"start",value:function(N){return this._startTime=N!==void 0?typeof N=="string"?h()+parseFloat(N):N:h(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,e(this),this}},{key:"stop",value:function(){var N=this._isPlaying,X=this._isFinite,q=this.object,ne=this._startTime,ae=this._duration,j=this._r,ce=this._yoyo,$=this._reversed;if(!N)return this;var Ae=X?(j+1)%2==1:!$;return this._reversed=!1,ce&&Ae?this.update(ne):this.update(ne+ae),I(this),this.emit("stop",q)}},{key:"delay",value:function(N){return this._delayTime=typeof N=="function"?N(this._delayTime):N,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var N=0,X=this._chainedTweensCount;N<X;N++)this[G+N]=arguments[N];return this}},{key:"repeat",value:function(N){return this._repeat=this._duration?typeof N=="function"?N(this._repeat):N:0,this._r=this._repeat,this._isFinite=isFinite(N),this}},{key:"reverseDelay",value:function(N){return this._reverseDelayTime=typeof N=="function"?N(this._reverseDelayTime):N,this}},{key:"yoyo",value:function(N,X){return this._yoyo=typeof N=="function"?N(this._yoyo):N===null?this._yoyo:N,N||(this._reversed=!1),this._easingReverse=X||null,this}},{key:"easing",value:function(N){return this._easingFunction=N,this}},{key:"interpolation",value:function(N){return typeof N=="function"&&(this._interpolationFunction=N),this}},{key:"reassignValues",value:function(N){var X=this._valuesStart,q=this.object,ne=this._delayTime;for(var ae in this._isPlaying=!0,this._startTime=N!==void 0?N:h(),this._startTime+=ne,this._reversed=!1,e(this),X){var j=X[ae];q[ae]=j}return this}},{key:"update",value:function(N,X,q){var ne,ae,j,ce=this._onStartCallbackFired,$=this._easingFunction,Ae=this._interpolationFunction,we=this._easingReverse,Ge=this._repeat,ze=this._delayTime,Ze=this._reverseDelayTime,je=this._yoyo,at=this._reversed,vt=this._startTime,st=this._prevTime,kn=this._duration,Pn=this._valuesStart,kt=this._valuesEnd,Rt=this.object,Si=this._isFinite,gn=this._isPlaying,yn=this.__render,Kn=this._chainedTweensCount,Mr=0;if(kn){var ki=(N=N!==void 0?N:h())-st;if(this._prevTime=N,250<ki&&i()&&o()&&(N-=ki-V),!gn||N<vt&&!q)return!0;ne=1<(ne=(N-vt)/kn)?1:ne,ne=at?1-ne:ne}else ne=1,Ge=0;if(ce||(this._rendered||(this.render(),this._rendered=!0),this.emit(Y,Rt),this._onStartCallbackFired=!0),ae=at&&we||$,!Rt)return!0;for(j in kt){var ee=Pn[j];if(ee!=null||C[j]&&C[j].update){var ve=kt[j],Te=ae[j]?ae[j](ne):(typeof ae=="function"?ae:Ie)(ne),ge=Ae[j]?Ae[j]:typeof Ae=="function"?Ae:J.Linear;typeof ve=="number"?Rt[j]=ee+(ve-ee)*Te:!Array.isArray(ve)||ve.isString||Array.isArray(ee)?ve&&ve.update?ve.update(Te):typeof ve=="function"?Rt[j]=ve(Te):typeof ve=="string"&&typeof ee=="number"?Rt[j]=ee+parseFloat(ve[0]+ve.substr(2))*Te:de(j,Rt,Pn,kt,Te,ne):Rt[j]=ge(ve,Te,Rt[j]),C[j]&&C[j].update&&C[j].update.call(this,Rt[j],ee,ve,Te,ne,j),Mr++}}if(!Mr)return I(this),!1;if(yn&&L.Renderer&&L.Renderer.update&&L.Renderer.update.call(this,Rt,ne),this.emit(W,Rt,ne,N),ne===1||at&&ne===0){if(0<Ge&&0<kn){if(Si&&this._repeat--,je)this._reversed=!at;else for(j in kt){var Le=kt[j];typeof Le=="string"&&typeof Pn[j]=="number"&&(Pn[j]+=parseFloat(Le[0]+Le.substr(2)))}return this.emit(je&&!at?ie:te,Rt),this._startTime=at&&Ze?N-Ze:N+ze,!0}if(X||(this._isPlaying=!1,I(this),Be--),this.emit(k,Rt),this._repeat=this._r,Kn)for(var qe=0;qe<Kn;qe++)this[G+qe].start(N+kn);return!1}return!0}}]),L}(),Ne=function(){function L(){M(this,L),this.totalTime=0,this.labels=[],this.offsets=[]}return T(L,[{key:"parseLabel",value:function(N,X){var q=this.offsets,ne=this.labels,ae=ne.indexOf(N);if(typeof N=="string"&&N.indexOf("=")!==-1&&!X&&ae===-1){var j=N.substr(N.indexOf("=")-1,2),ce=N.split(j);X=ce.length===2?j+ce[1]:null,N=ce[0],ae=ne.indexOf(N)}if(ae!==-1&&N){var $=q[ae]||0;if(typeof X=="number")$=X;else if(typeof X=="string"&&X.indexOf("=")!==-1){var Ae=X.charAt(0);X=Number(X.substr(2)),Ae==="+"||Ae==="-"?$+=parseFloat(Ae+X):Ae==="*"?$*=X:Ae==="/"?$/=X:Ae==="%"&&($*=X/100)}return $}return typeof X=="number"?X:0}},{key:"addLabel",value:function(N,X){return this.labels.push(N),this.offsets.push(this.parseLabel(N,X)),this}},{key:"setLabel",value:function(N,X){var q=this.labels.indexOf(N);return q!==-1&&this.offsets.splice(q,1,this.parseLabel(N,X)),this}},{key:"eraseLabel",value:function(N){var X=this.labels.indexOf(N);return X!==-1&&(this.labels.splice(X,1),this.offsets.splice(X,1)),this}}]),L}(),Ce=0,Z=function(){function L(N){var X;return M(this,L),(X=z(this,B(L).call(this)))._duration=0,X._startTime=N&&N.startTime!==void 0?N.startTime:h(),X._tweens=[],X.elapsed=0,X._id=Ce++,X._defaultParams=N,X.position=new Ne,X.position.addLabel("afterLast",X._duration),X.position.addLabel("afterInit",X._startTime),X._onStartCallbackFired=!1,z(X,F(X))}return function(N,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(X&&X.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),X&&P(N,X)}(L,Ue),T(L,[{key:"mapTotal",value:function(N){return N.call(this,this._tweens),this}},{key:"timingOrder",value:function(N){var X=N(this._tweens.map(function(q){return q._startTime}));return this._tweens.map(function(q,ne){q._startTime=X[ne]}),this}},{key:"getTiming",value:function(N,X,q,ne){var ae=3<arguments.length&&ne!==void 0?ne:0;if(N==="reverse"){var j=q.stagger,ce=(j||0)*(X.length-1);return X.map(function(Ge,ze){return ce-(j||0)*ze+ae})}if(N==="async")return X.map(function(Ge){return ae});if(N==="sequence"||N==="delayed"){var $=q.stagger;return $=$||(q.duration||1e3)/(X.length-1),X.map(function(Ge,ze){return $*ze+ae})}if(N==="oneByOne")return X.map(function(Ge){return q.duration});if(N==="shuffle"){var Ae=q.stagger;return function(Ge){var ze,Ze,je;for(je=Ge.length;je;--je)ze=Math.floor(Math.random()*je),Ze=Ge[je-1],Ge[je-1]=Ge[ze],Ge[ze]=Ze;return Ge}(X.map(function(Ge,ze){return(Ae||0)*ze+ae}))}var we=q.stagger;return X.map(function(Ge,ze){return(we||0)*ze+ae})}},{key:"fromTo",value:function(N,X,q,ne){if((N=Re(N,!0,!0))&&N.length){this._defaultParams&&(ne=ne?R({},this._defaultParams,{},ne):this._defaultParams);for(var ae,j=ne.label,ce=typeof j=="number"?j:this.position.parseLabel(j!==void 0?j:"afterLast",null),$=this.getTiming(ne.mode,N,ne,ce),Ae=0,we=N.length;Ae<we;Ae++)ae=N[Ae],this.add(Ue.fromTo(ae,typeof X=="function"?X(Ae,N.length):S(X)==="object"&&X?R({},X):null,typeof q=="function"?q(Ae,N.length):q,typeof ne=="function"?ne(Ae,N.length):ne),$[Ae])}return this.start()}},{key:"from",value:function(N,X,q){return this.fromTo(N,X,null,q)}},{key:"to",value:function(N,X,q){return this.fromTo(N,null,X,q)}},{key:"addLabel",value:function(N,X){return this.position.addLabel(N,X),this}},{key:"map",value:function(N){for(var X=0,q=this._tweens.length;X<q;X++){var ne=this._tweens[X];N(ne,X),this._duration=Math.max(this._duration,ne._duration+ne._startTime)}return this}},{key:"add",value:function(N,X){var q=this;if(Array.isArray(N))return N.map(function($){q.add($,X)}),this;S(N)!=="object"||N instanceof Ue||(N=new Ue(N.from).to(N.to,N));var ne=this._defaultParams,ae=this._duration;if(ne)for(var j in ne)typeof N[j]=="function"&&N[j](ne[j]);var ce=typeof X=="number"?X:this.position.parseLabel(X!==void 0?X:"afterLast",null);return N._startTime=Math.max(this._startTime,N._delayTime,ce),N._delayTime=ce,N._isPlaying=!0,this._duration=Math.max(ae,Math.max(N._startTime+N._delayTime,N._duration)),this._tweens.push(N),this.position.setLabel("afterLast",this._duration),this}},{key:"restart",value:function(){return this._startTime+=h(),e(this),this.emit(re)}},{key:"easing",value:function(N){return this.map(function(X){return X.easing(N)})}},{key:"interpolation",value:function(N){return this.map(function(X){return X.interpolation(N)})}},{key:"update",value:function(N){var X,q=this._tweens,ne=this._duration,ae=this._reverseDelayTime,j=this._startTime,ce=this._reversed,$=this._yoyo,Ae=this._repeat,we=this._isFinite,Ge=this._isPlaying,ze=this._prevTime,Ze=this._onStartCallbackFired,je=(N=N!==void 0?N:h())-ze;if(this._prevTime=N,250<je&&i()&&o()&&(N-=je-V),!Ge||N<j)return!0;X=1<(X=(N-j)/ne)?1:X,X=ce?1-X:X,this.elapsed=X,Ze||(this.emit(Y),this._onStartCallbackFired=!0);for(var at=N-j,vt=ce?ne-at:at,st=0;st<q.length;)q[st].update(vt),st++;if(this.emit(W,X,at),X===1||ce&&X===0){if(Ae){for(we&&this._repeat--,this.emit(ce?ie:te),$&&(this._reversed=!ce,this.timingOrder(function(kn){return kn.reverse()})),this._startTime=ce&&ae?N+ae:N,st=0;st<q.length;)q[st].reassignValues(N),st++;return!0}return this.emit(k),this._repeat=this._r,I(this),this._isPlaying=!1}return!0}},{key:"progress",value:function(N){return N!==void 0?this.update(N*this._duration):this.elapsed}}]),L}();n.Easing=E,n.FrameThrottle=function(L){g=1.05*(0<arguments.length&&L!==void 0?L:120)},n.Interpolation=J,n.Interpolator=function(L,N){var X=Array.isArray(L)&&!L.isString,q=typeof L=="string"?L:X?L.slice():R({},L);if(X)for(var ne=0,ae=L.length;ne<ae;ne++)L[ne]===N[ne]&&typeof L[ne]=="number"&&typeof N[ne]!="number"||be(ne,q,L,N);else if(S(L)==="object")for(var j in L)L[j]===N[j]&&typeof L[j]=="number"&&typeof N[j]!="number"||be(j,q,L,N);else if(typeof L=="string"){L=K(L),N=K(N);for(var ce=1;ce<L.length;)L[ce]===N[ce]&&typeof L[ce-1]=="string"?(L.splice(ce-1,2,L[ce-1]+L[ce]),N.splice(ce-1,2,N[ce-1]+N[ce])):ce++}return function($){if(X)for(var Ae=0,we=L.length;Ae<we;Ae++)de(Ae,q,L,N,$);else if(S(q)==="object")for(var Ge in L)de(Ge,q,L,N,$);else typeof q=="string"&&(q=de(0,0,L,N,$,$,!0));return q}},n.Plugins=C,n.Selector=Re,n.Timeline=Z,n.ToggleLagSmoothing=function(L){w=!(0<arguments.length&&L!==void 0)||L},n.Tween=Ue,n.add=e,n.autoPlay=function(L){d=L},n.get=t,n.getAll=function(){return A},n.has=function(L){return t(L)!==null},n.isRunning=i,n.now=h,n.onRequestTick=function(L){p.push(L)},n.onTick=function(L){return A.push({update:L})},n.remove=I,n.removeAll=function(){A.length=0,u(a),f=!1},n.update=v,n.utils=We,Object.defineProperty(n,"__esModule",{value:!0})})});var JI=bt(mN=>{Object.observe||function(n,e,t,i){"use strict";var o,a,l=["add","update","delete","reconfigure","setPrototype","preventExtensions"],c=e.isArray||function(S){return function(M){return S.call(M)==="[object Array]"}}(n.prototype.toString),u=e.prototype.indexOf?e.indexOf||function(S,M,_){return e.prototype.indexOf.call(S,M,_)}:function(S,M,_){for(var T=_||0;T<S.length;T++)if(S[T]===M)return T;return-1},h=t.Map===i||!Map.prototype.forEach?function(){var S=[],M=[];return{size:0,has:function(_){return u(S,_)>-1},get:function(_){return M[u(S,_)]},set:function(_,T){var D=u(S,_);D===-1?(S.push(_),M.push(T),this.size++):M[D]=T},delete:function(_){var T=u(S,_);T>-1&&(S.splice(T,1),M.splice(T,1),this.size--)},forEach:function(_){for(var T=0;T<S.length;T++)_.call(arguments[1],M[T],S[T],this)}}}:function(){return new Map},A=n.getOwnPropertyNames?function(){var S=n.getOwnPropertyNames;try{arguments.callee}catch{var M=(S(u).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");M.length&&(S=function(T){var D=n.getOwnPropertyNames(T);if(typeof T=="function")for(var R=0,B;R<M.length;)(B=u(D,M[R++]))>-1&&D.splice(B,1);return D})}return S}():function(S){var M=[],_,T;if("hasOwnProperty"in S)for(_ in S)S.hasOwnProperty(_)&&M.push(_);else{T=n.hasOwnProperty;for(_ in S)T.call(S,_)&&M.push(_)}return c(S)&&M.push("length"),M},f=n.getPrototypeOf,d=n.defineProperties&&n.getOwnPropertyDescriptor,p=t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(){var S=+new Date,M=S;return function(_){return setTimeout(function(){_((M=+new Date)-S)},17)}}(),m=function(S,M,_){var T=o.get(S);T?(g(T,S),C(S,T,M,_)):(T=b(S),C(S,T,M,_),o.size===1&&p(w))},b=function(S,B){var _=A(S),T=[],D,R=0,B={handlers:h(),frozen:n.isFrozen?n.isFrozen(S):!1,extensible:n.isExtensible?n.isExtensible(S):!0,proto:f&&f(S),properties:_,values:T,notifier:v(S,B)};if(d)for(D=B.descriptors=[];R<_.length;)D[R]=d(S,_[R]),T[R]=S[_[R++]];else for(;R<_.length;)T[R]=S[_[R++]];return o.set(S,B),B},g=function(){var S=d?function(_,T,D,R,B){var P=T.properties[D],F=_[P],z=T.values[D],Q=T.descriptors[D];"value"in B&&(z===F?z===0&&1/z!==1/F:z===z||F===F)&&(E(_,T,{name:P,type:"update",object:_,oldValue:z},R),T.values[D]=F),Q.configurable&&(!B.configurable||B.writable!==Q.writable||B.enumerable!==Q.enumerable||B.get!==Q.get||B.set!==Q.set)&&(E(_,T,{name:P,type:"reconfigure",object:_,oldValue:z},R),T.descriptors[D]=B)}:function(_,T,D,R){var B=T.properties[D],P=_[B],F=T.values[D];(F===P?F===0&&1/F!==1/P:F===F||P===P)&&(E(_,T,{name:B,type:"update",object:_,oldValue:F},R),T.values[D]=P)},M=d?function(_,T,D,R,B){for(var P=T.length,F;D&&P--;)T[P]!==null&&(F=d(_,T[P]),D--,F?S(_,R,P,B,F):(E(_,R,{name:T[P],type:"delete",object:_,oldValue:R.values[P]},B),R.properties.splice(P,1),R.values.splice(P,1),R.descriptors.splice(P,1)))}:function(_,T,D,R,B){for(var P=T.length;D&&P--;)T[P]!==null&&(E(_,R,{name:T[P],type:"delete",object:_,oldValue:R.values[P]},B),R.properties.splice(P,1),R.values.splice(P,1),D--)};return function(_,T,D){if(!(!_.handlers.size||_.frozen)){var R,B,P,F=_.values,z=_.descriptors,Q=0,V,G,O,W,k;if(_.extensible)if(R=_.properties.slice(),B=R.length,P=A(T),z){for(;Q<P.length;)G=P[Q++],V=u(R,G),k=d(T,G),V===-1?(E(T,_,{name:G,type:"add",object:T},D),_.properties.push(G),F.push(T[G]),z.push(k)):(R[V]=null,B--,S(T,_,V,D,k));M(T,R,B,_,D),n.isExtensible(T)||(_.extensible=!1,E(T,_,{type:"preventExtensions",object:T},D),_.frozen=n.isFrozen(T))}else{for(;Q<P.length;)G=P[Q++],V=u(R,G),O=T[G],V===-1?(E(T,_,{name:G,type:"add",object:T},D),_.properties.push(G),F.push(O)):(R[V]=null,B--,S(T,_,V,D));M(T,R,B,_,D)}else if(!_.frozen){for(;Q<R.length;Q++)G=R[Q],S(T,_,Q,D,d(T,G));n.isFrozen(T)&&(_.frozen=!0)}f&&(W=f(T),W!==_.proto&&(E(T,_,{type:"setPrototype",name:"__proto__",object:T,oldValue:_.proto}),_.proto=W))}}}(),w=function(){o.size&&(o.forEach(g),a.forEach(I),p(w))},I=function(S,M){var _=S.changeRecords;_.length&&(S.changeRecords=[],M(_))},v=function(S,M){return arguments.length<2&&(M=o.get(S)),M&&M.notifier||{notify:function(_){_.type;var T=o.get(S);if(T){var D={object:S},R;for(R in _)R!=="object"&&(D[R]=_[R]);E(S,T,D)}},performChange:function(_,T){if(typeof _!="string")throw new TypeError("Invalid non-string changeType");if(typeof T!="function")throw new TypeError("Cannot perform non-function");var D=o.get(S),R,B,P=arguments[2],F=P===i?T():T.call(P);if(D&&g(D,S,_),D&&F&&typeof F=="object"){B={object:S,type:_};for(R in F)R!=="object"&&R!=="type"&&(B[R]=F[R]);E(S,D,B)}}}},C=function(S,M,_,T){var D=a.get(_);D||a.set(_,D={observed:h(),changeRecords:[]}),D.observed.set(S,{acceptList:T.slice(),data:M}),M.handlers.set(_,D)},E=function(S,M,_,T){M.handlers.forEach(function(D){var R=D.observed.get(S).acceptList;(typeof T!="string"||u(R,T)===-1)&&u(R,_.type)>-1&&D.changeRecords.push(_)})};o=h(),a=h(),n.observe=function(M,_,T){if(!M||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.observe cannot observe non-object");if(typeof _!="function")throw new TypeError("Object.observe cannot deliver to non-function");if(n.isFrozen&&n.isFrozen(_))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(T===i)T=l;else if(!T||typeof T!="object")throw new TypeError("Third argument to Object.observe must be an array of strings.");return m(M,_,T),M},n.unobserve=function(M,_){if(M===null||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.unobserve cannot unobserve non-object");if(typeof _!="function")throw new TypeError("Object.unobserve cannot deliver to non-function");var T=a.get(_),D;return T&&(D=T.observed.get(M))&&(T.observed.forEach(function(R,B){g(R.data,B)}),p(function(){I(T,_)}),T.observed.size===1&&T.observed.has(M)?a.delete(_):T.observed.delete(M),D.data.handlers.size===1?o.delete(M):D.data.handlers.delete(_)),M},n.getNotifier=function(M){if(M===null||typeof M!="object"&&typeof M!="function")throw new TypeError("Object.getNotifier cannot getNotifier non-object");return n.isFrozen&&n.isFrozen(M)?null:v(M)},n.deliverChangeRecords=function(M){if(typeof M!="function")throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var _=a.get(M);_&&(_.observed.forEach(function(T,D){g(T.data,D)}),I(_,M))}}(Object,Array,mN)});var $y=bt((qI,gN)=>{(function(n,e){typeof qI=="object"?gN.exports=e():typeof define=="function"&&define.amd?define(e):n.Happens=e()})(qI,function(){"use strict";function n(t){var i=this instanceof n;if(t){if(i)throw new Error("You can't pass a target when instantiating with the `new` keyword");for(var o in n.prototype)t[o]=n.prototype[o]}else if(!i)return new n}n.prototype.__init=function(t){var i=this.__listeners||(this.__listeners=[]);return i[t]||(i[t]=[])},n.prototype.on=function(t,i){e(i),this.__init(t).push(i)},n.prototype.off=function(t,i){var o=this.__init(t);o.splice(o.indexOf(i),1)},n.prototype.once=function(t,i){e(i);var o=this,a=function(){o.off(t,a),i.apply(this,arguments)};this.on(t,a)},n.prototype.emit=function(t){var i,o=this.__init(t).slice(0);for(i in o)o[i].apply(this,[].slice.call(arguments,1))};function e(t){if(!(t&&t instanceof Function))throw new Error(t+" is not a Function")}return n})});var wN=bt((yN,vN)=>{vN.exports=yN=gq;function gq(n,e){this.path=n,this.name=e.name,this.type=e.type,this.object=e.object,this.value=e.object[e.name],this.oldValue=e.oldValue}});var RN=bt((Yge,$I)=>{"use strict";var $h=typeof Reflect=="object"?Reflect:null,bN=$h&&typeof $h.apply=="function"?$h.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},ev;$h&&typeof $h.ownKeys=="function"?ev=$h.ownKeys:Object.getOwnPropertySymbols?ev=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ev=function(e){return Object.getOwnPropertyNames(e)};function yq(n){console&&console.warn&&console.warn(n)}var CN=Number.isNaN||function(e){return e!==e};function tn(){tn.init.call(this)}$I.exports=tn;$I.exports.once=xq;tn.EventEmitter=tn;tn.prototype._events=void 0;tn.prototype._eventsCount=0;tn.prototype._maxListeners=void 0;var xN=10;function tv(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(tn,"defaultMaxListeners",{enumerable:!0,get:function(){return xN},set:function(n){if(typeof n!="number"||n<0||CN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");xN=n}});tn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};tn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||CN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function SN(n){return n._maxListeners===void 0?tn.defaultMaxListeners:n._maxListeners}tn.prototype.getMaxListeners=function(){return SN(this)};tn.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o=e==="error",a=this._events;if(a!==void 0)o=o&&a.error===void 0;else if(!o)return!1;if(o){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var c=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw c.context=l,c}var u=a[e];if(u===void 0)return!1;if(typeof u=="function")bN(u,this,t);else for(var h=u.length,A=_N(u,h),i=0;i<h;++i)bN(A[i],this,t);return!0};function EN(n,e,t,i){var o,a,l;if(tv(t),a=n._events,a===void 0?(a=n._events=Object.create(null),n._eventsCount=0):(a.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),a=n._events),l=a[e]),l===void 0)l=a[e]=t,++n._eventsCount;else if(typeof l=="function"?l=a[e]=i?[t,l]:[l,t]:i?l.unshift(t):l.push(t),o=SN(n),o>0&&l.length>o&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=l.length,yq(c)}return n}tn.prototype.addListener=function(e,t){return EN(this,e,t,!1)};tn.prototype.on=tn.prototype.addListener;tn.prototype.prependListener=function(e,t){return EN(this,e,t,!0)};function vq(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function IN(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},o=vq.bind(i);return o.listener=t,i.wrapFn=o,o}tn.prototype.once=function(e,t){return tv(t),this.on(e,IN(this,e,t)),this};tn.prototype.prependOnceListener=function(e,t){return tv(t),this.prependListener(e,IN(this,e,t)),this};tn.prototype.removeListener=function(e,t){var i,o,a,l,c;if(tv(t),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(a=-1,l=i.length-1;l>=0;l--)if(i[l]===t||i[l].listener===t){c=i[l].listener,a=l;break}if(a<0)return this;a===0?i.shift():wq(i,a),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};tn.prototype.off=tn.prototype.removeListener;tn.prototype.removeAllListeners=function(e){var t,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var a=Object.keys(i),l;for(o=0;o<a.length;++o)l=a[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function MN(n,e,t){var i=n._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?bq(o):_N(o,o.length)}tn.prototype.listeners=function(e){return MN(this,e,!0)};tn.prototype.rawListeners=function(e){return MN(this,e,!1)};tn.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):TN.call(n,e)};tn.prototype.listenerCount=TN;function TN(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}tn.prototype.eventNames=function(){return this._eventsCount>0?ev(this._events):[]};function _N(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function wq(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function bq(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function xq(n,e){return new Promise(function(t,i){function o(l){n.removeListener(e,a),i(l)}function a(){typeof n.removeListener=="function"&&n.removeListener("error",o),t([].slice.call(arguments))}DN(n,e,a,{once:!0}),e!=="error"&&Cq(n,o,{once:!0})})}function Cq(n,e,t){typeof n.on=="function"&&DN(n,"error",e,t)}function DN(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function o(a){i.once&&n.removeEventListener(e,o),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}});var BN=bt((Zge,LN)=>{var ip=1e3,rp=ip*60,sp=rp*60,op=sp*24,Sq=op*365.25;LN.exports=function(n,e){return e=e||{},typeof n=="string"?Eq(n):e.long?Mq(n):Iq(n)};function Eq(n){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(n);if(e){var t=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return t*Sq;case"days":case"day":case"d":return t*op;case"hours":case"hour":case"h":return t*sp;case"minutes":case"minute":case"m":return t*rp;case"seconds":case"second":case"s":return t*ip;case"ms":return t}}}function Iq(n){return n>=op?Math.round(n/op)+"d":n>=sp?Math.round(n/sp)+"h":n>=rp?Math.round(n/rp)+"m":n>=ip?Math.round(n/ip)+"s":n+"ms"}function Mq(n){return nv(n,op,"day")||nv(n,sp,"hour")||nv(n,rp,"minute")||nv(n,ip,"second")||n+" ms"}function nv(n,e,t){if(!(n<e))return n<e*1.5?Math.floor(n/e)+" "+t:Math.ceil(n/e)+" "+t+"s"}});var PN=bt((sn,kN)=>{sn=kN.exports=Dq;sn.coerce=kq;sn.disable=Lq;sn.enable=Rq;sn.enabled=Bq;sn.humanize=BN();sn.names=[];sn.skips=[];sn.formatters={};var Tq=0,e2;function _q(){return sn.colors[Tq++%sn.colors.length]}function Dq(n){function e(){}e.enabled=!1;function t(){var o=t,a=+new Date,l=a-(e2||a);o.diff=l,o.prev=e2,o.curr=a,e2=a,o.useColors==null&&(o.useColors=sn.useColors()),o.color==null&&o.useColors&&(o.color=_q());var c=Array.prototype.slice.call(arguments);c[0]=sn.coerce(c[0]),typeof c[0]!="string"&&(c=["%o"].concat(c));var u=0;c[0]=c[0].replace(/%([a-z%])/g,function(A,f){if(A==="%%")return A;u++;var d=sn.formatters[f];if(typeof d=="function"){var p=c[u];A=d.call(o,p),c.splice(u,1),u--}return A}),typeof sn.formatArgs=="function"&&(c=sn.formatArgs.apply(o,c));var h=t.log||sn.log||console.log.bind(console);h.apply(o,c)}t.enabled=!0;var i=sn.enabled(n)?t:e;return i.namespace=n,i}function Rq(n){sn.save(n);for(var e=(n||"").split(/[\s,]+/),t=e.length,i=0;i<t;i++)e[i]&&(n=e[i].replace(/\*/g,".*?"),n[0]==="-"?sn.skips.push(new RegExp("^"+n.substr(1)+"$")):sn.names.push(new RegExp("^"+n+"$")))}function Lq(){sn.enable("")}function Bq(n){var e,t;for(e=0,t=sn.skips.length;e<t;e++)if(sn.skips[e].test(n))return!1;for(e=0,t=sn.names.length;e<t;e++)if(sn.names[e].test(n))return!0;return!1}function kq(n){return n instanceof Error?n.stack||n.message:n}});var UN=bt((Vs,FN)=>{Vs=FN.exports=PN();Vs.log=Fq;Vs.formatArgs=Nq;Vs.save=Uq;Vs.load=NN;Vs.useColors=Pq;var ap;typeof chrome<"u"&&typeof chrome.storage<"u"?ap=chrome.storage.local:ap=window.localStorage;Vs.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function Pq(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}Vs.formatters.j=function(n){return JSON.stringify(n)};function Nq(){var n=arguments,e=this.useColors;if(n[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+n[0]+(e?"%c ":" ")+"+"+Vs.humanize(this.diff),!e)return n;var t="color: "+this.color;n=[n[0],t,"color: inherit"].concat(Array.prototype.slice.call(n,1));var i=0,o=0;return n[0].replace(/%[a-z%]/g,function(a){a!=="%%"&&(i++,a==="%c"&&(o=i))}),n.splice(o,0,t),n}function Fq(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function Uq(n){try{n==null?ap.removeItem("debug"):ap.debug=n}catch{}}function NN(){var n;try{n=ap.debug}catch{}return n}Vs.enable(NN())});var i2=bt((ON,QN)=>{var Oq=wN(),n2=RN().EventEmitter,Kc=UN()("observed");QN.exports=ON=$i;function $i(n,e,t){if(typeof n!="object")throw new TypeError("object expected. got: "+typeof n);if(!(this instanceof $i))return new $i(n,e,t);Kc("new",n,!!e,t),n2.call(this),this._bind(n,e,t)}for(t2 in n2.prototype)$i.prototype[t2]=n2.prototype[t2];var t2;$i.prototype.observers=void 0;$i.prototype.onchange=void 0;$i.prototype.subject=void 0;$i.prototype._bind=function(n,e,t){if(this.subject)throw new Error("already bound!");if(n==null)throw new TypeError("subject cannot be null");Kc("_bind",n),this.subject=n,e?e.observers.push(this):this.observers=[this],this.onchange=Qq(e||this,t),Object.observe(this.subject,this.onchange),this._walk(e||this,t)};$i.prototype.deliverChanges=function(){Kc("deliverChanges"),this.observers.forEach(function(n){Object.deliverChangeRecords(n.onchange)})};$i.prototype._walk=function(n,e){Kc("_walk");var t=this.subject;Object.keys(t).forEach(function(i){var o=t[i];if(typeof o=="object"&&o!=null){var a=e?e+"."+i:i;new $i(o,n,a)}})};$i.prototype.stop=function(){Kc("stop"),this.observers.forEach(function(n){Object.unobserve(n.subject,n.onchange)})};$i.prototype._remove=function(n){Kc("_remove",n),this.observers=this.observers.filter(function(e){return n==e.subject?(Object.unobserve(e.subject,e.onchange),!1):!0})};function Qq(n,e){return function(t){Kc("onchange",e),t.forEach(function(i){var o=i.object,a=i.type,l=i.name,c=o[l],u=e?e+"."+l:l;a=="add"&&c!=null&&typeof c=="object"?new $i(c,n,u):a=="delete"&&typeof i.oldValue=="object"?n._remove(i.oldValue):a=="update"&&i.oldValue!=c&&(typeof i.oldValue=="object"&&n._remove(i.oldValue),typeof c=="object"&&new $i(c,n,u)),i=new Oq(u,i),n.emit(a,i),n.emit(a+" "+u,i),n.emit("change",i),n.emit("change "+u,i)})}}});var zG=bt(qs=>{"use strict";if(Object.defineProperty(qs,"__esModule",{value:!0}),window.TextEncoder===void 0){window.TextEncoder=function(){},TextEncoder.prototype.encode=function(n){for(var e=n.length,t=-1,i=typeof Uint8Array>"u"?new Array(1.5*e):new Uint8Array(3*e),o=0,a=0,l=0;l!==e;){if(o=n.charCodeAt(l),l+=1,o>=55296&&o<=56319){if(l===e){i[t+=1]=239,i[t+=1]=191,i[t+=1]=189;break}if(!((a=n.charCodeAt(l))>=56320&&a<=57343)){i[t+=1]=239,i[t+=1]=191,i[t+=1]=189;continue}if(l+=1,(o=1024*(o-55296)+a-56320+65536)>65535){i[t+=1]=240|o>>>18,i[t+=1]=128|o>>>12&63,i[t+=1]=128|o>>>6&63,i[t+=1]=128|63&o;continue}}o<=127?i[t+=1]=0|o:o<=2047?(i[t+=1]=192|o>>>6,i[t+=1]=128|63&o):(i[t+=1]=224|o>>>12,i[t+=1]=128|o>>>6&63,i[t+=1]=128|63&o)}return typeof Uint8Array<"u"?i.subarray(0,t+1):(i.length=t+1,i)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch{TextEncoder.prototype.encoding="utf-8"}typeof Symbol<"u"&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function SQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function Yn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SQ(Object(t),!0).forEach(function(i){gre(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function $t(n){return($t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function EQ(n,e,t,i,o,a,l){try{var c=n[a](l),u=c.value}catch(h){return void t(h)}c.done?e(u):Promise.resolve(u).then(i,o)}function an(n){return function(){var e=this,t=arguments;return new Promise(function(i,o){var a=n.apply(e,t);function l(u){EQ(a,i,o,l,c,"next",u)}function c(u){EQ(a,i,o,l,c,"throw",u)}l(void 0)})}}function ti(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function IQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ui(n,e,t){return e&&IQ(n.prototype,e),t&&IQ(n,t),n}function gre(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ww(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&Xw(n,e)}function UA(n){return(UA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(n)}function Xw(n,e){return(Xw=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(n,e)}function F4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function br(n,e,t){return(br=F4()?Reflect.construct:function(i,o,a){var l=[null];l.push.apply(l,o);var c=new(Function.bind.apply(i,l));return a&&Xw(c,a.prototype),c}).apply(null,arguments)}function U4(n){var e=typeof Map=="function"?new Map:void 0;return(U4=function(t){if(t===null||(i=t,Function.toString.call(i).indexOf("[native code]")===-1))return t;var i;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return br(t,arguments,UA(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Xw(o,t)})(n)}function yre(n,e){if(n==null)return{};var t,i,o=function(l,c){if(l==null)return{};var u,h,A={},f=Object.keys(l);for(h=0;h<f.length;h++)u=f[h],c.indexOf(u)>=0||(A[u]=l[u]);return A}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function vre(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}function Yw(n){var e=F4();return function(){var t,i=UA(n);if(e){var o=UA(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return vre(this,t)}}function O4(n,e,t){return(O4=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,a){var l=function(u,h){for(;!Object.prototype.hasOwnProperty.call(u,h)&&(u=UA(u))!==null;);return u}(i,o);if(l){var c=Object.getOwnPropertyDescriptor(l,o);return c.get?c.get.call(a):c.value}})(n,e,t||n)}function Qt(n,e){return Q4(n)||function(t,i){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var a,l,c=[],u=!0,h=!1;try{for(o=o.call(t);!(u=(a=o.next()).done)&&(c.push(a.value),!i||c.length!==i);u=!0);}catch(A){h=!0,l=A}finally{try{u||o.return==null||o.return()}finally{if(h)throw l}}return c}}(n,e)||Zw(n,e)||z4()}function wre(n){return Q4(n)||G4(n)||Zw(n)||z4()}function Kt(n){return function(e){if(Array.isArray(e))return O_(e)}(n)||G4(n)||Zw(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Q4(n){if(Array.isArray(n))return n}function G4(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Zw(n,e){if(n){if(typeof n=="string")return O_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O_(n,e):void 0}}function O_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function z4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Zw(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var i=0,o=function(){};return{s:o,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,l=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return l=u.done,u},e:function(u){c=!0,a=u},f:function(){try{l||t.return==null||t.return()}finally{if(c)throw a}}}}var Em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(n){var e=function(t){var i,o=Object.prototype,a=o.hasOwnProperty,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function A(V,G,O){return Object.defineProperty(V,G,{value:O,enumerable:!0,configurable:!0,writable:!0}),V[G]}try{A({},"")}catch{A=function(G,O,W){return G[O]=W}}function f(V,G,O,W){var k=G&&G.prototype instanceof I?G:I,Y=Object.create(k.prototype),te=new F(W||[]);return Y._invoke=function(ie,re,se){var oe=p;return function(le,xe){if(oe===b)throw new Error("Generator is already running");if(oe===g){if(le==="throw")throw xe;return Q()}for(se.method=le,se.arg=xe;;){var _e=se.delegate;if(_e){var pe=R(_e,se);if(pe){if(pe===w)continue;return pe}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(oe===p)throw oe=g,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);oe=b;var K=d(ie,re,se);if(K.type==="normal"){if(oe=se.done?g:m,K.arg===w)continue;return{value:K.arg,done:se.done}}K.type==="throw"&&(oe=g,se.method="throw",se.arg=K.arg)}}}(V,O,te),Y}function d(V,G,O){try{return{type:"normal",arg:V.call(G,O)}}catch(W){return{type:"throw",arg:W}}}t.wrap=f;var p="suspendedStart",m="suspendedYield",b="executing",g="completed",w={};function I(){}function v(){}function C(){}var E={};A(E,c,function(){return this});var S=Object.getPrototypeOf,M=S&&S(S(z([])));M&&M!==o&&a.call(M,c)&&(E=M);var _=C.prototype=I.prototype=Object.create(E);function T(V){["next","throw","return"].forEach(function(G){A(V,G,function(O){return this._invoke(G,O)})})}function D(V,G){function O(k,Y,te,ie){var re=d(V[k],V,Y);if(re.type!=="throw"){var se=re.arg,oe=se.value;return oe&&$t(oe)==="object"&&a.call(oe,"__await")?G.resolve(oe.__await).then(function(le){O("next",le,te,ie)},function(le){O("throw",le,te,ie)}):G.resolve(oe).then(function(le){se.value=le,te(se)},function(le){return O("throw",le,te,ie)})}ie(re.arg)}var W;this._invoke=function(k,Y){function te(){return new G(function(ie,re){O(k,Y,ie,re)})}return W=W?W.then(te,te):te()}}function R(V,G){var O=V.iterator[G.method];if(O===i){if(G.delegate=null,G.method==="throw"){if(V.iterator.return&&(G.method="return",G.arg=i,R(V,G),G.method==="throw"))return w;G.method="throw",G.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var W=d(O,V.iterator,G.arg);if(W.type==="throw")return G.method="throw",G.arg=W.arg,G.delegate=null,w;var k=W.arg;return k?k.done?(G[V.resultName]=k.value,G.next=V.nextLoc,G.method!=="return"&&(G.method="next",G.arg=i),G.delegate=null,w):k:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,w)}function B(V){var G={tryLoc:V[0]};1 in V&&(G.catchLoc=V[1]),2 in V&&(G.finallyLoc=V[2],G.afterLoc=V[3]),this.tryEntries.push(G)}function P(V){var G=V.completion||{};G.type="normal",delete G.arg,V.completion=G}function F(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(B,this),this.reset(!0)}function z(V){if(V){var G=V[c];if(G)return G.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var O=-1,W=function k(){for(;++O<V.length;)if(a.call(V,O))return k.value=V[O],k.done=!1,k;return k.value=i,k.done=!0,k};return W.next=W}}return{next:Q}}function Q(){return{value:i,done:!0}}return v.prototype=C,A(_,"constructor",C),A(C,"constructor",v),v.displayName=A(C,h,"GeneratorFunction"),t.isGeneratorFunction=function(V){var G=typeof V=="function"&&V.constructor;return!!G&&(G===v||(G.displayName||G.name)==="GeneratorFunction")},t.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,C):(V.__proto__=C,A(V,h,"GeneratorFunction")),V.prototype=Object.create(_),V},t.awrap=function(V){return{__await:V}},T(D.prototype),A(D.prototype,u,function(){return this}),t.AsyncIterator=D,t.async=function(V,G,O,W,k){k===void 0&&(k=Promise);var Y=new D(f(V,G,O,W),k);return t.isGeneratorFunction(G)?Y:Y.next().then(function(te){return te.done?te.value:Y.next()})},T(_),A(_,h,"Generator"),A(_,c,function(){return this}),A(_,"toString",function(){return"[object Generator]"}),t.keys=function(V){var G=[];for(var O in V)G.push(O);return G.reverse(),function W(){for(;G.length;){var k=G.pop();if(k in V)return W.value=k,W.done=!1,W}return W.done=!0,W}},t.values=z,F.prototype={constructor:F,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(P),!V)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=i)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var G=this;function O(re,se){return Y.type="throw",Y.arg=V,G.next=re,se&&(G.method="next",G.arg=i),!!se}for(var W=this.tryEntries.length-1;W>=0;--W){var k=this.tryEntries[W],Y=k.completion;if(k.tryLoc==="root")return O("end");if(k.tryLoc<=this.prev){var te=a.call(k,"catchLoc"),ie=a.call(k,"finallyLoc");if(te&&ie){if(this.prev<k.catchLoc)return O(k.catchLoc,!0);if(this.prev<k.finallyLoc)return O(k.finallyLoc)}else if(te){if(this.prev<k.catchLoc)return O(k.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return O(k.finallyLoc)}}}},abrupt:function(V,G){for(var O=this.tryEntries.length-1;O>=0;--O){var W=this.tryEntries[O];if(W.tryLoc<=this.prev&&a.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var k=W;break}}k&&(V==="break"||V==="continue")&&k.tryLoc<=G&&G<=k.finallyLoc&&(k=null);var Y=k?k.completion:{};return Y.type=V,Y.arg=G,k?(this.method="next",this.next=k.finallyLoc,w):this.complete(Y)},complete:function(V,G){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&G&&(this.next=G),w},finish:function(V){for(var G=this.tryEntries.length-1;G>=0;--G){var O=this.tryEntries[G];if(O.finallyLoc===V)return this.complete(O.completion,O.afterLoc),P(O),w}},catch:function(V){for(var G=this.tryEntries.length-1;G>=0;--G){var O=this.tryEntries[G];if(O.tryLoc===V){var W=O.completion;if(W.type==="throw"){var k=W.arg;P(O)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(V,G,O){return this.delegate={iterator:z(V),resultName:G,nextLoc:O},this.method==="next"&&(this.arg=i),w}},t}(n.exports);try{globalThis.regeneratorRuntime=e}catch{(typeof globalThis>"u"?"undefined":$t(globalThis))==="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})({exports:{}});var mw=window.location.hostname.endsWith("croquet.studio"),MQ="",RA="";function TQ(n,e){if(e){var t,i=Xt(e.split("&"));try{for(i.s();!(t=i.n()).done;){var o=t.value.split("="),a=o[0],l=!0;if(o.length>1&&(l=decodeURIComponent(o.slice(1).join("="))).match(/^(true|false|null|[0-9.]*|["[{].*)$/))try{l=JSON.parse(l)}catch{l[0]==="["&&(l=l.slice(1,-1).split(","))}n[a]=l}}catch(c){i.e(c)}finally{i.f()}}}var _Q,gt=new(function(){function n(){ti(this,n),this.getSession(),TQ(this,window.location.search.slice(1)),TQ(this,mw?window.location.hash.slice(1):RA),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}return ui(n,[{key:"has",value:function(e,t,i){typeof i!="boolean"&&(i=this.isHost(i));var o=this[e];if(typeof o!="string")return i;var a=o.split(",");return i===!0&&(t="no".concat(t)),t.endsWith("s")&&(t=t.slice(0,-1)),a.includes(t)||a.includes("".concat(t,"s"))?!i:i}},{key:"getSession",value:function(){if(mw){var e=window.location.pathname.match(/^\/([^/]+)\/(.*)$/);if(e)return MQ=e[1],e[2]}else{var t=window.location.hash.match(/^#([^&]+)&?(.*)$/);if(t)return t[1].includes("=")?(RA="".concat(t[1],"&").concat(t[2]),""):(RA=t[2],t[1])}return typeof this.session=="string"?(RA=window.location.hash.slice(1),this.session):""}},{key:"setSession",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];mw==null&&this.getSession();var i=window.location,o=i.search,a=i.hash,l=mw?"/".concat(MQ,"/").concat(e).concat(o).concat(a):"#".concat(e).concat(RA?"&"+RA:"");t?window.history.replaceState({},"",l):window.history.pushState({},"",l)}},{key:"isHost",value:function(e){var t=window.location.hostname;return t===e?!0:e!=="localhost"?!1:t.endsWith(".ngrok.io")||t==="croquet.io"&&window.location.pathname.match(/^\/(dev|files)\//)?!0:["127.0.0.1","[::1]"].includes(t)}},{key:"isLocalhost",value:function(){return this.isHost("localhost")}}]),n}()),xu=function(n,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t,i=typeof e.cycles=="boolean"&&e.cycles,o=e.cmp&&(t=e.cmp,function(l){return function(c,u){var h={key:c,value:l[c]},A={key:u,value:l[u]};return t(h,A)}}),a=[];return function l(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if($t(c)!=="object")return JSON.stringify(c);var u,h;if(Array.isArray(c)){for(h="[",u=0;u<c.length;u++)u&&(h+=","),h+=l(c[u])||"null";return h+"]"}if(c===null)return"null";if(a.indexOf(c)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var A=a.push(c)-1,f=Object.keys(c).sort(o&&o(c));for(h="",u=0;u<f.length;u++){var d=f[u],p=l(c[d]);p&&(h&&(h+=","),h+=JSON.stringify(d)+":"+p)}return a.splice(A,1),"{"+h+"}"}}(n)},bre={exports:{}},$r={exports:{}};$r.exports=_Q=_Q||function(n,e){var t;if(typeof window<"u"&&window.crypto&&(t=window.crypto),typeof self<"u"&&self.crypto&&(t=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(t=globalThis.crypto),!t&&typeof window<"u"&&window.msCrypto&&(t=window.msCrypto),!t&&Em!==void 0&&Em.crypto&&(t=Em.crypto),!t)try{t=Yi("crypto")}catch{}var i=function(){if(t){if(typeof t.getRandomValues=="function")try{return t.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof t.randomBytes=="function")try{return t.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function b(){}return function(g){var w;return b.prototype=g,w=new b,b.prototype=null,w}}(),a={},l=a.lib={},c=l.Base={extend:function(b){var g=o(this);return b&&g.mixIn(b),g.hasOwnProperty("init")&&this.init!==g.init||(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var g in b)b.hasOwnProperty(g)&&(this[g]=b[g]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},u=l.WordArray=c.extend({init:function(b,g){b=this.words=b||[],this.sigBytes=g!=e?g:4*b.length},toString:function(b){return(b||A).stringify(this)},concat:function(b){var g=this.words,w=b.words,I=this.sigBytes,v=b.sigBytes;if(this.clamp(),I%4)for(var C=0;C<v;C++){var E=w[C>>>2]>>>24-C%4*8&255;g[I+C>>>2]|=E<<24-(I+C)%4*8}else for(var S=0;S<v;S+=4)g[I+S>>>2]=w[S>>>2];return this.sigBytes+=v,this},clamp:function(){var b=this.words,g=this.sigBytes;b[g>>>2]&=4294967295<<32-g%4*8,b.length=n.ceil(g/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var g=[],w=0;w<b;w+=4)g.push(i());return new u.init(g,b)}}),h=a.enc={},A=h.Hex={stringify:function(b){for(var g=b.words,w=b.sigBytes,I=[],v=0;v<w;v++){var C=g[v>>>2]>>>24-v%4*8&255;I.push((C>>>4).toString(16)),I.push((15&C).toString(16))}return I.join("")},parse:function(b){for(var g=b.length,w=[],I=0;I<g;I+=2)w[I>>>3]|=parseInt(b.substr(I,2),16)<<24-I%8*4;return new u.init(w,g/2)}},f=h.Latin1={stringify:function(b){for(var g=b.words,w=b.sigBytes,I=[],v=0;v<w;v++){var C=g[v>>>2]>>>24-v%4*8&255;I.push(String.fromCharCode(C))}return I.join("")},parse:function(b){for(var g=b.length,w=[],I=0;I<g;I++)w[I>>>2]|=(255&b.charCodeAt(I))<<24-I%4*8;return new u.init(w,g)}},d=h.Utf8={stringify:function(b){try{return decodeURIComponent(escape(f.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return f.parse(unescape(encodeURIComponent(b)))}},p=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=d.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var g,w=this._data,I=w.words,v=w.sigBytes,C=this.blockSize,E=v/(4*C),S=(E=b?n.ceil(E):n.max((0|E)-this._minBufferSize,0))*C,M=n.min(4*S,v);if(S){for(var _=0;_<S;_+=C)this._doProcessBlock(I,_);g=I.splice(0,S),w.sigBytes-=M}return new u.init(g,M)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=p.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){return b&&this._append(b),this._doFinalize()},blockSize:16,_createHelper:function(b){return function(g,w){return new b.init(w).finalize(g)}},_createHmacHelper:function(b){return function(g,w){return new m.HMAC.init(b,w).finalize(g)}}});var m=a.algo={};return a}(Math);var H4,gu=bre.exports=function(n){return function(){if(typeof ArrayBuffer=="function"){var e=n.lib.WordArray,t=e.init;(e.init=function(i){if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||typeof Uint8ClampedArray<"u"&&i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){for(var o=i.byteLength,a=[],l=0;l<o;l++)a[l>>>2]|=i[l]<<24-l%4*8;t.call(this,a,o)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray}($r.exports),xre={exports:{}},V4=xre.exports=function(n){return function(e){var t=n,i=t.lib,o=i.WordArray,a=i.Hasher,l=t.algo,c=[],u=[];(function(){function f(b){for(var g=e.sqrt(b),w=2;w<=g;w++)if(!(b%w))return!1;return!0}function d(b){return 4294967296*(b-(0|b))|0}for(var p=2,m=0;m<64;)f(p)&&(m<8&&(c[m]=d(e.pow(p,.5))),u[m]=d(e.pow(p,1/3)),m++),p++})();var h=[],A=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(f,d){for(var p=this._hash.words,m=p[0],b=p[1],g=p[2],w=p[3],I=p[4],v=p[5],C=p[6],E=p[7],S=0;S<64;S++){if(S<16)h[S]=0|f[d+S];else{var M=h[S-15],_=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,T=h[S-2],D=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;h[S]=_+h[S-7]+D+h[S-16]}var R=m&b^m&g^b&g,B=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),P=E+((I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25))+(I&v^~I&C)+u[S]+h[S];E=C,C=v,v=I,I=w+P|0,w=g,g=b,b=m,m=P+(B+R)|0}p[0]=p[0]+m|0,p[1]=p[1]+b|0,p[2]=p[2]+g|0,p[3]=p[3]+w|0,p[4]=p[4]+I|0,p[5]=p[5]+v|0,p[6]=p[6]+C|0,p[7]=p[7]+E|0},_doFinalize:function(){var f=this._data,d=f.words,p=8*this._nDataBytes,m=8*f.sigBytes;return d[m>>>5]|=128<<24-m%32,d[14+(m+64>>>9<<4)]=e.floor(p/4294967296),d[15+(m+64>>>9<<4)]=p,f.sigBytes=4*d.length,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});t.SHA256=a._createHelper(A),t.HmacSHA256=a._createHmacHelper(A)}(Math),n.SHA256}($r.exports),Cre=["hashOverride"];function W4(n){for(var e=n.sigBytes,t=n.words,i=new Uint8Array(e),o=0,a=0;o<e;){var l=t[a++];if(i[o++]=(4278190080&l)>>>24,o===e||(i[o++]=(16711680&l)>>>16,o===e)||(i[o++]=(65280&l)>>>8,o===e))break;i[o++]=255&l}return i}function X4(n){function e(o){var a=o.indexOf("{"),l=o.lastIndexOf("}");if(a===-1||l===-1||l<a)return o;var c=o.slice(0,a).replace(/\s+/g," ").replace(/\s\(/,"("),u=o.slice(a+1,l);return"".concat(c.trim(),"{").concat(u.trim(),"}")}var t=e(""+n);if(!t.startsWith("class")){var i=n.prototype;i&&(t+=Object.getOwnPropertyNames(i).map(function(o){return"".concat(o,":").concat(e(""+i[o]))}).join(""))}return t}function Y4(n){return btoa(String.fromCharCode.apply(String,Kt(new Uint8Array(n)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sre(n){return Z4.apply(this,arguments)}function Z4(){return(Z4=an(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e.length!==0){i.next=2;break}return i.abrupt("return","47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU");case 2:return i.next=4,H4("SHA-256",e);case 4:return t=i.sent,i.abrupt("return",Y4(t));case 6:case"end":return i.stop()}},n)}))).apply(this,arguments)}function Kw(){return gt.has("debug","hashing",!1)}H4=window.crypto&&window.crypto.subtle&&typeof window.crypto.subtle.digest=="function"?window.crypto.subtle.digest.bind(window.crypto.subtle):function(n,e){if(n!=="SHA-256")throw Error("Croquet: only SHA-256 available");var t=gu.create(e);return W4(V4(t)).buffer};var La={},Ere=new TextEncoder;function OA(n){return K4.apply(this,arguments)}function K4(){return(K4=an(regeneratorRuntime.mark(function n(e){var t,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=Ere.encode(e),o.next=3,Sre(t);case 3:return i=o.sent,Kw()&&(La[i]={string:e,buffer:t}),o.abrupt("return",i);case 6:case"end":return o.stop()}},n)}))).apply(this,arguments)}var $_=[],DQ={};function Ire(n,e){return j4.apply(this,arguments)}function j4(){return(j4=an(regeneratorRuntime.mark(function n(e,t){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",OA(e+xu(t)));case 1:case"end":return i.stop()}},n)}))).apply(this,arguments)}var RQ=new Set;function Mre(n,e,t,i){return J4.apply(this,arguments)}function J4(){return(J4=an(regeneratorRuntime.mark(function n(e,t,i,o){var a,l,c,u,h,A,f,d,p;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c=DQ[e],u="",!c){m.next=8;break}a=c.codeHashes,l=c.computedCodeHash,u=" (code hashing from cache)",m.next=15;break;case 8:return m.next=10,Promise.all($_);case 10:return a=m.sent,m.next=13,OA([o].concat(Kt(a)).join("|"));case 13:l=m.sent,DQ[e]={codeHashes:a,computedCodeHash:l};case 15:return h=i.hashOverride,A=yre(i,Cre),f=h||l,m.next=19,OA(e+"|"+t+xu(A)+f);case 19:return d=m.sent,Kw()&&!RQ.has(d)&&(Kt(document.getElementsByTagName("meta")).find(function(b){return b.getAttribute("charset")})||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),La[l].what="Version ID",La[e].what="Persistent ID",La[d].what="Session ID",f!==l&&(a.push(l),La[l].what="Computed Version ID (replaced by overrideHash)",La[f]={what:"Version ID (as specified by overrideHash)"}),p=[].concat(Kt(a),[f,e,d]).map(function(b){return Yn({hash:b},La[b])}),console.log("Croquet: Debug Hashing for session ".concat(d).concat(u),p),RQ.add(d)),m.abrupt("return",{id:d,persistentId:e,codeHash:f,computedCodeHash:l});case 22:case"end":return m.stop()}},n)}))).apply(this,arguments)}var LQ,BQ,t_,q4={exports:{}};BQ=Em,t_=function(n){var e=function o(a){return new o.lib.init(a)};function t(o,a){return a.offset[o]?isNaN(a.offset[o])?a.offset[o]:a.offset[o]+"px":"0px"}function i(o,a){return!(!o||typeof a!="string"||!(o.className&&o.className.trim().split(/\s+/gi).indexOf(a)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},e.lib=e.prototype={toastify:"1.11.2",constructor:e,init:function(o){return o||(o={}),this.options={},this.toastElement=null,this.options.text=o.text||e.defaults.text,this.options.node=o.node||e.defaults.node,this.options.duration=o.duration===0?0:o.duration||e.defaults.duration,this.options.selector=o.selector||e.defaults.selector,this.options.callback=o.callback||e.defaults.callback,this.options.destination=o.destination||e.defaults.destination,this.options.newWindow=o.newWindow||e.defaults.newWindow,this.options.close=o.close||e.defaults.close,this.options.gravity=o.gravity==="bottom"?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=o.positionLeft||e.defaults.positionLeft,this.options.position=o.position||e.defaults.position,this.options.backgroundColor=o.backgroundColor||e.defaults.backgroundColor,this.options.avatar=o.avatar||e.defaults.avatar,this.options.className=o.className||e.defaults.className,this.options.stopOnFocus=o.stopOnFocus===void 0?e.defaults.stopOnFocus:o.stopOnFocus,this.options.onClick=o.onClick||e.defaults.onClick,this.options.offset=o.offset||e.defaults.offset,this.options.escapeMarkup=o.escapeMarkup!==void 0?o.escapeMarkup:e.defaults.escapeMarkup,this.options.style=o.style||e.defaults.style,o.backgroundColor&&(this.options.style.background=o.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var o=document.createElement("div");for(var a in o.className="toastify on "+this.options.className,this.options.position?o.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(o.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):o.className+=" toastify-right",o.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)o.style[a]=this.options.style[a];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)o.appendChild(this.options.node);else if(this.options.escapeMarkup?o.innerText=this.options.text:o.innerHTML=this.options.text,this.options.avatar!==""){var l=document.createElement("img");l.src=this.options.avatar,l.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?o.appendChild(l):o.insertAdjacentElement("afterbegin",l)}if(this.options.close===!0){var c=document.createElement("span");c.innerHTML="&#10006;",c.className="toast-close",c.addEventListener("click",function(m){m.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var u=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&u>360?o.insertAdjacentElement("afterbegin",c):o.appendChild(c)}if(this.options.stopOnFocus&&this.options.duration>0){var h=this;o.addEventListener("mouseover",function(m){window.clearTimeout(o.timeOutValue)}),o.addEventListener("mouseleave",function(){o.timeOutValue=window.setTimeout(function(){h.removeElement(o)},h.options.duration)})}if(this.options.destination!==void 0&&o.addEventListener("click",function(m){m.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),typeof this.options.onClick=="function"&&this.options.destination===void 0&&o.addEventListener("click",function(m){m.stopPropagation(),this.options.onClick()}.bind(this)),$t(this.options.offset)==="object"){var A=t("x",this.options),f=t("y",this.options),d=this.options.position=="left"?A:"-"+A,p=this.options.gravity=="toastify-top"?f:"-"+f;o.style.transform="translate("+d+","+p+")"}return o},showToast:function(){var o;if(this.toastElement=this.buildToast(),!(o=typeof this.options.selector=="string"?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var a=e.defaults.oldestFirst?o.firstChild:o.lastChild;return o.insertBefore(this.toastElement,a),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(o){o.className=o.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),o.parentNode&&o.parentNode.removeChild(o),this.options.callback.call(o),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var o,a={top:15,bottom:15},l={top:15,bottom:15},c={top:15,bottom:15},u=document.getElementsByClassName("toastify"),h=0;h<u.length;h++){o=i(u[h],"toastify-top")===!0?"toastify-top":"toastify-bottom";var A=u[h].offsetHeight;o=o.substr(9,o.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(u[h].style[o]=c[o]+"px",c[o]+=A+15):i(u[h],"toastify-left")===!0?(u[h].style[o]=a[o]+"px",a[o]+=A+15):(u[h].style[o]=l[o]+"px",l[o]+=A+15)}return this},e.lib.init.prototype=e.lib,e},(LQ=q4).exports?LQ.exports=t_():BQ.Toastify=t_();var Tre=q4.exports,$4={exports:{}};(function(n){(function(e,t,i){var o,a=256,l=i.pow(a,6),c=i.pow(2,52),u=2*c,h=255;function A(g,w,I){var v=[],C=m(p((w=w==1?{entropy:!0}:w||{}).entropy?[g,b(t)]:g??function(){try{var M;return o&&(M=o.randomBytes)?M=M(a):(M=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(M)),b(M)}catch{var _=e.navigator,T=_&&_.plugins;return[+new Date,e,T,e.screen,b(t)]}}(),3),v),E=new f(v),S=function(){for(var M=E.g(6),_=l,T=0;M<c;)M=(M+T)*a,_*=a,T=E.g(1);for(;M>=u;)M/=2,_/=2,T>>>=1;return(M+T)/_};return S.int32=function(){return 0|E.g(4)},S.quick=function(){return E.g(4)/4294967296},S.double=S,m(b(E.S),t),(w.pass||I||function(M,_,T,D){return D&&(D.S&&d(D,E),M.state=function(){return d(E,{})}),T?(i.random=M,_):M})(S,C,"global"in w?w.global:this==i,w.state)}function f(g){var w,I=g.length,v=this,C=0,E=v.i=v.j=0,S=v.S=[];for(I||(g=[I++]);C<a;)S[C]=C++;for(C=0;C<a;C++)S[C]=S[E=h&E+g[C%I]+(w=S[C])],S[E]=w;(v.g=function(M){for(var _,T=0,D=v.i,R=v.j,B=v.S;M--;)_=B[D=h&D+1],T=T*a+B[h&(B[D]=B[R=h&R+_])+(B[R]=_)];return v.i=D,v.j=R,T})(a)}function d(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function p(g,w){var I,v=[],C=$t(g);if(w&&C=="object")for(I in g)try{v.push(p(g[I],w-1))}catch{}return v.length?v:C=="string"?g:g+"\0"}function m(g,w){for(var I,v=g+"",C=0;C<v.length;)w[h&C]=h&(I^=19*w[h&C])+v.charCodeAt(C++);return b(w)}function b(g){return String.fromCharCode.apply(0,g)}if(m(i.random(),t),n.exports){n.exports=A;try{o=Yi("crypto")}catch{}}else i.seedrandom=A})(typeof self<"u"?self:Em,[],Math)})($4);var wm,Ow=$4.exports;(function(){function n(E){this.mode=t.MODE_8BIT_BYTE,this.data=E,this.parsedData=[];for(var S=0,M=this.data.length;S<M;S++){var _=[],T=this.data.charCodeAt(S);T>65536?(_[0]=240|(1835008&T)>>>18,_[1]=128|(258048&T)>>>12,_[2]=128|(4032&T)>>>6,_[3]=128|63&T):T>2048?(_[0]=224|(61440&T)>>>12,_[1]=128|(4032&T)>>>6,_[2]=128|63&T):T>128?(_[0]=192|(1984&T)>>>6,_[1]=128|63&T):_[0]=T,this.parsedData.push(_)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(E,S){this.typeNumber=E,this.errorCorrectLevel=S,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}n.prototype={getLength:function(E){return this.parsedData.length},write:function(E){for(var S=0,M=this.parsedData.length;S<M;S++)E.put(this.parsedData[S],8)}},e.prototype={addData:function(E){var S=new n(E);this.dataList.push(S),this.dataCache=null},isDark:function(E,S){if(E<0||this.moduleCount<=E||S<0||this.moduleCount<=S)throw new Error(E+","+S);return this.modules[E][S]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(E,S){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var M=0;M<this.moduleCount;M++){this.modules[M]=new Array(this.moduleCount);for(var _=0;_<this.moduleCount;_++)this.modules[M][_]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(E,S),this.typeNumber>=7&&this.setupTypeNumber(E),this.dataCache==null&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,S)},setupPositionProbePattern:function(E,S){for(var M=-1;M<=7;M++)if(!(E+M<=-1||this.moduleCount<=E+M))for(var _=-1;_<=7;_++)S+_<=-1||this.moduleCount<=S+_||(this.modules[E+M][S+_]=0<=M&&M<=6&&(_==0||_==6)||0<=_&&_<=6&&(M==0||M==6)||2<=M&&M<=4&&2<=_&&_<=4)},getBestMaskPattern:function(){for(var E=0,S=0,M=0;M<8;M++){this.makeImpl(!0,M);var _=d.getLostPoint(this);(M==0||E>_)&&(E=_,S=M)}return S},createMovieClip:function(E,S,M){var _=E.createEmptyMovieClip(S,M);this.make();for(var T=0;T<this.modules.length;T++)for(var D=1*T,R=0;R<this.modules[T].length;R++){var B=1*R;this.modules[T][R]&&(_.beginFill(0,100),_.moveTo(B,D),_.lineTo(B+1,D),_.lineTo(B+1,D+1),_.lineTo(B,D+1),_.endFill())}return _},setupTimingPattern:function(){for(var E=8;E<this.moduleCount-8;E++)this.modules[E][6]==null&&(this.modules[E][6]=E%2==0);for(var S=8;S<this.moduleCount-8;S++)this.modules[6][S]==null&&(this.modules[6][S]=S%2==0)},setupPositionAdjustPattern:function(){for(var E=d.getPatternPosition(this.typeNumber),S=0;S<E.length;S++)for(var M=0;M<E.length;M++){var _=E[S],T=E[M];if(this.modules[_][T]==null)for(var D=-2;D<=2;D++)for(var R=-2;R<=2;R++)this.modules[_+D][T+R]=D==-2||D==2||R==-2||R==2||D==0&&R==0}},setupTypeNumber:function(E){for(var S=d.getBCHTypeNumber(this.typeNumber),M=0;M<18;M++){var _=!E&&(S>>M&1)==1;this.modules[Math.floor(M/3)][M%3+this.moduleCount-8-3]=_}for(M=0;M<18;M++)_=!E&&(S>>M&1)==1,this.modules[M%3+this.moduleCount-8-3][Math.floor(M/3)]=_},setupTypeInfo:function(E,S){for(var M=this.errorCorrectLevel<<3|S,_=d.getBCHTypeInfo(M),T=0;T<15;T++){var D=!E&&(_>>T&1)==1;T<6?this.modules[T][8]=D:T<8?this.modules[T+1][8]=D:this.modules[this.moduleCount-15+T][8]=D}for(T=0;T<15;T++)D=!E&&(_>>T&1)==1,T<8?this.modules[8][this.moduleCount-T-1]=D:T<9?this.modules[8][15-T-1+1]=D:this.modules[8][15-T-1]=D;this.modules[this.moduleCount-8][8]=!E},mapData:function(E,S){for(var M=-1,_=this.moduleCount-1,T=7,D=0,R=this.moduleCount-1;R>0;R-=2)for(R==6&&R--;;){for(var B=0;B<2;B++)if(this.modules[_][R-B]==null){var P=!1;D<E.length&&(P=(E[D]>>>T&1)==1),d.getMask(S,_,R-B)&&(P=!P),this.modules[_][R-B]=P,--T==-1&&(D++,T=7)}if((_+=M)<0||this.moduleCount<=_){_-=M,M=-M;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(E,S,M){for(var _=g.getRSBlocks(E,S),T=new w,D=0;D<M.length;D++){var R=M[D];T.put(R.mode,4),T.put(R.getLength(),d.getLengthInBits(R.mode,E)),R.write(T)}var B=0;for(D=0;D<_.length;D++)B+=_[D].dataCount;if(T.getLengthInBits()>8*B)throw new Error("code length overflow. ("+T.getLengthInBits()+">"+8*B+")");for(T.getLengthInBits()+4<=8*B&&T.put(0,4);T.getLengthInBits()%8!=0;)T.putBit(!1);for(;!(T.getLengthInBits()>=8*B||(T.put(e.PAD0,8),T.getLengthInBits()>=8*B));)T.put(e.PAD1,8);return e.createBytes(T,_)},e.createBytes=function(E,S){for(var M=0,_=0,T=0,D=new Array(S.length),R=new Array(S.length),B=0;B<S.length;B++){var P=S[B].dataCount,F=S[B].totalCount-P;_=Math.max(_,P),T=Math.max(T,F),D[B]=new Array(P);for(var z=0;z<D[B].length;z++)D[B][z]=255&E.buffer[z+M];M+=P;var Q=d.getErrorCorrectPolynomial(F),V=new b(D[B],Q.getLength()-1).mod(Q);for(R[B]=new Array(Q.getLength()-1),z=0;z<R[B].length;z++){var G=z+V.getLength()-R[B].length;R[B][z]=G>=0?V.get(G):0}}var O=0;for(z=0;z<S.length;z++)O+=S[z].totalCount;var W=new Array(O),k=0;for(z=0;z<_;z++)for(B=0;B<S.length;B++)z<D[B].length&&(W[k++]=D[B][z]);for(z=0;z<T;z++)for(B=0;B<S.length;B++)z<R[B].length&&(W[k++]=R[B][z]);return W};for(var t={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},o=0,a=1,l=2,c=3,u=4,h=5,A=6,f=7,d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(E){for(var S=E<<10;d.getBCHDigit(S)-d.getBCHDigit(d.G15)>=0;)S^=d.G15<<d.getBCHDigit(S)-d.getBCHDigit(d.G15);return(E<<10|S)^d.G15_MASK},getBCHTypeNumber:function(E){for(var S=E<<12;d.getBCHDigit(S)-d.getBCHDigit(d.G18)>=0;)S^=d.G18<<d.getBCHDigit(S)-d.getBCHDigit(d.G18);return E<<12|S},getBCHDigit:function(E){for(var S=0;E!=0;)S++,E>>>=1;return S},getPatternPosition:function(E){return d.PATTERN_POSITION_TABLE[E-1]},getMask:function(E,S,M){switch(E){case o:return(S+M)%2==0;case a:return S%2==0;case l:return M%3==0;case c:return(S+M)%3==0;case u:return(Math.floor(S/2)+Math.floor(M/3))%2==0;case h:return S*M%2+S*M%3==0;case A:return(S*M%2+S*M%3)%2==0;case f:return(S*M%3+(S+M)%2)%2==0;default:throw new Error("bad maskPattern:"+E)}},getErrorCorrectPolynomial:function(E){for(var S=new b([1],0),M=0;M<E;M++)S=S.multiply(new b([1,p.gexp(M)],0));return S},getLengthInBits:function(E,S){if(1<=S&&S<10)switch(E){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:case t.MODE_KANJI:return 8;default:throw new Error("mode:"+E)}else if(S<27)switch(E){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+E)}else{if(!(S<41))throw new Error("type:"+S);switch(E){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+E)}}},getLostPoint:function(E){for(var S=E.getModuleCount(),M=0,_=0;_<S;_++)for(var T=0;T<S;T++){for(var D=0,R=E.isDark(_,T),B=-1;B<=1;B++)if(!(_+B<0||S<=_+B))for(var P=-1;P<=1;P++)T+P<0||S<=T+P||B==0&&P==0||R==E.isDark(_+B,T+P)&&D++;D>5&&(M+=3+D-5)}for(_=0;_<S-1;_++)for(T=0;T<S-1;T++){var F=0;E.isDark(_,T)&&F++,E.isDark(_+1,T)&&F++,E.isDark(_,T+1)&&F++,E.isDark(_+1,T+1)&&F++,F!=0&&F!=4||(M+=3)}for(_=0;_<S;_++)for(T=0;T<S-6;T++)E.isDark(_,T)&&!E.isDark(_,T+1)&&E.isDark(_,T+2)&&E.isDark(_,T+3)&&E.isDark(_,T+4)&&!E.isDark(_,T+5)&&E.isDark(_,T+6)&&(M+=40);for(T=0;T<S;T++)for(_=0;_<S-6;_++)E.isDark(_,T)&&!E.isDark(_+1,T)&&E.isDark(_+2,T)&&E.isDark(_+3,T)&&E.isDark(_+4,T)&&!E.isDark(_+5,T)&&E.isDark(_+6,T)&&(M+=40);var z=0;for(T=0;T<S;T++)for(_=0;_<S;_++)E.isDark(_,T)&&z++;return M+=10*(Math.abs(100*z/S/S-50)/5)}},p={glog:function(E){if(E<1)throw new Error("glog("+E+")");return p.LOG_TABLE[E]},gexp:function(E){for(;E<0;)E+=255;for(;E>=256;)E-=255;return p.EXP_TABLE[E]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)p.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)p.EXP_TABLE[m]=p.EXP_TABLE[m-4]^p.EXP_TABLE[m-5]^p.EXP_TABLE[m-6]^p.EXP_TABLE[m-8];for(m=0;m<255;m++)p.LOG_TABLE[p.EXP_TABLE[m]]=m;function b(E,S){if(E.length==null)throw new Error(E.length+"/"+S);for(var M=0;M<E.length&&E[M]==0;)M++;this.num=new Array(E.length-M+S);for(var _=0;_<E.length-M;_++)this.num[_]=E[_+M]}function g(E,S){this.totalCount=E,this.dataCount=S}function w(){this.buffer=[],this.length=0}b.prototype={get:function(E){return this.num[E]},getLength:function(){return this.num.length},multiply:function(E){for(var S=new Array(this.getLength()+E.getLength()-1),M=0;M<this.getLength();M++)for(var _=0;_<E.getLength();_++)S[M+_]^=p.gexp(p.glog(this.get(M))+p.glog(E.get(_)));return new b(S,0)},mod:function(E){if(this.getLength()-E.getLength()<0)return this;for(var S=p.glog(this.get(0))-p.glog(E.get(0)),M=new Array(this.getLength()),_=0;_<this.getLength();_++)M[_]=this.get(_);for(_=0;_<E.getLength();_++)M[_]^=p.gexp(p.glog(E.get(_))+S);return new b(M,0).mod(E)}},g.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],g.getRSBlocks=function(E,S){var M=g.getRsBlockTable(E,S);if(M==null)throw new Error("bad rs block @ typeNumber:"+E+"/errorCorrectLevel:"+S);for(var _=M.length/3,T=[],D=0;D<_;D++)for(var R=M[3*D+0],B=M[3*D+1],P=M[3*D+2],F=0;F<R;F++)T.push(new g(B,P));return T},g.getRsBlockTable=function(E,S){switch(S){case i.L:return g.RS_BLOCK_TABLE[4*(E-1)+0];case i.M:return g.RS_BLOCK_TABLE[4*(E-1)+1];case i.Q:return g.RS_BLOCK_TABLE[4*(E-1)+2];case i.H:return g.RS_BLOCK_TABLE[4*(E-1)+3];default:return}},w.prototype={get:function(E){var S=Math.floor(E/8);return(this.buffer[S]>>>7-E%8&1)==1},put:function(E,S){for(var M=0;M<S;M++)this.putBit((E>>>S-M-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(E){var S=Math.floor(this.length/8);this.buffer.length<=S&&this.buffer.push(0),E&&(this.buffer[S]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var E=function(S,M){this._bIsPainted=!1,this._htOption=M,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=M.width,this._elCanvas.height=M.height,S.appendChild(this._elCanvas),this._el=S,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return E.prototype.draw=function(S){var M=this._oContext,_=this._htOption,T=S.getModuleCount(),D=_.width/T,R=_.height/T,B=Math.round(D),P=Math.round(R);this.clear();for(var F=0;F<T;F++)for(var z=0;z<T;z++){var Q=S.isDark(F,z),V=z*D,G=F*R;M.strokeStyle=Q?_.colorDark:_.colorLight,M.lineWidth=1,M.fillStyle=Q?_.colorDark:_.colorLight,M.fillRect(V,G,D,R),M.strokeRect(Math.floor(V)+.5,Math.floor(G)+.5,B,P),M.strokeRect(Math.ceil(V)-.5,Math.ceil(G)-.5,B,P)}this._bIsPainted=!0},E.prototype.isPainted=function(){return this._bIsPainted},E.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},E.prototype.round=function(S){return S&&Math.floor(1e3*S)/1e3},E}();function C(E,S){for(var M=1,_=function(B){var P=encodeURI(B).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return P.length+(P.length!=B?3:0)}(E),T=0,D=I.length;T<=D;T++){var R=0;switch(S){case i.L:R=I[T][0];break;case i.M:R=I[T][1];break;case i.Q:R=I[T][2];break;case i.H:R=I[T][3]}if(_<=R)break;M++}if(M>I.length)throw new Error("Too long data");return M}(wm=function(E,S){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},typeof S=="string"&&(S={text:S}),S)for(var M in S)this._htOption[M]=S[M];typeof E=="string"&&(E=document.getElementById(E)),this._htOption.useSVG&&(v=svgDrawer),this._el=E,this._oQRCode=null,this._oDrawing=new v(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(E){this._oQRCode=new e(C(E,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(E),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},wm.prototype.clear=function(){this._oDrawing.clear()},wm.prototype.getCanvas=function(){for(var E=0;E<this._el.children.length;E++){var S=this._el.children[E];if(S.tagName==="CANVAS")return S}return null},wm.CorrectLevel=i})();var kQ=wm,_re=Date.now();typeof performance>"u"&&(window.performance={now:function(){return Date.now()-_re}});var FA,bm,Dre=["simulate","update","render","snapshot"],Bw={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"},Qw=null,xr=null,Sn=null,n_=0,ws=null,Ra=null;function Rre(n){for(Qw=n;n.firstChild;)n.removeChild(n.firstChild);n.style.background="#faf0dc",ws=document.createElement("canvas"),Ra=ws.getContext("2d"),ws.id="text_stats",ws.width=Math.min(140,window.innerWidth),ws.height=36,ws.style.width=ws.width,ws.style.height=ws.height,Ra.font="9.5pt sans-serif",n.appendChild(ws),n.title=Object.entries(Bw).map(function(t){var i=Qt(t,2),o=i[0],a=i[1];return"".concat(a,": ").concat(o)}).join(`
`),(xr=document.createElement("canvas")).width=Math.min(125,window.innerWidth),xr.height=125,xr.style.width="100%";var e=document.createElement("div");e.id="innerDiv",n.appendChild(e),e.appendChild(xr),Sn=xr.getContext("2d")}var Ol=[],PQ=0,kw=!1,En=eG(0),Ea={},eD=1e3/60;function kA(n){return 20*(1-n/eD)+60}function Lre(n){FA=function(i){var o=document.createElement("canvas");return o.width=i.width,o.height=i.height,o.style.width="100%",o.style.position="absolute",o.style.left="0px",Qw.querySelector("#innerDiv").appendChild(o),o}(n),(bm=FA.getContext("2d")).strokeStyle="rgba(255, 255, 255, 0.5)";for(var e=0;e<60;e+=eD){var t=kA(e);bm.moveTo(0,t),bm.lineTo(FA.width,t),bm.stroke()}}function eG(n){return{start:n,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:kw}}function Bre(n){En.total=n-En.start;var e=Math.min(120,window.innerWidth);if(Ol.length>=e&&Ol.splice(0,Ol.length-e+1),Ol.push(En),!(Ol.length<=1)&&Qw&&Qw.offsetHeight!==0){var t=Ol.slice(1).filter(function(p){return p.total}),i=t.map(function(p){return p.total}).reduce(function(p,m){return p+m},0)/t.length,o=Math.max.apply(Math,Kt(t.map(function(p){return p.total})));Math.max.apply(Math,Kt(t.map(function(p){return Math.max(p.backlog,p.network)}))),PQ=1e3,function(p,m){Ra.globalCompositeOperation="copy",Ra.fillStyle="rgb(255, 255, 255, 0)",Ra.fillRect(0,0,ws.width,ws.height),Ra.fillStyle="rgb(0, 0, 0, 1)",Ra.globalCompositeOperation="source-over";var b="".concat(En.users," users, ").concat(Math.round(1e3/p)," fps");m>70&&(b+=" ".concat(Math.ceil(m).toLocaleString(),"ms")),Ra.fillText(b,2,15),b=En.backlog<100&&En.activity<1e3?"latency: ".concat(En.latency," ms"):"backlog: ".concat(En.backlog<100?"0.0":(En.backlog/1e3).toFixed(1)," s"),Ra.fillText(b,2,33)}(i,o),FA||Lre(xr),n_===xr.width?(Sn.globalCompositeOperation="copy",Sn.drawImage(xr,1,0,xr.width-1,xr.height,0,0,xr.width-1,xr.height),Sn.globalCompositeOperation="source-over",Sn.fillStyle="transparent",Sn.fillRect(xr.width-1,0,1,xr.height)):n_++;var a=function(p){return kA(p/PQ*-2*eD)+5},l=Ol[Ol.length-1],c=n_-.5,u=kA(0);Sn.beginPath(),Sn.moveTo(c,u),Sn.lineTo(c,kA(l.total)),Sn.strokeStyle=Bw[l.connected?"total":"network"],Sn.stroke(),Sn.beginPath(),Sn.moveTo(c,u),u=kA(l.total);var h,A=0,f=Xt(Dre);try{for(f.s();!(h=f.n()).done;){var d=h.value;l.items[d]&&(u=kA(A+=l.items[d]),Sn.lineTo(c,u),Sn.strokeStyle=Bw[d],Sn.stroke(),Sn.beginPath(),Sn.moveTo(c,u))}}catch(p){f.e(p)}finally{f.f()}l.network&&(Sn.beginPath(),Sn.moveTo(c,a(0)),Sn.lineTo(c,a(l.network)),Sn.strokeStyle=Bw.network,Sn.stroke())}}var LA=[],hn={animationFrame:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Bre(n),En=eG(n);for(var t=0,i=Object.entries(e);t<i.length;t++){var o=Qt(i[t],2),a=o[0],l=o[1];this[a](l)}},begin:function(n){var e=performance.now();En.items[n]=(En.items[n]||0)-e;var t=LA[LA.length-1];return t&&(En.items[t]+=e),LA.push(n),e},end:function(n){var e=performance.now();En.items[n]+=e;var t=LA.pop();if(t!==n)throw Error('Unmatched stats calls: expected end("'.concat(t,'"), got end("').concat(n,'")'));var i=LA[LA.length-1];return i&&(En.items[i]-=e),e},backlog:function(n){En.backlog=Math.max(n,En.backlog)},network:function(n){En.network=n},starvation:function(n){En.network=n},latency:function(n){En.latency=n},activity:function(n){En.activity=n},users:function(n){En.users=n},connected:function(n){var e=kw;En.connected=kw=n,e&&!kw&&FA&&(FA.remove(),bm=null)},perSecondTally:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,t=Object.entries(n);e<t.length;e++){var i=Qt(t[e],2),o=i[0],a=i[1];Ea[o]=(Ea[o]||0)+a}},stepSession:function(n){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],t=Math.floor(Date.now()/1e3),i=null;if(t!==Ea.second){if(Ea.second&&e&&(Ea.requestedMessages||Ea.sentMessagesTotal)){i=Yn({},Ea);var o=t-Ea.second;o!==1&&(i.sampleSeconds=o),i.sentBundles&&(i.averageDelay=Math.round(10*i.sendDelay/i.sentMessagesTotal)/10,i.averageBundlePayload=Math.round(i.sentBundlePayload/i.sentBundles)),delete i.second,delete i.sendDelay,delete i.sentBundlePayload}Ea={second:t}}return i}},QA="ontouchstart"in document.documentElement,tG=window.parent!==window,Q_=QA?20:12,NQ=QA?0:15,FQ=!1;function kre(){if(!FQ){FQ=!0;var n=`
        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all `.concat(.3,`s ease; }
        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }
        #croquet_dock.debug { width: 84px; }
        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }

        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }
        #croquet_dock.active #croquet_badge { left: 2%; }
        #croquet_dock:not(.debug) #croquet_badge { display: none; }

        .croquet_dock_button { position: absolute; width: `).concat(Q_,`%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }
        .croquet_dock_button:focus { outline: 0; }
        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }
        #croquet_dock:not(.active) .croquet_dock_button { display: none; }
        #croquet_dock_left { right: `).concat(2+NQ+Q_+2,`% }
        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }
        #croquet_dock_right { right: `).concat(2+NQ,`%; }
        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }
        #croquet_dock_pin { right: `).concat(2,`%; }
        #croquet_dock_pin.pinned { background: #cce6ff; }

        #croquet_dock_content { position: absolute; left: `).concat(2,"px; top: ").concat(2,"px; right: ").concat(2,"px; bottom: ").concat(2,`px; background: white; overflow: hidden; }
        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }
        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }

        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }
        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }
        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }
        #croquet_qrcode canvas { image-rendering: pixelated; }

        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }
        #croquet_stats:not(.active) { display: none; }
`),e=document.createElement("style");e.innerHTML=n,document.head.insertBefore(e,document.head.getElementsByTagName("style")[0])}}var UQ=!1,Yl,OQ=!1;function GA(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n&&At.showMessage(n,Yn(Yn({},e),{},{level:"warning"}))}function nG(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n&&At.showMessage(n,Yn(Yn({},e),{},{level:"status"}))}function qr(n,e){console.error("Error during ".concat(n),e);var t=(e.stack||"").split(`
`).filter(function(i){return!i.match(/croquet-.*\.min.js/)}).join(`
`);At.showMessage("<b>Error during ".concat(n,": ").concat(e.message,`</b>

`).concat(t).replace(/\n/g,"<br>"),{level:"error",duration:1e4,stopOnFocus:!0})}function Pre(n,e){var t=PA(At.root,function(){return document.body});if(t===!1)return null;(function(){if(!OQ){OQ=!0;var a=document.createElement("style");a.innerHTML=`/*!
        * Toastify js 1.5.0
        * https://github.com/apvarun/toastify-js
        * @license MIT licensed
        *
        * Copyright (C) 2018 Varun A P
        */
        .toastify {
            padding: 12px 20px;
            color: #ffffff;
            display: inline-block;
            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);
            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);
            background: linear-gradient(135deg, #73a5ff, #5477f5);
            position: fixed;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
            border-radius: 2px;
            cursor: pointer;
            text-decoration: none;
            max-width: calc(50% - 20px);
            z-index: 2147483647;
        }
        .toastify.on {
            opacity: 1;
        }
        .toast-close {
            opacity: 0.4;
            padding: 0 5px;
        }
        .toastify-right {
            right: 15px;
        }
        .toastify-left {
            left: 15px;
        }
        .toastify-top {
            top: -150px;
        }
        .toastify-bottom {
            bottom: -150px;
        }
        .toastify-rounded {
            border-radius: 25px;
        }
        .toastify-avatar {
            width: 1.5em;
            height: 1.5em;
            margin: 0 5px;
            border-radius: 2px;
        }
        @media only screen and (max-width: 360px) {
            .toastify-right, .toastify-left {
                margin-left: auto;
                margin-right: auto;
                left: 0;
                right: 0;
                max-width: fit-content;
            }
        }

        .toastify {
            font-family: sans-serif;
            border-radius: 8px;
        }

        .toastify-center {
            margin-left: auto;
            margin-right: auto;
            left: 0;
            right: 0;
            max-width: fit-content;
            max-width: -moz-fit-content;
        }
`,document.head.insertBefore(a,document.head.getElementsByTagName("style")[0])}})();var i,o=Yn({text:n,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0},e);return t instanceof Element&&t!==document.body?(i=t.id)||(t.id=i="_croquetToastParent"):typeof t=="string"&&(i=t),i&&(o.selector=i),Tre(o).showToast()}try{if((Yl=window.localStorage)["croquet-debug-persist-allowed"]="true",Yl["croquet-debug-persist-allowed"]!=="true")throw Error("localStorage not persisted");delete Yl["croquet-debug-persist-allowed"]}catch{console.warn("localStorage not allowed"),Yl={}}var Js,du,vs={get pinned(){return Yl[window.location.pathname+"/croquet-debug-ui-pinned"]==="true"},set pinned(n){Yl[window.location.pathname+"/croquet-debug-ui-pinned"]=!!n},get activePage(){return Yl[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(n){Yl[window.location.pathname+"/croquet-debug-ui-activePage"]=n}},Vl=function(n){n.preventDefault(),n.stopPropagation()};function i_(n,e,t){var i=document.createElement("canvas"),o=i.width=40*Q_/12,a=i.height=60,l=i.getContext("2d");l.font="36px Arial",l.textAlign="center",l.textBaseline="middle",l.fillStyle="black",l.fillText(n,o/2,.55*a);var c=document.createElement("button");c.id=e,c.className="croquet_dock_button";var u=function(h){h.preventDefault(),h.stopPropagation(),t()};return QA?(c.ontouchstart=u,c.ontouchend=Vl,c.onpointerdown=Vl,c.onpointerup=Vl):(c.onclick=u,c.onpointerdown=Vl,c.onpointerup=Vl),c.appendChild(i),c}function Nre(n,e){if(At.badge!==!1){var t=function(u){for(var h=new Ow(u),A=["bcdfghjklmnpqrstvwxyz","aeiou"],f="",d=0;d<5;d++)f+=A[d%2][h.quick()*A[d%2].length|0];return f}(e);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+t;n.firstChild;)n.removeChild(n.firstChild);var i=document.createElement("canvas"),o=i.width=120,a=i.height=40;i.style.width="100%",n.appendChild(i);var l=i.getContext("2d"),c=function(u){for(var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=new Ow(u),f=[],d=0;d<h;d++)f.push("hsl(".concat(360*A.quick(),", 50%, 70%)"));return f}(e,2);l.fillStyle=c[0],l.beginPath(),l.moveTo(0,0),l.lineTo(0,a),l.lineTo(o,0),l.closePath(),l.fill(),l.fillStyle=c[1],l.beginPath(),l.moveTo(o,a),l.lineTo(o,0),l.lineTo(0,a),l.closePath(),l.fill(),l.font="30px Arial",l.textAlign="center",l.textBaseline="middle",l.fillStyle="black",l.fillText(t,o/2,a/2)}}function iG(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.firstChild;)n.removeChild(n.firstChild);return new kQ(n,Yn({text:e,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:kQ.CorrectLevel.L},t))}function Fre(){if(At.root!==!1&&At.qrcode!==!1&&!gt.noqr){var n=At.sessionURL;if(n){var e=PA(At.qrcode);e&&(QA||(e.onclick=function(t){var i;t.preventDefault(),t.stopPropagation(),t.shiftKey?(i=document.getElementById("croquet_dock"))&&i.classList.toggle("debug"):window.open(n)}),iG(e,n).getCanvas().style.width="100%")}else console.warn("App.sessionURL is not set")}}var gw=0;function Ure(){(function(){if(!UQ){UQ=!0;var t=`
        `.concat(tG?"body { min-height: 100vh }":"",`
        #croquet_spinnerOverlay {
            z-index: 1000;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color:#333;
            opacity:0.9;
            display:flex;
            align-items:center;
            justify-content:center;
            transition: opacity 1.0s ease-out;
        }
        /* https://github.com/lukehaas/css-loaders */
        @keyframes croquet_dots {
            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }
            40% { box-shadow: 0 2.5em 0 0; }
        }
        #croquet_loader,
        #croquet_loader::before,
        #croquet_loader::after {
          border-radius: 50%;
          width: 2.5em;
          height: 2.5em;
          animation: croquet_dots 1.8s infinite ease-in-out;
        }
        #croquet_loader {
          color: #fff;
          font-size: 10px;
          margin: 80px auto;
          position: relative;
          text-indent: -9999em;
          animation-delay: -0.16s;
        }
        #croquet_loader::before,
        #croquet_loader::after {
          content: '';
          position: absolute;
          top: 0;
        }
        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }
        #croquet_loader::after { left: 3.5em; }
        #croquet_spinnerOverlay.croquet_error>*,
        #croquet_spinnerOverlay.croquet_error>*::before,
        #croquet_spinnerOverlay.croquet_error>*::after {
            color: #f00;
        }
        #croquet_spinnerOverlay.croquet_fatal>*,
        #croquet_spinnerOverlay.croquet_fatal>*::before,
        #croquet_spinnerOverlay.croquet_fatal>*::after {
            color: #f00;
            box-shadow: 0 2.5em 0 0 !important;
        }
`),i=document.createElement("style");i.innerHTML=t,document.head.insertBefore(i,document.head.getElementsByTagName("style")[0])}})();var n=document.createElement("div");n.id="croquet_spinnerOverlay";var e=document.createElement("div");return e.id="croquet_loader",e.innerText="Catching up...",n.appendChild(e),n}function PA(n,e){if(n===!1)return!1;if(n instanceof Element)return n;if(typeof n=="string"){var t=document.getElementById(n);if(t)return t}return e?e():null}var QQ=new Set,At={sessionURL:window.location.href,root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!gt.nodock){var e=n.debug||gt.debug,t=document.getElementById("croquet_dock");t&&t.parentElement.removeChild(t);var i=PA(At.root,function(){return document.body});if(i){kre();var o=document.createElement("div");o.id="croquet_dock",e&&o.classList.add("debug"),tG&&!n.iframe&&(o.style.display="none"),i.appendChild(o);var a,l=document.createElement("div");l.id="croquet_dock_bar",o.appendChild(l),n.badge!==!1&&((a=document.createElement("div")).id="croquet_badge",l.appendChild(a),At.badge=a);var c=document.createElement("div");c.id="croquet_dock_content",o.appendChild(c);var u,h,A=[];if(n.qrcode!==!1){var f=At.sessionURL;f&&((u=document.createElement("div")).id="croquet_qrcode",c.appendChild(u),A.push(u.id),At.qrcode=u,e||(vs.activePage=u.id))}if(n.stats!==!1&&((h=document.createElement("div")).id="croquet_stats",c.appendChild(h),A.push(h.id),At.stats=h),A.length){let _=function(T){var D,R=A.length,B=0;if(vs.activePage){var P=A.indexOf(vs.activePage);P>=0?(B=P,D=document.getElementById(vs.activePage)):vs.activePage=null}var F,z=A[(B+R+T)%R];z===vs.activePage?F=D:(D&&D.classList.remove("active"),F=document.getElementById(z)),F&&F.classList.add("active"),vs.activePage=z};A.length>1&&(l.appendChild(i_("<","croquet_dock_left",function(){return _(-1)})),l.appendChild(i_(">","croquet_dock_right",function(){return _(1)}))),_(0)}if(!QA&&!n.alwaysPinned){var d=i_("\u{1F4CC}","croquet_dock_pin",function(){vs.pinned=!vs.pinned,p()}),p=function(){vs.pinned?d.classList.add("pinned"):d.classList.remove("pinned")};p(),l.appendChild(d)}var m=200,b=166,g=8,w=function(_){o.style.width="".concat(_,"px");var T=1.18*_;o.style.height="".concat(T,"px");var D=18*_/100;l.style.height="".concat(D,"px"),c.style.top="".concat(D+2,"px"),a&&(a.style.height="".concat(.9*D,"px"),a.style.width="".concat(.9*D*3,"px")),u&&(u.style.border="".concat(g*_/m,"px solid white"))},I=function(){o.style.width=o.style.height="",l.style.height="",c.style.top="",a&&(a.style.height=a.style.width=""),u&&(u.style.border="")},v=n.fixedSize||m,C=function(){return o.classList.contains("active")},E=function(){o.classList.add("active"),w(v),setTimeout(function(){return o.style.transition="none"},300)},S=function(){o.style.transition="",o.classList.remove("active"),I()};if(QA)S(),o.ontouchstart=function(_){_.preventDefault(),_.stopPropagation(),C()?S():E()},o.ontouchend=Vl,o.onpointerdown=Vl,o.onpointerup=Vl;else if(n.alwaysPinned?E():(vs.pinned?E():S(),o.onmouseenter=E,o.onmouseleave=function(){vs.pinned||S()}),!n.fixedSize){var M=0;o.addEventListener("wheel",function(_){_.stopPropagation();var T=Date.now();if(!(T-M<100)){M=T;var D=_.deltaY;D=Math.sign(D)*Math.min(5,Math.abs(D));var R=.8*Math.min(window.innerWidth,window.innerHeight);v=Math.max(b,Math.min(R,o.offsetWidth/Math.pow(1.05,D))),w(v)}},{passive:!0})}}}},makeSessionWidgets:function(n){(function(e){if(e&&At.root!==!1){var t=PA(At.badge);t&&Nre(t,e)}})(n),Fre(),function(){if(At.root!==!1&&!gt.nostats){var e=PA(At.stats);e&&Rre(e)}}()},makeQRCanvas:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!At.sessionURL)return null;var e=document.createElement("div"),t=iG(e,At.sessionURL,n);return t&&t.getCanvas()},clearSessionMoniker:function(){At.badge!==!1&&(document.title=document.title.replace(/:.*/,""))},showSyncWait:function(n){At.root===!1?n=!1:Js||(Js=Ure()),function(e){if(du!==e&&(typeof du!="string"||e!==!0))if(At.sync===!1&&(e=!1),du=e,e)clearTimeout(gw),gw=setTimeout(function(){du&&(PA(At.root,function(){return document.body}).appendChild(Js),Js.style.opacity=.9,Js.className=du==="error"?"croquet_error":du==="fatal"?"croquet_fatal":"")},500);else{if(!Js)return;clearTimeout(gw),Js.style.opacity=0,Js.className="",gw=setTimeout(function(){du||Js.parentElement&&Js.parentElement.removeChild(Js)},500)}}(n)},messageFunction:function(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.level;return i==="error"?(e="orangered,red",console.error(n)):i==="warning"?(e="gold,orange",console.warn(n)):e="silver,gray",Pre(n,Yn({style:{background:"linear-gradient(90deg,".concat(e,")")}},t))},showMessage:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.only==="once"){if(QQ.has(n))return null;QQ.add(n)}return e.level==="fatal"&&(e.level="error",e.showSyncWait="fatal"),e.showSyncWait&&(e.showSyncWait!=="fatal"||e.duration||(e.duration=-1),At.showSyncWait(e.showSyncWait)),gt.nomessages||At.root===!1||At.messages===!1||!At.messageFunction?(e.level==="warning"&&console.warn(n),e.level==="error"&&console.error(n),null):At.messageFunction(n,e)},isCroquetHost:function(n){return n.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(n)||n.endsWith("ngrok.io")},referrerURL:function(){var n=new URL(At.sessionURL),e=this.isCroquetHost(n.hostname);return"".concat(n.origin).concat(n.pathname).concat(e?n.search:"")},autoSession:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"q"};typeof n=="string"&&(n={key:n}),n||(n={});var e=n.key||"q",t=new URL(window.location),i="",o=t.search.slice(1).split("&"),a=o.find(function(u){return u.split("=")[0]===e});if(a?i=a.replace(/[^=]*=/,""):(i=o.find(function(u){return!u.includes("=")}))||(i=t.hash.slice(1))&&(t.hash="",t.search?t.searchParams.set(e,i):t.search=i),i)try{i=decodeURIComponent(i)}catch{}else i=Math.floor(Math.random()*Math.pow(36,10)).toString(36),t.searchParams.set(e,i);var l=t.toString("");window.location.href!==l&&(window.history.replaceState({},"",l),At.sessionURL=l),gt.has("debug","session")&&console.log('Croquet.App.autoSession: "'.concat(i,'"'));var c=Promise.resolve(i);return c[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),i},c},autoPassword:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"pw",scrub:!1,keyless:!1},e=n.key||"pw",t=n.scrub&&!gt.has("debug","password"),i=n.keyless,o=new URL(window.location),a="",l=o.hash.slice(1);if(l){var c=l.split("&"),u=c.find(function(f){return f.split("=")[0]===e});u?(a=u.replace(/[^=]*=/,""))&&t&&(o.hash=c.filter(function(f){return f.split("=")[0]!==e}).join("&")):i&&(a=c.find(function(f){return!f.includes("=")}))&&t&&(o.hash=c.filter(function(f){return f!==a}).join("&"))}if(!a){var h=new Uint8Array(16);window.crypto.getRandomValues(h),a=Y4(h.buffer),o.hash=l?"".concat(l,"&").concat(e,"=").concat(a):i?a:"".concat(e,"=").concat(a),At.sessionURL=o.href,t&&(o.hash=l)}if(gt.has("debug","session")&&console.log("Croquet.App.sessionUrl: ".concat(At.sessionURL)),window.location.href!==o.href&&window.history.replaceState({},"",o.href),a)try{a=decodeURIComponent(a)}catch{}gt.has("debug","session")&&console.log('Croquet.App.autoPassword: "'.concat(a,'"'));var A=Promise.resolve(a);return A[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),a},A}};function GQ(n,e){function t(i){var o,a=Xt(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.for===e&&i.delete(l)}}catch(c){a.e(c)}finally{a.f()}}return t(n.immediate),t(n.oncePerFrame),t(n.oncePerFrameWhileSynced),t(n.queued),n.immediate.size+n.queued.size+n.oncePerFrame.size+n.oncePerFrameWhileSynced.size}var Ss=new(function(){function n(){ti(this,n),this.subscriptions={},this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),this.lastId=0}return ui(n,[{key:"register",value:function(e){return this.id+"/V"+ ++this.lastId}},{key:"deregister",value:function(e){}},{key:"addSubscription",value:function(e,t,i,o,a){if(a!=="vote"){var l=e+":"+t,c=o;c.for=i;var u=this.subscriptions[l];if(u||(u=this.subscriptions[l]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!u[a])throw Error('Unknown subscribe() option: handling="'.concat(a,'"'));u[a].add(c)}else this.addSubscription(e,t+"#__vote",i,o,"immediate")}},{key:"removeSubscription",value:function(e,t,i){var o=e+":"+t,a=this.subscriptions[o];a&&GQ(a,i)===0&&delete this.subscriptions[o],t.endsWith("#__vote")||this.removeSubscription(e,t+"#__vote",i)}},{key:"removeAllSubscriptionsFor",value:function(e){for(var t="".concat(e,":"),i=0,o=Object.entries(this.subscriptions);i<o.length;i++){var a=Qt(o[i],2),l=a[0],c=a[1];l.startsWith(t)?delete this.subscriptions[l]:GQ(c,e)===0&&delete this.subscriptions[l]}}},{key:"handleEvent",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(a){return a()},o=this.subscriptions[e];o&&(o.queued.size>0&&this.queuedEvents.push({topic:e,data:t}),o.oncePerFrame.size>0&&this.perFrameEvents.set(e,t),o.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(e,t),o.immediate.size>0&&i(function(){var a,l=Xt(o.immediate);try{for(l.s();!(a=l.n()).done;){var c=a.value;try{c(t)}catch(u){console.error(u),console.warn('Croquet: error "'.concat(u.message,'" in "immediate" subscription ').concat(e))}}}catch(u){l.e(u)}finally{l.f()}}))}},{key:"processFrameEvents",value:function(e,t){var i,o=this,a=0,l=function(I,v,C){var E=o.subscriptions[I];if(E){var S,M=Xt(E[C]);try{for(M.s();!(S=M.n()).done;){var _=S.value;try{_(v)}catch(T){console.error(T),console.warn('Croquet: error "'.concat(T.message,'" in "').concat(C,'" subscription ').concat(I))}a++}}catch(T){M.e(T)}finally{M.f()}}},c=Xt(this.queuedEvents);try{for(c.s();!(i=c.n()).done;){var u=i.value;l(u.topic,u.data,"queued")}}catch(I){c.e(I)}finally{c.f()}if(this.queuedEvents.length=0,e){var h,A=Xt(this.perFrameEvents);try{for(A.s();!(h=A.n()).done;){var f=Qt(h.value,2);l(f[0],f[1],"oncePerFrame")}}catch(I){A.e(I)}finally{A.f()}if(this.perFrameEvents.clear(),t){var d,p=Xt(this.perSyncedFrameEvents);try{for(p.s();!(d=p.n()).done;){var m=Qt(d.value,2);l(m[0],m[1],"oncePerFrameWhileSynced")}}catch(I){p.e(I)}finally{p.f()}this.perSyncedFrameEvents.clear()}var b,g=Xt(this.queuedEvents);try{for(g.s();!(b=g.n()).done;){var w=b.value;l(w.topic,w.data,"queued")}}catch(I){g.e(I)}finally{g.f()}this.queuedEvents.length=0}return a}}]),n}()),vu={get subscribe(){return(vu={subscribe:gt.has("debug","subscribe",!1)}).subscribe}},Ore=function(){function n(e){ti(this,n),this.vm=e}return ui(n,[{key:"register",value:function(e){return this.vm.registerModel(e)}},{key:"deregister",value:function(e){this.vm.deregisterModel(e.id)}},{key:"publish",value:function(e,t,i){this.vm.publishFromModel(i,e,t)}},{key:"subscribe",value:function(e,t,i,o){return vu.subscribe&&console.log('Model.subscribe("'.concat(t,":").concat(i,'", ').concat(e," ").concat((""+o).replace(/\([\s\S]*/,""),")")),this.vm.addSubscription(e,t,i,o)}},{key:"unsubscribe",value:function(e,t,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"*";vu.subscribe&&console.log("Model.unsubscribe(".concat(t,":").concat(i,'", ').concat(e," ").concat((""+o).replace(/\([\s\S]*/,""),")")),this.vm.removeSubscription(e,t,i,o)}},{key:"unsubscribeAll",value:function(e){vu.subscribe&&console.log("Model.unsubscribeAll(".concat(e," ").concat(e.id,")")),this.vm.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t,i,o){if(eo&&eo.equal(this))return this.vm.future(e,t,i,o);if(t)throw Error("tOffset not supported from cross-realm future send yet.");var a=this.vm;return new Proxy(e,{get:function(l,c){if(typeof e[c]=="function")return new Proxy(e[c],{apply:function(u,h,A){a.callModelMethod(e.id,c,A)}});throw Error("Tried to call "+c+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return this.vm.random()}},{key:"now",value:function(){return this.vm.time}},{key:"equal",value:function(e){return e instanceof n&&e.vm===this.vm}},{key:"isViewRealm",value:function(){return!1}}]),n}(),Qre=function(){function n(e){ti(this,n),this.vm=e}return ui(n,[{key:"register",value:function(e){return Ss.register(e)}},{key:"deregister",value:function(e){Ss.deregister(e)}},{key:"publish",value:function(e,t,i){this.vm.publishFromView(i,e,t)}},{key:"subscribe",value:function(e,t,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"queued";vu.subscribe&&console.log('View.subscribe("'.concat(o,":").concat(e,'", ').concat(t," ").concat(i.name||(""+i).replace(/\([\s\S]*/,"")," [").concat(a,"])")),Ss.addSubscription(o,e,t,i,a)}},{key:"unsubscribe",value:function(e,t,i,o){vu.subscribe&&console.log('View.unsubscribe("'.concat(o,":").concat(e,'", ').concat(t," ").concat(i.name||(""+i).replace(/\([\s\S]*/,""),")")),Ss.removeSubscription(o,e,t,i)}},{key:"unsubscribeAll",value:function(e){vu.subscribe&&console.log("View.unsubscribeAll(".concat(e,")")),Ss.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t){var i=this.vm;return new Proxy(e,{get:function(o,a){if(typeof e[a]=="function")return new Proxy(e[a],{apply:function(l,c,u){setTimeout(function(){e.id&&Um(i,function(){return e[a].apply(e,Kt(u))},!0)},t)}});throw Error("Tried to call "+a+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return Math.random()}},{key:"now",value:function(){return this.vm.time}},{key:"externalNow",value:function(){return this.vm.controller.reflectorTime}},{key:"extrapolatedNow",value:function(){return this.vm.controller.extrapolatedTime}},{key:"isSynced",value:function(){return!!this.vm.controller.synced}},{key:"equal",value:function(e){return e instanceof n&&e.vm===this.vm}},{key:"isViewRealm",value:function(){return!0}}]),n}(),eo=null;function Fo(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!eo&&n)throw Error(n);return eo}function rG(n,e){if(eo!==null)throw Error("Can't switch realms from inside realm");try{return eo=new Ore(n),e()}finally{eo=null}}function Um(n,e){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(eo!==null&&!t)throw Error("Can't switch realms from inside realm");var i=eo;try{return eo=new Qre(n),e()}finally{eo=i}}var vi=function(n){return n!=n},zA=Math.sqrt,Om=.7853981633974483,Gre=function(n){var e,t;return n===0?.16666666666666713:((n<0?-n:n)<=1?(e=n*(19.562619833175948+n*(n*(5.444622390564711+n*(.004253011369004428*n-.6019598008014124))-16.262479672107002))-8.198089802484825,t=n*(139.51056146574857+n*(n*(70.49610280856842+n*(1*n-14.740913729888538))-147.1791292232726))-49.18853881490881):(e=.004253011369004428+(n=1/n)*(n*(5.444622390564711+n*(n*(19.562619833175948+-8.198089802484825*n)-16.262479672107002))-.6019598008014124),t=1+n*(n*(70.49610280856842+n*(n*(139.51056146574857+-49.18853881490881*n)-147.1791292232726))-14.740913729888538)),e/t)},zre=function(n){var e,t;return n===0?.08333333333333809:((n<0?-n:n)<=1?(e=28.536655482610616+n*(n*(6.968710824104713+n*(.002967721961301243*n-.5634242780008963))-25.56901049652825),t=342.43986579130785+n*(n*(147.0656354026815+n*(1*n-21.947795316429207))-383.8770957603691)):(e=.002967721961301243+(n=1/n)*(n*(6.968710824104713+n*(28.536655482610616*n-25.56901049652825))-.5634242780008963),t=1+n*(n*(147.0656354026815+n*(342.43986579130785*n-383.8770957603691))-21.947795316429207)),e/t)},G_=function(n){var e,t,i,o,a;if(vi(n))return NaN;if(n>0?i=n:(e=!0,i=-n),i>1)return NaN;if(i>.625)o=(t=1-i)*zre(t),t=zA(t+t),a=Om-t,a-=t=t*o-6123233995736766e-32,a+=Om;else{if(i<1e-8)return n;a=i*(a=(t=i*i)*Gre(t))+i}return e?-a:a},Hre=function(n){var e;return vi(n)||n<-1||n>1?NaN:n>.5?2*G_(zA(.5-.5*n)):(e=Om-G_(n),e+=6123233995736766e-32,e+=Om)},Vre=function(){return typeof Symbol=="function"&&$t(Symbol("foo"))==="symbol"}(),Wre=function(){return Vre&&$t(Symbol.toStringTag)==="symbol"},Pw=Object.prototype.toString,Xre=function(n){return Pw.call(n)},Yre=Object.prototype.hasOwnProperty,Zre=function(n,e){return n!=null&&Yre.call(n,e)},pm=typeof Symbol=="function"?Symbol.toStringTag:"",Kre=function(n){var e,t,i;if(n==null)return Pw.call(n);t=n[pm],e=Zre(n,pm);try{n[pm]=void 0}catch{return Pw.call(n)}return i=Pw.call(n),e?n[pm]=t:delete n[pm],i},jw=Wre()?Kre:Xre,jre=typeof Uint32Array=="function",Jre=function(n){return jre&&n instanceof Uint32Array||jw(n)==="[object Uint32Array]"},zQ=typeof Uint32Array=="function"?Uint32Array:null,qre=typeof Uint32Array=="function"?Uint32Array:null,$re=function(){throw new Error("not implemented")},WA=function(){var n,e;if(typeof zQ!="function")return!1;try{e=new zQ(e=[1,3.14,-3.14,4294967296,4294967297]),n=Jre(e)&&e[0]===1&&e[1]===3&&e[2]===4294967293&&e[3]===0&&e[4]===1}catch{n=!1}return n}()?qre:$re,ese=typeof Float64Array=="function",tse=function(n){return ese&&n instanceof Float64Array||jw(n)==="[object Float64Array]"},HQ=typeof Float64Array=="function"?Float64Array:null,nse=typeof Float64Array=="function"?Float64Array:null,ise=function(){throw new Error("not implemented")},XA=function(){var n,e;if(typeof HQ!="function")return!1;try{e=new HQ([1,3.14,-3.14,NaN]),n=tse(e)&&e[0]===1&&e[1]===3.14&&e[2]===-3.14&&e[3]!=e[3]}catch{n=!1}return n}()?nse:ise,rse=typeof Uint8Array=="function",sse=function(n){return rse&&n instanceof Uint8Array||jw(n)==="[object Uint8Array]"},VQ=typeof Uint8Array=="function"?Uint8Array:null,ose=typeof Uint8Array=="function"?Uint8Array:null,ase=function(){throw new Error("not implemented")},lse=function(){var n,e;if(typeof VQ!="function")return!1;try{e=new VQ(e=[1,3.14,-3.14,256,257]),n=sse(e)&&e[0]===1&&e[1]===3&&e[2]===253&&e[3]===0&&e[4]===1}catch{n=!1}return n}()?ose:ase,cse=typeof Uint16Array=="function",use=function(n){return cse&&n instanceof Uint16Array||jw(n)==="[object Uint16Array]"},WQ=typeof Uint16Array=="function"?Uint16Array:null,hse=typeof Uint16Array=="function"?Uint16Array:null,sG,Ase=function(){throw new Error("not implemented")},oG={uint16:function(){var n,e;if(typeof WQ!="function")return!1;try{e=new WQ(e=[1,3.14,-3.14,65536,65537]),n=use(e)&&e[0]===1&&e[1]===3&&e[2]===65533&&e[3]===0&&e[4]===1}catch{n=!1}return n}()?hse:Ase,uint8:lse};(sG=new oG.uint16(1))[0]=4660;var YA=new oG.uint8(sG.buffer)[0]===52,fse=YA===!0?1:0,aG=new XA(1),dse=new WA(aG.buffer),An=function(n){return aG[0]=n,dse[fse]},pse=YA===!0?1:0,z_=new XA(1),mse=new WA(z_.buffer),Oo=function(n,e){return z_[0]=n,mse[pse]=e>>>0,z_[0]},no=Number.POSITIVE_INFINITY,io=Number.NEGATIVE_INFINITY,gse=function(n){return n===0?.6666666666666735:.6666666666666735+n*(.3999999999940942+n*(.2857142874366239+n*(.22222198432149784+n*(.1818357216161805+n*(.15313837699209373+.14798198605116586*n)))))},r_=.6931471803691238,s_=19082149292705877e-26,Qm=function(n){var e,t,i,o,a,l,c,u,h,A;if(n<-1||vi(n))return NaN;if(n===-1)return io;if(n===no||n===0)return n;if(A=1,(i=n<0?-n:n)<.41421356237309503){if(i<1862645149230957e-24)return i<5551115123125783e-32?n:n-n*n*.5;n>-.2928932188134525&&(A=0,o=n,t=1)}return A!==0&&(i<9007199254740992?(a=(A=((t=An(h=1+n))>>20)-1023)>0?1-(h-n):n-(h-1),a/=h):(A=((t=An(h=n))>>20)-1023,a=0),(t&=1048575)<434334?h=Oo(h,1072693248|t):(A+=1,h=Oo(h,1071644672|t),t=1048576-t>>2),o=h-1),e=.5*o*o,t===0?o===0?A*r_+(a+=A*s_):A*r_-((u=e*(1-.6666666666666666*o))-(A*s_+a)-o):(u=(c=(l=o/(2+o))*l)*gse(c),A===0?o-(e-l*(e+u)):A*r_-(e-(l*(e+u)+(A*s_+a))-o))},lG=.6931471805599453,yse=function(n){return n===0?.3999999999940942:.3999999999940942+n*(.22222198432149784+.15313837699209373*n)},vse=function(n){return n===0?.6666666666666735:.6666666666666735+n*(.2857142874366239+n*(.1818357216161805+.14798198605116586*n))},yw=.6931471803691238,vw=19082149292705877e-26,Gm=function(n){var e,t,i,o,a,l,c,u,h,A,f;return n===0?io:vi(n)||n<0?NaN:(o=0,(t=An(n))<1048576&&(o-=54,t=An(n*=0x40000000000000)),t>=2146435072?n+n:(o+=(t>>20)-1023|0,o+=(c=(t&=1048575)+614244&1048576|0)>>20|0,l=(n=Oo(n,t|1072693248^c))-1,(1048575&2+t)<3?l===0?o===0?0:o*yw+o*vw:(a=l*l*(.5-.3333333333333333*l),o===0?l-a:o*yw-(a-o*vw-l)):(c=t-398458|0,u=440401-t|0,i=(A=(f=(h=l/(2+l))*h)*f)*yse(A),a=f*vse(A)+i,(c|=u)>0?(e=.5*l*l,o===0?l-(e-h*(e+a)):o*yw-(e-(h*(e+a)+o*vw)-l)):o===0?l-h*(l-a):o*yw-(h*(l-a)-o*vw-l))))},wse=function(n){var e;return vi(n)||n<1?NaN:n===1?0:n>=268435456?Gm(n)+lG:n>2?Gm(2*n-1/(n+zA(n*n-1))):Qm((e=n-1)+zA(2*e+e*e))},Zl=function(n){return n===no||n===io},bse=function(n){var e,t,i;return vi(n)||Zl(n)?n:(n<0&&(n=-n,e=!0),i=n<3725290298461914e-24?n:n>268435456?Gm(n)+lG:n>2?Gm(2*n+1/(zA(n*n+1)+n)):Qm(n+(t=n*n)/(1+zA(1+t))),e?-i:i)},o_=1.5707963267948966,xse=function(n){return n===0?-64.85021904942025:n*(n*(n*(-.8750608600031904*n-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025},Cse=function(n){return n===0?194.5506571482614:194.5506571482614+n*(485.3903996359137+n*(432.88106049129027+n*(165.02700983169885+n*(24.858464901423062+1*n))))},cG=function(n){var e,t,i,o;return vi(n)||n===0?n:n===no?o_:n===io?-o_:(n<0&&(t=!0,n=-n),e=0,n>2.414213562373095?(i=o_,e=1,n=-1/n):n<=.66?i=0:(i=Om,e=2,n=(n-1)/(n+1)),o=n*(o=(o=n*n)*xse(o)/Cse(o))+n,e===2?o+=3061616997868383e-32:e===1&&(o+=6123233995736766e-32),i+=o,t?-i:i)},H_,V_,Sse=function(n){var e,t;return vi(n)||n<-1||n>1?NaN:n===1?no:n===-1?io:(n<0&&(e=!0,n=-n),n<3725290298461914e-24?e?-n:n:(t=n<.5?.5*Qm((t=n+n)+t*n/(1-n)):.5*Qm((n+n)/(1-n)),e?-t:t))};YA===!0?(H_=1,V_=0):(H_=0,V_=1);var uG={HIGH:H_,LOW:V_},hG=new XA(1),XQ=new WA(hG.buffer),Ese=uG.HIGH,Ise=uG.LOW,YQ=function(n,e){return hG[0]=e,n[0]=XQ[Ese],n[1]=XQ[Ise],n},W_,X_,tD=function(n,e){return arguments.length===1?YQ([0,0],n):YQ(n,e)};YA===!0?(W_=1,X_=0):(W_=0,X_=1);var AG={HIGH:W_,LOW:X_},fG=new XA(1),ZQ=new WA(fG.buffer),Mse=AG.HIGH,Tse=AG.LOW,zm=function(n,e){return ZQ[Mse]=n,ZQ[Tse]=e,fG[0]},a_=[0,0],_a=function(n,e){var t,i;return tD(a_,n),t=a_[0],t&=2147483647,i=An(e),zm(t|=i&=2147483648,a_[1])},_se=function(n){return!!(An(n)>>>31)},Ql=3.141592653589793,Dse=function(n,e){var t;return vi(e)||vi(n)?NaN:Zl(e)?e===no?Zl(n)?_a(Ql/4,n):_a(0,n):Zl(n)?_a(3*Ql/4,n):_a(Ql,n):Zl(n)?_a(Ql/2,n):n===0?e>=0&&!_se(e)?_a(0,n):_a(Ql,n):e===0?_a(Ql/2,n):(t=cG(n/e),e<0?t<=0?t+Ql:t-Ql:t)},dG=22250738585072014e-324,Rse=function(n){return n===0?1.87595182427177:1.87595182427177+n*(n*(1.6214297201053545+n*(.14599619288661245*n-.758397934778766))-1.8849797954337717)},Lse=function(n){var e,t,i,o,a;return vi(n)||Zl(n)||n===0?n:(t=-2147483648&(i=An(n)),i&=2147483647,a=0,n<dG?(a=0x40000000000000,e=An(a*=n),a=zm(t|(e=(2147483647&e)/3+696219795),0)):a=Oo(a,t|(e=i/3+715094163)),a*=Rse(o=a*a*(a/n)),e=An(a),a=zm(e+1,0),a+=a*(o=((o=n/(a*a))-a)/(a+a+o)))},Bse=function(n){return n===0?.0416666666666666:.0416666666666666+n*(2480158728947673e-20*n-.001388888888887411)},kse=function(n){return n===0?-27557314351390663e-23:n*(2087572321298175e-24+-11359647557788195e-27*n)-27557314351390663e-23},Im=function(n,e){var t,i,o,a;return o=(a=n*n)*a,i=a*Bse(a),i+=o*o*kse(a),(o=1-(t=.5*a))+(1-o-t+(a*i-n*e))},KQ=-.16666666666666632,Mm=function(n,e){var t,i,o;return t=.00833333333332249+(o=n*n)*(27557313707070068e-22*o-.0001984126982985795)+o*(o*o)*(158969099521155e-24*o-25050760253406863e-24),i=o*n,e===0?n+i*(KQ+o*t):n-(o*(.5*e-i*t)-e-i*KQ)},Pse=YA===!0?0:1,pG=new XA(1),Nse=new WA(pG.buffer),Fse=function(n){return pG[0]=n,Nse[Pse]},mG=Math.floor,nD=function(n){return n<0?-n:n===0?0:n},jQ=function(n,e){return vi(e)||Zl(e)?(n[0]=e,n[1]=0,n):e!==0&&nD(e)<dG?(n[0]=4503599627370496*e,n[1]=-52,n):(n[0]=e,n[1]=0,n)},Use=function(n,e){return arguments.length===1?jQ([0,0],n):jQ(n,e)},Ose=function(n){var e=An(n);return(e=(2146435072&e)>>>20)-1023|0},l_=[0,0],c_=[0,0],xm=function(n,e){var t,i;return n===0||vi(n)||Zl(n)?n:(Use(l_,n),e+=l_[1],(e+=Ose(n=l_[0]))<-1074?_a(0,n):e>1023?n<0?io:no:(e<=-1023?(e+=52,i=2220446049250313e-31):i=1,tD(c_,n),t=c_[0],t&=2148532223,i*zm(t|=e+1023<<20,c_[1])))},gG=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Qse=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],u_=5960464477539063e-23,h_=Jw(new Array(20)),JQ=Jw(new Array(20)),ww=Jw(new Array(20)),Ti=Jw(new Array(20));function Jw(n){var e,t=n.length;for(e=0;e<t;e++)n[e]=0;return n}function yG(n,e,t,i,o,a,l,c,u){var h,A,f,d,p,m,b,g,w;for(d=a,w=i[t],g=t,p=0;g>0;p++)A=u_*w|0,Ti[p]=w-16777216*A|0,w=i[g-1]+A,g-=1;if(w=xm(w,o),w-=8*mG(.125*w),w-=b=0|w,f=0,o>0?(b+=p=Ti[t-1]>>24-o,Ti[t-1]-=p<<24-o,f=Ti[t-1]>>23-o):o===0?f=Ti[t-1]>>23:w>=.5&&(f=2),f>0){for(b+=1,h=0,p=0;p<t;p++)g=Ti[p],h===0?g!==0&&(h=1,Ti[p]=16777216-g):Ti[p]=16777215-g;if(o>0)switch(o){case 1:Ti[t-1]&=8388607;break;case 2:Ti[t-1]&=4194303}f===2&&(w=1-w,h!==0&&(w-=xm(1,o)))}if(w===0){for(g=0,p=t-1;p>=a;p--)g|=Ti[p];if(g===0){for(m=1;Ti[a-m]===0;m++);for(p=t+1;p<=t+m;p++){for(u[c+p]=gG[l+p],A=0,g=0;g<=c;g++)A+=n[g]*u[c+(p-g)];i[p]=A}return yG(n,e,t+=m,i,o,a,l,c,u)}}if(w===0)for(t-=1,o-=24;Ti[t]===0;)t-=1,o-=24;else(w=xm(w,-o))>=16777216?(A=u_*w|0,Ti[t]=w-16777216*A|0,o+=24,Ti[t+=1]=A):Ti[t]=0|w;for(A=xm(1,o),p=t;p>=0;p--)i[p]=A*Ti[p],A*=u_;for(p=t;p>=0;p--){for(A=0,m=0;m<=d&&m<=t-p;m++)A+=Qse[m]*i[p+m];ww[t-p]=A}for(A=0,p=t;p>=0;p--)A+=ww[p];for(e[0]=f===0?A:-A,A=ww[0]-A,p=1;p<=t;p++)A+=ww[p];return e[1]=f===0?A:-A,7&b}var Gse=function(n,e,t,i){var o,a,l,c,u,h,A;for((a=(t-3)/24|0)<0&&(a=0),c=t-24*(a+1),h=a-(l=i-1),A=l+4,u=0;u<=A;u++)h_[u]=h<0?0:gG[h],h+=1;for(u=0;u<=4;u++){for(o=0,h=0;h<=l;h++)o+=n[h]*h_[l+(u-h)];JQ[u]=o}return yG(n,e,4,JQ,c,4,a,l,h_)},zse=Math.round,bw=function(n,e,t){var i,o,a,l,c;return a=n-1.5707963267341256*(i=zse(.6366197723675814*n)),l=6077100506506192e-26*i,c=e>>20|0,t[0]=a-l,c-(An(t[0])>>20&2047)>16&&(l=20222662487959506e-37*i-((o=a)-(a=o-(l=6077100506303966e-26*i))-l),t[0]=a-l,c-(An(t[0])>>20&2047)>49&&(l=84784276603689e-45*i-((o=a)-(a=o-(l=20222662487111665e-37*i))-l),t[0]=a-l)),t[1]=a-t[0]-l,i},Gl=1.5707963267341256,NA=6077100506506192e-26,xw=2*NA,Cw=4*NA,mm=new Array(3),gm=new Array(2),iD=function(n,e){var t,i,o,a,l,c,u;if((o=2147483647&An(n)|0)<=1072243195)return e[0]=n,e[1]=0,0;if(o<=1074752122)return(1048575&o)==598523?bw(n,o,e):o<=1073928572?n>0?(u=n-Gl,e[0]=u-NA,e[1]=u-e[0]-NA,1):(u=n+Gl,e[0]=u+NA,e[1]=u-e[0]+NA,-1):n>0?(u=n-2*Gl,e[0]=u-xw,e[1]=u-e[0]-xw,2):(u=n+2*Gl,e[0]=u+xw,e[1]=u-e[0]+xw,-2);if(o<=1075594811)return o<=1075183036?o===1074977148?bw(n,o,e):n>0?(u=n-3*Gl,e[0]=u-18231301519518578e-26,e[1]=u-e[0]-18231301519518578e-26,3):(u=n+3*Gl,e[0]=u+18231301519518578e-26,e[1]=u-e[0]+18231301519518578e-26,-3):o===1075388923?bw(n,o,e):n>0?(u=n-4*Gl,e[0]=u-Cw,e[1]=u-e[0]-Cw,4):(u=n+4*Gl,e[0]=u+Cw,e[1]=u-e[0]+Cw,-4);if(o<1094263291)return bw(n,o,e);if(o>=2146435072)return e[0]=NaN,e[1]=NaN,0;for(t=Fse(n),u=zm(o-((i=(o>>20)-1046)<<20|0),t),l=0;l<2;l++)mm[l]=0|u,u=16777216*(u-mm[l]);for(mm[2]=u,a=3;mm[a-1]===0;)a-=1;return c=Gse(mm,gm,i,a),n<0?(e[0]=-gm[0],e[1]=-gm[1],-c):(e[0]=gm[0],e[1]=gm[1],c)},Ia=[0,0],Hse=function(n){var e;if(e=An(n),(e&=2147483647)<=1072243195)return e<1044381696?1:Im(n,0);if(e>=2146435072)return NaN;switch(3&iD(n,Ia)){case 0:return Im(Ia[0],Ia[1]);case 1:return-Mm(Ia[0],Ia[1]);case 2:return-Im(Ia[0],Ia[1]);default:return Mm(Ia[0],Ia[1])}},Vse=Math.ceil,Wse=function(n){return n<0?Vse(n):mG(n)},Xse=function(n){return n===0?.16666666666666602:.16666666666666602+n*(n*(6613756321437934e-20+n*(41381367970572385e-24*n-16533902205465252e-22))-.0027777777777015593)},Yse=function(n,e,t){var i,o,a;return a=(i=n-e)-(o=i*i)*Xse(o),xm(1-(e-i*a/(2-a)-n),t)},wu=function(n){var e;return vi(n)||n===no?n:n===io?0:n>709.782712893384?no:n<-745.1332191019411?0:n>-3725290298461914e-24&&n<3725290298461914e-24?1+n:(e=Wse(n<0?1.4426950408889634*n-.5:1.4426950408889634*n+.5),Yse(n-.6931471803691238*e,19082149292705877e-26*e,e))},Zse=function(n){return vi(n)?n:(n<0&&(n=-n),n>21?wu(n)/2:(wu(n)+wu(-n))/2)},Kse=function(n){return n===0?-.03333333333333313:n*(.0015873015872548146+n*(n*(4008217827329362e-21+-20109921818362437e-23*n)-793650757867488e-19))-.03333333333333313},A_=.6931471803691238,f_=19082149292705877e-26,jse=function(n){var e,t,i,o,a,l,c,u,h,A,f,d;if(n===no||vi(n))return n;if(n===io)return-1;if(n===0)return n;if(n<0?(t=!0,c=-n):(t=!1,c=n),c>=38.816242111356935){if(t)return-1;if(c>=709.782712893384)return no}if(a=0|An(c),c>.34657359027997264)c<1.0397207708399179?t?(i=n+A_,o=-f_,d=-1):(i=n-A_,o=f_,d=1):(d=t?1.4426950408889634*n-.5:1.4426950408889634*n+.5,i=n-(A=d|=0)*A_,o=A*f_),h=i-(n=i-o)-o;else{if(a<1016070144)return n;d=0}return f=(u=n*(e=.5*n))*(((l=1+u*Kse(u))-(A=3-l*e))/(6-n*A)),d===0?n-(n*f-u):(f=n*(f-h)-h,f-=u,d===-1?.5*(n-f)-.5:d===1?n<-.25?-2*(f-(n+.5)):1+2*(n-f):d<=-2||d>56?(i=An(c=1-(f-n))+(d<<20)|0,(c=Oo(c,i))-1):(A=1,d<20?c=(A=Oo(A,i=1072693248-(2097152>>d)|0))-(f-n):(c=n-(f+(A=Oo(A,i=1023-d<<20|0))),c+=1),i=An(c)+(d<<20)|0,Oo(c,i)))},Jse=YA===!0?0:1,Y_=new XA(1),qse=new WA(Y_.buffer),Gw=function(n,e){return Y_[0]=n,qse[Jse]=e>>>0,Y_[0]},$se=function(n){return n===0?.3999999999940942:.3999999999940942+n*(.22222198432149784+.15313837699209373*n)},eoe=function(n){return n===0?.6666666666666735:.6666666666666735+n*(.2857142874366239+n*(.1818357216161805+.14798198605116586*n))},toe=function(n){var e,t,i,o,a,l,c,u,h,A;return o=n-1,(1048575&2+(i=An(n)))<3?o===0?0:o*o*(.3333333333333333*o-.5):(h=(i&=1048575)-398458|0,A=440401-i|0,t=(u=(l=(a=o/(2+o))*a)*l)*$se(u),c=l*eoe(u)+t,(h|=A)>0?a*((e=.5*o*o)+c)-e:a*(c-o))},noe=function(n){var e,t,i,o,a,l,c;return vi(n)||n<0?NaN:n===0?io:(a=0,(t=An(n))<1048576&&(a-=54,t=An(n*=0x40000000000000)),t>=2146435072?n+n:(a+=(t>>20)-1023|0,n=Oo(n,(t&=1048575)|1072693248^(o=t+614244&1048576|0)),l=a+=o>>20|0,i=toe(n),c=3694239077158931e-28*l+25082946711645275e-27*((n-=1)+i),(c+=.4342944818781689*(n-(e=Gw(n,0))+i)+.4342944818781689*e)+.30102999566361177*l))},ioe=function(n){return n===0?.3999999999940942:.3999999999940942+n*(.22222198432149784+.15313837699209373*n)},roe=function(n){return n===0?.6666666666666735:.6666666666666735+n*(.2857142874366239+n*(.1818357216161805+.14798198605116586*n))},soe=function(n){var e,t,i,o,a,l,c,u,h,A;return o=n-1,(1048575&2+(i=An(n)))<3?o===0?0:o*o*(.3333333333333333*o-.5):(h=(i&=1048575)-398458|0,A=440401-i|0,t=(u=(l=(a=o/(2+o))*a)*l)*ioe(u),c=l*roe(u)+t,(h|=A)>0?a*((e=.5*o*o)+c)-e:a*(c-o))},d_=[0,0],ooe=function(n){var e,t,i,o,a;if(vi(n)||n<0)return NaN;if(tD(d_,n),a=0,(t=d_[0])<1048576){if(!(2147483647&t|d_[1]))return io;a-=54,t=An(n*=0x40000000000000)}return t>=2146435072?n+n:(a+=(t>>20)-1023|0,n=Oo(n,(t&=1048575)|1072693248^(o=t+614244&1048576|0)),a+=o>>20|0,i=soe(n),16751713164886512e-26*((n-=1)+i)+1.4426950407214463*(n-(e=Gw(n,0))+i)+1.4426950407214463*e+a)},Ma=[0,0],aoe=function(n){var e;if(e=An(n),(e&=2147483647)<=1072243195)return e<1045430272?n:Mm(n,0);if(e>=2146435072)return NaN;switch(3&iD(n,Ma)){case 0:return Mm(Ma[0],Ma[1]);case 1:return Im(Ma[0],Ma[1]);case 2:return-Mm(Ma[0],Ma[1]);default:return-Im(Ma[0],Ma[1])}},loe=function(n){var e,t;return n===0?.16666666666666666:((n<0?-n:n)<=1?(e=n*(n*(-.789474443963537*n-163.72585752598383)-11561.443576500522)-351754.9648081514,t=n*(36157.827983443196+n*(1*n-277.7110814206028))-2.1105297888489086e6):(e=(n=1/n)*(n*(-351754.9648081514*n-11561.443576500522)-163.72585752598383)-.789474443963537,t=1+n*(n*(36157.827983443196+-2.1105297888489086e6*n)-277.7110814206028)),e/t)},coe=function(n){var e;return n===0?n:(e=nD(n),n>710.4758600739439||n<-709.089565712824?n>0?no:io:e>1?e>=709.0895657128241?(e=wu(.5*e),e*=.5*e,n<0&&(e=-e),e):(e=.5*(e=wu(e))-.5/e,n<0&&(e=-e),e):n+n*(e*=e)*loe(e))},uoe=function(n){return n===0?.13333333333320124:.13333333333320124+n*(.021869488294859542+n*(.0035920791075913124+n*(.0005880412408202641+n*(7817944429395571e-20+-18558637485527546e-21*n))))},hoe=function(n){return n===0?.05396825397622605:.05396825397622605+n*(.0088632398235993+n*(.0014562094543252903+n*(.0002464631348184699+n*(7140724913826082e-20+2590730518636337e-20*n))))},qQ=function(n,e,t){var i,o,a,l,c,u,h,A,f;return(o=2147483647&(i=An(n))|0)>=1072010280&&(n<0&&(n=-n,e=-e),n=(f=.7853981633974483-n)+(A=3061616997868383e-32-e),e=0),l=e+(f=n*n)*((c=f*n)*((l=uoe(A=f*f))+(h=f*hoe(A)))+e),A=n+(l+=.3333333333333341*c),o>=1072010280?(1-(i>>30&2))*((h=t)-2*(n-(A*A/(A+h)-l))):t===1?A:(Gw(f=A,0),h=l-(f-n),Gw(u=a=-1/A,0),u+a*((c=1+u*f)+u*h))},p_=[0,0],Aoe=function(n){var e,t;return e=An(n),(e&=2147483647)<=1072243195?e<1044381696?n:qQ(n,0,1):e>=2146435072?NaN:(t=iD(n,p_),qQ(p_[0],p_[1],1-((1&t)<<1)))},foe=function(n){var e,t;return n===0?-.3333333333333332:((n<0?-n:n)<=1?(e=n*(n*(0*n-.9643991794250523)-99.28772310019185)-1614.6876844170845,t=4844.063053251255+n*(2235.4883906010045+n*(112.81167849163293+1*n))):(e=0+(n=1/n)*(n*(-1614.6876844170845*n-99.28772310019185)-.9643991794250523),t=1+n*(112.81167849163293+n*(2235.4883906010045+4844.063053251255*n))),e/t)},doe=function(n){var e,t;if((t=nD(n))>44.014845965556525)return n<0?-1:1;if(t>=.625)t=1-2/((e=wu(2*t))+1),n<0&&(t=-t);else{if(n===0)return n;t=n+n*(e=n*n)*foe(e)}return t};window.CroquetMath===void 0&&(window.CroquetMath={}),Object.assign(window.CroquetMath,{acos:Hre,acosh:wse,asin:G_,asinh:bse,atan:cG,atanh:Sse,atan2:Dse,cbrt:Lse,cos:Hse,cosh:Zse,exp:wu,expm1:jse,log:Gm,log1p:Qm,log10:noe,log2:ooe,sin:aoe,sinh:coe,tan:Aoe,tanh:doe});var m_=Math.pow;function $Q(n){return n===1/0||n===-1/0}window.CroquetMath.pow=function(n,e){if(isNaN(n)||isNaN(e))return NaN;if($Q(n)||$Q(e)||n===0||e===0)return m_(n,e);if(n<0&&!function(i){return Number.isInteger(i)}(e))return NaN;if(e===1)return n;if(e===2)return n*n;if(e===3)return n*n*n;if(e===4)return n*n*n*n;var t=1;return n<0&&(n*=-1,t=m_(-1,e)),window.CroquetMath.exp(window.CroquetMath.log(n)*e)*t};var poe=function(n,e){return n<e};function Xn(n){if(!(this instanceof Xn))return new Xn(n);this.array=[],this.size=0,this.compare=n||poe}Xn.prototype.clone=function(){var n=new Xn(this.compare);return n.size=this.size,n.array=this.array.slice(0,this.size),n},Xn.prototype.add=function(n){var e,t,i=this.size;for(this.array[this.size]=n,this.size+=1;i>0&&(e=i-1>>1,t=this.array[e],this.compare(n,t));)this.array[i]=t,i=e;this.array[i]=n},Xn.prototype.heapify=function(n){var e;for(this.array=n,this.size=n.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},Xn.prototype._percolateUp=function(n,e){for(var t,i,o=this.array[n];n>0&&(t=n-1>>1,i=this.array[t],e||this.compare(o,i));)this.array[n]=i,n=t;this.array[n]=o},Xn.prototype._percolateDown=function(n){for(var e,t,i,o=this.size,a=this.size>>>1,l=this.array[n];n<a&&(t=(e=1+(n<<1))+1,i=this.array[e],t<o&&this.compare(this.array[t],i)&&(e=t,i=this.array[t]),this.compare(i,l));)this.array[n]=i,n=e;this.array[n]=l},Xn.prototype._removeAt=function(n){if(!(n>this.size-1||n<0))return this._percolateUp(n,!0),this.poll()},Xn.prototype.remove=function(n){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],n)&&!this.compare(n,this.array[e]))return this._removeAt(e),!0;return!1},Xn.prototype.removeOne=function(n){if(typeof n=="function"){for(var e=0;e<this.size;e++)if(n(this.array[e]))return this._removeAt(e)}},Xn.prototype.removeMany=function(n,e){if(typeof n!="function"||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var t=0,i=new Array(e),o=0,a=new Array(this.size);t<e&&!this.isEmpty();){var l=this.poll();n(l)?i[t++]=l:a[o++]=l}i.length=t;for(var c=0;c<o;)this.add(a[c++]);return i},Xn.prototype.peek=function(){if(this.size!=0)return this.array[0]},Xn.prototype.poll=function(){if(this.size!=0){var n=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,n}},Xn.prototype.replaceTop=function(n){if(this.size!=0){var e=this.array[0];return this.array[0]=n,this._percolateDown(0),e}},Xn.prototype.trim=function(){this.array=this.array.slice(0,this.size)},Xn.prototype.isEmpty=function(){return this.size===0},Xn.prototype.forEach=function(n){if(!this.isEmpty()&&typeof n=="function")for(var e=0,t=this.clone();!t.isEmpty();)n(t.poll(),e++)},Xn.prototype.kSmallest=function(n){if(this.size==0)return[];n=Math.min(this.size,n);var e=new Xn(this.compare),t=Math.min((n>0?Math.pow(2,n-1):0)+1,this.size);e.size=t,e.array=this.array.slice(0,t);for(var i=new Array(n),o=0;o<n;o++)i[o]=e.poll();return i};var moe=Xn,goe=function(n){Ww(t,moe);var e=Yw(t);function t(){return ti(this,t),e.apply(this,arguments)}return ui(t,[{key:"poll",value:function(){var i=O4(UA(t.prototype),"poll",this).call(this);return this.array[this.size]=null,i}},{key:"asArray",value:function(){var i=[];return this.forEach(function(o){return i.push(o)}),i}},{key:"asUnsortedArray",value:function(){return this.array.slice(0,this.size)}}]),t}(),yoe={exports:{}},$s=yoe.exports=function(n){return function(){var e=n,t=e.lib.WordArray;function i(o,a,l){for(var c=[],u=0,h=0;h<a;h++)if(h%4){var A=l[o.charCodeAt(h-1)]<<h%4*2|l[o.charCodeAt(h)]>>>6-h%4*2;c[u>>>2]|=A<<24-u%4*8,u++}return t.create(c,u)}e.enc.Base64={stringify:function(o){var a=o.words,l=o.sigBytes,c=this._map;o.clamp();for(var u=[],h=0;h<l;h+=3)for(var A=(a[h>>>2]>>>24-h%4*8&255)<<16|(a[h+1>>>2]>>>24-(h+1)%4*8&255)<<8|a[h+2>>>2]>>>24-(h+2)%4*8&255,f=0;f<4&&h+.75*f<l;f++)u.push(c.charAt(A>>>6*(3-f)&63));var d=c.charAt(64);if(d)for(;u.length%4;)u.push(d);return u.join("")},parse:function(o){var a=o.length,l=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var u=0;u<l.length;u++)c[l.charCodeAt(u)]=u}var h=l.charAt(64);if(h){var A=o.indexOf(h);A!==-1&&(a=A)}return i(o,a,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64}($r.exports),voe={exports:{}},woe=voe.exports=function(n){return n.enc.Utf8}($r.exports),boe={exports:{}},xoe={exports:{}};xoe.exports=function(n){return function(){var e=n,t=e.lib,i=t.WordArray,o=t.Hasher,a=e.algo,l=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,h){for(var A=this._hash.words,f=A[0],d=A[1],p=A[2],m=A[3],b=A[4],g=0;g<80;g++){if(g<16)l[g]=0|u[h+g];else{var w=l[g-3]^l[g-8]^l[g-14]^l[g-16];l[g]=w<<1|w>>>31}var I=(f<<5|f>>>27)+b+l[g];I+=g<20?1518500249+(d&p|~d&m):g<40?1859775393+(d^p^m):g<60?(d&p|d&m|p&m)-1894007588:(d^p^m)-899497514,b=m,m=p,p=d<<30|d>>>2,d=f,f=I}A[0]=A[0]+f|0,A[1]=A[1]+d|0,A[2]=A[2]+p|0,A[3]=A[3]+m|0,A[4]=A[4]+b|0},_doFinalize:function(){var u=this._data,h=u.words,A=8*this._nDataBytes,f=8*u.sigBytes;return h[f>>>5]|=128<<24-f%32,h[14+(f+64>>>9<<4)]=Math.floor(A/4294967296),h[15+(f+64>>>9<<4)]=A,u.sigBytes=4*h.length,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});e.SHA1=o._createHelper(c),e.HmacSHA1=o._createHmacHelper(c)}(),n.SHA1}($r.exports);var Coe={exports:{}};Coe.exports=function(n){(function(){var e=n,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(o,a){o=this._hasher=new o.init,typeof a=="string"&&(a=i.parse(a));var l=o.blockSize,c=4*l;a.sigBytes>c&&(a=o.finalize(a)),a.clamp();for(var u=this._oKey=a.clone(),h=this._iKey=a.clone(),A=u.words,f=h.words,d=0;d<l;d++)A[d]^=1549556828,f[d]^=909522486;u.sigBytes=h.sigBytes=c,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var a=this._hasher,l=a.finalize(o);return a.reset(),a.finalize(this._oKey.clone().concat(l))}})})()}($r.exports);var e4=boe.exports=function(n){return function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,a=e.algo,l=a.SHA1,c=a.HMAC,u=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,A){for(var f=this.cfg,d=c.create(f.hasher,h),p=o.create(),m=o.create([1]),b=p.words,g=m.words,w=f.keySize,I=f.iterations;b.length<w;){var v=d.update(A).finalize(m);d.reset();for(var C=v.words,E=C.length,S=v,M=1;M<I;M++){S=d.finalize(S),d.reset();for(var _=S.words,T=0;T<E;T++)C[T]^=_[T]}p.concat(v),g[0]++}return p.sigBytes=4*w,p}});e.PBKDF2=function(h,A,f){return u.create(f).compute(h,A)}}(),n.PBKDF2}($r.exports),Soe={exports:{}},Eoe={exports:{}};Eoe.exports=function(n){return function(e){var t=n,i=t.lib,o=i.WordArray,a=i.Hasher,l=t.algo,c=[];(function(){for(var p=0;p<64;p++)c[p]=4294967296*e.abs(e.sin(p+1))|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var b=0;b<16;b++){var g=m+b,w=p[g];p[g]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8)}var I=this._hash.words,v=p[m+0],C=p[m+1],E=p[m+2],S=p[m+3],M=p[m+4],_=p[m+5],T=p[m+6],D=p[m+7],R=p[m+8],B=p[m+9],P=p[m+10],F=p[m+11],z=p[m+12],Q=p[m+13],V=p[m+14],G=p[m+15],O=I[0],W=I[1],k=I[2],Y=I[3];O=h(O,W,k,Y,v,7,c[0]),Y=h(Y,O,W,k,C,12,c[1]),k=h(k,Y,O,W,E,17,c[2]),W=h(W,k,Y,O,S,22,c[3]),O=h(O,W,k,Y,M,7,c[4]),Y=h(Y,O,W,k,_,12,c[5]),k=h(k,Y,O,W,T,17,c[6]),W=h(W,k,Y,O,D,22,c[7]),O=h(O,W,k,Y,R,7,c[8]),Y=h(Y,O,W,k,B,12,c[9]),k=h(k,Y,O,W,P,17,c[10]),W=h(W,k,Y,O,F,22,c[11]),O=h(O,W,k,Y,z,7,c[12]),Y=h(Y,O,W,k,Q,12,c[13]),k=h(k,Y,O,W,V,17,c[14]),O=A(O,W=h(W,k,Y,O,G,22,c[15]),k,Y,C,5,c[16]),Y=A(Y,O,W,k,T,9,c[17]),k=A(k,Y,O,W,F,14,c[18]),W=A(W,k,Y,O,v,20,c[19]),O=A(O,W,k,Y,_,5,c[20]),Y=A(Y,O,W,k,P,9,c[21]),k=A(k,Y,O,W,G,14,c[22]),W=A(W,k,Y,O,M,20,c[23]),O=A(O,W,k,Y,B,5,c[24]),Y=A(Y,O,W,k,V,9,c[25]),k=A(k,Y,O,W,S,14,c[26]),W=A(W,k,Y,O,R,20,c[27]),O=A(O,W,k,Y,Q,5,c[28]),Y=A(Y,O,W,k,E,9,c[29]),k=A(k,Y,O,W,D,14,c[30]),O=f(O,W=A(W,k,Y,O,z,20,c[31]),k,Y,_,4,c[32]),Y=f(Y,O,W,k,R,11,c[33]),k=f(k,Y,O,W,F,16,c[34]),W=f(W,k,Y,O,V,23,c[35]),O=f(O,W,k,Y,C,4,c[36]),Y=f(Y,O,W,k,M,11,c[37]),k=f(k,Y,O,W,D,16,c[38]),W=f(W,k,Y,O,P,23,c[39]),O=f(O,W,k,Y,Q,4,c[40]),Y=f(Y,O,W,k,v,11,c[41]),k=f(k,Y,O,W,S,16,c[42]),W=f(W,k,Y,O,T,23,c[43]),O=f(O,W,k,Y,B,4,c[44]),Y=f(Y,O,W,k,z,11,c[45]),k=f(k,Y,O,W,G,16,c[46]),O=d(O,W=f(W,k,Y,O,E,23,c[47]),k,Y,v,6,c[48]),Y=d(Y,O,W,k,D,10,c[49]),k=d(k,Y,O,W,V,15,c[50]),W=d(W,k,Y,O,_,21,c[51]),O=d(O,W,k,Y,z,6,c[52]),Y=d(Y,O,W,k,S,10,c[53]),k=d(k,Y,O,W,P,15,c[54]),W=d(W,k,Y,O,C,21,c[55]),O=d(O,W,k,Y,R,6,c[56]),Y=d(Y,O,W,k,G,10,c[57]),k=d(k,Y,O,W,T,15,c[58]),W=d(W,k,Y,O,Q,21,c[59]),O=d(O,W,k,Y,M,6,c[60]),Y=d(Y,O,W,k,F,10,c[61]),k=d(k,Y,O,W,E,15,c[62]),W=d(W,k,Y,O,B,21,c[63]),I[0]=I[0]+O|0,I[1]=I[1]+W|0,I[2]=I[2]+k|0,I[3]=I[3]+Y|0},_doFinalize:function(){var p=this._data,m=p.words,b=8*this._nDataBytes,g=8*p.sigBytes;m[g>>>5]|=128<<24-g%32;var w=e.floor(b/4294967296),I=b;m[15+(g+64>>>9<<4)]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8),m[14+(g+64>>>9<<4)]=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),p.sigBytes=4*(m.length+1),this._process();for(var v=this._hash,C=v.words,E=0;E<4;E++){var S=C[E];C[E]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8)}return v},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});function h(p,m,b,g,w,I,v){var C=p+(m&b|~m&g)+w+v;return(C<<I|C>>>32-I)+m}function A(p,m,b,g,w,I,v){var C=p+(m&g|b&~g)+w+v;return(C<<I|C>>>32-I)+m}function f(p,m,b,g,w,I,v){var C=p+(m^b^g)+w+v;return(C<<I|C>>>32-I)+m}function d(p,m,b,g,w,I,v){var C=p+(b^(m|~g))+w+v;return(C<<I|C>>>32-I)+m}t.MD5=a._createHelper(u),t.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5}($r.exports);var Ioe={exports:{}};Ioe.exports=function(n){return function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,a=e.algo,l=a.MD5,c=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var A,f=this.cfg,d=f.hasher.create(),p=o.create(),m=p.words,b=f.keySize,g=f.iterations;m.length<b;){A&&d.update(A),A=d.update(u).finalize(h),d.reset();for(var w=1;w<g;w++)A=d.finalize(A),d.reset();p.concat(A)}return p.sigBytes=4*b,p}});e.EvpKDF=function(u,h,A){return c.create(A).compute(u,h)}}(),n.EvpKDF}($r.exports);var Moe={exports:{}};Moe.exports=function(n){n.lib.Cipher||function(e){var t=n,i=t.lib,o=i.Base,a=i.WordArray,l=i.BufferedBlockAlgorithm,c=t.enc;c.Utf8;var u=c.Base64,h=t.algo.EvpKDF,A=i.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(C,E){return this.create(this._ENC_XFORM_MODE,C,E)},createDecryptor:function(C,E){return this.create(this._DEC_XFORM_MODE,C,E)},init:function(C,E,S){this.cfg=this.cfg.extend(S),this._xformMode=C,this._key=E,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(C){return this._append(C),this._process()},finalize:function(C){return C&&this._append(C),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function C(E){return typeof E=="string"?v:w}return function(E){return{encrypt:function(S,M,_){return C(M).encrypt(E,S,M,_)},decrypt:function(S,M,_){return C(M).decrypt(E,S,M,_)}}}}()});i.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},d=i.BlockCipherMode=o.extend({createEncryptor:function(C,E){return this.Encryptor.create(C,E)},createDecryptor:function(C,E){return this.Decryptor.create(C,E)},init:function(C,E){this._cipher=C,this._iv=E}}),p=f.CBC=function(){var C=d.extend();function E(S,M,_){var T,D=this._iv;D?(T=D,this._iv=e):T=this._prevBlock;for(var R=0;R<_;R++)S[M+R]^=T[R]}return C.Encryptor=C.extend({processBlock:function(S,M){var _=this._cipher,T=_.blockSize;E.call(this,S,M,T),_.encryptBlock(S,M),this._prevBlock=S.slice(M,M+T)}}),C.Decryptor=C.extend({processBlock:function(S,M){var _=this._cipher,T=_.blockSize,D=S.slice(M,M+T);_.decryptBlock(S,M),E.call(this,S,M,T),this._prevBlock=D}}),C}(),m=(t.pad={}).Pkcs7={pad:function(C,E){for(var S=4*E,M=S-C.sigBytes%S,_=M<<24|M<<16|M<<8|M,T=[],D=0;D<M;D+=4)T.push(_);var R=a.create(T,M);C.concat(R)},unpad:function(C){var E=255&C.words[C.sigBytes-1>>>2];C.sigBytes-=E}};i.BlockCipher=A.extend({cfg:A.cfg.extend({mode:p,padding:m}),reset:function(){var C;A.reset.call(this);var E=this.cfg,S=E.iv,M=E.mode;this._xformMode==this._ENC_XFORM_MODE?C=M.createEncryptor:(C=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==C?this._mode.init(this,S&&S.words):(this._mode=C.call(M,this,S&&S.words),this._mode.__creator=C)},_doProcessBlock:function(C,E){this._mode.processBlock(C,E)},_doFinalize:function(){var C,E=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(E.pad(this._data,this.blockSize),C=this._process(!0)):(C=this._process(!0),E.unpad(C)),C},blockSize:4});var b=i.CipherParams=o.extend({init:function(C){this.mixIn(C)},toString:function(C){return(C||this.formatter).stringify(this)}}),g=(t.format={}).OpenSSL={stringify:function(C){var E=C.ciphertext,S=C.salt;return(S?a.create([1398893684,1701076831]).concat(S).concat(E):E).toString(u)},parse:function(C){var E,S=u.parse(C),M=S.words;return M[0]==1398893684&&M[1]==1701076831&&(E=a.create(M.slice(2,4)),M.splice(0,4),S.sigBytes-=16),b.create({ciphertext:S,salt:E})}},w=i.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(C,E,S,M){M=this.cfg.extend(M);var _=C.createEncryptor(S,M),T=_.finalize(E),D=_.cfg;return b.create({ciphertext:T,key:S,iv:D.iv,algorithm:C,mode:D.mode,padding:D.padding,blockSize:C.blockSize,formatter:M.format})},decrypt:function(C,E,S,M){return M=this.cfg.extend(M),E=this._parse(E,M.format),C.createDecryptor(S,M).finalize(E.ciphertext)},_parse:function(C,E){return typeof C=="string"?E.parse(C,this):C}}),I=(t.kdf={}).OpenSSL={execute:function(C,E,S,M){M||(M=a.random(8));var _=h.create({keySize:E+S}).compute(C,M),T=a.create(_.words.slice(E),4*S);return _.sigBytes=4*E,b.create({key:_,iv:T,salt:M})}},v=i.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:I}),encrypt:function(C,E,S,M){var _=(M=this.cfg.extend(M)).kdf.execute(S,C.keySize,C.ivSize);M.iv=_.iv;var T=w.encrypt.call(this,C,E,_.key,M);return T.mixIn(_),T},decrypt:function(C,E,S,M){M=this.cfg.extend(M),E=this._parse(E,M.format);var _=M.kdf.execute(S,C.keySize,C.ivSize,E.salt);return M.iv=_.iv,w.decrypt.call(this,C,E,_.key,M)}})}()}($r.exports);var Sw=Soe.exports=function(n){return function(){var e=n,t=e.lib.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],h=[],A=[],f=[],d=[],p=[];(function(){for(var g=[],w=0;w<256;w++)g[w]=w<128?w<<1:w<<1^283;var I=0,v=0;for(w=0;w<256;w++){var C=v^v<<1^v<<2^v<<3^v<<4;C=C>>>8^255&C^99,o[I]=C,a[C]=I;var E=g[I],S=g[E],M=g[S],_=257*g[C]^16843008*C;l[I]=_<<24|_>>>8,c[I]=_<<16|_>>>16,u[I]=_<<8|_>>>24,h[I]=_,_=16843009*M^65537*S^257*E^16843008*I,A[C]=_<<24|_>>>8,f[C]=_<<16|_>>>16,d[C]=_<<8|_>>>24,p[C]=_,I?(I=E^g[g[g[M^E]]],v^=g[g[v]]):I=v=1}})();var m=[0,1,2,4,8,16,32,64,128,27,54],b=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var g=this._keyPriorReset=this._key,w=g.words,I=g.sigBytes/4,v=4*((this._nRounds=I+6)+1),C=this._keySchedule=[],E=0;E<v;E++)E<I?C[E]=w[E]:(_=C[E-1],E%I?I>6&&E%I==4&&(_=o[_>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[255&_]):(_=o[(_=_<<8|_>>>24)>>>24]<<24|o[_>>>16&255]<<16|o[_>>>8&255]<<8|o[255&_],_^=m[E/I|0]<<24),C[E]=C[E-I]^_);for(var S=this._invKeySchedule=[],M=0;M<v;M++){if(E=v-M,M%4)var _=C[E];else _=C[E-4];S[M]=M<4||E<=4?_:A[o[_>>>24]]^f[o[_>>>16&255]]^d[o[_>>>8&255]]^p[o[255&_]]}}},encryptBlock:function(g,w){this._doCryptBlock(g,w,this._keySchedule,l,c,u,h,o)},decryptBlock:function(g,w){var I=g[w+1];g[w+1]=g[w+3],g[w+3]=I,this._doCryptBlock(g,w,this._invKeySchedule,A,f,d,p,a),I=g[w+1],g[w+1]=g[w+3],g[w+3]=I},_doCryptBlock:function(g,w,I,v,C,E,S,M){for(var _=this._nRounds,T=g[w]^I[0],D=g[w+1]^I[1],R=g[w+2]^I[2],B=g[w+3]^I[3],P=4,F=1;F<_;F++){var z=v[T>>>24]^C[D>>>16&255]^E[R>>>8&255]^S[255&B]^I[P++],Q=v[D>>>24]^C[R>>>16&255]^E[B>>>8&255]^S[255&T]^I[P++],V=v[R>>>24]^C[B>>>16&255]^E[T>>>8&255]^S[255&D]^I[P++],G=v[B>>>24]^C[T>>>16&255]^E[D>>>8&255]^S[255&R]^I[P++];T=z,D=Q,R=V,B=G}z=(M[T>>>24]<<24|M[D>>>16&255]<<16|M[R>>>8&255]<<8|M[255&B])^I[P++],Q=(M[D>>>24]<<24|M[R>>>16&255]<<16|M[B>>>8&255]<<8|M[255&T])^I[P++],V=(M[R>>>24]<<24|M[B>>>16&255]<<16|M[T>>>8&255]<<8|M[255&D])^I[P++],G=(M[B>>>24]<<24|M[T>>>16&255]<<16|M[D>>>8&255]<<8|M[255&R])^I[P++],g[w]=z,g[w+1]=Q,g[w+2]=V,g[w+3]=G},keySize:8});e.AES=t._createHelper(b)}(),n.AES}($r.exports),Toe={exports:{}},g_=Toe.exports=function(n){return n.HmacSHA256}($r.exports);function ZA(n){for(var e=n.length;--e>=0;)n[e]=0}var Z_=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Nw=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_oe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),t4=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Da=new Array(576);ZA(Da);var Cm=new Array(60);ZA(Cm);var Hm=new Array(512);ZA(Hm);var Tm=new Array(256);ZA(Tm);var rD=new Array(29);ZA(rD);var n4,i4,r4,zw=new Array(30);function y_(n,e,t,i,o){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=i,this.max_length=o,this.has_stree=n&&n.length}function v_(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}ZA(zw);var vG=function(n){return n<256?Hm[n]:Hm[256+(n>>>7)]},Vm=function(n,e){n.pending_buf[n.pending++]=255&e,n.pending_buf[n.pending++]=e>>>8&255},Cr=function(n,e,t){n.bi_valid>16-t?(n.bi_buf|=e<<n.bi_valid&65535,Vm(n,n.bi_buf),n.bi_buf=e>>16-n.bi_valid,n.bi_valid+=t-16):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Uo=function(n,e,t){Cr(n,t[2*e],t[2*e+1])},wG=function(n,e){var t=0;do t|=1&n,n>>>=1,t<<=1;while(--e>0);return t>>>1},bG=function(n,e,t){var i,o,a=new Array(16),l=0;for(i=1;i<=15;i++)a[i]=l=l+t[i-1]<<1;for(o=0;o<=e;o++){var c=n[2*o+1];c!==0&&(n[2*o]=wG(a[c]++,c))}},s4=function(n){var e;for(e=0;e<286;e++)n.dyn_ltree[2*e]=0;for(e=0;e<30;e++)n.dyn_dtree[2*e]=0;for(e=0;e<19;e++)n.bl_tree[2*e]=0;n.dyn_ltree[512]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0},xG=function(n){n.bi_valid>8?Vm(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},o4=function(n,e,t,i){var o=2*e,a=2*t;return n[o]<n[a]||n[o]===n[a]&&i[e]<=i[t]},w_=function(n,e,t){for(var i=n.heap[t],o=t<<1;o<=n.heap_len&&(o<n.heap_len&&o4(e,n.heap[o+1],n.heap[o],n.depth)&&o++,!o4(e,i,n.heap[o],n.depth));)n.heap[t]=n.heap[o],t=o,o<<=1;n.heap[t]=i},a4=function(n,e,t){var i,o,a,l,c=0;if(n.last_lit!==0)do i=n.pending_buf[n.d_buf+2*c]<<8|n.pending_buf[n.d_buf+2*c+1],o=n.pending_buf[n.l_buf+c],c++,i===0?Uo(n,o,e):(a=Tm[o],Uo(n,a+256+1,e),(l=Z_[a])!==0&&(o-=rD[a],Cr(n,o,l)),i--,a=vG(i),Uo(n,a,t),(l=Nw[a])!==0&&(i-=zw[a],Cr(n,i,l)));while(c<n.last_lit);Uo(n,256,e)},b_=function(n,e){var t,i,o,a=e.dyn_tree,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(n.heap_len=0,n.heap_max=573,t=0;t<u;t++)a[2*t]!==0?(n.heap[++n.heap_len]=h=t,n.depth[t]=0):a[2*t+1]=0;for(;n.heap_len<2;)a[2*(o=n.heap[++n.heap_len]=h<2?++h:0)]=1,n.depth[o]=0,n.opt_len--,c&&(n.static_len-=l[2*o+1]);for(e.max_code=h,t=n.heap_len>>1;t>=1;t--)w_(n,a,t);o=u;do t=n.heap[1],n.heap[1]=n.heap[n.heap_len--],w_(n,a,1),i=n.heap[1],n.heap[--n.heap_max]=t,n.heap[--n.heap_max]=i,a[2*o]=a[2*t]+a[2*i],n.depth[o]=(n.depth[t]>=n.depth[i]?n.depth[t]:n.depth[i])+1,a[2*t+1]=a[2*i+1]=o,n.heap[1]=o++,w_(n,a,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(A,f){var d,p,m,b,g,w,I=f.dyn_tree,v=f.max_code,C=f.stat_desc.static_tree,E=f.stat_desc.has_stree,S=f.stat_desc.extra_bits,M=f.stat_desc.extra_base,_=f.stat_desc.max_length,T=0;for(b=0;b<=15;b++)A.bl_count[b]=0;for(I[2*A.heap[A.heap_max]+1]=0,d=A.heap_max+1;d<573;d++)(b=I[2*I[2*(p=A.heap[d])+1]+1]+1)>_&&(b=_,T++),I[2*p+1]=b,p>v||(A.bl_count[b]++,g=0,p>=M&&(g=S[p-M]),w=I[2*p],A.opt_len+=w*(b+g),E&&(A.static_len+=w*(C[2*p+1]+g)));if(T!==0){do{for(b=_-1;A.bl_count[b]===0;)b--;A.bl_count[b]--,A.bl_count[b+1]+=2,A.bl_count[_]--,T-=2}while(T>0);for(b=_;b!==0;b--)for(p=A.bl_count[b];p!==0;)(m=A.heap[--d])>v||(I[2*m+1]!==b&&(A.opt_len+=(b-I[2*m+1])*I[2*m],I[2*m+1]=b),p--)}}(n,e),bG(a,h,n.bl_count)},l4=function(n,e,t){var i,o,a=-1,l=e[1],c=0,u=7,h=4;for(l===0&&(u=138,h=3),e[2*(t+1)+1]=65535,i=0;i<=t;i++)o=l,l=e[2*(i+1)+1],++c<u&&o===l||(c<h?n.bl_tree[2*o]+=c:o!==0?(o!==a&&n.bl_tree[2*o]++,n.bl_tree[32]++):c<=10?n.bl_tree[34]++:n.bl_tree[36]++,c=0,a=o,l===0?(u=138,h=3):o===l?(u=6,h=3):(u=7,h=4))},c4=function(n,e,t){var i,o,a=-1,l=e[1],c=0,u=7,h=4;for(l===0&&(u=138,h=3),i=0;i<=t;i++)if(o=l,l=e[2*(i+1)+1],!(++c<u&&o===l)){if(c<h)do Uo(n,o,n.bl_tree);while(--c!=0);else o!==0?(o!==a&&(Uo(n,o,n.bl_tree),c--),Uo(n,16,n.bl_tree),Cr(n,c-3,2)):c<=10?(Uo(n,17,n.bl_tree),Cr(n,c-3,3)):(Uo(n,18,n.bl_tree),Cr(n,c-11,7));c=0,a=o,l===0?(u=138,h=3):o===l?(u=6,h=3):(u=7,h=4)}},u4=!1,h4=function(n,e,t,i){Cr(n,0+(i?1:0),3),function(o,a,l,c){xG(o),c&&(Vm(o,l),Vm(o,~l)),o.pending_buf.set(o.window.subarray(a,a+l),o.pending),o.pending+=l}(n,e,t,!0)},Xm={_tr_init:function(n){u4||(function(){var e,t,i,o,a,l=new Array(16);for(i=0,o=0;o<28;o++)for(rD[o]=i,e=0;e<1<<Z_[o];e++)Tm[i++]=o;for(Tm[i-1]=o,a=0,o=0;o<16;o++)for(zw[o]=a,e=0;e<1<<Nw[o];e++)Hm[a++]=o;for(a>>=7;o<30;o++)for(zw[o]=a<<7,e=0;e<1<<Nw[o]-7;e++)Hm[256+a++]=o;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)Da[2*e+1]=8,e++,l[8]++;for(;e<=255;)Da[2*e+1]=9,e++,l[9]++;for(;e<=279;)Da[2*e+1]=7,e++,l[7]++;for(;e<=287;)Da[2*e+1]=8,e++,l[8]++;for(bG(Da,287,l),e=0;e<30;e++)Cm[2*e+1]=5,Cm[2*e]=wG(e,5);n4=new y_(Da,Z_,257,286,15),i4=new y_(Cm,Nw,0,30,15),r4=new y_(new Array(0),_oe,0,19,7)}(),u4=!0),n.l_desc=new v_(n.dyn_ltree,n4),n.d_desc=new v_(n.dyn_dtree,i4),n.bl_desc=new v_(n.bl_tree,r4),n.bi_buf=0,n.bi_valid=0,s4(n)},_tr_stored_block:h4,_tr_flush_block:function(n,e,t,i){var o,a,l=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=function(c){var u,h=4093624447;for(u=0;u<=31;u++,h>>>=1)if(1&h&&c.dyn_ltree[2*u]!==0)return 0;if(c.dyn_ltree[18]!==0||c.dyn_ltree[20]!==0||c.dyn_ltree[26]!==0)return 1;for(u=32;u<256;u++)if(c.dyn_ltree[2*u]!==0)return 1;return 0}(n)),b_(n,n.l_desc),b_(n,n.d_desc),l=function(c){var u;for(l4(c,c.dyn_ltree,c.l_desc.max_code),l4(c,c.dyn_dtree,c.d_desc.max_code),b_(c,c.bl_desc),u=18;u>=3&&c.bl_tree[2*t4[u]+1]===0;u--);return c.opt_len+=3*(u+1)+5+5+4,u}(n),o=n.opt_len+3+7>>>3,(a=n.static_len+3+7>>>3)<=o&&(o=a)):o=a=t+5,t+4<=o&&e!==-1?h4(n,e,t,i):n.strategy===4||a===o?(Cr(n,2+(i?1:0),3),a4(n,Da,Cm)):(Cr(n,4+(i?1:0),3),function(c,u,h,A){var f;for(Cr(c,u-257,5),Cr(c,h-1,5),Cr(c,A-4,4),f=0;f<A;f++)Cr(c,c.bl_tree[2*t4[f]+1],3);c4(c,c.dyn_ltree,u-1),c4(c,c.dyn_dtree,h-1)}(n,n.l_desc.max_code+1,n.d_desc.max_code+1,l+1),a4(n,n.dyn_ltree,n.dyn_dtree)),s4(n),i&&xG(n)},_tr_tally:function(n,e,t){return n.pending_buf[n.d_buf+2*n.last_lit]=e>>>8&255,n.pending_buf[n.d_buf+2*n.last_lit+1]=255&e,n.pending_buf[n.l_buf+n.last_lit]=255&t,n.last_lit++,e===0?n.dyn_ltree[2*t]++:(n.matches++,e--,n.dyn_ltree[2*(Tm[t]+256+1)]++,n.dyn_dtree[2*vG(e)]++),n.last_lit===n.lit_bufsize-1},_tr_align:function(n){Cr(n,2,3),Uo(n,256,Da),function(e){e.bi_valid===16?(Vm(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(n)}},_m=function(n,e,t,i){for(var o=65535&n|0,a=n>>>16&65535|0,l=0;t!==0;){t-=l=t>2e3?2e3:t;do a=a+(o=o+e[i++]|0)|0;while(--l);o%=65521,a%=65521}return o|a<<16|0},Doe=new Uint32Array(function(){for(var n,e=[],t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}()),yi=function(n,e,t,i){var o=Doe,a=i+t;n^=-1;for(var l=i;l<a;l++)n=n>>>8^o[255&(n^e[l])];return-1^n},Cu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ct={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Roe=Xm._tr_init,Loe=Xm._tr_stored_block,Boe=Xm._tr_flush_block,Kl=Xm._tr_tally,koe=Xm._tr_align,bu=ct.Z_NO_FLUSH,Poe=ct.Z_PARTIAL_FLUSH,Noe=ct.Z_FULL_FLUSH,Wl=ct.Z_FINISH,A4=ct.Z_BLOCK,No=ct.Z_OK,f4=ct.Z_STREAM_END,bs=ct.Z_STREAM_ERROR,Foe=ct.Z_DATA_ERROR,x_=ct.Z_BUF_ERROR,Uoe=ct.Z_DEFAULT_COMPRESSION,Ooe=ct.Z_FILTERED,Ew=ct.Z_HUFFMAN_ONLY,Qoe=ct.Z_RLE,Goe=ct.Z_FIXED,zoe=ct.Z_DEFAULT_STRATEGY,Hoe=ct.Z_UNKNOWN,Hw=ct.Z_DEFLATED,Hl=function(n,e){return n.msg=Cu[e],e},d4=function(n){return(n<<1)-(n>4?9:0)},Xl=function(n){for(var e=n.length;--e>=0;)n[e]=0},jl=function(n,e,t){return(e<<n.hash_shift^t)&n.hash_mask},zl=function(n){var e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},_i=function(n,e){Boe(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,zl(n.strm)},Wt=function(n,e){n.pending_buf[n.pending++]=e},ym=function(n,e){n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=255&e},CG=function(n,e){var t,i,o=n.max_chain_length,a=n.strstart,l=n.prev_length,c=n.nice_match,u=n.strstart>n.w_size-262?n.strstart-(n.w_size-262):0,h=n.window,A=n.w_mask,f=n.prev,d=n.strstart+258,p=h[a+l-1],m=h[a+l];n.prev_length>=n.good_match&&(o>>=2),c>n.lookahead&&(c=n.lookahead);do if(h[(t=e)+l]===m&&h[t+l-1]===p&&h[t]===h[a]&&h[++t]===h[a+1]){a+=2,t++;do;while(h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&h[++a]===h[++t]&&a<d);if(i=258-(d-a),a=d-258,i>l){if(n.match_start=e,l=i,i>=c)break;p=h[a+l-1],m=h[a+l]}}while((e=f[e&A])>u&&--o!=0);return l<=n.lookahead?l:n.lookahead},yu=function(n){var e,t,i,o,a,l,c,u,h,A,f=n.w_size;do{if(o=n.window_size-n.lookahead-n.strstart,n.strstart>=f+(f-262)){n.window.set(n.window.subarray(f,f+f),0),n.match_start-=f,n.strstart-=f,n.block_start-=f,e=t=n.hash_size;do i=n.head[--e],n.head[e]=i>=f?i-f:0;while(--t);e=t=f;do i=n.prev[--e],n.prev[e]=i>=f?i-f:0;while(--t);o+=f}if(n.strm.avail_in===0)break;if(l=n.strm,c=n.window,u=n.strstart+n.lookahead,h=o,A=void 0,(A=l.avail_in)>h&&(A=h),t=A===0?0:(l.avail_in-=A,c.set(l.input.subarray(l.next_in,l.next_in+A),u),l.state.wrap===1?l.adler=_m(l.adler,c,A,u):l.state.wrap===2&&(l.adler=yi(l.adler,c,A,u)),l.next_in+=A,l.total_in+=A,A),n.lookahead+=t,n.lookahead+n.insert>=3)for(a=n.strstart-n.insert,n.ins_h=n.window[a],n.ins_h=jl(n,n.ins_h,n.window[a+1]);n.insert&&(n.ins_h=jl(n,n.ins_h,n.window[a+3-1]),n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++,n.insert--,!(n.lookahead+n.insert<3)););}while(n.lookahead<262&&n.strm.avail_in!==0)},C_=function(n,e){for(var t,i;;){if(n.lookahead<262){if(yu(n),n.lookahead<262&&e===bu)return 1;if(n.lookahead===0)break}if(t=0,n.lookahead>=3&&(n.ins_h=jl(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-262&&(n.match_length=CG(n,t)),n.match_length>=3)if(i=Kl(n,n.strstart-n.match_start,n.match_length-3),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=3){n.match_length--;do n.strstart++,n.ins_h=jl(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!=0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=jl(n,n.ins_h,n.window[n.strstart+1]);else i=Kl(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(_i(n,!1),n.strm.avail_out===0))return 1}return n.insert=n.strstart<2?n.strstart:2,e===Wl?(_i(n,!0),n.strm.avail_out===0?3:4):n.last_lit&&(_i(n,!1),n.strm.avail_out===0)?1:2},BA=function(n,e){for(var t,i,o;;){if(n.lookahead<262){if(yu(n),n.lookahead<262&&e===bu)return 1;if(n.lookahead===0)break}if(t=0,n.lookahead>=3&&(n.ins_h=jl(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=2,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-262&&(n.match_length=CG(n,t),n.match_length<=5&&(n.strategy===Ooe||n.match_length===3&&n.strstart-n.match_start>4096)&&(n.match_length=2)),n.prev_length>=3&&n.match_length<=n.prev_length){o=n.strstart+n.lookahead-3,i=Kl(n,n.strstart-1-n.prev_match,n.prev_length-3),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=o&&(n.ins_h=jl(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!=0);if(n.match_available=0,n.match_length=2,n.strstart++,i&&(_i(n,!1),n.strm.avail_out===0))return 1}else if(n.match_available){if((i=Kl(n,0,n.window[n.strstart-1]))&&_i(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return 1}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=Kl(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<2?n.strstart:2,e===Wl?(_i(n,!0),n.strm.avail_out===0?3:4):n.last_lit&&(_i(n,!1),n.strm.avail_out===0)?1:2};function Po(n,e,t,i,o){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=i,this.func=o}var Sm=[new Po(0,0,0,0,function(n,e){var t=65535;for(t>n.pending_buf_size-5&&(t=n.pending_buf_size-5);;){if(n.lookahead<=1){if(yu(n),n.lookahead===0&&e===bu)return 1;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var i=n.block_start+t;if((n.strstart===0||n.strstart>=i)&&(n.lookahead=n.strstart-i,n.strstart=i,_i(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-262&&(_i(n,!1),n.strm.avail_out===0))return 1}return n.insert=0,e===Wl?(_i(n,!0),n.strm.avail_out===0?3:4):(n.strstart>n.block_start&&(_i(n,!1),n.strm.avail_out),1)}),new Po(4,4,8,4,C_),new Po(4,5,16,8,C_),new Po(4,6,32,32,C_),new Po(4,4,16,16,BA),new Po(8,16,32,32,BA),new Po(8,16,128,128,BA),new Po(8,32,128,256,BA),new Po(32,128,258,1024,BA),new Po(32,258,258,4096,BA)];function Voe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Hw,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Xl(this.dyn_ltree),Xl(this.dyn_dtree),Xl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Xl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Xl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var SG=function(n){if(!n||!n.state)return Hl(n,bs);n.total_in=n.total_out=0,n.data_type=Hoe;var e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,n.adler=e.wrap===2?0:1,e.last_flush=bu,Roe(e),No},EG=function(n){var e,t=SG(n);return t===No&&((e=n.state).window_size=2*e.w_size,Xl(e.head),e.max_lazy_match=Sm[e.level].max_lazy,e.good_match=Sm[e.level].good_length,e.nice_match=Sm[e.level].nice_length,e.max_chain_length=Sm[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},p4=function(n,e,t,i,o,a){if(!n)return bs;var l=1;if(e===Uoe&&(e=6),i<0?(l=0,i=-i):i>15&&(l=2,i-=16),o<1||o>9||t!==Hw||i<8||i>15||e<0||e>9||a<0||a>Goe)return Hl(n,bs);i===8&&(i=9);var c=new Voe;return n.state=c,c.strm=n,c.wrap=l,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new Uint8Array(2*c.w_size),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new Uint8Array(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=t,EG(n)},Dm={deflateInit:function(n,e){return p4(n,e,Hw,15,8,zoe)},deflateInit2:p4,deflateReset:EG,deflateResetKeep:SG,deflateSetHeader:function(n,e){return n&&n.state?n.state.wrap!==2?bs:(n.state.gzhead=e,No):bs},deflate:function(n,e){var t,i;if(!n||!n.state||e>A4||e<0)return n?Hl(n,bs):bs;var o=n.state;if(!n.output||!n.input&&n.avail_in!==0||o.status===666&&e!==Wl)return Hl(n,n.avail_out===0?x_:bs);o.strm=n;var a=o.last_flush;if(o.last_flush=e,o.status===42)if(o.wrap===2)n.adler=0,Wt(o,31),Wt(o,139),Wt(o,8),o.gzhead?(Wt(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Wt(o,255&o.gzhead.time),Wt(o,o.gzhead.time>>8&255),Wt(o,o.gzhead.time>>16&255),Wt(o,o.gzhead.time>>24&255),Wt(o,o.level===9?2:o.strategy>=Ew||o.level<2?4:0),Wt(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Wt(o,255&o.gzhead.extra.length),Wt(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(n.adler=yi(n.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(Wt(o,0),Wt(o,0),Wt(o,0),Wt(o,0),Wt(o,0),Wt(o,o.level===9?2:o.strategy>=Ew||o.level<2?4:0),Wt(o,3),o.status=113);else{var l=Hw+(o.w_bits-8<<4)<<8;l|=(o.strategy>=Ew||o.level<2?0:o.level<6?1:o.level===6?2:3)<<6,o.strstart!==0&&(l|=32),l+=31-l%31,o.status=113,ym(o,l),o.strstart!==0&&(ym(o,n.adler>>>16),ym(o,65535&n.adler)),n.adler=1}if(o.status===69)if(o.gzhead.extra){for(t=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),zl(n),t=o.pending,o.pending!==o.pending_buf_size));)Wt(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(o.status===73)if(o.gzhead.name){t=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),zl(n),t=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Wt(o,i)}while(i!==0);o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),i===0&&(o.gzindex=0,o.status=91)}else o.status=91;if(o.status===91)if(o.gzhead.comment){t=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),zl(n),t=o.pending,o.pending===o.pending_buf_size)){i=1;break}i=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Wt(o,i)}while(i!==0);o.gzhead.hcrc&&o.pending>t&&(n.adler=yi(n.adler,o.pending_buf,o.pending-t,t)),i===0&&(o.status=103)}else o.status=103;if(o.status===103&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&zl(n),o.pending+2<=o.pending_buf_size&&(Wt(o,255&n.adler),Wt(o,n.adler>>8&255),n.adler=0,o.status=113)):o.status=113),o.pending!==0){if(zl(n),n.avail_out===0)return o.last_flush=-1,No}else if(n.avail_in===0&&d4(e)<=d4(a)&&e!==Wl)return Hl(n,x_);if(o.status===666&&n.avail_in!==0)return Hl(n,x_);if(n.avail_in!==0||o.lookahead!==0||e!==bu&&o.status!==666){var c=o.strategy===Ew?function(u,h){for(var A;;){if(u.lookahead===0&&(yu(u),u.lookahead===0)){if(h===bu)return 1;break}if(u.match_length=0,A=Kl(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,A&&(_i(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Wl?(_i(u,!0),u.strm.avail_out===0?3:4):u.last_lit&&(_i(u,!1),u.strm.avail_out===0)?1:2}(o,e):o.strategy===Qoe?function(u,h){for(var A,f,d,p,m=u.window;;){if(u.lookahead<=258){if(yu(u),u.lookahead<=258&&h===bu)return 1;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=3&&u.strstart>0&&(f=m[d=u.strstart-1])===m[++d]&&f===m[++d]&&f===m[++d]){p=u.strstart+258;do;while(f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&f===m[++d]&&d<p);u.match_length=258-(p-d),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=3?(A=Kl(u,1,u.match_length-3),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(A=Kl(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),A&&(_i(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Wl?(_i(u,!0),u.strm.avail_out===0?3:4):u.last_lit&&(_i(u,!1),u.strm.avail_out===0)?1:2}(o,e):Sm[o.level].func(o,e);if(c!==3&&c!==4||(o.status=666),c===1||c===3)return n.avail_out===0&&(o.last_flush=-1),No;if(c===2&&(e===Poe?koe(o):e!==A4&&(Loe(o,0,0,!1),e===Noe&&(Xl(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),zl(n),n.avail_out===0))return o.last_flush=-1,No}return e!==Wl?No:o.wrap<=0?f4:(o.wrap===2?(Wt(o,255&n.adler),Wt(o,n.adler>>8&255),Wt(o,n.adler>>16&255),Wt(o,n.adler>>24&255),Wt(o,255&n.total_in),Wt(o,n.total_in>>8&255),Wt(o,n.total_in>>16&255),Wt(o,n.total_in>>24&255)):(ym(o,n.adler>>>16),ym(o,65535&n.adler)),zl(n),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?No:f4)},deflateEnd:function(n){if(!n||!n.state)return bs;var e=n.state.status;return e!==42&&e!==69&&e!==73&&e!==91&&e!==103&&e!==113&&e!==666?Hl(n,bs):(n.state=null,e===113?Hl(n,Foe):No)},deflateSetDictionary:function(n,e){var t=e.length;if(!n||!n.state)return bs;var i=n.state,o=i.wrap;if(o===2||o===1&&i.status!==42||i.lookahead)return bs;if(o===1&&(n.adler=_m(n.adler,e,t,0)),i.wrap=0,t>=i.w_size){o===0&&(Xl(i.head),i.strstart=0,i.block_start=0,i.insert=0);var a=new Uint8Array(i.w_size);a.set(e.subarray(t-i.w_size,t),0),e=a,t=i.w_size}var l=n.avail_in,c=n.next_in,u=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,yu(i);i.lookahead>=3;){var h=i.strstart,A=i.lookahead-2;do i.ins_h=jl(i,i.ins_h,i.window[h+3-1]),i.prev[h&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=h,h++;while(--A);i.strstart=h,i.lookahead=2,yu(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,n.next_in=c,n.input=u,n.avail_in=l,i.wrap=o,No},deflateInfo:"pako deflate (from Nodeca project)"},Woe=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},IG=function(n){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if($t(t)!=="object")throw new TypeError(t+"must be non-object");for(var i in t)Woe(t,i)&&(n[i]=t[i])}}return n},MG=function(n){for(var e=0,t=0,i=n.length;t<i;t++)e+=n[t].length;for(var o=new Uint8Array(e),a=0,l=0,c=n.length;a<c;a++){var u=n[a];o.set(u,l),l+=u.length}return o},TG=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{TG=!1}for(HA=new Uint8Array(256),Ta=0;Ta<256;Ta++)HA[Ta]=Ta>=252?6:Ta>=248?5:Ta>=240?4:Ta>=224?3:Ta>=192?2:1;var HA,Ta;HA[254]=HA[254]=1;var sD=function(n){if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);var e,t,i,o,a,l=n.length,c=0;for(o=0;o<l;o++)(64512&(t=n.charCodeAt(o)))==55296&&o+1<l&&(64512&(i=n.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(i-56320),o++),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),a=0,o=0;a<c;o++)(64512&(t=n.charCodeAt(o)))==55296&&o+1<l&&(64512&(i=n.charCodeAt(o+1)))==56320&&(t=65536+(t-55296<<10)+(i-56320),o++),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|63&t):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|63&t):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|63&t);return e},Xoe=function(n,e){var t,i,o=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));var a=new Array(2*o);for(i=0,t=0;t<o;){var l=n[t++];if(l<128)a[i++]=l;else{var c=HA[l];if(c>4)a[i++]=65533,t+=c-1;else{for(l&=c===2?31:c===3?15:7;c>1&&t<o;)l=l<<6|63&n[t++],c--;c>1?a[i++]=65533:l<65536?a[i++]=l:(l-=65536,a[i++]=55296|l>>10&1023,a[i++]=56320|1023&l)}}}return function(u,h){if(h<65534&&u.subarray&&TG)return String.fromCharCode.apply(null,u.length===h?u:u.subarray(0,h));for(var A="",f=0;f<h;f++)A+=String.fromCharCode(u[f]);return A}(a,i)},Yoe=function(n,e){(e=e||n.length)>n.length&&(e=n.length);for(var t=e-1;t>=0&&(192&n[t])==128;)t--;return t<0||t===0?e:t+HA[n[t]]>e?t:e},_G=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},DG=Object.prototype.toString,Zoe=ct.Z_NO_FLUSH,Koe=ct.Z_SYNC_FLUSH,joe=ct.Z_FULL_FLUSH,Joe=ct.Z_FINISH,Vw=ct.Z_OK,qoe=ct.Z_STREAM_END,$oe=ct.Z_DEFAULT_COMPRESSION,eae=ct.Z_DEFAULT_STRATEGY,tae=ct.Z_DEFLATED;function Rm(n){this.options=IG({level:$oe,method:tae,chunkSize:16384,windowBits:15,memLevel:8,strategy:eae},n||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _G,this.strm.avail_out=0;var t=Dm.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Vw)throw new Error(Cu[t]);if(e.header&&Dm.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=typeof e.dictionary=="string"?sD(e.dictionary):DG.call(e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(e.dictionary):e.dictionary,(t=Dm.deflateSetDictionary(this.strm,i))!==Vw)throw new Error(Cu[t]);this._dict_set=!0}}function S_(n,e){var t=new Rm(e);if(t.push(n,!0),t.err)throw t.msg||Cu[t.err];return t.result}Rm.prototype.push=function(n,e){var t,i,o=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(i=e===~~e?e:e===!0?Joe:Zoe,typeof n=="string"?o.input=sD(n):DG.call(n)==="[object ArrayBuffer]"?o.input=new Uint8Array(n):o.input=n,o.next_in=0,o.avail_in=o.input.length;;)if(o.avail_out===0&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(i===Koe||i===joe)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if((t=Dm.deflate(o,i))===qoe)return o.next_out>0&&this.onData(o.output.subarray(0,o.next_out)),t=Dm.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===Vw;if(o.avail_out!==0){if(i>0&&o.next_out>0)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(o.avail_in===0)break}else this.onData(o.output)}return!0},Rm.prototype.onData=function(n){this.chunks.push(n)},Rm.prototype.onEnd=function(n){n===Vw&&(this.result=MG(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};var Iw={Deflate:Rm,deflate:S_,deflateRaw:function(n,e){return(e=e||{}).raw=!0,S_(n,e)},gzip:function(n,e){return(e=e||{}).gzip=!0,S_(n,e)},constants:ct},nae=function(n,e){var t,i,o,a,l,c,u,h,A,f,d,p,m,b,g,w,I,v,C,E,S,M,_,T,D=n.state;t=n.next_in,_=n.input,i=t+(n.avail_in-5),o=n.next_out,T=n.output,a=o-(e-n.avail_out),l=o+(n.avail_out-257),c=D.dmax,u=D.wsize,h=D.whave,A=D.wnext,f=D.window,d=D.hold,p=D.bits,m=D.lencode,b=D.distcode,g=(1<<D.lenbits)-1,w=(1<<D.distbits)-1;e:do{p<15&&(d+=_[t++]<<p,p+=8,d+=_[t++]<<p,p+=8),I=m[d&g];t:for(;;){if(d>>>=v=I>>>24,p-=v,(v=I>>>16&255)===0)T[o++]=65535&I;else{if(!(16&v)){if(!(64&v)){I=m[(65535&I)+(d&(1<<v)-1)];continue t}if(32&v){D.mode=12;break e}n.msg="invalid literal/length code",D.mode=30;break e}C=65535&I,(v&=15)&&(p<v&&(d+=_[t++]<<p,p+=8),C+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=_[t++]<<p,p+=8,d+=_[t++]<<p,p+=8),I=b[d&w];n:for(;;){if(d>>>=v=I>>>24,p-=v,!(16&(v=I>>>16&255))){if(!(64&v)){I=b[(65535&I)+(d&(1<<v)-1)];continue n}n.msg="invalid distance code",D.mode=30;break e}if(E=65535&I,p<(v&=15)&&(d+=_[t++]<<p,(p+=8)<v&&(d+=_[t++]<<p,p+=8)),(E+=d&(1<<v)-1)>c){n.msg="invalid distance too far back",D.mode=30;break e}if(d>>>=v,p-=v,E>(v=o-a)){if((v=E-v)>h&&D.sane){n.msg="invalid distance too far back",D.mode=30;break e}if(S=0,M=f,A===0){if(S+=u-v,v<C){C-=v;do T[o++]=f[S++];while(--v);S=o-E,M=T}}else if(A<v){if(S+=u+A-v,(v-=A)<C){C-=v;do T[o++]=f[S++];while(--v);if(S=0,A<C){C-=v=A;do T[o++]=f[S++];while(--v);S=o-E,M=T}}}else if(S+=A-v,v<C){C-=v;do T[o++]=f[S++];while(--v);S=o-E,M=T}for(;C>2;)T[o++]=M[S++],T[o++]=M[S++],T[o++]=M[S++],C-=3;C&&(T[o++]=M[S++],C>1&&(T[o++]=M[S++]))}else{S=o-E;do T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],C-=3;while(C>2);C&&(T[o++]=T[S++],C>1&&(T[o++]=T[S++]))}break}}break}}while(t<i&&o<l);t-=C=p>>3,d&=(1<<(p-=C<<3))-1,n.next_in=t,n.next_out=o,n.avail_in=t<i?i-t+5:5-(t-i),n.avail_out=o<l?l-o+257:257-(o-l),D.hold=d,D.bits=p},iae=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rae=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),sae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oae=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Lm=function(n,e,t,i,o,a,l,c){var u,h,A,f,d,p,m,b,g,w=c.bits,I=0,v=0,C=0,E=0,S=0,M=0,_=0,T=0,D=0,R=0,B=null,P=0,F=new Uint16Array(16),z=new Uint16Array(16),Q=null,V=0;for(I=0;I<=15;I++)F[I]=0;for(v=0;v<i;v++)F[e[t+v]]++;for(S=w,E=15;E>=1&&F[E]===0;E--);if(S>E&&(S=E),E===0)return o[a++]=20971520,o[a++]=20971520,c.bits=1,0;for(C=1;C<E&&F[C]===0;C++);for(S<C&&(S=C),T=1,I=1;I<=15;I++)if(T<<=1,(T-=F[I])<0)return-1;if(T>0&&(n===0||E!==1))return-1;for(z[1]=0,I=1;I<15;I++)z[I+1]=z[I]+F[I];for(v=0;v<i;v++)e[t+v]!==0&&(l[z[e[t+v]]++]=v);if(n===0?(B=Q=l,p=19):n===1?(B=iae,P-=257,Q=rae,V-=257,p=256):(B=sae,Q=oae,p=-1),R=0,v=0,I=C,d=a,M=S,_=0,A=-1,f=(D=1<<S)-1,n===1&&D>852||n===2&&D>592)return 1;for(;;){m=I-_,l[v]<p?(b=0,g=l[v]):l[v]>p?(b=Q[V+l[v]],g=B[P+l[v]]):(b=96,g=0),u=1<<I-_,C=h=1<<M;do o[d+(R>>_)+(h-=u)]=m<<24|b<<16|g|0;while(h!==0);for(u=1<<I-1;R&u;)u>>=1;if(u!==0?(R&=u-1,R+=u):R=0,v++,--F[I]==0){if(I===E)break;I=e[t+l[v]]}if(I>S&&(R&f)!==A){for(_===0&&(_=S),d+=C,T=1<<(M=I-_);M+_<E&&!((T-=F[M+_])<=0);)M++,T<<=1;if(D+=1<<M,n===1&&D>852||n===2&&D>592)return 1;o[A=R&f]=S<<24|M<<16|d-a|0}}return R!==0&&(o[d+R]=I-_<<24|64<<16|0),c.bits=S,0},m4=ct.Z_FINISH,aae=ct.Z_BLOCK,Mw=ct.Z_TREES,mu=ct.Z_OK,lae=ct.Z_STREAM_END,cae=ct.Z_NEED_DICT,xs=ct.Z_STREAM_ERROR,g4=ct.Z_DATA_ERROR,y4=ct.Z_MEM_ERROR,uae=ct.Z_BUF_ERROR,v4=ct.Z_DEFLATED,w4=function(n){return(n>>>24&255)+(n>>>8&65280)+((65280&n)<<8)+((255&n)<<24)};function hae(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var E_,I_,RG=function(n){if(!n||!n.state)return xs;var e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,mu},LG=function(n){if(!n||!n.state)return xs;var e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,RG(n)},BG=function(n,e){var t;if(!n||!n.state)return xs;var i=n.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?xs:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,LG(n))},b4=function(n,e){if(!n)return xs;var t=new hae;n.state=t,t.window=null;var i=BG(n,e);return i!==mu&&(n.state=null),i},x4=!0,Aae=function(n){if(x4){E_=new Int32Array(512),I_=new Int32Array(32);for(var e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Lm(1,n.lens,0,288,E_,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Lm(2,n.lens,0,32,I_,0,n.work,{bits:5}),x4=!1}n.lencode=E_,n.lenbits=9,n.distcode=I_,n.distbits=5},C4=function(n,e,t,i){var o,a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),a.window.set(e.subarray(t-i,t-i+o),a.wnext),(i-=o)?(a.window.set(e.subarray(t-i,t),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},Ba={inflateReset:LG,inflateReset2:BG,inflateResetKeep:RG,inflateInit:function(n){return b4(n,15)},inflateInit2:b4,inflate:function(n,e){var t,i,o,a,l,c,u,h,A,f,d,p,m,b,g,w,I,v,C,E,S,M,_,T,D=0,R=new Uint8Array(4),B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return xs;(t=n.state).mode===12&&(t.mode=13),l=n.next_out,o=n.output,u=n.avail_out,a=n.next_in,i=n.input,c=n.avail_in,h=t.hold,A=t.bits,f=c,d=u,M=mu;e:for(;;)switch(t.mode){case 1:if(t.wrap===0){t.mode=13;break}for(;A<16;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(2&t.wrap&&h===35615){t.check=0,R[0]=255&h,R[1]=h>>>8&255,t.check=yi(t.check,R,2,0),h=0,A=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&h)<<8)+(h>>8))%31){n.msg="incorrect header check",t.mode=30;break}if((15&h)!==v4){n.msg="unknown compression method",t.mode=30;break}if(A-=4,S=8+(15&(h>>>=4)),t.wbits===0)t.wbits=S;else if(S>t.wbits){n.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,n.adler=t.check=1,t.mode=512&h?10:12,h=0,A=0;break;case 2:for(;A<16;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(t.flags=h,(255&t.flags)!==v4){n.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){n.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=h>>8&1),512&t.flags&&(R[0]=255&h,R[1]=h>>>8&255,t.check=yi(t.check,R,2,0)),h=0,A=0,t.mode=3;case 3:for(;A<32;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.head&&(t.head.time=h),512&t.flags&&(R[0]=255&h,R[1]=h>>>8&255,R[2]=h>>>16&255,R[3]=h>>>24&255,t.check=yi(t.check,R,4,0)),h=0,A=0,t.mode=4;case 4:for(;A<16;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.head&&(t.head.xflags=255&h,t.head.os=h>>8),512&t.flags&&(R[0]=255&h,R[1]=h>>>8&255,t.check=yi(t.check,R,2,0)),h=0,A=0,t.mode=5;case 5:if(1024&t.flags){for(;A<16;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.length=h,t.head&&(t.head.extra_len=h),512&t.flags&&(R[0]=255&h,R[1]=h>>>8&255,t.check=yi(t.check,R,2,0)),h=0,A=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((p=t.length)>c&&(p=c),p&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(a,a+p),S)),512&t.flags&&(t.check=yi(t.check,i,p,a)),c-=p,a+=p,t.length-=p),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(c===0)break e;p=0;do S=i[a+p++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&p<c);if(512&t.flags&&(t.check=yi(t.check,i,p,a)),c-=p,a+=p,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(c===0)break e;p=0;do S=i[a+p++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&p<c);if(512&t.flags&&(t.check=yi(t.check,i,p,a)),c-=p,a+=p,S)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;A<16;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(h!==(65535&t.check)){n.msg="header crc mismatch",t.mode=30;break}h=0,A=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=12;break;case 10:for(;A<32;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}n.adler=t.check=w4(h),h=0,A=0,t.mode=11;case 11:if(t.havedict===0)return n.next_out=l,n.avail_out=u,n.next_in=a,n.avail_in=c,t.hold=h,t.bits=A,cae;n.adler=t.check=1,t.mode=12;case 12:if(e===aae||e===Mw)break e;case 13:if(t.last){h>>>=7&A,A-=7&A,t.mode=27;break}for(;A<3;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}switch(t.last=1&h,A-=1,3&(h>>>=1)){case 0:t.mode=14;break;case 1:if(Aae(t),t.mode=20,e===Mw){h>>>=2,A-=2;break e}break;case 2:t.mode=17;break;case 3:n.msg="invalid block type",t.mode=30}h>>>=2,A-=2;break;case 14:for(h>>>=7&A,A-=7&A;A<32;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if((65535&h)!=(h>>>16^65535)){n.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&h,h=0,A=0,t.mode=15,e===Mw)break e;case 15:t.mode=16;case 16:if(p=t.length){if(p>c&&(p=c),p>u&&(p=u),p===0)break e;o.set(i.subarray(a,a+p),l),c-=p,a+=p,u-=p,l+=p,t.length-=p;break}t.mode=12;break;case 17:for(;A<14;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(t.nlen=257+(31&h),h>>>=5,A-=5,t.ndist=1+(31&h),h>>>=5,A-=5,t.ncode=4+(15&h),h>>>=4,A-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;A<3;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.lens[B[t.have++]]=7&h,h>>>=3,A-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,_={bits:t.lenbits},M=Lm(0,t.lens,0,19,t.lencode,0,t.work,_),t.lenbits=_.bits,M){n.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;w=(D=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,I=65535&D,!((g=D>>>24)<=A);){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(I<16)h>>>=g,A-=g,t.lens[t.have++]=I;else{if(I===16){for(T=g+2;A<T;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(h>>>=g,A-=g,t.have===0){n.msg="invalid bit length repeat",t.mode=30;break}S=t.lens[t.have-1],p=3+(3&h),h>>>=2,A-=2}else if(I===17){for(T=g+3;A<T;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}A-=g,S=0,p=3+(7&(h>>>=g)),h>>>=3,A-=3}else{for(T=g+7;A<T;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}A-=g,S=0,p=11+(127&(h>>>=g)),h>>>=7,A-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=30;break}for(;p--;)t.lens[t.have++]=S}}if(t.mode===30)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,_={bits:t.lenbits},M=Lm(1,t.lens,0,t.nlen,t.lencode,0,t.work,_),t.lenbits=_.bits,M){n.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,_={bits:t.distbits},M=Lm(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,_),t.distbits=_.bits,M){n.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===Mw)break e;case 20:t.mode=21;case 21:if(c>=6&&u>=258){n.next_out=l,n.avail_out=u,n.next_in=a,n.avail_in=c,t.hold=h,t.bits=A,nae(n,d),l=n.next_out,o=n.output,u=n.avail_out,a=n.next_in,i=n.input,c=n.avail_in,h=t.hold,A=t.bits,t.mode===12&&(t.back=-1);break}for(t.back=0;w=(D=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,I=65535&D,!((g=D>>>24)<=A);){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(w&&!(240&w)){for(v=g,C=w,E=I;w=(D=t.lencode[E+((h&(1<<v+C)-1)>>v)])>>>16&255,I=65535&D,!(v+(g=D>>>24)<=A);){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}h>>>=v,A-=v,t.back+=v}if(h>>>=g,A-=g,t.back+=g,t.length=I,w===0){t.mode=26;break}if(32&w){t.back=-1,t.mode=12;break}if(64&w){n.msg="invalid literal/length code",t.mode=30;break}t.extra=15&w,t.mode=22;case 22:if(t.extra){for(T=t.extra;A<T;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,A-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;w=(D=t.distcode[h&(1<<t.distbits)-1])>>>16&255,I=65535&D,!((g=D>>>24)<=A);){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(!(240&w)){for(v=g,C=w,E=I;w=(D=t.distcode[E+((h&(1<<v+C)-1)>>v)])>>>16&255,I=65535&D,!(v+(g=D>>>24)<=A);){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}h>>>=v,A-=v,t.back+=v}if(h>>>=g,A-=g,t.back+=g,64&w){n.msg="invalid distance code",t.mode=30;break}t.offset=I,t.extra=15&w,t.mode=24;case 24:if(t.extra){for(T=t.extra;A<T;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,A-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(u===0)break e;if(p=d-u,t.offset>p){if((p=t.offset-p)>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=30;break}p>t.wnext?(p-=t.wnext,m=t.wsize-p):m=t.wnext-p,p>t.length&&(p=t.length),b=t.window}else b=o,m=l-t.offset,p=t.length;p>u&&(p=u),u-=p,t.length-=p;do o[l++]=b[m++];while(--p);t.length===0&&(t.mode=21);break;case 26:if(u===0)break e;o[l++]=t.length,u--,t.mode=21;break;case 27:if(t.wrap){for(;A<32;){if(c===0)break e;c--,h|=i[a++]<<A,A+=8}if(d-=u,n.total_out+=d,t.total+=d,d&&(n.adler=t.check=t.flags?yi(t.check,o,d,l-d):_m(t.check,o,d,l-d)),d=u,(t.flags?h:w4(h))!==t.check){n.msg="incorrect data check",t.mode=30;break}h=0,A=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;A<32;){if(c===0)break e;c--,h+=i[a++]<<A,A+=8}if(h!==(4294967295&t.total)){n.msg="incorrect length check",t.mode=30;break}h=0,A=0}t.mode=29;case 29:M=lae;break e;case 30:M=g4;break e;case 31:return y4;case 32:default:return xs}return n.next_out=l,n.avail_out=u,n.next_in=a,n.avail_in=c,t.hold=h,t.bits=A,(t.wsize||d!==n.avail_out&&t.mode<30&&(t.mode<27||e!==m4))&&C4(n,n.output,n.next_out,d-n.avail_out),f-=n.avail_in,d-=n.avail_out,n.total_in+=f,n.total_out+=d,t.total+=d,t.wrap&&d&&(n.adler=t.check=t.flags?yi(t.check,o,d,n.next_out-d):_m(t.check,o,d,n.next_out-d)),n.data_type=t.bits+(t.last?64:0)+(t.mode===12?128:0)+(t.mode===20||t.mode===15?256:0),(f===0&&d===0||e===m4)&&M===mu&&(M=uae),M},inflateEnd:function(n){if(!n||!n.state)return xs;var e=n.state;return e.window&&(e.window=null),n.state=null,mu},inflateGetHeader:function(n,e){if(!n||!n.state)return xs;var t=n.state;return 2&t.wrap?(t.head=e,e.done=!1,mu):xs},inflateSetDictionary:function(n,e){var t,i=e.length;return n&&n.state?(t=n.state).wrap!==0&&t.mode!==11?xs:t.mode===11&&_m(1,e,i,0)!==t.check?g4:C4(n,e,i,i)?(t.mode=31,y4):(t.havedict=1,mu):xs},inflateInfo:"pako inflate (from Nodeca project)"},fae=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},kG=Object.prototype.toString,dae=ct.Z_NO_FLUSH,pae=ct.Z_FINISH,Bm=ct.Z_OK,M_=ct.Z_STREAM_END,T_=ct.Z_NEED_DICT,mae=ct.Z_STREAM_ERROR,S4=ct.Z_DATA_ERROR,gae=ct.Z_MEM_ERROR;function km(n){this.options=IG({chunkSize:65536,windowBits:15,to:""},n||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||n&&n.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _G,this.strm.avail_out=0;var t=Ba.inflateInit2(this.strm,e.windowBits);if(t!==Bm)throw new Error(Cu[t]);if(this.header=new fae,Ba.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=sD(e.dictionary):kG.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ba.inflateSetDictionary(this.strm,e.dictionary))!==Bm))throw new Error(Cu[t])}function __(n,e){var t=new km(e);if(t.push(n),t.err)throw t.msg||Cu[t.err];return t.result}km.prototype.push=function(n,e){var t,i,o,a=this.strm,l=this.options.chunkSize,c=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:e===!0?pae:dae,kG.call(n)==="[object ArrayBuffer]"?a.input=new Uint8Array(n):a.input=n,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(l),a.next_out=0,a.avail_out=l),(t=Ba.inflate(a,i))===T_&&c&&((t=Ba.inflateSetDictionary(a,c))===Bm?t=Ba.inflate(a,i):t===S4&&(t=T_));a.avail_in>0&&t===M_&&a.state.wrap>0&&n[a.next_in]!==0;)Ba.inflateReset(a),t=Ba.inflate(a,i);switch(t){case mae:case S4:case T_:case gae:return this.onEnd(t),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(a.avail_out===0||t===M_))if(this.options.to==="string"){var u=Yoe(a.output,a.next_out),h=a.next_out-u,A=Xoe(a.output,u);a.next_out=h,a.avail_out=l-h,h&&a.output.set(a.output.subarray(u,u+h),0),this.onData(A)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(t!==Bm||o!==0){if(t===M_)return t=Ba.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(a.avail_in===0)break}}return!0},km.prototype.onData=function(n){this.chunks.push(n)},km.prototype.onEnd=function(n){n===Bm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=MG(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};var Tw={Inflate:km,inflate:__,inflateRaw:function(n,e){return(e=e||{}).raw=!0,__(n,e)},ungzip:__,constants:ct},yae={Deflate:Iw.Deflate,deflate:Iw.deflate,deflateRaw:Iw.deflateRaw,gzip:Iw.gzip,Inflate:Tw.Inflate,inflate:Tw.inflate,inflateRaw:Tw.inflateRaw,ungzip:Tw.ungzip,constants:ct};function vae(n,e,t){var i=e===void 0?null:e,o=function(u,h){var A=atob(u);if(h){for(var f=new Uint8Array(A.length),d=0,p=A.length;d<p;++d)f[d]=A.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return A}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var E4,I4,M4,D_,wae=(E4="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMQogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIxLTEwLTIxCiAqIFZlcnNpb246IDEuMC41CiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuKHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KShlKX1mdW5jdGlvbiBlKHQsZSxyLG4sYSxpLG8pe3RyeXt2YXIgcz10W2ldKG8pLGM9cy52YWx1ZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHQpfXMuZG9uZT9lKGMpOlByb21pc2UucmVzb2x2ZShjKS50aGVuKG4sYSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxpKXt2YXIgbz10LmFwcGx5KHIsbik7ZnVuY3Rpb24gcyh0KXtlKG8sYSxpLHMsYywibmV4dCIsdCl9ZnVuY3Rpb24gYyh0KXtlKG8sYSxpLHMsYywidGhyb3ciLHQpfXModm9pZCAwKX0pKX19ZnVuY3Rpb24gbih0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KGUpO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIGEodCxlKXt2YXIgcj0idW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmdFtTeW1ib2wuaXRlcmF0b3JdfHx0WyJAQGl0ZXJhdG9yIl07aWYoIXIpe2lmKEFycmF5LmlzQXJyYXkodCl8fChyPWZ1bmN0aW9uKHQsZSl7aWYodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiBuKHQsZSk7dmFyIHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09ciYmdC5jb25zdHJ1Y3RvciYmKHI9dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKHQpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/bih0LGUpOnZvaWQgMH19KHQpKXx8ZSYmdCYmIm51bWJlciI9PXR5cGVvZiB0Lmxlbmd0aCl7ciYmKHQ9cik7dmFyIGE9MCxpPWZ1bmN0aW9uKCl7fTtyZXR1cm57czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gYT49dC5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOnRbYSsrXX19LGU6ZnVuY3Rpb24odCl7dGhyb3cgdH0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIG8scz0hMCxjPSExO3JldHVybntzOmZ1bmN0aW9uKCl7cj1yLmNhbGwodCl9LG46ZnVuY3Rpb24oKXt2YXIgdD1yLm5leHQoKTtyZXR1cm4gcz10LmRvbmUsdH0sZTpmdW5jdGlvbih0KXtjPSEwLG89dH0sZjpmdW5jdGlvbigpe3RyeXtzfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKX1maW5hbGx5e2lmKGMpdGhyb3cgb319fX12YXIgaT0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9OyFmdW5jdGlvbihlKXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgcixuPU9iamVjdC5wcm90b3R5cGUsYT1uLmhhc093blByb3BlcnR5LGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30sbz1pLml0ZXJhdG9yfHwiQEBpdGVyYXRvciIscz1pLmFzeW5jSXRlcmF0b3J8fCJAQGFzeW5jSXRlcmF0b3IiLGM9aS50b1N0cmluZ1RhZ3x8IkBAdG9TdHJpbmdUYWciO2Z1bmN0aW9uIGgodCxlLHIpe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksdFtlXX10cnl7aCh7fSwiIil9Y2F0Y2godCl7aD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRbZV09cn19ZnVuY3Rpb24gbCh0LGUscixuKXt2YXIgYT1lJiZlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHY/ZTp2LGk9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksbz1uZXcgUihufHxbXSk7cmV0dXJuIGkuX2ludm9rZT1mdW5jdGlvbih0LGUscil7dmFyIG49ZjtyZXR1cm4gZnVuY3Rpb24oYSxpKXtpZihuPT09Xyl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihuPT09cCl7aWYoInRocm93Ij09PWEpdGhyb3cgaTtyZXR1cm4gTCgpfWZvcihyLm1ldGhvZD1hLHIuYXJnPWk7Oyl7dmFyIG89ci5kZWxlZ2F0ZTtpZihvKXt2YXIgcz1TKG8scik7aWYocyl7aWYocz09PWcpY29udGludWU7cmV0dXJuIHN9fWlmKCJuZXh0Ij09PXIubWV0aG9kKXIuc2VudD1yLl9zZW50PXIuYXJnO2Vsc2UgaWYoInRocm93Ij09PXIubWV0aG9kKXtpZihuPT09Zil0aHJvdyBuPXAsci5hcmc7ci5kaXNwYXRjaEV4Y2VwdGlvbihyLmFyZyl9ZWxzZSJyZXR1cm4iPT09ci5tZXRob2QmJnIuYWJydXB0KCJyZXR1cm4iLHIuYXJnKTtuPV87dmFyIGM9dSh0LGUscik7aWYoIm5vcm1hbCI9PT1jLnR5cGUpe2lmKG49ci5kb25lP3A6ZCxjLmFyZz09PWcpY29udGludWU7cmV0dXJue3ZhbHVlOmMuYXJnLGRvbmU6ci5kb25lfX0idGhyb3ciPT09Yy50eXBlJiYobj1wLHIubWV0aG9kPSJ0aHJvdyIsci5hcmc9Yy5hcmcpfX19KHQscixvKSxpfWZ1bmN0aW9uIHUodCxlLHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUscil9fWNhdGNoKHQpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOnR9fX1lLndyYXA9bDt2YXIgZj0ic3VzcGVuZGVkU3RhcnQiLGQ9InN1c3BlbmRlZFlpZWxkIixfPSJleGVjdXRpbmciLHA9ImNvbXBsZXRlZCIsZz17fTtmdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIHkoKXt9ZnVuY3Rpb24gdygpe312YXIgbT17fTtoKG0sbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YseD1iJiZiKGIoRChbXSkpKTt4JiZ4IT09biYmYS5jYWxsKHgsbykmJihtPXgpO3ZhciBrPXcucHJvdG90eXBlPXYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobSk7ZnVuY3Rpb24geih0KXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2godCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24gQShlLHIpe2Z1bmN0aW9uIG4oaSxvLHMsYyl7dmFyIGg9dShlW2ldLGUsbyk7aWYoInRocm93IiE9PWgudHlwZSl7dmFyIGw9aC5hcmcsZj1sLnZhbHVlO3JldHVybiBmJiYib2JqZWN0Ij09PXQoZikmJmEuY2FsbChmLCJfX2F3YWl0Iik/ci5yZXNvbHZlKGYuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7bigibmV4dCIsdCxzLGMpfSksKGZ1bmN0aW9uKHQpe24oInRocm93Iix0LHMsYyl9KSk6ci5yZXNvbHZlKGYpLnRoZW4oKGZ1bmN0aW9uKHQpe2wudmFsdWU9dCxzKGwpfSksKGZ1bmN0aW9uKHQpe3JldHVybiBuKCJ0aHJvdyIsdCxzLGMpfSkpfWMoaC5hcmcpfXZhciBpO3RoaXMuX2ludm9rZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gbmV3IHIoKGZ1bmN0aW9uKHIsYSl7bih0LGUscixhKX0pKX1yZXR1cm4gaT1pP2kudGhlbihhLGEpOmEoKX19ZnVuY3Rpb24gUyh0LGUpe3ZhciBuPXQuaXRlcmF0b3JbZS5tZXRob2RdO2lmKG49PT1yKXtpZihlLmRlbGVnYXRlPW51bGwsInRocm93Ij09PWUubWV0aG9kKXtpZih0Lml0ZXJhdG9yLnJldHVybiYmKGUubWV0aG9kPSJyZXR1cm4iLGUuYXJnPXIsUyh0LGUpLCJ0aHJvdyI9PT1lLm1ldGhvZCkpcmV0dXJuIGc7ZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIGd9dmFyIGE9dShuLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1hLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9YS5hcmcsZS5kZWxlZ2F0ZT1udWxsLGc7dmFyIGk9YS5hcmc7cmV0dXJuIGk/aS5kb25lPyhlW3QucmVzdWx0TmFtZV09aS52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksZS5kZWxlZ2F0ZT1udWxsLGcpOmk6KGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSxlLmRlbGVnYXRlPW51bGwsZyl9ZnVuY3Rpb24gRSh0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBCKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPSJub3JtYWwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiBSKHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSx0LmZvckVhY2goRSx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBEKHQpe2lmKHQpe3ZhciBlPXRbb107aWYoZSlyZXR1cm4gZS5jYWxsKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIG49LTEsaT1mdW5jdGlvbiBlKCl7Zm9yKDsrK248dC5sZW5ndGg7KWlmKGEuY2FsbCh0LG4pKXJldHVybiBlLnZhbHVlPXRbbl0sZS5kb25lPSExLGU7cmV0dXJuIGUudmFsdWU9cixlLmRvbmU9ITAsZX07cmV0dXJuIGkubmV4dD1pfX1yZXR1cm57bmV4dDpMfX1mdW5jdGlvbiBMKCl7cmV0dXJue3ZhbHVlOnIsZG9uZTohMH19cmV0dXJuIHkucHJvdG90eXBlPXcsaChrLCJjb25zdHJ1Y3RvciIsdyksaCh3LCJjb25zdHJ1Y3RvciIseSkseS5kaXNwbGF5TmFtZT1oKHcsYywiR2VuZXJhdG9yRnVuY3Rpb24iKSxlLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFlJiYoZT09PXl8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LHcpOih0Ll9fcHJvdG9fXz13LGgodCxjLCJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGspLHR9LGUuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHooQS5wcm90b3R5cGUpLGgoQS5wcm90b3R5cGUscywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxlLkFzeW5jSXRlcmF0b3I9QSxlLmFzeW5jPWZ1bmN0aW9uKHQscixuLGEsaSl7dm9pZCAwPT09aSYmKGk9UHJvbWlzZSk7dmFyIG89bmV3IEEobCh0LHIsbixhKSxpKTtyZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP286by5uZXh0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOm8ubmV4dCgpfSkpfSx6KGspLGgoayxjLCJHZW5lcmF0b3IiKSxoKGssbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxoKGssInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0pKSxlLmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHQpZS5wdXNoKHIpO3JldHVybiBlLnJldmVyc2UoKSxmdW5jdGlvbiByKCl7Zm9yKDtlLmxlbmd0aDspe3ZhciBuPWUucG9wKCk7aWYobiBpbiB0KXJldHVybiByLnZhbHVlPW4sci5kb25lPSExLHJ9cmV0dXJuIHIuZG9uZT0hMCxyfX0sZS52YWx1ZXM9RCxSLnByb3RvdHlwZT17Y29uc3RydWN0b3I6UixyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1yLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPXIsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goQiksIXQpZm9yKHZhciBlIGluIHRoaXMpInQiPT09ZS5jaGFyQXQoMCkmJmEuY2FsbCh0aGlzLGUpJiYhaXNOYU4oK2Uuc2xpY2UoMSkpJiYodGhpc1tlXT1yKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBlPXRoaXM7ZnVuY3Rpb24gbihuLGEpe3JldHVybiBzLnR5cGU9InRocm93IixzLmFyZz10LGUubmV4dD1uLGEmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksISFhfWZvcih2YXIgaT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7aT49MDstLWkpe3ZhciBvPXRoaXMudHJ5RW50cmllc1tpXSxzPW8uY29tcGxldGlvbjtpZigicm9vdCI9PT1vLnRyeUxvYylyZXR1cm4gbigiZW5kIik7aWYoby50cnlMb2M8PXRoaXMucHJldil7dmFyIGM9YS5jYWxsKG8sImNhdGNoTG9jIiksaD1hLmNhbGwobywiZmluYWxseUxvYyIpO2lmKGMmJmgpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX1lbHNlIGlmKGMpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIWgpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIG49dGhpcy50cnlFbnRyaWVzW3JdO2lmKG4udHJ5TG9jPD10aGlzLnByZXYmJmEuY2FsbChuLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxuLmZpbmFsbHlMb2Mpe3ZhciBpPW47YnJlYWt9fWkmJigiYnJlYWsiPT09dHx8ImNvbnRpbnVlIj09PXQpJiZpLnRyeUxvYzw9ZSYmZTw9aS5maW5hbGx5TG9jJiYoaT1udWxsKTt2YXIgbz1pP2kuY29tcGxldGlvbjp7fTtyZXR1cm4gby50eXBlPXQsby5hcmc9ZSxpPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWkuZmluYWxseUxvYyxnKTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbih0LGUpe2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuImJyZWFrIj09PXQudHlwZXx8ImNvbnRpbnVlIj09PXQudHlwZT90aGlzLm5leHQ9dC5hcmc6InJldHVybiI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD0icmV0dXJuIix0aGlzLm5leHQ9ImVuZCIpOiJub3JtYWwiPT09dC50eXBlJiZlJiYodGhpcy5uZXh0PWUpLGd9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksQihyKSxnfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIudHJ5TG9jPT09dCl7dmFyIG49ci5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1uLnR5cGUpe3ZhciBhPW4uYXJnO0Iocil9cmV0dXJuIGF9fXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpEKHQpLHJlc3VsdE5hbWU6ZSxuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ciksZ319LGV9KGUuZXhwb3J0cyk7dHJ5e2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPXJ9Y2F0Y2goZSl7Im9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBnbG9iYWxUaGlzPyJ1bmRlZmluZWQiOnQoZ2xvYmFsVGhpcykpP2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPXI6RnVuY3Rpb24oInIiLCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikocil9fSh7ZXhwb3J0czp7fX0pO3ZhciBvPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSl7dmFyIHI9NCxuPTAsYT0xLGk9MjtmdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH12YXIgcz0wLGM9MSxoPTIsbD0zLHU9MjU4LGY9MjksZD0yNTYsXz1kKzErZixwPTMwLGc9MTksdj0yKl8rMSx5PTE1LHc9MTYsbT03LGI9MjU2LHg9MTYsaz0xNyx6PTE4LEE9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF0pLFM9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdKSxFPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XSksQj1uZXcgVWludDhBcnJheShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLFI9NTEyLEQ9bmV3IEFycmF5KDIqKF8rMikpO28oRCk7dmFyIEw9bmV3IEFycmF5KDIqcCk7byhMKTt2YXIgTz1uZXcgQXJyYXkoUik7byhPKTt2YXIgVT1uZXcgQXJyYXkodS1sKzEpO28oVSk7dmFyIEM9bmV3IEFycmF5KGYpO28oQyk7dmFyIEYsVCxILFo9bmV3IEFycmF5KHApO2Z1bmN0aW9uIE0odCxlLHIsbixhKXt0aGlzLnN0YXRpY190cmVlPXQsdGhpcy5leHRyYV9iaXRzPWUsdGhpcy5leHRyYV9iYXNlPXIsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1hLHRoaXMuaGFzX3N0cmVlPXQmJnQubGVuZ3RofWZ1bmN0aW9uIEkodCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9byhaKTt2YXIgTj1mdW5jdGlvbih0KXtyZXR1cm4gdDwyNTY/T1t0XTpPWzI1NisodD4+PjcpXX0sUD1mdW5jdGlvbih0LGUpe3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlLHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NX0saj1mdW5jdGlvbih0LGUscil7dC5iaV92YWxpZD53LXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LFAodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+dy10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItdyk6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfSxLPWZ1bmN0aW9uKHQsZSxyKXtqKHQsclsyKmVdLHJbMiplKzFdKX0sWD1mdW5jdGlvbih0LGUpe3ZhciByPTA7ZG97cnw9MSZ0LHQ+Pj49MSxyPDw9MX13aGlsZSgtLWU+MCk7cmV0dXJuIHI+Pj4xfSxxPWZ1bmN0aW9uKHQpezE2PT09dC5iaV92YWxpZD8oUCh0LHQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCk6dC5iaV92YWxpZD49OCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZ0LmJpX2J1Zix0LmJpX2J1Zj4+PTgsdC5iaV92YWxpZC09OCl9LEc9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGEsaSxvLHMsYz1lLmR5bl90cmVlLGg9ZS5tYXhfY29kZSxsPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLHU9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLGY9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsXz1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHA9MDtmb3IoaT0wO2k8PXk7aSsrKXQuYmxfY291bnRbaV09MDtmb3IoY1syKnQuaGVhcFt0LmhlYXBfbWF4XSsxXT0wLHI9dC5oZWFwX21heCsxO3I8djtyKyspKGk9Y1syKmNbMioobj10LmhlYXBbcl0pKzFdKzFdKzEpPl8mJihpPV8scCsrKSxjWzIqbisxXT1pLG4+aHx8KHQuYmxfY291bnRbaV0rKyxvPTAsbj49ZCYmKG89ZltuLWRdKSxzPWNbMipuXSx0Lm9wdF9sZW4rPXMqKGkrbyksdSYmKHQuc3RhdGljX2xlbis9cyoobFsyKm4rMV0rbykpKTtpZigwIT09cCl7ZG97Zm9yKGk9Xy0xOzA9PT10LmJsX2NvdW50W2ldOylpLS07dC5ibF9jb3VudFtpXS0tLHQuYmxfY291bnRbaSsxXSs9Mix0LmJsX2NvdW50W19dLS0scC09Mn13aGlsZShwPjApO2ZvcihpPV87MCE9PWk7aS0tKWZvcihuPXQuYmxfY291bnRbaV07MCE9PW47KShhPXQuaGVhcFstLXJdKT5ofHwoY1syKmErMV0hPT1pJiYodC5vcHRfbGVuKz0oaS1jWzIqYSsxXSkqY1syKmFdLGNbMiphKzFdPWkpLG4tLSl9fSxXPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixhLGk9bmV3IEFycmF5KHkrMSksbz0wO2ZvcihuPTE7bjw9eTtuKyspaVtuXT1vPW8rcltuLTFdPDwxO2ZvcihhPTA7YTw9ZTthKyspe3ZhciBzPXRbMiphKzFdOzAhPT1zJiYodFsyKmFdPVgoaVtzXSsrLHMpKX19LFk9ZnVuY3Rpb24oKXt2YXIgdCxlLHIsbixhLGk9bmV3IEFycmF5KHkrMSk7Zm9yKHI9MCxuPTA7bjxmLTE7bisrKWZvcihDW25dPXIsdD0wO3Q8MTw8QVtuXTt0KyspVVtyKytdPW47Zm9yKFVbci0xXT1uLGE9MCxuPTA7bjwxNjtuKyspZm9yKFpbbl09YSx0PTA7dDwxPDxTW25dO3QrKylPW2ErK109bjtmb3IoYT4+PTc7bjxwO24rKylmb3IoWltuXT1hPDw3LHQ9MDt0PDE8PFNbbl0tNzt0KyspT1syNTYrYSsrXT1uO2ZvcihlPTA7ZTw9eTtlKyspaVtlXT0wO2Zvcih0PTA7dDw9MTQzOylEWzIqdCsxXT04LHQrKyxpWzhdKys7Zm9yKDt0PD0yNTU7KURbMip0KzFdPTksdCsrLGlbOV0rKztmb3IoO3Q8PTI3OTspRFsyKnQrMV09Nyx0KyssaVs3XSsrO2Zvcig7dDw9Mjg3OylEWzIqdCsxXT04LHQrKyxpWzhdKys7Zm9yKFcoRCxfKzEsaSksdD0wO3Q8cDt0KyspTFsyKnQrMV09NSxMWzIqdF09WCh0LDUpO0Y9bmV3IE0oRCxBLGQrMSxfLHkpLFQ9bmV3IE0oTCxTLDAscCx5KSxIPW5ldyBNKG5ldyBBcnJheSgwKSxFLDAsZyxtKX0sVj1mdW5jdGlvbih0KXt2YXIgZTtmb3IoZT0wO2U8XztlKyspdC5keW5fbHRyZWVbMiplXT0wO2ZvcihlPTA7ZTxwO2UrKyl0LmR5bl9kdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPGc7ZSsrKXQuYmxfdHJlZVsyKmVdPTA7dC5keW5fbHRyZWVbMipiXT0xLHQub3B0X2xlbj10LnN0YXRpY19sZW49MCx0Lmxhc3RfbGl0PXQubWF0Y2hlcz0wfSwkPWZ1bmN0aW9uKHQpe3QuYmlfdmFsaWQ+OD9QKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sUT1mdW5jdGlvbih0LGUscixuKXskKHQpLG4mJihQKHQsciksUCh0LH5yKSksdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxKPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhPTIqZSxpPTIqcjtyZXR1cm4gdFthXTx0W2ldfHx0W2FdPT09dFtpXSYmbltlXTw9bltyXX0sdHQ9ZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj10LmhlYXBbcl0sYT1yPDwxO2E8PXQuaGVhcF9sZW4mJihhPHQuaGVhcF9sZW4mJkooZSx0LmhlYXBbYSsxXSx0LmhlYXBbYV0sdC5kZXB0aCkmJmErKywhSihlLG4sdC5oZWFwW2FdLHQuZGVwdGgpKTspdC5oZWFwW3JdPXQuaGVhcFthXSxyPWEsYTw8PTE7dC5oZWFwW3JdPW59LGV0PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixhLGksbyxzPTA7aWYoMCE9PXQubGFzdF9saXQpZG97bj10LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzXTw8OHx0LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzKzFdLGE9dC5wZW5kaW5nX2J1Zlt0LmxfYnVmK3NdLHMrKywwPT09bj9LKHQsYSxlKTooaT1VW2FdLEsodCxpK2QrMSxlKSwwIT09KG89QVtpXSkmJihhLT1DW2ldLGoodCxhLG8pKSxuLS0saT1OKG4pLEsodCxpLHIpLDAhPT0obz1TW2ldKSYmKG4tPVpbaV0saih0LG4sbykpKX13aGlsZShzPHQubGFzdF9saXQpO0sodCxiLGUpfSxydD1mdW5jdGlvbih0LGUpe3ZhciByLG4sYSxpPWUuZHluX3RyZWUsbz1lLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxzPWUuc3RhdF9kZXNjLmhhc19zdHJlZSxjPWUuc3RhdF9kZXNjLmVsZW1zLGg9LTE7Zm9yKHQuaGVhcF9sZW49MCx0LmhlYXBfbWF4PXYscj0wO3I8YztyKyspMCE9PWlbMipyXT8odC5oZWFwWysrdC5oZWFwX2xlbl09aD1yLHQuZGVwdGhbcl09MCk6aVsyKnIrMV09MDtmb3IoO3QuaGVhcF9sZW48MjspaVsyKihhPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWg8Mj8rK2g6MCldPTEsdC5kZXB0aFthXT0wLHQub3B0X2xlbi0tLHMmJih0LnN0YXRpY19sZW4tPW9bMiphKzFdKTtmb3IoZS5tYXhfY29kZT1oLHI9dC5oZWFwX2xlbj4+MTtyPj0xO3ItLSl0dCh0LGkscik7YT1jO2Rve3I9dC5oZWFwWzFdLHQuaGVhcFsxXT10LmhlYXBbdC5oZWFwX2xlbi0tXSx0dCh0LGksMSksbj10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09cix0LmhlYXBbLS10LmhlYXBfbWF4XT1uLGlbMiphXT1pWzIqcl0raVsyKm5dLHQuZGVwdGhbYV09KHQuZGVwdGhbcl0+PXQuZGVwdGhbbl0/dC5kZXB0aFtyXTp0LmRlcHRoW25dKSsxLGlbMipyKzFdPWlbMipuKzFdPWEsdC5oZWFwWzFdPWErKyx0dCh0LGksMSl9d2hpbGUodC5oZWFwX2xlbj49Mik7dC5oZWFwWy0tdC5oZWFwX21heF09dC5oZWFwWzFdLEcodCxlKSxXKGksaCx0LmJsX2NvdW50KX0sbnQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGEsaT0tMSxvPWVbMV0scz0wLGM9NyxoPTQ7Zm9yKDA9PT1vJiYoYz0xMzgsaD0zKSxlWzIqKHIrMSkrMV09NjU1MzUsbj0wO248PXI7bisrKWE9byxvPWVbMioobisxKSsxXSwrK3M8YyYmYT09PW98fChzPGg/dC5ibF90cmVlWzIqYV0rPXM6MCE9PWE/KGEhPT1pJiZ0LmJsX3RyZWVbMiphXSsrLHQuYmxfdHJlZVsyKnhdKyspOnM8PTEwP3QuYmxfdHJlZVsyKmtdKys6dC5ibF90cmVlWzIqel0rKyxzPTAsaT1hLDA9PT1vPyhjPTEzOCxoPTMpOmE9PT1vPyhjPTYsaD0zKTooYz03LGg9NCkpfSxhdD1mdW5jdGlvbih0LGUscil7dmFyIG4sYSxpPS0xLG89ZVsxXSxzPTAsYz03LGg9NDtmb3IoMD09PW8mJihjPTEzOCxoPTMpLG49MDtuPD1yO24rKylpZihhPW8sbz1lWzIqKG4rMSkrMV0sISgrK3M8YyYmYT09PW8pKXtpZihzPGgpZG97Syh0LGEsdC5ibF90cmVlKX13aGlsZSgwIT0tLXMpO2Vsc2UgMCE9PWE/KGEhPT1pJiYoSyh0LGEsdC5ibF90cmVlKSxzLS0pLEsodCx4LHQuYmxfdHJlZSksaih0LHMtMywyKSk6czw9MTA/KEsodCxrLHQuYmxfdHJlZSksaih0LHMtMywzKSk6KEsodCx6LHQuYmxfdHJlZSksaih0LHMtMTEsNykpO3M9MCxpPWEsMD09PW8/KGM9MTM4LGg9Myk6YT09PW8/KGM9NixoPTMpOihjPTcsaD00KX19LGl0PWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihudCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxudCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSxydCh0LHQuYmxfZGVzYyksZT1nLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKkJbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LG90PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhO2ZvcihqKHQsZS0yNTcsNSksaih0LHItMSw1KSxqKHQsbi00LDQpLGE9MDthPG47YSsrKWoodCx0LmJsX3RyZWVbMipCW2FdKzFdLDMpO2F0KHQsdC5keW5fbHRyZWUsZS0xKSxhdCh0LHQuZHluX2R0cmVlLHItMSl9LHN0PWZ1bmN0aW9uKHQpe3ZhciBlLHI9NDA5MzYyNDQ0Nztmb3IoZT0wO2U8PTMxO2UrKyxyPj4+PTEpaWYoMSZyJiYwIT09dC5keW5fbHRyZWVbMiplXSlyZXR1cm4gbjtpZigwIT09dC5keW5fbHRyZWVbMThdfHwwIT09dC5keW5fbHRyZWVbMjBdfHwwIT09dC5keW5fbHRyZWVbMjZdKXJldHVybiBhO2ZvcihlPTMyO2U8ZDtlKyspaWYoMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIGE7cmV0dXJuIG59LGN0PSExLGh0PWZ1bmN0aW9uKHQsZSxyLG4pe2oodCwoczw8MSkrKG4/MTowKSwzKSxRKHQsZSxyLCEwKX0sbHQ9ZnVuY3Rpb24odCxlLG4sYSl7dmFyIG8scyxsPTA7dC5sZXZlbD4wPyh0LnN0cm0uZGF0YV90eXBlPT09aSYmKHQuc3RybS5kYXRhX3R5cGU9c3QodCkpLHJ0KHQsdC5sX2Rlc2MpLHJ0KHQsdC5kX2Rlc2MpLGw9aXQodCksbz10Lm9wdF9sZW4rMys3Pj4+Mywocz10LnN0YXRpY19sZW4rMys3Pj4+Myk8PW8mJihvPXMpKTpvPXM9bis1LG4rNDw9byYmLTEhPT1lP2h0KHQsZSxuLGEpOnQuc3RyYXRlZ3k9PT1yfHxzPT09bz8oaih0LChjPDwxKSsoYT8xOjApLDMpLGV0KHQsRCxMKSk6KGoodCwoaDw8MSkrKGE/MTowKSwzKSxvdCh0LHQubF9kZXNjLm1heF9jb2RlKzEsdC5kX2Rlc2MubWF4X2NvZGUrMSxsKzEpLGV0KHQsdC5keW5fbHRyZWUsdC5keW5fZHRyZWUpKSxWKHQpLGEmJiQodCl9LHV0PXtfdHJfaW5pdDpmdW5jdGlvbih0KXtjdHx8KFkoKSxjdD0hMCksdC5sX2Rlc2M9bmV3IEkodC5keW5fbHRyZWUsRiksdC5kX2Rlc2M9bmV3IEkodC5keW5fZHRyZWUsVCksdC5ibF9kZXNjPW5ldyBJKHQuYmxfdHJlZSxIKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCxWKHQpfSxfdHJfc3RvcmVkX2Jsb2NrOmh0LF90cl9mbHVzaF9ibG9jazpsdCxfdHJfdGFsbHk6ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKFVbcl0rZCsxKV0rKyx0LmR5bl9kdHJlZVsyKk4oZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTF9LF90cl9hbGlnbjpmdW5jdGlvbih0KXtqKHQsYzw8MSwzKSxLKHQsYixEKSxxKHQpfX0sZnQ9ZnVuY3Rpb24odCxlLHIsbil7Zm9yKHZhciBhPTY1NTM1JnR8MCxpPXQ+Pj4xNiY2NTUzNXwwLG89MDswIT09cjspe3ItPW89cj4yZTM/MmUzOnI7ZG97aT1pKyhhPWErZVtuKytdfDApfDB9d2hpbGUoLS1vKTthJT02NTUyMSxpJT02NTUyMX1yZXR1cm4gYXxpPDwxNnwwfSxkdD1uZXcgVWludDMyQXJyYXkoZnVuY3Rpb24oKXtmb3IodmFyIHQsZT1bXSxyPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX0oKSksX3Q9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGE9ZHQsaT1uK3I7dF49LTE7Zm9yKHZhciBvPW47bzxpO28rKyl0PXQ+Pj44XmFbMjU1Jih0XmVbb10pXTtyZXR1cm4tMV50fSxwdD17MjoibmVlZCBkaWN0aW9uYXJ5IiwxOiJzdHJlYW0gZW5kIiwwOiIiLCItMSI6ImZpbGUgZXJyb3IiLCItMiI6InN0cmVhbSBlcnJvciIsIi0zIjoiZGF0YSBlcnJvciIsIi00IjoiaW5zdWZmaWNpZW50IG1lbW9yeSIsIi01IjoiYnVmZmVyIGVycm9yIiwiLTYiOiJpbmNvbXBhdGlibGUgdmVyc2lvbiJ9LGd0PXtaX05PX0ZMVVNIOjAsWl9QQVJUSUFMX0ZMVVNIOjEsWl9TWU5DX0ZMVVNIOjIsWl9GVUxMX0ZMVVNIOjMsWl9GSU5JU0g6NCxaX0JMT0NLOjUsWl9UUkVFUzo2LFpfT0s6MCxaX1NUUkVBTV9FTkQ6MSxaX05FRURfRElDVDoyLFpfRVJSTk86LTEsWl9TVFJFQU1fRVJST1I6LTIsWl9EQVRBX0VSUk9SOi0zLFpfTUVNX0VSUk9SOi00LFpfQlVGX0VSUk9SOi01LFpfTk9fQ09NUFJFU1NJT046MCxaX0JFU1RfU1BFRUQ6MSxaX0JFU1RfQ09NUFJFU1NJT046OSxaX0RFRkFVTFRfQ09NUFJFU1NJT046LTEsWl9GSUxURVJFRDoxLFpfSFVGRk1BTl9PTkxZOjIsWl9STEU6MyxaX0ZJWEVEOjQsWl9ERUZBVUxUX1NUUkFURUdZOjAsWl9CSU5BUlk6MCxaX1RFWFQ6MSxaX1VOS05PV046MixaX0RFRkxBVEVEOjh9LHZ0PXV0Ll90cl9pbml0LHl0PXV0Ll90cl9zdG9yZWRfYmxvY2ssd3Q9dXQuX3RyX2ZsdXNoX2Jsb2NrLG10PXV0Ll90cl90YWxseSxidD11dC5fdHJfYWxpZ24seHQ9Z3QuWl9OT19GTFVTSCxrdD1ndC5aX1BBUlRJQUxfRkxVU0gsenQ9Z3QuWl9GVUxMX0ZMVVNILEF0PWd0LlpfRklOSVNILFN0PWd0LlpfQkxPQ0ssRXQ9Z3QuWl9PSyxCdD1ndC5aX1NUUkVBTV9FTkQsUnQ9Z3QuWl9TVFJFQU1fRVJST1IsRHQ9Z3QuWl9EQVRBX0VSUk9SLEx0PWd0LlpfQlVGX0VSUk9SLE90PWd0LlpfREVGQVVMVF9DT01QUkVTU0lPTixVdD1ndC5aX0ZJTFRFUkVELEN0PWd0LlpfSFVGRk1BTl9PTkxZLEZ0PWd0LlpfUkxFLFR0PWd0LlpfRklYRUQsSHQ9Z3QuWl9ERUZBVUxUX1NUUkFURUdZLFp0PWd0LlpfVU5LTk9XTixNdD1ndC5aX0RFRkxBVEVELEl0PTksTnQ9MTUsUHQ9OCxqdD0yODYsS3Q9MzAsWHQ9MTkscXQ9MipqdCsxLEd0PTE1LFd0PTMsWXQ9MjU4LFZ0PVl0K1d0KzEsJHQ9MzIsUXQ9NDIsSnQ9NjksdGU9NzMsZWU9OTEscmU9MTAzLG5lPTExMyxhZT02NjYsaWU9MSxvZT0yLHNlPTMsY2U9NCxoZT0zLGxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubXNnPXB0W2VdLGV9LHVlPWZ1bmN0aW9uKHQpe3JldHVybih0PDwxKS0odD40Pzk6MCl9LGZlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH0sZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybihlPDx0Lmhhc2hfc2hpZnRecikmdC5oYXNoX21hc2t9LF9lPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3RhdGUscj1lLnBlbmRpbmc7cj50LmF2YWlsX291dCYmKHI9dC5hdmFpbF9vdXQpLDAhPT1yJiYodC5vdXRwdXQuc2V0KGUucGVuZGluZ19idWYuc3ViYXJyYXkoZS5wZW5kaW5nX291dCxlLnBlbmRpbmdfb3V0K3IpLHQubmV4dF9vdXQpLHQubmV4dF9vdXQrPXIsZS5wZW5kaW5nX291dCs9cix0LnRvdGFsX291dCs9cix0LmF2YWlsX291dC09cixlLnBlbmRpbmctPXIsMD09PWUucGVuZGluZyYmKGUucGVuZGluZ19vdXQ9MCkpfSxwZT1mdW5jdGlvbih0LGUpe3d0KHQsdC5ibG9ja19zdGFydD49MD90LmJsb2NrX3N0YXJ0Oi0xLHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydCxlKSx0LmJsb2NrX3N0YXJ0PXQuc3Ryc3RhcnQsX2UodC5zdHJtKX0sZ2U9ZnVuY3Rpb24odCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lfSx2ZT1mdW5jdGlvbih0LGUpe3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZX0seWU9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGE9dC5hdmFpbF9pbjtyZXR1cm4gYT5uJiYoYT1uKSwwPT09YT8wOih0LmF2YWlsX2luLT1hLGUuc2V0KHQuaW5wdXQuc3ViYXJyYXkodC5uZXh0X2luLHQubmV4dF9pbithKSxyKSwxPT09dC5zdGF0ZS53cmFwP3QuYWRsZXI9ZnQodC5hZGxlcixlLGEscik6Mj09PXQuc3RhdGUud3JhcCYmKHQuYWRsZXI9X3QodC5hZGxlcixlLGEscikpLHQubmV4dF9pbis9YSx0LnRvdGFsX2luKz1hLGEpfSx3ZT1mdW5jdGlvbih0LGUpe3ZhciByLG4sYT10Lm1heF9jaGFpbl9sZW5ndGgsaT10LnN0cnN0YXJ0LG89dC5wcmV2X2xlbmd0aCxzPXQubmljZV9tYXRjaCxjPXQuc3Ryc3RhcnQ+dC53X3NpemUtVnQ/dC5zdHJzdGFydC0odC53X3NpemUtVnQpOjAsaD10LndpbmRvdyxsPXQud19tYXNrLHU9dC5wcmV2LGY9dC5zdHJzdGFydCtZdCxkPWhbaStvLTFdLF89aFtpK29dO3QucHJldl9sZW5ndGg+PXQuZ29vZF9tYXRjaCYmKGE+Pj0yKSxzPnQubG9va2FoZWFkJiYocz10Lmxvb2thaGVhZCk7ZG97aWYoaFsocj1lKStvXT09PV8mJmhbcitvLTFdPT09ZCYmaFtyXT09PWhbaV0mJmhbKytyXT09PWhbaSsxXSl7aSs9MixyKys7ZG97fXdoaWxlKGhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZpPGYpO2lmKG49WXQtKGYtaSksaT1mLVl0LG4+byl7aWYodC5tYXRjaF9zdGFydD1lLG89bixuPj1zKWJyZWFrO2Q9aFtpK28tMV0sXz1oW2krb119fX13aGlsZSgoZT11W2UmbF0pPmMmJjAhPS0tYSk7cmV0dXJuIG88PXQubG9va2FoZWFkP286dC5sb29rYWhlYWR9LG1lPWZ1bmN0aW9uKHQpe3ZhciBlLHIsbixhLGksbz10Lndfc2l6ZTtkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1vKyhvLVZ0KSl7dC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KG8sbytvKSwwKSx0Lm1hdGNoX3N0YXJ0LT1vLHQuc3Ryc3RhcnQtPW8sdC5ibG9ja19zdGFydC09byxlPXI9dC5oYXNoX3NpemU7ZG97bj10LmhlYWRbLS1lXSx0LmhlYWRbZV09bj49bz9uLW86MH13aGlsZSgtLXIpO2U9cj1vO2Rve249dC5wcmV2Wy0tZV0sdC5wcmV2W2VdPW4+PW8/bi1vOjB9d2hpbGUoLS1yKTthKz1vfWlmKDA9PT10LnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYocj15ZSh0LnN0cm0sdC53aW5kb3csdC5zdHJzdGFydCt0Lmxvb2thaGVhZCxhKSx0Lmxvb2thaGVhZCs9cix0Lmxvb2thaGVhZCt0Lmluc2VydD49V3QpZm9yKGk9dC5zdHJzdGFydC10Lmluc2VydCx0Lmluc19oPXQud2luZG93W2ldLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W2krMV0pO3QuaW5zZXJ0JiYodC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbaStXdC0xXSksdC5wcmV2W2kmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09aSxpKyssdC5pbnNlcnQtLSwhKHQubG9va2FoZWFkK3QuaW5zZXJ0PFd0KSk7KTt9d2hpbGUodC5sb29rYWhlYWQ8VnQmJjAhPT10LnN0cm0uYXZhaWxfaW4pfSxiZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuOzspe2lmKHQubG9va2FoZWFkPFZ0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDxWdCYmZT09PXh0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1XdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksMCE9PXImJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtVnQmJih0Lm1hdGNoX2xlbmd0aD13ZSh0LHIpKSx0Lm1hdGNoX2xlbmd0aD49V3QpaWYobj1tdCh0LHQuc3Ryc3RhcnQtdC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aC1XdCksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPD10Lm1heF9sYXp5X21hdGNoJiZ0Lmxvb2thaGVhZD49V3Qpe3QubWF0Y2hfbGVuZ3RoLS07ZG97dC5zdHJzdGFydCsrLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydH13aGlsZSgwIT0tLXQubWF0Y2hfbGVuZ3RoKTt0LnN0cnN0YXJ0Kyt9ZWxzZSB0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wLHQuaW5zX2g9dC53aW5kb3dbdC5zdHJzdGFydF0sdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCsxXSk7ZWxzZSBuPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0Kys7aWYobiYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8V3QtMT90LnN0cnN0YXJ0Old0LTEsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX0seGU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixhOzspe2lmKHQubG9va2FoZWFkPFZ0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDxWdCYmZT09PXh0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1XdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksdC5wcmV2X2xlbmd0aD10Lm1hdGNoX2xlbmd0aCx0LnByZXZfbWF0Y2g9dC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aD1XdC0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtVnQmJih0Lm1hdGNoX2xlbmd0aD13ZSh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PVV0fHx0Lm1hdGNoX2xlbmd0aD09PVd0JiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1XdC0xKSksdC5wcmV2X2xlbmd0aD49V3QmJnQubWF0Y2hfbGVuZ3RoPD10LnByZXZfbGVuZ3RoKXthPXQuc3Ryc3RhcnQrdC5sb29rYWhlYWQtV3Qsbj1tdCh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1XdCksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9YSYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrV3QtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPVd0LTEsdC5zdHJzdGFydCsrLG4mJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKChuPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSkmJnBlKHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBpZX1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj1tdCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxXdC0xP3Quc3Ryc3RhcnQ6V3QtMSxlPT09QXQ/KHBlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOmNlKTp0Lmxhc3RfbGl0JiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOm9lfSxrZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuLGEsaSxvPXQud2luZG93Ozspe2lmKHQubG9va2FoZWFkPD1ZdCl7aWYobWUodCksdC5sb29rYWhlYWQ8PVl0JiZlPT09eHQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHQubG9va2FoZWFkPj1XdCYmdC5zdHJzdGFydD4wJiYobj1vW2E9dC5zdHJzdGFydC0xXSk9PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0pe2k9dC5zdHJzdGFydCtZdDtkb3t9d2hpbGUobj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmbj09PW9bKythXSYmYTxpKTt0Lm1hdGNoX2xlbmd0aD1ZdC0oaS1hKSx0Lm1hdGNoX2xlbmd0aD50Lmxvb2thaGVhZCYmKHQubWF0Y2hfbGVuZ3RoPXQubG9va2FoZWFkKX1pZih0Lm1hdGNoX2xlbmd0aD49V3Q/KHI9bXQodCwxLHQubWF0Y2hfbGVuZ3RoLVd0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCk6KHI9bXQodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyksciYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX0semU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYobWUodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PXh0KXJldHVybiBpZTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9bXQodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09QXQ/KHBlKHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P3NlOmNlKTp0Lmxhc3RfbGl0JiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP2llOm9lfTtmdW5jdGlvbiBBZSh0LGUscixuLGEpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWF9dmFyIFNlPVtuZXcgQWUoMCwwLDAsMCwoZnVuY3Rpb24odCxlKXt2YXIgcj02NTUzNTtmb3Iocj50LnBlbmRpbmdfYnVmX3NpemUtNSYmKHI9dC5wZW5kaW5nX2J1Zl9zaXplLTUpOzspe2lmKHQubG9va2FoZWFkPD0xKXtpZihtZSh0KSwwPT09dC5sb29rYWhlYWQmJmU9PT14dClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfXQuc3Ryc3RhcnQrPXQubG9va2FoZWFkLHQubG9va2FoZWFkPTA7dmFyIG49dC5ibG9ja19zdGFydCtyO2lmKCgwPT09dC5zdHJzdGFydHx8dC5zdHJzdGFydD49bikmJih0Lmxvb2thaGVhZD10LnN0cnN0YXJ0LW4sdC5zdHJzdGFydD1uLHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWU7aWYodC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0Pj10Lndfc2l6ZS1WdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6KHQuc3Ryc3RhcnQ+dC5ibG9ja19zdGFydCYmKHBlKHQsITEpLHQuc3RybS5hdmFpbF9vdXQpLGllKX0pKSxuZXcgQWUoNCw0LDgsNCxiZSksbmV3IEFlKDQsNSwxNiw4LGJlKSxuZXcgQWUoNCw2LDMyLDMyLGJlKSxuZXcgQWUoNCw0LDE2LDE2LHhlKSxuZXcgQWUoOCwxNiwzMiwzMix4ZSksbmV3IEFlKDgsMTYsMTI4LDEyOCx4ZSksbmV3IEFlKDgsMzIsMTI4LDI1Nix4ZSksbmV3IEFlKDMyLDEyOCwyNTgsMTAyNCx4ZSksbmV3IEFlKDMyLDI1OCwyNTgsNDA5Nix4ZSldLEVlPWZ1bmN0aW9uKHQpe3Qud2luZG93X3NpemU9Mip0Lndfc2l6ZSxmZSh0LmhlYWQpLHQubWF4X2xhenlfbWF0Y2g9U2VbdC5sZXZlbF0ubWF4X2xhenksdC5nb29kX21hdGNoPVNlW3QubGV2ZWxdLmdvb2RfbGVuZ3RoLHQubmljZV9tYXRjaD1TZVt0LmxldmVsXS5uaWNlX2xlbmd0aCx0Lm1heF9jaGFpbl9sZW5ndGg9U2VbdC5sZXZlbF0ubWF4X2NoYWluLHQuc3Ryc3RhcnQ9MCx0LmJsb2NrX3N0YXJ0PTAsdC5sb29rYWhlYWQ9MCx0Lmluc2VydD0wLHQubWF0Y2hfbGVuZ3RoPXQucHJldl9sZW5ndGg9V3QtMSx0Lm1hdGNoX2F2YWlsYWJsZT0wLHQuaW5zX2g9MH07ZnVuY3Rpb24gQmUoKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD1NdCx0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgVWludDE2QXJyYXkoMipxdCksdGhpcy5keW5fZHRyZWU9bmV3IFVpbnQxNkFycmF5KDIqKDIqS3QrMSkpLHRoaXMuYmxfdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMipYdCsxKSksZmUodGhpcy5keW5fbHRyZWUpLGZlKHRoaXMuZHluX2R0cmVlKSxmZSh0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBVaW50MTZBcnJheShHdCsxKSx0aGlzLmhlYXA9bmV3IFVpbnQxNkFycmF5KDIqanQrMSksZmUodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IFVpbnQxNkFycmF5KDIqanQrMSksZmUodGhpcy5kZXB0aCksdGhpcy5sX2J1Zj0wLHRoaXMubGl0X2J1ZnNpemU9MCx0aGlzLmxhc3RfbGl0PTAsdGhpcy5kX2J1Zj0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9dmFyIFJlPWZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gbGUodCxSdCk7dC50b3RhbF9pbj10LnRvdGFsX291dD0wLHQuZGF0YV90eXBlPVp0O3ZhciBlPXQuc3RhdGU7cmV0dXJuIGUucGVuZGluZz0wLGUucGVuZGluZ19vdXQ9MCxlLndyYXA8MCYmKGUud3JhcD0tZS53cmFwKSxlLnN0YXR1cz1lLndyYXA/UXQ6bmUsdC5hZGxlcj0yPT09ZS53cmFwPzA6MSxlLmxhc3RfZmx1c2g9eHQsdnQoZSksRXR9LERlPWZ1bmN0aW9uKHQpe3ZhciBlPVJlKHQpO3JldHVybiBlPT09RXQmJkVlKHQuc3RhdGUpLGV9LExlPWZ1bmN0aW9uKHQsZSxyLG4sYSxpKXtpZighdClyZXR1cm4gUnQ7dmFyIG89MTtpZihlPT09T3QmJihlPTYpLG48MD8obz0wLG49LW4pOm4+MTUmJihvPTIsbi09MTYpLGE8MXx8YT5JdHx8ciE9PU10fHxuPDh8fG4+MTV8fGU8MHx8ZT45fHxpPDB8fGk+VHQpcmV0dXJuIGxlKHQsUnQpOzg9PT1uJiYobj05KTt2YXIgcz1uZXcgQmU7cmV0dXJuIHQuc3RhdGU9cyxzLnN0cm09dCxzLndyYXA9byxzLmd6aGVhZD1udWxsLHMud19iaXRzPW4scy53X3NpemU9MTw8cy53X2JpdHMscy53X21hc2s9cy53X3NpemUtMSxzLmhhc2hfYml0cz1hKzcscy5oYXNoX3NpemU9MTw8cy5oYXNoX2JpdHMscy5oYXNoX21hc2s9cy5oYXNoX3NpemUtMSxzLmhhc2hfc2hpZnQ9fn4oKHMuaGFzaF9iaXRzK1d0LTEpL1d0KSxzLndpbmRvdz1uZXcgVWludDhBcnJheSgyKnMud19zaXplKSxzLmhlYWQ9bmV3IFVpbnQxNkFycmF5KHMuaGFzaF9zaXplKSxzLnByZXY9bmV3IFVpbnQxNkFycmF5KHMud19zaXplKSxzLmxpdF9idWZzaXplPTE8PGErNixzLnBlbmRpbmdfYnVmX3NpemU9NCpzLmxpdF9idWZzaXplLHMucGVuZGluZ19idWY9bmV3IFVpbnQ4QXJyYXkocy5wZW5kaW5nX2J1Zl9zaXplKSxzLmRfYnVmPTEqcy5saXRfYnVmc2l6ZSxzLmxfYnVmPTMqcy5saXRfYnVmc2l6ZSxzLmxldmVsPWUscy5zdHJhdGVneT1pLHMubWV0aG9kPXIsRGUodCl9LE9lPXtkZWZsYXRlSW5pdDpmdW5jdGlvbih0LGUpe3JldHVybiBMZSh0LGUsTXQsTnQsUHQsSHQpfSxkZWZsYXRlSW5pdDI6TGUsZGVmbGF0ZVJlc2V0OkRlLGRlZmxhdGVSZXNldEtlZXA6UmUsZGVmbGF0ZVNldEhlYWRlcjpmdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0LnN0YXRlPzIhPT10LnN0YXRlLndyYXA/UnQ6KHQuc3RhdGUuZ3poZWFkPWUsRXQpOlJ0fSxkZWZsYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIHIsbjtpZighdHx8IXQuc3RhdGV8fGU+U3R8fGU8MClyZXR1cm4gdD9sZSh0LFJ0KTpSdDt2YXIgYT10LnN0YXRlO2lmKCF0Lm91dHB1dHx8IXQuaW5wdXQmJjAhPT10LmF2YWlsX2lufHxhLnN0YXR1cz09PWFlJiZlIT09QXQpcmV0dXJuIGxlKHQsMD09PXQuYXZhaWxfb3V0P0x0OlJ0KTthLnN0cm09dDt2YXIgaT1hLmxhc3RfZmx1c2g7aWYoYS5sYXN0X2ZsdXNoPWUsYS5zdGF0dXM9PT1RdClpZigyPT09YS53cmFwKXQuYWRsZXI9MCxnZShhLDMxKSxnZShhLDEzOSksZ2UoYSw4KSxhLmd6aGVhZD8oZ2UoYSwoYS5nemhlYWQudGV4dD8xOjApKyhhLmd6aGVhZC5oY3JjPzI6MCkrKGEuZ3poZWFkLmV4dHJhPzQ6MCkrKGEuZ3poZWFkLm5hbWU/ODowKSsoYS5nemhlYWQuY29tbWVudD8xNjowKSksZ2UoYSwyNTUmYS5nemhlYWQudGltZSksZ2UoYSxhLmd6aGVhZC50aW1lPj44JjI1NSksZ2UoYSxhLmd6aGVhZC50aW1lPj4xNiYyNTUpLGdlKGEsYS5nemhlYWQudGltZT4+MjQmMjU1KSxnZShhLDk9PT1hLmxldmVsPzI6YS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj80OjApLGdlKGEsMjU1JmEuZ3poZWFkLm9zKSxhLmd6aGVhZC5leHRyYSYmYS5nemhlYWQuZXh0cmEubGVuZ3RoJiYoZ2UoYSwyNTUmYS5nemhlYWQuZXh0cmEubGVuZ3RoKSxnZShhLGEuZ3poZWFkLmV4dHJhLmxlbmd0aD4+OCYyNTUpKSxhLmd6aGVhZC5oY3JjJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLDApKSxhLmd6aW5kZXg9MCxhLnN0YXR1cz1KdCk6KGdlKGEsMCksZ2UoYSwwKSxnZShhLDApLGdlKGEsMCksZ2UoYSwwKSxnZShhLDk9PT1hLmxldmVsPzI6YS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj80OjApLGdlKGEsaGUpLGEuc3RhdHVzPW5lKTtlbHNle3ZhciBvPU10KyhhLndfYml0cy04PDw0KTw8ODtvfD0oYS5zdHJhdGVneT49Q3R8fGEubGV2ZWw8Mj8wOmEubGV2ZWw8Nj8xOjY9PT1hLmxldmVsPzI6Myk8PDYsMCE9PWEuc3Ryc3RhcnQmJihvfD0kdCksbys9MzEtbyUzMSxhLnN0YXR1cz1uZSx2ZShhLG8pLDAhPT1hLnN0cnN0YXJ0JiYodmUoYSx0LmFkbGVyPj4+MTYpLHZlKGEsNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihhLnN0YXR1cz09PUp0KWlmKGEuZ3poZWFkLmV4dHJhKXtmb3Iocj1hLnBlbmRpbmc7YS5nemluZGV4PCg2NTUzNSZhLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoYS5wZW5kaW5nIT09YS5wZW5kaW5nX2J1Zl9zaXplfHwoYS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksX2UodCkscj1hLnBlbmRpbmcsYS5wZW5kaW5nIT09YS5wZW5kaW5nX2J1Zl9zaXplKSk7KWdlKGEsMjU1JmEuZ3poZWFkLmV4dHJhW2EuZ3ppbmRleF0pLGEuZ3ppbmRleCsrO2EuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLGEuZ3ppbmRleD09PWEuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGEuZ3ppbmRleD0wLGEuc3RhdHVzPXRlKX1lbHNlIGEuc3RhdHVzPXRlO2lmKGEuc3RhdHVzPT09dGUpaWYoYS5nemhlYWQubmFtZSl7cj1hLnBlbmRpbmc7ZG97aWYoYS5wZW5kaW5nPT09YS5wZW5kaW5nX2J1Zl9zaXplJiYoYS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksX2UodCkscj1hLnBlbmRpbmcsYS5wZW5kaW5nPT09YS5wZW5kaW5nX2J1Zl9zaXplKSl7bj0xO2JyZWFrfW49YS5nemluZGV4PGEuZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZhLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoYS5nemluZGV4KyspOjAsZ2UoYSxuKX13aGlsZSgwIT09bik7YS5nemhlYWQuaGNyYyYmYS5wZW5kaW5nPnImJih0LmFkbGVyPV90KHQuYWRsZXIsYS5wZW5kaW5nX2J1ZixhLnBlbmRpbmctcixyKSksMD09PW4mJihhLmd6aW5kZXg9MCxhLnN0YXR1cz1lZSl9ZWxzZSBhLnN0YXR1cz1lZTtpZihhLnN0YXR1cz09PWVlKWlmKGEuZ3poZWFkLmNvbW1lbnQpe3I9YS5wZW5kaW5nO2Rve2lmKGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSYmKGEuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLF9lKHQpLHI9YS5wZW5kaW5nLGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWEuZ3ppbmRleDxhLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmYS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGEuZ3ppbmRleCsrKTowLGdlKGEsbil9d2hpbGUoMCE9PW4pO2EuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLDA9PT1uJiYoYS5zdGF0dXM9cmUpfWVsc2UgYS5zdGF0dXM9cmU7aWYoYS5zdGF0dXM9PT1yZSYmKGEuZ3poZWFkLmhjcmM/KGEucGVuZGluZysyPmEucGVuZGluZ19idWZfc2l6ZSYmX2UodCksYS5wZW5kaW5nKzI8PWEucGVuZGluZ19idWZfc2l6ZSYmKGdlKGEsMjU1JnQuYWRsZXIpLGdlKGEsdC5hZGxlcj4+OCYyNTUpLHQuYWRsZXI9MCxhLnN0YXR1cz1uZSkpOmEuc3RhdHVzPW5lKSwwIT09YS5wZW5kaW5nKXtpZihfZSh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGEubGFzdF9mbHVzaD0tMSxFdH1lbHNlIGlmKDA9PT10LmF2YWlsX2luJiZ1ZShlKTw9dWUoaSkmJmUhPT1BdClyZXR1cm4gbGUodCxMdCk7aWYoYS5zdGF0dXM9PT1hZSYmMCE9PXQuYXZhaWxfaW4pcmV0dXJuIGxlKHQsTHQpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09YS5sb29rYWhlYWR8fGUhPT14dCYmYS5zdGF0dXMhPT1hZSl7dmFyIHM9YS5zdHJhdGVneT09PUN0P3plKGEsZSk6YS5zdHJhdGVneT09PUZ0P2tlKGEsZSk6U2VbYS5sZXZlbF0uZnVuYyhhLGUpO2lmKHMhPT1zZSYmcyE9PWNlfHwoYS5zdGF0dXM9YWUpLHM9PT1pZXx8cz09PXNlKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihhLmxhc3RfZmx1c2g9LTEpLEV0O2lmKHM9PT1vZSYmKGU9PT1rdD9idChhKTplIT09U3QmJih5dChhLDAsMCwhMSksZT09PXp0JiYoZmUoYS5oZWFkKSwwPT09YS5sb29rYWhlYWQmJihhLnN0cnN0YXJ0PTAsYS5ibG9ja19zdGFydD0wLGEuaW5zZXJ0PTApKSksX2UodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gYS5sYXN0X2ZsdXNoPS0xLEV0fXJldHVybiBlIT09QXQ/RXQ6YS53cmFwPD0wP0J0OigyPT09YS53cmFwPyhnZShhLDI1NSZ0LmFkbGVyKSxnZShhLHQuYWRsZXI+PjgmMjU1KSxnZShhLHQuYWRsZXI+PjE2JjI1NSksZ2UoYSx0LmFkbGVyPj4yNCYyNTUpLGdlKGEsMjU1JnQudG90YWxfaW4pLGdlKGEsdC50b3RhbF9pbj4+OCYyNTUpLGdlKGEsdC50b3RhbF9pbj4+MTYmMjU1KSxnZShhLHQudG90YWxfaW4+PjI0JjI1NSkpOih2ZShhLHQuYWRsZXI+Pj4xNiksdmUoYSw2NTUzNSZ0LmFkbGVyKSksX2UodCksYS53cmFwPjAmJihhLndyYXA9LWEud3JhcCksMCE9PWEucGVuZGluZz9FdDpCdCl9LGRlZmxhdGVFbmQ6ZnVuY3Rpb24odCl7aWYoIXR8fCF0LnN0YXRlKXJldHVybiBSdDt2YXIgZT10LnN0YXRlLnN0YXR1cztyZXR1cm4gZSE9PVF0JiZlIT09SnQmJmUhPT10ZSYmZSE9PWVlJiZlIT09cmUmJmUhPT1uZSYmZSE9PWFlP2xlKHQsUnQpOih0LnN0YXRlPW51bGwsZT09PW5lP2xlKHQsRHQpOkV0KX0sZGVmbGF0ZVNldERpY3Rpb25hcnk6ZnVuY3Rpb24odCxlKXt2YXIgcj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIFJ0O3ZhciBuPXQuc3RhdGUsYT1uLndyYXA7aWYoMj09PWF8fDE9PT1hJiZuLnN0YXR1cyE9PVF0fHxuLmxvb2thaGVhZClyZXR1cm4gUnQ7aWYoMT09PWEmJih0LmFkbGVyPWZ0KHQuYWRsZXIsZSxyLDApKSxuLndyYXA9MCxyPj1uLndfc2l6ZSl7MD09PWEmJihmZShuLmhlYWQpLG4uc3Ryc3RhcnQ9MCxuLmJsb2NrX3N0YXJ0PTAsbi5pbnNlcnQ9MCk7dmFyIGk9bmV3IFVpbnQ4QXJyYXkobi53X3NpemUpO2kuc2V0KGUuc3ViYXJyYXkoci1uLndfc2l6ZSxyKSwwKSxlPWkscj1uLndfc2l6ZX12YXIgbz10LmF2YWlsX2luLHM9dC5uZXh0X2luLGM9dC5pbnB1dDtmb3IodC5hdmFpbF9pbj1yLHQubmV4dF9pbj0wLHQuaW5wdXQ9ZSxtZShuKTtuLmxvb2thaGVhZD49V3Q7KXt2YXIgaD1uLnN0cnN0YXJ0LGw9bi5sb29rYWhlYWQtKFd0LTEpO2Rve24uaW5zX2g9ZGUobixuLmluc19oLG4ud2luZG93W2grV3QtMV0pLG4ucHJldltoJm4ud19tYXNrXT1uLmhlYWRbbi5pbnNfaF0sbi5oZWFkW24uaW5zX2hdPWgsaCsrfXdoaWxlKC0tbCk7bi5zdHJzdGFydD1oLG4ubG9va2FoZWFkPVd0LTEsbWUobil9cmV0dXJuIG4uc3Ryc3RhcnQrPW4ubG9va2FoZWFkLG4uYmxvY2tfc3RhcnQ9bi5zdHJzdGFydCxuLmluc2VydD1uLmxvb2thaGVhZCxuLmxvb2thaGVhZD0wLG4ubWF0Y2hfbGVuZ3RoPW4ucHJldl9sZW5ndGg9V3QtMSxuLm1hdGNoX2F2YWlsYWJsZT0wLHQubmV4dF9pbj1zLHQuaW5wdXQ9Yyx0LmF2YWlsX2luPW8sbi53cmFwPWEsRXR9LGRlZmxhdGVJbmZvOiJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIn0sVWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LENlPXthc3NpZ246ZnVuY3Rpb24oZSl7Zm9yKHZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyLmxlbmd0aDspe3ZhciBuPXIuc2hpZnQoKTtpZihuKXtpZigib2JqZWN0IiE9PXQobikpdGhyb3cgbmV3IFR5cGVFcnJvcihuKyJtdXN0IGJlIG5vbi1vYmplY3QiKTtmb3IodmFyIGEgaW4gbilVZShuLGEpJiYoZVthXT1uW2FdKX19cmV0dXJuIGV9LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj0wLG49dC5sZW5ndGg7cjxuO3IrKyllKz10W3JdLmxlbmd0aDtmb3IodmFyIGE9bmV3IFVpbnQ4QXJyYXkoZSksaT0wLG89MCxzPXQubGVuZ3RoO2k8cztpKyspe3ZhciBjPXRbaV07YS5zZXQoYyxvKSxvKz1jLmxlbmd0aH1yZXR1cm4gYX19LEZlPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKHQpe0ZlPSExfWZvcih2YXIgVGU9bmV3IFVpbnQ4QXJyYXkoMjU2KSxIZT0wO0hlPDI1NjtIZSsrKVRlW0hlXT1IZT49MjUyPzY6SGU+PTI0OD81OkhlPj0yNDA/NDpIZT49MjI0PzM6SGU+PTE5Mj8yOjE7VGVbMjU0XT1UZVsyNTRdPTE7dmFyIFplPWZ1bmN0aW9uKHQsZSl7aWYoZTw2NTUzNCYmdC5zdWJhcnJheSYmRmUpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0Lmxlbmd0aD09PWU/dDp0LnN1YmFycmF5KDAsZSkpO2Zvcih2YXIgcj0iIixuPTA7bjxlO24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO3JldHVybiByfSxNZT17c3RyaW5nMmJ1ZjpmdW5jdGlvbih0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dEVuY29kZXImJlRleHRFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUpcmV0dXJuKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpO3ZhciBlLHIsbixhLGksbz10Lmxlbmd0aCxzPTA7Zm9yKGE9MDthPG87YSsrKTU1Mjk2PT0oNjQ1MTImKHI9dC5jaGFyQ29kZUF0KGEpKSkmJmErMTxvJiY1NjMyMD09KDY0NTEyJihuPXQuY2hhckNvZGVBdChhKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGErKykscys9cjwxMjg/MTpyPDIwNDg/MjpyPDY1NTM2PzM6NDtmb3IoZT1uZXcgVWludDhBcnJheShzKSxpPTAsYT0wO2k8czthKyspNTUyOTY9PSg2NDUxMiYocj10LmNoYXJDb2RlQXQoYSkpKSYmYSsxPG8mJjU2MzIwPT0oNjQ1MTImKG49dC5jaGFyQ29kZUF0KGErMSkpKSYmKHI9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCksYSsrKSxyPDEyOD9lW2krK109cjpyPDIwNDg/KGVbaSsrXT0xOTJ8cj4+PjYsZVtpKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW2krK109MjI0fHI+Pj4xMixlW2krK109MTI4fHI+Pj42JjYzLGVbaSsrXT0xMjh8NjMmcik6KGVbaSsrXT0yNDB8cj4+PjE4LGVbaSsrXT0xMjh8cj4+PjEyJjYzLGVbaSsrXT0xMjh8cj4+PjYmNjMsZVtpKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sYnVmMnN0cmluZzpmdW5jdGlvbih0LGUpe3ZhciByLG4sYT1lfHx0Lmxlbmd0aDtpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dERlY29kZXImJlRleHREZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUpcmV0dXJuKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKHQuc3ViYXJyYXkoMCxlKSk7dmFyIGk9bmV3IEFycmF5KDIqYSk7Zm9yKG49MCxyPTA7cjxhOyl7dmFyIG89dFtyKytdO2lmKG88MTI4KWlbbisrXT1vO2Vsc2V7dmFyIHM9VGVbb107aWYocz40KWlbbisrXT02NTUzMyxyKz1zLTE7ZWxzZXtmb3IobyY9Mj09PXM/MzE6Mz09PXM/MTU6NztzPjEmJnI8YTspbz1vPDw2fDYzJnRbcisrXSxzLS07cz4xP2lbbisrXT02NTUzMzpvPDY1NTM2P2lbbisrXT1vOihvLT02NTUzNixpW24rK109NTUyOTZ8bz4+MTAmMTAyMyxpW24rK109NTYzMjB8MTAyMyZvKX19fXJldHVybiBaZShpLG4pfSx1dGY4Ym9yZGVyOmZ1bmN0aW9uKHQsZSl7KGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciByPWUtMTtyPj0wJiYxMjg9PSgxOTImdFtyXSk7KXItLTtyZXR1cm4gcjwwfHwwPT09cj9lOnIrVGVbdFtyXV0+ZT9yOmV9fTtmdW5jdGlvbiBJZSgpe3RoaXMuaW5wdXQ9bnVsbCx0aGlzLm5leHRfaW49MCx0aGlzLmF2YWlsX2luPTAsdGhpcy50b3RhbF9pbj0wLHRoaXMub3V0cHV0PW51bGwsdGhpcy5uZXh0X291dD0wLHRoaXMuYXZhaWxfb3V0PTAsdGhpcy50b3RhbF9vdXQ9MCx0aGlzLm1zZz0iIix0aGlzLnN0YXRlPW51bGwsdGhpcy5kYXRhX3R5cGU9Mix0aGlzLmFkbGVyPTB9dmFyIE5lPUllLFBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsamU9Z3QuWl9OT19GTFVTSCxLZT1ndC5aX1NZTkNfRkxVU0gsWGU9Z3QuWl9GVUxMX0ZMVVNILHFlPWd0LlpfRklOSVNILEdlPWd0LlpfT0ssV2U9Z3QuWl9TVFJFQU1fRU5ELFllPWd0LlpfREVGQVVMVF9DT01QUkVTU0lPTixWZT1ndC5aX0RFRkFVTFRfU1RSQVRFR1ksJGU9Z3QuWl9ERUZMQVRFRDtmdW5jdGlvbiBRZSh0KXt0aGlzLm9wdGlvbnM9Q2UuYXNzaWduKHtsZXZlbDpZZSxtZXRob2Q6JGUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpWZX0sdHx8e30pO3ZhciBlPXRoaXMub3B0aW9ucztlLnJhdyYmZS53aW5kb3dCaXRzPjA/ZS53aW5kb3dCaXRzPS1lLndpbmRvd0JpdHM6ZS5nemlwJiZlLndpbmRvd0JpdHM+MCYmZS53aW5kb3dCaXRzPDE2JiYoZS53aW5kb3dCaXRzKz0xNiksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgTmUsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPU9lLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09R2UpdGhyb3cgbmV3IEVycm9yKHB0W3JdKTtpZihlLmhlYWRlciYmT2UuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7dmFyIG47aWYobj0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9NZS5zdHJpbmcyYnVmKGUuZGljdGlvbmFyeSk6IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PVBlLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSwocj1PZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sbikpIT09R2UpdGhyb3cgbmV3IEVycm9yKHB0W3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gSmUodCxlKXt2YXIgcj1uZXcgUWUoZSk7aWYoci5wdXNoKHQsITApLHIuZXJyKXRocm93IHIubXNnfHxwdFtyLmVycl07cmV0dXJuIHIucmVzdWx0fWZ1bmN0aW9uIHRyKHQsZSl7cmV0dXJuKGU9ZXx8e30pLnJhdz0hMCxKZSh0LGUpfWZ1bmN0aW9uIGVyKHQsZSl7cmV0dXJuKGU9ZXx8e30pLmd6aXA9ITAsSmUodCxlKX1RZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe3ZhciByLG4sYT10aGlzLnN0cm0saT10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7Zm9yKG49ZT09PX5+ZT9lOiEwPT09ZT9xZTpqZSwic3RyaW5nIj09dHlwZW9mIHQ/YS5pbnB1dD1NZS5zdHJpbmcyYnVmKHQpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1QZS5jYWxsKHQpP2EuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkodCk6YS5pbnB1dD10LGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7OylpZigwPT09YS5hdmFpbF9vdXQmJihhLm91dHB1dD1uZXcgVWludDhBcnJheShpKSxhLm5leHRfb3V0PTAsYS5hdmFpbF9vdXQ9aSksKG49PT1LZXx8bj09PVhlKSYmYS5hdmFpbF9vdXQ8PTYpdGhpcy5vbkRhdGEoYS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSksYS5hdmFpbF9vdXQ9MDtlbHNle2lmKChyPU9lLmRlZmxhdGUoYSxuKSk9PT1XZSlyZXR1cm4gYS5uZXh0X291dD4wJiZ0aGlzLm9uRGF0YShhLm91dHB1dC5zdWJhcnJheSgwLGEubmV4dF9vdXQpKSxyPU9lLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKHIpLHRoaXMuZW5kZWQ9ITAscj09PUdlO2lmKDAhPT1hLmF2YWlsX291dCl7aWYobj4wJiZhLm5leHRfb3V0PjApdGhpcy5vbkRhdGEoYS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSksYS5hdmFpbF9vdXQ9MDtlbHNlIGlmKDA9PT1hLmF2YWlsX2luKWJyZWFrfWVsc2UgdGhpcy5vbkRhdGEoYS5vdXRwdXQpfXJldHVybiEwfSxRZS5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3RoaXMuY2h1bmtzLnB1c2godCl9LFFlLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbih0KXt0PT09R2UmJih0aGlzLnJlc3VsdD1DZS5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9dCx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfTt2YXIgcnI9UWUsbnI9SmUsYXI9dHIsaXI9ZXIsb3I9Z3Qsc3I9e0RlZmxhdGU6cnIsZGVmbGF0ZTpucixkZWZsYXRlUmF3OmFyLGd6aXA6aXIsY29uc3RhbnRzOm9yfTtlLkRlZmxhdGU9cnIsZS5jb25zdGFudHM9b3IsZS5kZWZhdWx0PXNyLGUuZGVmbGF0ZT1ucixlLmRlZmxhdGVSYXc9YXIsZS5nemlwPWlyLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0pKG8uZXhwb3J0cyk7dmFyIHMsYz17ZXhwb3J0czp7fX0saD17ZXhwb3J0czp7fX07aC5leHBvcnRzPXM9c3x8ZnVuY3Rpb24odCxlKXt2YXIgcjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKHI9d2luZG93LmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLmNyeXB0byYmKHI9c2VsZi5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcy5jcnlwdG8mJihyPWdsb2JhbFRoaXMuY3J5cHRvKSwhciYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5tc0NyeXB0byYmKHI9d2luZG93Lm1zQ3J5cHRvKSwhciYmdm9pZCAwIT09aSYmaS5jcnlwdG8mJihyPWkuY3J5cHRvKSwhcil0cnl7cj1yZXF1aXJlKCJjcnlwdG8iKX1jYXRjaCh0KXt9dmFyIG49ZnVuY3Rpb24oKXtpZihyKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5nZXRSYW5kb21WYWx1ZXMpdHJ5e3JldHVybiByLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdfWNhdGNoKHQpe31pZigiZnVuY3Rpb24iPT10eXBlb2Ygci5yYW5kb21CeXRlcyl0cnl7cmV0dXJuIHIucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKX1jYXRjaCh0KXt9fXRocm93IG5ldyBFcnJvcigiTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLiIpfSxhPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlPWUscj1uZXcgdCx0LnByb3RvdHlwZT1udWxsLHJ9fSgpLG89e30scz1vLmxpYj17fSxjPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPWEodGhpcyk7cmV0dXJuIHQmJmUubWl4SW4odCksZS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT1lLmluaXR8fChlLmluaXQ9ZnVuY3Rpb24oKXtlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuaW5pdC5wcm90b3R5cGU9ZSxlLiRzdXBlcj10aGlzLGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHQuaW5pdC5hcHBseSh0LGFyZ3VtZW50cyksdH0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXNbZV09dFtlXSk7dC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saD1zLldvcmRBcnJheT1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3Q9dGhpcy53b3Jkcz10fHxbXSx0aGlzLnNpZ0J5dGVzPXIhPWU/cjo0KnQubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dSkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53b3JkcyxyPXQud29yZHMsbj10aGlzLnNpZ0J5dGVzLGE9dC5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksbiU0KWZvcih2YXIgaT0wO2k8YTtpKyspe3ZhciBvPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O2VbbitpPj4+Ml18PW88PDI0LShuK2kpJTQqOH1lbHNlIGZvcih2YXIgcz0wO3M8YTtzKz00KWVbbitzPj4+Ml09cltzPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPWEsdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndvcmRzLHI9dGhpcy5zaWdCeXRlcztlW3I+Pj4yXSY9NDI5NDk2NzI5NTw8MzItciU0KjgsZS5sZW5ndGg9dC5jZWlsKHIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Yy5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksdH0scmFuZG9tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0O3IrPTQpZS5wdXNoKG4oKSk7cmV0dXJuIG5ldyBoLmluaXQoZSx0KX19KSxsPW8uZW5jPXt9LHU9bC5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKChpPj4+NCkudG9TdHJpbmcoMTYpKSxuLnB1c2goKDE1JmkpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bis9MilyW24+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNik8PDI0LW4lOCo0O3JldHVybiBuZXcgaC5pbml0KHIsZS8yKX19LGY9bC5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rKylyW24+Pj4yXXw9KDI1NSZ0LmNoYXJDb2RlQXQobikpPDwyNC1uJTQqODtyZXR1cm4gbmV3IGguaW5pdChyLGUpfX0sZD1sLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZi5zdHJpbmdpZnkodCkpKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gZi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpKX19LF89cy5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWMuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGguaW5pdCx0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1kLnBhcnNlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbihlKXt2YXIgcixuPXRoaXMuX2RhdGEsYT1uLndvcmRzLGk9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLHM9aS8oNCpvKSxjPShzPWU/dC5jZWlsKHMpOnQubWF4KCgwfHMpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sbD10Lm1pbig0KmMsaSk7aWYoYyl7Zm9yKHZhciB1PTA7dTxjO3UrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYSx1KTtyPWEuc3BsaWNlKDAsYyksbi5zaWdCeXRlcy09bH1yZXR1cm4gbmV3IGguaW5pdChyLGwpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWMuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksdH0sX21pbkJ1ZmZlclNpemU6MH0pO3MuSGFzaGVyPV8uZXh0ZW5kKHtjZmc6Yy5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7Xy5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hcHBlbmQodCksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQuaW5pdChyKS5maW5hbGl6ZShlKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgcC5ITUFDLmluaXQodCxyKS5maW5hbGl6ZShlKX19fSk7dmFyIHA9by5hbGdvPXt9O3JldHVybiBvfShNYXRoKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuV29yZEFycmF5O2Z1bmN0aW9uIG4odCxlLG4pe2Zvcih2YXIgYT1bXSxpPTAsbz0wO288ZTtvKyspaWYobyU0KXt2YXIgcz1uW3QuY2hhckNvZGVBdChvLTEpXTw8byU0KjJ8blt0LmNoYXJDb2RlQXQobyldPj4+Ni1vJTQqMjthW2k+Pj4yXXw9czw8MjQtaSU0KjgsaSsrfXJldHVybiByLmNyZWF0ZShhLGkpfWUuZW5jLkJhc2U2ND17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49dGhpcy5fbWFwO3QuY2xhbXAoKTtmb3IodmFyIGE9W10saT0wO2k8cjtpKz0zKWZvcih2YXIgbz0oZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwoZVtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fGVbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LHM9MDtzPDQmJmkrLjc1KnM8cjtzKyspYS5wdXNoKG4uY2hhckF0KG8+Pj42KigzLXMpJjYzKSk7dmFyIGM9bi5jaGFyQXQoNjQpO2lmKGMpZm9yKDthLmxlbmd0aCU0OylhLnB1c2goYyk7cmV0dXJuIGEuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLHI9dGhpcy5fbWFwLGE9dGhpcy5fcmV2ZXJzZU1hcDtpZighYSl7YT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWFbci5jaGFyQ29kZUF0KGkpXT1pfXZhciBvPXIuY2hhckF0KDY0KTtpZihvKXt2YXIgcz10LmluZGV4T2Yobyk7LTEhPT1zJiYoZT1zKX1yZXR1cm4gbih0LGUsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KCksdC5lbmMuQmFzZTY0fShoLmV4cG9ydHMpfShjKTt2YXIgbD1jLmV4cG9ydHMsdT17ZXhwb3J0czp7fX0sZj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsYT1uLldvcmRBcnJheSxpPW4uSGFzaGVyLG89ci5hbGdvLHM9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw2NDt0Kyspc1t0XT00Mjk0OTY3Mjk2KmUuYWJzKGUuc2luKHQrMSkpfDB9KCk7dmFyIGM9by5NRDU9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgYS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTA7cjwxNjtyKyspe3ZhciBuPWUrcixhPXRbbl07dFtuXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KX12YXIgaT10aGlzLl9oYXNoLndvcmRzLG89dFtlKzBdLGM9dFtlKzFdLGQ9dFtlKzJdLF89dFtlKzNdLHA9dFtlKzRdLGc9dFtlKzVdLHY9dFtlKzZdLHk9dFtlKzddLHc9dFtlKzhdLG09dFtlKzldLGI9dFtlKzEwXSx4PXRbZSsxMV0saz10W2UrMTJdLHo9dFtlKzEzXSxBPXRbZSsxNF0sUz10W2UrMTVdLEU9aVswXSxCPWlbMV0sUj1pWzJdLEQ9aVszXTtFPWgoRSxCLFIsRCxvLDcsc1swXSksRD1oKEQsRSxCLFIsYywxMixzWzFdKSxSPWgoUixELEUsQixkLDE3LHNbMl0pLEI9aChCLFIsRCxFLF8sMjIsc1szXSksRT1oKEUsQixSLEQscCw3LHNbNF0pLEQ9aChELEUsQixSLGcsMTIsc1s1XSksUj1oKFIsRCxFLEIsdiwxNyxzWzZdKSxCPWgoQixSLEQsRSx5LDIyLHNbN10pLEU9aChFLEIsUixELHcsNyxzWzhdKSxEPWgoRCxFLEIsUixtLDEyLHNbOV0pLFI9aChSLEQsRSxCLGIsMTcsc1sxMF0pLEI9aChCLFIsRCxFLHgsMjIsc1sxMV0pLEU9aChFLEIsUixELGssNyxzWzEyXSksRD1oKEQsRSxCLFIseiwxMixzWzEzXSksUj1oKFIsRCxFLEIsQSwxNyxzWzE0XSksRT1sKEUsQj1oKEIsUixELEUsUywyMixzWzE1XSksUixELGMsNSxzWzE2XSksRD1sKEQsRSxCLFIsdiw5LHNbMTddKSxSPWwoUixELEUsQix4LDE0LHNbMThdKSxCPWwoQixSLEQsRSxvLDIwLHNbMTldKSxFPWwoRSxCLFIsRCxnLDUsc1syMF0pLEQ9bChELEUsQixSLGIsOSxzWzIxXSksUj1sKFIsRCxFLEIsUywxNCxzWzIyXSksQj1sKEIsUixELEUscCwyMCxzWzIzXSksRT1sKEUsQixSLEQsbSw1LHNbMjRdKSxEPWwoRCxFLEIsUixBLDksc1syNV0pLFI9bChSLEQsRSxCLF8sMTQsc1syNl0pLEI9bChCLFIsRCxFLHcsMjAsc1syN10pLEU9bChFLEIsUixELHosNSxzWzI4XSksRD1sKEQsRSxCLFIsZCw5LHNbMjldKSxSPWwoUixELEUsQix5LDE0LHNbMzBdKSxFPXUoRSxCPWwoQixSLEQsRSxrLDIwLHNbMzFdKSxSLEQsZyw0LHNbMzJdKSxEPXUoRCxFLEIsUix3LDExLHNbMzNdKSxSPXUoUixELEUsQix4LDE2LHNbMzRdKSxCPXUoQixSLEQsRSxBLDIzLHNbMzVdKSxFPXUoRSxCLFIsRCxjLDQsc1szNl0pLEQ9dShELEUsQixSLHAsMTEsc1szN10pLFI9dShSLEQsRSxCLHksMTYsc1szOF0pLEI9dShCLFIsRCxFLGIsMjMsc1szOV0pLEU9dShFLEIsUixELHosNCxzWzQwXSksRD11KEQsRSxCLFIsbywxMSxzWzQxXSksUj11KFIsRCxFLEIsXywxNixzWzQyXSksQj11KEIsUixELEUsdiwyMyxzWzQzXSksRT11KEUsQixSLEQsbSw0LHNbNDRdKSxEPXUoRCxFLEIsUixrLDExLHNbNDVdKSxSPXUoUixELEUsQixTLDE2LHNbNDZdKSxFPWYoRSxCPXUoQixSLEQsRSxkLDIzLHNbNDddKSxSLEQsbyw2LHNbNDhdKSxEPWYoRCxFLEIsUix5LDEwLHNbNDldKSxSPWYoUixELEUsQixBLDE1LHNbNTBdKSxCPWYoQixSLEQsRSxnLDIxLHNbNTFdKSxFPWYoRSxCLFIsRCxrLDYsc1s1Ml0pLEQ9ZihELEUsQixSLF8sMTAsc1s1M10pLFI9ZihSLEQsRSxCLGIsMTUsc1s1NF0pLEI9ZihCLFIsRCxFLGMsMjEsc1s1NV0pLEU9ZihFLEIsUixELHcsNixzWzU2XSksRD1mKEQsRSxCLFIsUywxMCxzWzU3XSksUj1mKFIsRCxFLEIsdiwxNSxzWzU4XSksQj1mKEIsUixELEUseiwyMSxzWzU5XSksRT1mKEUsQixSLEQscCw2LHNbNjBdKSxEPWYoRCxFLEIsUix4LDEwLHNbNjFdKSxSPWYoUixELEUsQixkLDE1LHNbNjJdKSxCPWYoQixSLEQsRSxtLDIxLHNbNjNdKSxpWzBdPWlbMF0rRXwwLGlbMV09aVsxXStCfDAsaVsyXT1pWzJdK1J8MCxpWzNdPWlbM10rRHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGE9OCp0LnNpZ0J5dGVzO3JbYT4+PjVdfD0xMjg8PDI0LWElMzI7dmFyIGk9ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLG89bjtyWzE1KyhhKzY0Pj4+OTw8NCldPTE2NzExOTM1JihpPDw4fGk+Pj4yNCl8NDI3ODI1NTM2MCYoaTw8MjR8aT4+PjgpLHJbMTQrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG88PDh8bz4+PjI0KXw0Mjc4MjU1MzYwJihvPDwyNHxvPj4+OCksdC5zaWdCeXRlcz00KihyLmxlbmd0aCsxKSx0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBzPXRoaXMuX2hhc2gsYz1zLndvcmRzLGg9MDtoPDQ7aCsrKXt2YXIgbD1jW2hdO2NbaF09MTY3MTE5MzUmKGw8PDh8bD4+PjI0KXw0Mjc4MjU1MzYwJihsPDwyNHxsPj4+OCl9cmV0dXJuIHN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2Z1bmN0aW9uIGgodCxlLHIsbixhLGksbyl7dmFyIHM9dCsoZSZyfH5lJm4pK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1mdW5jdGlvbiBsKHQsZSxyLG4sYSxpLG8pe3ZhciBzPXQrKGUmbnxyJn5uKSthK287cmV0dXJuKHM8PGl8cz4+PjMyLWkpK2V9ZnVuY3Rpb24gdSh0LGUscixuLGEsaSxvKXt2YXIgcz10KyhlXnJebikrYStvO3JldHVybihzPDxpfHM+Pj4zMi1pKStlfWZ1bmN0aW9uIGYodCxlLHIsbixhLGksbyl7dmFyIHM9dCsocl4oZXx+bikpK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1yLk1ENT1pLl9jcmVhdGVIZWxwZXIoYyksci5IbWFjTUQ1PWkuX2NyZWF0ZUhtYWNIZWxwZXIoYyl9KE1hdGgpLHQuTUQ1fShoLmV4cG9ydHMpfShmKTt2YXIgZD17ZXhwb3J0czp7fX0sXz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuV29yZEFycmF5LGE9ci5IYXNoZXIsaT1lLmFsZ28sbz1bXSxzPWkuU0hBMT1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBuLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OCwzMjg1Mzc3NTIwXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxhPXJbMV0saT1yWzJdLHM9clszXSxjPXJbNF0saD0wO2g8ODA7aCsrKXtpZihoPDE2KW9baF09MHx0W2UraF07ZWxzZXt2YXIgbD1vW2gtM11eb1toLThdXm9baC0xNF1eb1toLTE2XTtvW2hdPWw8PDF8bD4+PjMxfXZhciB1PShuPDw1fG4+Pj4yNykrYytvW2hdO3UrPWg8MjA/MTUxODUwMDI0OSsoYSZpfH5hJnMpOmg8NDA/MTg1OTc3NTM5MysoYV5pXnMpOmg8NjA/KGEmaXxhJnN8aSZzKS0xODk0MDA3NTg4OihhXmlecyktODk5NDk3NTE0LGM9cyxzPWksaT1hPDwzMHxhPj4+MixhPW4sbj11fXJbMF09clswXStufDAsclsxXT1yWzFdK2F8MCxyWzJdPXJbMl0raXwwLHJbM109clszXStzfDAscls0XT1yWzRdK2N8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLGU9dC53b3JkcyxyPTgqdGhpcy5fbkRhdGFCeXRlcyxuPTgqdC5zaWdCeXRlcztyZXR1cm4gZVtuPj4+NV18PTEyODw8MjQtbiUzMixlWzE0KyhuKzY0Pj4+OTw8NCldPU1hdGguZmxvb3Ioci80Mjk0OTY3Mjk2KSxlWzE1KyhuKzY0Pj4+OTw8NCldPXIsdC5zaWdCeXRlcz00KmUubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtlLlNIQTE9YS5fY3JlYXRlSGVscGVyKHMpLGUuSG1hY1NIQTE9YS5fY3JlYXRlSG1hY0hlbHBlcihzKX0oKSx0LlNIQTF9KGguZXhwb3J0cyl9KF8pO3ZhciBwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUscixuO3I9KGU9dCkubGliLkJhc2Usbj1lLmVuYy5VdGY4LGUuYWxnby5ITUFDPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsZSl7dD10aGlzLl9oYXNoZXI9bmV3IHQuaW5pdCwic3RyaW5nIj09dHlwZW9mIGUmJihlPW4ucGFyc2UoZSkpO3ZhciByPXQuYmxvY2tTaXplLGE9NCpyO2Uuc2lnQnl0ZXM+YSYmKGU9dC5maW5hbGl6ZShlKSksZS5jbGFtcCgpO2Zvcih2YXIgaT10aGlzLl9vS2V5PWUuY2xvbmUoKSxvPXRoaXMuX2lLZXk9ZS5jbG9uZSgpLHM9aS53b3JkcyxjPW8ud29yZHMsaD0wO2g8cjtoKyspc1toXV49MTU0OTU1NjgyOCxjW2hdXj05MDk1MjI0ODY7aS5zaWdCeXRlcz1vLnNpZ0J5dGVzPWEsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhc2hlcjt0LnJlc2V0KCksdC51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZSh0KSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oYXNoZXIscj1lLmZpbmFsaXplKHQpO3JldHVybiBlLnJlc2V0KCksZS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKX19KX0oaC5leHBvcnRzKX0ocCksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLG49ci5CYXNlLGE9ci5Xb3JkQXJyYXksaT1lLmFsZ28sbz1pLk1ENSxzPWkuRXZwS0RGPW4uZXh0ZW5kKHtjZmc6bi5leHRlbmQoe2tleVNpemU6NCxoYXNoZXI6byxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KX0sY29tcHV0ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuPXRoaXMuY2ZnLGk9bi5oYXNoZXIuY3JlYXRlKCksbz1hLmNyZWF0ZSgpLHM9by53b3JkcyxjPW4ua2V5U2l6ZSxoPW4uaXRlcmF0aW9ucztzLmxlbmd0aDxjOyl7ciYmaS51cGRhdGUocikscj1pLnVwZGF0ZSh0KS5maW5hbGl6ZShlKSxpLnJlc2V0KCk7Zm9yKHZhciBsPTE7bDxoO2wrKylyPWkuZmluYWxpemUociksaS5yZXNldCgpO28uY29uY2F0KHIpfXJldHVybiBvLnNpZ0J5dGVzPTQqYyxvfX0pO2UuRXZwS0RGPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gcy5jcmVhdGUocikuY29tcHV0ZSh0LGUpfX0oKSx0LkV2cEtERn0oaC5leHBvcnRzKX0oZCk7dmFyIGc9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmxpYi5DaXBoZXJ8fGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uQmFzZSxpPW4uV29yZEFycmF5LG89bi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHM9ci5lbmM7cy5VdGY4O3ZhciBjPXMuQmFzZTY0LGg9ci5hbGdvLkV2cEtERixsPW4uQ2lwaGVyPW8uZXh0ZW5kKHtjZmc6YS5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsdCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlLHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLl94Zm9ybU1vZGU9dCx0aGlzLl9rZXk9ZSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7by5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2FwcGVuZCh0KSx0aGlzLl9kb0ZpbmFsaXplKCl9LGtleVNpemU6NCxpdlNpemU6NCxfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/dzp2fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZW5jcnlwdChlLHIsbixhKX0sZGVjcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZGVjcnlwdChlLHIsbixhKX19fX0oKX0pO24uU3RyZWFtQ2lwaGVyPWwuZXh0ZW5kKHtfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzKCEwKX0sYmxvY2tTaXplOjF9KTt2YXIgdT1yLm1vZGU9e30sZj1uLkJsb2NrQ2lwaGVyTW9kZT1hLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZSh0LGUpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9jaXBoZXI9dCx0aGlzLl9pdj1lfX0pLGQ9dS5DQkM9ZnVuY3Rpb24oKXt2YXIgdD1mLmV4dGVuZCgpO2Z1bmN0aW9uIHIodCxyLG4pe3ZhciBhLGk9dGhpcy5faXY7aT8oYT1pLHRoaXMuX2l2PWUpOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgbz0wO288bjtvKyspdFtyK29dXj1hW29dfXJldHVybiB0LkVuY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGE9bi5ibG9ja1NpemU7ci5jYWxsKHRoaXMsdCxlLGEpLG4uZW5jcnlwdEJsb2NrKHQsZSksdGhpcy5fcHJldkJsb2NrPXQuc2xpY2UoZSxlK2EpfX0pLHQuRGVjcnlwdG9yPXQuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9jaXBoZXIsYT1uLmJsb2NrU2l6ZSxpPXQuc2xpY2UoZSxlK2EpO24uZGVjcnlwdEJsb2NrKHQsZSksci5jYWxsKHRoaXMsdCxlLGEpLHRoaXMuX3ByZXZCbG9jaz1pfX0pLHR9KCksXz0oci5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9NCplLG49ci10LnNpZ0J5dGVzJXIsYT1uPDwyNHxuPDwxNnxuPDw4fG4sbz1bXSxzPTA7czxuO3MrPTQpby5wdXNoKGEpO3ZhciBjPWkuY3JlYXRlKG8sbik7dC5jb25jYXQoYyl9LHVucGFkOmZ1bmN0aW9uKHQpe3ZhciBlPTI1NSZ0LndvcmRzW3Quc2lnQnl0ZXMtMT4+PjJdO3Quc2lnQnl0ZXMtPWV9fTtuLkJsb2NrQ2lwaGVyPWwuZXh0ZW5kKHtjZmc6bC5jZmcuZXh0ZW5kKHttb2RlOmQscGFkZGluZzpffSkscmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdDtsLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcscj1lLml2LG49ZS5tb2RlO3RoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREU/dD1uLmNyZWF0ZUVuY3J5cHRvcjoodD1uLmNyZWF0ZURlY3J5cHRvcix0aGlzLl9taW5CdWZmZXJTaXplPTEpLHRoaXMuX21vZGUmJnRoaXMuX21vZGUuX19jcmVhdG9yPT10P3RoaXMuX21vZGUuaW5pdCh0aGlzLHImJnIud29yZHMpOih0aGlzLl9tb2RlPXQuY2FsbChuLHRoaXMsciYmci53b3JkcyksdGhpcy5fbW9kZS5fX2NyZWF0b3I9dCl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKHQsZSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmNmZy5wYWRkaW5nO3JldHVybiB0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFPyhlLnBhZCh0aGlzLl9kYXRhLHRoaXMuYmxvY2tTaXplKSx0PXRoaXMuX3Byb2Nlc3MoITApKToodD10aGlzLl9wcm9jZXNzKCEwKSxlLnVucGFkKHQpKSx0fSxibG9ja1NpemU6NH0pO3ZhciBwPW4uQ2lwaGVyUGFyYW1zPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3RoaXMubWl4SW4odCl9LHRvU3RyaW5nOmZ1bmN0aW9uKHQpe3JldHVybih0fHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLGc9KHIuZm9ybWF0PXt9KS5PcGVuU1NMPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dmFyIGU9dC5jaXBoZXJ0ZXh0LHI9dC5zYWx0O3JldHVybihyP2kuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQocikuY29uY2F0KGUpOmUpLnRvU3RyaW5nKGMpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZSxyPWMucGFyc2UodCksbj1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT1uWzBdJiYxNzAxMDc2ODMxPT1uWzFdJiYoZT1pLmNyZWF0ZShuLnNsaWNlKDIsNCkpLG4uc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OnIsc2FsdDplfSl9fSx2PW4uU2VyaWFsaXphYmxlQ2lwaGVyPWEuZXh0ZW5kKHtjZmc6YS5leHRlbmQoe2Zvcm1hdDpnfSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKTt2YXIgYT10LmNyZWF0ZUVuY3J5cHRvcihyLG4pLGk9YS5maW5hbGl6ZShlKSxvPWEuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDppLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOnQsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOnQuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfSxkZWNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpLHQuY3JlYXRlRGVjcnlwdG9yKHIsbikuZmluYWxpemUoZS5jaXBoZXJ0ZXh0KX0sX3BhcnNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P2UucGFyc2UodCx0aGlzKTp0fX0pLHk9KHIua2RmPXt9KS5PcGVuU1NMPXtleGVjdXRlOmZ1bmN0aW9uKHQsZSxyLG4pe258fChuPWkucmFuZG9tKDgpKTt2YXIgYT1oLmNyZWF0ZSh7a2V5U2l6ZTplK3J9KS5jb21wdXRlKHQsbiksbz1pLmNyZWF0ZShhLndvcmRzLnNsaWNlKGUpLDQqcik7cmV0dXJuIGEuc2lnQnl0ZXM9NCplLHAuY3JlYXRlKHtrZXk6YSxpdjpvLHNhbHQ6bn0pfX0sdz1uLlBhc3N3b3JkQmFzZWRDaXBoZXI9di5leHRlbmQoe2NmZzp2LmNmZy5leHRlbmQoe2tkZjp5fSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXt2YXIgYT0obj10aGlzLmNmZy5leHRlbmQobikpLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplKTtuLml2PWEuaXY7dmFyIGk9di5lbmNyeXB0LmNhbGwodGhpcyx0LGUsYS5rZXksbik7cmV0dXJuIGkubWl4SW4oYSksaX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpO3ZhciBhPW4ua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUsZS5zYWx0KTtyZXR1cm4gbi5pdj1hLml2LHYuZGVjcnlwdC5jYWxsKHRoaXMsdCxlLGEua2V5LG4pfX0pfSgpfShoLmV4cG9ydHMpfShnKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuQmxvY2tDaXBoZXIsbj1lLmFsZ28sYT1bXSxpPVtdLG89W10scz1bXSxjPVtdLGg9W10sbD1bXSx1PVtdLGY9W10sZD1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjU2O2UrKyl0W2VdPWU8MTI4P2U8PDE6ZTw8MV4yODM7dmFyIHI9MCxuPTA7Zm9yKGU9MDtlPDI1NjtlKyspe3ZhciBfPW5ebjw8MV5uPDwyXm48PDNebjw8NDtfPV8+Pj44XjI1NSZfXjk5LGFbcl09XyxpW19dPXI7dmFyIHA9dFtyXSxnPXRbcF0sdj10W2ddLHk9MjU3KnRbX11eMTY4NDMwMDgqXztvW3JdPXk8PDI0fHk+Pj44LHNbcl09eTw8MTZ8eT4+PjE2LGNbcl09eTw8OHx5Pj4+MjQsaFtyXT15LHk9MTY4NDMwMDkqdl42NTUzNypnXjI1NypwXjE2ODQzMDA4KnIsbFtfXT15PDwyNHx5Pj4+OCx1W19dPXk8PDE2fHk+Pj4xNixmW19dPXk8PDh8eT4+PjI0LGRbX109eSxyPyhyPXBedFt0W3Rbdl5wXV1dLG5ePXRbdFtuXV0pOnI9bj0xfX0oKTt2YXIgXz1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0scD1uLkFFUz1yLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7Zm9yKHZhciB0PXRoaXMuX2tleVByaW9yUmVzZXQ9dGhpcy5fa2V5LGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMvNCxuPTQqKCh0aGlzLl9uUm91bmRzPXIrNikrMSksaT10aGlzLl9rZXlTY2hlZHVsZT1bXSxvPTA7bzxuO28rKylvPHI/aVtvXT1lW29dOihoPWlbby0xXSxvJXI/cj42JiZvJXI9PTQmJihoPWFbaD4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdKTooaD1hWyhoPWg8PDh8aD4+PjI0KT4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdLGhePV9bby9yfDBdPDwyNCksaVtvXT1pW28tcl1eaCk7Zm9yKHZhciBzPXRoaXMuX2ludktleVNjaGVkdWxlPVtdLGM9MDtjPG47YysrKXtpZihvPW4tYyxjJTQpdmFyIGg9aVtvXTtlbHNlIGg9aVtvLTRdO3NbY109Yzw0fHxvPD00P2g6bFthW2g+Pj4yNF1dXnVbYVtoPj4+MTYmMjU1XV1eZlthW2g+Pj44JjI1NV1dXmRbYVsyNTUmaF1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5fa2V5U2NoZWR1bGUsbyxzLGMsaCxhKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dFtlKzFdO3RbZSsxXT10W2UrM10sdFtlKzNdPXIsdGhpcy5fZG9DcnlwdEJsb2NrKHQsZSx0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLHUsZixkLGkpLHI9dFtlKzFdLHRbZSsxXT10W2UrM10sdFtlKzNdPXJ9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24odCxlLHIsbixhLGksbyxzKXtmb3IodmFyIGM9dGhpcy5fblJvdW5kcyxoPXRbZV1eclswXSxsPXRbZSsxXV5yWzFdLHU9dFtlKzJdXnJbMl0sZj10W2UrM11eclszXSxkPTQsXz0xO188YztfKyspe3ZhciBwPW5baD4+PjI0XV5hW2w+Pj4xNiYyNTVdXmlbdT4+PjgmMjU1XV5vWzI1NSZmXV5yW2QrK10sZz1uW2w+Pj4yNF1eYVt1Pj4+MTYmMjU1XV5pW2Y+Pj44JjI1NV1eb1syNTUmaF1ecltkKytdLHY9blt1Pj4+MjRdXmFbZj4+PjE2JjI1NV1eaVtoPj4+OCYyNTVdXm9bMjU1JmxdXnJbZCsrXSx5PW5bZj4+PjI0XV5hW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5vWzI1NSZ1XV5yW2QrK107aD1wLGw9Zyx1PXYsZj15fXA9KHNbaD4+PjI0XTw8MjR8c1tsPj4+MTYmMjU1XTw8MTZ8c1t1Pj4+OCYyNTVdPDw4fHNbMjU1JmZdKV5yW2QrK10sZz0oc1tsPj4+MjRdPDwyNHxzW3U+Pj4xNiYyNTVdPDwxNnxzW2Y+Pj44JjI1NV08PDh8c1syNTUmaF0pXnJbZCsrXSx2PShzW3U+Pj4yNF08PDI0fHNbZj4+PjE2JjI1NV08PDE2fHNbaD4+PjgmMjU1XTw8OHxzWzI1NSZsXSlecltkKytdLHk9KHNbZj4+PjI0XTw8MjR8c1toPj4+MTYmMjU1XTw8MTZ8c1tsPj4+OCYyNTVdPDw4fHNbMjU1JnVdKV5yW2QrK10sdFtlXT1wLHRbZSsxXT1nLHRbZSsyXT12LHRbZSszXT15fSxrZXlTaXplOjh9KTtlLkFFUz1yLl9jcmVhdGVIZWxwZXIocCl9KCksdC5BRVN9KGguZXhwb3J0cyl9KHUpO3ZhciB2PXUuZXhwb3J0cyx5PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uV29yZEFycmF5LGk9bi5IYXNoZXIsbz1yLmFsZ28scz1bXSxjPVtdOyFmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciByPWUuc3FydCh0KSxuPTI7bjw9cjtuKyspaWYoISh0JW4pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHIodCl7cmV0dXJuIDQyOTQ5NjcyOTYqKHQtKDB8dCkpfDB9Zm9yKHZhciBuPTIsYT0wO2E8NjQ7KXQobikmJihhPDgmJihzW2FdPXIoZS5wb3cobiwuNSkpKSxjW2FdPXIoZS5wb3cobiwxLzMpKSxhKyspLG4rK30oKTt2YXIgaD1bXSxsPW8uU0hBMjU2PWkuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGEuaW5pdChzLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGE9clsxXSxpPXJbMl0sbz1yWzNdLHM9cls0XSxsPXJbNV0sdT1yWzZdLGY9cls3XSxkPTA7ZDw2NDtkKyspe2lmKGQ8MTYpaFtkXT0wfHRbZStkXTtlbHNle3ZhciBfPWhbZC0xNV0scD0oXzw8MjV8Xz4+PjcpXihfPDwxNHxfPj4+MTgpXl8+Pj4zLGc9aFtkLTJdLHY9KGc8PDE1fGc+Pj4xNyleKGc8PDEzfGc+Pj4xOSleZz4+PjEwO2hbZF09cCtoW2QtN10rditoW2QtMTZdfXZhciB5PW4mYV5uJmleYSZpLHc9KG48PDMwfG4+Pj4yKV4objw8MTl8bj4+PjEzKV4objw8MTB8bj4+PjIyKSxtPWYrKChzPDwyNnxzPj4+NileKHM8PDIxfHM+Pj4xMSleKHM8PDd8cz4+PjI1KSkrKHMmbF5+cyZ1KStjW2RdK2hbZF07Zj11LHU9bCxsPXMscz1vK218MCxvPWksaT1hLGE9bixuPW0rKHcreSl8MH1yWzBdPXJbMF0rbnwwLHJbMV09clsxXSthfDAsclsyXT1yWzJdK2l8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStzfDAscls1XT1yWzVdK2x8MCxyWzZdPXJbNl0rdXwwLHJbN109cls3XStmfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxyPXQud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KnQuc2lnQnl0ZXM7cmV0dXJuIHJbYT4+PjVdfD0xMjg8PDI0LWElMzIsclsxNCsoYSs2ND4+Pjk8PDQpXT1lLmZsb29yKG4vNDI5NDk2NzI5NiksclsxNSsoYSs2ND4+Pjk8PDQpXT1uLHQuc2lnQnl0ZXM9NCpyLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ci5TSEEyNTY9aS5fY3JlYXRlSGVscGVyKGwpLHIuSG1hY1NIQTI1Nj1pLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSx0LlNIQTI1Nn0oaC5leHBvcnRzKX0oeSk7dmFyIHc9eS5leHBvcnRzLG09e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgQXJyYXlCdWZmZXIpe3ZhciBlPXQubGliLldvcmRBcnJheSxyPWUuaW5pdDsoZS5pbml0PWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHQ9bmV3IFVpbnQ4QXJyYXkodCkpLCh0IGluc3RhbmNlb2YgSW50OEFycmF5fHwidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZ0IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQxNkFycmF5fHx0IGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQzMkFycmF5fHx0IGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpJiYodD1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2Zvcih2YXIgZT10LmJ5dGVMZW5ndGgsbj1bXSxhPTA7YTxlO2ErKyluW2E+Pj4yXXw9dFthXTw8MjQtYSU0Kjg7ci5jYWxsKHRoaXMsbixlKX1lbHNlIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oaC5leHBvcnRzKX0obSk7dmFyIGI9bS5leHBvcnRzLHg9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC5IbWFjU0hBMjU2fShoLmV4cG9ydHMpfSh4KTt2YXIgaz14LmV4cG9ydHM7b25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxuPWUuam9iLGk9ZS5jbWQscz1lLnNlcnZlcixjPWUucGF0aCxoPWUuYXBpS2V5LHU9ZS5idWZmZXIsZj1lLmtleUJhc2U2NCxkPWUuZ3ppcCxfPWUucmVmZXJyZXIscD1lLmlkLGc9ZS5hcHBJZCx5PWUucGVyc2lzdGVudElkLG09ZS5DUk9RVUVUX1ZFUlNJT04seD1lLmRlYnVnLHo9ZS53aGF0O3N3aXRjaChpKXtjYXNlInVwbG9hZEVuY3J5cHRlZCI6IWZ1bmN0aW9uKHQpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpfShjKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVua25vd24gd29ya2VyIGNvbW1hbmQiLGkpfWZ1bmN0aW9uIEEodCl7dmFyIGU9RGF0ZS5ub3coKSxyPWIuY3JlYXRlKHQpLG49bC5wYXJzZShmKSxpPWsocixuKSxvPWIucmFuZG9tKDE2KSxzPXYuZW5jcnlwdChyLG4se2l2Om99KS5jaXBoZXJ0ZXh0LGM9bmV3IEFycmF5QnVmZmVyKDQrby5zaWdCeXRlcytpLnNpZ0J5dGVzK3Muc2lnQnl0ZXMpLGg9bmV3IERhdGFWaWV3KGMpLHU9MDtoLnNldFVpbnQzMih1LDExMjk0NjgyMDksITEpLHUrPTQ7Zm9yKHZhciBkPTAsXz1bbyxpLHNdO2Q8Xy5sZW5ndGg7ZCsrKXt2YXIgZyx5PWEoX1tkXS53b3Jkcyk7dHJ5e2Zvcih5LnMoKTshKGc9eS5uKCkpLmRvbmU7KXt2YXIgdz1nLnZhbHVlO2guc2V0SW50MzIodSx3LCExKSx1Kz00fX1jYXRjaCh0KXt5LmUodCl9ZmluYWxseXt5LmYoKX19cmV0dXJuIHgmJmNvbnNvbGUubG9nKCIiLmNvbmNhdChwLCIgIikuY29uY2F0KHosIiBlbmNyeXB0ZWQgKCIpLmNvbmNhdChjLmJ5dGVMZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksY31mdW5jdGlvbiBTKHQpe3ZhciBlPURhdGUubm93KCkscj1vLmV4cG9ydHMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4geCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIGNvbXByZXNzZWQgKCIpLmNvbmNhdChyLmxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxyfWZ1bmN0aW9uIEUodCl7dmFyIGU9RGF0ZS5ub3coKSxyPXcoYi5jcmVhdGUodCkpLG49bC5zdHJpbmdpZnkocikucmVwbGFjZSgvPS9nLCIiKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiB4JiZjb25zb2xlLmxvZygiIi5jb25jYXQocCwiICIpLmNvbmNhdCh6LCIgaGFzaGVkICgiKS5jb25jYXQodC5sZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksbn1mdW5jdGlvbiBCKHQpe3JldHVybiBSLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBSKCl7cmV0dXJuKFI9cihyZWdlbmVyYXRvclJ1bnRpbWUubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGEsaSxvLGMsbDtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKHI9RGF0ZS5ub3coKSxuPSIiLmNvbmNhdChzLCIvIikuY29uY2F0KGUpLGgpe3QubmV4dD00O2JyZWFrfXJldHVybiB0LmFicnVwdCgicmV0dXJuIix7dXJsOm4sdXBsb2FkVXJsOm59KTtjYXNlIDQ6cmV0dXJuIHQubmV4dD02LGZldGNoKG4se2hlYWRlcnM6eyJYLUNyb3F1ZXQtQXV0aCI6aCwiWC1Dcm9xdWV0LUFwcCI6ZywiWC1Dcm9xdWV0LUlkIjp5LCJYLUNyb3F1ZXQtU2Vzc2lvbiI6cCwiWC1Dcm9xdWV0LVZlcnNpb24iOm19LHJlZmVycmVyOl99KTtjYXNlIDY6cmV0dXJuIGE9dC5zZW50LHQubmV4dD05LGEuanNvbigpO2Nhc2UgOTppZihpPXQuc2VudCxvPWkuZXJyb3IsYz1pLnJlYWQsbD1pLndyaXRlLCFvKXt0Lm5leHQ9MTU7YnJlYWt9dGhyb3cgRXJyb3Iobyk7Y2FzZSAxNTpyZXR1cm4geCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIGF1dGhvcml6ZWQgaW4gIikuY29uY2F0KERhdGUubm93KCktciwibXMiKSksdC5hYnJ1cHQoInJldHVybiIse3VybDpjLHVwbG9hZFVybDpsfSk7Y2FzZSAxNzpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEQoKXtyZXR1cm4oRD1yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLGEsaSxvLHMsYyxoLGwsZjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0LnByZXY9MCxyPUEoZD9TKHUpOnUpLGUuaW5jbHVkZXMoIiVIQVNIJSIpJiYoZT1lLnJlcGxhY2UoIiVIQVNIJSIsRShyKSkpLHQubmV4dD01LEIoZSk7Y2FzZSA1OnJldHVybiBhPXQuc2VudCxpPWEudXBsb2FkVXJsLG89YS51cmwscz1EYXRlLm5vdygpLHQubmV4dD0xMSxmZXRjaChpLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsIlgtQ3JvcXVldC1BcHAiOmcsIlgtQ3JvcXVldC1JZCI6eSwiWC1Dcm9xdWV0LVNlc3Npb24iOnAsIlgtQ3JvcXVldC1WZXJzaW9uIjptfSxyZWZlcnJlcjpfLGJvZHk6cn0pO2Nhc2UgMTE6aWYoYz10LnNlbnQsaD1jLm9rLGw9Yy5zdGF0dXMsZj1jLnN0YXR1c1RleHQsaCl7dC5uZXh0PTE3O2JyZWFrfXRocm93IEVycm9yKCJzZXJ2ZXIgcmV0dXJuZWQgIi5jb25jYXQobCwiICIpLmNvbmNhdChmLCIgZm9yIFBVVCAiKS5jb25jYXQoaSkpO2Nhc2UgMTc6eCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiAiKS5jb25jYXQoeiwiIHVwbG9hZGVkICgiKS5jb25jYXQobCwiKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1zLCJtcyAiKS5jb25jYXQobykpLHBvc3RNZXNzYWdlKHtqb2I6bix1cmw6byxvazpoLHN0YXR1czpsLHN0YXR1c1RleHQ6Zn0pLHQubmV4dD0yNTticmVhaztjYXNlIDIxOnQucHJldj0yMSx0LnQwPXQuY2F0Y2goMCkseCYmY29uc29sZS5sb2coIiIuY29uY2F0KHAsIiB1cGxvYWQgZXJyb3IgIikuY29uY2F0KHQudDAubWVzc2FnZSkpLHBvc3RNZXNzYWdlKHtqb2I6bixvazohMSxzdGF0dXM6LTEsc3RhdHVzVGV4dDp0LnQwLm1lc3NhZ2V9KTtjYXNlIDI1OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCxudWxsLFtbMCwyMV1dKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSgpOwoK",I4=null,M4=!1,function(n){return D_=D_||vae(E4,I4,M4),new Worker(D_,n)}),ka="1.0.5";window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+ka):console.log("%cCroquet%c %c"+ka,"color:#F0493E","color:inherit","color:".concat(ka.includes("+")?"#909":"inherit"));var PG=!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i),bae=PG&&window.location.pathname.startsWith("/dev/"),xae=PG?window.location.host:"croquet.io",Cae="wss://".concat(xae,"/reflector/v").concat(1),Je=null,R_,Sae=gt.nocheat,vm=[0],Fw=new wae;Fw.onerror=function(n){return console.error("UploadWorker error: ".concat(n.message))};var Eae=0,Wm=new Set;function T4(n){var e,t=Xt(Wm);try{var i=function(){var a=e.value;if(a.id===n){var l=a.sessionSpec;return{v:{appId:l.appId,persistentId:l.persistentId,uploadEncrypted:function(c){return a.uploadEncrypted(c)},downloadEncrypted:function(c){return a.downloadEncrypted(c)}}}}};for(t.s();!(e=t.n()).done;){var o=i();if($t(o)==="object")return o.v}}catch(a){t.e(a)}finally{t.f()}return{}}function Iae(n){var e,t=Xt(Wm);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.id===n)return i}}catch(o){t.e(o)}finally{t.f()}return null}var Mae=function(n){function e(){var v,C;ti(this,e),v=gt.dev||gt.dev!==!1&&"localhost",C=gt.dev||gt.dev!==!1&&bae,Je={messages:gt.has("debug","messages",!1),sends:gt.has("debug","sends",!1),ticks:gt.has("debug","ticks",!1),pong:gt.has("debug","pong",!1),snapshot:gt.has("debug","snapshot",!1),session:gt.has("debug","session",!1),initsnapshot:gt.has("debug","initsnapshot",v),reflector:gt.has("debug","reflector",C)},this.reset()}var t,i,o,a,l,c,u,h,A,f,d,p,m,b,g,w,I;return ui(e,[{key:"reset",value:function(){window.CROQUETVM===this.vm&&delete window.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new Tae(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*Math.pow(36,10)).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.rebootSignal=null,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(window.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(window.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,Ss.removeAllSubscriptionsFor(this.viewId),Ss.addSubscription(this.viewId,"__views__",this.viewId,function(v){return nG("users now ".concat(v.count))},"oncePerFrameWhileSynced"),this.leaving||At.showSyncWait(!0)}},{key:"id",get:function(){return this.vm?this.vm.id:this.sessionSpec.id}},{key:"persistentId",get:function(){return this.sessionSpec.persistentId}},{key:"versionId",get:function(){return this.sessionSpec.codeHash}},{key:"extrapolatedTime",get:function(){return Date.now()-this.extrapolatedTimeBase}},{key:"viewOnly",get:function(){return this.sessionSpec.viewOnly}},{key:"backlog",get:function(){return this.vm?this.reflectorTime-this.vm.time:0}},{key:"starvation",get:function(){return Date.now()-this.lastReceived}},{key:"lag",get:function(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}},{key:"activity",get:function(){return Date.now()-this.lastSent}},{key:"viewed",get:function(){return!(!this.session||!this.session.view)}},{key:"connected",get:function(){return this.connection.connected}},{key:"shouldLeaveWhenDisconnected",get:function(){return this.leaving||!this.canRejoinSeamlessly||this.sessionSpec.rejoinLimit===0}},{key:"canRejoinSeamlessly",get:function(){return!!this.timeline}},{key:"checkForConnection",value:function(v){this.connection.checkForConnection(v)}},{key:"dormantDisconnect",value:function(){this.connected&&this.connection.dormantDisconnect()}},{key:"initFromSessionSpec",value:(I=an(regeneratorRuntime.mark(function v(C){var E,S,M,_,T,D,R,B,P,F,z,Q,V,G,O,W,k,Y,te,ie,re,se,oe,le,xe,_e;return regeneratorRuntime.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(E=C.name,S=C.optionsFromUrl,M=C.password,_=C.appId,T=C.apiKey,D=C.viewIdDebugSuffix,R=_?"".concat(_,"/").concat(E):E,D&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+D).slice(0,16)).replace(/[^a-z0-9]/gi,function(K){return"_".concat(K==="%"?"":K.charCodeAt(0).toString(16).toUpperCase())})),B=Yn({},C.options),S){P=Xt(S);try{for(P.s();!(F=P.n()).done;)(z=F.value)in gt&&(B[z]=gt[z])}catch(K){P.e(K)}finally{P.f()}}for(Q={},V=0,G=["hashOverride"];V<G.length;V++)(O=G[V])in gt?Q[O]=gt[O]:O in C&&(Q[O]=C[O]);return this.key=e4(M,"",{keySize:8}),pe.next=10,Ire(R,B);case 10:return W=pe.sent,pe.next=13,this.verifyApiKey(T,_,W);case 13:return k=pe.sent,Y=k.developerId,te=k.token,pe.next=18,Mre(W,Y,Q,ka);case 18:return ie=pe.sent,re=ie.id,se=ie.codeHash,oe=ie.computedCodeHash,pe.next=24,this.encrypt(re);case 24:this.tove=pe.sent,Je.session&&console.log('Croquet session "'.concat(R,`":
        sessionId=`).concat(re).concat(_?`
        persistentId=`.concat(W):"",`
        versionId=`).concat(se===oe?se:"".concat(se,` (specified in hashOverride)
        versionId=`).concat(oe," (computed)"),`
        viewId=`).concat(this.viewId)),this.eventRateLimit=C.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec=Yn(Yn({},C),{},{options:B,name:R,id:re,persistentId:W,developerId:Y,token:te,codeHash:se,computedCodeHash:oe}),le=this.getTickAndMultiplier(),xe=le.msPerTick,_e=le.multiplier,this.msPerTick=xe,this.tickMultiplier=_e,this.setUpActivityChecks();case 34:case"end":return pe.stop()}},v,this)})),function(v){return I.apply(this,arguments)})},{key:"establishSession",value:(w=an(regeneratorRuntime.mark(function v(){var C,E,S,M,_,T=this;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return C=this.sessionSpec,E=C.id,S=C.persistentId,M=C.codeHash,this.sessionSpec.snapshot={id:E,time:0,meta:{id:E,persistentId:S,codeHash:M,created:new Date().toISOString()}},_=new Promise(function(R){return T.sessionSpec.sessionJoined=R}),this.checkForConnection(!1),Je.session&&console.log(E,"waiting for SYNC"),D.next=7,_;case 7:case"end":return D.stop()}},v,this)})),function(){return w.apply(this,arguments)})},{key:"verifyApiKey",value:(g=an(regeneratorRuntime.mark(function v(C,E,S){var M,_,T,D,R,B;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,M=Je.reflector?"https://api.croquet.io/dev/sign":"https://api.croquet.io/sign",P.next=4,fetch("".concat(M,"/join?meta=login"),{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":C,"X-Croquet-App":E,"X-Croquet-Id":S,"X-Croquet-Version":ka},referrer:At.referrerURL()});case 4:return _=P.sent,P.next=7,_.json();case 7:if(T=P.sent,D=T.error,R=T.developerId,B=T.token,!D){P.next=13;break}throw Error(D);case 13:return Je.session&&console.log("Croquet: verified API key"),P.abrupt("return",{developerId:R,token:B});case 17:throw P.prev=17,P.t0=P.catch(0),Error("Error verifying Croquet API key: ".concat(P.t0.message));case 20:case"end":return P.stop()}},v,null,[[0,17]])})),function(v,C,E){return g.apply(this,arguments)})},{key:"lastKnownTime",value:function(v){return Math.max(v.time,v.externalTime)}},{key:"syncCheck",value:(b=an(regeneratorRuntime.mark(function v(C,E){var S,M;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(this.synced===!0){_.next=2;break}return _.abrupt("return");case 2:return _.next=4,this.sendTutti(C,"syncCheck",E);case 4:S=_.sent,(M=Object.keys(S)).length>1?console.warn("sync check failed:",M):console.log("sync check ok");case 7:case"end":return _.stop()}},v,this)})),function(v,C){return b.apply(this,arguments)})},{key:"takeSnapshot",value:function(){var v=this.vm.snapshot(),C=this.lastKnownTime(v),E=v.externalSeq;return v.meta=Yn(Yn({},this.sessionSpec.snapshot.meta),{},{options:this.sessionSpec.options,time:C,seq:E,date:new Date().toISOString(),host:window.location.hostname,sdk:ka}),delete v.meta.hash,v}},{key:"scheduleSnapshot",value:function(){if(this.connected&&this.vm){var v=this.vm.time,C=v-this.vm.lastSnapshotPoll;if(C<5e3)Je.snapshot&&console.log("not requesting snapshot poll (".concat(C,"ms since poll scheduled)"));else{var E=new Cs(v,0,this.vm.id,"handlePollForSnapshot",[]);this.sendTagged(E,{debounce:5e3,msgID:"pollForSnapshot"}),Je.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}}}},{key:"handlePollForSnapshot",value:function(v){var C=this;if(this.synced===!0){var E,S,M,_=this.triggeringCpuTime||this.cpuTime;this.triggeringCpuTime=null,this.cpuTime=0;try{E=hn.begin("snapshot"),S={cpuTime:_,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(T){return void qr("snapshot",T)}finally{M=hn.end("snapshot")-E,this.cpuTime-=M}Je.snapshot&&console.log(this.id,"Summary hashing took ".concat(Math.ceil(M),"ms")),Promise.resolve().then(function(){return C.pollForSnapshot(v,S)})}else this.triggeringCpuTime=null}},{key:"pollForSnapshot",value:(m=an(regeneratorRuntime.mark(function v(C,E){var S,M,_,T,D;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return E.cpuTime+=Math.random(),Je.snapshot&&console.log(this.id,"sending snapshot vote",E),R.next=4,this.sendTutti(C,"snapshot",E);case 4:if(S=R.sent,this.synced===!0){R.next=8;break}return Je.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"),R.abrupt("return");case 8:Je.snapshot&&console.log(this.id,"received snapshot votes",S),M=this.analyzeTally(S,"cpuTime"),_=M.numberOfGroups,T=M.shouldUpload,D=M.dissidentFlag,_>1&&console.error(this.id,"Session diverged! Snapshots fall into ".concat(_," groups")),T&&this.serveSnapshot(D);case 12:case"end":return R.stop()}},v,this)})),function(v,C){return m.apply(this,arguments)})},{key:"analyzeTally",value:function(v,C){var E=this,S=!1,M=null,_=[],T={},D=null;Object.keys(v).forEach(function(Q,V){var G=JSON.parse(Q);_.push(G);var O=G.hash;G.viewId===E.viewId&&(D=V),T[O]||(T[O]=[]),T[O].push(V)});var R=Object.keys(T),B=R.length,P=R[0];if(B>1&&(R.sort(function(Q,V){return T[V].length-T[Q].length}),T[R[0]].length===T[R[1]].length&&(Je.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),P=R[0]<R[1]?R[0]:R[1])),D!==null){var F=_[D].hash,z=T[F];z.length>1&&z.sort(function(Q,V){return _[Q][C]-_[V][C]}),z[0]===D&&(S=!0,F!==P&&(M={groupVotes:z.length,allVotes:_.length}))}return{numberOfGroups:B,shouldUpload:S,dissidentFlag:M}}},{key:"serveSnapshot",value:function(v){var C,E,S;try{C=hn.begin("snapshot"),S=this.takeSnapshot()}catch(M){return void qr("snapshot",M)}finally{E=hn.end("snapshot")-C}Je.snapshot&&console.log(this.id,"snapshot taken in ".concat(Math.ceil(E)," ms")),this.uploadSnapshot(S,v)}},{key:"snapshotPath",value:function(v,C,E){var S=Math.ceil(v).toString().padStart(10,"0"),M=this.sessionSpec,_=M.appId,T=M.persistentId,D=M.codeHash;return M.apiKey?"apps/".concat(_,"/snap/").concat(D,"/").concat(T,".").concat(this.id,"/").concat(S,"_").concat(C,".").concat(E):"snapshots/".concat(this.id,"/").concat(S,"_").concat(C,"-").concat(E,".snap")}},{key:"hashSnapshot",value:function(v){return v.meta.hash?v.meta.hash:(v.meta.hashPromise||(v.meta.hashPromise=new Promise(function(C){var E=Yn({},v);delete E.meta,OA(JSON.stringify(E)).then(function(S){v.meta.hash=S,delete v.meta.hashPromise,C(S)})})),v.meta.hashPromise)}},{key:"uploadServer",value:function(){var v=Je.reflector?"https://api.croquet.io/dev/sign":"https://api.croquet.io/sign";return this.sessionSpec.apiKey||(v="https://croquet.io/files/v1"),typeof gt.files=="string"&&(v=gt.files).endsWith("/")&&(v=v.slice(0,-1)),v}},{key:"uploadSnapshot",value:(p=an(regeneratorRuntime.mark(function v(C){var E,S,M,_,T,D,R,B,P,F,z=arguments;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return E=z.length>1&&z[1]!==void 0?z[1]:null,Q.next=3,this.hashSnapshot(C);case 3:return S=hn.begin("snapshot"),M=JSON.stringify(C),_=hn.end("snapshot")-S,Je.snapshot&&console.log(this.id,"snapshot stringified (".concat(M.length," bytes) in ").concat(Math.ceil(_),"ms")),T=C.meta,D=T.time,R=T.seq,B=T.hash,P=this.connection.socket,Q.prev=9,Q.next=12,this.uploadEncrypted({content:M,path:this.snapshotPath(D,R,B),key:this.key,gzip:!0,debug:Je.snapshot,what:"snapshot"});case 12:if(F=Q.sent,this.connection.socket===P){Q.next=16;break}return console.warn(this.id,"Controller was reset while trying to upload snapshot"),Q.abrupt("return",!1);case 16:return this.announceSnapshotUrl(D,R,B,F,E),Q.abrupt("return",!0);case 20:return Q.prev=20,Q.t0=Q.catch(9),console.error(this.id,"Failed to upload snapshot"),Q.abrupt("return",!1);case 24:case"end":return Q.stop()}},v,this,[[9,20]])})),function(v){return p.apply(this,arguments)})},{key:"announceSnapshotUrl",value:function(v,C,E,S,M){if(Je.snapshot){var _="time: ".concat(v,", seq: ").concat(C,", hash: ").concat(E);M&&(_+=", as dissident; "+JSON.stringify(M)),console.log(this.id,"sending snapshot url to reflector (".concat(_,"): ").concat(S))}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:v,seq:C,hash:E,url:S,dissident:M}}))}catch(T){console.error("ERROR while sending",T)}}},{key:"downloadEncrypted",value:(d=an(regeneratorRuntime.mark(function v(C){var E,S,M,_,T,D,R,B,P,F,z;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return E=C.url,S=C.gzip,M=C.key,_=C.debug,T=C.json,D=C.what,E.startsWith("https://croquet.io/files/v1")&&(E=E.replace("https://croquet.io/files/v1","https://files.croquet.io")),R=Date.now(),Q.next=5,fetch(E,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId,"X-Croquet-Session":this.sessionSpec.id,"X-Croquet-Version":ka},referrer:At.referrerURL()});case 5:return B=Q.sent,Q.next=8,B.arrayBuffer();case 8:return P=Q.sent,_&&console.log(this.id,"".concat(D," fetched (").concat(P.byteLength," bytes) in ").concat(-R+(R=Date.now()),"ms")),F=this.decryptBinary(P,M),_&&console.log(this.id,"".concat(D," decrypted (").concat(F.length," bytes) in ").concat(-R+(R=Date.now()),"ms")),z=S?yae.inflate(F):F,_&&S&&console.log(this.id,"".concat(D," inflated (").concat(z.length," bytes) in ").concat(-R+(R=Date.now()),"ms")),Q.abrupt("return",T?JSON.parse(new TextDecoder().decode(z)):z);case 15:case"end":return Q.stop()}},v,this)})),function(v){return d.apply(this,arguments)})},{key:"uploadEncrypted",value:(f=an(regeneratorRuntime.mark(function v(C){var E,S,M,_,T,D,R,B,P,F,z,Q,V,G,O,W=this;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return E=C.content,S=C.path,M=C.key,_=C.gzip,T=C.keep,D=C.debug,R=C.what,B=typeof E=="string"?new TextEncoder().encode(E).buffer:E,P=T?void 0:[B],F=typeof M=="string"?M:$s.stringify(M),z=this.sessionSpec,Q=z.apiKey,V=z.appId,G=z.persistentId,O=++Eae,k.abrupt("return",new Promise(function(Y,te){Fw.postMessage({job:O,cmd:"uploadEncrypted",server:W.uploadServer(),path:S,apiKey:Q,buffer:B,keyBase64:F,gzip:_,referrer:At.referrerURL(),id:W.id,appId:V,persistentId:G,CROQUET_VERSION:ka,debug:D,what:R},P),Fw.addEventListener("message",function ie(re){if(O===re.data.job){var se=re.data,oe=se.url,le=se.ok,xe=se.status,_e=se.statusText;Fw.removeEventListener("message",ie),le?Y(oe):te(Error("".concat(xe,": ").concat(_e)))}})}));case 7:case"end":return k.stop()}},v,this)})),function(v){return f.apply(this,arguments)})},{key:"persistentPath",value:function(v){var C=this.sessionSpec,E=C.appId,S=C.persistentId;return"apps/".concat(E,"/").concat(S,"/save/").concat(v)}},{key:"pollForPersist",value:(A=an(regeneratorRuntime.mark(function v(C,E,S,M,_){var T,D,R,B,P;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.synced){F.next=2;break}return F.abrupt("return");case 2:if(this.sessionSpec.appId){F.next=4;break}throw Error("Persistence API requires appId");case 4:return F.next=6,this.persistenceVoting(C,E,M,_);case 6:if(T=F.sent,D=T.shouldUpload,R=T.dissidentFlag,D){F.next=11;break}return F.abrupt("return");case 11:return F.next=13,this.uploadEncrypted({path:this.persistentPath(M),content:S,key:this.key,gzip:!0,debug:Je.snapshot,what:"persistent data"});case 13:B=F.sent,Je.snapshot&&(P=R?" (as dissident; ".concat(JSON.stringify(R),")"):"",console.log(this.id,"sending persistent data url to reflector".concat(P,": ").concat(B)));try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:E,url:B,dissident:R}}))}catch(z){console.error("ERROR while sending",z)}case 16:case"end":return F.stop()}},v,this)})),function(v,C,E,S,M){return A.apply(this,arguments)})},{key:"persistenceVoting",value:(h=an(regeneratorRuntime.mark(function v(C,E,S,M){var _,T,D,R,B,P;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.synced===!0){F.next=2;break}return F.abrupt("return",!1);case 2:return _={viewId:this.viewId,hash:S,ms:M+.001*Math.random()},Je.snapshot&&console.log(this.id,"sending persistence vote for time @".concat(E),_),F.next=6,this.sendTutti(C,"persist",_);case 6:return T=F.sent,Je.snapshot&&console.log(this.id,"received persistence votes for time @".concat(E),T),D=this.analyzeTally(T,"ms"),R=D.numberOfGroups,B=D.shouldUpload,P=D.dissidentFlag,R>1&&console.warn(this.id,"Persistence records fall into ".concat(R," groups")),F.abrupt("return",{shouldUpload:B,dissidentFlag:P});case 11:case"end":return F.stop()}},v,this)})),function(v,C,E,S){return h.apply(this,arguments)})},{key:"convertReflectorMessage",value:function(v){var C=this.id,E="noop",S=[];switch(v[2].what){case"users":var M=v[2],_=M.joined,T=M.left,D=M.active,R=M.total;this.users=D,this.usersTotal=R;var B=this.id,P="__views__",F={entered:_||[],exited:T||[],count:D};C=this.id,E="publishFromModelOnly",S=[B,P,F],Ss.handleEvent(this.viewId+":"+P,F);break;case"tally":var z=v[2],Q=z.tuttiSeq,V=z.tuttiKey,G=z.tally,O=z.tallyTarget,W=z.missingClients;(Je.messages||Je.snapshot)&&W&&console.log("".concat(W," ").concat(W===1?"client":"clients"," failed to participate in tally ").concat(V||Q));var k=V?function(oe){return oe.tuttiKey===V}:function(oe){return oe.dummyTuttiSeq===Q},Y=this.tuttiHistory.findIndex(k),te=Y!==-1&&this.tuttiHistory.splice(Y,1)[0];if(te&&te.resolve(G),O){var ie={tally:G};te&&(ie._local=te.payload);var re=Qt(O,3);C=re[0],E=re[1],S=[re[2],ie]}}var se=new Cs(0,0,C,E,S);v[2]=se.asState()[2]}},{key:"receive",value:(u=an(regeneratorRuntime.mark(function v(C,E){var S,M,_,T,D,R,B,P,F,z,Q,V,G,O,W,k,Y,te,ie,re,se,oe,le,xe,_e,pe,K,be,me,fe,de,Fe,ye,Se,Pe,Ee,We,J=this;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:S=this.lastReceived,this.lastReceived=this.connection.lastReceived,H.t0=C,H.next=H.t0==="SYNC"?5:H.t0==="RECV"?86:H.t0==="TICK"?108:H.t0==="INFO"?116:H.t0==="REQU"?119:122;break;case 5:if(this.syncReceived=!0,this.clearSyncReceiptTimeout(),Wm.add(this),_=E.messages,T=E.url,D=E.persisted,R=E.time,B=E.seq,P=E.snapshotSeq,F=E.tove,z=E.reflector,!F||F===this.tove){H.next=19;break}if(H.prev=10,this.decrypt(F)===this.id){H.next=13;break}throw Error("wrong sessionId in tove?!");case 13:H.next=19;break;case 15:return H.prev=15,H.t1=H.catch(10),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt session secret: ".concat(H.t1.message)),4200),H.abrupt("return");case 19:if(Q=E.timeline||E.reflectorSession,V=D?"persisted session":"snapshot",Je.session&&console.log(this.id,"received SYNC from ".concat(z," reflector: time ").concat(R,", ").concat(_.length," messages, ").concat(V," ").concat(T||"<none>")),G=!!this.vm)if(this.networkQueue.length=0,O=!!Q&&Q===this.timeline,W=_[0],k=B,Y=P!==void 0?P:W?W[1]:k,Je.messages&&console.log(this.id,"rejoin: we have #".concat(this.vm.seq," SYNC has #").concat(Y,"-#").concat(k)),O&&Nm(Y,this.vm.seq)&&Nm(this.vm.seq,k)&&R>=this.reflectorTime){if(W&&Nm(W[1],this.vm.seq)&&(te=this.vm.seq-W[1]+1>>>0,Je.messages&&console.log(this.id,"rejoin: discarding ".concat(te," messages #").concat(W[1],"-#").concat(this.vm.seq)),_.splice(0,te)),this.sendBuffer.length>0){ie=this.sendBuffer,this.sendBuffer=[],Je.session&&console.log(this.id,"rejoin: sending ".concat(ie.length," messages buffered while disconnected")),re=Xt(ie);try{for(re.s();!(se=re.n()).done;)(0,se.value)()}catch(ue){re.e(ue)}finally{re.f()}}}else Je.session&&console.log(this.id,"cannot rejoin seamlessly, rebooting model/view"),this.leave(!0),G=!1;oe=this.networkQueue,this.networkQueue=[],le=Xt(_),H.prev=27,le.s();case 29:if((xe=le.n()).done){H.next=47;break}if(typeof(_e=xe.value)[2]=="string"){H.next=35;break}this.convertReflectorMessage(_e),H.next=43;break;case 35:H.prev=35,_e[2]=this.decryptPayload(_e[2])[0],H.next=43;break;case 39:return H.prev=39,H.t2=H.catch(35),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt message: ".concat(H.t2.message)),4200),H.abrupt("return");case 43:Je.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(_e)),this.networkQueue.push(_e);case 45:H.next=29;break;case 47:H.next=52;break;case 49:H.prev=49,H.t3=H.catch(27),le.e(H.t3);case 52:return H.prev=52,le.f(),H.finish(52);case 55:if((M=this.networkQueue).push.apply(M,Kt(oe)),R>this.reflectorTime&&this.timeFromReflector(R),!G){H.next=61;break}return Je.session&&console.log(this.id,"seamless rejoin successful"),this.sessionSpec.sessionJoined(),H.abrupt("return");case 61:if(this.timeline=Q||"",Je.snapshot&&T&&console.log("".concat(this.id," fetching ").concat(V," ").concat(T)),!T){H.next=74;break}return H.prev=64,H.next=67,this.downloadEncrypted({url:T,gzip:!0,key:this.key,debug:Je.snapshot,json:!0,what:V});case 67:pe=H.sent,H.next=74;break;case 70:return H.prev=70,H.t4=H.catch(64),this.connection.closeConnectionWithError("SYNC",Error("failed to fetch ".concat(V,": ").concat(H.t4.message)),4200),H.abrupt("return");case 74:if(this.connected){H.next=77;break}return console.log(this.id,"disconnected during SYNC"),H.abrupt("return");case 77:return D?this.install(pe):(pe&&(this.sessionSpec.snapshot=pe),this.install()),Je.session&&console.log("".concat(this.id," fast-forwarding from ").concat(Math.round(this.vm.time))),H.next=81,new Promise(function(ue){J.fastForwardHandler=function(Re){J.connected&&J.vm?Re==="error"?ue(!1):Re&&J.viewId in J.vm.views&&ue(!0):(console.log(J.id,"disconnected during SYNC fast-forwarding"),ue(!1))},Promise.resolve().then(function(){return J.stepSession("fastForward",{budget:200})})});case 81:return K=H.sent,delete this.fastForwardHandler,K&&Je.session&&console.log("".concat(this.id," fast-forwarded to ").concat(Math.round(this.vm.time))),K&&this.sessionSpec.sessionJoined(),H.abrupt("return");case 86:if((be=E)[1]>>>=0,typeof be[2]=="string"){H.next=94;break}Je.messages&&console.log(this.id,"received META "+JSON.stringify(be)),this.convertReflectorMessage(be),Je.messages&&console.log(this.id,"converted to "+JSON.stringify(be)),H.next=105;break;case 94:H.prev=94,me=this.decryptPayload(be[2]),fe=Qt(me,3),de=fe[0],Fe=fe[1],ye=fe[2],be[2]=de,Fe===this.viewId&&this.addToStatistics(ye,this.lastReceived),Je.messages&&console.log(this.id,"received "+JSON.stringify(be)),H.next=105;break;case 101:return H.prev=101,H.t5=H.catch(94),this.connection.closeConnectionWithError("RECV",Error("failed to decrypt message: ".concat(H.t5.message)),4200),H.abrupt("return");case 105:return this.networkQueue.push(be),this.rebootSignal||(this.timeFromReflector(be[0]),this.simulateIfNeeded&&Promise.resolve().then(function(){return J.simulateIfNeeded()})),H.abrupt("return");case 108:if(this.vm){H.next=110;break}return H.abrupt("return");case 110:return Se=typeof E=="number"?E:E.time,Je.ticks&&(Pe=S&&this.lastReceived-S-this.msPerTick*this.tickMultiplier|0,console.log(this.id,"Controller received TICK ".concat(Se," ").concat(Math.abs(Pe)<5?"on time":Pe<0?"early":"late"," (").concat(Pe," ms)"))),this.timeFromReflector(Se),this.tickMultiplier>1&&this.multiplyTick(Se),this.simulateIfNeeded&&Promise.resolve().then(function(){return J.simulateIfNeeded()}),H.abrupt("return");case 116:return Ee=E.msg,We=E.options,At.showMessage(Ee,We),H.abrupt("return");case 119:return Je.snapshot&&console.log("received REQU (snapshot request) from reflector"),this.cpuTime=12345,H.abrupt("return");case 122:console.warn("Unknown action:",C,E);case 123:case"end":return H.stop()}},v,this,[[10,15],[27,49,52,55],[35,39],[64,70],[94,101]])})),function(v,C){return u.apply(this,arguments)})},{key:"install",value:function(v){var C=Date.now(),E=this.sessionSpec,S=E.snapshot,M=E.initFn,_=E.options,T=Qt(S.modelsById?["deserializ","snapshot"]:["initializ","root model"],2),D=T[0],R=T[1];Je.session&&console.log("".concat(this.id," ").concat(D,"ing ").concat(R));var B=new Pa(S,function(){try{return M(_,v)}catch(z){throw qr("initFn",z),z}});if((Je.session||Je.snapshot&&S.modelsById)&&console.log("".concat(this.id," ").concat(R," ").concat(D,"ed in ").concat(Date.now()-C,"ms")),Je.initsnapshot&&!S.modelsById){Je.snapshot&&console.log("".concat(this.id," exercising snapshot and restore after init()"));var P=JSON.stringify(B.snapshot());B=new Pa(JSON.parse(P),function(){return M(_)})}var F=this.lastKnownTime(B);this.reflectorTime=Math.max(this.reflectorTime,F),this.setVM(B)}},{key:"setVM",value:function(v){this.vm=v,this.vm.controller=this}},{key:"sendJoin",value:function(){var v=this;this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),Je.session&&console.log(this.id,"Controller sending JOIN");var C=this.getTickAndMultiplier(),E=C.tick,S=C.delay,M=this.sessionSpec,_=M.name,T=M.codeHash,D=M.appId,R=M.apiKey,B=M.persistentId,P=M.developerId,F=M.heraldUrl,z=M.rejoinLimit,Q=M.autoSleep,V=M.computedCodeHash,G={name:_,apiKey:R,appId:D,persistentId:B,url:At.referrerURL(),sdk:ka,developerId:P,version:1,user:this.viewId,ticks:{tick:E,delay:S},dormantDelay:Q,tove:this.tove,codeHash:T};F&&Object.assign(G,{heraldUrl:F}),z&&Object.assign(G,{leaveDelay:z+250}),V!==T&&Object.assign(G,{computedCodeHash:V}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:G})),this.syncReceiptTimeout=setTimeout(function(){delete v.syncReceiptTimeout,v.syncReceived||v.connection.closeConnectionWithError("join",Error("SYNC not received in time"))},5e3)}},{key:"clearSyncReceiptTimeout",value:function(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}},{key:"connectionInterrupted",value:function(){var v=this;this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout(function(){Je.session&&console.log(v.id,"rejoin timed out"),v.rejoinTimeout=0,v.leave()},this.sessionSpec.rejoinLimit)))}},{key:"leave",value:function(){var v=arguments.length>0&&arguments[0]!==void 0&&arguments[0],C=this.sessionSpec.rebootModelView;if(this.reset(),Je.session&&console.log(this.id,"resetting ".concat(v?"(but keeping)":"and discarding"," controller")),v||Wm.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");C()}},{key:"encrypt",value:(c=an(regeneratorRuntime.mark(function v(C){var E,S,M,_;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return E=gu.random(16),S=Sw.encrypt(C,this.key,{iv:E}),M=g_(C,this.key),_="".concat($s.stringify(E)).concat($s.stringify(M)).concat(S),T.abrupt("return",_);case 5:case"end":return T.stop()}},v,this)})),function(v){return c.apply(this,arguments)})},{key:"deprecatedDefaultKey",get:function(){return R_||(R_=e4("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),R_}},{key:"decrypt",value:function(v){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.key,E=$s.parse(v.slice(0,24)),S=$s.parse(v.slice(24,68)),M=v.slice(68),_=Sw.decrypt(M,C,{iv:E}),T="";try{T=woe.stringify(_)}catch{}var D=g_(T,this.key);if(this.compareHmacs(S.words,D.words))return T;if(C!==this.deprecatedDefaultKey)return this.decrypt(v,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"decryptBinary",value:function(v,C){var E,S,M,_,T,D=new TextDecoder().decode(new Uint8Array(v,0,4));switch(typeof C=="string"&&(C=$s.parse(C)),D){case"CRQ0":E=new TextDecoder().decode(v),S=$s.parse(E.slice(4,28)),M=$s.parse(E.slice(28,72)),_=E.slice(72),T=Sw.decrypt(_,C,{iv:S});break;case"CRQ1":E=new Uint8Array(v),S=gu.create(E.subarray(4,20)),M=gu.create(E.subarray(20,52)),_=gu.create(E.subarray(52)),T=Sw.decrypt({ciphertext:_},C,{iv:S});break;default:throw Error("".concat(this.id," unknown encryption version ").concat(D))}T.clamp();var R=g_(T,C);if(this.compareHmacs(M.words,R.words))return W4(T);if(C!==this.deprecatedDefaultKey)return this.decryptBinary(v,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"encryptMessage",value:(l=an(regeneratorRuntime.mark(function v(C,E,S){var M,_,T,D,R,B;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return M=C.asState(),_=Qt(M,3),T=_[0],D=_[1],R=_[2],P.next=3,this.encryptPayload([R,E,S]);case 3:return B=P.sent,P.abrupt("return",[T,D,B]);case 5:case"end":return P.stop()}},v,this)})),function(v,C,E){return l.apply(this,arguments)})},{key:"encryptPayload",value:(a=an(regeneratorRuntime.mark(function v(C){return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",this.encrypt(JSON.stringify(C)));case 1:case"end":return E.stop()}},v,this)})),function(v){return a.apply(this,arguments)})},{key:"decryptPayload",value:function(v){return JSON.parse(this.decrypt(v))}},{key:"compareHmacs",value:function(v,C){for(var E=v.length===C.length,S=0;S<v.length;S++)v[S]!==C[S]&&(E=!1);return E}},{key:"sendMessage",value:function(v){var C=this;if(!this.viewOnly){var E=v.asState()[2].length;if(E>16384)console.warn("".concat(this.id," Message with payload of ").concat(E," bytes exceeds maximum ").concat(16384," and will not be sent to reflector."));else{!this.payloadSizeWarned&&E>4096&&(console.log("".concat(this.id," Message with payload of ").concat(E," bytes being sent to reflector. Maximum recommended is ").concat(4096,".")),this.payloadSizeWarned=!0);var S=Date.now(),M=this.rateLimitedSendTimes,_=this.rateLimitBuffer;if(hn.perSecondTally({requestedMessages:1}),_.length)this.addToRateLimitBuffer(v);else{var T=0;if(M.length&&this.synced){var D=M[M.length-1],R=1e3/this.eventRateLimit-(S-D);R>1&&(T=Math.ceil(R))}T?(this.addToRateLimitBuffer(v),setTimeout(function(){return C.serviceRateLimitBuffer()},T)):(this.recordRateLimitedSend(S),this.socketSendMessage(v),hn.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:E}))}}}}},{key:"recordRateLimitedSend",value:function(v){var C=this.rateLimitedSendTimes;!this.synced&&C.length&&C[C.length-1]===v||(C.push(v),C.length>this.eventHistoryLimit&&C.shift()),!this.rateLimitSoftWarned&&C.length===this.eventHistoryLimit&&v-C[0]<1010&&(console.warn("".concat(this.id," Sends to reflector are at or above recommended limit of ").concat(this.eventHistoryLimit," within one second. Events will be bundled as necessary to keep to the limit.")),this.rateLimitSoftWarned=!0)}},{key:"addToRateLimitBuffer",value:function(v){hn.perSecondTally({bundledMessages:1});var C=Date.now(),E=v.asState(),S=E[2].length,M=this.rateLimitBuffer;if(M.length){var _=M[M.length-1],T=_.msgStates;if(_.totalPayload<4096)return T.push({msgState:E,bufferTime:C}),void(_.totalPayload+=S)}hn.perSecondTally({newBundles:1}),M.push({msgStates:[{msgState:E,bufferTime:C}],totalPayload:S});var D=M.length;Je.session&&D%5==0&&D!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer grew to ").concat(D," event bundles (max ").concat(this.eventMaxBundles,")")),this.rateLimitLastLogged=D),D>this.eventMaxBundles?(console.error("".concat(this.id," Disconnecting after overflow of SEND rate-limit buffer.")),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&D>this.eventMaxBundles/2&&(console.warn("".concat(this.id," SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.")),this.rateLimitBufferWarned=!0)}},{key:"serviceRateLimitBuffer",value:function(){var v=this;if(this.connected){var C=this.rateLimitBuffer;if(C.length){var E=Date.now(),S=1e3/this.eventRateLimit,M=this.rateLimitedSendTimes;if(M.length){var _=M[M.length-1];if(S-(E-_)>0)return}var T=C.shift(),D=T.msgStates,R=T.totalPayload,B=[],P=0;D.forEach(function(Q){B.push(Q.msgState),P+=E-Q.bufferTime});var F=new Cs(this.vm.time,0,this.vm.id,"handleBundledEvents",["dummy",{events:B}]);if(this.socketSendMessage(F),this.recordRateLimitedSend(E),hn.perSecondTally({sentBundles:1,sentMessagesTotal:D.length,sendDelay:P,sentBundlePayload:R,sentPayloadTotal:R}),Je.session&&this.connected){var z=C.length;z&&z%5==0&&z!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer dropped to ").concat(z," event bundles")),this.rateLimitLastLogged=z)}C.length&&setTimeout(function(){return v.serviceRateLimitBuffer()},S)}}}},{key:"socketSendMessage",value:(o=an(regeneratorRuntime.mark(function v(C){var E,S,M,_,T=this,D=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return E=D.length>1&&D[1]!==void 0?D[1]:null,R.next=3,this.encryptMessage(C,this.viewId,Date.now());case 3:if(S=R.sent,M=E?"tagged SEND ".concat(C.asState()," with tags ").concat(JSON.stringify(E)):"SEND ".concat(C.asState()),this.connected){R.next=8;break}return this.vm&&(Je.sends&&console.log(this.id,"buffering ".concat(M)),this.sendBuffer.push(function(){return T.socketSendMessage(C,E)})),R.abrupt("return");case 8:Je.sends&&console.log(this.id,"sending ".concat(M)),_={id:this.id,action:"SEND",args:[].concat(Kt(S),[this.latency])},E&&(_.tags=E),this.lastSent=Date.now(),this.connection.send(JSON.stringify(_));case 13:case"end":return R.stop()}},v,this)})),function(v){return o.apply(this,arguments)})},{key:"sendTagged",value:(i=an(regeneratorRuntime.mark(function v(C,E){return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!this.viewOnly){S.next=2;break}return S.abrupt("return");case 2:this.socketSendMessage(C,E);case 3:case"end":return S.stop()}},v,this)})),function(v,C){return i.apply(this,arguments)})},{key:"sendTutti",value:(t=an(regeneratorRuntime.mark(function v(C,E,S){var M,_,T,D,R,B,P,F=this,z=arguments;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(M=z.length>3&&z[3]!==void 0?z[3]:null,_=!(z.length>4&&z[4]!==void 0)||z[4],T=z.length>5&&z[5]!==void 0?z[5]:null,!this.viewOnly){Q.next=5;break}return Q.abrupt("return",null);case 5:if(Q.t0=M,!Q.t0){Q.next=10;break}return Q.next=9,this.encryptMessage(M,this.viewId,Date.now());case 9:Q.t0=Q.sent;case 10:if(D=Q.t0,R=xu(S),this.connected){Q.next=15;break}return this.vm&&(Je.sends&&console.log(this.id,"buffering TUTTI ".concat(R," ").concat(M&&M.asState()," ").concat(T)),this.sendBuffer.push(function(){return F.sendTutti(C,E,S,M,_,T)})),Q.abrupt("return",!1);case 15:return Je.sends&&console.log(this.id,"sending TUTTI ".concat(R," ").concat(M&&M.asState()," ").concat(T)),this.lastSent=Date.now(),B=1e6+Math.floor(C/100),P="".concat(E,"@").concat(C),this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[C,B,R,D,_,T,P]})),Q.abrupt("return",new Promise(function(V){F.tuttiHistory.length>100&&F.tuttiHistory.shift(),F.tuttiHistory.push({time:C,tuttiKey:P,dummyTuttiSeq:B,payload:R,resolve:V})}));case 21:case"end":return Q.stop()}},v,this)})),function(v,C,E){return t.apply(this,arguments)})},{key:"sendLog",value:function(){for(var v=this,C=arguments.length,E=new Array(C),S=0;S<C;S++)E[S]=arguments[S];this.connected?(Je.sends&&console.log(this.id,"sending LOG"),E.length<2&&(E=E[0]),this.connection.send(JSON.stringify({action:"LOG",args:E}))):this.vm&&(Je.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push(function(){return v.sendLog.apply(v,Kt(E))}))}},{key:"addToStatistics",value:function(v,C){this.latency=C-v,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:C,ms:this.latency}))}},{key:"latencies",get:function(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}},{key:"getTickAndMultiplier",value:function(){var v=this.sessionSpec.options,C=Qt(((["number","string"].includes($t(v.tps))?v.tps:["number","string"].includes($t(this.sessionSpec.tps))?this.sessionSpec.tps:20)+"x").split("x").map(function(R){return Number.parseFloat("0"+R)}),2),E=C[0],S=C[1],M=1e3/Math.max(1/30,Math.min(60,E)),_=Math.max(1,S),T=M,D=0;return _>1&&!Sae&&(T=M/_,D=Math.ceil(T*(_-1))),{msPerTick:T,multiplier:_,tick:M,delay:D}}},{key:"simulate",value:function(v){var C=this;if(!this.vm)return!0;try{var E=!0;if(this.networkQueue.length+this.vm.messages.size===0)E=this.vm.advanceTo(this.reflectorTime,v);else{for(var S=hn.begin("simulate");E;){var M=this.networkQueue[0];if(!M||!(E=this.vm.advanceTo(M[0],v)))break;this.networkQueue.shift();var _=this.vm.scheduleExternalMessage(M);E=this.vm.advanceTo(_.time,v),this.cpuTime+=5}E&&(E=this.vm.advanceTo(this.reflectorTime,v)),this.cpuTime+=Math.max(.01,hn.end("simulate")-S)}hn.backlog(this.backlog);var T=this.lag,D=Math.max(200,.1*this.msPerTick),R=Math.max(2e3,.2*this.msPerTick);return typeof this.synced=="boolean"&&this.viewed&&(this.synced&&T>R||!this.synced&&T<D)&&(this.synced?this.applySyncChange(!1):this.syncTimer||(this.syncTimer=setTimeout(function(){delete C.syncTimer,C.lag<D&&C.applySyncChange(!0)},200))),this.synced&&E&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout(function(){return C.scheduleSnapshot()},Math.floor(2e3*Math.random())):this.scheduleSnapshot()),E}catch(B){return qr("simulate",B),this.connection.closeConnectionWithError("simulate",B),"error"}}},{key:"stepSession",value:function(v){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(window.logMessageStats){var E=hn.stepSession(C.frameTime,!0);E&&console.log(E)}var S=this.backlog,M=this.latency,_=this.starvation,T=this.activity;if(v==="animation"){hn.animationFrame(C.frameTime,{backlog:S,starvation:_,latency:M,activity:T,users:this.users});var D=Date.now();if(this.lastAnimationEnd){var R=D-this.lastAnimationEnd;if(this.animationGapCheck===!0&&R>200&&(this.animationGapCheck=[],Je.session&&console.log("".concat(this.id," animation has stopped (too long between steps)"))),this.animationGapCheck!==!0){var B=this.animationGapCheck;B.push(R),B.length>4&&B.shift(),B.length===4&&B.reduce(function(G,O){return G+O},0)<=400&&(this.animationGapCheck=!0,Je.session&&console.log("".concat(this.id," animation has started")))}}this.lastAnimationEnd=D}if(this.connected){if(this.vm){var P;switch(v){case"animation":var F=C.expectedSimFPS,z=Date.now(),Q=vm.reduce(function(G,O){return G+O},0)/vm.length;if((P=this.simulate(z+Math.min(Q,200)))===!1){var V=F===0?0:1e3/F*4;this.backlog>V&&(P=this.simulate(z+200-Q))}P!=="error"&&(vm.push(Date.now()-z),vm.length>4&&vm.shift());break;case"fastForward":case"background":P=this.simulate(Date.now()+C.budget);break;default:console.warn(v)}this.fastForwardHandler&&this.fastForwardHandler(P),P!=="error"&&(hn.begin("update"),this.processModelViewEvents(v==="animation"),hn.end("update"),this.serviceRateLimitBuffer(),v==="animation"&&(C.view&&(hn.begin("render"),this.inViewRealm(function(){return C.view.update(C.frameTime)}),hn.end("render")),this.lastAnimationEnd=Date.now()))}}else this.isInBackground()||this.checkForConnection(!0)}},{key:"applySyncChange",value:function(v){Je.session&&console.log(this.id,"synced=".concat(v)),this.synced=v,At.showSyncWait(!v),this.vm.publishFromView(this.viewId,"synced",v)}},{key:"inViewRealm",value:function(v){var C=this;return Um(this.vm,function(){return v(C.vm)})}},{key:"processModelViewEvents",value:function(v){return this.vm?this.vm.processModelViewEvents(v):0}},{key:"timeFromReflector",value:function(v){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"reflector";v<this.reflectorTime?(C!=="controller"||Je.ticks)&&console.warn("time is ".concat(this.reflectorTime,", ignoring time ").concat(v," from ").concat(C)):(typeof this.synced!="boolean"&&(this.synced=!1),this.reflectorTime=v,this.extrapolatedTimeBase=Date.now()-v,this.vm&&hn.backlog(this.backlog),this.tickHook&&this.tickHook())}},{key:"multiplyTick",value:function(v){var C=this;this.localTicker&&window.clearInterval(this.localTicker);var E=this.msPerTick,S=this.tickMultiplier,M=1;this.localTicker=window.setInterval(function(){C.timeFromReflector(Math.round(v+M*E),"controller"),Je.ticks&&console.log(C.id,"Controller generate TICK "+C.reflectorTime,M),++M>=S&&(window.clearInterval(C.localTicker),C.localTicker=0)},E)}},{key:"startStepping",value:function(v){var C=this;window.requestAnimationFrame(function E(S){C.leaving||(C.isOutOfSight()||v(S),window.requestAnimationFrame(E))})}},{key:"setUpActivityChecks",value:function(){var v=this,C=null;this.isOutOfSight=function(){return document.visibilityState==="hidden"||!C},this.isBeingAnimated=function(){var B=v.animationGapCheck===!0,P=Date.now()-v.lastAnimationEnd<200;return B&&!P&&(v.animationGapCheck=[],Je.session&&console.log("".concat(v.id," animation has stopped (too long since last step)"))),B&&P},this.isInBackground=function(){return v.isOutOfSight()||!v.isBeingAnimated()},new IntersectionObserver(function(B,P){return C=B[0].isIntersecting}).observe(document.body);var E,S=this.sessionSpec.autoSleep;if(S){var M=1e3*S,_=0,T=0;E=function(){var B=Date.now();B-_<980||(_=B,v.isOutOfSight()?T?B-T>M&&(v.dormantDisconnect(),T=0):T=B:T=0)}}var D=function(){v.leaving?R&&(clearInterval(R),R=null):v.connected&&v.vm&&(E&&E(),v.isBeingAnimated()||v.connection.keepAlive(Date.now()))},R=setInterval(D,1e3);this.simulateIfNeeded=function(){if(!v.isBeingAnimated()&&(D(),v.connected)){var B=.9*v.msPerTick;S&&(B=Math.min(B,200));var P=v.synced?"background":"fastForward";v.stepSession(P,{budget:B})}}}},{key:"toString",value:function(){return"Controller[".concat(this.id,"]")}},{key:n,value:function(){return this.toString()}}]),e}(Symbol.toPrimitive),Tae=function(){function n(e){ti(this,n),this.controller=e,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}return ui(n,[{key:"id",get:function(){return this.controller.id}},{key:"setTick",value:function(e){this.missingTickThreshold=Math.min(3*e,45e3)}},{key:"connected",get:function(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}},{key:"checkForConnection",value:function(e){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!e||this.connectToReflector()}},{key:"connectToReflector",value:function(){var e=this;if(!this.socket&&!this.connectHasBeenCalled){this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;var t=Je.reflector?"wss://croquet.io/reflector-dev/dev":Cae,i={},o=this.controller.sessionSpec.token;if(o&&(i.token=o),gt.reflector){var a=gt.reflector.toUpperCase();a==="CF"||a.match(/^[A-Z]{3}$/)?(t=Je.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",a.length===3&&(i.colo=a)):gt.reflector.match(/^[-a-z0-9]+$/i)?i.region=gt.reflector:t=gt.reflector}if(!t.match(/^wss?:/))throw Error("Cannot interpret reflector address "+t);t.endsWith("/")||(t+="/");for(var l=new URL(t+this.id),c=0,u=Object.entries(i);c<u.length;c++){var h=Qt(u[c],2),A=h[0],f=h[1];l.searchParams.append(A,f)}var d=new WebSocket(l);d.onopen=function(p){e.socket=d,e.connectHasBeenCalled=!1,Je.session&&console.log(e.id,e.socket.constructor.name,"connected to",e.socket.url),e.reconnectDelay=0,hn.connected(!0),e.controller.sendJoin()},d.onmessage=function(p){d===e.socket&&e.receive(p.data)},d.onerror=function(p){Je.session&&console.log(e.id,d.constructor.name,"connection error"),e.connectHasBeenCalled=!1,e.controller.clearSyncReceiptTimeout()},d.onclose=function(p){e.socketClosed(p.code,p.reason)}}}},{key:"socketClosed",value:function(e,t){var i=this;this.controller.clearSyncReceiptTimeout();var o=e!==1e3&&e<4100,a=e===4110;a||e===1e3||this.reconnectDelay||setTimeout(function(){i.connected||At.showMessage("Connection closed: ".concat(e," ").concat(t),{level:o?"error":"fatal"})},500),Je.session&&console.log(this.id,"".concat(this.socket?this.socket.constructor.name+" closed":"closed before opening,"," with code: ").concat(e," ").concat(t)),hn.connected(!1),a?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),o&&(Je.session&&console.log(this.id,"reconnecting in ".concat(this.reconnectDelay," ms")),this.reconnectTimeout=window.setTimeout(function(){delete i.reconnectTimeout,i.connectToReflector()},this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}},{key:"disconnected",value:function(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}},{key:"send",value:function(e){this.socketLastSent=Date.now(),this.socket.send(e)}},{key:"receive",value:function(e){this.lastReceived=Date.now();var t=JSON.parse(e),i=t.id,o=t.action,a=t.args;if(i)try{this.controller.receive(o,a)}catch(l){this.closeConnectionWithError("receive",l)}else switch(o){case"PONG":if(Je.pong&&console.log("PONG after",Date.now()-a,"ms"),this.pongHook)try{this.pongHook(a)}catch(l){console.error(l)}break;default:console.warn("Unknown action",o)}}},{key:"dormantDisconnect",value:function(){this.connected&&(Je.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}},{key:"closeConnectionWithError",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4e3;console.error(t),console.warn("closing socket"),i>=4100&&i!==4110&&(this.controller.leaving=function(){}),this.closeConnection(i,"Error in "+e)}},{key:"closeConnection",value:function(e,t){this.socket&&(this.socket.onclose=null,this.socket.close(e,t),this.socketClosed(e,t))}},{key:"PULSE",value:function(e){this.connected&&(this.socket.bufferedAmount===0?(Je.session&&console.log("".concat(this.id," sending PULSE")),this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&e-this.stalledSince>500?console.log("".concat(this.id," Reflector connection stalled: ").concat(this.socket.bufferedAmount," bytes unsent for ").concat(e-this.stalledSince," ms")):this.stalledSince=Date.now())}},{key:"keepAlive",value:function(e){this.lastReceived!==0&&(e-this.socketLastSent>25e3||e-this.lastReceived>this.missingTickThreshold)&&this.PULSE(e)}},{key:"PING",value:function(){this.connected&&this.send(JSON.stringify({action:"PING",args:Date.now()}))}}]),n}();window.setInterval(function(){var n,e=Xt(Wm);try{for(e.s();!(n=e.n()).done;){var t=n.value;t.connected&&t.vm&&t.connection.keepAlive(Date.now())}}catch(i){e.e(i)}finally{e.f()}},100);var L_=Symbol("hash"),B_=Symbol("key"),k_=Symbol("url"),_4=new Map;function _w(n){return gt.has("debug",n,!1)}function _ae(n){return n.replace(/.*\//,"")}function P_(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dw(n){return n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+3&-4,"=")}function N_(n,e){return e.replace(/[\s\S]/g,function(t){return String.fromCharCode(t.charCodeAt(0)^n.charCodeAt(0))})}var Pm=function(){function n(i,o,a){ti(this,n);var l=_4.get(i);if(l)return _w("data")&&console.log("Croquet.Data: using cached handle for ".concat(i)),l;if(a.slice(-43)!==i)throw Error("Croquet Data: malformed URL");Object.defineProperty(this,L_,{value:i}),Object.defineProperty(this,B_,{value:o}),Object.defineProperty(this,k_,{value:a}),_4.set(i,this),_w("data")&&console.log("Croquet.Data: created new handle for ".concat(i))}var e,t;return ui(n,null,[{key:"store",value:(t=an(regeneratorRuntime.mark(function i(o,a){var l,c,u,h,A,f,d,p,m,b=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(l=b.length>2&&b[2]!==void 0&&b[2],$t(o)==="object"&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),a=o),!Pa.hasCurrent()){g.next=4;break}throw Error("Croquet.Data.store() called from Model code");case 4:return c=T4(o),u=c.appId,h=c.persistentId,A=c.uploadEncrypted,f=gu.random(32).toString($s),d="apps/".concat(u,"/").concat(h,"/data/%HASH%"),g.next=9,A({path:d,content:a,key:f,keep:l,debug:_w("data"),what:"shared data"});case 9:return p=g.sent,m=_ae(p),g.abrupt("return",new n(m,f,p));case 12:case"end":return g.stop()}},i)})),function(i,o){return t.apply(this,arguments)})},{key:"fetch",value:(e=an(regeneratorRuntime.mark(function i(o,a){var l,c,u,h,A;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if($t(o)==="object"&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),a=o),!Pa.hasCurrent()){f.next=3;break}throw Error("Croquet.Data.fetch() called from Model code");case 3:if(l=T4(o),c=l.downloadEncrypted,u=a&&a[L_],h=a&&a[B_],A=a&&a[k_],typeof u=="string"&&typeof h=="string"&&typeof A=="string"){f.next=9;break}throw Error("Croquet.Data.fetch() called with invalid handle");case 9:return f.abrupt("return",c({url:A,key:h,debug:_w("data"),what:"shared data"}));case 10:case"end":return f.stop()}},i)})),function(i,o){return e.apply(this,arguments)})},{key:"hash",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"base64url";typeof i=="function"&&(i=Function.prototype.toString.call(i)),typeof i=="string"?i=new TextEncoder().encode(i):i&&i.constructor===DataView?i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i&&i.constructor===ArrayBuffer?i=new Uint8Array(i):ArrayBuffer.isView(i)||(i=new TextEncoder().encode(xu(i)));var a=V4(gu.create(i));switch(o){case"hex":return a.toString();case"base64":return a.toString($s);case"base64url":return P_(a.toString($s));default:throw Error('Croquet.Data: unknown hash output "'.concat(o,'", expected "hex"/"base64"/"base64url"'))}}},{key:"fromId",value:function(i){var o,a,l,c,u=i.slice(0,1);switch(u){case"0":o=i.slice(1,44),a=i.slice(44),l="".concat("https://files.croquet.io","/sessiondata/").concat(o);break;case"1":o=i.slice(1,44),a=i.slice(44,87)+"=",c=i.slice(87),l="".concat("https://files.croquet.io","/apps/").concat(c,"/data/").concat(o);break;case"2":o=i.slice(1,44),c=N_(a=Dw(i.slice(44,87)),atob(Dw(i.slice(87)))),l="".concat("https://files.croquet.io","/apps/").concat(c,"/data/").concat(o);break;case"3":o=(l=N_(a=Dw(i.slice(1,44)),atob(Dw(i.slice(44))))).slice(-43);break;default:throw Error("Croquet.Data expected handle v0-v".concat("3"," got v").concat(u))}return new this(o,a,l)}},{key:"toId",value:function(i){if(!i)return"";var o=i[L_],a=i[B_],l=i[k_];if(l.slice(-43)!==o)throw Error("Croquet Data: malformed URL");var c=P_(a),u=P_(btoa(N_(a,l)));return"".concat("3").concat(c).concat(u)}}]),n}(),oD={cls:Pm,write:function(n){return Pm.toId(n)},read:function(n){return Pm.fromId(n)}},zt=null,pu=null,NG=function(n){Ww(t,U4(Error));var e=Yw(t);function t(){return ti(this,t),e.apply(this,arguments)}return t}();Object.defineProperty(NG.prototype,"name",{value:"CroquetWarning"});var D4={};function K_(n,e){var t=JSON.parse(atob(n.slice(1,-1))),i=t.qPara,o=t.qArgs,a=t.qFn,l=JSON.stringify(i),c=D4[l]||(D4[l]=br(Function,Kt(i)));return typeof a=="number"&&(o[a]=c),c.call.apply(c,[e].concat(Kt(o))).bind(e)}function FG(n,e){if(zt)throw Error("VirtualMachine confusion");if(!(n instanceof Pa))throw Error("not a VM: "+n);var t=zt;try{zt=n,window.CROQUETVM=n,e()}finally{zt=t}}var j_=new WeakMap;function R4(n){j_.set(n,null)}var Pa=function(n){function e(t,i){var o=this;ti(this,e),function(){if(!window.CroquetViewMath){window.CroquetMath.random=function(){return zt.random()},window.CroquetViewMath=Yn({},Math);for(var a=function(){var A=Qt(c[l],2),f=A[0],d=A[1],p=Math[f];Math[f]=d.length===1?function(m){return zt?d(m):p(m)}:function(m,b){return zt?d(m,b):p(m,b)}},l=0,c=Object.entries(window.CroquetMath);l<c.length;l++)a()}if(!window.CroquetViewDate){let A=function(d,p){return h||(h=!0,console.warn(new NG("".concat(d," used in Model code")))),p},f=function(d,p,m,b,g,w,I){var v=this instanceof f,C=[d,p,m,b,g,w,I];if(C.length=arguments.length,zt)switch(A(v?"new Date()":"Date()"),arguments.length){case 0:C.push(zt.time);break;case 1:break;default:C[0]=u.UTC.apply(u,C),C.length=1}var E=br(u,C);return v?E:""+E};var u=window.Date,h=!1;f.prototype=u.prototype,f.UTC=u.UTC,f.now=function(){return zt?A("Date.now()",zt.time):u.now()},f.parse=function(){return zt?A("Date.parse()",0):u.parse.apply(u,arguments)},window.CroquetViewDate=u,window.Date=f}}(),pu={snapshot:gt.has("debug","snapshot",!1),session:gt.has("debug","session",!1)},R4(this),FG(this,function(){rG(o,function(){if(o.modelsById={},o.modelsByName={},o.messages=new goe(function(p,m){return p.before(m)}),o.subscriptions={},o.views={},o._random=function(){throw Error("You must not use random when applying state!")},o.id=t.id,o.time=0,o.seq=4294967280,o.externalTime=0,o.externalSeq=o.seq,o.futureSeq=0,o.lastSnapshotPoll=0,o.lastPersistencePoll=0,o.inPersistenceCoolOff=!1,o.persisted="",o.modelsId=0,o.controller=null,t.modelsById){for(var a=lD.newOrRecycled(o).readVM(t,"$"),l=[],c=0,u=Object.keys(a);c<u.length;c++){var h=u[c];h in o||h==="meta"?h==="messages"?l=a.messages:o[h]=a[h]:console.warn("Ignoring property snapshot.".concat(h))}var A,f=Xt(l);try{for(f.s();!(A=f.n()).done;){var d=A.value;o.messages.add(d.convertIfNeeded(o))}}catch(p){f.e(p)}finally{f.f()}}else o._random=new Ow(t.id,{state:!0}),i(o),o.addSubscription(o,o.id,"__views__",o.generateJoinExit)})})}return ui(e,[{key:"registerModel",value:function(t,i){if(zt!==this)throw Error("You can only create models from model code!");return i||(i=this.id+"/M"+ ++this.modelsId),this.modelsById[i]=t,i}},{key:"deregisterModel",value:function(t){if(zt!==this)throw Error("You can only destroy models from model code!");var i=this.modelsById;delete this.modelsById[t];for(var o=0,a=Object.entries(this.modelsByName);o<a.length;o++){var l=Qt(a[o],2),c=l[0];i===l[1]&&delete this.modelsByName[c]}this.messages.removeMany(function(u){return u.hasReceiver(t)})}},{key:"lookUpModel",value:function(t){if(t===this.id)return this;var i=this.modelsById[t];if(i)return i;var o=Qt(t.match(/^([^#]+)#(.*)$/),3);o[0];var a=o[1],l=o[2];return this.modelsById[a].lookUp(l)}},{key:"get",value:function(t){return this.modelsByName[t]}},{key:"set",value:function(t,i){if(zt!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[t]=i}},{key:"callModelMethod",value:function(t,i,o){if(zt)throw Error("You cannot make a reflector send from model code!");var a=this.lookUpModel(t);if(a){var l=new Cs(this.time,0,a.id,i,o);this.controller.sendMessage(l)}else console.error(Error("Model not found: ".concat(t)))}},{key:"noop",value:function(){}},{key:"generateJoinExit",value:function(t){var i=t.entered,o=t.exited,a=t.count;if(i.length===a){var l,c=Xt(o=Object.keys(this.views));try{for(c.s();!(l=c.n()).done;){var u=l.value;this.views[u].extraConnections=0}}catch(w){c.e(w)}finally{c.f()}}if(i.length!==0&&o.length!==0){var h=i.filter(function(w){return o.includes(w)});if(h.length!==0&&(i=i.filter(function(w){return!h.includes(w)}),o=o.filter(function(w){return!h.includes(w)}),i.length===0&&o.length===0))return}var A,f=Xt(o);try{for(f.s();!(A=f.n()).done;){var d=A.value;if(this.views[d]){if(this.views[d].extraConnections){this.views[d].extraConnections--,pu.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(d," closed extra connection"));continue}delete this.views[d],this.publishFromModelOnly(this.id,"view-exit",d)}else console.error("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(d," exited without being present - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," ").concat(d," left without being present"))}}catch(w){f.e(w)}finally{f.f()}var p,m=Xt(i);try{for(m.s();!(p=m.n()).done;){var b=p.value;this.views[b]?(pu.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(b," opened another connection")),this.views[b].extraConnections=(this.views[b].extraConnections||0)+1):(this.views[b]={},this.publishFromModelOnly(this.id,"view-join",b))}}catch(w){m.e(w)}finally{m.f()}var g=Object.values(this.views).reduce(function(w,I){return w+1+(I.extraConnections||0)},0);a!==g&&(console.error("@".concat(this.time,"#").concat(this.seq," view count mismatch (model: ").concat(g,", reflector: ").concat(a,") - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," connections model: ").concat(g," reflector: ").concat(a)))}},{key:"scheduleExternalMessage",value:function(t){var i=Cs.fromState(t,this);if(i.time<this.time)throw Error("past message from reflector "+t);var o=this.externalSeq+1>>>0;if(i.seq!==o)throw Error("External message error. Expected message #".concat(o," got #").concat(i.seq));return this.externalTime=i.time,this.externalSeq=i.seq,i.seq=2*i.seq+1,this.messages.add(i),i}},{key:"futureSend",value:function(t,i,o,a){if(t.every)return this.futureRepeat(t.every,i,o,a);if(t<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;var l=new Cs(this.time+t,2*this.futureSeq,i,o,a);return this.messages.add(l),l}},{key:"futureRepeat",value:function(t,i,o,a){this.futureSend(t,this.id,"futureExecAndRepeat",[t,i,o,a])}},{key:"futureExecAndRepeat",value:function(t,i,o,a){var l=this.lookUpModel(i);if(typeof l[o]=="function")try{l[o].apply(l,Kt(a))}catch(u){qr("future message ".concat(l,".").concat(o),u)}else{var c=K_(o,l);try{c.apply(void 0,Kt(a))}catch(u){qr("future message ".concat(l," ").concat(c),u)}}this.futureRepeat(t,i,o,a)}},{key:"future",value:function(t,i,o,a){var l=this.asQFunc(t,o);if(typeof l=="string")return this.futureSend(i,t.id,l,a);var c=this;return new Proxy(t,{get:function(u,h){if(typeof t[h]=="function")return function(){if(c.lookUpModel(t.id)!==t)throw Error("future send to unregistered model");for(var A=arguments.length,f=new Array(A),d=0;d<A;d++)f[d]=arguments[d];return c.futureSend(i,t.id,h,f)};throw Error("Tried to call "+h+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"advanceTo",value:function(t,i){if(zt)throw Error("cannot advance time from model code");for(var o,a=0;(o=this.messages.peek())&&o.time<=t;){var l=o,c=l.time,u=l.seq;if(c<this.time)throw Error("past message encountered: "+o);if(1&u&&(this.seq=this.seq+1>>>0,u/2>>>0!==this.seq))throw Error("Sequence error: expected ".concat(this.seq," got ").concat(u/2>>>0," in ").concat(o));if(this.messages.poll(),this.time=o.time,o.executeOn(this),++a>100&&(a=0,Date.now()>i))return!1}return this.time=t,!0}},{key:"asQFunc",value:function(t,i){if(typeof i=="string")return i;if(typeof i=="function"){if(t[i.name]===i)return i.name;for(var o=t;o!==null;){for(var a=0,l=Object.entries(Object.getOwnPropertyDescriptors(o));a<l.length;a++){var c=Qt(l[a],2),u=c[0];if(c[1].value===i)return u}o=Object.getPrototypeOf(o)}var h=i.toString().match(/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i);return!h||h[3]&&h[3]!==h[1]?function(A,f){typeof A=="function"&&(f=A,A={});var d=Object.keys(A).concat(["return "+f]),p=Object.values(A),m={qPara:d,qArgs:p},b=p.indexOf(f);return b>=0&&(p[b]=d[b],m.qFn=b),"{".concat(btoa(JSON.stringify(m)),"}")}(i):h[2]}return null}},{key:"addSubscription",value:function(t,i,o,a){if(zt!==this)throw Error("Cannot add a model subscription from outside model code");var l=this.asQFunc(t,a);if(typeof l!="string")throw Error('Subscription handler for "'.concat(o,'" must be a method name'));if(l.indexOf(".")<0&&typeof t[l]!="function"&&l[0]!=="{")throw Error('Subscriber method for "'.concat(o,'" not found: ').concat(t,".").concat(l,"()"));var c=i+":"+o,u=t.id+"."+l;if(this.subscriptions[c]){if(this.subscriptions[c].indexOf(u)!==-1)throw Error("".concat(t,".").concat(l," already subscribed to ").concat(o))}else this.subscriptions[c]=[];this.subscriptions[c].push(u)}},{key:"removeSubscription",value:function(t,i,o,a){if(zt!==this)throw Error("Cannot remove a model subscription from outside model code");var l=i+":"+o,c=t.id+"."+a,u=this.subscriptions[l];if(u){var h=u.indexOf(c);u.splice(h,1),u.length===0&&delete this.subscriptions[l]}}},{key:"removeAllSubscriptionsFor",value:function(t){for(var i="".concat(t.id,":"),o="".concat(t.id,"."),a=0,l=Object.entries(this.subscriptions);a<l.length;a++){var c=Qt(l[a],2),u=c[0],h=c[1];if(u.startsWith(i))delete this.subscriptions[u];else{for(var A=h.length-1;A>=0;A--)h[A].startsWith(o)&&h.splice(A,1);h.size===0&&delete this.subscriptions[u]}}}},{key:"publishFromModel",value:function(t,i,o){if(zt!==this)throw Error("Cannot publish a model event from outside model code");var a=i.endsWith("#reflected");a&&(i=i.slice(0,i.length-10));var l=t+":"+i;this.handleModelEventInModel(l,o,a),this.handleModelEventInView(l,o)}},{key:"publishFromModelOnly",value:function(t,i,o){if(zt!==this)throw Error("Cannot publish a model event from outside model code");var a=t+":"+i;this.handleModelEventInModel(a,o)}},{key:"publishFromView",value:function(t,i,o){if(zt)throw Error("Cannot publish a view event from model code");var a=t+":"+i;this.handleViewEventInModel(a,o),this.handleViewEventInView(a,o)}},{key:"handleBundledEvents",value:function(t,i){var o,a=Xt(i.events);try{for(a.s();!(o=a.n()).done;){var l=o.value;Cs.fromState(l,this).executeOn(this,!0)}}catch(c){a.e(c)}finally{a.f()}}},{key:"handleModelEventInModel",value:function(t,i){var o=this,a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(zt!==this)throw Error("handleModelEventInModel called from outside model code");if(a){if(this.controller.synced!==!0)return;var l=t+"#__vote",c=t+"#divergence",u=!!Ss.subscriptions[l],h=!!this.subscriptions[t],A=!!this.subscriptions[c];u&&A&&console.log("divergence subscription for ".concat(t," overridden by vote subscription"));var f,d=h?new Cs(this.time,0,this.id,"handleModelEventInModel",[t,i]):null;f=u?[this.id,"handleModelEventInView",l]:[this.id,"handleTuttiDivergence",c],Promise.resolve().then(function(){return o.controller.sendTutti(o.time,t,i,d,u,f)})}else if(this.subscriptions[t]){var p,m=Xt(this.subscriptions[t]);try{for(m.s();!(p=m.n()).done;){var b=p.value,g=b.split("."),w=wre(g),I=w[0],v=w.slice(1),C=v.join("."),E=this.lookUpModel(I);if(E)if(C[0]!=="{")if(C.indexOf(".")===-1){if(typeof E[C]!="function"){qr("event ".concat(t," ").concat(E,".").concat(C,"(): method not found"));continue}try{E[C](i)}catch(_){qr("event ".concat(t," ").concat(E,".").concat(C,"()"),_)}}else try{var S=C.split(".");E.call(S[0],S[1],i)}catch(_){qr("event ".concat(t," ").concat(E,".").concat(C,"()"),_)}else{var M=K_(C,E);try{M(i)}catch(_){qr("event ".concat(t," ").concat(E," ").concat(M),_)}}else GA("event ".concat(t," .").concat(C,"(): subscriber not found"))}}catch(_){m.e(_)}finally{m.f()}}}},{key:"handleViewEventInModel",value:function(t,i){if(this.subscriptions[t]){var o=new Cs(this.time,0,this.id,"handleModelEventInModel",[t,i]);this.controller.sendMessage(o)}}},{key:"handleModelEventInView",value:function(t,i){var o=this;Ss.handleEvent(t,i,function(a){return function(l){if(!zt)throw Error("VirtualMachine confusion");var c=zt;try{zt=null,l()}finally{zt=c}}(function(){return Um(o,a,!0)})})}},{key:"handleViewEventInView",value:function(t,i){Ss.handleEvent(t,i)}},{key:"handleTuttiDivergence",value:function(t,i){if(this.subscriptions[t])this.handleModelEventInModel(t,i);else{var o=t.split(":").slice(-1)[0];console.warn("uncaptured divergence in ".concat(o,":"),i)}}},{key:"processModelViewEvents",value:function(t){var i=this;if(zt)throw Error("cannot process view events in model code");return Um(this,function(){return Ss.processFrameEvents(t,!!i.controller.synced)})}},{key:"pollToCheckSync",value:function(){var t=this,i=this.time;if(this.controller.synced===!0){var o=Date.now(),a=this.getSummaryHash(),l=Date.now()-o;this.controller.cpuTime-=l,Promise.resolve().then(function(){return t.controller.syncCheck(i,a)})}}},{key:"handlePollForSnapshot",value:function(){var t=this.time,i=t-this.lastSnapshotPoll;i<5e3?console.log("rejecting snapshot poll ".concat(i,"ms after previous")):(this.lastSnapshotPoll=t,this.controller.handlePollForSnapshot(t))}},{key:"snapshot",value:function(){return aD.newOrRecycled(this).snapshot(this,"$")}},{key:"getSummaryHash",value:function(){return xu(new Lae().getHash(this))}},{key:"persist",value:function(t,i){var o=hn.begin("snapshot"),a=typeof i=="function"?i.call(t):i;if($t(a)!=="object")throw Error("Croquet: persistSession() can only persist objects (got ".concat($t(a),")"));var l,c,u=xu(a),h=Pm.hash(u),A=hn.end("snapshot")-o,f=this.persisted===h,d=this.time;if(pu.snapshot&&console.log("".concat(this.id," persistent data @").concat(d," collected, stringified and hashed in ").concat(Math.ceil(A),"ms").concat(f?" (unchanged, ignoring)":"")),!f)if(l=this,c={persistTime:d,persistentString:u,persistentHash:h,ms:A},j_.set(l,c),this.persisted=h,this.inPersistenceCoolOff)pu.snapshot&&console.log("".concat(this.id," persistence poll postponed by cooloff"));else{var p=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;p>0?(pu.snapshot&&console.log("".concat(this.id," postponing persistence poll by ").concat(p,"ms")),this.futureSend(p,this.id,"triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}},{key:"triggerPersistencePoll",value:function(){var t=this;this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;var i,o=(i=this,j_.get(i));if(o){var a=o.persistTime,l=o.persistentString,c=o.persistentHash,u=o.ms;if(R4(this),this.controller&&this.controller.synced){pu.snapshot&&console.log("".concat(this.id," asking controller to poll for persistence @").concat(a));var h=this.time;Promise.resolve().then(function(){return t.controller.pollForPersist(h,a,l,c,u)})}}}},{key:"random",value:function(){if(zt!==this)throw Error("replicated random accessed from outside the model");return this._random()}},{key:"randomID",value:function(){if(zt!==this)throw Error("replicated random accessed from outside the model");for(var t="",i=0;i<4;i++)t+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return t}},{key:"toString",value:function(){return"VirtualMachine[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"current",value:function(){return zt||console.warn("VirtualMachine.current() called from outside the vm!"),zt}},{key:"hasCurrent",value:function(){return!!zt}}]),e}();function Dae(n,e,t){return t.length>0&&(t=UG.newOrRecycled().encode(t)),"".concat(n,">").concat(e).concat(t.length>0?JSON.stringify(t):"")}function L4(n,e){var t=Qt(n.match(/^([^[]+)(\[.*)?$/i),3);t[0];var i=t[1],o=t[2],a=Qt(i.split(">"),2),l=a[0],c=a[1],u=[];return o&&(u=OG.newOrRecycled(e).decode(JSON.parse(o))),{receiver:l,selector:c,args:u}}function Nm(n,e){return(e-n|0)>=0}var Cs=function(n){function e(t,i,o,a,l){ti(this,e),this.time=t,this.seq=i,this.receiver=o,this.selector=a,this.args=l}return ui(e,[{key:"convertIfNeeded",value:function(t){if(this.payload){var i=L4(this.payload,t),o=i.receiver,a=i.selector,l=i.args;delete this.payload,this.receiver=o,this.selector=a,this.args=l}return this}},{key:"before",value:function(t){return this.time!==t.time?this.time<t.time:this.isExternal()!==t.isExternal()?t.isExternal():this.isExternal()?Nm(this.externalSeq,t.externalSeq):Nm(this.internalSeq,t.internalSeq)}},{key:"hasReceiver",value:function(t){return this.receiver===t}},{key:"isExternal",value:function(){return 1&this.seq}},{key:"externalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t+1}},{key:"internalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t}},{key:"asState",value:function(){return[this.time,this.seq,Dae(this.receiver,this.selector,this.args)]}},{key:"executeOn",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=o?function(f){return f()}:function(f){return FG(t,function(){return rG(t,f)})},l=this.receiver,c=this.selector,u=this.args,h=t.lookUpModel(l);if(h)if(c[0]==="{"){var A=K_(c,h);a(function(){try{A.apply(void 0,Kt(u))}catch(f){qr("".concat(i.shortString()," ").concat(A),f)}})}else typeof h[c]!="function"?GA("".concat(this.shortString()," ").concat(h,".").concat(c,"(): method not found")):a(function(){try{h[c].apply(h,Kt(u))}catch(f){qr("".concat(i.shortString()," ").concat(h,".").concat(c,"()"),f)}});else GA("".concat(this.shortString()," ").concat(c,"(): receiver not found"))}},{key:"shortString",value:function(){return"".concat(this.isExternal()?"External":"Future","Message")}},{key:"toString",value:function(){var t=this.receiver,i=this.selector,o=this.args,a=this.isExternal(),l=a?this.externalSeq:this.internalSeq;return"".concat(a?"External":"Future","Message[").concat(this.time).concat(":#"[+a]).concat(l," ").concat(t,".").concat(i,"(").concat(o.map(JSON.stringify).join(", "),")]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"fromState",value:function(t,i){var o=Qt(t,3),a=o[0],l=o[1],c=L4(o[2],i);return new e(a,l,c.receiver,c.selector,c.args)}}]),e}(),Rae=function(){var n=new ArrayBuffer(8),e=new DataView(n);return function(t){return e.setFloat64(0,t,!0),e.getInt32(0,!0)+e.getInt32(4,!0)}}(),Lae=function(){function n(){ti(this,n),this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",Cs),this.addHasher("Teatime:Data",oD);var e,t=Xt(to.allClassTypes());try{for(t.s();!(e=t.n()).done;){var i=Qt(e.value,2),o=i[0],a=i[1];this.addHasher(o,a)}}catch(l){t.e(l)}finally{t.f()}}return ui(n,[{key:"addHasher",value:function(e,t){var i=this,o=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(c){return Yn({},c)}},a=o.cls,l=o.write;this.hashers.set(a,function(c){return i.hashStructure(c,l(c))})}},{key:"getHash",value:function(e){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(var t=0,i=Object.entries(e);t<i.length;t++){var o=Qt(i[t],2),a=o[0],l=o[1];if(a!=="controller"&&a!=="meta")if(a==="_random")this.hash(l.state(),!1);else if(a==="messages"){var c=l.asArray();(this.hashState.fC=c.length)&&this.hash(c,!1)}else this.hashEntry(a,l)}return this.hashDeferred(),this.hashState}},{key:"hashDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.key,i=e.value;this.hashEntry(t,i,!1)}}},{key:"hash",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];switch($t(e)){case"number":return void(Number.isNaN(e)?this.hashState.nanC++:Number.isFinite(e)?e===0?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Rae(e)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=e.length);case"boolean":case"undefined":return;default:if(this.refs.has(e))return;var i=Object.prototype.toString.call(e).slice(8,-1);switch(i){case"Array":return void this.hashArray(e,t);case"ArrayBuffer":return void this.hashArray(new Uint8Array(e),!1);case"Set":case"Map":return void this.hashStructure(e,Kt(e));case"DataView":return void this.hashArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return void this.hashArray(e,!1);case"Object":if(e instanceof to)this.hashModel(e);else if(e.constructor===Object)this.hashObject(e,t);else{var o=this.hashers.get(e.constructor);o&&o(e)}}}}},{key:"hashModel",value:function(e){this.hashState.mC++,this.refs.set(e,!0);for(var t=0,i=Object.entries(e);t<i.length;t++){var o=Qt(i[t],2),a=o[0],l=o[1];a!=="__realm"&&l!==void 0&&this.hashEntry(a,l)}}},{key:"hashObject",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.hashState.oC++,this.refs.set(e,!0);for(var i=0,o=Object.entries(e);i<o.length;i++){var a=Qt(o[i],2),l=a[0],c=a[1];c!==void 0&&this.hashEntry(l,c,t)}}},{key:"hashArray",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.refs.set(e,!0);for(var i=0;i<e.length;i++)this.hashEntry(i,e[i],t)}},{key:"hashStructure",value:function(e,t){t!==void 0&&(this.refs.set(e,!0),this.hash(t,!1))}},{key:"hashEntry",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];e[0]!=="$"?i&&$t(t)==="object"?this.todo.push({key:e,value:t}):this.hash(t):GA("hash: ignoring property ".concat(e),{only:"once"})}}]),n}(),aD=function(){function n(e){ti(this,n),this.vm=e,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",Cs),this.addWriter("Teatime:Data",oD);var t,i=Xt(to.allClassTypes());try{for(i.s();!(t=i.n()).done;){var o=Qt(t.value,2),a=o[0],l=o[1];this.addWriter(a,l)}}catch(c){i.e(c)}finally{i.f()}}return ui(n,[{key:"addWriter",value:function(e,t){var i=this,o=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(c){return Yn({},c)}},a=o.cls,l=o.write;this.writers.set(a,function(c,u){return i.writeAs(e,c,l(c),u)})}},{key:"snapshot",value:function(e){for(var t={_random:e._random.state(),messages:this.write(e.messages.asArray())},i=0,o=Object.entries(e);i<o.length;i++){var a=Qt(o[i],2),l=a[0],c=a[1];l!=="controller"&&(t[l]||this.writeInto(t,l,c,"$"))}return this.writeDeferred(),t}},{key:"writeDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.state,i=e.key,o=e.value,a=e.path;this.writeInto(t,i,o,a,!1)}}},{key:"write",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];switch($t(e)){case"number":return Object.is(e,-0)?{$class:"NegZero"}:Number.isSafeInteger(e)?e:Number.isNaN(e)?{$class:"NaN"}:Number.isFinite(e)?this.writeFloat(e):{$class:"Infinity",$value:Math.sign(e)};case"string":case"boolean":return e;case"undefined":return{$class:"Undefined"};default:if(this.refs.has(e))return this.writeRef(e);var o=Object.prototype.toString.call(e).slice(8,-1);switch(o){case"Array":return this.writeArray(e,t,i);case"ArrayBuffer":return this.writeArrayBuffer(e);case"Set":case"Map":return this.writeAs(o,e,Kt(e),t);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(o,e);case"Object":if(e instanceof to)return this.writeModel(e,t);if(e.constructor===Object||typeof e.constructor!="function")return this.writeObject(e,t,i);var a=this.writers.get(e.constructor);if(a)return a(e,t);throw console.error("Croquet Snapshot: unknown class ".concat(t,":"),e),Error("Croquet Snapshot: class not registered in Model.types(): ".concat(e.constructor.name));case"Null":return e;default:throw console.error("Croquet Snapshot: unsupported property ".concat(t,":"),e),Error("Croquet Snapshot: ".concat(o,"s are not supported as model properties"))}}}},{key:"writeModel",value:function(e,t){var i={$model:to.classToID(e.constructor)};this.refs.set(e,i);var o,a=Xt(Object.keys(e).sort());try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l!=="__realm"){var c=e[l];this.writeInto(i,l,c,t)}}}catch(u){a.e(u)}finally{a.f()}return i}},{key:"writeObject",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o={};this.refs.set(e,o);var a,l=Xt(Object.keys(e).sort());try{for(l.s();!(a=l.n()).done;){var c=a.value,u=e[c];this.writeInto(o,c,u,t,i)}}catch(h){l.e(h)}finally{l.f()}return o}},{key:"writeArray",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=[];this.refs.set(e,o);for(var a=0;a<e.length;a++)this.writeInto(o,a,e[a],t,i);return o}},{key:"writeArrayBuffer",value:function(e){var t={$class:"ArrayBuffer",$value:Bae(e)};return this.refs.set(e,t),t}},{key:"writeTypedArray",value:function(e,t){var i={$class:e,$value:[this.writeArrayBuffer(t.buffer),t.byteOffset,e==="DataView"?t.byteLength:t.length]};return this.refs.set(t,i),i}},{key:"writeFloat",value:function(e){return e}},{key:"writeAs",value:function(e,t,i,o){if(i===void 0)return i;var a={$class:e};this.refs.set(t,a);var l=this.write(i,o,!1);return $t(l)!=="object"||l.$class||Array.isArray(l)?a.$value=l:Object.assign(a,l),a}},{key:"writeRef",value:function(e){var t=this.refs.get(e);if($t(t)!=="object")throw Error("Non-object in refs: "+e);return Array.isArray(t)&&(t.toJSON=function(){return{$id:this.$id,$class:"Array",$value:Kt(this)}}),{$ref:t.$id||(t.$id=this.nextRef++)}}},{key:"writeInto",value:function(e,t,i,o){var a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t[0]!=="$")if(a&&$t(i)==="object")this.todo.push({state:e,key:t,value:i,path:o});else{var l=typeof t=="string"&&t.match(/^[_a-z][_a-z0-9]*$/i),c=o+(l?".".concat(t):"[".concat(JSON.stringify(t),"]")),u=this.write(i,c);u!==void 0&&(e[t]=u)}else GA("snapshot: ignoring property ".concat(t),{only:"once"})}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.nextRef=1,t.refs=new Map,t.todo=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),n}(),lD=function(){function n(e){ti(this,n),this.vm=e,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",Cs),this.addReader("Teatime:Data",oD);var t,i=Xt(to.allClassTypes());try{for(i.s();!(t=i.n()).done;){var o=Qt(t.value,2),a=o[0],l=o[1];this.addReader(a,l)}}catch(c){i.e(c)}finally{i.f()}this.readers.set("Undefined",function(){}),this.readers.set("NaN",function(){return NaN}),this.readers.set("Infinity",function(c){return c*(1/0)}),this.readers.set("NegZero",function(){return-0}),this.readers.set("Set",function(c){return new Set(c)}),this.readers.set("Map",function(c){return new Map(c)}),this.readers.set("Array",function(c){return c.slice(0)}),this.readers.set("ArrayBuffer",function(c){return function(u){for(var h=window.atob(u),A=h.length,f=new Uint8Array(A),d=0;d<A;d++)f[d]=h.charCodeAt(d);return f.buffer}(c)}),this.readers.set("DataView",function(c){return br(DataView,Kt(c))}),this.readers.set("Int8Array",function(c){return br(Int8Array,Kt(c))}),this.readers.set("Uint8Array",function(c){return br(Uint8Array,Kt(c))}),this.readers.set("Uint8ClampedArray",function(c){return br(Uint8ClampedArray,Kt(c))}),this.readers.set("Int16Array",function(c){return br(Int16Array,Kt(c))}),this.readers.set("Uint16Array",function(c){return br(Uint16Array,Kt(c))}),this.readers.set("Int32Array",function(c){return br(Int32Array,Kt(c))}),this.readers.set("Uint32Array",function(c){return br(Uint32Array,Kt(c))}),this.readers.set("Float32Array",function(c){return br(Float32Array,Kt(c))}),this.readers.set("Float64Array",function(c){return br(Float64Array,Kt(c))})}return ui(n,[{key:"addReader",value:function(e,t){var i=$t(t)==="object"?t.read:function(o){return Object.assign(Object.create(t.prototype),o)};this.readers.set(e,i)}},{key:"readVM",value:function(e,t){if(t!=="$")throw Error("VirtualMachine must be root object");for(var i={_random:new Ow(null,{state:e._random})},o=0,a=Object.entries(e);o<a.length;o++){var l=Qt(a[o],2),c=l[0],u=l[1];i[c]||this.readInto(i,c,u,t)}return this.readDeferred(),this.resolveRefs(),i}},{key:"readDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.object,i=e.key,o=e.value,a=e.path;this.readInto(t,i,o,a,1)}}},{key:"resolveRefs",value:function(){var e,t=Xt(this.unresolved);try{for(t.s();!(e=t.n()).done;){var i=e.value,o=i.object,a=i.key,l=i.ref,c=i.path;if(!this.refs.has(l))throw Error("Unresolved ref: ".concat(l," at ").concat(c,"[").concat(JSON.stringify(a),"]"));o[a]=this.refs.get(l)}}catch(u){t.e(u)}finally{t.f()}}},{key:"read",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;switch($t(e)){case"number":case"string":case"boolean":return e;default:var o=Object.prototype.toString.call(e).slice(8,-1);switch(o){case"Array":return this.readArray(e,t,i);case"Null":return null;case"Object":var a=e.$class,l=e.$model,c=e.$ref;if(c)throw Error("refs should have been handled in readInto()");return l?this.readModel(e,t):a?this.readAs(a,e,t):this.readObject(Object,e,t,i);default:throw Error("Don't know how to deserialize ".concat(o," at ").concat(t))}}}},{key:"readModel",value:function(e,t){var i=to.instantiateClassID(e.$model,e.id);e.$id&&this.refs.set(e.$id,i);for(var o=0,a=Object.entries(e);o<a.length;o++){var l=Qt(a[o],2),c=l[0],u=l[1];c!=="id"&&c[0]!=="$"&&this.readInto(i,c,u,t)}return i}},{key:"readObject",value:function(e,t,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=new e;t.$id&&this.refs.set(t.$id,a);for(var l=0,c=Object.entries(t);l<c.length;l++){var u=Qt(c[l],2),h=u[0],A=u[1];h[0]!=="$"&&this.readInto(a,h,A,i,o)}return a}},{key:"readArray",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=[];e.$id&&this.refs.set(e.$id,o);for(var a=0;a<e.length;a++)e[a]!==void 0&&this.readInto(o,a,e[a],t,i);return o}},{key:"readAs",value:function(e,t,i){var o={},a=new Map;if("$value"in t)o=this.read(t.$value,i,2);else for(var l=0,c=Object.entries(t);l<c.length;l++){var u=Qt(c[l],2),h=u[0],A=u[1];if(h[0]!=="$"){var f=A&&A.$ref;f?this.refs.has(f)?o[h]=this.refs.get(f):(o[h]="<unresolved>",a.set(f,h)):this.readInto(o,h,A,i,1)}}var d=this.readers.get(e)(o,i);d||e==="Undefined"||e==="NaN"||e==="NegZero"||console.warn('Reading "'.concat(e,'" returned ').concat(d," at ").concat(i)),t.$id&&this.refs.set(t.$id,d);var p,m=Xt(a.entries());try{for(m.s();!(p=m.n()).done;){var b=Qt(p.value,2),g=b[0],w=b[1];this.unresolved.push({object:d,key:w,ref:g,path:i})}}catch(I){m.e(I)}finally{m.f()}return d}},{key:"readRef",value:function(e,t,i,o){if(!i||!i.$ref)return!1;var a=i.$ref;return this.refs.has(a)?e[t]=this.refs.get(a):(e[t]="<unresolved>",this.unresolved.push({object:e,key:t,ref:a,path:o})),!0}},{key:"readInto",value:function(e,t,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!this.readRef(e,t,i,o))if(a!==0||$t(i)!=="object"){var l=typeof t=="string"&&t.match(/^[_a-z][_a-z0-9]*$/i),c=o+(l?".".concat(t):"[".concat(JSON.stringify(t),"]"));e[t]=this.read(i,c,a>0?a-1:0)}else this.todo.push({object:e,key:t,value:i,path:o})}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.refs=new Map,t.todo=[],t.unresolved=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),n}(),UG=function(n){Ww(t,aD);var e=Yw(t);function t(){return ti(this,t),e.apply(this,arguments)}return ui(t,[{key:"encode",value:function(i){var o=this.writeArray(i,"$");return this.writeDeferred(),o}},{key:"writeModel",value:function(i){return{$ref:i.id}}}]),t}(),OG=function(n){Ww(t,lD);var e=Yw(t);function t(){return ti(this,t),e.apply(this,arguments)}return ui(t,[{key:"decode",value:function(i){var o=this.readArray(i,"$");return this.readDeferred(),this.resolveRefs(),o}},{key:"resolveRefs",value:function(){var i,o=Xt(this.unresolved);try{for(o.s();!(i=o.n()).done;){var a=i.value,l=a.object,c=a.key,u=a.ref,h=a.path;if(this.refs.has(u))l[c]=this.refs.get(u);else{var A=this.vm.lookUpModel(u);if(!A)throw Error("Unresolved ref: ".concat(u," at ").concat(h,"[").concat(JSON.stringify(c),"]"));l[c]=A}}}catch(f){o.e(f)}finally{o.f()}}}]),t}();function QG(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Set,a=Object.values(n).filter(function(d){var p=Object.prototype.toString.call(d).slice(8,-1);return(p==="Object"||p==="Array")&&!o.has(d)}),l=Xt(a);try{for(l.s();!(e=l.n()).done;){var c=e.value;o.add(c);var u=t+"."+c.constructor.name;if(i[u]){if(i[u]!==c.constructor)throw new Error("Class with name "+u+" already gathered, but new one has different identity")}else i[u]=c.constructor}}catch(d){l.e(d)}finally{l.f()}var h,A=Xt(a);try{for(A.s();!(h=A.n()).done;){var f=h.value;QG(f,t,i,o)}}catch(d){A.e(d)}finally{A.f()}}function Bae(n){for(var e=new Uint8Array(n),t=e.byteLength,i="",o=0;o<t;o++)i+=String.fromCharCode(e[o]);return window.btoa(i)}var B4=gt.has("debug","classes",!1),Rw=Symbol("SECRET"),Lw=new WeakSet,to=function(n){function e(t){if(ti(this,e),t!==Rw)throw Error("You must create ".concat(this,' using create() not "new"!'))}return ui(e,[{key:"init",value:function(t){Lw.delete(this)}},{key:"destroy",value:function(){Fo().unsubscribeAll(this),Fo().deregister(this)}},{key:"publish",value:function(t,i,o){this.__realm||this.__realmError(),this.__realm.publish(i,o,t)}},{key:"subscribe",value:function(t,i,o){return this.__realm||this.__realmError(),this.__realm.subscribe(this,t,i,o)}},{key:"unsubscribe",value:function(t,i){this.__realm||this.__realmError(),this.__realm.unsubscribe(this,t,i)}},{key:"unsubscribeAll",value:function(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}},{key:"__realmError",value:function(){if(!this.id)throw Error("".concat(this," has no ID, did you call super.init(options)?"))}},{key:"future",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];return this.__realm.future(this,t,i,a)}},{key:"random",value:function(){return Fo().random()}},{key:"now",value:function(){return Fo().now()}},{key:"beWellKnownAs",value:function(t){Fo().vm.set(t,this)}},{key:"getModel",value:function(t){return this.__realm.vm.lookUpModel(t)}},{key:"wellKnownModel",value:function(t){return this.__realm.vm.get(t)}},{key:"modelOnly",value:function(t){if(Pa.current()===this.__realm.vm)return!0;var i=Error(t||"".concat(this,".modelOnly() called from outside a model!"));throw qr("view code",i),i}},{key:"sessionId",get:function(){return this.__realm.vm.id}},{key:"viewCount",get:function(){return Object.keys(this.__realm.vm.views).length}},{key:"persistSession",value:function(t){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,t)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor[Fm]||this.constructor.name;return t.includes("Model")?t:"".concat(t,"[Model]")}}],[{key:"create",value:function(t,i,o){if(!F_(this))throw Error('Model class "'.concat(this.name,'" not registered'));var a=Fo(),l=new this(Rw);return Object.defineProperty(l,"__realm",{value:a}),Object.defineProperty(l,"id",{value:a.register(l),enumerable:!0}),Lw.add(l),typeof i=="string"&&(console.warn('Croquet: Model.create(..., "'.concat(i,'") with a well-known name argument is deprecated!')),l.beWellKnownAs(i),i=void 0),o&&l.beWellKnownAs(o),l.init(t,i),Lw.has(l)&&(Lw.delete(l),Object.getPrototypeOf(this)!==e&&console.warn("".concat(l," did not call super.init(options)"))),l}},{key:"createNoInit",value:function(t){var i=Fo(),o=new this(Rw);return Object.defineProperty(o,"__realm",{value:i}),Object.defineProperty(o,"id",{value:t,enumerable:!0}),o}},{key:"allowConstructors",value:function(){Rw=void 0,console.warn("disabling error reporting for Model constructors")}},{key:"register",value:function(t){return t||(t=this.name,console.warn("Deprecation warning: ".concat(this.name,".register(classId) called without classId. See https://croquet.io/sdk/docs/Model.html#.register"))),lD.resetInstance(),aD.resetInstance(),UG.resetInstance(),OG.resetInstance(),function(i,o){var a=X4(i),l=OA("".concat(o,":").concat(a));$_.push(l),Kw()&&l.then(function(c){La[c].what="Class ".concat(o)})}(this,t),function(i,o){var a=VA[o];if(a&&a!==i)throw Error("Registering model class ".concat(i.name,' failed, id "').concat(o,'" already used by ').concat(a.name));F_(i)?B4&&!a&&console.warn("ignoring re-exported model class ".concat(o)):(B4&&console.log("registering model class ".concat(o)),i[Fm]=o),VA[o]=i}(this,t),this}},{key:"wellKnownModel",value:function(t){if(!Pa.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return Pa.current().get(t)}},{key:"types",value:function(){return{}}},{key:"classToID",value:function(t){return function(i){if(F_(i))return i[Fm];throw Error('Class "'.concat(i.name,'" not found, did you call ').concat(i.name,'.register("').concat(i.name,'")?'))}(t)}},{key:"classFromID",value:function(t){return P4(t)}},{key:"allClasses",value:function(){return k4()}},{key:"allClassTypes",value:function(){return function(){var t,i={},o=Xt(k4());try{for(o.s();!(t=o.n()).done;){var a=t.value;Object.assign(i,a.types())}}catch(l){o.e(l)}finally{o.f()}return Object.entries(i)}()}},{key:"instantiateClassID",value:function(t,i){return P4(t).createNoInit(i)}}]),e}(),VA={},Fm=Symbol("CLASS_ID");function k4(){return Object.values(VA)}function F_(n){return Object.prototype.hasOwnProperty.call(n,Fm)}function P4(n){if(VA[n])return VA[n];throw Error('Class "'.concat(n,'" in snapshot, but not found in current source?'))}to[Fm]="Croquet.Model",VA["Croquet.Model"]=to;var J_=function(n){function e(t){ti(this,e),$t(t)==="object"&&"__realm"in t||console.warn("Croquet: argument to View constructor needs to be a Model");var i=Fo("");i&&i.isViewRealm()||(i=Um(t.__realm.vm,function(){return Fo()},!0)),Object.defineProperty(this,"realm",{value:i}),Object.defineProperty(this,"id",{value:i.register(this),configurable:!0})}return ui(e,[{key:"detach",value:function(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}},{key:"reattach",value:function(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}},{key:"publish",value:function(t,i,o){this.realm.publish(i,o,t)}},{key:"subscribe",value:function(t,i,o){typeof o=="string"&&(o=this[o]),o=o.bind(this);var a=i.event?i:{event:i},l=a.event,c=a.handling;this.realm.subscribe(l,this.id,o,t,c)}},{key:"unsubscribe",value:function(t,i){this.realm.unsubscribe(i,this.id,null,t)}},{key:"unsubscribeAll",value:function(){this.realm.unsubscribeAll(this.id)}},{key:"future",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.realm.future(this,t)}},{key:"random",value:function(){return Fo().random()}},{key:"now",value:function(){return this.realm.now()}},{key:"externalNow",value:function(){return this.realm.externalNow()}},{key:"extrapolatedNow",value:function(){return this.realm.extrapolatedNow()}},{key:"update",value:function(t){}},{key:"wellKnownModel",value:function(t){return this.realm.vm.get(t)}},{key:"sessionId",get:function(){return this.realm.vm.id}},{key:"session",get:function(){return this.realm.vm.controller.session}},{key:"viewId",get:function(){return this.realm.vm.controller.viewId}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor.name;return t.includes("View")?t:"".concat(t,"[View]")}}],[{key:"displayStatus",value:function(t,i){return nG(t,i)}},{key:"displayWarning",value:function(t,i){return GA(t,i)}},{key:"displayError",value:function(t,i){return function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o&&At.showMessage(o,Yn(Yn({},a),{},{level:"error"}))}(t,i)}}]),e}(),q_=new(function(){function n(){ti(this,n),this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}return ui(n,[{key:"setReceiver",value:function(e){this.receiver=e,this.ready=!0}},{key:"setIframeEnumerator",value:function(e){this.enumerator=e}},{key:"on",value:function(e,t){var i=this;if(!this.receiver)throw Error("setReceiver() has not been called");if(typeof t=="string"&&(t=this.receiver[t]),!t)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[e]){if(this.findIndex(this.subscriptions[e],t)>=0)throw Error("".concat(t," is already subscribed"))}else this.subscriptions[e]=[];this.subscriptions[e].push(t),this.listener||(this.listener=function(o){return i.receive(o)},window.addEventListener("message",this.listener))}},{key:"detach",value:function(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}},{key:"removeSubscription",value:function(e,t){typeof t=="string"&&(t=this.receiver[t]);var i=this.subscriptions[e];if(i){var o=this.findIndex(i,t);i.splice(o,1),i.length===0&&delete this.subscriptions[e]}}},{key:"removeAllSubscriptions",value:function(){this.subscriptions={}}},{key:"receive",value:function(e){var t=e.data,i=t.event,o=t.data,a=e.source;this.handleEvent(i,o,a)}},{key:"handleEvent",value:function(e,t,i){var o=this,a=this.subscriptions[e];a&&a.forEach(function(l){l.call(o.receiver,t,i)})}},{key:"send",value:function(e,t,i){this.isInIframe?window.top.postMessage({event:e,data:t},"*"):i?i.postMessage({event:e,data:t},"*"):this.enumerator&&this.enumerator().forEach(function(o){o.contentWindow.postMessage({event:e,data:t},"*")})}},{key:"findIndex",value:function(e,t){var i=t.name;return e.findIndex(function(o){var a=o.name;return i||a?i===a:t===o})}},{key:"startPublishingPointerMove",value:function(){var e=this;this._moveHandler||(this._moveHandler=function(t){return e.send("pointerPosition",{x:t.clientX,y:t.clientY,type:t.type})},window.document.addEventListener("pointermove",this._moveHandler,!0))}},{key:"stopPublishingPointerMove",value:function(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}}]),n}()),N4=60,U_=function(){function n(){ti(this,n)}var e,t,i;return ui(n,null,[{key:"join",value:(i=an(regeneratorRuntime.mark(function o(a){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,this.join_impl(a);case 3:return l.abrupt("return",l.sent);case 6:throw l.prev=6,l.t0=l.catch(0),At.showMessage(l.t0.message,{level:"fatal"}),l.t0;case 10:case"end":return l.stop()}},o,this,[[0,6]])})),function(o){return i.apply(this,arguments)})},{key:"join_impl",value:(t=an(regeneratorRuntime.mark(function o(a){var l,c,u,h,A,f,d,p,m,b,g,w,I,v,C,E,S,M,_,T,D,R,B,P,F,z;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(z=function(){E.model=null,E.view&&(gt.has("debug","session",!1)&&console.log(E.id,"detaching root view"),E.view.detach(),E.view.id!==""&&console.warn("Croquet: ".concat(E.view," did not call super.detach()")),E.view=null),At.clearSessionMoniker(),q_.ready&&q_.detach()},F=function(){return(F=an(regeneratorRuntime.mark(function V(){return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(z(),!v.leaving){G.next=4;break}return v.leaving(!0),G.abrupt("return");case 4:if(!B){G.next=6;break}return G.abrupt("return");case 6:return B=!0,G.next=9,v.establishSession(S);case 9:B=!1,E.model=v.vm.get("modelRoot"),E.id=v.id,E.persistentId=v.persistentId,E.versionId=v.versionId,v.session=E,At.makeSessionWidgets(E.id),v.inViewRealm(function(){gt.has("debug","session",!1)&&console.log(E.id,"creating root view"),E.view=new p(E.model)});case 17:case"end":return G.stop()}},V)}))).apply(this,arguments)},P=function(){return F.apply(this,arguments)},f=function(V,G){return V===G||V.prototype instanceof G},$t(a)==="object"){Q.next=6;break}throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/sdk/docs/Session.html#.join");case 6:l=0,c=Object.entries(a);case 7:if(!(l<c.length)){Q.next=16;break}if(u=Qt(c[l],2),h=u[0],!((A=u[1])instanceof Promise)){Q.next=13;break}return Q.next=12,A;case 12:a[h]=Q.sent;case 13:l++,Q.next=7;break;case 16:if(typeof a.apiKey=="string"){Q.next=18;break}throw Error("Croquet: no apiKey provided in Session.join()!");case 18:if(!(a.apiKey.length>128)){Q.next=20;break}throw Error("Croquet: apiKey > 128 characters in Session.join()!");case 20:if(typeof a.name=="string"){Q.next=22;break}throw Error("Croquet: no session name provided in Session.join()!");case 22:if(!(a.name.length>128)){Q.next=24;break}throw Error("Croquet: session name > 128 characters in Session.join()!");case 24:if(typeof(d=a.model)=="function"&&f(d,to)){Q.next=27;break}throw Error("Croquet: bad model class in Session.join()");case 27:if(typeof(p=a.view||J_)=="function"&&f(p,J_)){Q.next=30;break}throw Error("Croquet: bad view class in Session.join()");case 30:if(typeof a.appId=="string"){Q.next=32;break}throw Error("Croquet: no appId provided in Session.join()");case 32:if(!(!a.appId.length>128)){Q.next=34;break}throw Error("Croquet: appId > 128 characters in Session.join()");case 34:if(a.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i)){Q.next=36;break}throw Error("Croquet: malformed appId in Session.join()");case 36:if(typeof a.password=="string"&&a.password){Q.next=38;break}throw Error("Croquet: no password provided in Session.join()");case 38:if((m=gt.reflector||a.reflector)&&(m.includes("://")||m.match(/^[-a-z0-9]+$/i)?gt.reflector=m:console.warn('Croquet: Not a valid websocket url, ignoring reflector "'.concat(m,'"'))),!("rejoinLimit"in a)){Q.next=45;break}if(!(typeof a.rejoinLimit!="number"||a.rejoinLimit<0||a.rejoinLimit>6e4)){Q.next=43;break}throw Error("rejoinLimit range: 0-60000");case 43:Q.next=46;break;case 45:a.rejoinLimit=1e3;case 46:if(!("eventRateLimit"in a)){Q.next=51;break}if(!(typeof a.eventRateLimit!="number"||a.eventRateLimit<1||a.eventRateLimit>60)){Q.next=49;break}throw Error("eventRateLimit range: 1-60");case 49:Q.next=52;break;case 51:a.eventRateLimit=20;case 52:if(!a.heraldUrl){Q.next=57;break}if(!(a.heraldUrl.length>256)){Q.next=55;break}throw Error("heraldUrl can only be 256 characters");case 55:if(a.heraldUrl.startsWith("https://")){Q.next=57;break}throw Error("heraldUrl needs to be https");case 57:if(!a.hashOverride){Q.next=62;break}if(a.hashOverride.length===43){Q.next=60;break}throw Error("hashOverride must be 43 characters");case 60:if(a.hashOverride.search(/[^-_a-zA-Z0-9]/)===-1){Q.next=62;break}throw Error("hashOverride must be base64url encoded");case 62:if(a.debug&&(b=function(V){return typeof V=="string"&&(V=V.split(",")),V?Array.isArray(V)?V:[V]:[]},gt.debug=[].concat(Kt(b(a.debug)),Kt(b(gt.debug))).join(",")),!("autoSleep"in a)){Q.next=78;break}if(g=a.autoSleep,(w=$t(g))!=="number"){Q.next=71;break}if(!(g<0)){Q.next=69;break}throw Error("an autoSleep value must be >= 0");case 69:Q.next=76;break;case 71:if(w!=="boolean"){Q.next=75;break}a.autoSleep=g?10:0,Q.next=76;break;case 75:throw Error("autoSleep must be numeric or boolean");case 76:Q.next=79;break;case 78:a.autoSleep=10;case 79:for(("expectedSimFPS"in a)&&(N4=Math.min(a.expectedSimFPS,120)),I=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewIdDebugSuffix","hashOverride"],kae(),v=new Mae,C=JSON.parse(JSON.stringify(Yn({},a.options))),Q.t0=function(V){v.stepSession("animation",{frameTime:V,view:E.view,expectedSimFPS:N4})},Q.t1=function(){return n.leave(E.id)},E={id:"",persistentId:"",versionId:"",model:null,view:null,step:Q.t0,leave:Q.t1,get latency(){return v.latency},get latencies(){return v.latencies}},S={options:C,initFn:function(V,G){return d.create(V,G,"modelRoot")},rebootModelView:P},M=0,_=Object.entries(a);M<_.length;M++)T=Qt(_[M],2),D=T[0],R=T[1],I.includes(D)&&(S[D]=R);return Q.next=91,v.initFromSessionSpec(S);case 91:return B=!1,Q.next=94,P();case 94:return a.step!=="manual"&&v.startStepping(E.step),Q.abrupt("return",E);case 96:case"end":return Q.stop()}},o)})),function(o){return t.apply(this,arguments)})},{key:"leave",value:(e=an(regeneratorRuntime.mark(function o(a){var l,c,u;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(l=Iae(a)){h.next=3;break}return h.abrupt("return",!1);case 3:if(l.reconnectTimeout&&(clearTimeout(l.reconnectTimeout),delete l.reconnectTimeout),c=new Promise(function(A){return l.leaving=A}),(u=l.connection).connected){h.next=8;break}return h.abrupt("return",!1);case 8:return u.closeConnection(1e3),h.abrupt("return",c);case 10:case"end":return h.stop()}},o)})),function(o){return e.apply(this,arguments)})},{key:"thisSession",value:function(){var o=Pa.current();return o?o.id:""}}]),n}(),Uw={};function GG(n){if(!Object.isFrozen(n)){Object.freeze(n);for(var e=0,t=Object.values(n);e<t.length;e++){var i=t[e];!i||$t(i)!=="object"&&typeof i!="function"||GG(i)}}}function kae(){Object.isFrozen(Uw)||(GG(Uw),function(n){var e=JSON.stringify(n,function(o,a){return typeof a=="function"?X4(a):a});if(e!=="{}"){var t=JSON.parse(e),i=OA(xu(t));$_.push(i),Kw()&&i.then(function(o){La[o].what="Croquet Constants"})}}(Uw))}qs.App=At,qs.Constants=Uw,qs.Data=Pm,qs.Messenger=q_,qs.Model=to,qs.Session=U_,qs.View=J_,qs.gatherInternalClassTypes=function(n,e){var t={};return QG({root:n},e,t,new Set),t},qs.startSession=function(){return At.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),U_.join.apply(U_,arguments)}});var cD={};ho(cD,{config:()=>Pae});var Pae,uD=cX(()=>{"use strict";Pae={name:"fuck",pass:"aym4NwIKf5RWIig-kfWw2Q",appId:"com.gmail.zeroish.jerk",apiKey:"11AxeqxgNgmDnbBOgP867IG08ghJzFcsHhtHDgjAs",firebaseConfig:{apiKey:"AIzaSyAHrgHICF8pS0FbyAE0xh9cXKyvhXOgDwk",authDomain:"preflux-dd50f.firebaseapp.com",databaseURL:"https://preflux-dd50f-default-rtdb.firebaseio.com",projectId:"preflux-dd50f",storageBucket:"preflux-dd50f.appspot.com",messagingSenderId:"849392676366",appId:"1:849392676366:web:b99310b94697d2d0edd65f",measurementId:"G-Y407H3SC50"}}});var $9=bt((Af,ff)=>{(function(n){var e=typeof Af=="object"&&Af&&!Af.nodeType&&Af,t=typeof ff=="object"&&ff&&!ff.nodeType&&ff,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(n=i);var o,a=2147483647,l=36,c=1,u=26,h=38,A=700,f=72,d=128,p="-",m=/^xn--/,b=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=l-c,v=Math.floor,C=String.fromCharCode,E;function S(G){throw new RangeError(w[G])}function M(G,O){for(var W=G.length,k=[];W--;)k[W]=O(G[W]);return k}function _(G,O){var W=G.split("@"),k="";W.length>1&&(k=W[0]+"@",G=W[1]),G=G.replace(g,".");var Y=G.split("."),te=M(Y,O).join(".");return k+te}function T(G){for(var O=[],W=0,k=G.length,Y,te;W<k;)Y=G.charCodeAt(W++),Y>=55296&&Y<=56319&&W<k?(te=G.charCodeAt(W++),(te&64512)==56320?O.push(((Y&1023)<<10)+(te&1023)+65536):(O.push(Y),W--)):O.push(Y);return O}function D(G){return M(G,function(O){var W="";return O>65535&&(O-=65536,W+=C(O>>>10&1023|55296),O=56320|O&1023),W+=C(O),W}).join("")}function R(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:l}function B(G,O){return G+22+75*(G<26)-((O!=0)<<5)}function P(G,O,W){var k=0;for(G=W?v(G/A):G>>1,G+=v(G/O);G>I*u>>1;k+=l)G=v(G/I);return v(k+(I+1)*G/(G+h))}function F(G){var O=[],W=G.length,k,Y=0,te=d,ie=f,re,se,oe,le,xe,_e,pe,K,be;for(re=G.lastIndexOf(p),re<0&&(re=0),se=0;se<re;++se)G.charCodeAt(se)>=128&&S("not-basic"),O.push(G.charCodeAt(se));for(oe=re>0?re+1:0;oe<W;){for(le=Y,xe=1,_e=l;oe>=W&&S("invalid-input"),pe=R(G.charCodeAt(oe++)),(pe>=l||pe>v((a-Y)/xe))&&S("overflow"),Y+=pe*xe,K=_e<=ie?c:_e>=ie+u?u:_e-ie,!(pe<K);_e+=l)be=l-K,xe>v(a/be)&&S("overflow"),xe*=be;k=O.length+1,ie=P(Y-le,k,le==0),v(Y/k)>a-te&&S("overflow"),te+=v(Y/k),Y%=k,O.splice(Y++,0,te)}return D(O)}function z(G){var O,W,k,Y,te,ie,re,se,oe,le,xe,_e=[],pe,K,be,me;for(G=T(G),pe=G.length,O=d,W=0,te=f,ie=0;ie<pe;++ie)xe=G[ie],xe<128&&_e.push(C(xe));for(k=Y=_e.length,Y&&_e.push(p);k<pe;){for(re=a,ie=0;ie<pe;++ie)xe=G[ie],xe>=O&&xe<re&&(re=xe);for(K=k+1,re-O>v((a-W)/K)&&S("overflow"),W+=(re-O)*K,O=re,ie=0;ie<pe;++ie)if(xe=G[ie],xe<O&&++W>a&&S("overflow"),xe==O){for(se=W,oe=l;le=oe<=te?c:oe>=te+u?u:oe-te,!(se<le);oe+=l)me=se-le,be=l-le,_e.push(C(B(le+me%be,0))),se=v(me/be);_e.push(C(B(se,0))),te=P(W,K,k==Y),W=0,++k}++W,++O}return _e.join("")}function Q(G){return _(G,function(O){return m.test(O)?F(O.slice(4).toLowerCase()):O})}function V(G){return _(G,function(O){return b.test(O)?"xn--"+z(O):O})}if(o={version:"1.4.1",ucs2:{decode:T,encode:D},decode:F,encode:z,toASCII:V,toUnicode:Q},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(e&&t)if(ff.exports==e)t.exports=o;else for(E in o)o.hasOwnProperty(E)&&(e[E]=o[E]);else n.punycode=o})(Af)});var tV=bt((oCe,eV)=>{"use strict";eV.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==o||l.enumerable!==!0)return!1}return!0}});var rV=bt((aCe,iV)=>{"use strict";var nV=typeof Symbol<"u"&&Symbol,Ufe=tV();iV.exports=function(){return typeof nV!="function"||typeof Symbol!="function"||typeof nV("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ufe()}});var aV=bt((lCe,oV)=>{"use strict";var sV={foo:{}},Ofe=Object;oV.exports=function(){return{__proto__:sV}.foo===sV.foo&&!({__proto__:null}instanceof Ofe)}});var cV=bt((cCe,lV)=>{"use strict";var Qfe="Function.prototype.bind called on incompatible ",oL=Array.prototype.slice,Gfe=Object.prototype.toString,zfe="[object Function]";lV.exports=function(e){var t=this;if(typeof t!="function"||Gfe.call(t)!==zfe)throw new TypeError(Qfe+t);for(var i=oL.call(arguments,1),o,a=function(){if(this instanceof o){var A=t.apply(this,i.concat(oL.call(arguments)));return Object(A)===A?A:this}else return t.apply(e,i.concat(oL.call(arguments)))},l=Math.max(0,t.length-i.length),c=[],u=0;u<l;u++)c.push("$"+u);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var h=function(){};h.prototype=t.prototype,o.prototype=new h,h.prototype=null}return o}});var Ax=bt((uCe,uV)=>{"use strict";var Hfe=cV();uV.exports=Function.prototype.bind||Hfe});var AV=bt((hCe,hV)=>{"use strict";var Vfe=Ax();hV.exports=Vfe.call(Function.call,Object.prototype.hasOwnProperty)});var px=bt((ACe,gV)=>{"use strict";var Bt,gf=SyntaxError,mV=Function,mf=TypeError,aL=function(n){try{return mV('"use strict"; return ('+n+").constructor;")()}catch{}},Fu=Object.getOwnPropertyDescriptor;if(Fu)try{Fu({},"")}catch{Fu=null}var lL=function(){throw new mf},Wfe=Fu?function(){try{return arguments.callee,lL}catch{try{return Fu(arguments,"callee").get}catch{return lL}}}():lL,df=rV()(),Xfe=aV()(),xi=Object.getPrototypeOf||(Xfe?function(n){return n.__proto__}:null),pf={},Yfe=typeof Uint8Array>"u"||!xi?Bt:xi(Uint8Array),Uu={"%AggregateError%":typeof AggregateError>"u"?Bt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Bt:ArrayBuffer,"%ArrayIteratorPrototype%":df&&xi?xi([][Symbol.iterator]()):Bt,"%AsyncFromSyncIteratorPrototype%":Bt,"%AsyncFunction%":pf,"%AsyncGenerator%":pf,"%AsyncGeneratorFunction%":pf,"%AsyncIteratorPrototype%":pf,"%Atomics%":typeof Atomics>"u"?Bt:Atomics,"%BigInt%":typeof BigInt>"u"?Bt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Bt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Bt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Bt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Bt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Bt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Bt:FinalizationRegistry,"%Function%":mV,"%GeneratorFunction%":pf,"%Int8Array%":typeof Int8Array>"u"?Bt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Bt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Bt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":df&&xi?xi(xi([][Symbol.iterator]())):Bt,"%JSON%":typeof JSON=="object"?JSON:Bt,"%Map%":typeof Map>"u"?Bt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!df||!xi?Bt:xi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Bt:Promise,"%Proxy%":typeof Proxy>"u"?Bt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Bt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Bt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!df||!xi?Bt:xi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Bt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":df&&xi?xi(""[Symbol.iterator]()):Bt,"%Symbol%":df?Symbol:Bt,"%SyntaxError%":gf,"%ThrowTypeError%":Wfe,"%TypedArray%":Yfe,"%TypeError%":mf,"%Uint8Array%":typeof Uint8Array>"u"?Bt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Bt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Bt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Bt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Bt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Bt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Bt:WeakSet};if(xi)try{null.error}catch(n){fV=xi(xi(n)),Uu["%Error.prototype%"]=fV}var fV,Zfe=function n(e){var t;if(e==="%AsyncFunction%")t=aL("async function () {}");else if(e==="%GeneratorFunction%")t=aL("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=aL("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=n("%AsyncGenerator%");o&&xi&&(t=xi(o.prototype))}return Uu[e]=t,t},dV={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},wg=Ax(),fx=AV(),Kfe=wg.call(Function.call,Array.prototype.concat),jfe=wg.call(Function.apply,Array.prototype.splice),pV=wg.call(Function.call,String.prototype.replace),dx=wg.call(Function.call,String.prototype.slice),Jfe=wg.call(Function.call,RegExp.prototype.exec),qfe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$fe=/\\(\\)?/g,ede=function(e){var t=dx(e,0,1),i=dx(e,-1);if(t==="%"&&i!=="%")throw new gf("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new gf("invalid intrinsic syntax, expected opening `%`");var o=[];return pV(e,qfe,function(a,l,c,u){o[o.length]=c?pV(u,$fe,"$1"):l||a}),o},tde=function(e,t){var i=e,o;if(fx(dV,i)&&(o=dV[i],i="%"+o[0]+"%"),fx(Uu,i)){var a=Uu[i];if(a===pf&&(a=Zfe(i)),typeof a>"u"&&!t)throw new mf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:a}}throw new gf("intrinsic "+e+" does not exist!")};gV.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new mf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new mf('"allowMissing" argument must be a boolean');if(Jfe(/^%?[^%]*%?$/,e)===null)throw new gf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=ede(e),o=i.length>0?i[0]:"",a=tde("%"+o+"%",t),l=a.name,c=a.value,u=!1,h=a.alias;h&&(o=h[0],jfe(i,Kfe([0,1],h)));for(var A=1,f=!0;A<i.length;A+=1){var d=i[A],p=dx(d,0,1),m=dx(d,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new gf("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(u=!0),o+="."+d,l="%"+o+"%",fx(Uu,l))c=Uu[l];else if(c!=null){if(!(d in c)){if(!t)throw new mf("base intrinsic for "+e+" exists, but the property is not available.");return}if(Fu&&A+1>=i.length){var b=Fu(c,d);f=!!b,f&&"get"in b&&!("originalValue"in b.get)?c=b.get:c=c[d]}else f=fx(c,d),c=c[d];f&&!u&&(Uu[l]=c)}}return c}});var CV=bt((fCe,mx)=>{"use strict";var cL=Ax(),yf=px(),wV=yf("%Function.prototype.apply%"),bV=yf("%Function.prototype.call%"),xV=yf("%Reflect.apply%",!0)||cL.call(bV,wV),yV=yf("%Object.getOwnPropertyDescriptor%",!0),Ou=yf("%Object.defineProperty%",!0),nde=yf("%Math.max%");if(Ou)try{Ou({},"a",{value:1})}catch{Ou=null}mx.exports=function(e){var t=xV(cL,bV,arguments);if(yV&&Ou){var i=yV(t,"length");i.configurable&&Ou(t,"length",{value:1+nde(0,e.length-(arguments.length-1))})}return t};var vV=function(){return xV(cL,wV,arguments)};Ou?Ou(mx.exports,"apply",{value:vV}):mx.exports.apply=vV});var MV=bt((dCe,IV)=>{"use strict";var SV=px(),EV=CV(),ide=EV(SV("String.prototype.indexOf"));IV.exports=function(e,t){var i=SV(e,!!t);return typeof i=="function"&&ide(e,".prototype.")>-1?EV(i):i}});var TV=bt(()=>{});var ZV=bt((gCe,YV)=>{var vL=typeof Map=="function"&&Map.prototype,uL=Object.getOwnPropertyDescriptor&&vL?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yx=vL&&uL&&typeof uL.get=="function"?uL.get:null,_V=vL&&Map.prototype.forEach,wL=typeof Set=="function"&&Set.prototype,hL=Object.getOwnPropertyDescriptor&&wL?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vx=wL&&hL&&typeof hL.get=="function"?hL.get:null,DV=wL&&Set.prototype.forEach,rde=typeof WeakMap=="function"&&WeakMap.prototype,xg=rde?WeakMap.prototype.has:null,sde=typeof WeakSet=="function"&&WeakSet.prototype,Cg=sde?WeakSet.prototype.has:null,ode=typeof WeakRef=="function"&&WeakRef.prototype,RV=ode?WeakRef.prototype.deref:null,ade=Boolean.prototype.valueOf,lde=Object.prototype.toString,cde=Function.prototype.toString,ude=String.prototype.match,bL=String.prototype.slice,sc=String.prototype.replace,hde=String.prototype.toUpperCase,LV=String.prototype.toLowerCase,GV=RegExp.prototype.test,BV=Array.prototype.concat,Wo=Array.prototype.join,Ade=Array.prototype.slice,kV=Math.floor,dL=typeof BigInt=="function"?BigInt.prototype.valueOf:null,AL=Object.getOwnPropertySymbols,pL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===vf||"symbol")?Symbol.toStringTag:null,zV=Object.prototype.propertyIsEnumerable,PV=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function NV(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||GV.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var i=n<0?-kV(-n):kV(n);if(i!==n){var o=String(i),a=bL.call(e,o.length+1);return sc.call(o,t,"$&_")+"."+sc.call(sc.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return sc.call(e,t,"$&_")}var mL=TV(),FV=mL.custom,UV=VV(FV)?FV:null;YV.exports=function n(e,t,i,o){var a=t||{};if(rc(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rc(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=rc(a,"customInspect")?a.customInspect:!0;if(typeof l!="boolean"&&l!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rc(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rc(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return XV(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return c?NV(e,u):u}if(typeof e=="bigint"){var h=String(e)+"n";return c?NV(e,h):h}var A=typeof a.depth>"u"?5:a.depth;if(typeof i>"u"&&(i=0),i>=A&&A>0&&typeof e=="object")return gL(e)?"[Array]":"[Object]";var f=Dde(a,i);if(typeof o>"u")o=[];else if(WV(o,e)>=0)return"[Circular]";function d(P,F,z){if(F&&(o=Ade.call(o),o.push(F)),z){var Q={depth:a.depth};return rc(a,"quoteStyle")&&(Q.quoteStyle=a.quoteStyle),n(P,Q,i+1,o)}return n(P,a,i+1,o)}if(typeof e=="function"&&!OV(e)){var p=bde(e),m=gx(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Wo.call(m,", ")+" }":"")}if(VV(e)){var b=vf?sc.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):pL.call(e);return typeof e=="object"&&!vf?bg(b):b}if(Mde(e)){for(var g="<"+LV.call(String(e.nodeName)),w=e.attributes||[],I=0;I<w.length;I++)g+=" "+w[I].name+"="+HV(fde(w[I].value),"double",a);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+LV.call(String(e.nodeName))+">",g}if(gL(e)){if(e.length===0)return"[]";var v=gx(e,d);return f&&!_de(v)?"["+yL(v,f)+"]":"[ "+Wo.call(v,", ")+" ]"}if(pde(e)){var C=gx(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!zV.call(e,"cause")?"{ ["+String(e)+"] "+Wo.call(BV.call("[cause]: "+d(e.cause),C),", ")+" }":C.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wo.call(C,", ")+" }"}if(typeof e=="object"&&l){if(UV&&typeof e[UV]=="function"&&mL)return mL(e,{depth:A-i});if(l!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(xde(e)){var E=[];return _V&&_V.call(e,function(P,F){E.push(d(F,e,!0)+" => "+d(P,e))}),QV("Map",yx.call(e),E,f)}if(Ede(e)){var S=[];return DV&&DV.call(e,function(P){S.push(d(P,e))}),QV("Set",vx.call(e),S,f)}if(Cde(e))return fL("WeakMap");if(Ide(e))return fL("WeakSet");if(Sde(e))return fL("WeakRef");if(gde(e))return bg(d(Number(e)));if(vde(e))return bg(d(dL.call(e)));if(yde(e))return bg(ade.call(e));if(mde(e))return bg(d(String(e)));if(!dde(e)&&!OV(e)){var M=gx(e,d),_=PV?PV(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",D=!_&&Vi&&Object(e)===e&&Vi in e?bL.call(oc(e),8,-1):T?"Object":"",R=_||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=R+(D||T?"["+Wo.call(BV.call([],D||[],T||[]),": ")+"] ":"");return M.length===0?B+"{}":f?B+"{"+yL(M,f)+"}":B+"{ "+Wo.call(M,", ")+" }"}return String(e)};function HV(n,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+n+i}function fde(n){return sc.call(String(n),/"/g,"&quot;")}function gL(n){return oc(n)==="[object Array]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function dde(n){return oc(n)==="[object Date]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function OV(n){return oc(n)==="[object RegExp]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function pde(n){return oc(n)==="[object Error]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function mde(n){return oc(n)==="[object String]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function gde(n){return oc(n)==="[object Number]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function yde(n){return oc(n)==="[object Boolean]"&&(!Vi||!(typeof n=="object"&&Vi in n))}function VV(n){if(vf)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!pL)return!1;try{return pL.call(n),!0}catch{}return!1}function vde(n){if(!n||typeof n!="object"||!dL)return!1;try{return dL.call(n),!0}catch{}return!1}var wde=Object.prototype.hasOwnProperty||function(n){return n in this};function rc(n,e){return wde.call(n,e)}function oc(n){return lde.call(n)}function bde(n){if(n.name)return n.name;var e=ude.call(cde.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function WV(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t;return-1}function xde(n){if(!yx||!n||typeof n!="object")return!1;try{yx.call(n);try{vx.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function Cde(n){if(!xg||!n||typeof n!="object")return!1;try{xg.call(n,xg);try{Cg.call(n,Cg)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function Sde(n){if(!RV||!n||typeof n!="object")return!1;try{return RV.call(n),!0}catch{}return!1}function Ede(n){if(!vx||!n||typeof n!="object")return!1;try{vx.call(n);try{yx.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function Ide(n){if(!Cg||!n||typeof n!="object")return!1;try{Cg.call(n,Cg);try{xg.call(n,xg)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function Mde(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function XV(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return XV(bL.call(n,0,e.maxStringLength),e)+i}var o=sc.call(sc.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Tde);return HV(o,"single",e)}function Tde(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+hde.call(e.toString(16))}function bg(n){return"Object("+n+")"}function fL(n){return n+" { ? }"}function QV(n,e,t,i){var o=i?yL(t,i):Wo.call(t,", ");return n+" ("+e+") {"+o+"}"}function _de(n){for(var e=0;e<n.length;e++)if(WV(n[e],`
`)>=0)return!1;return!0}function Dde(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=Wo.call(Array(n.indent+1)," ");else return null;return{base:t,prev:Wo.call(Array(e+1),t)}}function yL(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+Wo.call(n,","+t)+`
`+e.prev}function gx(n,e){var t=gL(n),i=[];if(t){i.length=n.length;for(var o=0;o<n.length;o++)i[o]=rc(n,o)?e(n[o],n):""}var a=typeof AL=="function"?AL(n):[],l;if(vf){l={};for(var c=0;c<a.length;c++)l["$"+a[c]]=a[c]}for(var u in n)rc(n,u)&&(t&&String(Number(u))===u&&u<n.length||vf&&l["$"+u]instanceof Symbol||(GV.call(/[^\w$]/,u)?i.push(e(u,n)+": "+e(n[u],n)):i.push(u+": "+e(n[u],n))));if(typeof AL=="function")for(var h=0;h<a.length;h++)zV.call(n,a[h])&&i.push("["+e(a[h])+"]: "+e(n[a[h]],n));return i}});var jV=bt((yCe,KV)=>{"use strict";var xL=px(),wf=MV(),Rde=ZV(),Lde=xL("%TypeError%"),wx=xL("%WeakMap%",!0),bx=xL("%Map%",!0),Bde=wf("WeakMap.prototype.get",!0),kde=wf("WeakMap.prototype.set",!0),Pde=wf("WeakMap.prototype.has",!0),Nde=wf("Map.prototype.get",!0),Fde=wf("Map.prototype.set",!0),Ude=wf("Map.prototype.has",!0),CL=function(n,e){for(var t=n,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=n.next,n.next=i,i},Ode=function(n,e){var t=CL(n,e);return t&&t.value},Qde=function(n,e,t){var i=CL(n,e);i?i.value=t:n.next={key:e,next:n.next,value:t}},Gde=function(n,e){return!!CL(n,e)};KV.exports=function(){var e,t,i,o={assert:function(a){if(!o.has(a))throw new Lde("Side channel does not contain "+Rde(a))},get:function(a){if(wx&&a&&(typeof a=="object"||typeof a=="function")){if(e)return Bde(e,a)}else if(bx){if(t)return Nde(t,a)}else if(i)return Ode(i,a)},has:function(a){if(wx&&a&&(typeof a=="object"||typeof a=="function")){if(e)return Pde(e,a)}else if(bx){if(t)return Ude(t,a)}else if(i)return Gde(i,a);return!1},set:function(a,l){wx&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new wx),kde(e,a,l)):bx?(t||(t=new bx),Fde(t,a,l)):(i||(i={key:{},next:null}),Qde(i,a,l))}};return o}});var xx=bt((vCe,JV)=>{"use strict";var zde=String.prototype.replace,Hde=/%20/g,SL={RFC1738:"RFC1738",RFC3986:"RFC3986"};JV.exports={default:SL.RFC3986,formatters:{RFC1738:function(n){return zde.call(n,Hde,"+")},RFC3986:function(n){return String(n)}},RFC1738:SL.RFC1738,RFC3986:SL.RFC3986}});var IL=bt((wCe,$V)=>{"use strict";var Vde=xx(),EL=Object.prototype.hasOwnProperty,Qu=Array.isArray,Xo=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),Wde=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(Qu(i)){for(var o=[],a=0;a<i.length;++a)typeof i[a]<"u"&&o.push(i[a]);t.obj[t.prop]=o}}},qV=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(i[o]=e[o]);return i},Xde=function n(e,t,i){if(!t)return e;if(typeof t!="object"){if(Qu(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!EL.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var o=e;return Qu(e)&&!Qu(t)&&(o=qV(e,i)),Qu(e)&&Qu(t)?(t.forEach(function(a,l){if(EL.call(e,l)){var c=e[l];c&&typeof c=="object"&&a&&typeof a=="object"?e[l]=n(c,a,i):e.push(a)}else e[l]=a}),e):Object.keys(t).reduce(function(a,l){var c=t[l];return EL.call(a,l)?a[l]=n(a[l],c,i):a[l]=c,a},o)},Yde=function(e,t){return Object.keys(t).reduce(function(i,o){return i[o]=t[o],i},e)},Zde=function(n,e,t){var i=n.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Kde=function(e,t,i,o,a){if(e.length===0)return e;var l=e;if(typeof e=="symbol"?l=Symbol.prototype.toString.call(e):typeof e!="string"&&(l=String(e)),i==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(A){return"%26%23"+parseInt(A.slice(2),16)+"%3B"});for(var c="",u=0;u<l.length;++u){var h=l.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===Vde.RFC1738&&(h===40||h===41)){c+=l.charAt(u);continue}if(h<128){c=c+Xo[h];continue}if(h<2048){c=c+(Xo[192|h>>6]+Xo[128|h&63]);continue}if(h<55296||h>=57344){c=c+(Xo[224|h>>12]+Xo[128|h>>6&63]+Xo[128|h&63]);continue}u+=1,h=65536+((h&1023)<<10|l.charCodeAt(u)&1023),c+=Xo[240|h>>18]+Xo[128|h>>12&63]+Xo[128|h>>6&63]+Xo[128|h&63]}return c},jde=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],o=0;o<t.length;++o)for(var a=t[o],l=a.obj[a.prop],c=Object.keys(l),u=0;u<c.length;++u){var h=c[u],A=l[h];typeof A=="object"&&A!==null&&i.indexOf(A)===-1&&(t.push({obj:l,prop:h}),i.push(A))}return Wde(t),e},Jde=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},qde=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},$de=function(e,t){return[].concat(e,t)},epe=function(e,t){if(Qu(e)){for(var i=[],o=0;o<e.length;o+=1)i.push(t(e[o]));return i}return t(e)};$V.exports={arrayToObject:qV,assign:Yde,combine:$de,compact:jde,decode:Zde,encode:Kde,isBuffer:qde,isRegExp:Jde,maybeMap:epe,merge:Xde}});var sW=bt((bCe,rW)=>{"use strict";var nW=jV(),Cx=IL(),Sg=xx(),tpe=Object.prototype.hasOwnProperty,eW={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Ga=Array.isArray,npe=Array.prototype.push,iW=function(n,e){npe.apply(n,Ga(e)?e:[e])},ipe=Date.prototype.toISOString,tW=Sg.default,Wi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Cx.encode,encodeValuesOnly:!1,format:tW,formatter:Sg.formatters[tW],indices:!1,serializeDate:function(e){return ipe.call(e)},skipNulls:!1,strictNullHandling:!1},rpe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ML={},spe=function n(e,t,i,o,a,l,c,u,h,A,f,d,p,m,b,g){for(var w=e,I=g,v=0,C=!1;(I=I.get(ML))!==void 0&&!C;){var E=I.get(e);if(v+=1,typeof E<"u"){if(E===v)throw new RangeError("Cyclic object value");C=!0}typeof I.get(ML)>"u"&&(v=0)}if(typeof u=="function"?w=u(t,w):w instanceof Date?w=f(w):i==="comma"&&Ga(w)&&(w=Cx.maybeMap(w,function(Q){return Q instanceof Date?f(Q):Q})),w===null){if(a)return c&&!m?c(t,Wi.encoder,b,"key",d):t;w=""}if(rpe(w)||Cx.isBuffer(w)){if(c){var S=m?t:c(t,Wi.encoder,b,"key",d);return[p(S)+"="+p(c(w,Wi.encoder,b,"value",d))]}return[p(t)+"="+p(String(w))]}var M=[];if(typeof w>"u")return M;var _;if(i==="comma"&&Ga(w))m&&c&&(w=Cx.maybeMap(w,c)),_=[{value:w.length>0?w.join(",")||null:void 0}];else if(Ga(u))_=u;else{var T=Object.keys(w);_=h?T.sort(h):T}for(var D=o&&Ga(w)&&w.length===1?t+"[]":t,R=0;R<_.length;++R){var B=_[R],P=typeof B=="object"&&typeof B.value<"u"?B.value:w[B];if(!(l&&P===null)){var F=Ga(w)?typeof i=="function"?i(D,B):D:D+(A?"."+B:"["+B+"]");g.set(e,v);var z=nW();z.set(ML,g),iW(M,n(P,F,i,o,a,l,i==="comma"&&m&&Ga(w)?null:c,u,h,A,f,d,p,m,b,z))}}return M},ope=function(e){if(!e)return Wi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Wi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Sg.default;if(typeof e.format<"u"){if(!tpe.call(Sg.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=Sg.formatters[i],a=Wi.filter;return(typeof e.filter=="function"||Ga(e.filter))&&(a=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Wi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Wi.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Wi.charsetSentinel,delimiter:typeof e.delimiter>"u"?Wi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Wi.encode,encoder:typeof e.encoder=="function"?e.encoder:Wi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Wi.encodeValuesOnly,filter:a,format:i,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Wi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Wi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Wi.strictNullHandling}};rW.exports=function(n,e){var t=n,i=ope(e),o,a;typeof i.filter=="function"?(a=i.filter,t=a("",t)):Ga(i.filter)&&(a=i.filter,o=a);var l=[];if(typeof t!="object"||t===null)return"";var c;e&&e.arrayFormat in eW?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var u=eW[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=u==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(t)),i.sort&&o.sort(i.sort);for(var A=nW(),f=0;f<o.length;++f){var d=o[f];i.skipNulls&&t[d]===null||iW(l,spe(t[d],d,u,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,A))}var p=l.join(i.delimiter),m=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""}});var lW=bt((xCe,aW)=>{"use strict";var bf=IL(),TL=Object.prototype.hasOwnProperty,ape=Array.isArray,Ci={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:bf.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},lpe=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},oW=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},cpe="utf8=%26%2310003%3B",upe="utf8=%E2%9C%93",hpe=function(e,t){var i={__proto__:null},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,l=o.split(t.delimiter,a),c=-1,u,h=t.charset;if(t.charsetSentinel)for(u=0;u<l.length;++u)l[u].indexOf("utf8=")===0&&(l[u]===upe?h="utf-8":l[u]===cpe&&(h="iso-8859-1"),c=u,u=l.length);for(u=0;u<l.length;++u)if(u!==c){var A=l[u],f=A.indexOf("]="),d=f===-1?A.indexOf("="):f+1,p,m;d===-1?(p=t.decoder(A,Ci.decoder,h,"key"),m=t.strictNullHandling?null:""):(p=t.decoder(A.slice(0,d),Ci.decoder,h,"key"),m=bf.maybeMap(oW(A.slice(d+1),t),function(b){return t.decoder(b,Ci.decoder,h,"value")})),m&&t.interpretNumericEntities&&h==="iso-8859-1"&&(m=lpe(m)),A.indexOf("[]=")>-1&&(m=ape(m)?[m]:m),TL.call(i,p)?i[p]=bf.combine(i[p],m):i[p]=m}return i},Ape=function(n,e,t,i){for(var o=i?e:oW(e,t),a=n.length-1;a>=0;--a){var l,c=n[a];if(c==="[]"&&t.parseArrays)l=[].concat(o);else{l=t.plainObjects?Object.create(null):{};var u=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,h=parseInt(u,10);!t.parseArrays&&u===""?l={0:o}:!isNaN(h)&&c!==u&&String(h)===u&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(l=[],l[h]=o):u!=="__proto__"&&(l[u]=o)}o=l}return o},fpe=function(e,t,i,o){if(e){var a=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,l=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,u=i.depth>0&&l.exec(a),h=u?a.slice(0,u.index):a,A=[];if(h){if(!i.plainObjects&&TL.call(Object.prototype,h)&&!i.allowPrototypes)return;A.push(h)}for(var f=0;i.depth>0&&(u=c.exec(a))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&TL.call(Object.prototype,u[1].slice(1,-1))&&!i.allowPrototypes)return;A.push(u[1])}return u&&A.push("["+a.slice(u.index)+"]"),Ape(A,t,i,o)}},dpe=function(e){if(!e)return Ci;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Ci.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Ci.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ci.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ci.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ci.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ci.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ci.comma,decoder:typeof e.decoder=="function"?e.decoder:Ci.decoder,delimiter:typeof e.delimiter=="string"||bf.isRegExp(e.delimiter)?e.delimiter:Ci.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ci.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ci.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ci.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ci.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ci.strictNullHandling}};aW.exports=function(n,e){var t=dpe(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?Object.create(null):{};for(var i=typeof n=="string"?hpe(n,t):n,o=t.plainObjects?Object.create(null):{},a=Object.keys(i),l=0;l<a.length;++l){var c=a[l],u=fpe(c,i[c],t,typeof n=="string");o=bf.merge(o,u,t)}return t.allowSparse===!0?o:bf.compact(o)}});var uW=bt((CCe,cW)=>{"use strict";var ppe=sW(),mpe=lW(),gpe=xx();cW.exports={formats:gpe,parse:mpe,stringify:ppe}});var LL=bt(Cf=>{"use strict";var ype=$9();function Is(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var vpe=/^([a-z0-9.+-]+:)/i,wpe=/:[0-9]*$/,bpe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,xpe=["<",">",'"',"`"," ","\r",`
`,"	"],Cpe=["{","}","|","\\","^","`"].concat(xpe),_L=["'"].concat(Cpe),hW=["%","/","?",";","#"].concat(_L),AW=["/","?","#"],Spe=255,fW=/^[+a-z0-9A-Z_-]{0,63}$/,Epe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ipe={javascript:!0,"javascript:":!0},DL={javascript:!0,"javascript:":!0},xf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},RL=uW();function Eg(n,e,t){if(n&&typeof n=="object"&&n instanceof Is)return n;var i=new Is;return i.parse(n,e,t),i}Is.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var i=n.indexOf("?"),o=i!==-1&&i<n.indexOf("#")?"?":"#",a=n.split(o),l=/\\/g;a[0]=a[0].replace(l,"/"),n=a.join(o);var c=n;if(c=c.trim(),!t&&n.split("#").length===1){var u=bpe.exec(c);if(u)return this.path=c,this.href=c,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=RL.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=vpe.exec(c);if(h){h=h[0];var A=h.toLowerCase();this.protocol=A,c=c.substr(h.length)}if(t||h||c.match(/^\/\/[^@/]+@[^@/]+/)){var f=c.substr(0,2)==="//";f&&!(h&&DL[h])&&(c=c.substr(2),this.slashes=!0)}if(!DL[h]&&(f||h&&!xf[h])){for(var d=-1,p=0;p<AW.length;p++){var m=c.indexOf(AW[p]);m!==-1&&(d===-1||m<d)&&(d=m)}var b,g;d===-1?g=c.lastIndexOf("@"):g=c.lastIndexOf("@",d),g!==-1&&(b=c.slice(0,g),c=c.slice(g+1),this.auth=decodeURIComponent(b)),d=-1;for(var p=0;p<hW.length;p++){var m=c.indexOf(hW[p]);m!==-1&&(d===-1||m<d)&&(d=m)}d===-1&&(d=c.length),this.host=c.slice(0,d),c=c.slice(d),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var I=this.hostname.split(/\./),p=0,v=I.length;p<v;p++){var C=I[p];if(C&&!C.match(fW)){for(var E="",S=0,M=C.length;S<M;S++)C.charCodeAt(S)>127?E+="x":E+=C[S];if(!E.match(fW)){var _=I.slice(0,p),T=I.slice(p+1),D=C.match(Epe);D&&(_.push(D[1]),T.unshift(D[2])),T.length&&(c="/"+T.join(".")+c),this.hostname=_.join(".");break}}}this.hostname.length>Spe?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=ype.toASCII(this.hostname));var R=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+R,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),c[0]!=="/"&&(c="/"+c))}if(!Ipe[A])for(var p=0,v=_L.length;p<v;p++){var P=_L[p];if(c.indexOf(P)!==-1){var F=encodeURIComponent(P);F===P&&(F=escape(P)),c=c.split(P).join(F)}}var z=c.indexOf("#");z!==-1&&(this.hash=c.substr(z),c=c.slice(0,z));var Q=c.indexOf("?");if(Q!==-1?(this.search=c.substr(Q),this.query=c.substr(Q+1),e&&(this.query=RL.parse(this.query)),c=c.slice(0,Q)):e&&(this.search="",this.query={}),c&&(this.pathname=c),xf[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",V=this.search||"";this.path=R+V}return this.href=this.format(),this};function Mpe(n){return typeof n=="string"&&(n=Eg(n)),n instanceof Is?n.format():Is.prototype.format.call(n)}Is.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",o=!1,a="";this.host?o=n+this.host:this.hostname&&(o=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(a=RL.stringify(this.query));var l=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||xf[e])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),l&&l.charAt(0)!=="?"&&(l="?"+l),t=t.replace(/[?#]/g,function(c){return encodeURIComponent(c)}),l=l.replace("#","%23"),e+o+t+l+i};function Tpe(n,e){return Eg(n,!1,!0).resolve(e)}Is.prototype.resolve=function(n){return this.resolveObject(Eg(n,!1,!0)).format()};function _pe(n,e){return n?Eg(n,!1,!0).resolveObject(e):e}Is.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new Is;e.parse(n,!1,!0),n=e}for(var t=new Is,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];t[a]=this[a]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var l=Object.keys(n),c=0;c<l.length;c++){var u=l[c];u!=="protocol"&&(t[u]=n[u])}return xf[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!xf[n.protocol]){for(var h=Object.keys(n),A=0;A<h.length;A++){var f=h[A];t[f]=n[f]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!DL[n.protocol]){for(var v=(n.pathname||"").split("/");v.length&&!(n.host=v.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),t.pathname=v.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var d=t.pathname||"",p=t.search||"";t.path=d+p}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var m=t.pathname&&t.pathname.charAt(0)==="/",b=n.host||n.pathname&&n.pathname.charAt(0)==="/",g=b||m||t.host&&n.pathname,w=g,I=t.pathname&&t.pathname.split("/")||[],v=n.pathname&&n.pathname.split("/")||[],C=t.protocol&&!xf[t.protocol];if(C&&(t.hostname="",t.port=null,t.host&&(I[0]===""?I[0]=t.host:I.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(v[0]===""?v[0]=n.host:v.unshift(n.host)),n.host=null),g=g&&(v[0]===""||I[0]==="")),b)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,I=v;else if(v.length)I||(I=[]),I.pop(),I=I.concat(v),t.search=n.search,t.query=n.query;else if(n.search!=null){if(C){t.host=I.shift(),t.hostname=t.host;var E=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;E&&(t.auth=E.shift(),t.hostname=E.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!I.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=I.slice(-1)[0],M=(t.host||n.host||I.length>1)&&(S==="."||S==="..")||S==="",_=0,T=I.length;T>=0;T--)S=I[T],S==="."?I.splice(T,1):S===".."?(I.splice(T,1),_++):_&&(I.splice(T,1),_--);if(!g&&!w)for(;_--;_)I.unshift("..");g&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),M&&I.join("/").substr(-1)!=="/"&&I.push("");var D=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(C){t.hostname=D?"":I.length?I.shift():"",t.host=t.hostname;var E=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;E&&(t.auth=E.shift(),t.hostname=E.shift(),t.host=t.hostname)}return g=g||t.host&&I.length,g&&!D&&I.unshift(""),I.length>0?t.pathname=I.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};Is.prototype.parseHost=function(){var n=this.host,e=wpe.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};Cf.parse=Eg;Cf.resolve=Tpe;Cf.resolveObject=_pe;Cf.format=Mpe;Cf.Url=Is});var pW=bt((dW,Sx)=>{(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof Sx=="object"&&Sx.exports?Sx.exports=e():n.xmlserializer=e()})(dW,function(){var n=function(d){return d.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},e=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i=function(d){var p=d.value;return" "+d.name+'="'+e(p)+'"'},o=function(d){var p=d.tagName;return d.namespaceURI==="http://www.w3.org/1999/xhtml"&&(p=p.toLowerCase()),p},a=function(d,p){var m=Array.prototype.map.call(d.attributes||d.attrs,function(b){return b.name}).indexOf("xmlns")>=0;return!m&&(p||d.namespaceURI!==d.parentNode.namespaceURI)?' xmlns="'+d.namespaceURI+'"':""},l=function(d){return Array.prototype.map.call(d.childNodes,function(p){return f(p)}).join("")},c=function(d,p){var m="<"+o(d);return m+=a(d,p),Array.prototype.forEach.call(d.attributes||d.attrs,function(b){m+=i(b)}),d.childNodes.length>0?(m+=">",m+=l(d),m+="</"+o(d)+">"):m+="/>",m},u=function(d){var p=d.nodeValue||d.value||"";return t(p)},h=function(d){return"<!--"+d.data.replace(/-/g,"&#45;")+"-->"},A=function(d){return"<![CDATA["+d.nodeValue+"]]>"},f=function(d,p){var m=p&&p.rootNode;if(d.nodeName==="#document"||d.nodeName==="#document-fragment")return l(d);if(d.tagName)return c(d,m);if(d.nodeName==="#text")return u(d);if(d.nodeName==="#comment")return h(d);if(d.nodeName==="#cdata-section")return A(d)};return{serializeToString:function(d){return n(f(d,{rootNode:!0}))}}})});var yW=bt(gW=>{"use strict";var Dpe=function(n){var e=new XMLSerializer;return Array.prototype.map.call(n.childNodes,function(t){return e.serializeToString(t)}).join("")},Rpe=function(n){if(n.documentElement.tagName==="parsererror"&&n.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml")return n.documentElement;if((n.documentElement.tagName==="xml"||n.documentElement.tagName==="html")&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0];if(n.documentElement.tagName==="html"&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="body"&&n.documentElement.childNodes[0].childNodes&&n.documentElement.childNodes[0].childNodes.length&&n.documentElement.childNodes[0].childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0].childNodes[0]},mW=[new RegExp(`^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)
?</div>`),new RegExp(`^(.+)
`)],Lpe=function(n){var e=Dpe(n),t,i;for(t=0;t<mW.length;t++)if(i=mW[t].exec(e),i)return i[1]},Bpe=function(n){var e;if(n===null)throw new Error("Parse error");var t=Rpe(n);if(t!==void 0)throw e=Lpe(t)||"Parse error",new Error(e)};gW.failOnParseError=function(n){return Bpe(n),n}});var Ig=bt(ir=>{"use strict";var kpe=LL();ir.getDocumentBaseUrl=function(n){return n.baseURI!=="about:blank"?n.baseURI:null};ir.clone=function(n){var e={},t;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e};ir.cloneArray=function(n){return Array.prototype.slice.apply(n,[0])};ir.joinUrl=function(n,e){return n?kpe.resolve(n,e):e};ir.isDataUri=function(n){return/^data:/.test(n)};ir.collectAndReportErrors=function(n){var e=[];return Promise.all(n.map(function(t){return t.catch(function(i){e.push(i)})})).then(function(){return e})};var BL=null,Ppe=function(n,e){return e===!1||e==="none"||e==="repeated"?((BL===null||e!=="repeated")&&(BL=Date.now()),n+"?_="+BL):n};ir.ajax=function(n,e){return new Promise(function(t,i){var o=new window.XMLHttpRequest,a=ir.joinUrl(e.baseUrl,n),l,c=function(){i({msg:"Unable to load url",url:a})};l=Ppe(a,e.cache),o.addEventListener("load",function(){o.status===200||o.status===0?t(o.response):c()},!1),o.addEventListener("error",c,!1);try{o.open("GET",l,!0),o.overrideMimeType(e.mimeType),o.send(null)}catch{c()}})};ir.binaryAjax=function(n,e){var t=ir.clone(e);return t.mimeType="text/plain; charset=x-user-defined",ir.ajax(n,t).then(function(i){for(var o="",a=0;a<i.length;a++)o+=String.fromCharCode(i.charCodeAt(a)&255);return o})};var Npe=function(n){var e=function(t,i){return t.substring(0,i.length)===i};return e(n,"<?xml")||e(n,"<svg")?"image/svg+xml":"image/png"};ir.getDataURIForImageURL=function(n,e){return ir.binaryAjax(n,e).then(function(t){var i=btoa(t),o=Npe(t);return"data:"+o+";base64,"+i})};var kL=[],Fpe=function(n){return kL.indexOf(n)<0&&kL.push(n),kL.indexOf(n)};ir.memoize=function(n,e,t){if(typeof t!="object")throw new Error("cacheBucket is not an object");return function(){var i=Array.prototype.slice.call(arguments),o=e(i),a=Fpe(n),l;return t[a]&&t[a][o]?t[a][o]:(l=n.apply(null,i),t[a]=t[a]||{},t[a][o]=l,l)}}});var bW=bt(wW=>{"use strict";var Mg=Ig(),Upe=function(n,e){var t=null;n.hasAttribute("src")?t=n.getAttribute("src"):n.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=n.getAttributeNS("http://www.w3.org/1999/xlink","href"):n.hasAttribute("href")&&(t=n.getAttribute("href"));var i=Mg.getDocumentBaseUrl(n.ownerDocument),o=Mg.clone(e);return!o.baseUrl&&i&&(o.baseUrl=i),Mg.getDataURIForImageURL(t,o).then(function(a){return a},function(a){throw{resourceType:"image",url:a.url,msg:"Unable to load image "+a.url}})},Ope=function(n){return n.filter(function(e){var t=null;return e.hasAttribute("src")?t=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(t=e.getAttribute("href")),t!==null&&!Mg.isDataUri(t)})},Qpe=function(n){return Array.prototype.filter.call(n,function(e){return e.type==="image"})},vW=function(n){return Array.prototype.slice.call(n)};wW.inline=function(n,e){var t=vW(n.getElementsByTagName("img")),i=vW(n.getElementsByTagName("image")),o=Qpe(n.getElementsByTagName("input"));t=t.concat(i),t=t.concat(o);var a=Ope(t);return Mg.collectAndReportErrors(a.map(function(l){return Upe(l,e).then(function(c){l.attributes.src?l.attributes.src.value=c:l.attributes["xlink:href"]?l.attributes["xlink:href"].value=c:l.attributes.href&&(l.attributes.href.value=c)})}))}});var CW=bt(xW=>{"use strict";var Ex=Ig(),Gpe=function(n,e){var t=n.attributes.src.value,i=Ex.getDocumentBaseUrl(n.ownerDocument),o=Ex.clone(e);return!o.baseUrl&&i&&(o.baseUrl=i),Ex.ajax(t,o).catch(function(a){throw{resourceType:"script",url:a.url,msg:"Unable to load script "+a.url}})},zpe=function(n){return n.replace(/<\//g,"<\\/")},Hpe=function(n,e){n.attributes.removeNamedItem("src"),n.textContent=zpe(e)},Vpe=function(n){var e=n.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})};xW.inline=function(n,e){var t=Vpe(n);return Ex.collectAndReportErrors(t.map(function(i){return Gpe(i,e).then(function(o){Hpe(i,o)})}))}});var Ix=bt(ac=>{"use strict";ac.unquoteString=function(n){var e=/^"(.*)"$/,t=/^'(.*)'$/;return e.test(n)?n.replace(e,"$1"):t.test(n)?n.replace(t,"$1"):n};ac.rulesForCssText=function(n){var e=document.implementation.createHTMLDocument(""),t=document.createElement("style"),i;return t.textContent=n,e.body.appendChild(t),i=t.sheet.cssRules,Array.prototype.slice.call(i)};ac.cssRulesToText=function(n){return n.reduce(function(e,t){return e+t.cssText},"")};ac.exchangeRule=function(n,e,t){var i=n.indexOf(e);n[i]=ac.rulesForCssText(t)[0]};ac.changeFontFaceRuleSrc=function(n,e,t){var i="@font-face { font-family: "+e.style.getPropertyValue("font-family")+"; ";e.style.getPropertyValue("font-style")&&(i+="font-style: "+e.style.getPropertyValue("font-style")+"; "),e.style.getPropertyValue("font-weight")&&(i+="font-weight: "+e.style.getPropertyValue("font-weight")+"; "),e.style.getPropertyValue("unicode-range")&&(i+="unicode-range: "+e.style.getPropertyValue("unicode-range")+"; "),i+="src: "+t+"}",ac.exchangeRule(n,e,i)}});var SW=bt(Tg=>{"use strict";var Wpe=Ix(),Xpe=function(n){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return n.replace(e,"$1")};Tg.extractCssUrl=function(n){var e=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/,t;if(!e.test(n))throw new Error("Invalid url");return t=e.exec(n)[1],Wpe.unquoteString(Xpe(t))};var Ype=function(n){var e=`\\s*(?:"[^"]*"|'[^']*'|[^\\(]+)\\s*`,t="(url\\("+e+"\\)|[^,\\s]+)",i="(?:\\s*"+t+")+",o="^\\s*("+i+")(?:\\s*,\\s*("+i+"))*\\s*$",a=new RegExp(i,"g"),l,c=[],u=function(h){var A=new RegExp(t,"g"),f=[],d;for(d=A.exec(h);d;)f.push(d[1]),d=A.exec(h);return f};if(n.match(new RegExp(o))){for(l=a.exec(n);l;)c.push(u(l[0])),l=a.exec(n);return c}return[]},Zpe=function(n){var e,t;for(e=0;e<n.length;e++)try{return t=Tg.extractCssUrl(n[e]),{url:t,idx:e}}catch{}};Tg.parse=function(n){var e=Ype(n);return e.map(function(t){var i=Zpe(t);return i?{preUrl:t.slice(0,i.idx),url:i.url,postUrl:t.slice(i.idx+1)}:{preUrl:t}})};Tg.serialize=function(n){var e=n.map(function(t){var i=[].concat(t.preUrl);return t.url&&i.push('url("'+t.url+'")'),t.postUrl&&(i=i.concat(t.postUrl)),i.join(" ")});return e.join(", ")}});var IW=bt((EW,PL)=>{(function(n){if(typeof EW=="object"&&typeof PL<"u")PL.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.cssFontFaceSrc=n()}})(function(){var n,e,t;return function i(o,a,l){function c(A,f){if(!a[A]){if(!o[A]){var d=typeof Yi=="function"&&Yi;if(!f&&d)return d(A,!0);if(u)return u(A,!0);var p=new Error("Cannot find module '"+A+"'");throw p.code="MODULE_NOT_FOUND",p}var m=a[A]={exports:{}};o[A][0].call(m.exports,function(b){var g=o[A][1][b];return c(g||b)},m,m.exports,i,o,a,l)}return a[A].exports}for(var u=typeof Yi=="function"&&Yi,h=0;h<l.length;h++)c(l[h]);return c}({1:[function(i,o,a){"use strict";function l(h,A){function f(){this.constructor=h}f.prototype=A.prototype,h.prototype=new f}function c(h,A,f,d){this.message=h,this.expected=A,this.found=f,this.location=d,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c)}l(c,Error),c.buildMessage=function(h,A){var f={literal:function(I){return'"'+p(I.text)+'"'},class:function(I){var v="",C;for(C=0;C<I.parts.length;C++)v+=I.parts[C]instanceof Array?m(I.parts[C][0])+"-"+m(I.parts[C][1]):m(I.parts[C]);return"["+(I.inverted?"^":"")+v+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},other:function(I){return I.description}};function d(I){return I.charCodeAt(0).toString(16).toUpperCase()}function p(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+d(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+d(v)})}function m(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+d(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+d(v)})}function b(I){return f[I.type](I)}function g(I){var v=new Array(I.length),C,E;for(C=0;C<I.length;C++)v[C]=b(I[C]);if(v.sort(),v.length>0){for(C=1,E=1;C<v.length;C++)v[C-1]!==v[C]&&(v[E]=v[C],E++);v.length=E}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function w(I){return I?'"'+p(I)+'"':"end of input"}return"Expected "+g(h)+" but "+w(A)+" found."};function u(h,A){A=A!==void 0?A:{};var f={},d={start:We},p=We,m="",b=function(){return[]},g=",",w=K(",",!1),I=function(Z,L){return[Z].concat(L)},v=function(Z){return[Z]},C=function(Z,L){return{url:Z,format:L}},E=function(Z){return{url:Z}},S="url(",M=K("url(",!1),_=")",T=K(")",!1),D=function(Z){return Z},R="format(",B=K("format(",!1),P="local(",F=K("local(",!1),z=function(Z){return{local:Z}},Q=/^[^)]/,V=be([")"],!0,!1),G=function(Z){return Ce.extractValue(Z.join(""))},O=/^[ \t\r\n\f]/,W=be([" ","	","\r",`
`,"\f"],!1,!1),k=0,Y=0,te=[{line:1,column:1}],ie=0,re=[],se=0,oe;if("startRule"in A){if(!(A.startRule in d))throw new Error(`Can't start parsing from rule "`+A.startRule+'".');p=d[A.startRule]}function le(){return h.substring(Y,k)}function xe(){return ye(Y,k)}function _e(Z,L){throw L=L!==void 0?L:ye(Y,k),Ee([de(Z)],h.substring(Y,k),L)}function pe(Z,L){throw L=L!==void 0?L:ye(Y,k),Pe(Z,L)}function K(Z,L){return{type:"literal",text:Z,ignoreCase:L}}function be(Z,L,N){return{type:"class",parts:Z,inverted:L,ignoreCase:N}}function me(){return{type:"any"}}function fe(){return{type:"end"}}function de(Z){return{type:"other",description:Z}}function Fe(Z){var L=te[Z],N;if(L)return L;for(N=Z-1;!te[N];)N--;for(L=te[N],L={line:L.line,column:L.column};N<Z;)h.charCodeAt(N)===10?(L.line++,L.column=1):L.column++,N++;return te[Z]=L,L}function ye(Z,L){var N=Fe(Z),X=Fe(L);return{start:{offset:Z,line:N.line,column:N.column},end:{offset:L,line:X.line,column:X.column}}}function Se(Z){k<ie||(k>ie&&(ie=k,re=[]),re.push(Z))}function Pe(Z,L){return new c(Z,null,null,L)}function Ee(Z,L,N){return new c(c.buildMessage(Z,L),Z,L,N)}function We(){var Z,L;return Z=J(),Z===f&&(Z=k,L=m,L!==f&&(Y=Z,L=b()),Z=L),Z}function J(){var Z,L,N,X,q,ne;if(Z=k,L=H(),L!==f){for(N=[],X=Ne();X!==f;)N.push(X),X=Ne();if(N!==f)if(h.charCodeAt(k)===44?(X=g,k++):(X=f,se===0&&Se(w)),X!==f){for(q=[],ne=Ne();ne!==f;)q.push(ne),ne=Ne();q!==f?(ne=J(),ne!==f?(Y=Z,L=I(L,ne),Z=L):(k=Z,Z=f)):(k=Z,Z=f)}else k=Z,Z=f;else k=Z,Z=f}else k=Z,Z=f;return Z===f&&(Z=k,L=H(),L!==f&&(Y=Z,L=v(L)),Z=L),Z}function H(){var Z;return Z=ue(),Z===f&&(Z=Ie()),Z}function ue(){var Z,L,N,X;if(Z=k,L=Re(),L!==f){if(N=[],X=Ne(),X!==f)for(;X!==f;)N.push(X),X=Ne();else N=f;N!==f?(X=Be(),X!==f?(Y=Z,L=C(L,X),Z=L):(k=Z,Z=f)):(k=Z,Z=f)}else k=Z,Z=f;return Z===f&&(Z=k,L=Re(),L!==f&&(Y=Z,L=E(L)),Z=L),Z}function Re(){var Z,L,N,X;return Z=k,h.substr(k,4)===S?(L=S,k+=4):(L=f,se===0&&Se(M)),L!==f?(N=Ue(),N!==f?(h.charCodeAt(k)===41?(X=_,k++):(X=f,se===0&&Se(T)),X!==f?(Y=Z,L=D(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Be(){var Z,L,N,X;return Z=k,h.substr(k,7)===R?(L=R,k+=7):(L=f,se===0&&Se(B)),L!==f?(N=Ue(),N!==f?(h.charCodeAt(k)===41?(X=_,k++):(X=f,se===0&&Se(T)),X!==f?(Y=Z,L=D(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Ie(){var Z,L,N,X;return Z=k,h.substr(k,6)===P?(L=P,k+=6):(L=f,se===0&&Se(F)),L!==f?(N=Ue(),N!==f?(h.charCodeAt(k)===41?(X=_,k++):(X=f,se===0&&Se(T)),X!==f?(Y=Z,L=z(N),Z=L):(k=Z,Z=f)):(k=Z,Z=f)):(k=Z,Z=f),Z}function Ue(){var Z,L,N;if(Z=k,L=[],Q.test(h.charAt(k))?(N=h.charAt(k),k++):(N=f,se===0&&Se(V)),N!==f)for(;N!==f;)L.push(N),Q.test(h.charAt(k))?(N=h.charAt(k),k++):(N=f,se===0&&Se(V));else L=f;return L!==f&&(Y=Z,L=G(L)),Z=L,Z}function Ne(){var Z;return O.test(h.charAt(k))?(Z=h.charAt(k),k++):(Z=f,se===0&&Se(W)),Z}var Ce=i("../util");if(oe=p(),oe!==f&&k===h.length)return oe;throw oe!==f&&k<h.length&&Se(fe()),Ee(re,ie<h.length?h.charAt(ie):null,ie<h.length?ye(ie,ie+1):ye(ie,ie))}o.exports={SyntaxError:c,parse:u}},{"../util":3}],2:[function(i,o,a){var l=i("./grammar");a.SyntaxError=function(c,u){this.message=c,this.offset=u},a.parse=function(c){try{return l.parse(c)}catch(u){throw new a.SyntaxError(u.message,u.offset)}},a.serialize=function(c){return c.map(function(u){var h;return u.url?(h='url("'+u.url+'")',u.format&&(h+=' format("'+u.format+'")')):h='local("'+u.local+'")',h}).join(", ")}},{"./grammar":1}],3:[function(i,o,a){var l=function(u){var h=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return u.replace(h,"$1")},c=function(u){var h=/^"(.*)"$/,A=/^'(.*)'$/;return h.test(u)?u.replace(h,"$1"):A.test(u)?u.replace(A,"$1"):u};a.extractValue=function(u){return c(l(u))}},{}]},{},[2])(2)})});var PW=bt(Sf=>{"use strict";var co=Ig(),_g=Ix(),Mx=SW(),Tx=IW(),TW=function(n,e,t){n.style.setProperty(e,t,n.style.getPropertyPriority(e))},_W=function(n){return n.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})},DW=function(n){var e=[];return n.forEach(function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})}),e},RW=function(n){return n.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})},LW=function(n){return n.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})},BW=function(n){var e=[];return n.forEach(function(t,i){t.url&&!co.isDataUri(t.url)&&e.push(i)}),e},kW=function(n){var e=[];return n.forEach(function(t,i){t.url&&!co.isDataUri(t.url)&&e.push(i)}),e};Sf.adjustPathsOfCssResources=function(n,e){var t=_W(e),i=DW(t),o=!1;return i.forEach(function(a){var l=Mx.parse(a.value),c=BW(l),u;c.length>0&&(c.forEach(function(h){var A=l[h].url,f=co.joinUrl(n,A);l[h].url=f}),u=Mx.serialize(l),TW(a.rule,a.property,u),o=!0)}),RW(e).forEach(function(a){var l=a.style.getPropertyValue("src"),c,u;try{c=Tx.parse(l)}catch{return}u=kW(c),u.length>0&&(u.forEach(function(h){var A=c[h].url,f=co.joinUrl(n,A);c[h].url=f}),_g.changeFontFaceRuleSrc(e,a,Tx.serialize(c)),o=!0)}),LW(e).forEach(function(a){var l=a.href,c=co.joinUrl(n,l);_g.exchangeRule(e,a,"@import url("+c+");"),o=!0}),o};var MW=function(n,e,t){var i=n.indexOf(e);n.splice(i,1),t.forEach(function(o,a){n.splice(i+a,0,o)})},Kpe=function(n,e,t,i){var o=e.href,a;return o=_g.unquoteString(o),a=co.joinUrl(i.baseUrl,o),t.indexOf(a)>=0?(MW(n,e,[]),Promise.resolve([])):(t.push(a),co.ajax(o,i).then(function(l){var c=_g.rulesForCssText(l);return Sf.loadCSSImportsForRules(c,t,i).then(function(u){return Sf.adjustPathsOfCssResources(o,c),MW(n,e,c),u.errors})},function(l){throw{resourceType:"stylesheet",url:l.url,msg:"Unable to load stylesheet "+l.url}}))};Sf.loadCSSImportsForRules=function(n,e,t){var i=LW(n),o=[],a=!1;return Promise.all(i.map(function(l){return Kpe(n,l,e,t).then(function(c){o=o.concat(c),a=!0},function(c){o.push(c)})})).then(function(){return{hasChanges:a,errors:o}})};var jpe=function(n,e){var t=Mx.parse(n),i=BW(t),o=!1;return co.collectAndReportErrors(i.map(function(a){var l=t[a].url;return co.getDataURIForImageURL(l,e).then(function(c){t[a].url=c,o=!0},function(c){throw{resourceType:"backgroundImage",url:c.url,msg:"Unable to load background-image "+c.url}})})).then(function(a){return{backgroundValue:Mx.serialize(t),hasChanges:o,errors:a}})},Jpe=function(n,e){var t=_W(n),i=DW(t),o=[],a=!1;return Promise.all(i.map(function(l){return jpe(l.value,e).then(function(c){c.hasChanges&&(TW(l.rule,l.property,c.backgroundValue),a=!0),o=o.concat(c.errors)})})).then(function(){return{hasChanges:a,errors:o}})},qpe=function(n,e){var t=!1,i,o;try{i=Tx.parse(n)}catch{i=[]}return o=kW(i),co.collectAndReportErrors(o.map(function(a){var l=i[a],c=l.format||"woff";return co.binaryAjax(l.url,e).then(function(u){var h=btoa(u);l.url="data:font/"+c+";base64,"+h,t=!0},function(u){throw{resourceType:"fontFace",url:u.url,msg:"Unable to load font-face "+u.url}})})).then(function(a){return{srcDeclarationValue:Tx.serialize(i),hasChanges:t,errors:a}})},$pe=function(n,e){var t=RW(n),i=[],o=!1;return Promise.all(t.map(function(a){var l=a.style.getPropertyValue("src");return qpe(l,e).then(function(c){c.hasChanges&&(_g.changeFontFaceRuleSrc(n,a,c.srcDeclarationValue),o=!0),i=i.concat(c.errors)})})).then(function(){return{hasChanges:o,errors:i}})};Sf.loadAndInlineCSSResourcesForRules=function(n,e){var t=!1,i=[];return Promise.all([Jpe,$pe].map(function(o){return o(n,e).then(function(a){t=t||a.hasChanges,i=i.concat(a.errors)})})).then(function(){return{hasChanges:t,errors:i}})}});var FW=bt(Yo=>{"use strict";var za=Ig(),eme=bW(),tme=CW(),Dg=PW(),_x=Ix(),nme=function(n){return za.joinUrl(n,".")},ime=function(n){var e=n.map(function(t,i){return i===n.length-1&&(t={baseUrl:nme(t.baseUrl)}),JSON.stringify(t)});return e},NW=function(n,e){return e.cache!==!1&&e.cache!=="none"&&e.cacheBucket?za.memoize(n,ime,e.cacheBucket):n},rme=function(n,e,t){var i=_x.rulesForCssText(n);return Dg.loadCSSImportsForRules(i,e,t).then(function(o){return Dg.loadAndInlineCSSResourcesForRules(i,t).then(function(a){var l=o.errors.concat(a.errors),c=o.hasChanges||a.hasChanges;return c&&(n=_x.cssRulesToText(i)),{hasChanges:c,content:n,errors:l}})})},sme=function(n,e,t){var i=n.textContent,o=NW(rme,e);return o(i,t,e).then(function(a){return a.hasChanges&&(n.childNodes[0].nodeValue=a.content),za.cloneArray(a.errors)})},ome=function(n){var e=n.getElementsByTagName("style");return Array.prototype.filter.call(e,function(t){return!t.attributes.type||t.attributes.type.value==="text/css"})};Yo.loadAndInlineStyles=function(n,e){var t=ome(n),i=[],o=[],a;return a=za.clone(e),a.baseUrl=a.baseUrl||za.getDocumentBaseUrl(n),Promise.all(t.map(function(l){return sme(l,a,o).then(function(c){i=i.concat(c)})})).then(function(){return i})};var ame=function(n,e){var t=n.parentNode,i;e=e.trim(),e&&(i=n.ownerDocument.createElement("style"),i.type="text/css",i.appendChild(n.ownerDocument.createTextNode(e)),t.insertBefore(i,n)),t.removeChild(n)},lme=function(n,e){return za.ajax(n,e).then(function(t){var i=_x.rulesForCssText(t);return{content:t,cssRules:i}}).then(function(t){var i=Dg.adjustPathsOfCssResources(n,t.cssRules);return{content:t.content,cssRules:t.cssRules,hasChanges:i}}).then(function(t){return Dg.loadCSSImportsForRules(t.cssRules,[],e).then(function(i){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||i.hasChanges,errors:i.errors}})}).then(function(t){return Dg.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(i){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||i.hasChanges,errors:t.errors.concat(i.errors)}})}).then(function(t){var i=t.content;return t.hasChanges&&(i=_x.cssRulesToText(t.cssRules)),{content:i,errors:t.errors}})},cme=function(n,e){var t=n.attributes.href.value,i=za.getDocumentBaseUrl(n.ownerDocument),o=za.clone(e);!o.baseUrl&&i&&(o.baseUrl=i);var a=NW(lme,e);return a(t,o).then(function(l){return{content:l.content,errors:za.cloneArray(l.errors)}})},ume=function(n){var e=n.getElementsByTagName("link");return Array.prototype.filter.call(e,function(t){return t.attributes.rel&&t.attributes.rel.value==="stylesheet"&&(!t.attributes.type||t.attributes.type.value==="text/css")})};Yo.loadAndInlineCssLinks=function(n,e){var t=ume(n),i=[];return Promise.all(t.map(function(o){return cme(o,e).then(function(a){ame(o,a.content+`
`),i=i.concat(a.errors)},function(a){i.push({resourceType:"stylesheet",url:a.url,msg:"Unable to load stylesheet "+a.url})})})).then(function(){return i})};Yo.loadAndInlineImages=eme.inline;Yo.loadAndInlineScript=tme.inline;Yo.inlineReferences=function(n,e){var t=[],i=[Yo.loadAndInlineImages,Yo.loadAndInlineStyles,Yo.loadAndInlineCssLinks];return e.inlineScripts!==!1&&i.push(Yo.loadAndInlineScript),Promise.all(i.map(function(o){return o(n,e).then(function(a){t=t.concat(a)})})).then(function(){return t})}});var OW=bt((UW,Dx)=>{(function(n,e){n===void 0&&window!==void 0&&(n=window),typeof define=="function"&&define.amd?define(["url","xmlserializer","sane-domparser-error","inlineresources"],function(t,i,o,a){return n.rasterizeHTML=e(t,i,o,a)}):typeof Dx=="object"&&Dx.exports?Dx.exports=e(LL(),pW(),yW(),FW()):n.rasterizeHTML=e(n.url,n.xmlserializer,n.sanedomparsererror,n.inlineresources)})(UW,function(n,e,t,i){var o=function(p){"use strict";var m={},b=[];m.joinUrl=function(I,v){return I?p.resolve(I,v):v},m.getConstantUniqueIdFor=function(I){return b.indexOf(I)<0&&b.push(I),b.indexOf(I)},m.clone=function(I){var v={},C;for(C in I)I.hasOwnProperty(C)&&(v[C]=I[C]);return v};var g=function(I){return typeof I=="object"&&I!==null},w=function(I){return g(I)&&Object.prototype.toString.apply(I).match(/\[object (Canvas|HTMLCanvasElement)\]/i)};return m.parseOptionalParameters=function(I){var v={canvas:null,options:{}};return I[0]==null||w(I[0])?(v.canvas=I[0]||null,v.options=m.clone(I[1])):v.options=m.clone(I[0]),v},m}(n),a=function(p){"use strict";var m={},b=function(g,w,I){var v=g[w];return g[w]=function(){var C=Array.prototype.slice.call(arguments);return I.apply(this,[C,v])},v};return m.baseUrlRespectingXhr=function(g,w){var I=function(){var v=new g;return b(v,"open",function(C,E){var S=C.shift(),M=C.shift(),_=p.joinUrl(w,M);return E.apply(this,[S,_].concat(C))}),v};return I},m.finishNotifyingXhr=function(g){var w=0,I=0,v=!1,C,E=new Promise(function(M){C=function(){var _=w-I;_<=0&&v&&M({totalCount:w})}}),S=function(){var M=new g;return b(M,"send",function(_,T){return w+=1,T.apply(this,arguments)}),M.addEventListener("load",function(){I+=1,C()}),M};return S.waitForRequestsToFinish=function(){return v=!0,C(),E},S},m}(o),l=function(){"use strict";var p={},m=function(S){return Array.prototype.slice.call(S)};p.addClassName=function(S,M){S.className+=" "+M},p.addClassNameRecursively=function(S,M){p.addClassName(S,M),S.parentNode!==S.ownerDocument&&p.addClassNameRecursively(S.parentNode,M)};var b=function(S,M){var _=S.parentStyleSheet,T=m(_.cssRules).indexOf(S);_.insertRule(M,T+1),_.deleteRule(T)},g=function(S,M){var _=S.cssText.replace(/^[^\{]+/,""),T=M+" "+_;b(S,T)},w=function(S){return m(S).reduce(function(M,_){return M+_.cssText},"")},I=function(S){S.textContent=w(S.sheet.cssRules)},v=function(S){var M=document.implementation.createHTMLDocument(""),_=document.createElement("style");_.textContent=S.textContent,M.body.appendChild(_),S.sheet=_.sheet},C=function(S){return"((?:^|[^.#:\\w])|(?=\\W))("+S.join("|")+")(?=\\W|$)"},E=function(S,M,_){var T=C(M);m(S.querySelectorAll("style")).forEach(function(D){typeof D.sheet>"u"&&v(D);var R=m(D.sheet.cssRules).filter(function(B){return B.selectorText&&new RegExp(T,"i").test(B.selectorText)});R.length&&(R.forEach(function(B){var P=B.selectorText.replace(new RegExp(T,"gi"),function(F,z,Q){return z+_(Q)});P!==B.selectorText&&g(B,P)}),I(D))})};return p.rewriteCssSelectorWith=function(S,M,_){E(S,[M],function(){return _})},p.lowercaseCssTypeSelectors=function(S,M){E(S,M,function(_){return _.toLowerCase()})},p.findHtmlOnlyNodeNames=function(S){var M=S.ownerDocument.createTreeWalker(S,NodeFilter.SHOW_ELEMENT),_={},T={},D;do D=M.currentNode.tagName.toLowerCase(),M.currentNode.namespaceURI==="http://www.w3.org/1999/xhtml"?_[D]=!0:T[D]=!0;while(M.nextNode());return Object.keys(_).filter(function(R){return!T[R]})},p}(),c=function(p){"use strict";var m={},b=function(w){return Array.prototype.slice.call(w)},g={active:!0,hover:!0,focus:!1,target:!1};return m.fakeUserAction=function(w,I,v){var C=w.querySelector(I),E=":"+v,S="rasterizehtml"+v;C&&(g[v]?p.addClassNameRecursively(C,S):p.addClassName(C,S),p.rewriteCssSelectorWith(w,E,"."+S))},m.persistInputValues=function(w){var I=w.querySelectorAll("input"),v=w.querySelectorAll("textarea"),C=function(E){return E.type==="checkbox"||E.type==="radio"};b(I).filter(C).forEach(function(E){E.checked?E.setAttribute("checked",""):E.removeAttribute("checked")}),b(I).filter(function(E){return!C(E)}).forEach(function(E){E.setAttribute("value",E.value)}),b(v).forEach(function(E){E.textContent=E.value})},m.rewriteTagNameSelectorsToLowerCase=function(w){p.lowercaseCssTypeSelectors(w,p.findHtmlOnlyNodeNames(w))},m}(l),u=function(p,m,b,g){"use strict";var w={},I=function(Q,V,G,O){var W=Q.createElement(V);return W.style.visibility="hidden",W.style.width=G+"px",W.style.height=O+"px",W.style.position="absolute",W.style.top=-1e4-O+"px",W.style.left=-1e4-G+"px",Q.getElementsByTagName("body")[0].appendChild(W),W},v=function(Q){return Q>0?new Promise(function(V){setTimeout(V,Q)}):Promise.resolve()};w.executeJavascript=function(Q,V){return new Promise(function(G){var O=I(g.document,"iframe",V.width,V.height),W=Q.outerHTML,k=[],Y=V.executeJsTimeout||0,te=function(){g.document.getElementsByTagName("body")[0].removeChild(O)},ie=function(){var le=O.contentDocument;G({document:le,errors:k,cleanUp:te})},re=O.contentWindow.XMLHttpRequest,se=m.finishNotifyingXhr(re),oe=m.baseUrlRespectingXhr(se,V.baseUrl);O.onload=function(){v(Y).then(se.waitForRequestsToFinish).then(ie)},O.contentDocument.open(),O.contentWindow.XMLHttpRequest=oe,O.contentWindow.onerror=function(le){k.push({resourceType:"scriptExecution",msg:le})},O.contentDocument.write("<!DOCTYPE html>"),O.contentDocument.write(W),O.contentDocument.close()})};var C=function(Q,V,G){var O=Q.createElement("iframe");return O.style.width=V+"px",O.style.height=G+"px",O.style.visibility="hidden",O.style.position="absolute",O.style.top=-1e4-G+"px",O.style.left=-1e4-V+"px",O.style.borderWidth=0,O.sandbox="allow-same-origin",O.scrolling="no",O},E=function(Q,V,G){var O=Math.floor(Q/G),W=Math.floor(V/G);return C(g.document,O,W)},S=function(Q,V,G,O){return{width:Math.max(Q.width*O,V),height:Math.max(Q.height*O,G)}},M=function(Q,V){var G=Q.querySelector(V);if(G)return G;if(Q.ownerDocument.querySelector(V)===Q)return Q;throw{message:"Clipping selector not found"}},_=function(Q,V,G,O,W){var k=Math.max(Q.scrollWidth,Q.clientWidth),Y=Math.max(Q.scrollHeight,Q.clientHeight),te,ie,re,se,oe,le,xe,_e;return V?(le=M(Q,V),xe=le.getBoundingClientRect(),te=xe.top,ie=xe.left,re=xe.width,se=xe.height):(te=0,ie=0,re=k,se=Y),_e=S({width:re,height:se},G,O,W),oe=g.getComputedStyle(Q.ownerDocument.documentElement).fontSize,{left:ie,top:te,width:_e.width,height:_e.height,viewportWidth:k,viewportHeight:Y,rootFontSize:oe}},T=function(Q,V){var G=Q.tagName;return V.querySelector(G)},D=function(Q){var V=Q.tagName.toLowerCase();return V==="html"||V==="body"?Q.outerHTML:'<body style="margin: 0;">'+Q.outerHTML+"</body>"};w.calculateDocumentContentSize=function(Q,V){return new Promise(function(G,O){var W=V.zoom||1,k;k=E(V.width,V.height,W),g.document.getElementsByTagName("body")[0].appendChild(k),k.onload=function(){var Y=k.contentDocument,te;try{te=_(T(Q,Y),V.clip,V.width,V.height,W),G(te)}catch(ie){O(ie)}finally{g.document.getElementsByTagName("body")[0].removeChild(k)}},k.contentDocument.open(),k.contentDocument.write("<!DOCTYPE html>"),k.contentDocument.write(D(Q)),k.contentDocument.close()})},w.parseHtmlFragment=function(Q){var V=g.document.implementation.createHTMLDocument("");V.documentElement.innerHTML=Q;var G=V.querySelector("body").firstChild;if(!G)throw"Invalid source";return G};var R=function(Q,V){var G=/<html((?:\s+[^>]*)?)>/im.exec(V),O=g.document.implementation.createHTMLDocument(""),W,k,Y,te;if(G)for(W="<div"+G[1]+"></div>",O.documentElement.innerHTML=W,Y=O.querySelector("div"),k=0;k<Y.attributes.length;k++)te=Y.attributes[k],Q.documentElement.setAttribute(te.name,te.value)};w.parseHTML=function(Q){var V=g.document.implementation.createHTMLDocument("");return V.documentElement.innerHTML=Q,R(V,Q),V};var B=function(Q){try{return b.failOnParseError(Q)}catch(V){throw{message:"Invalid source",originalError:V}}};w.validateXHTML=function(Q){var V=new DOMParser,G=V.parseFromString(Q,"application/xml");B(G)};var P=null,F=function(Q,V){return V==="none"||V==="repeated"?((P===null||V!=="repeated")&&(P=Date.now()),Q+"?_="+P):Q},z=function(Q,V){return new Promise(function(G,O){var W=new window.XMLHttpRequest,k=p.joinUrl(V.baseUrl,Q),Y=F(k,V.cache),te=function(ie){O({message:"Unable to load page",originalError:ie})};W.addEventListener("load",function(){W.status===200||W.status===0?G(W.responseXML):te(W.statusText)},!1),W.addEventListener("error",function(ie){te(ie)},!1);try{W.open("GET",Y,!0),W.responseType="document",W.send(null)}catch(ie){te(ie)}})};return w.loadDocument=function(Q,V){return z(Q,V).then(function(G){return B(G)})},w}(o,a,t,window),h=function(p){"use strict";var m={},b=function(T,D){return D?URL.createObjectURL(new Blob([T],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(T)},g=function(T){T instanceof Blob&&URL.revokeObjectURL(T)},w='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',I=function(T){return new Promise(function(D,R){var B=document.createElement("canvas"),P=new Image;P.onload=function(){var F=B.getContext("2d");try{F.drawImage(P,0,0),B.toDataURL("image/png"),D(!0)}catch{D(!1)}},P.onerror=R,P.src=T})},v=function(){var T=b(w,!0);return I(T).then(function(D){return g(T),D?!1:I(b(w,!1)).then(function(R){return R})},function(){return!1})},C=function(){if(p.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch{}return!1},E=function(){return new Promise(function(T,D){C()&&p.URL?v().then(function(R){T(!R)},function(){D()}):T(!1)})},S,M=function(){return S===void 0&&(S=E()),S},_=function(T){return M().then(function(D){return b(T,D)})};return m.renderSvg=function(T){return new Promise(function(D,R){var B,P,F=function(){P.onload=null,P.onerror=null},z=function(){B&&g(B)};P=new Image,P.onload=function(){F(),z(),D(P)},P.onerror=function(){z(),R()},_(T).then(function(Q){B=Q,P.src=B},R)})},m}(window),A=function(p,m,b,g){"use strict";var w={},I=function(T,D){var R=D||1,B={width:T.width,height:T.height,"font-size":T.rootFontSize};return R!==1&&(B.style="transform:scale("+R+"); transform-origin: 0 0;"),B},v=function(T){var D,R,B,P;D=Math.round(T.viewportWidth),R=Math.round(T.viewportHeight),B=-T.left,P=-T.top;var F={x:B,y:P,width:D,height:R};return F},C=function(T){var D=T.style||"";T.style=D+"float: left;"},E=function(T){T.externalResourcesRequired=!0},S=function(){return'<style scoped="">html::-webkit-scrollbar { display: none; }</style>'},M=function(T){var D=Object.keys(T);return D.length?" "+D.map(function(R){return R+'="'+T[R]+'"'}).join(" "):""},_=function(T,D,R){var B=g.serializeToString(T);m.validateXHTML(B);var P=v(D);return C(P),E(P),'<svg xmlns="http://www.w3.org/2000/svg"'+M(I(D,R))+">"+S()+"<foreignObject"+M(P)+">"+B+"</foreignObject></svg>"};return w.getSvgForDocument=function(T,D,R){return b.rewriteTagNameSelectorsToLowerCase(T),_(T,D,R)},w.drawDocumentAsSvg=function(T,D){return["hover","active","focus","target"].forEach(function(R){D[R]&&b.fakeUserAction(T,D[R],R)}),m.calculateDocumentContentSize(T,D).then(function(R){return w.getSvgForDocument(T,R,D.zoom)})},w}(o,u,c,e),f=function(p,m,b,g,w,I){"use strict";var v={},C=function(T){return{message:"Error rendering page",originalError:T}},E=function(T){return w.renderSvg(T).then(function(D){return{image:D,svg:T}},function(D){throw C(D)})},S=function(T,D){try{D.getContext("2d").drawImage(T,0,0)}catch(R){throw C(R)}},M=function(T,D,R){return g.drawDocumentAsSvg(T,R).then(E).then(function(B){return D&&S(B.image,D),B})},_=function(T,D){return m.executeJavascript(T,D).then(function(R){var B=R.document;return b.persistInputValues(B),{document:B,errors:R.errors,cleanUp:R.cleanUp}})};return v.rasterize=function(T,D,R){var B;return B=p.clone(R),B.inlineScripts=R.executeJs===!0,I.inlineReferences(T,B).then(function(P){return R.executeJs?_(T,R).then(function(F){return{element:F.document.documentElement,errors:P.concat(F.errors),cleanUp:F.cleanUp}}):{element:T,errors:P,cleanUp:function(){}}}).then(function(P){return M(P.element,D,R).then(function(F){return P.cleanUp(),{image:F.image,svg:F.svg,errors:P.errors}})})},v}(o,u,c,A,h,i),d=function(p,m,b){"use strict";var g={},w=function(S,M){var _=300,T=200,D=S?S.width:_,R=S?S.height:T,B=M.width!==void 0?M.width:D,P=M.height!==void 0?M.height:R;return{width:B,height:P}},I=function(S){var M=w(S.canvas,S.options),_;return _=p.clone(S.options),_.width=M.width,_.height=M.height,_};g.drawDocument=function(){var S=arguments[0],M=Array.prototype.slice.call(arguments,1),_=p.parseOptionalParameters(M),T=S.documentElement?S.documentElement:S;return b.rasterize(T,_.canvas,I(_))};var v=function(S,M,_){var T=m.parseHTML(S);return g.drawDocument(T,M,_)};g.drawHTML=function(){var S=arguments[0],M=Array.prototype.slice.call(arguments,1),_=p.parseOptionalParameters(M);return v(S,_.canvas,_.options)};var C=function(S,M,_){var T=document.implementation.createHTMLDocument("");T.replaceChild(S.documentElement,T.documentElement);var D=_?p.clone(_):{};return _.baseUrl||(D.baseUrl=M),{document:T,options:D}},E=function(S,M,_){return m.loadDocument(S,_).then(function(T){var D=C(T,S,_);return g.drawDocument(D.document,M,D.options)})};return g.drawURL=function(){var S=arguments[0],M=Array.prototype.slice.call(arguments,1),_=p.parseOptionalParameters(M);return E(S,_.canvas,_.options)},g}(o,u,f);return d})});var Zh={};ho(Zh,{ACESFilmicToneMapping:()=>Ry,AddEquation:()=>Sc,AddOperation:()=>UP,AdditiveAnimationBlendMode:()=>YE,AdditiveBlending:()=>la,AlphaFormat:()=>WP,AlwaysCompare:()=>u3,AlwaysDepth:()=>RP,AlwaysStencilFunc:()=>n3,AmbientLight:()=>ml,AmbientLightProbe:()=>hE,AnimationAction:()=>Ty,AnimationClip:()=>Os,AnimationLoader:()=>tE,AnimationMixer:()=>Yc,AnimationObjectGroup:()=>gE,AnimationUtils:()=>Sj,ArcCurve:()=>ny,ArrayCamera:()=>J0,ArrowHelper:()=>PE,Audio:()=>Iy,AudioAnalyser:()=>pE,AudioContext:()=>Wd,AudioListener:()=>fE,AudioLoader:()=>cE,AxesHelper:()=>NE,BackSide:()=>Gn,BasicDepthPacking:()=>e3,BasicShadowMap:()=>AX,Bone:()=>bo,BooleanKeyframeTrack:()=>fa,Box2:()=>CE,Box3:()=>Ht,Box3Helper:()=>BE,BoxGeometry:()=>wn,BoxHelper:()=>LE,BufferAttribute:()=>$e,BufferGeometry:()=>Ke,BufferGeometryLoader:()=>Ey,ByteType:()=>HP,Cache:()=>Vc,Camera:()=>Dh,CameraHelper:()=>RE,CanvasTexture:()=>Dd,CapsuleGeometry:()=>Nh,CatmullRomCurve3:()=>Qc,CineonToneMapping:()=>GP,CircleGeometry:()=>oy,ClampToEdgeWrapping:()=>Qn,Clock:()=>yl,Color:()=>De,ColorKeyframeTrack:()=>Gd,ColorManagement:()=>os,CompressedArrayTexture:()=>jS,CompressedTexture:()=>_d,CompressedTextureLoader:()=>nE,ConeGeometry:()=>ay,CubeCamera:()=>K0,CubeReflectionMapping:()=>rl,CubeRefractionMapping:()=>sl,CubeTexture:()=>Nc,CubeTextureLoader:()=>iE,CubeUVReflectionMapping:()=>Hh,CubicBezierCurve:()=>Rd,CubicBezierCurve3:()=>iy,CubicInterpolant:()=>vy,CullFaceBack:()=>iS,CullFaceFront:()=>gP,CullFaceFrontBack:()=>hX,CullFaceNone:()=>mP,Curve:()=>qi,CurvePath:()=>sy,CustomBlending:()=>yP,CustomToneMapping:()=>zP,CylinderGeometry:()=>Nr,Cylindrical:()=>xE,Data3DTexture:()=>Sd,DataArrayTexture:()=>Mh,DataTexture:()=>vo,DataTextureLoader:()=>rE,DataUtils:()=>g6,DecrementStencilOp:()=>bX,DecrementWrapStencilOp:()=>CX,DefaultLoadingManager:()=>I3,DepthFormat:()=>go,DepthStencilFormat:()=>Bc,DepthTexture:()=>ll,DirectionalLight:()=>Or,DirectionalLightHelper:()=>DE,DiscreteInterpolant:()=>wy,DisplayP3ColorSpace:()=>jE,DodecahedronGeometry:()=>ly,DoubleSide:()=>Pt,DstAlphaFactor:()=>EP,DstColorFactor:()=>MP,DynamicCopyUsage:()=>FX,DynamicDrawUsage:()=>Xh,DynamicReadUsage:()=>kX,EdgesGeometry:()=>cy,EllipseCurve:()=>kh,EqualCompare:()=>s3,EqualDepth:()=>BP,EqualStencilFunc:()=>MX,EquirectangularReflectionMapping:()=>ca,EquirectangularRefractionMapping:()=>yd,Euler:()=>ur,EventDispatcher:()=>Ji,ExtrudeGeometry:()=>uy,FileLoader:()=>si,Float16BufferAttribute:()=>OS,Float32BufferAttribute:()=>Ve,Float64BufferAttribute:()=>QS,FloatType:()=>cs,Fog:()=>$0,FogExp2:()=>Lh,FramebufferTexture:()=>KS,FrontSide:()=>Ai,Frustum:()=>al,GLBufferAttribute:()=>wE,GLSL1:()=>OX,GLSL3:()=>Eh,GreaterCompare:()=>a3,GreaterDepth:()=>PP,GreaterEqualCompare:()=>c3,GreaterEqualDepth:()=>kP,GreaterEqualStencilFunc:()=>RX,GreaterStencilFunc:()=>_X,GridHelper:()=>TE,Group:()=>Yt,HalfFloatType:()=>Tn,HemisphereLight:()=>Xc,HemisphereLightHelper:()=>ME,HemisphereLightProbe:()=>uE,IcosahedronGeometry:()=>Fh,ImageBitmapLoader:()=>Vd,ImageLoader:()=>Wc,ImageUtils:()=>Cd,IncrementStencilOp:()=>wX,IncrementWrapStencilOp:()=>xX,InstancedBufferAttribute:()=>Pr,InstancedBufferGeometry:()=>gl,InstancedInterleavedBuffer:()=>Xd,InstancedMesh:()=>hl,Int16BufferAttribute:()=>FS,Int32BufferAttribute:()=>US,Int8BufferAttribute:()=>kS,IntType:()=>GE,InterleavedBuffer:()=>hr,InterleavedBufferAttribute:()=>zn,Interpolant:()=>Aa,InterpolateDiscrete:()=>kc,InterpolateLinear:()=>ol,InterpolateSmooth:()=>V0,InvertStencilOp:()=>SX,KeepStencilOp:()=>W0,KeyframeTrack:()=>Fr,LOD:()=>ty,LatheGeometry:()=>Pd,Layers:()=>Th,LessCompare:()=>r3,LessDepth:()=>LP,LessEqualCompare:()=>o3,LessEqualDepth:()=>X0,LessEqualStencilFunc:()=>TX,LessStencilFunc:()=>IX,Light:()=>Co,LightProbe:()=>zh,Line:()=>Ar,Line3:()=>Rn,LineBasicMaterial:()=>bn,LineCurve:()=>Ph,LineCurve3:()=>ry,LineDashedMaterial:()=>yy,LineLoop:()=>Bh,LineSegments:()=>fi,LinearEncoding:()=>KE,LinearFilter:()=>Et,LinearInterpolant:()=>Qd,LinearMipMapLinearFilter:()=>gX,LinearMipMapNearestFilter:()=>mX,LinearMipmapLinearFilter:()=>Fs,LinearMipmapNearestFilter:()=>Kd,LinearSRGBColorSpace:()=>kr,LinearToneMapping:()=>OP,Loader:()=>pn,LoaderUtils:()=>Gs,LoadingManager:()=>zd,LoopOnce:()=>JP,LoopPingPong:()=>$P,LoopRepeat:()=>qP,LuminanceAlphaFormat:()=>YP,LuminanceFormat:()=>XP,MOUSE:()=>wl,Material:()=>_n,MaterialLoader:()=>Sy,MathUtils:()=>Jt,Matrix3:()=>dt,Matrix4:()=>ke,MaxEquation:()=>aS,Mesh:()=>He,MeshBasicMaterial:()=>Nt,MeshDepthMaterial:()=>Uc,MeshDistanceMaterial:()=>Oc,MeshLambertMaterial:()=>Gh,MeshMatcapMaterial:()=>gy,MeshNormalMaterial:()=>Qh,MeshPhongMaterial:()=>fr,MeshPhysicalMaterial:()=>Dn,MeshStandardMaterial:()=>Jn,MeshToonMaterial:()=>my,MinEquation:()=>oS,MirroredRepeatWrapping:()=>Lc,MixOperation:()=>FP,MultiplyBlending:()=>sS,MultiplyOperation:()=>Zd,NearestFilter:()=>Tt,NearestMipMapLinearFilter:()=>pX,NearestMipMapNearestFilter:()=>dX,NearestMipmapLinearFilter:()=>Dc,NearestMipmapNearestFilter:()=>Sh,NeverCompare:()=>i3,NeverDepth:()=>DP,NeverStencilFunc:()=>EX,NoBlending:()=>lr,NoColorSpace:()=>yo,NoToneMapping:()=>mo,NormalAnimationBlendMode:()=>ky,NormalBlending:()=>_c,NotEqualCompare:()=>l3,NotEqualDepth:()=>NP,NotEqualStencilFunc:()=>DX,NumberKeyframeTrack:()=>us,Object3D:()=>mt,ObjectLoader:()=>lE,ObjectSpaceNormalMap:()=>t3,OctahedronGeometry:()=>Od,OneFactor:()=>xP,OneMinusDstAlphaFactor:()=>IP,OneMinusDstColorFactor:()=>TP,OneMinusSrcAlphaFactor:()=>QE,OneMinusSrcColorFactor:()=>SP,OrthographicCamera:()=>Ui,PCFShadowMap:()=>UE,PCFSoftShadowMap:()=>Dy,PMREMGenerator:()=>Fc,Path:()=>Gc,PerspectiveCamera:()=>rn,Plane:()=>On,PlaneGeometry:()=>Ii,PlaneHelper:()=>kE,PointLight:()=>Qs,PointLightHelper:()=>IE,Points:()=>Al,PointsMaterial:()=>ha,PolarGridHelper:()=>_E,PolyhedronGeometry:()=>fl,PositionalAudio:()=>dE,PropertyBinding:()=>Lt,PropertyMixer:()=>My,QuadraticBezierCurve:()=>Ld,QuadraticBezierCurve3:()=>Bd,Quaternion:()=>It,QuaternionKeyframeTrack:()=>Ur,QuaternionLinearInterpolant:()=>by,RED_GREEN_RGTC2_Format:()=>_S,RED_RGTC1_Format:()=>jP,REVISION:()=>_y,RGBADepthPacking:()=>Py,RGBAFormat:()=>ni,RGBAIntegerFormat:()=>XE,RGBA_ASTC_10x10_Format:()=>ES,RGBA_ASTC_10x5_Format:()=>xS,RGBA_ASTC_10x6_Format:()=>CS,RGBA_ASTC_10x8_Format:()=>SS,RGBA_ASTC_12x10_Format:()=>IS,RGBA_ASTC_12x12_Format:()=>MS,RGBA_ASTC_4x4_Format:()=>dS,RGBA_ASTC_5x4_Format:()=>pS,RGBA_ASTC_5x5_Format:()=>mS,RGBA_ASTC_6x5_Format:()=>gS,RGBA_ASTC_6x6_Format:()=>yS,RGBA_ASTC_8x5_Format:()=>vS,RGBA_ASTC_8x6_Format:()=>wS,RGBA_ASTC_8x8_Format:()=>bS,RGBA_BPTC_Format:()=>H0,RGBA_ETC2_EAC_Format:()=>fS,RGBA_PVRTC_2BPPV1_Format:()=>hS,RGBA_PVRTC_4BPPV1_Format:()=>uS,RGBA_S3TC_DXT1_Format:()=>Q0,RGBA_S3TC_DXT3_Format:()=>G0,RGBA_S3TC_DXT5_Format:()=>z0,RGB_ETC1_Format:()=>KP,RGB_ETC2_Format:()=>AS,RGB_PVRTC_2BPPV1_Format:()=>cS,RGB_PVRTC_4BPPV1_Format:()=>lS,RGB_S3TC_DXT1_Format:()=>O0,RGFormat:()=>ZP,RGIntegerFormat:()=>WE,RawShaderMaterial:()=>xo,Ray:()=>cr,Raycaster:()=>Yd,RectAreaLight:()=>xy,RedFormat:()=>By,RedIntegerFormat:()=>VE,ReinhardToneMapping:()=>QP,RepeatWrapping:()=>ji,ReplaceStencilOp:()=>vX,ReverseSubtractEquation:()=>wP,RingGeometry:()=>hy,SIGNED_RED_GREEN_RGTC2_Format:()=>DS,SIGNED_RED_RGTC1_Format:()=>TS,SRGBColorSpace:()=>it,Scene:()=>ua,ShaderChunk:()=>ht,ShaderLib:()=>ls,ShaderMaterial:()=>yt,ShadowMaterial:()=>Oh,Shape:()=>aa,ShapeGeometry:()=>Ay,ShapePath:()=>FE,ShapeUtils:()=>wo,ShortType:()=>VP,Skeleton:()=>ul,SkeletonHelper:()=>EE,SkinnedMesh:()=>cl,Source:()=>sa,Sphere:()=>Vt,SphereGeometry:()=>Hc,Spherical:()=>vl,SphericalHarmonics3:()=>Cy,SplineCurve:()=>kd,SpotLight:()=>pl,SpotLightHelper:()=>SE,Sprite:()=>ey,SpriteMaterial:()=>Md,SrcAlphaFactor:()=>OE,SrcAlphaSaturateFactor:()=>_P,SrcColorFactor:()=>CP,StaticCopyUsage:()=>NX,StaticDrawUsage:()=>wd,StaticReadUsage:()=>BX,StereoCamera:()=>AE,StreamCopyUsage:()=>UX,StreamDrawUsage:()=>LX,StreamReadUsage:()=>PX,StringKeyframeTrack:()=>da,SubtractEquation:()=>vP,SubtractiveBlending:()=>rS,TOUCH:()=>zs,TangentSpaceNormalMap:()=>bl,TetrahedronGeometry:()=>fy,Texture:()=>jt,TextureLoader:()=>pa,TorusGeometry:()=>dy,TorusKnotGeometry:()=>Uh,Triangle:()=>Gt,TriangleFanDrawMode:()=>Wh,TriangleStripDrawMode:()=>jd,TrianglesDrawMode:()=>ZE,TubeGeometry:()=>dl,TwoPassDoubleSide:()=>fX,UVMapping:()=>Ly,Uint16BufferAttribute:()=>Pc,Uint32BufferAttribute:()=>Id,Uint8BufferAttribute:()=>PS,Uint8ClampedBufferAttribute:()=>NS,Uniform:()=>yE,UniformsGroup:()=>vE,UniformsLib:()=>Xe,UniformsUtils:()=>oi,UnsignedByteType:()=>oa,UnsignedInt248Type:()=>nl,UnsignedIntType:()=>Ns,UnsignedShort4444Type:()=>zE,UnsignedShort5551Type:()=>HE,UnsignedShortType:()=>Vh,VSMShadowMap:()=>fo,Vector2:()=>he,Vector3:()=>U,Vector4:()=>pt,VectorKeyframeTrack:()=>Us,VideoTexture:()=>Td,WebGL1Renderer:()=>q0,WebGL3DRenderTarget:()=>BS,WebGLArrayRenderTarget:()=>LS,WebGLCoordinateSystem:()=>po,WebGLCubeRenderTarget:()=>j0,WebGLMultipleRenderTargets:()=>Ed,WebGLRenderTarget:()=>_t,WebGLRenderer:()=>Rh,WebGLUtils:()=>w3,WebGPUCoordinateSystem:()=>bd,WireframeGeometry:()=>py,WrapAroundEnding:()=>vd,ZeroCurvatureEnding:()=>Ic,ZeroFactor:()=>bP,ZeroSlopeEnding:()=>Mc,ZeroStencilOp:()=>yX,_SRGBAFormat:()=>Y0,sRGBEncoding:()=>il});var _y="154",wl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},mP=0,iS=1,gP=2,hX=3,AX=0,UE=1,Dy=2,fo=3,Ai=0,Gn=1,Pt=2,fX=2,lr=0,_c=1,la=2,rS=3,sS=4,yP=5,Sc=100,vP=101,wP=102,oS=103,aS=104,bP=200,xP=201,CP=202,SP=203,OE=204,QE=205,EP=206,IP=207,MP=208,TP=209,_P=210,DP=0,RP=1,LP=2,X0=3,BP=4,kP=5,PP=6,NP=7,Zd=0,FP=1,UP=2,mo=0,OP=1,QP=2,GP=3,Ry=4,zP=5,Ly=300,rl=301,sl=302,ca=303,yd=304,Hh=306,ji=1e3,Qn=1001,Lc=1002,Tt=1003,Sh=1004,dX=1004,Dc=1005,pX=1005,Et=1006,Kd=1007,mX=1007,Fs=1008,gX=1008,oa=1009,HP=1010,VP=1011,Vh=1012,GE=1013,Ns=1014,cs=1015,Tn=1016,zE=1017,HE=1018,nl=1020,WP=1021,ni=1023,XP=1024,YP=1025,go=1026,Bc=1027,By=1028,VE=1029,ZP=1030,WE=1031,XE=1033,O0=33776,Q0=33777,G0=33778,z0=33779,lS=35840,cS=35841,uS=35842,hS=35843,KP=36196,AS=37492,fS=37496,dS=37808,pS=37809,mS=37810,gS=37811,yS=37812,vS=37813,wS=37814,bS=37815,xS=37816,CS=37817,SS=37818,ES=37819,IS=37820,MS=37821,H0=36492,jP=36283,TS=36284,_S=36285,DS=36286,JP=2200,qP=2201,$P=2202,kc=2300,ol=2301,V0=2302,Ic=2400,Mc=2401,vd=2402,ky=2500,YE=2501,ZE=0,jd=1,Wh=2,KE=3e3,il=3001,e3=3200,Py=3201,bl=0,t3=1,yo="",it="srgb",kr="srgb-linear",jE="display-p3",yX=0,W0=7680,vX=7681,wX=7682,bX=7683,xX=34055,CX=34056,SX=5386,EX=512,IX=513,MX=514,TX=515,_X=516,DX=517,RX=518,n3=519,i3=512,r3=513,s3=514,o3=515,a3=516,l3=517,c3=518,u3=519,wd=35044,Xh=35048,LX=35040,BX=35045,kX=35049,PX=35041,NX=35046,FX=35050,UX=35042,OX="100",Eh="300 es",Y0=1035,po=2e3,bd=2001,Ji=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let o=this._listeners[e];if(o!==void 0){let a=o.indexOf(t);a!==-1&&o.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let i=this._listeners[e.type];if(i!==void 0){e.target=this;let o=i.slice(0);for(let a=0,l=o.length;a<l;a++)o[a].call(this,e);e.target=null}}},Ni=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],VB=1234567,Rc=Math.PI/180,Ih=180/Math.PI;function Br(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ni[n&255]+Ni[n>>8&255]+Ni[n>>16&255]+Ni[n>>24&255]+"-"+Ni[e&255]+Ni[e>>8&255]+"-"+Ni[e>>16&15|64]+Ni[e>>24&255]+"-"+Ni[t&63|128]+Ni[t>>8&255]+"-"+Ni[t>>16&255]+Ni[t>>24&255]+Ni[i&255]+Ni[i>>8&255]+Ni[i>>16&255]+Ni[i>>24&255]).toLowerCase()}function Mn(n,e,t){return Math.max(e,Math.min(t,n))}function JE(n,e){return(n%e+e)%e}function QX(n,e,t,i,o){return i+(n-e)*(o-i)/(t-e)}function GX(n,e,t){return n!==e?(t-n)/(e-n):0}function fd(n,e,t){return(1-t)*n+t*e}function zX(n,e,t,i){return fd(n,e,1-Math.exp(-t*i))}function HX(n,e=1){return e-Math.abs(JE(n,e*2)-e)}function VX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function WX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function XX(n,e){return n+Math.floor(Math.random()*(e-n+1))}function YX(n,e){return n+Math.random()*(e-n)}function ZX(n){return n*(.5-Math.random())}function KX(n){n!==void 0&&(VB=n);let e=VB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function jX(n){return n*Rc}function JX(n){return n*Ih}function RS(n){return(n&n-1)===0&&n!==0}function h3(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Z0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function qX(n,e,t,i,o){let a=Math.cos,l=Math.sin,c=a(t/2),u=l(t/2),h=a((e+i)/2),A=l((e+i)/2),f=a((e-i)/2),d=l((e-i)/2),p=a((i-e)/2),m=l((i-e)/2);switch(o){case"XYX":n.set(c*A,u*f,u*d,c*h);break;case"YZY":n.set(u*d,c*A,u*f,c*h);break;case"ZXZ":n.set(u*f,u*d,c*A,c*h);break;case"XZX":n.set(c*A,u*m,u*p,c*h);break;case"YXY":n.set(u*p,c*A,u*m,c*h);break;case"ZYZ":n.set(u*m,u*p,c*A,c*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function Lr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Jt={DEG2RAD:Rc,RAD2DEG:Ih,generateUUID:Br,clamp:Mn,euclideanModulo:JE,mapLinear:QX,inverseLerp:GX,lerp:fd,damp:zX,pingpong:HX,smoothstep:VX,smootherstep:WX,randInt:XX,randFloat:YX,randFloatSpread:ZX,seededRandom:KX,degToRad:jX,radToDeg:JX,isPowerOfTwo:RS,ceilPowerOfTwo:h3,floorPowerOfTwo:Z0,setQuaternionFromProperEuler:qX,normalize:xt,denormalize:Lr},he=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6],this.y=o[1]*t+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),o=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*o+e.x,this.y=a*o+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},dt=class n{constructor(e,t,i,o,a,l,c,u,h){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,o,a,l,c,u,h)}set(e,t,i,o,a,l,c,u,h){let A=this.elements;return A[0]=e,A[1]=o,A[2]=c,A[3]=t,A[4]=a,A[5]=u,A[6]=i,A[7]=l,A[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,o=t.elements,a=this.elements,l=i[0],c=i[3],u=i[6],h=i[1],A=i[4],f=i[7],d=i[2],p=i[5],m=i[8],b=o[0],g=o[3],w=o[6],I=o[1],v=o[4],C=o[7],E=o[2],S=o[5],M=o[8];return a[0]=l*b+c*I+u*E,a[3]=l*g+c*v+u*S,a[6]=l*w+c*C+u*M,a[1]=h*b+A*I+f*E,a[4]=h*g+A*v+f*S,a[7]=h*w+A*C+f*M,a[2]=d*b+p*I+m*E,a[5]=d*g+p*v+m*S,a[8]=d*w+p*C+m*M,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],o=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],A=e[8];return t*l*A-t*c*h-i*a*A+i*c*u+o*a*h-o*l*u}invert(){let e=this.elements,t=e[0],i=e[1],o=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],A=e[8],f=A*l-c*h,d=c*u-A*a,p=h*a-l*u,m=t*f+i*d+o*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/m;return e[0]=f*b,e[1]=(o*h-A*i)*b,e[2]=(c*i-o*l)*b,e[3]=d*b,e[4]=(A*t-o*u)*b,e[5]=(o*a-c*t)*b,e[6]=p*b,e[7]=(i*u-h*t)*b,e[8]=(l*t-i*a)*b,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,o,a,l,c){let u=Math.cos(a),h=Math.sin(a);return this.set(i*u,i*h,-i*(u*l+h*c)+l+e,-o*h,o*u,-o*(-h*l+u*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(EC.makeScale(e,t)),this}rotate(e){return this.premultiply(EC.makeRotation(-e)),this}translate(e,t){return this.premultiply(EC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let o=0;o<9;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},EC=new dt;function A3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}var $X={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vh(n,e){return new $X[n](e)}function xd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}var WB={};function dd(n){n in WB||(WB[n]=!0,console.warn(n))}function xh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function IC(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var e6=new dt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),t6=new dt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function n6(n){return n.convertSRGBToLinear().applyMatrix3(t6)}function i6(n){return n.applyMatrix3(e6).convertLinearToSRGB()}var r6={[kr]:n=>n,[it]:n=>n.convertSRGBToLinear(),[jE]:n6},s6={[kr]:n=>n,[it]:n=>n.convertLinearToSRGB(),[jE]:i6},os={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return kr},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;let i=r6[e],o=s6[t];if(i===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return o(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},Ju,Cd=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ju===void 0&&(Ju=xd("canvas")),Ju.width=e.width,Ju.height=e.height;let i=Ju.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ju}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=xd("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let o=i.getImageData(0,0,e.width,e.height),a=o.data;for(let l=0;l<a.length;l++)a[l]=xh(a[l]/255)*255;return i.putImageData(o,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(xh(t[i]/255)*255):t[i]=xh(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},o6=0,sa=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:o6++}),this.uuid=Br(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let a;if(Array.isArray(o)){a=[];for(let l=0,c=o.length;l<c;l++)o[l].isDataTexture?a.push(MC(o[l].image)):a.push(MC(o[l]))}else a=MC(o);i.url=a}return t||(e.images[this.uuid]=i),i}};function MC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Cd.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var a6=0,jt=class n extends Ji{constructor(e=n.DEFAULT_IMAGE,t=n.DEFAULT_MAPPING,i=Qn,o=Qn,a=Et,l=Fs,c=ni,u=oa,h=n.DEFAULT_ANISOTROPY,A=yo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:a6++}),this.uuid=Br(),this.name="",this.source=new sa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=a,this.minFilter=l,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=u,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof A=="string"?this.colorSpace=A:(dd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=A===il?it:yo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ly)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ji:e.x=e.x-Math.floor(e.x);break;case Qn:e.x=e.x<0?0:1;break;case Lc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ji:e.y=e.y-Math.floor(e.y);break;case Qn:e.y=e.y<0?0:1;break;case Lc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return dd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===it?il:KE}set encoding(e){dd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===il?it:yo}};jt.DEFAULT_IMAGE=null;jt.DEFAULT_MAPPING=Ly;jt.DEFAULT_ANISOTROPY=1;var pt=class n{constructor(e=0,t=0,i=0,o=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,o){return this.x=e,this.y=t,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,o=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*o+l[12]*a,this.y=l[1]*t+l[5]*i+l[9]*o+l[13]*a,this.z=l[2]*t+l[6]*i+l[10]*o+l[14]*a,this.w=l[3]*t+l[7]*i+l[11]*o+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,o,a,u=e.elements,h=u[0],A=u[4],f=u[8],d=u[1],p=u[5],m=u[9],b=u[2],g=u[6],w=u[10];if(Math.abs(A-d)<.01&&Math.abs(f-b)<.01&&Math.abs(m-g)<.01){if(Math.abs(A+d)<.1&&Math.abs(f+b)<.1&&Math.abs(m+g)<.1&&Math.abs(h+p+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let v=(h+1)/2,C=(p+1)/2,E=(w+1)/2,S=(A+d)/4,M=(f+b)/4,_=(m+g)/4;return v>C&&v>E?v<.01?(i=0,o=.707106781,a=.707106781):(i=Math.sqrt(v),o=S/i,a=M/i):C>E?C<.01?(i=.707106781,o=0,a=.707106781):(o=Math.sqrt(C),i=S/o,a=_/o):E<.01?(i=.707106781,o=.707106781,a=0):(a=Math.sqrt(E),i=M/a,o=_/a),this.set(i,o,a,t),this}let I=Math.sqrt((g-m)*(g-m)+(f-b)*(f-b)+(d-A)*(d-A));return Math.abs(I)<.001&&(I=1),this.x=(g-m)/I,this.y=(f-b)/I,this.z=(d-A)/I,this.w=Math.acos((h+p+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},_t=class extends Ji{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new pt(0,0,e,t),this.scissorTest=!1,this.viewport=new pt(0,0,e,t);let o={width:e,height:t,depth:1};i.encoding!==void 0&&(dd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===il?it:yo),this.texture=new jt(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Et,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new sa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Mh=class extends jt{constructor(e=null,t=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=Tt,this.minFilter=Tt,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},LS=class extends _t{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Mh(null,e,t,i),this.texture.isRenderTargetTexture=!0}},Sd=class extends jt{constructor(e=null,t=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=Tt,this.minFilter=Tt,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},BS=class extends _t{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Sd(null,e,t,i),this.texture.isRenderTargetTexture=!0}},Ed=class extends _t{constructor(e=1,t=1,i=1,o={}){super(e,t,o),this.isWebGLMultipleRenderTargets=!0;let a=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=a.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let o=0,a=this.texture.length;o<a;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},It=class{constructor(e=0,t=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=o}static slerpFlat(e,t,i,o,a,l,c){let u=i[o+0],h=i[o+1],A=i[o+2],f=i[o+3],d=a[l+0],p=a[l+1],m=a[l+2],b=a[l+3];if(c===0){e[t+0]=u,e[t+1]=h,e[t+2]=A,e[t+3]=f;return}if(c===1){e[t+0]=d,e[t+1]=p,e[t+2]=m,e[t+3]=b;return}if(f!==b||u!==d||h!==p||A!==m){let g=1-c,w=u*d+h*p+A*m+f*b,I=w>=0?1:-1,v=1-w*w;if(v>Number.EPSILON){let E=Math.sqrt(v),S=Math.atan2(E,w*I);g=Math.sin(g*S)/E,c=Math.sin(c*S)/E}let C=c*I;if(u=u*g+d*C,h=h*g+p*C,A=A*g+m*C,f=f*g+b*C,g===1-c){let E=1/Math.sqrt(u*u+h*h+A*A+f*f);u*=E,h*=E,A*=E,f*=E}}e[t]=u,e[t+1]=h,e[t+2]=A,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,o,a,l){let c=i[o],u=i[o+1],h=i[o+2],A=i[o+3],f=a[l],d=a[l+1],p=a[l+2],m=a[l+3];return e[t]=c*m+A*f+u*p-h*d,e[t+1]=u*m+A*d+h*f-c*p,e[t+2]=h*m+A*p+c*d-u*f,e[t+3]=A*m-c*f-u*d-h*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,o){return this._x=e,this._y=t,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let i=e._x,o=e._y,a=e._z,l=e._order,c=Math.cos,u=Math.sin,h=c(i/2),A=c(o/2),f=c(a/2),d=u(i/2),p=u(o/2),m=u(a/2);switch(l){case"XYZ":this._x=d*A*f+h*p*m,this._y=h*p*f-d*A*m,this._z=h*A*m+d*p*f,this._w=h*A*f-d*p*m;break;case"YXZ":this._x=d*A*f+h*p*m,this._y=h*p*f-d*A*m,this._z=h*A*m-d*p*f,this._w=h*A*f+d*p*m;break;case"ZXY":this._x=d*A*f-h*p*m,this._y=h*p*f+d*A*m,this._z=h*A*m+d*p*f,this._w=h*A*f-d*p*m;break;case"ZYX":this._x=d*A*f-h*p*m,this._y=h*p*f+d*A*m,this._z=h*A*m-d*p*f,this._w=h*A*f+d*p*m;break;case"YZX":this._x=d*A*f+h*p*m,this._y=h*p*f+d*A*m,this._z=h*A*m-d*p*f,this._w=h*A*f-d*p*m;break;case"XZY":this._x=d*A*f-h*p*m,this._y=h*p*f-d*A*m,this._z=h*A*m+d*p*f,this._w=h*A*f+d*p*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],o=t[4],a=t[8],l=t[1],c=t[5],u=t[9],h=t[2],A=t[6],f=t[10],d=i+c+f;if(d>0){let p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(A-u)*p,this._y=(a-h)*p,this._z=(l-o)*p}else if(i>c&&i>f){let p=2*Math.sqrt(1+i-c-f);this._w=(A-u)/p,this._x=.25*p,this._y=(o+l)/p,this._z=(a+h)/p}else if(c>f){let p=2*Math.sqrt(1+c-i-f);this._w=(a-h)/p,this._x=(o+l)/p,this._y=.25*p,this._z=(u+A)/p}else{let p=2*Math.sqrt(1+f-i-c);this._w=(l-o)/p,this._x=(a+h)/p,this._y=(u+A)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let o=Math.min(1,t/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,o=e._y,a=e._z,l=e._w,c=t._x,u=t._y,h=t._z,A=t._w;return this._x=i*A+l*c+o*h-a*u,this._y=o*A+l*u+a*c-i*h,this._z=a*A+l*h+i*u-o*c,this._w=l*A-i*c-o*u-a*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,o=this._y,a=this._z,l=this._w,c=l*e._w+i*e._x+o*e._y+a*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=i,this._y=o,this._z=a,this;let u=1-c*c;if(u<=Number.EPSILON){let p=1-t;return this._w=p*l+t*this._w,this._x=p*i+t*this._x,this._y=p*o+t*this._y,this._z=p*a+t*this._z,this.normalize(),this._onChangeCallback(),this}let h=Math.sqrt(u),A=Math.atan2(h,c),f=Math.sin((1-t)*A)/h,d=Math.sin(t*A)/h;return this._w=l*f+this._w*d,this._x=i*f+this._x*d,this._y=o*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),o=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(o),i*Math.sin(a),i*Math.cos(a),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},U=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XB.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XB.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*o,this.y=a[1]*t+a[4]*i+a[7]*o,this.z=a[2]*t+a[5]*i+a[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,o=this.z,a=e.elements,l=1/(a[3]*t+a[7]*i+a[11]*o+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*o+a[12])*l,this.y=(a[1]*t+a[5]*i+a[9]*o+a[13])*l,this.z=(a[2]*t+a[6]*i+a[10]*o+a[14])*l,this}applyQuaternion(e){let t=this.x,i=this.y,o=this.z,a=e.x,l=e.y,c=e.z,u=e.w,h=u*t+l*o-c*i,A=u*i+c*t-a*o,f=u*o+a*i-l*t,d=-a*t-l*i-c*o;return this.x=h*u+d*-a+A*-c-f*-l,this.y=A*u+d*-l+f*-a-h*-c,this.z=f*u+d*-c+h*-l-A*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,o=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*o,this.y=a[1]*t+a[5]*i+a[9]*o,this.z=a[2]*t+a[6]*i+a[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,o=e.y,a=e.z,l=t.x,c=t.y,u=t.z;return this.x=o*u-a*c,this.y=a*l-i*u,this.z=i*c-o*l,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return TC.copy(this).projectOnVector(e),this.sub(TC)}reflect(e){return this.sub(TC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return t*t+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let o=Math.sin(t)*e;return this.x=o*Math.sin(i),this.y=Math.cos(t)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},TC=new U,XB=new It,Ht=class{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(qo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(qo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=qo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),qu.copy(e.boundingBox),qu.applyMatrix4(e.matrixWorld),this.union(qu);else{let o=e.geometry;if(o!==void 0)if(t&&o.attributes!==void 0&&o.attributes.position!==void 0){let a=o.attributes.position;for(let l=0,c=a.count;l<c;l++)qo.fromBufferAttribute(a,l).applyMatrix4(e.matrixWorld),this.expandByPoint(qo)}else o.boundingBox===null&&o.computeBoundingBox(),qu.copy(o.boundingBox),qu.applyMatrix4(e.matrixWorld),this.union(qu)}let i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,qo),qo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(td),Jg.subVectors(this.max,td),$u.subVectors(e.a,td),eh.subVectors(e.b,td),th.subVectors(e.c,td),Ja.subVectors(eh,$u),qa.subVectors(th,eh),dc.subVectors($u,th);let t=[0,-Ja.z,Ja.y,0,-qa.z,qa.y,0,-dc.z,dc.y,Ja.z,0,-Ja.x,qa.z,0,-qa.x,dc.z,0,-dc.x,-Ja.y,Ja.x,0,-qa.y,qa.x,0,-dc.y,dc.x,0];return!_C(t,$u,eh,th,Jg)||(t=[1,0,0,0,1,0,0,0,1],!_C(t,$u,eh,th,Jg))?!1:(qg.crossVectors(Ja,qa),t=[qg.x,qg.y,qg.z],_C(t,$u,eh,th,Jg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Jo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Jo=[new U,new U,new U,new U,new U,new U,new U,new U],qo=new U,qu=new Ht,$u=new U,eh=new U,th=new U,Ja=new U,qa=new U,dc=new U,td=new U,Jg=new U,qg=new U,pc=new U;function _C(n,e,t,i,o){for(let a=0,l=n.length-3;a<=l;a+=3){pc.fromArray(n,a);let c=o.x*Math.abs(pc.x)+o.y*Math.abs(pc.y)+o.z*Math.abs(pc.z),u=e.dot(pc),h=t.dot(pc),A=i.dot(pc);if(Math.max(-Math.max(u,h,A),Math.min(u,h,A))>c)return!1}return!0}var l6=new Ht,nd=new U,DC=new U,Vt=class{constructor(e=new U,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):l6.setFromPoints(e).getCenter(i);let o=0;for(let a=0,l=e.length;a<l;a++)o=Math.max(o,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nd.subVectors(e,this.center);let t=nd.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),o=(i-this.radius)*.5;this.center.addScaledVector(nd,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(DC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nd.copy(e.center).add(DC)),this.expandByPoint(nd.copy(e.center).sub(DC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},$o=new U,RC=new U,$g=new U,$a=new U,LC=new U,e0=new U,BC=new U,cr=class{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$o)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=$o.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($o.copy(this.origin).addScaledVector(this.direction,t),$o.distanceToSquared(e))}distanceSqToSegment(e,t,i,o){RC.copy(e).add(t).multiplyScalar(.5),$g.copy(t).sub(e).normalize(),$a.copy(this.origin).sub(RC);let a=e.distanceTo(t)*.5,l=-this.direction.dot($g),c=$a.dot(this.direction),u=-$a.dot($g),h=$a.lengthSq(),A=Math.abs(1-l*l),f,d,p,m;if(A>0)if(f=l*u-c,d=l*c-u,m=a*A,f>=0)if(d>=-m)if(d<=m){let b=1/A;f*=b,d*=b,p=f*(f+l*d+2*c)+d*(l*f+d+2*u)+h}else d=a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*u)+h;else d=-a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*u)+h;else d<=-m?(f=Math.max(0,-(-l*a+c)),d=f>0?-a:Math.min(Math.max(-a,-u),a),p=-f*f+d*(d+2*u)+h):d<=m?(f=0,d=Math.min(Math.max(-a,-u),a),p=d*(d+2*u)+h):(f=Math.max(0,-(l*a+c)),d=f>0?a:Math.min(Math.max(-a,-u),a),p=-f*f+d*(d+2*u)+h);else d=l>0?-a:a,f=Math.max(0,-(l*d+c)),p=-f*f+d*(d+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,f),o&&o.copy(RC).addScaledVector($g,d),p}intersectSphere(e,t){$o.subVectors(e.center,this.origin);let i=$o.dot(this.direction),o=$o.dot($o)-i*i,a=e.radius*e.radius;if(o>a)return null;let l=Math.sqrt(a-o),c=i-l,u=i+l;return u<0?null:c<0?this.at(u,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,o,a,l,c,u,h=1/this.direction.x,A=1/this.direction.y,f=1/this.direction.z,d=this.origin;return h>=0?(i=(e.min.x-d.x)*h,o=(e.max.x-d.x)*h):(i=(e.max.x-d.x)*h,o=(e.min.x-d.x)*h),A>=0?(a=(e.min.y-d.y)*A,l=(e.max.y-d.y)*A):(a=(e.max.y-d.y)*A,l=(e.min.y-d.y)*A),i>l||a>o||((a>i||isNaN(i))&&(i=a),(l<o||isNaN(o))&&(o=l),f>=0?(c=(e.min.z-d.z)*f,u=(e.max.z-d.z)*f):(c=(e.max.z-d.z)*f,u=(e.min.z-d.z)*f),i>u||c>o)||((c>i||i!==i)&&(i=c),(u<o||o!==o)&&(o=u),o<0)?null:this.at(i>=0?i:o,t)}intersectsBox(e){return this.intersectBox(e,$o)!==null}intersectTriangle(e,t,i,o,a){LC.subVectors(t,e),e0.subVectors(i,e),BC.crossVectors(LC,e0);let l=this.direction.dot(BC),c;if(l>0){if(o)return null;c=1}else if(l<0)c=-1,l=-l;else return null;$a.subVectors(this.origin,e);let u=c*this.direction.dot(e0.crossVectors($a,e0));if(u<0)return null;let h=c*this.direction.dot(LC.cross($a));if(h<0||u+h>l)return null;let A=-c*$a.dot(BC);return A<0?null:this.at(A/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ke=class n{constructor(e,t,i,o,a,l,c,u,h,A,f,d,p,m,b,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,o,a,l,c,u,h,A,f,d,p,m,b,g)}set(e,t,i,o,a,l,c,u,h,A,f,d,p,m,b,g){let w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=o,w[1]=a,w[5]=l,w[9]=c,w[13]=u,w[2]=h,w[6]=A,w[10]=f,w[14]=d,w[3]=p,w[7]=m,w[11]=b,w[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,o=1/nh.setFromMatrixColumn(e,0).length(),a=1/nh.setFromMatrixColumn(e,1).length(),l=1/nh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*o,t[1]=i[1]*o,t[2]=i[2]*o,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,o=e.y,a=e.z,l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),h=Math.sin(o),A=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){let d=l*A,p=l*f,m=c*A,b=c*f;t[0]=u*A,t[4]=-u*f,t[8]=h,t[1]=p+m*h,t[5]=d-b*h,t[9]=-c*u,t[2]=b-d*h,t[6]=m+p*h,t[10]=l*u}else if(e.order==="YXZ"){let d=u*A,p=u*f,m=h*A,b=h*f;t[0]=d+b*c,t[4]=m*c-p,t[8]=l*h,t[1]=l*f,t[5]=l*A,t[9]=-c,t[2]=p*c-m,t[6]=b+d*c,t[10]=l*u}else if(e.order==="ZXY"){let d=u*A,p=u*f,m=h*A,b=h*f;t[0]=d-b*c,t[4]=-l*f,t[8]=m+p*c,t[1]=p+m*c,t[5]=l*A,t[9]=b-d*c,t[2]=-l*h,t[6]=c,t[10]=l*u}else if(e.order==="ZYX"){let d=l*A,p=l*f,m=c*A,b=c*f;t[0]=u*A,t[4]=m*h-p,t[8]=d*h+b,t[1]=u*f,t[5]=b*h+d,t[9]=p*h-m,t[2]=-h,t[6]=c*u,t[10]=l*u}else if(e.order==="YZX"){let d=l*u,p=l*h,m=c*u,b=c*h;t[0]=u*A,t[4]=b-d*f,t[8]=m*f+p,t[1]=f,t[5]=l*A,t[9]=-c*A,t[2]=-h*A,t[6]=p*f+m,t[10]=d-b*f}else if(e.order==="XZY"){let d=l*u,p=l*h,m=c*u,b=c*h;t[0]=u*A,t[4]=-f,t[8]=h*A,t[1]=d*f+b,t[5]=l*A,t[9]=p*f-m,t[2]=m*f-p,t[6]=c*A,t[10]=b*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(c6,e,u6)}lookAt(e,t,i){let o=this.elements;return Dr.subVectors(e,t),Dr.lengthSq()===0&&(Dr.z=1),Dr.normalize(),el.crossVectors(i,Dr),el.lengthSq()===0&&(Math.abs(i.z)===1?Dr.x+=1e-4:Dr.z+=1e-4,Dr.normalize(),el.crossVectors(i,Dr)),el.normalize(),n0.crossVectors(Dr,el),o[0]=el.x,o[4]=n0.x,o[8]=Dr.x,o[1]=el.y,o[5]=n0.y,o[9]=Dr.y,o[2]=el.z,o[6]=n0.z,o[10]=Dr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,o=t.elements,a=this.elements,l=i[0],c=i[4],u=i[8],h=i[12],A=i[1],f=i[5],d=i[9],p=i[13],m=i[2],b=i[6],g=i[10],w=i[14],I=i[3],v=i[7],C=i[11],E=i[15],S=o[0],M=o[4],_=o[8],T=o[12],D=o[1],R=o[5],B=o[9],P=o[13],F=o[2],z=o[6],Q=o[10],V=o[14],G=o[3],O=o[7],W=o[11],k=o[15];return a[0]=l*S+c*D+u*F+h*G,a[4]=l*M+c*R+u*z+h*O,a[8]=l*_+c*B+u*Q+h*W,a[12]=l*T+c*P+u*V+h*k,a[1]=A*S+f*D+d*F+p*G,a[5]=A*M+f*R+d*z+p*O,a[9]=A*_+f*B+d*Q+p*W,a[13]=A*T+f*P+d*V+p*k,a[2]=m*S+b*D+g*F+w*G,a[6]=m*M+b*R+g*z+w*O,a[10]=m*_+b*B+g*Q+w*W,a[14]=m*T+b*P+g*V+w*k,a[3]=I*S+v*D+C*F+E*G,a[7]=I*M+v*R+C*z+E*O,a[11]=I*_+v*B+C*Q+E*W,a[15]=I*T+v*P+C*V+E*k,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],o=e[8],a=e[12],l=e[1],c=e[5],u=e[9],h=e[13],A=e[2],f=e[6],d=e[10],p=e[14],m=e[3],b=e[7],g=e[11],w=e[15];return m*(+a*u*f-o*h*f-a*c*d+i*h*d+o*c*p-i*u*p)+b*(+t*u*p-t*h*d+a*l*d-o*l*p+o*h*A-a*u*A)+g*(+t*h*f-t*c*p-a*l*f+i*l*p+a*c*A-i*h*A)+w*(-o*c*A-t*u*f+t*c*d+o*l*f-i*l*d+i*u*A)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],o=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],A=e[8],f=e[9],d=e[10],p=e[11],m=e[12],b=e[13],g=e[14],w=e[15],I=f*g*h-b*d*h+b*u*p-c*g*p-f*u*w+c*d*w,v=m*d*h-A*g*h-m*u*p+l*g*p+A*u*w-l*d*w,C=A*b*h-m*f*h+m*c*p-l*b*p-A*c*w+l*f*w,E=m*f*u-A*b*u-m*c*d+l*b*d+A*c*g-l*f*g,S=t*I+i*v+o*C+a*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/S;return e[0]=I*M,e[1]=(b*d*a-f*g*a-b*o*p+i*g*p+f*o*w-i*d*w)*M,e[2]=(c*g*a-b*u*a+b*o*h-i*g*h-c*o*w+i*u*w)*M,e[3]=(f*u*a-c*d*a-f*o*h+i*d*h+c*o*p-i*u*p)*M,e[4]=v*M,e[5]=(A*g*a-m*d*a+m*o*p-t*g*p-A*o*w+t*d*w)*M,e[6]=(m*u*a-l*g*a-m*o*h+t*g*h+l*o*w-t*u*w)*M,e[7]=(l*d*a-A*u*a+A*o*h-t*d*h-l*o*p+t*u*p)*M,e[8]=C*M,e[9]=(m*f*a-A*b*a-m*i*p+t*b*p+A*i*w-t*f*w)*M,e[10]=(l*b*a-m*c*a+m*i*h-t*b*h-l*i*w+t*c*w)*M,e[11]=(A*c*a-l*f*a-A*i*h+t*f*h+l*i*p-t*c*p)*M,e[12]=E*M,e[13]=(A*b*o-m*f*o+m*i*d-t*b*d-A*i*g+t*f*g)*M,e[14]=(m*c*o-l*b*o-m*i*u+t*b*u+l*i*g-t*c*g)*M,e[15]=(l*f*o-A*c*o+A*i*u-t*f*u-l*i*d+t*c*d)*M,this}scale(e){let t=this.elements,i=e.x,o=e.y,a=e.z;return t[0]*=i,t[4]*=o,t[8]*=a,t[1]*=i,t[5]*=o,t[9]*=a,t[2]*=i,t[6]*=o,t[10]*=a,t[3]*=i,t[7]*=o,t[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,o))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),o=Math.sin(t),a=1-i,l=e.x,c=e.y,u=e.z,h=a*l,A=a*c;return this.set(h*l+i,h*c-o*u,h*u+o*c,0,h*c+o*u,A*c+i,A*u-o*l,0,h*u-o*c,A*u+o*l,a*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,o,a,l){return this.set(1,i,a,0,e,1,l,0,t,o,1,0,0,0,0,1),this}compose(e,t,i){let o=this.elements,a=t._x,l=t._y,c=t._z,u=t._w,h=a+a,A=l+l,f=c+c,d=a*h,p=a*A,m=a*f,b=l*A,g=l*f,w=c*f,I=u*h,v=u*A,C=u*f,E=i.x,S=i.y,M=i.z;return o[0]=(1-(b+w))*E,o[1]=(p+C)*E,o[2]=(m-v)*E,o[3]=0,o[4]=(p-C)*S,o[5]=(1-(d+w))*S,o[6]=(g+I)*S,o[7]=0,o[8]=(m+v)*M,o[9]=(g-I)*M,o[10]=(1-(d+b))*M,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,i){let o=this.elements,a=nh.set(o[0],o[1],o[2]).length(),l=nh.set(o[4],o[5],o[6]).length(),c=nh.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),e.x=o[12],e.y=o[13],e.z=o[14],Bs.copy(this);let h=1/a,A=1/l,f=1/c;return Bs.elements[0]*=h,Bs.elements[1]*=h,Bs.elements[2]*=h,Bs.elements[4]*=A,Bs.elements[5]*=A,Bs.elements[6]*=A,Bs.elements[8]*=f,Bs.elements[9]*=f,Bs.elements[10]*=f,t.setFromRotationMatrix(Bs),i.x=a,i.y=l,i.z=c,this}makePerspective(e,t,i,o,a,l,c=po){let u=this.elements,h=2*a/(t-e),A=2*a/(i-o),f=(t+e)/(t-e),d=(i+o)/(i-o),p,m;if(c===po)p=-(l+a)/(l-a),m=-2*l*a/(l-a);else if(c===bd)p=-l/(l-a),m=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return u[0]=h,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=A,u[9]=d,u[13]=0,u[2]=0,u[6]=0,u[10]=p,u[14]=m,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,o,a,l,c=po){let u=this.elements,h=1/(t-e),A=1/(i-o),f=1/(l-a),d=(t+e)*h,p=(i+o)*A,m,b;if(c===po)m=(l+a)*f,b=-2*f;else if(c===bd)m=a*f,b=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-d,u[1]=0,u[5]=2*A,u[9]=0,u[13]=-p,u[2]=0,u[6]=0,u[10]=b,u[14]=-m,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let o=0;o<16;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},nh=new U,Bs=new ke,c6=new U(0,0,0),u6=new U(1,1,1),el=new U,n0=new U,Dr=new U,YB=new ke,ZB=new It,ur=class n{constructor(e=0,t=0,i=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,o=this._order){return this._x=e,this._y=t,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let o=e.elements,a=o[0],l=o[4],c=o[8],u=o[1],h=o[5],A=o[9],f=o[2],d=o[6],p=o[10];switch(t){case"XYZ":this._y=Math.asin(Mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-A,p),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(d,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Mn(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(Mn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-l,h)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Mn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-l,h));break;case"YZX":this._z=Math.asin(Mn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-A,h),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(d,h),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-A,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return YB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YB,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZB.setFromEuler(this),this.setFromQuaternion(ZB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};ur.DEFAULT_ORDER="XYZ";var Th=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},h6=0,KB=new U,ih=new It,ea=new ke,i0=new U,id=new U,A6=new U,f6=new It,jB=new U(1,0,0),JB=new U(0,1,0),qB=new U(0,0,1),d6={type:"added"},$B={type:"removed"},mt=class n extends Ji{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:h6++}),this.uuid=Br(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new U,t=new ur,i=new It,o=new U(1,1,1);function a(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ke},normalMatrix:{value:new dt}}),this.matrix=new ke,this.matrixWorld=new ke,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Th,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ih.setFromAxisAngle(e,t),this.quaternion.multiply(ih),this}rotateOnWorldAxis(e,t){return ih.setFromAxisAngle(e,t),this.quaternion.premultiply(ih),this}rotateX(e){return this.rotateOnAxis(jB,e)}rotateY(e){return this.rotateOnAxis(JB,e)}rotateZ(e){return this.rotateOnAxis(qB,e)}translateOnAxis(e,t){return KB.copy(e).applyQuaternion(this.quaternion),this.position.add(KB.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(jB,e)}translateY(e){return this.translateOnAxis(JB,e)}translateZ(e){return this.translateOnAxis(qB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ea.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?i0.copy(e):i0.set(e,t,i);let o=this.parent;this.updateWorldMatrix(!0,!1),id.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ea.lookAt(id,i0,this.up):ea.lookAt(i0,id,this.up),this.quaternion.setFromRotationMatrix(ea),o&&(ea.extractRotation(o.matrixWorld),ih.setFromRotationMatrix(ea),this.quaternion.premultiply(ih.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(d6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($B)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent($B)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ea.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ea.multiply(e.parent.matrixWorld)),e.applyMatrix4(ea),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,o=this.children.length;i<o;i++){let l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let o=0,a=this.children.length;o<a;o++){let l=this.children[o].getObjectsByProperty(e,t);l.length>0&&(i=i.concat(l))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,e,A6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(id,f6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,o=t.length;i<o;i++){let a=t[i];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let o=this.children;for(let a=0,l=o.length;a<l;a++){let c=o[a];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function a(c,u){return c[u.uuid]===void 0&&(c[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(e.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let u=c.shapes;if(Array.isArray(u))for(let h=0,A=u.length;h<A;h++){let f=u[h];a(e.shapes,f)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let u=0,h=this.material.length;u<h;u++)c.push(a(e.materials,this.material[u]));o.material=c}else o.material=a(e.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let u=this.animations[c];o.animations.push(a(e.animations,u))}}if(t){let c=l(e.geometries),u=l(e.materials),h=l(e.textures),A=l(e.images),f=l(e.shapes),d=l(e.skeletons),p=l(e.animations),m=l(e.nodes);c.length>0&&(i.geometries=c),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),A.length>0&&(i.images=A),f.length>0&&(i.shapes=f),d.length>0&&(i.skeletons=d),p.length>0&&(i.animations=p),m.length>0&&(i.nodes=m)}return i.object=o,i;function l(c){let u=[];for(let h in c){let A=c[h];delete A.metadata,u.push(A)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let o=e.children[i];this.add(o.clone())}return this}};mt.DEFAULT_UP=new U(0,1,0);mt.DEFAULT_MATRIX_AUTO_UPDATE=!0;mt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var ks=new U,ta=new U,kC=new U,na=new U,rh=new U,sh=new U,ek=new U,PC=new U,NC=new U,FC=new U,r0=!1,Gt=class n{constructor(e=new U,t=new U,i=new U){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,o){o.subVectors(i,t),ks.subVectors(e,t),o.cross(ks);let a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}static getBarycoord(e,t,i,o,a){ks.subVectors(o,t),ta.subVectors(i,t),kC.subVectors(e,t);let l=ks.dot(ks),c=ks.dot(ta),u=ks.dot(kC),h=ta.dot(ta),A=ta.dot(kC),f=l*h-c*c;if(f===0)return a.set(-2,-1,-1);let d=1/f,p=(h*u-c*A)*d,m=(l*A-c*u)*d;return a.set(1-p-m,m,p)}static containsPoint(e,t,i,o){return this.getBarycoord(e,t,i,o,na),na.x>=0&&na.y>=0&&na.x+na.y<=1}static getUV(e,t,i,o,a,l,c,u){return r0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),r0=!0),this.getInterpolation(e,t,i,o,a,l,c,u)}static getInterpolation(e,t,i,o,a,l,c,u){return this.getBarycoord(e,t,i,o,na),u.setScalar(0),u.addScaledVector(a,na.x),u.addScaledVector(l,na.y),u.addScaledVector(c,na.z),u}static isFrontFacing(e,t,i,o){return ks.subVectors(i,t),ta.subVectors(e,t),ks.cross(ta).dot(o)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,o){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,i,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ks.subVectors(this.c,this.b),ta.subVectors(this.a,this.b),ks.cross(ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,o,a){return r0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),r0=!0),n.getInterpolation(e,this.a,this.b,this.c,t,i,o,a)}getInterpolation(e,t,i,o,a){return n.getInterpolation(e,this.a,this.b,this.c,t,i,o,a)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,o=this.b,a=this.c,l,c;rh.subVectors(o,i),sh.subVectors(a,i),PC.subVectors(e,i);let u=rh.dot(PC),h=sh.dot(PC);if(u<=0&&h<=0)return t.copy(i);NC.subVectors(e,o);let A=rh.dot(NC),f=sh.dot(NC);if(A>=0&&f<=A)return t.copy(o);let d=u*f-A*h;if(d<=0&&u>=0&&A<=0)return l=u/(u-A),t.copy(i).addScaledVector(rh,l);FC.subVectors(e,a);let p=rh.dot(FC),m=sh.dot(FC);if(m>=0&&p<=m)return t.copy(a);let b=p*h-u*m;if(b<=0&&h>=0&&m<=0)return c=h/(h-m),t.copy(i).addScaledVector(sh,c);let g=A*m-p*f;if(g<=0&&f-A>=0&&p-m>=0)return ek.subVectors(a,o),c=(f-A)/(f-A+(p-m)),t.copy(o).addScaledVector(ek,c);let w=1/(g+b+d);return l=b*w,c=d*w,t.copy(i).addScaledVector(rh,l).addScaledVector(sh,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},p6=0,_n=class extends Ji{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:p6++}),this.uuid=Br(),this.name="",this.type="Material",this.blending=_c,this.side=Ai,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=OE,this.blendDst=QE,this.blendEquation=Sc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=X0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=n3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=W0,this.stencilZFail=W0,this.stencilZPass=W0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==_c&&(i.blending=this.blending),this.side!==Ai&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(a){let l=[];for(let c in a){let u=a[c];delete u.metadata,l.push(u)}return l}if(t){let a=o(e.textures),l=o(e.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let o=t.length;i=new Array(o);for(let a=0;a!==o;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},f3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ps={h:0,s:0,l:0},s0={h:0,s:0,l:0};function UC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var De=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=it){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,os.toWorkingColorSpace(this,t),this}setRGB(e,t,i,o=os.workingColorSpace){return this.r=e,this.g=t,this.b=i,os.toWorkingColorSpace(this,o),this}setHSL(e,t,i,o=os.workingColorSpace){if(e=JE(e,1),t=Mn(t,0,1),i=Mn(i,0,1),t===0)this.r=this.g=this.b=i;else{let a=i<=.5?i*(1+t):i+t-i*t,l=2*i-a;this.r=UC(l,a,e+1/3),this.g=UC(l,a,e),this.b=UC(l,a,e-1/3)}return os.toWorkingColorSpace(this,o),this}setStyle(e,t=it){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let a,l=o[1],c=o[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){let a=o[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=it){let i=f3[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xh(e.r),this.g=xh(e.g),this.b=xh(e.b),this}copyLinearToSRGB(e){return this.r=IC(e.r),this.g=IC(e.g),this.b=IC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=it){return os.fromWorkingColorSpace(Fi.copy(this),e),Math.round(Mn(Fi.r*255,0,255))*65536+Math.round(Mn(Fi.g*255,0,255))*256+Math.round(Mn(Fi.b*255,0,255))}getHexString(e=it){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=os.workingColorSpace){os.fromWorkingColorSpace(Fi.copy(this),t);let i=Fi.r,o=Fi.g,a=Fi.b,l=Math.max(i,o,a),c=Math.min(i,o,a),u,h,A=(c+l)/2;if(c===l)u=0,h=0;else{let f=l-c;switch(h=A<=.5?f/(l+c):f/(2-l-c),l){case i:u=(o-a)/f+(o<a?6:0);break;case o:u=(a-i)/f+2;break;case a:u=(i-o)/f+4;break}u/=6}return e.h=u,e.s=h,e.l=A,e}getRGB(e,t=os.workingColorSpace){return os.fromWorkingColorSpace(Fi.copy(this),t),e.r=Fi.r,e.g=Fi.g,e.b=Fi.b,e}getStyle(e=it){os.fromWorkingColorSpace(Fi.copy(this),e);let t=Fi.r,i=Fi.g,o=Fi.b;return e!==it?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,t,i){return this.getHSL(Ps),Ps.h+=e,Ps.s+=t,Ps.l+=i,this.setHSL(Ps.h,Ps.s,Ps.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ps),e.getHSL(s0);let i=fd(Ps.h,s0.h,t),o=fd(Ps.s,s0.s,t),a=fd(Ps.l,s0.l,t);return this.setHSL(i,o,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,o=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*o,this.g=a[1]*t+a[4]*i+a[7]*o,this.b=a[2]*t+a[5]*i+a[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Fi=new De;De.NAMES=f3;var Nt=class extends _n{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},ra=m6();function m6(){let n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),o=new Uint32Array(512);for(let u=0;u<256;++u){let h=u-127;h<-27?(i[u]=0,i[u|256]=32768,o[u]=24,o[u|256]=24):h<-14?(i[u]=1024>>-h-14,i[u|256]=1024>>-h-14|32768,o[u]=-h-1,o[u|256]=-h-1):h<=15?(i[u]=h+15<<10,i[u|256]=h+15<<10|32768,o[u]=13,o[u|256]=13):h<128?(i[u]=31744,i[u|256]=64512,o[u]=24,o[u|256]=24):(i[u]=31744,i[u|256]=64512,o[u]=13,o[u|256]=13)}let a=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,A=0;for(;!(h&8388608);)h<<=1,A-=8388608;h&=-8388609,A+=947912704,a[u]=h|A}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)l[u]=u<<23;l[31]=1199570944,l[32]=2147483648;for(let u=33;u<63;++u)l[u]=2147483648+(u-32<<23);l[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(c[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:o,mantissaTable:a,exponentTable:l,offsetTable:c}}function ar(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Mn(n,-65504,65504),ra.floatView[0]=n;let e=ra.uint32View[0],t=e>>23&511;return ra.baseTable[t]+((e&8388607)>>ra.shiftTable[t])}function hd(n){let e=n>>10;return ra.uint32View[0]=ra.mantissaTable[ra.offsetTable[e]+(n&1023)]+ra.exponentTable[e],ra.floatView[0]}var g6={toHalfFloat:ar,fromHalfFloat:hd},jn=new U,o0=new he,$e=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=wd,this.updateRange={offset:0,count:-1},this.gpuType=cs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let o=0,a=this.itemSize;o<a;o++)this.array[e+o]=t.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)o0.fromBufferAttribute(this,t),o0.applyMatrix3(e),this.setXY(t,o0.x,o0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix3(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix4(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyNormalMatrix(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.transformDirection(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Lr(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Lr(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Lr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Lr(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,o){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,t,i,o,a){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==wd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},kS=class extends $e{constructor(e,t,i){super(new Int8Array(e),t,i)}},PS=class extends $e{constructor(e,t,i){super(new Uint8Array(e),t,i)}},NS=class extends $e{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}},FS=class extends $e{constructor(e,t,i){super(new Int16Array(e),t,i)}},Pc=class extends $e{constructor(e,t,i){super(new Uint16Array(e),t,i)}},US=class extends $e{constructor(e,t,i){super(new Int32Array(e),t,i)}},Id=class extends $e{constructor(e,t,i){super(new Uint32Array(e),t,i)}},OS=class extends $e{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=hd(this.array[e*this.itemSize]);return this.normalized&&(t=Lr(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=ar(t),this}getY(e){let t=hd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Lr(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=ar(t),this}getZ(e){let t=hd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Lr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=ar(t),this}getW(e){let t=hd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Lr(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=ar(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this}setXYZ(e,t,i,o){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this.array[e+2]=ar(o),this}setXYZW(e,t,i,o,a){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this.array[e+2]=ar(o),this.array[e+3]=ar(a),this}},Ve=class extends $e{constructor(e,t,i){super(new Float32Array(e),t,i)}},QS=class extends $e{constructor(e,t,i){super(new Float64Array(e),t,i)}},y6=0,ss=new ke,OC=new mt,oh=new U,Rr=new Ht,rd=new Ht,hi=new U,Ke=class n extends Ji{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:y6++}),this.uuid=Br(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(A3(e)?Id:Pc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let a=new dt().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}let o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ss.makeRotationFromQuaternion(e),this.applyMatrix4(ss),this}rotateX(e){return ss.makeRotationX(e),this.applyMatrix4(ss),this}rotateY(e){return ss.makeRotationY(e),this.applyMatrix4(ss),this}rotateZ(e){return ss.makeRotationZ(e),this.applyMatrix4(ss),this}translate(e,t,i){return ss.makeTranslation(e,t,i),this.applyMatrix4(ss),this}scale(e,t,i){return ss.makeScale(e,t,i),this.applyMatrix4(ss),this}lookAt(e){return OC.lookAt(e),OC.updateMatrix(),this.applyMatrix4(OC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oh).negate(),this.translate(oh.x,oh.y,oh.z),this}setFromPoints(e){let t=[];for(let i=0,o=e.length;i<o;i++){let a=e[i];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Ve(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ht);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){let a=t[i];Rr.setFromBufferAttribute(a),this.morphTargetsRelative?(hi.addVectors(this.boundingBox.min,Rr.min),this.boundingBox.expandByPoint(hi),hi.addVectors(this.boundingBox.max,Rr.max),this.boundingBox.expandByPoint(hi)):(this.boundingBox.expandByPoint(Rr.min),this.boundingBox.expandByPoint(Rr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vt);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(e){let i=this.boundingSphere.center;if(Rr.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){let c=t[a];rd.setFromBufferAttribute(c),this.morphTargetsRelative?(hi.addVectors(Rr.min,rd.min),Rr.expandByPoint(hi),hi.addVectors(Rr.max,rd.max),Rr.expandByPoint(hi)):(Rr.expandByPoint(rd.min),Rr.expandByPoint(rd.max))}Rr.getCenter(i);let o=0;for(let a=0,l=e.count;a<l;a++)hi.fromBufferAttribute(e,a),o=Math.max(o,i.distanceToSquared(hi));if(t)for(let a=0,l=t.length;a<l;a++){let c=t[a],u=this.morphTargetsRelative;for(let h=0,A=c.count;h<A;h++)hi.fromBufferAttribute(c,h),u&&(oh.fromBufferAttribute(e,h),hi.add(oh)),o=Math.max(o,i.distanceToSquared(hi))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,o=t.position.array,a=t.normal.array,l=t.uv.array,c=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $e(new Float32Array(4*c),4));let u=this.getAttribute("tangent").array,h=[],A=[];for(let D=0;D<c;D++)h[D]=new U,A[D]=new U;let f=new U,d=new U,p=new U,m=new he,b=new he,g=new he,w=new U,I=new U;function v(D,R,B){f.fromArray(o,D*3),d.fromArray(o,R*3),p.fromArray(o,B*3),m.fromArray(l,D*2),b.fromArray(l,R*2),g.fromArray(l,B*2),d.sub(f),p.sub(f),b.sub(m),g.sub(m);let P=1/(b.x*g.y-g.x*b.y);isFinite(P)&&(w.copy(d).multiplyScalar(g.y).addScaledVector(p,-b.y).multiplyScalar(P),I.copy(p).multiplyScalar(b.x).addScaledVector(d,-g.x).multiplyScalar(P),h[D].add(w),h[R].add(w),h[B].add(w),A[D].add(I),A[R].add(I),A[B].add(I))}let C=this.groups;C.length===0&&(C=[{start:0,count:i.length}]);for(let D=0,R=C.length;D<R;++D){let B=C[D],P=B.start,F=B.count;for(let z=P,Q=P+F;z<Q;z+=3)v(i[z+0],i[z+1],i[z+2])}let E=new U,S=new U,M=new U,_=new U;function T(D){M.fromArray(a,D*3),_.copy(M);let R=h[D];E.copy(R),E.sub(M.multiplyScalar(M.dot(R))).normalize(),S.crossVectors(_,R);let P=S.dot(A[D])<0?-1:1;u[D*4]=E.x,u[D*4+1]=E.y,u[D*4+2]=E.z,u[D*4+3]=P}for(let D=0,R=C.length;D<R;++D){let B=C[D],P=B.start,F=B.count;for(let z=P,Q=P+F;z<Q;z+=3)T(i[z+0]),T(i[z+1]),T(i[z+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new $e(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,p=i.count;d<p;d++)i.setXYZ(d,0,0,0);let o=new U,a=new U,l=new U,c=new U,u=new U,h=new U,A=new U,f=new U;if(e)for(let d=0,p=e.count;d<p;d+=3){let m=e.getX(d+0),b=e.getX(d+1),g=e.getX(d+2);o.fromBufferAttribute(t,m),a.fromBufferAttribute(t,b),l.fromBufferAttribute(t,g),A.subVectors(l,a),f.subVectors(o,a),A.cross(f),c.fromBufferAttribute(i,m),u.fromBufferAttribute(i,b),h.fromBufferAttribute(i,g),c.add(A),u.add(A),h.add(A),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(b,u.x,u.y,u.z),i.setXYZ(g,h.x,h.y,h.z)}else for(let d=0,p=t.count;d<p;d+=3)o.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),l.fromBufferAttribute(t,d+2),A.subVectors(l,a),f.subVectors(o,a),A.cross(f),i.setXYZ(d+0,A.x,A.y,A.z),i.setXYZ(d+1,A.x,A.y,A.z),i.setXYZ(d+2,A.x,A.y,A.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hi.fromBufferAttribute(e,t),hi.normalize(),e.setXYZ(t,hi.x,hi.y,hi.z)}toNonIndexed(){function e(c,u){let h=c.array,A=c.itemSize,f=c.normalized,d=new h.constructor(u.length*A),p=0,m=0;for(let b=0,g=u.length;b<g;b++){c.isInterleavedBufferAttribute?p=u[b]*c.data.stride+c.offset:p=u[b]*A;for(let w=0;w<A;w++)d[m++]=h[p++]}return new $e(d,A,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,o=this.attributes;for(let c in o){let u=o[c],h=e(u,i);t.setAttribute(c,h)}let a=this.morphAttributes;for(let c in a){let u=[],h=a[c];for(let A=0,f=h.length;A<f;A++){let d=h[A],p=e(d,i);u.push(p)}t.morphAttributes[c]=u}t.morphTargetsRelative=this.morphTargetsRelative;let l=this.groups;for(let c=0,u=l.length;c<u;c++){let h=l[c];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let u in i){let h=i[u];e.data.attributes[u]=h.toJSON(e.data)}let o={},a=!1;for(let u in this.morphAttributes){let h=this.morphAttributes[u],A=[];for(let f=0,d=h.length;f<d;f++){let p=h[f];A.push(p.toJSON(e.data))}A.length>0&&(o[u]=A,a=!0)}a&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);let l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));let c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let o=e.attributes;for(let h in o){let A=o[h];this.setAttribute(h,A.clone(t))}let a=e.morphAttributes;for(let h in a){let A=[],f=a[h];for(let d=0,p=f.length;d<p;d++)A.push(f[d].clone(t));this.morphAttributes[h]=A}this.morphTargetsRelative=e.morphTargetsRelative;let l=e.groups;for(let h=0,A=l.length;h<A;h++){let f=l[h];this.addGroup(f.start,f.count,f.materialIndex)}let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},tk=new ke,mc=new cr,a0=new Vt,nk=new U,ah=new U,lh=new U,ch=new U,QC=new U,l0=new U,c0=new he,u0=new he,h0=new he,ik=new U,rk=new U,sk=new U,A0=new U,f0=new U,He=class extends mt{constructor(e=new Ke,t=new Nt){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(e,t){let i=this.geometry,o=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(o,e);let c=this.morphTargetInfluences;if(a&&c){l0.set(0,0,0);for(let u=0,h=a.length;u<h;u++){let A=c[u],f=a[u];A!==0&&(QC.fromBufferAttribute(f,e),l?l0.addScaledVector(QC,A):l0.addScaledVector(QC.sub(t),A))}t.add(l0)}return t}raycast(e,t){let i=this.geometry,o=this.material,a=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),a0.copy(i.boundingSphere),a0.applyMatrix4(a),mc.copy(e.ray).recast(e.near),!(a0.containsPoint(mc.origin)===!1&&(mc.intersectSphere(a0,nk)===null||mc.origin.distanceToSquared(nk)>(e.far-e.near)**2))&&(tk.copy(a).invert(),mc.copy(e.ray).applyMatrix4(tk),!(i.boundingBox!==null&&mc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,mc)))}_computeIntersections(e,t,i){let o,a=this.geometry,l=this.material,c=a.index,u=a.attributes.position,h=a.attributes.uv,A=a.attributes.uv1,f=a.attributes.normal,d=a.groups,p=a.drawRange;if(c!==null)if(Array.isArray(l))for(let m=0,b=d.length;m<b;m++){let g=d[m],w=l[g.materialIndex],I=Math.max(g.start,p.start),v=Math.min(c.count,Math.min(g.start+g.count,p.start+p.count));for(let C=I,E=v;C<E;C+=3){let S=c.getX(C),M=c.getX(C+1),_=c.getX(C+2);o=d0(this,w,e,i,h,A,f,S,M,_),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{let m=Math.max(0,p.start),b=Math.min(c.count,p.start+p.count);for(let g=m,w=b;g<w;g+=3){let I=c.getX(g),v=c.getX(g+1),C=c.getX(g+2);o=d0(this,l,e,i,h,A,f,I,v,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(u!==void 0)if(Array.isArray(l))for(let m=0,b=d.length;m<b;m++){let g=d[m],w=l[g.materialIndex],I=Math.max(g.start,p.start),v=Math.min(u.count,Math.min(g.start+g.count,p.start+p.count));for(let C=I,E=v;C<E;C+=3){let S=C,M=C+1,_=C+2;o=d0(this,w,e,i,h,A,f,S,M,_),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{let m=Math.max(0,p.start),b=Math.min(u.count,p.start+p.count);for(let g=m,w=b;g<w;g+=3){let I=g,v=g+1,C=g+2;o=d0(this,l,e,i,h,A,f,I,v,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}};function v6(n,e,t,i,o,a,l,c){let u;if(e.side===Gn?u=i.intersectTriangle(l,a,o,!0,c):u=i.intersectTriangle(o,a,l,e.side===Ai,c),u===null)return null;f0.copy(c),f0.applyMatrix4(n.matrixWorld);let h=t.ray.origin.distanceTo(f0);return h<t.near||h>t.far?null:{distance:h,point:f0.clone(),object:n}}function d0(n,e,t,i,o,a,l,c,u,h){n.getVertexPosition(c,ah),n.getVertexPosition(u,lh),n.getVertexPosition(h,ch);let A=v6(n,e,t,i,ah,lh,ch,A0);if(A){o&&(c0.fromBufferAttribute(o,c),u0.fromBufferAttribute(o,u),h0.fromBufferAttribute(o,h),A.uv=Gt.getInterpolation(A0,ah,lh,ch,c0,u0,h0,new he)),a&&(c0.fromBufferAttribute(a,c),u0.fromBufferAttribute(a,u),h0.fromBufferAttribute(a,h),A.uv1=Gt.getInterpolation(A0,ah,lh,ch,c0,u0,h0,new he),A.uv2=A.uv1),l&&(ik.fromBufferAttribute(l,c),rk.fromBufferAttribute(l,u),sk.fromBufferAttribute(l,h),A.normal=Gt.getInterpolation(A0,ah,lh,ch,ik,rk,sk,new U),A.normal.dot(i.direction)>0&&A.normal.multiplyScalar(-1));let f={a:c,b:u,c:h,normal:new U,materialIndex:0};Gt.getNormal(ah,lh,ch,f.normal),A.face=f}return A}var wn=class n extends Ke{constructor(e=1,t=1,i=1,o=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:o,heightSegments:a,depthSegments:l};let c=this;o=Math.floor(o),a=Math.floor(a),l=Math.floor(l);let u=[],h=[],A=[],f=[],d=0,p=0;m("z","y","x",-1,-1,i,t,e,l,a,0),m("z","y","x",1,-1,i,t,-e,l,a,1),m("x","z","y",1,1,e,i,t,o,l,2),m("x","z","y",1,-1,e,i,-t,o,l,3),m("x","y","z",1,-1,e,t,i,o,a,4),m("x","y","z",-1,-1,e,t,-i,o,a,5),this.setIndex(u),this.setAttribute("position",new Ve(h,3)),this.setAttribute("normal",new Ve(A,3)),this.setAttribute("uv",new Ve(f,2));function m(b,g,w,I,v,C,E,S,M,_,T){let D=C/M,R=E/_,B=C/2,P=E/2,F=S/2,z=M+1,Q=_+1,V=0,G=0,O=new U;for(let W=0;W<Q;W++){let k=W*R-P;for(let Y=0;Y<z;Y++){let te=Y*D-B;O[b]=te*I,O[g]=k*v,O[w]=F,h.push(O.x,O.y,O.z),O[b]=0,O[g]=0,O[w]=S>0?1:-1,A.push(O.x,O.y,O.z),f.push(Y/M),f.push(1-W/_),V+=1}}for(let W=0;W<_;W++)for(let k=0;k<M;k++){let Y=d+k+z*W,te=d+k+z*(W+1),ie=d+(k+1)+z*(W+1),re=d+(k+1)+z*W;u.push(Y,te,re),u.push(te,ie,re),G+=6}c.addGroup(p,G,T),p+=G,d+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function _h(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let o=n[t][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=o.clone():Array.isArray(o)?e[t][i]=o.slice():e[t][i]=o}}return e}function Ki(n){let e={};for(let t=0;t<n.length;t++){let i=_h(n[t]);for(let o in i)e[o]=i[o]}return e}function w6(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function d3(n){return n.getRenderTarget()===null?n.outputColorSpace:kr}var oi={clone:_h,merge:Ki},b6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,x6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,yt=class extends _n{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=b6,this.fragmentShader=x6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_h(e.uniforms),this.uniformsGroups=w6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let o in this.uniforms){let l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Dh=class extends mt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ke,this.projectionMatrix=new ke,this.projectionMatrixInverse=new ke,this.coordinateSystem=po}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},rn=class extends Dh{constructor(e=50,t=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Ih*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Rc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ih*2*Math.atan(Math.tan(Rc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,o,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Rc*.5*this.fov)/this.zoom,i=2*t,o=this.aspect*i,a=-.5*o,l=this.view;if(this.view!==null&&this.view.enabled){let u=l.fullWidth,h=l.fullHeight;a+=l.offsetX*o/u,t-=l.offsetY*i/h,o*=l.width/u,i*=l.height/h}let c=this.filmOffset;c!==0&&(a+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},uh=-90,hh=1,K0=class extends mt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;let o=new rn(uh,hh,e,t);o.layers=this.layers,this.add(o);let a=new rn(uh,hh,e,t);a.layers=this.layers,this.add(a);let l=new rn(uh,hh,e,t);l.layers=this.layers,this.add(l);let c=new rn(uh,hh,e,t);c.layers=this.layers,this.add(c);let u=new rn(uh,hh,e,t);u.layers=this.layers,this.add(u);let h=new rn(uh,hh,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,o,a,l,c,u]=t;for(let h of t)this.remove(h);if(e===po)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===bd)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,a,l,c,u,h]=this.children,A=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=mo,e.xr.enabled=!1;let p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,o),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,c),e.setRenderTarget(i,4),e.render(t,u),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(t,h),e.setRenderTarget(A),e.toneMapping=f,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}},Nc=class extends jt{constructor(e,t,i,o,a,l,c,u,h,A){e=e!==void 0?e:[],t=t!==void 0?t:rl,super(e,t,i,o,a,l,c,u,h,A),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},j0=class extends _t{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];t.encoding!==void 0&&(dd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===il?it:yo),this.texture=new Nc(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Et}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new wn(5,5,5),a=new yt({name:"CubemapFromEquirect",uniforms:_h(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Gn,blending:lr});a.uniforms.tEquirect.value=t;let l=new He(o,a),c=t.minFilter;return t.minFilter===Fs&&(t.minFilter=Et),new K0(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,o){let a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,o);e.setRenderTarget(a)}},GC=new U,C6=new U,S6=new dt,On=class{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,o){return this.normal.set(e,t,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let o=GC.subVectors(i,t).cross(C6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(GC),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/o;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||S6.getNormalMatrix(e),o=this.coplanarPoint(GC).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},gc=new Vt,p0=new U,al=class{constructor(e=new On,t=new On,i=new On,o=new On,a=new On,l=new On){this.planes=[e,t,i,o,a,l]}set(e,t,i,o,a,l){let c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(o),c[4].copy(a),c[5].copy(l),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=po){let i=this.planes,o=e.elements,a=o[0],l=o[1],c=o[2],u=o[3],h=o[4],A=o[5],f=o[6],d=o[7],p=o[8],m=o[9],b=o[10],g=o[11],w=o[12],I=o[13],v=o[14],C=o[15];if(i[0].setComponents(u-a,d-h,g-p,C-w).normalize(),i[1].setComponents(u+a,d+h,g+p,C+w).normalize(),i[2].setComponents(u+l,d+A,g+m,C+I).normalize(),i[3].setComponents(u-l,d-A,g-m,C-I).normalize(),i[4].setComponents(u-c,d-f,g-b,C-v).normalize(),t===po)i[5].setComponents(u+c,d+f,g+b,C+v).normalize();else if(t===bd)i[5].setComponents(c,f,b,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),gc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),gc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gc)}intersectsSprite(e){return gc.center.set(0,0,0),gc.radius=.7071067811865476,gc.applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSphere(e){let t=this.planes,i=e.center,o=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let o=t[i];if(p0.x=o.normal.x>0?e.max.x:e.min.x,p0.y=o.normal.y>0?e.max.y:e.min.y,p0.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(p0)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function p3(){let n=null,e=!1,t=null,i=null;function o(a,l){t(a,l),i=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function E6(n,e){let t=e.isWebGL2,i=new WeakMap;function o(h,A){let f=h.array,d=h.usage,p=n.createBuffer();n.bindBuffer(A,p),n.bufferData(A,f,d),h.onUploadCallback();let m;if(f instanceof Float32Array)m=n.FLOAT;else if(f instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)m=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=n.SHORT;else if(f instanceof Uint32Array)m=n.UNSIGNED_INT;else if(f instanceof Int32Array)m=n.INT;else if(f instanceof Int8Array)m=n.BYTE;else if(f instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:h.version}}function a(h,A,f){let d=A.array,p=A.updateRange;n.bindBuffer(f,h),p.count===-1?n.bufferSubData(f,0,d):(t?n.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):n.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1),A.onUploadCallback()}function l(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);let A=i.get(h);A&&(n.deleteBuffer(A.buffer),i.delete(h))}function u(h,A){if(h.isGLBufferAttribute){let d=i.get(h);(!d||d.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);let f=i.get(h);f===void 0?i.set(h,o(h,A)):f.version<h.version&&(a(f.buffer,h,A),f.version=h.version)}return{get:l,remove:c,update:u}}var Ii=class n extends Ke{constructor(e=1,t=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:o};let a=e/2,l=t/2,c=Math.floor(i),u=Math.floor(o),h=c+1,A=u+1,f=e/c,d=t/u,p=[],m=[],b=[],g=[];for(let w=0;w<A;w++){let I=w*d-l;for(let v=0;v<h;v++){let C=v*f-a;m.push(C,-I,0),b.push(0,0,1),g.push(v/c),g.push(1-w/u)}}for(let w=0;w<u;w++)for(let I=0;I<c;I++){let v=I+h*w,C=I+h*(w+1),E=I+1+h*(w+1),S=I+1+h*w;p.push(v,C,S),p.push(C,E,S)}this.setIndex(p),this.setAttribute("position",new Ve(m,3)),this.setAttribute("normal",new Ve(b,3)),this.setAttribute("uv",new Ve(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},I6=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,M6=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,T6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D6=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,R6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,L6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,B6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,k6=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,P6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,N6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,F6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,U6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,O6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Q6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,G6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,z6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,H6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,V6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,W6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,X6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Y6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Z6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,K6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,j6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,J6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,q6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eY="gl_FragColor = linearToOutputTexel( gl_FragColor );",tY=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,nY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,hY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AY=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fY=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dY=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pY=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,CY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,SY=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,EY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,IY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,MY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_Y=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,DY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,RY=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,LY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,BY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,NY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,UY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,OY=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,QY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,GY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,zY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,XY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,YY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ZY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,KY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$Y=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eZ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rZ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,oZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aZ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cZ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,hZ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,yZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,CZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,IZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_Z=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,RZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,LZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FZ=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,UZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,VZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,WZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ZZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$Z=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eK=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tK=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ht={alphahash_fragment:I6,alphahash_pars_fragment:M6,alphamap_fragment:T6,alphamap_pars_fragment:_6,alphatest_fragment:D6,alphatest_pars_fragment:R6,aomap_fragment:L6,aomap_pars_fragment:B6,begin_vertex:k6,beginnormal_vertex:P6,bsdfs:N6,iridescence_fragment:F6,bumpmap_pars_fragment:U6,clipping_planes_fragment:O6,clipping_planes_pars_fragment:Q6,clipping_planes_pars_vertex:G6,clipping_planes_vertex:z6,color_fragment:H6,color_pars_fragment:V6,color_pars_vertex:W6,color_vertex:X6,common:Y6,cube_uv_reflection_fragment:Z6,defaultnormal_vertex:K6,displacementmap_pars_vertex:j6,displacementmap_vertex:J6,emissivemap_fragment:q6,emissivemap_pars_fragment:$6,colorspace_fragment:eY,colorspace_pars_fragment:tY,envmap_fragment:nY,envmap_common_pars_fragment:iY,envmap_pars_fragment:rY,envmap_pars_vertex:sY,envmap_physical_pars_fragment:gY,envmap_vertex:oY,fog_vertex:aY,fog_pars_vertex:lY,fog_fragment:cY,fog_pars_fragment:uY,gradientmap_pars_fragment:hY,lightmap_fragment:AY,lightmap_pars_fragment:fY,lights_lambert_fragment:dY,lights_lambert_pars_fragment:pY,lights_pars_begin:mY,lights_toon_fragment:yY,lights_toon_pars_fragment:vY,lights_phong_fragment:wY,lights_phong_pars_fragment:bY,lights_physical_fragment:xY,lights_physical_pars_fragment:CY,lights_fragment_begin:SY,lights_fragment_maps:EY,lights_fragment_end:IY,logdepthbuf_fragment:MY,logdepthbuf_pars_fragment:TY,logdepthbuf_pars_vertex:_Y,logdepthbuf_vertex:DY,map_fragment:RY,map_pars_fragment:LY,map_particle_fragment:BY,map_particle_pars_fragment:kY,metalnessmap_fragment:PY,metalnessmap_pars_fragment:NY,morphcolor_vertex:FY,morphnormal_vertex:UY,morphtarget_pars_vertex:OY,morphtarget_vertex:QY,normal_fragment_begin:GY,normal_fragment_maps:zY,normal_pars_fragment:HY,normal_pars_vertex:VY,normal_vertex:WY,normalmap_pars_fragment:XY,clearcoat_normal_fragment_begin:YY,clearcoat_normal_fragment_maps:ZY,clearcoat_pars_fragment:KY,iridescence_pars_fragment:jY,opaque_fragment:JY,packing:qY,premultiplied_alpha_fragment:$Y,project_vertex:eZ,dithering_fragment:tZ,dithering_pars_fragment:nZ,roughnessmap_fragment:iZ,roughnessmap_pars_fragment:rZ,shadowmap_pars_fragment:sZ,shadowmap_pars_vertex:oZ,shadowmap_vertex:aZ,shadowmask_pars_fragment:lZ,skinbase_vertex:cZ,skinning_pars_vertex:uZ,skinning_vertex:hZ,skinnormal_vertex:AZ,specularmap_fragment:fZ,specularmap_pars_fragment:dZ,tonemapping_fragment:pZ,tonemapping_pars_fragment:mZ,transmission_fragment:gZ,transmission_pars_fragment:yZ,uv_pars_fragment:vZ,uv_pars_vertex:wZ,uv_vertex:bZ,worldpos_vertex:xZ,background_vert:CZ,background_frag:SZ,backgroundCube_vert:EZ,backgroundCube_frag:IZ,cube_vert:MZ,cube_frag:TZ,depth_vert:_Z,depth_frag:DZ,distanceRGBA_vert:RZ,distanceRGBA_frag:LZ,equirect_vert:BZ,equirect_frag:kZ,linedashed_vert:PZ,linedashed_frag:NZ,meshbasic_vert:FZ,meshbasic_frag:UZ,meshlambert_vert:OZ,meshlambert_frag:QZ,meshmatcap_vert:GZ,meshmatcap_frag:zZ,meshnormal_vert:HZ,meshnormal_frag:VZ,meshphong_vert:WZ,meshphong_frag:XZ,meshphysical_vert:YZ,meshphysical_frag:ZZ,meshtoon_vert:KZ,meshtoon_frag:jZ,points_vert:JZ,points_frag:qZ,shadow_vert:$Z,shadow_frag:eK,sprite_vert:tK,sprite_frag:nK},Xe={common:{diffuse:{value:new De(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dt},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new De(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new De(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0},uvTransform:{value:new dt}},sprite:{diffuse:{value:new De(16777215)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}}},ls={basic:{uniforms:Ki([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:Ki([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new De(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:Ki([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new De(0)},specular:{value:new De(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:Ki([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new De(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:Ki([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new De(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:Ki([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:Ki([Xe.points,Xe.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:Ki([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:Ki([Xe.common,Xe.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:Ki([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:Ki([Xe.sprite,Xe.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ht.backgroundCube_vert,fragmentShader:ht.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:Ki([Xe.common,Xe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:Ki([Xe.lights,Xe.fog,{color:{value:new De(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};ls.physical={uniforms:Ki([ls.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dt},clearcoatNormalScale:{value:new he(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dt},sheen:{value:0},sheenColor:{value:new De(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dt},transmissionSamplerSize:{value:new he},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dt},attenuationDistance:{value:0},attenuationColor:{value:new De(0)},specularColor:{value:new De(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dt},anisotropyVector:{value:new he},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dt}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};var m0={r:0,b:0,g:0};function iK(n,e,t,i,o,a,l){let c=new De(0),u=a===!0?0:1,h,A,f=null,d=0,p=null;function m(g,w){let I=!1,v=w.isScene===!0?w.background:null;switch(v&&v.isTexture&&(v=(w.backgroundBlurriness>0?t:e).get(v)),v===null?b(c,u):v&&v.isColor&&(b(v,1),I=!0),n.xr.getEnvironmentBlendMode()){case"opaque":I=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,l),I=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,l),I=!0;break}(n.autoClear||I)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Hh)?(A===void 0&&(A=new He(new wn(1,1,1),new yt({name:"BackgroundCubeMaterial",uniforms:_h(ls.backgroundCube.uniforms),vertexShader:ls.backgroundCube.vertexShader,fragmentShader:ls.backgroundCube.fragmentShader,side:Gn,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(S,M,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(A)),A.material.uniforms.envMap.value=v,A.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,A.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,A.material.toneMapped=v.colorSpace!==it,(f!==v||d!==v.version||p!==n.toneMapping)&&(A.material.needsUpdate=!0,f=v,d=v.version,p=n.toneMapping),A.layers.enableAll(),g.unshift(A,A.geometry,A.material,0,0,null)):v&&v.isTexture&&(h===void 0&&(h=new He(new Ii(2,2),new yt({name:"BackgroundMaterial",uniforms:_h(ls.background.uniforms),vertexShader:ls.background.vertexShader,fragmentShader:ls.background.fragmentShader,side:Ai,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(h)),h.material.uniforms.t2D.value=v,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.toneMapped=v.colorSpace!==it,v.matrixAutoUpdate===!0&&v.updateMatrix(),h.material.uniforms.uvTransform.value.copy(v.matrix),(f!==v||d!==v.version||p!==n.toneMapping)&&(h.material.needsUpdate=!0,f=v,d=v.version,p=n.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null))}function b(g,w){g.getRGB(m0,d3(n)),i.buffers.color.setClear(m0.r,m0.g,m0.b,w,l)}return{getClearColor:function(){return c},setClearColor:function(g,w=1){c.set(g),u=w,b(c,u)},getClearAlpha:function(){return u},setClearAlpha:function(g){u=g,b(c,u)},render:m}}function rK(n,e,t,i){let o=n.getParameter(n.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||a!==null,c={},u=g(null),h=u,A=!1;function f(F,z,Q,V,G){let O=!1;if(l){let W=b(V,Q,z);h!==W&&(h=W,p(h.object)),O=w(F,V,Q,G),O&&I(F,V,Q,G)}else{let W=z.wireframe===!0;(h.geometry!==V.id||h.program!==Q.id||h.wireframe!==W)&&(h.geometry=V.id,h.program=Q.id,h.wireframe=W,O=!0)}G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(O||A)&&(A=!1,_(F,z,Q,V),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function d(){return i.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function p(F){return i.isWebGL2?n.bindVertexArray(F):a.bindVertexArrayOES(F)}function m(F){return i.isWebGL2?n.deleteVertexArray(F):a.deleteVertexArrayOES(F)}function b(F,z,Q){let V=Q.wireframe===!0,G=c[F.id];G===void 0&&(G={},c[F.id]=G);let O=G[z.id];O===void 0&&(O={},G[z.id]=O);let W=O[V];return W===void 0&&(W=g(d()),O[V]=W),W}function g(F){let z=[],Q=[],V=[];for(let G=0;G<o;G++)z[G]=0,Q[G]=0,V[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:Q,attributeDivisors:V,object:F,attributes:{},index:null}}function w(F,z,Q,V){let G=h.attributes,O=z.attributes,W=0,k=Q.getAttributes();for(let Y in k)if(k[Y].location>=0){let ie=G[Y],re=O[Y];if(re===void 0&&(Y==="instanceMatrix"&&F.instanceMatrix&&(re=F.instanceMatrix),Y==="instanceColor"&&F.instanceColor&&(re=F.instanceColor)),ie===void 0||ie.attribute!==re||re&&ie.data!==re.data)return!0;W++}return h.attributesNum!==W||h.index!==V}function I(F,z,Q,V){let G={},O=z.attributes,W=0,k=Q.getAttributes();for(let Y in k)if(k[Y].location>=0){let ie=O[Y];ie===void 0&&(Y==="instanceMatrix"&&F.instanceMatrix&&(ie=F.instanceMatrix),Y==="instanceColor"&&F.instanceColor&&(ie=F.instanceColor));let re={};re.attribute=ie,ie&&ie.data&&(re.data=ie.data),G[Y]=re,W++}h.attributes=G,h.attributesNum=W,h.index=V}function v(){let F=h.newAttributes;for(let z=0,Q=F.length;z<Q;z++)F[z]=0}function C(F){E(F,0)}function E(F,z){let Q=h.newAttributes,V=h.enabledAttributes,G=h.attributeDivisors;Q[F]=1,V[F]===0&&(n.enableVertexAttribArray(F),V[F]=1),G[F]!==z&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,z),G[F]=z)}function S(){let F=h.newAttributes,z=h.enabledAttributes;for(let Q=0,V=z.length;Q<V;Q++)z[Q]!==F[Q]&&(n.disableVertexAttribArray(Q),z[Q]=0)}function M(F,z,Q,V,G,O,W){W===!0?n.vertexAttribIPointer(F,z,Q,G,O):n.vertexAttribPointer(F,z,Q,V,G,O)}function _(F,z,Q,V){if(i.isWebGL2===!1&&(F.isInstancedMesh||V.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();let G=V.attributes,O=Q.getAttributes(),W=z.defaultAttributeValues;for(let k in O){let Y=O[k];if(Y.location>=0){let te=G[k];if(te===void 0&&(k==="instanceMatrix"&&F.instanceMatrix&&(te=F.instanceMatrix),k==="instanceColor"&&F.instanceColor&&(te=F.instanceColor)),te!==void 0){let ie=te.normalized,re=te.itemSize,se=t.get(te);if(se===void 0)continue;let oe=se.buffer,le=se.type,xe=se.bytesPerElement,_e=i.isWebGL2===!0&&(le===n.INT||le===n.UNSIGNED_INT||te.gpuType===GE);if(te.isInterleavedBufferAttribute){let pe=te.data,K=pe.stride,be=te.offset;if(pe.isInstancedInterleavedBuffer){for(let me=0;me<Y.locationSize;me++)E(Y.location+me,pe.meshPerAttribute);F.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let me=0;me<Y.locationSize;me++)C(Y.location+me);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let me=0;me<Y.locationSize;me++)M(Y.location+me,re/Y.locationSize,le,ie,K*xe,(be+re/Y.locationSize*me)*xe,_e)}else{if(te.isInstancedBufferAttribute){for(let pe=0;pe<Y.locationSize;pe++)E(Y.location+pe,te.meshPerAttribute);F.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let pe=0;pe<Y.locationSize;pe++)C(Y.location+pe);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let pe=0;pe<Y.locationSize;pe++)M(Y.location+pe,re/Y.locationSize,le,ie,re*xe,re/Y.locationSize*pe*xe,_e)}}else if(W!==void 0){let ie=W[k];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(Y.location,ie);break;case 3:n.vertexAttrib3fv(Y.location,ie);break;case 4:n.vertexAttrib4fv(Y.location,ie);break;default:n.vertexAttrib1fv(Y.location,ie)}}}}S()}function T(){B();for(let F in c){let z=c[F];for(let Q in z){let V=z[Q];for(let G in V)m(V[G].object),delete V[G];delete z[Q]}delete c[F]}}function D(F){if(c[F.id]===void 0)return;let z=c[F.id];for(let Q in z){let V=z[Q];for(let G in V)m(V[G].object),delete V[G];delete z[Q]}delete c[F.id]}function R(F){for(let z in c){let Q=c[z];if(Q[F.id]===void 0)continue;let V=Q[F.id];for(let G in V)m(V[G].object),delete V[G];delete Q[F.id]}}function B(){P(),A=!0,h!==u&&(h=u,p(h.object))}function P(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:f,reset:B,resetDefaultState:P,dispose:T,releaseStatesOfGeometry:D,releaseStatesOfProgram:R,initAttributes:v,enableAttribute:C,disableUnusedAttributes:S}}function sK(n,e,t,i){let o=i.isWebGL2,a;function l(h){a=h}function c(h,A){n.drawArrays(a,h,A),t.update(A,a,1)}function u(h,A,f){if(f===0)return;let d,p;if(o)d=n,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](a,h,A,f),t.update(A,a,f)}this.setMode=l,this.render=c,this.renderInstances=u}function oK(n,e,t){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext",c=t.precision!==void 0?t.precision:"highp",u=a(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);let h=l||e.has("WEBGL_draw_buffers"),A=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),v=d>0,C=l||e.has("OES_texture_float"),E=v&&C,S=l?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:l,drawBuffers:h,getMaxAnisotropy:o,getMaxPrecision:a,precision:c,logarithmicDepthBuffer:A,maxTextures:f,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:m,maxAttributes:b,maxVertexUniforms:g,maxVaryings:w,maxFragmentUniforms:I,vertexTextures:v,floatFragmentTextures:C,floatVertexTextures:E,maxSamples:S}}function aK(n){let e=this,t=null,i=0,o=!1,a=!1,l=new On,c=new dt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){let p=f.length!==0||d||i!==0||o;return o=d,i=f.length,p},this.beginShadows=function(){a=!0,A(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,d){t=A(f,d,0)},this.setState=function(f,d,p){let m=f.clippingPlanes,b=f.clipIntersection,g=f.clipShadows,w=n.get(f);if(!o||m===null||m.length===0||a&&!g)a?A(null):h();else{let I=a?0:i,v=I*4,C=w.clippingState||null;u.value=C,C=A(m,d,v,p);for(let E=0;E!==v;++E)C[E]=t[E];w.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=I}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function A(f,d,p,m){let b=f!==null?f.length:0,g=null;if(b!==0){if(g=u.value,m!==!0||g===null){let w=p+b*4,I=d.matrixWorldInverse;c.getNormalMatrix(I),(g===null||g.length<w)&&(g=new Float32Array(w));for(let v=0,C=p;v!==b;++v,C+=4)l.copy(f[v]).applyMatrix4(I,c),l.normal.toArray(g,C),g[C+3]=l.constant}u.value=g,u.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,g}}function lK(n){let e=new WeakMap;function t(l,c){return c===ca?l.mapping=rl:c===yd&&(l.mapping=sl),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){let c=l.mapping;if(c===ca||c===yd)if(e.has(l)){let u=e.get(l).texture;return t(u,l.mapping)}else{let u=l.image;if(u&&u.height>0){let h=new j0(u.height/2);return h.fromEquirectangularTexture(n,l),e.set(l,h),l.addEventListener("dispose",o),t(h.texture,l.mapping)}else return null}}return l}function o(l){let c=l.target;c.removeEventListener("dispose",o);let u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}var Ui=class extends Dh{constructor(e=-1,t=1,i=1,o=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=o,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,o,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2,a=i-e,l=i+e,c=o+t,u=o-t;if(this.view!==null&&this.view.enabled){let h=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,l=a+h*this.view.width,c-=A*this.view.offsetY,u=c-A*this.view.height}this.projectionMatrix.makeOrthographic(a,l,c,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},wh=4,ok=[.125,.215,.35,.446,.526,.582],Ec=20,zC=new Ui,ak=new De,HC=null,Cc=(1+Math.sqrt(5))/2,Ah=1/Cc,lk=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,Cc,Ah),new U(0,Cc,-Ah),new U(Ah,0,Cc),new U(-Ah,0,Cc),new U(Cc,Ah,0),new U(-Cc,Ah,0)],Fc=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,o=100){HC=this._renderer.getRenderTarget(),this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,o,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=uk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(HC),e.scissorTest=!1,g0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===rl||e.mapping===sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),HC=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Et,minFilter:Et,generateMipmaps:!1,type:Tn,format:ni,colorSpace:kr,depthBuffer:!1},o=ck(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ck(e,t,i);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cK(a)),this._blurMaterial=uK(a,e,t)}return o}_compileMaterial(e){let t=new He(this._lodPlanes[0],e);this._renderer.compile(t,zC)}_sceneToCubeUV(e,t,i,o){let c=new rn(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],A=this._renderer,f=A.autoClear,d=A.toneMapping;A.getClearColor(ak),A.toneMapping=mo,A.autoClear=!1;let p=new Nt({name:"PMREM.Background",side:Gn,depthWrite:!1,depthTest:!1}),m=new He(new wn,p),b=!1,g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,b=!0):(p.color.copy(ak),b=!0);for(let w=0;w<6;w++){let I=w%3;I===0?(c.up.set(0,u[w],0),c.lookAt(h[w],0,0)):I===1?(c.up.set(0,0,u[w]),c.lookAt(0,h[w],0)):(c.up.set(0,u[w],0),c.lookAt(0,0,h[w]));let v=this._cubeSize;g0(o,I*v,w>2?v:0,v,v),A.setRenderTarget(o),b&&A.render(m,c),A.render(e,c)}m.geometry.dispose(),m.material.dispose(),A.toneMapping=d,A.autoClear=f,e.background=g}_textureToCubeUV(e,t){let i=this._renderer,o=e.mapping===rl||e.mapping===sl;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=hk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=uk());let a=o?this._cubemapMaterial:this._equirectMaterial,l=new He(this._lodPlanes[0],a),c=a.uniforms;c.envMap.value=e;let u=this._cubeSize;g0(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(l,zC)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){let a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=lk[(o-1)%lk.length];this._blur(e,o-1,o,a,l)}t.autoClear=i}_blur(e,t,i,o,a){let l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,o,"latitudinal",a),this._halfBlur(l,e,i,i,o,"longitudinal",a)}_halfBlur(e,t,i,o,a,l,c){let u=this._renderer,h=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let A=3,f=new He(this._lodPlanes[o],h),d=h.uniforms,p=this._sizeLods[i]-1,m=isFinite(a)?Math.PI/(2*p):2*Math.PI/(2*Ec-1),b=a/m,g=isFinite(a)?1+Math.floor(A*b):Ec;g>Ec&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ec}`);let w=[],I=0;for(let M=0;M<Ec;++M){let _=M/b,T=Math.exp(-_*_/2);w.push(T),M===0?I+=T:M<g&&(I+=2*T)}for(let M=0;M<w.length;M++)w[M]=w[M]/I;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=w,d.latitudinal.value=l==="latitudinal",c&&(d.poleAxis.value=c);let{_lodMax:v}=this;d.dTheta.value=m,d.mipInt.value=v-i;let C=this._sizeLods[o],E=3*C*(o>v-wh?o-v+wh:0),S=4*(this._cubeSize-C);g0(t,E,S,3*C,2*C),u.setRenderTarget(t),u.render(f,zC)}};function cK(n){let e=[],t=[],i=[],o=n,a=n-wh+1+ok.length;for(let l=0;l<a;l++){let c=Math.pow(2,o);t.push(c);let u=1/c;l>n-wh?u=ok[l-n+wh-1]:l===0&&(u=0),i.push(u);let h=1/(c-2),A=-h,f=1+h,d=[A,A,f,A,f,f,A,A,f,f,A,f],p=6,m=6,b=3,g=2,w=1,I=new Float32Array(b*m*p),v=new Float32Array(g*m*p),C=new Float32Array(w*m*p);for(let S=0;S<p;S++){let M=S%3*2/3-1,_=S>2?0:-1,T=[M,_,0,M+2/3,_,0,M+2/3,_+1,0,M,_,0,M+2/3,_+1,0,M,_+1,0];I.set(T,b*m*S),v.set(d,g*m*S);let D=[S,S,S,S,S,S];C.set(D,w*m*S)}let E=new Ke;E.setAttribute("position",new $e(I,b)),E.setAttribute("uv",new $e(v,g)),E.setAttribute("faceIndex",new $e(C,w)),e.push(E),o>wh&&o--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function ck(n,e,t){let i=new _t(n,e,t);return i.texture.mapping=Hh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function g0(n,e,t,i,o){n.viewport.set(e,t,i,o),n.scissor.set(e,t,i,o)}function uK(n,e,t){let i=new Float32Array(Ec),o=new U(0,1,0);return new yt({name:"SphericalGaussianBlur",defines:{n:Ec,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:lr,depthTest:!1,depthWrite:!1})}function uk(){return new yt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:lr,depthTest:!1,depthWrite:!1})}function hk(){return new yt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:lr,depthTest:!1,depthWrite:!1})}function qE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hK(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){let u=c.mapping,h=u===ca||u===yd,A=u===rl||u===sl;if(h||A)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let f=e.get(c);return t===null&&(t=new Fc(n)),f=h?t.fromEquirectangular(c,f):t.fromCubemap(c,f),e.set(c,f),f.texture}else{if(e.has(c))return e.get(c).texture;{let f=c.image;if(h&&f&&f.height>0||A&&f&&o(f)){t===null&&(t=new Fc(n));let d=h?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,d),c.addEventListener("dispose",a),d.texture}else return null}}}return c}function o(c){let u=0,h=6;for(let A=0;A<h;A++)c[A]!==void 0&&u++;return u===h}function a(c){let u=c.target;u.removeEventListener("dispose",a);let h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function AK(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(i)}return e[i]=o,o}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){let o=t(i);return o===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function fK(n,e,t,i){let o={},a=new WeakMap;function l(f){let d=f.target;d.index!==null&&e.remove(d.index);for(let m in d.attributes)e.remove(d.attributes[m]);for(let m in d.morphAttributes){let b=d.morphAttributes[m];for(let g=0,w=b.length;g<w;g++)e.remove(b[g])}d.removeEventListener("dispose",l),delete o[d.id];let p=a.get(d);p&&(e.remove(p),a.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function c(f,d){return o[d.id]===!0||(d.addEventListener("dispose",l),o[d.id]=!0,t.memory.geometries++),d}function u(f){let d=f.attributes;for(let m in d)e.update(d[m],n.ARRAY_BUFFER);let p=f.morphAttributes;for(let m in p){let b=p[m];for(let g=0,w=b.length;g<w;g++)e.update(b[g],n.ARRAY_BUFFER)}}function h(f){let d=[],p=f.index,m=f.attributes.position,b=0;if(p!==null){let I=p.array;b=p.version;for(let v=0,C=I.length;v<C;v+=3){let E=I[v+0],S=I[v+1],M=I[v+2];d.push(E,S,S,M,M,E)}}else{let I=m.array;b=m.version;for(let v=0,C=I.length/3-1;v<C;v+=3){let E=v+0,S=v+1,M=v+2;d.push(E,S,S,M,M,E)}}let g=new(A3(d)?Id:Pc)(d,1);g.version=b;let w=a.get(f);w&&e.remove(w),a.set(f,g)}function A(f){let d=a.get(f);if(d){let p=f.index;p!==null&&d.version<p.version&&h(f)}else h(f);return a.get(f)}return{get:c,update:u,getWireframeAttribute:A}}function dK(n,e,t,i){let o=i.isWebGL2,a;function l(d){a=d}let c,u;function h(d){c=d.type,u=d.bytesPerElement}function A(d,p){n.drawElements(a,p,c,d*u),t.update(p,a,1)}function f(d,p,m){if(m===0)return;let b,g;if(o)b=n,g="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[g](a,p,c,d*u,m),t.update(p,a,m)}this.setMode=l,this.setIndex=h,this.render=A,this.renderInstances=f}function pK(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,c){switch(t.calls++,l){case n.TRIANGLES:t.triangles+=c*(a/3);break;case n.LINES:t.lines+=c*(a/2);break;case n.LINE_STRIP:t.lines+=c*(a-1);break;case n.LINE_LOOP:t.lines+=c*a;break;case n.POINTS:t.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:i}}function mK(n,e){return n[0]-e[0]}function gK(n,e){return Math.abs(e[1])-Math.abs(n[1])}function yK(n,e,t){let i={},o=new Float32Array(8),a=new WeakMap,l=new pt,c=[];for(let h=0;h<8;h++)c[h]=[h,0];function u(h,A,f){let d=h.morphTargetInfluences;if(e.isWebGL2===!0){let p=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,m=p!==void 0?p.length:0,b=a.get(A);if(b===void 0||b.count!==m){let F=function(){B.dispose(),a.delete(A),A.removeEventListener("dispose",F)};b!==void 0&&b.texture.dispose();let I=A.morphAttributes.position!==void 0,v=A.morphAttributes.normal!==void 0,C=A.morphAttributes.color!==void 0,E=A.morphAttributes.position||[],S=A.morphAttributes.normal||[],M=A.morphAttributes.color||[],_=0;I===!0&&(_=1),v===!0&&(_=2),C===!0&&(_=3);let T=A.attributes.position.count*_,D=1;T>e.maxTextureSize&&(D=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);let R=new Float32Array(T*D*4*m),B=new Mh(R,T,D,m);B.type=cs,B.needsUpdate=!0;let P=_*4;for(let z=0;z<m;z++){let Q=E[z],V=S[z],G=M[z],O=T*D*4*z;for(let W=0;W<Q.count;W++){let k=W*P;I===!0&&(l.fromBufferAttribute(Q,W),R[O+k+0]=l.x,R[O+k+1]=l.y,R[O+k+2]=l.z,R[O+k+3]=0),v===!0&&(l.fromBufferAttribute(V,W),R[O+k+4]=l.x,R[O+k+5]=l.y,R[O+k+6]=l.z,R[O+k+7]=0),C===!0&&(l.fromBufferAttribute(G,W),R[O+k+8]=l.x,R[O+k+9]=l.y,R[O+k+10]=l.z,R[O+k+11]=G.itemSize===4?l.w:1)}}b={count:m,texture:B,size:new he(T,D)},a.set(A,b),A.addEventListener("dispose",F)}let g=0;for(let I=0;I<d.length;I++)g+=d[I];let w=A.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",b.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",b.size)}else{let p=d===void 0?0:d.length,m=i[A.id];if(m===void 0||m.length!==p){m=[];for(let v=0;v<p;v++)m[v]=[v,0];i[A.id]=m}for(let v=0;v<p;v++){let C=m[v];C[0]=v,C[1]=d[v]}m.sort(gK);for(let v=0;v<8;v++)v<p&&m[v][1]?(c[v][0]=m[v][0],c[v][1]=m[v][1]):(c[v][0]=Number.MAX_SAFE_INTEGER,c[v][1]=0);c.sort(mK);let b=A.morphAttributes.position,g=A.morphAttributes.normal,w=0;for(let v=0;v<8;v++){let C=c[v],E=C[0],S=C[1];E!==Number.MAX_SAFE_INTEGER&&S?(b&&A.getAttribute("morphTarget"+v)!==b[E]&&A.setAttribute("morphTarget"+v,b[E]),g&&A.getAttribute("morphNormal"+v)!==g[E]&&A.setAttribute("morphNormal"+v,g[E]),o[v]=S,w+=S):(b&&A.hasAttribute("morphTarget"+v)===!0&&A.deleteAttribute("morphTarget"+v),g&&A.hasAttribute("morphNormal"+v)===!0&&A.deleteAttribute("morphNormal"+v),o[v]=0)}let I=A.morphTargetsRelative?1:1-w;f.getUniforms().setValue(n,"morphTargetBaseInfluence",I),f.getUniforms().setValue(n,"morphTargetInfluences",o)}}return{update:u}}function vK(n,e,t,i){let o=new WeakMap;function a(u){let h=i.render.frame,A=u.geometry,f=e.get(u,A);if(o.get(f)!==h&&(e.update(f),o.set(f,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",c)===!1&&u.addEventListener("dispose",c),o.get(u)!==h&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),o.set(u,h))),u.isSkinnedMesh){let d=u.skeleton;o.get(d)!==h&&(d.update(),o.set(d,h))}return f}function l(){o=new WeakMap}function c(u){let h=u.target;h.removeEventListener("dispose",c),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:a,dispose:l}}var m3=new jt,g3=new Mh,y3=new Sd,v3=new Nc,Ak=[],fk=[],dk=new Float32Array(16),pk=new Float32Array(9),mk=new Float32Array(4);function Yh(n,e,t){let i=n[0];if(i<=0||i>0)return n;let o=e*t,a=Ak[o];if(a===void 0&&(a=new Float32Array(o),Ak[o]=a),e!==0){i.toArray(a,0);for(let l=1,c=0;l!==e;++l)c+=t,n[l].toArray(a,c)}return a}function ii(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ri(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Ny(n,e){let t=fk[e];t===void 0&&(t=new Int32Array(e),fk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function wK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2fv(this.addr,e),ri(t,e)}}function xK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ii(t,e))return;n.uniform3fv(this.addr,e),ri(t,e)}}function CK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4fv(this.addr,e),ri(t,e)}}function SK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;mk.set(i),n.uniformMatrix2fv(this.addr,!1,mk),ri(t,i)}}function EK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;pk.set(i),n.uniformMatrix3fv(this.addr,!1,pk),ri(t,i)}}function IK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;dk.set(i),n.uniformMatrix4fv(this.addr,!1,dk),ri(t,i)}}function MK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function TK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2iv(this.addr,e),ri(t,e)}}function _K(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3iv(this.addr,e),ri(t,e)}}function DK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4iv(this.addr,e),ri(t,e)}}function RK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function LK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2uiv(this.addr,e),ri(t,e)}}function BK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3uiv(this.addr,e),ri(t,e)}}function kK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4uiv(this.addr,e),ri(t,e)}}function PK(n,e,t){let i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTexture2D(e||m3,o)}function NK(n,e,t){let i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTexture3D(e||y3,o)}function FK(n,e,t){let i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTextureCube(e||v3,o)}function UK(n,e,t){let i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),t.setTexture2DArray(e||g3,o)}function OK(n){switch(n){case 5126:return wK;case 35664:return bK;case 35665:return xK;case 35666:return CK;case 35674:return SK;case 35675:return EK;case 35676:return IK;case 5124:case 35670:return MK;case 35667:case 35671:return TK;case 35668:case 35672:return _K;case 35669:case 35673:return DK;case 5125:return RK;case 36294:return LK;case 36295:return BK;case 36296:return kK;case 35678:case 36198:case 36298:case 36306:case 35682:return PK;case 35679:case 36299:case 36307:return NK;case 35680:case 36300:case 36308:case 36293:return FK;case 36289:case 36303:case 36311:case 36292:return UK}}function QK(n,e){n.uniform1fv(this.addr,e)}function GK(n,e){let t=Yh(e,this.size,2);n.uniform2fv(this.addr,t)}function zK(n,e){let t=Yh(e,this.size,3);n.uniform3fv(this.addr,t)}function HK(n,e){let t=Yh(e,this.size,4);n.uniform4fv(this.addr,t)}function VK(n,e){let t=Yh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function WK(n,e){let t=Yh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function XK(n,e){let t=Yh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function YK(n,e){n.uniform1iv(this.addr,e)}function ZK(n,e){n.uniform2iv(this.addr,e)}function KK(n,e){n.uniform3iv(this.addr,e)}function jK(n,e){n.uniform4iv(this.addr,e)}function JK(n,e){n.uniform1uiv(this.addr,e)}function qK(n,e){n.uniform2uiv(this.addr,e)}function $K(n,e){n.uniform3uiv(this.addr,e)}function e7(n,e){n.uniform4uiv(this.addr,e)}function t7(n,e,t){let i=this.cache,o=e.length,a=Ny(t,o);ii(i,a)||(n.uniform1iv(this.addr,a),ri(i,a));for(let l=0;l!==o;++l)t.setTexture2D(e[l]||m3,a[l])}function n7(n,e,t){let i=this.cache,o=e.length,a=Ny(t,o);ii(i,a)||(n.uniform1iv(this.addr,a),ri(i,a));for(let l=0;l!==o;++l)t.setTexture3D(e[l]||y3,a[l])}function i7(n,e,t){let i=this.cache,o=e.length,a=Ny(t,o);ii(i,a)||(n.uniform1iv(this.addr,a),ri(i,a));for(let l=0;l!==o;++l)t.setTextureCube(e[l]||v3,a[l])}function r7(n,e,t){let i=this.cache,o=e.length,a=Ny(t,o);ii(i,a)||(n.uniform1iv(this.addr,a),ri(i,a));for(let l=0;l!==o;++l)t.setTexture2DArray(e[l]||g3,a[l])}function s7(n){switch(n){case 5126:return QK;case 35664:return GK;case 35665:return zK;case 35666:return HK;case 35674:return VK;case 35675:return WK;case 35676:return XK;case 5124:case 35670:return YK;case 35667:case 35671:return ZK;case 35668:case 35672:return KK;case 35669:case 35673:return jK;case 5125:return JK;case 36294:return qK;case 36295:return $K;case 36296:return e7;case 35678:case 36198:case 36298:case 36306:case 35682:return t7;case 35679:case 36299:case 36307:return n7;case 35680:case 36300:case 36308:case 36293:return i7;case 36289:case 36303:case 36311:case 36292:return r7}}var GS=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=OK(t.type)}},zS=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=s7(t.type)}},HS=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let o=this.seq;for(let a=0,l=o.length;a!==l;++a){let c=o[a];c.setValue(e,t[c.id],i)}}},VC=/(\w+)(\])?(\[|\.)?/g;function gk(n,e){n.seq.push(e),n.map[e.id]=e}function o7(n,e,t){let i=n.name,o=i.length;for(VC.lastIndex=0;;){let a=VC.exec(i),l=VC.lastIndex,c=a[1],u=a[2]==="]",h=a[3];if(u&&(c=c|0),h===void 0||h==="["&&l+2===o){gk(t,h===void 0?new GS(c,n,e):new zS(c,n,e));break}else{let f=t.map[c];f===void 0&&(f=new HS(c),gk(t,f)),t=f}}}var Ch=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){let a=e.getActiveUniform(t,o),l=e.getUniformLocation(t,a.name);o7(a,l,this)}}setValue(e,t,i,o){let a=this.map[t];a!==void 0&&a.setValue(e,i,o)}setOptional(e,t,i){let o=t[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,t,i,o){for(let a=0,l=t.length;a!==l;++a){let c=t[a],u=i[c.id];u.needsUpdate!==!1&&c.setValue(e,u.value,o)}}static seqWithValue(e,t){let i=[];for(let o=0,a=e.length;o!==a;++o){let l=e[o];l.id in t&&i.push(l)}return i}};function yk(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var a7=0;function l7(n,e){let t=n.split(`
`),i=[],o=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=o;l<a;l++){let c=l+1;i.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return i.join(`
`)}function c7(n){switch(n){case kr:return["Linear","( value )"];case it:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function vk(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),o=n.getShaderInfoLog(e).trim();if(i&&o==="")return"";let a=/ERROR: 0:(\d+)/.exec(o);if(a){let l=parseInt(a[1]);return t.toUpperCase()+`

`+o+`

`+l7(n.getShaderSource(e),l)}else return o}function u7(n,e){let t=c7(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function h7(n,e){let t;switch(e){case OP:t="Linear";break;case QP:t="Reinhard";break;case GP:t="OptimizedCineon";break;case Ry:t="ACESFilmic";break;case zP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function A7(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ad).join(`
`)}function f7(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function d7(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){let a=n.getActiveAttrib(e,o),l=a.name,c=1;a.type===n.FLOAT_MAT2&&(c=2),a.type===n.FLOAT_MAT3&&(c=3),a.type===n.FLOAT_MAT4&&(c=4),t[l]={type:a.type,location:n.getAttribLocation(e,l),locationSize:c}}return t}function Ad(n){return n!==""}function wk(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var p7=/^[ \t]*#include +<([\w\d./]+)>/gm;function VS(n){return n.replace(p7,g7)}var m7=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function g7(n,e){let t=ht[e];if(t===void 0){let i=m7.get(e);if(i!==void 0)t=ht[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return VS(t)}var y7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xk(n){return n.replace(y7,v7)}function v7(n,e,t,i){let o="";for(let a=parseInt(e);a<parseInt(t);a++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return o}function Ck(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function w7(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===UE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Dy?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===fo&&(e="SHADOWMAP_TYPE_VSM"),e}function b7(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case rl:case sl:e="ENVMAP_TYPE_CUBE";break;case Hh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function x7(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case sl:e="ENVMAP_MODE_REFRACTION";break}return e}function C7(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Zd:e="ENVMAP_BLENDING_MULTIPLY";break;case FP:e="ENVMAP_BLENDING_MIX";break;case UP:e="ENVMAP_BLENDING_ADD";break}return e}function S7(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function E7(n,e,t,i){let o=n.getContext(),a=t.defines,l=t.vertexShader,c=t.fragmentShader,u=w7(t),h=b7(t),A=x7(t),f=C7(t),d=S7(t),p=t.isWebGL2?"":A7(t),m=f7(a),b=o.createProgram(),g,w,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Ad).join(`
`),g.length>0&&(g+=`
`),w=[p,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Ad).join(`
`),w.length>0&&(w+=`
`)):(g=[Ck(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ad).join(`
`),w=[p,Ck(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+A:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==mo?"#define TONE_MAPPING":"",t.toneMapping!==mo?ht.tonemapping_pars_fragment:"",t.toneMapping!==mo?h7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.colorspace_pars_fragment,u7("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ad).join(`
`)),l=VS(l),l=wk(l,t),l=bk(l,t),c=VS(c),c=wk(c,t),c=bk(c,t),l=xk(l),c=xk(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["#define varying in",t.glslVersion===Eh?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Eh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);let v=I+g+l,C=I+w+c,E=yk(o,o.VERTEX_SHADER,v),S=yk(o,o.FRAGMENT_SHADER,C);if(o.attachShader(b,E),o.attachShader(b,S),t.index0AttributeName!==void 0?o.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(b,0,"position"),o.linkProgram(b),n.debug.checkShaderErrors){let T=o.getProgramInfoLog(b).trim(),D=o.getShaderInfoLog(E).trim(),R=o.getShaderInfoLog(S).trim(),B=!0,P=!0;if(o.getProgramParameter(b,o.LINK_STATUS)===!1)if(B=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,b,E,S);else{let F=vk(o,E,"vertex"),z=vk(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(b,o.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+F+`
`+z)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(D===""||R==="")&&(P=!1);P&&(this.diagnostics={runnable:B,programLog:T,vertexShader:{log:D,prefix:g},fragmentShader:{log:R,prefix:w}})}o.deleteShader(E),o.deleteShader(S);let M;this.getUniforms=function(){return M===void 0&&(M=new Ch(o,b)),M};let _;return this.getAttributes=function(){return _===void 0&&(_=d7(o,b)),_},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=a7++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=E,this.fragmentShader=S,this}var I7=0,WS=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(t),a=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(o)===!1&&(l.add(o),o.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new XS(e),t.set(e,i)),i}},XS=class{constructor(e){this.id=I7++,this.code=e,this.usedTimes=0}};function M7(n,e,t,i,o,a,l){let c=new Th,u=new WS,h=[],A=o.isWebGL2,f=o.logarithmicDepthBuffer,d=o.vertexTextures,p=o.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(T){return T===0?"uv":`uv${T}`}function g(T,D,R,B,P){let F=B.fog,z=P.geometry,Q=T.isMeshStandardMaterial?B.environment:null,V=(T.isMeshStandardMaterial?t:e).get(T.envMap||Q),G=V&&V.mapping===Hh?V.image.height:null,O=m[T.type];T.precision!==null&&(p=o.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));let W=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,k=W!==void 0?W.length:0,Y=0;z.morphAttributes.position!==void 0&&(Y=1),z.morphAttributes.normal!==void 0&&(Y=2),z.morphAttributes.color!==void 0&&(Y=3);let te,ie,re,se;if(O){let je=ls[O];te=je.vertexShader,ie=je.fragmentShader}else te=T.vertexShader,ie=T.fragmentShader,u.update(T),re=u.getVertexShaderID(T),se=u.getFragmentShaderID(T);let oe=n.getRenderTarget(),le=P.isInstancedMesh===!0,xe=!!T.map,_e=!!T.matcap,pe=!!V,K=!!T.aoMap,be=!!T.lightMap,me=!!T.bumpMap,fe=!!T.normalMap,de=!!T.displacementMap,Fe=!!T.emissiveMap,ye=!!T.metalnessMap,Se=!!T.roughnessMap,Pe=T.anisotropy>0,Ee=T.clearcoat>0,We=T.iridescence>0,J=T.sheen>0,H=T.transmission>0,ue=Pe&&!!T.anisotropyMap,Re=Ee&&!!T.clearcoatMap,Be=Ee&&!!T.clearcoatNormalMap,Ie=Ee&&!!T.clearcoatRoughnessMap,Ue=We&&!!T.iridescenceMap,Ne=We&&!!T.iridescenceThicknessMap,Ce=J&&!!T.sheenColorMap,Z=J&&!!T.sheenRoughnessMap,L=!!T.specularMap,N=!!T.specularColorMap,X=!!T.specularIntensityMap,q=H&&!!T.transmissionMap,ne=H&&!!T.thicknessMap,ae=!!T.gradientMap,j=!!T.alphaMap,ce=T.alphaTest>0,$=!!T.alphaHash,Ae=!!T.extensions,we=!!z.attributes.uv1,Ge=!!z.attributes.uv2,ze=!!z.attributes.uv3;return{isWebGL2:A,shaderID:O,shaderType:T.type,shaderName:T.name,vertexShader:te,fragmentShader:ie,defines:T.defines,customVertexShaderID:re,customFragmentShaderID:se,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,instancing:le,instancingColor:le&&P.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:oe===null?n.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:kr,map:xe,matcap:_e,envMap:pe,envMapMode:pe&&V.mapping,envMapCubeUVHeight:G,aoMap:K,lightMap:be,bumpMap:me,normalMap:fe,displacementMap:d&&de,emissiveMap:Fe,normalMapObjectSpace:fe&&T.normalMapType===t3,normalMapTangentSpace:fe&&T.normalMapType===bl,metalnessMap:ye,roughnessMap:Se,anisotropy:Pe,anisotropyMap:ue,clearcoat:Ee,clearcoatMap:Re,clearcoatNormalMap:Be,clearcoatRoughnessMap:Ie,iridescence:We,iridescenceMap:Ue,iridescenceThicknessMap:Ne,sheen:J,sheenColorMap:Ce,sheenRoughnessMap:Z,specularMap:L,specularColorMap:N,specularIntensityMap:X,transmission:H,transmissionMap:q,thicknessMap:ne,gradientMap:ae,opaque:T.transparent===!1&&T.blending===_c,alphaMap:j,alphaTest:ce,alphaHash:$,combine:T.combine,mapUv:xe&&b(T.map.channel),aoMapUv:K&&b(T.aoMap.channel),lightMapUv:be&&b(T.lightMap.channel),bumpMapUv:me&&b(T.bumpMap.channel),normalMapUv:fe&&b(T.normalMap.channel),displacementMapUv:de&&b(T.displacementMap.channel),emissiveMapUv:Fe&&b(T.emissiveMap.channel),metalnessMapUv:ye&&b(T.metalnessMap.channel),roughnessMapUv:Se&&b(T.roughnessMap.channel),anisotropyMapUv:ue&&b(T.anisotropyMap.channel),clearcoatMapUv:Re&&b(T.clearcoatMap.channel),clearcoatNormalMapUv:Be&&b(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&b(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Ue&&b(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ne&&b(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ce&&b(T.sheenColorMap.channel),sheenRoughnessMapUv:Z&&b(T.sheenRoughnessMap.channel),specularMapUv:L&&b(T.specularMap.channel),specularColorMapUv:N&&b(T.specularColorMap.channel),specularIntensityMapUv:X&&b(T.specularIntensityMap.channel),transmissionMapUv:q&&b(T.transmissionMap.channel),thicknessMapUv:ne&&b(T.thicknessMap.channel),alphaMapUv:j&&b(T.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(fe||Pe),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,vertexUv1s:we,vertexUv2s:Ge,vertexUv3s:ze,pointsUvs:P.isPoints===!0&&!!z.attributes.uv&&(xe||j),fog:!!F,useFog:T.fog===!0,fogExp2:F&&F.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:P.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:Y,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:mo,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Pt,flipSided:T.side===Gn,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:Ae&&T.extensions.derivatives===!0,extensionFragDepth:Ae&&T.extensions.fragDepth===!0,extensionDrawBuffers:Ae&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ae&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:A||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:A||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:A||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function w(T){let D=[];if(T.shaderID?D.push(T.shaderID):(D.push(T.customVertexShaderID),D.push(T.customFragmentShaderID)),T.defines!==void 0)for(let R in T.defines)D.push(R),D.push(T.defines[R]);return T.isRawShaderMaterial===!1&&(I(D,T),v(D,T),D.push(n.outputColorSpace)),D.push(T.customProgramCacheKey),D.join()}function I(T,D){T.push(D.precision),T.push(D.outputColorSpace),T.push(D.envMapMode),T.push(D.envMapCubeUVHeight),T.push(D.mapUv),T.push(D.alphaMapUv),T.push(D.lightMapUv),T.push(D.aoMapUv),T.push(D.bumpMapUv),T.push(D.normalMapUv),T.push(D.displacementMapUv),T.push(D.emissiveMapUv),T.push(D.metalnessMapUv),T.push(D.roughnessMapUv),T.push(D.anisotropyMapUv),T.push(D.clearcoatMapUv),T.push(D.clearcoatNormalMapUv),T.push(D.clearcoatRoughnessMapUv),T.push(D.iridescenceMapUv),T.push(D.iridescenceThicknessMapUv),T.push(D.sheenColorMapUv),T.push(D.sheenRoughnessMapUv),T.push(D.specularMapUv),T.push(D.specularColorMapUv),T.push(D.specularIntensityMapUv),T.push(D.transmissionMapUv),T.push(D.thicknessMapUv),T.push(D.combine),T.push(D.fogExp2),T.push(D.sizeAttenuation),T.push(D.morphTargetsCount),T.push(D.morphAttributeCount),T.push(D.numDirLights),T.push(D.numPointLights),T.push(D.numSpotLights),T.push(D.numSpotLightMaps),T.push(D.numHemiLights),T.push(D.numRectAreaLights),T.push(D.numDirLightShadows),T.push(D.numPointLightShadows),T.push(D.numSpotLightShadows),T.push(D.numSpotLightShadowsWithMaps),T.push(D.shadowMapType),T.push(D.toneMapping),T.push(D.numClippingPlanes),T.push(D.numClipIntersection),T.push(D.depthPacking)}function v(T,D){c.disableAll(),D.isWebGL2&&c.enable(0),D.supportsVertexTextures&&c.enable(1),D.instancing&&c.enable(2),D.instancingColor&&c.enable(3),D.matcap&&c.enable(4),D.envMap&&c.enable(5),D.normalMapObjectSpace&&c.enable(6),D.normalMapTangentSpace&&c.enable(7),D.clearcoat&&c.enable(8),D.iridescence&&c.enable(9),D.alphaTest&&c.enable(10),D.vertexColors&&c.enable(11),D.vertexAlphas&&c.enable(12),D.vertexUv1s&&c.enable(13),D.vertexUv2s&&c.enable(14),D.vertexUv3s&&c.enable(15),D.vertexTangents&&c.enable(16),D.anisotropy&&c.enable(17),T.push(c.mask),c.disableAll(),D.fog&&c.enable(0),D.useFog&&c.enable(1),D.flatShading&&c.enable(2),D.logarithmicDepthBuffer&&c.enable(3),D.skinning&&c.enable(4),D.morphTargets&&c.enable(5),D.morphNormals&&c.enable(6),D.morphColors&&c.enable(7),D.premultipliedAlpha&&c.enable(8),D.shadowMapEnabled&&c.enable(9),D.useLegacyLights&&c.enable(10),D.doubleSided&&c.enable(11),D.flipSided&&c.enable(12),D.useDepthPacking&&c.enable(13),D.dithering&&c.enable(14),D.transmission&&c.enable(15),D.sheen&&c.enable(16),D.opaque&&c.enable(17),D.pointsUvs&&c.enable(18),T.push(c.mask)}function C(T){let D=m[T.type],R;if(D){let B=ls[D];R=oi.clone(B.uniforms)}else R=T.uniforms;return R}function E(T,D){let R;for(let B=0,P=h.length;B<P;B++){let F=h[B];if(F.cacheKey===D){R=F,++R.usedTimes;break}}return R===void 0&&(R=new E7(n,D,T,a),h.push(R)),R}function S(T){if(--T.usedTimes===0){let D=h.indexOf(T);h[D]=h[h.length-1],h.pop(),T.destroy()}}function M(T){u.remove(T)}function _(){u.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:C,acquireProgram:E,releaseProgram:S,releaseShaderCache:M,programs:h,dispose:_}}function T7(){let n=new WeakMap;function e(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function t(a){n.delete(a)}function i(a,l,c){n.get(a)[l]=c}function o(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:o}}function _7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Sk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Ek(){let n=[],e=0,t=[],i=[],o=[];function a(){e=0,t.length=0,i.length=0,o.length=0}function l(f,d,p,m,b,g){let w=n[e];return w===void 0?(w={id:f.id,object:f,geometry:d,material:p,groupOrder:m,renderOrder:f.renderOrder,z:b,group:g},n[e]=w):(w.id=f.id,w.object=f,w.geometry=d,w.material=p,w.groupOrder=m,w.renderOrder=f.renderOrder,w.z=b,w.group=g),e++,w}function c(f,d,p,m,b,g){let w=l(f,d,p,m,b,g);p.transmission>0?i.push(w):p.transparent===!0?o.push(w):t.push(w)}function u(f,d,p,m,b,g){let w=l(f,d,p,m,b,g);p.transmission>0?i.unshift(w):p.transparent===!0?o.unshift(w):t.unshift(w)}function h(f,d){t.length>1&&t.sort(f||_7),i.length>1&&i.sort(d||Sk),o.length>1&&o.sort(d||Sk)}function A(){for(let f=e,d=n.length;f<d;f++){let p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:o,init:a,push:c,unshift:u,finish:A,sort:h}}function D7(){let n=new WeakMap;function e(i,o){let a=n.get(i),l;return a===void 0?(l=new Ek,n.set(i,[l])):o>=a.length?(l=new Ek,a.push(l)):l=a[o],l}function t(){n=new WeakMap}return{get:e,dispose:t}}function R7(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new De};break;case"SpotLight":t={position:new U,direction:new U,color:new De,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new De,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new De,groundColor:new De};break;case"RectAreaLight":t={color:new De,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function L7(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var B7=0;function k7(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function P7(n,e){let t=new R7,i=L7(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let A=0;A<9;A++)o.probe.push(new U);let a=new U,l=new ke,c=new ke;function u(A,f){let d=0,p=0,m=0;for(let R=0;R<9;R++)o.probe[R].set(0,0,0);let b=0,g=0,w=0,I=0,v=0,C=0,E=0,S=0,M=0,_=0;A.sort(k7);let T=f===!0?Math.PI:1;for(let R=0,B=A.length;R<B;R++){let P=A[R],F=P.color,z=P.intensity,Q=P.distance,V=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=F.r*z*T,p+=F.g*z*T,m+=F.b*z*T;else if(P.isLightProbe)for(let G=0;G<9;G++)o.probe[G].addScaledVector(P.sh.coefficients[G],z);else if(P.isDirectionalLight){let G=t.get(P);if(G.color.copy(P.color).multiplyScalar(P.intensity*T),P.castShadow){let O=P.shadow,W=i.get(P);W.shadowBias=O.bias,W.shadowNormalBias=O.normalBias,W.shadowRadius=O.radius,W.shadowMapSize=O.mapSize,o.directionalShadow[b]=W,o.directionalShadowMap[b]=V,o.directionalShadowMatrix[b]=P.shadow.matrix,C++}o.directional[b]=G,b++}else if(P.isSpotLight){let G=t.get(P);G.position.setFromMatrixPosition(P.matrixWorld),G.color.copy(F).multiplyScalar(z*T),G.distance=Q,G.coneCos=Math.cos(P.angle),G.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),G.decay=P.decay,o.spot[w]=G;let O=P.shadow;if(P.map&&(o.spotLightMap[M]=P.map,M++,O.updateMatrices(P),P.castShadow&&_++),o.spotLightMatrix[w]=O.matrix,P.castShadow){let W=i.get(P);W.shadowBias=O.bias,W.shadowNormalBias=O.normalBias,W.shadowRadius=O.radius,W.shadowMapSize=O.mapSize,o.spotShadow[w]=W,o.spotShadowMap[w]=V,S++}w++}else if(P.isRectAreaLight){let G=t.get(P);G.color.copy(F).multiplyScalar(z),G.halfWidth.set(P.width*.5,0,0),G.halfHeight.set(0,P.height*.5,0),o.rectArea[I]=G,I++}else if(P.isPointLight){let G=t.get(P);if(G.color.copy(P.color).multiplyScalar(P.intensity*T),G.distance=P.distance,G.decay=P.decay,P.castShadow){let O=P.shadow,W=i.get(P);W.shadowBias=O.bias,W.shadowNormalBias=O.normalBias,W.shadowRadius=O.radius,W.shadowMapSize=O.mapSize,W.shadowCameraNear=O.camera.near,W.shadowCameraFar=O.camera.far,o.pointShadow[g]=W,o.pointShadowMap[g]=V,o.pointShadowMatrix[g]=P.shadow.matrix,E++}o.point[g]=G,g++}else if(P.isHemisphereLight){let G=t.get(P);G.skyColor.copy(P.color).multiplyScalar(z*T),G.groundColor.copy(P.groundColor).multiplyScalar(z*T),o.hemi[v]=G,v++}}I>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Xe.LTC_FLOAT_1,o.rectAreaLTC2=Xe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Xe.LTC_HALF_1,o.rectAreaLTC2=Xe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=d,o.ambient[1]=p,o.ambient[2]=m;let D=o.hash;(D.directionalLength!==b||D.pointLength!==g||D.spotLength!==w||D.rectAreaLength!==I||D.hemiLength!==v||D.numDirectionalShadows!==C||D.numPointShadows!==E||D.numSpotShadows!==S||D.numSpotMaps!==M)&&(o.directional.length=b,o.spot.length=w,o.rectArea.length=I,o.point.length=g,o.hemi.length=v,o.directionalShadow.length=C,o.directionalShadowMap.length=C,o.pointShadow.length=E,o.pointShadowMap.length=E,o.spotShadow.length=S,o.spotShadowMap.length=S,o.directionalShadowMatrix.length=C,o.pointShadowMatrix.length=E,o.spotLightMatrix.length=S+M-_,o.spotLightMap.length=M,o.numSpotLightShadowsWithMaps=_,D.directionalLength=b,D.pointLength=g,D.spotLength=w,D.rectAreaLength=I,D.hemiLength=v,D.numDirectionalShadows=C,D.numPointShadows=E,D.numSpotShadows=S,D.numSpotMaps=M,o.version=B7++)}function h(A,f){let d=0,p=0,m=0,b=0,g=0,w=f.matrixWorldInverse;for(let I=0,v=A.length;I<v;I++){let C=A[I];if(C.isDirectionalLight){let E=o.directional[d];E.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(w),d++}else if(C.isSpotLight){let E=o.spot[m];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(w),E.direction.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(w),m++}else if(C.isRectAreaLight){let E=o.rectArea[b];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(w),c.identity(),l.copy(C.matrixWorld),l.premultiply(w),c.extractRotation(l),E.halfWidth.set(C.width*.5,0,0),E.halfHeight.set(0,C.height*.5,0),E.halfWidth.applyMatrix4(c),E.halfHeight.applyMatrix4(c),b++}else if(C.isPointLight){let E=o.point[p];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(w),p++}else if(C.isHemisphereLight){let E=o.hemi[g];E.direction.setFromMatrixPosition(C.matrixWorld),E.direction.transformDirection(w),g++}}}return{setup:u,setupView:h,state:o}}function Ik(n,e){let t=new P7(n,e),i=[],o=[];function a(){i.length=0,o.length=0}function l(f){i.push(f)}function c(f){o.push(f)}function u(f){t.setup(i,f)}function h(f){t.setupView(i,f)}return{init:a,state:{lightsArray:i,shadowsArray:o,lights:t},setupLights:u,setupLightsView:h,pushLight:l,pushShadow:c}}function N7(n,e){let t=new WeakMap;function i(a,l=0){let c=t.get(a),u;return c===void 0?(u=new Ik(n,e),t.set(a,[u])):l>=c.length?(u=new Ik(n,e),c.push(u)):u=c[l],u}function o(){t=new WeakMap}return{get:i,dispose:o}}var Uc=class extends _n{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Oc=class extends _n{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},F7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,U7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function O7(n,e,t){let i=new al,o=new he,a=new he,l=new pt,c=new Uc({depthPacking:Py}),u=new Oc,h={},A=t.maxTextureSize,f={[Ai]:Gn,[Gn]:Ai,[Pt]:Pt},d=new yt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:F7,fragmentShader:U7}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let m=new Ke;m.setAttribute("position",new $e(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new He(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UE;let w=this.type;this.render=function(E,S,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||E.length===0)return;let _=n.getRenderTarget(),T=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),R=n.state;R.setBlending(lr),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);let B=w!==fo&&this.type===fo,P=w===fo&&this.type!==fo;for(let F=0,z=E.length;F<z;F++){let Q=E[F],V=Q.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;o.copy(V.mapSize);let G=V.getFrameExtents();if(o.multiply(G),a.copy(V.mapSize),(o.x>A||o.y>A)&&(o.x>A&&(a.x=Math.floor(A/G.x),o.x=a.x*G.x,V.mapSize.x=a.x),o.y>A&&(a.y=Math.floor(A/G.y),o.y=a.y*G.y,V.mapSize.y=a.y)),V.map===null||B===!0||P===!0){let W=this.type!==fo?{minFilter:Tt,magFilter:Tt}:{};V.map!==null&&V.map.dispose(),V.map=new _t(o.x,o.y,W),V.map.texture.name=Q.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();let O=V.getViewportCount();for(let W=0;W<O;W++){let k=V.getViewport(W);l.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),R.viewport(l),V.updateMatrices(Q,W),i=V.getFrustum(),C(S,M,V.camera,Q,this.type)}V.isPointLightShadow!==!0&&this.type===fo&&I(V,M),V.needsUpdate=!1}w=this.type,g.needsUpdate=!1,n.setRenderTarget(_,T,D)};function I(E,S){let M=e.update(b);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,p.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new _t(o.x,o.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(S,null,M,d,b,null),p.uniforms.shadow_pass.value=E.mapPass.texture,p.uniforms.resolution.value=E.mapSize,p.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(S,null,M,p,b,null)}function v(E,S,M,_){let T=null,D=M.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(D!==void 0)T=D;else if(T=M.isPointLight===!0?u:c,n.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let R=T.uuid,B=S.uuid,P=h[R];P===void 0&&(P={},h[R]=P);let F=P[B];F===void 0&&(F=T.clone(),P[B]=F),T=F}if(T.visible=S.visible,T.wireframe=S.wireframe,_===fo?T.side=S.shadowSide!==null?S.shadowSide:S.side:T.side=S.shadowSide!==null?S.shadowSide:f[S.side],T.alphaMap=S.alphaMap,T.alphaTest=S.alphaTest,T.map=S.map,T.clipShadows=S.clipShadows,T.clippingPlanes=S.clippingPlanes,T.clipIntersection=S.clipIntersection,T.displacementMap=S.displacementMap,T.displacementScale=S.displacementScale,T.displacementBias=S.displacementBias,T.wireframeLinewidth=S.wireframeLinewidth,T.linewidth=S.linewidth,M.isPointLight===!0&&T.isMeshDistanceMaterial===!0){let R=n.properties.get(T);R.light=M}return T}function C(E,S,M,_,T){if(E.visible===!1)return;if(E.layers.test(S.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&T===fo)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,E.matrixWorld);let B=e.update(E),P=E.material;if(Array.isArray(P)){let F=B.groups;for(let z=0,Q=F.length;z<Q;z++){let V=F[z],G=P[V.materialIndex];if(G&&G.visible){let O=v(E,G,_,T);n.renderBufferDirect(M,null,B,O,E,V)}}}else if(P.visible){let F=v(E,P,_,T);n.renderBufferDirect(M,null,B,F,E,null)}}let R=E.children;for(let B=0,P=R.length;B<P;B++)C(R[B],S,M,_,T)}}function Q7(n,e,t){let i=t.isWebGL2;function o(){let j=!1,ce=new pt,$=null,Ae=new pt(0,0,0,0);return{setMask:function(we){$!==we&&!j&&(n.colorMask(we,we,we,we),$=we)},setLocked:function(we){j=we},setClear:function(we,Ge,ze,Ze,je){je===!0&&(we*=Ze,Ge*=Ze,ze*=Ze),ce.set(we,Ge,ze,Ze),Ae.equals(ce)===!1&&(n.clearColor(we,Ge,ze,Ze),Ae.copy(ce))},reset:function(){j=!1,$=null,Ae.set(-1,0,0,0)}}}function a(){let j=!1,ce=null,$=null,Ae=null;return{setTest:function(we){we?oe(n.DEPTH_TEST):le(n.DEPTH_TEST)},setMask:function(we){ce!==we&&!j&&(n.depthMask(we),ce=we)},setFunc:function(we){if($!==we){switch(we){case DP:n.depthFunc(n.NEVER);break;case RP:n.depthFunc(n.ALWAYS);break;case LP:n.depthFunc(n.LESS);break;case X0:n.depthFunc(n.LEQUAL);break;case BP:n.depthFunc(n.EQUAL);break;case kP:n.depthFunc(n.GEQUAL);break;case PP:n.depthFunc(n.GREATER);break;case NP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}$=we}},setLocked:function(we){j=we},setClear:function(we){Ae!==we&&(n.clearDepth(we),Ae=we)},reset:function(){j=!1,ce=null,$=null,Ae=null}}}function l(){let j=!1,ce=null,$=null,Ae=null,we=null,Ge=null,ze=null,Ze=null,je=null;return{setTest:function(at){j||(at?oe(n.STENCIL_TEST):le(n.STENCIL_TEST))},setMask:function(at){ce!==at&&!j&&(n.stencilMask(at),ce=at)},setFunc:function(at,vt,st){($!==at||Ae!==vt||we!==st)&&(n.stencilFunc(at,vt,st),$=at,Ae=vt,we=st)},setOp:function(at,vt,st){(Ge!==at||ze!==vt||Ze!==st)&&(n.stencilOp(at,vt,st),Ge=at,ze=vt,Ze=st)},setLocked:function(at){j=at},setClear:function(at){je!==at&&(n.clearStencil(at),je=at)},reset:function(){j=!1,ce=null,$=null,Ae=null,we=null,Ge=null,ze=null,Ze=null,je=null}}}let c=new o,u=new a,h=new l,A=new WeakMap,f=new WeakMap,d={},p={},m=new WeakMap,b=[],g=null,w=!1,I=null,v=null,C=null,E=null,S=null,M=null,_=null,T=!1,D=null,R=null,B=null,P=null,F=null,z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),Q=!1,V=0,G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(G)[1]),Q=V>=1):G.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Q=V>=2);let O=null,W={},k=n.getParameter(n.SCISSOR_BOX),Y=n.getParameter(n.VIEWPORT),te=new pt().fromArray(k),ie=new pt().fromArray(Y);function re(j,ce,$,Ae){let we=new Uint8Array(4),Ge=n.createTexture();n.bindTexture(j,Ge),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ze=0;ze<$;ze++)i&&(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)?n.texImage3D(ce,0,n.RGBA,1,1,Ae,0,n.RGBA,n.UNSIGNED_BYTE,we):n.texImage2D(ce+ze,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,we);return Ge}let se={};se[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),se[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(se[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),se[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),c.setClear(0,0,0,1),u.setClear(1),h.setClear(0),oe(n.DEPTH_TEST),u.setFunc(X0),de(!1),Fe(iS),oe(n.CULL_FACE),me(lr);function oe(j){d[j]!==!0&&(n.enable(j),d[j]=!0)}function le(j){d[j]!==!1&&(n.disable(j),d[j]=!1)}function xe(j,ce){return p[j]!==ce?(n.bindFramebuffer(j,ce),p[j]=ce,i&&(j===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=ce),j===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=ce)),!0):!1}function _e(j,ce){let $=b,Ae=!1;if(j)if($=m.get(ce),$===void 0&&($=[],m.set(ce,$)),j.isWebGLMultipleRenderTargets){let we=j.texture;if($.length!==we.length||$[0]!==n.COLOR_ATTACHMENT0){for(let Ge=0,ze=we.length;Ge<ze;Ge++)$[Ge]=n.COLOR_ATTACHMENT0+Ge;$.length=we.length,Ae=!0}}else $[0]!==n.COLOR_ATTACHMENT0&&($[0]=n.COLOR_ATTACHMENT0,Ae=!0);else $[0]!==n.BACK&&($[0]=n.BACK,Ae=!0);Ae&&(t.isWebGL2?n.drawBuffers($):e.get("WEBGL_draw_buffers").drawBuffersWEBGL($))}function pe(j){return g!==j?(n.useProgram(j),g=j,!0):!1}let K={[Sc]:n.FUNC_ADD,[vP]:n.FUNC_SUBTRACT,[wP]:n.FUNC_REVERSE_SUBTRACT};if(i)K[oS]=n.MIN,K[aS]=n.MAX;else{let j=e.get("EXT_blend_minmax");j!==null&&(K[oS]=j.MIN_EXT,K[aS]=j.MAX_EXT)}let be={[bP]:n.ZERO,[xP]:n.ONE,[CP]:n.SRC_COLOR,[OE]:n.SRC_ALPHA,[_P]:n.SRC_ALPHA_SATURATE,[MP]:n.DST_COLOR,[EP]:n.DST_ALPHA,[SP]:n.ONE_MINUS_SRC_COLOR,[QE]:n.ONE_MINUS_SRC_ALPHA,[TP]:n.ONE_MINUS_DST_COLOR,[IP]:n.ONE_MINUS_DST_ALPHA};function me(j,ce,$,Ae,we,Ge,ze,Ze){if(j===lr){w===!0&&(le(n.BLEND),w=!1);return}if(w===!1&&(oe(n.BLEND),w=!0),j!==yP){if(j!==I||Ze!==T){if((v!==Sc||S!==Sc)&&(n.blendEquation(n.FUNC_ADD),v=Sc,S=Sc),Ze)switch(j){case _c:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case la:n.blendFunc(n.ONE,n.ONE);break;case rS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case sS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case _c:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case la:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case rS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case sS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}C=null,E=null,M=null,_=null,I=j,T=Ze}return}we=we||ce,Ge=Ge||$,ze=ze||Ae,(ce!==v||we!==S)&&(n.blendEquationSeparate(K[ce],K[we]),v=ce,S=we),($!==C||Ae!==E||Ge!==M||ze!==_)&&(n.blendFuncSeparate(be[$],be[Ae],be[Ge],be[ze]),C=$,E=Ae,M=Ge,_=ze),I=j,T=!1}function fe(j,ce){j.side===Pt?le(n.CULL_FACE):oe(n.CULL_FACE);let $=j.side===Gn;ce&&($=!$),de($),j.blending===_c&&j.transparent===!1?me(lr):me(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.premultipliedAlpha),u.setFunc(j.depthFunc),u.setTest(j.depthTest),u.setMask(j.depthWrite),c.setMask(j.colorWrite);let Ae=j.stencilWrite;h.setTest(Ae),Ae&&(h.setMask(j.stencilWriteMask),h.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),h.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Se(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?oe(n.SAMPLE_ALPHA_TO_COVERAGE):le(n.SAMPLE_ALPHA_TO_COVERAGE)}function de(j){D!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),D=j)}function Fe(j){j!==mP?(oe(n.CULL_FACE),j!==R&&(j===iS?n.cullFace(n.BACK):j===gP?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):le(n.CULL_FACE),R=j}function ye(j){j!==B&&(Q&&n.lineWidth(j),B=j)}function Se(j,ce,$){j?(oe(n.POLYGON_OFFSET_FILL),(P!==ce||F!==$)&&(n.polygonOffset(ce,$),P=ce,F=$)):le(n.POLYGON_OFFSET_FILL)}function Pe(j){j?oe(n.SCISSOR_TEST):le(n.SCISSOR_TEST)}function Ee(j){j===void 0&&(j=n.TEXTURE0+z-1),O!==j&&(n.activeTexture(j),O=j)}function We(j,ce,$){$===void 0&&(O===null?$=n.TEXTURE0+z-1:$=O);let Ae=W[$];Ae===void 0&&(Ae={type:void 0,texture:void 0},W[$]=Ae),(Ae.type!==j||Ae.texture!==ce)&&(O!==$&&(n.activeTexture($),O=$),n.bindTexture(j,ce||se[j]),Ae.type=j,Ae.texture=ce)}function J(){let j=W[O];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function H(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ue(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Re(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Be(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ue(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ne(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ce(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Z(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function L(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function N(j){te.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),te.copy(j))}function X(j){ie.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),ie.copy(j))}function q(j,ce){let $=f.get(ce);$===void 0&&($=new WeakMap,f.set(ce,$));let Ae=$.get(j);Ae===void 0&&(Ae=n.getUniformBlockIndex(ce,j.name),$.set(j,Ae))}function ne(j,ce){let Ae=f.get(ce).get(j);A.get(ce)!==Ae&&(n.uniformBlockBinding(ce,Ae,j.__bindingPointIndex),A.set(ce,Ae))}function ae(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},O=null,W={},p={},m=new WeakMap,b=[],g=null,w=!1,I=null,v=null,C=null,E=null,S=null,M=null,_=null,T=!1,D=null,R=null,B=null,P=null,F=null,te.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),c.reset(),u.reset(),h.reset()}return{buffers:{color:c,depth:u,stencil:h},enable:oe,disable:le,bindFramebuffer:xe,drawBuffers:_e,useProgram:pe,setBlending:me,setMaterial:fe,setFlipSided:de,setCullFace:Fe,setLineWidth:ye,setPolygonOffset:Se,setScissorTest:Pe,activeTexture:Ee,bindTexture:We,unbindTexture:J,compressedTexImage2D:H,compressedTexImage3D:ue,texImage2D:Z,texImage3D:L,updateUBOMapping:q,uniformBlockBinding:ne,texStorage2D:Ne,texStorage3D:Ce,texSubImage2D:Re,texSubImage3D:Be,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Ue,scissor:N,viewport:X,reset:ae}}function G7(n,e,t,i,o,a,l){let c=o.isWebGL2,u=o.maxTextures,h=o.maxCubemapSize,A=o.maxTextureSize,f=o.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,b,g=new WeakMap,w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function I(J,H){return w?new OffscreenCanvas(J,H):xd("canvas")}function v(J,H,ue,Re){let Be=1;if((J.width>Re||J.height>Re)&&(Be=Re/Math.max(J.width,J.height)),Be<1||H===!0)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap){let Ie=H?Z0:Math.floor,Ue=Ie(Be*J.width),Ne=Ie(Be*J.height);b===void 0&&(b=I(Ue,Ne));let Ce=ue?I(Ue,Ne):b;return Ce.width=Ue,Ce.height=Ne,Ce.getContext("2d").drawImage(J,0,0,Ue,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+Ue+"x"+Ne+")."),Ce}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),J;return J}function C(J){return RS(J.width)&&RS(J.height)}function E(J){return c?!1:J.wrapS!==Qn||J.wrapT!==Qn||J.minFilter!==Tt&&J.minFilter!==Et}function S(J,H){return J.generateMipmaps&&H&&J.minFilter!==Tt&&J.minFilter!==Et}function M(J){n.generateMipmap(J)}function _(J,H,ue,Re,Be=!1){if(c===!1)return H;if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Ie=H;return H===n.RED&&(ue===n.FLOAT&&(Ie=n.R32F),ue===n.HALF_FLOAT&&(Ie=n.R16F),ue===n.UNSIGNED_BYTE&&(Ie=n.R8)),H===n.RG&&(ue===n.FLOAT&&(Ie=n.RG32F),ue===n.HALF_FLOAT&&(Ie=n.RG16F),ue===n.UNSIGNED_BYTE&&(Ie=n.RG8)),H===n.RGBA&&(ue===n.FLOAT&&(Ie=n.RGBA32F),ue===n.HALF_FLOAT&&(Ie=n.RGBA16F),ue===n.UNSIGNED_BYTE&&(Ie=Re===it&&Be===!1?n.SRGB8_ALPHA8:n.RGBA8),ue===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),ue===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)),(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function T(J,H,ue){return S(J,ue)===!0||J.isFramebufferTexture&&J.minFilter!==Tt&&J.minFilter!==Et?Math.log2(Math.max(H.width,H.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?H.mipmaps.length:1}function D(J){return J===Tt||J===Sh||J===Dc?n.NEAREST:n.LINEAR}function R(J){let H=J.target;H.removeEventListener("dispose",R),P(H),H.isVideoTexture&&m.delete(H)}function B(J){let H=J.target;H.removeEventListener("dispose",B),z(H)}function P(J){let H=i.get(J);if(H.__webglInit===void 0)return;let ue=J.source,Re=g.get(ue);if(Re){let Be=Re[H.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&F(J),Object.keys(Re).length===0&&g.delete(ue)}i.remove(J)}function F(J){let H=i.get(J);n.deleteTexture(H.__webglTexture);let ue=J.source,Re=g.get(ue);delete Re[H.__cacheKey],l.memory.textures--}function z(J){let H=J.texture,ue=i.get(J),Re=i.get(H);if(Re.__webglTexture!==void 0&&(n.deleteTexture(Re.__webglTexture),l.memory.textures--),J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++)n.deleteFramebuffer(ue.__webglFramebuffer[Be]),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[Be]);else{if(n.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Be=0;Be<ue.__webglColorRenderbuffer.length;Be++)ue.__webglColorRenderbuffer[Be]&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer[Be]);ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(J.isWebGLMultipleRenderTargets)for(let Be=0,Ie=H.length;Be<Ie;Be++){let Ue=i.get(H[Be]);Ue.__webglTexture&&(n.deleteTexture(Ue.__webglTexture),l.memory.textures--),i.remove(H[Be])}i.remove(H),i.remove(J)}let Q=0;function V(){Q=0}function G(){let J=Q;return J>=u&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+u),Q+=1,J}function O(J){let H=[];return H.push(J.wrapS),H.push(J.wrapT),H.push(J.wrapR||0),H.push(J.magFilter),H.push(J.minFilter),H.push(J.anisotropy),H.push(J.internalFormat),H.push(J.format),H.push(J.type),H.push(J.generateMipmaps),H.push(J.premultiplyAlpha),H.push(J.flipY),H.push(J.unpackAlignment),H.push(J.colorSpace),H.join()}function W(J,H){let ue=i.get(J);if(J.isVideoTexture&&Ee(J),J.isRenderTargetTexture===!1&&J.version>0&&ue.__version!==J.version){let Re=J.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(ue,J,H);return}}t.bindTexture(n.TEXTURE_2D,ue.__webglTexture,n.TEXTURE0+H)}function k(J,H){let ue=i.get(J);if(J.version>0&&ue.__version!==J.version){xe(ue,J,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ue.__webglTexture,n.TEXTURE0+H)}function Y(J,H){let ue=i.get(J);if(J.version>0&&ue.__version!==J.version){xe(ue,J,H);return}t.bindTexture(n.TEXTURE_3D,ue.__webglTexture,n.TEXTURE0+H)}function te(J,H){let ue=i.get(J);if(J.version>0&&ue.__version!==J.version){_e(ue,J,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+H)}let ie={[ji]:n.REPEAT,[Qn]:n.CLAMP_TO_EDGE,[Lc]:n.MIRRORED_REPEAT},re={[Tt]:n.NEAREST,[Sh]:n.NEAREST_MIPMAP_NEAREST,[Dc]:n.NEAREST_MIPMAP_LINEAR,[Et]:n.LINEAR,[Kd]:n.LINEAR_MIPMAP_NEAREST,[Fs]:n.LINEAR_MIPMAP_LINEAR},se={[i3]:n.NEVER,[u3]:n.ALWAYS,[r3]:n.LESS,[o3]:n.LEQUAL,[s3]:n.EQUAL,[c3]:n.GEQUAL,[a3]:n.GREATER,[l3]:n.NOTEQUAL};function oe(J,H,ue){if(ue?(n.texParameteri(J,n.TEXTURE_WRAP_S,ie[H.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,ie[H.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,ie[H.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,re[H.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,re[H.minFilter])):(n.texParameteri(J,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(J,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(H.wrapS!==Qn||H.wrapT!==Qn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(J,n.TEXTURE_MAG_FILTER,D(H.magFilter)),n.texParameteri(J,n.TEXTURE_MIN_FILTER,D(H.minFilter)),H.minFilter!==Tt&&H.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),H.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,se[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){let Re=e.get("EXT_texture_filter_anisotropic");if(H.magFilter===Tt||H.minFilter!==Dc&&H.minFilter!==Fs||H.type===cs&&e.has("OES_texture_float_linear")===!1||c===!1&&H.type===Tn&&e.has("OES_texture_half_float_linear")===!1)return;(H.anisotropy>1||i.get(H).__currentAnisotropy)&&(n.texParameterf(J,Re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,o.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy)}}function le(J,H){let ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,H.addEventListener("dispose",R));let Re=H.source,Be=g.get(Re);Be===void 0&&(Be={},g.set(Re,Be));let Ie=O(H);if(Ie!==J.__cacheKey){Be[Ie]===void 0&&(Be[Ie]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,ue=!0),Be[Ie].usedTimes++;let Ue=Be[J.__cacheKey];Ue!==void 0&&(Be[J.__cacheKey].usedTimes--,Ue.usedTimes===0&&F(H)),J.__cacheKey=Ie,J.__webglTexture=Be[Ie].texture}return ue}function xe(J,H,ue){let Re=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Re=n.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Re=n.TEXTURE_3D);let Be=le(J,H),Ie=H.source;t.bindTexture(Re,J.__webglTexture,n.TEXTURE0+ue);let Ue=i.get(Ie);if(Ie.version!==Ue.__version||Be===!0){t.activeTexture(n.TEXTURE0+ue),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);let Ne=E(H)&&C(H.image)===!1,Ce=v(H.image,Ne,!1,A);Ce=We(H,Ce);let Z=C(Ce)||c,L=a.convert(H.format,H.colorSpace),N=a.convert(H.type),X=_(H.internalFormat,L,N,H.colorSpace);oe(Re,H,Z);let q,ne=H.mipmaps,ae=c&&H.isVideoTexture!==!0,j=Ue.__version===void 0||Be===!0,ce=T(H,Ce,Z);if(H.isDepthTexture)X=n.DEPTH_COMPONENT,c?H.type===cs?X=n.DEPTH_COMPONENT32F:H.type===Ns?X=n.DEPTH_COMPONENT24:H.type===nl?X=n.DEPTH24_STENCIL8:X=n.DEPTH_COMPONENT16:H.type===cs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),H.format===go&&X===n.DEPTH_COMPONENT&&H.type!==Vh&&H.type!==Ns&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),H.type=Ns,N=a.convert(H.type)),H.format===Bc&&X===n.DEPTH_COMPONENT&&(X=n.DEPTH_STENCIL,H.type!==nl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),H.type=nl,N=a.convert(H.type))),j&&(ae?t.texStorage2D(n.TEXTURE_2D,1,X,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,X,Ce.width,Ce.height,0,L,N,null));else if(H.isDataTexture)if(ne.length>0&&Z){ae&&j&&t.texStorage2D(n.TEXTURE_2D,ce,X,ne[0].width,ne[0].height);for(let $=0,Ae=ne.length;$<Ae;$++)q=ne[$],ae?t.texSubImage2D(n.TEXTURE_2D,$,0,0,q.width,q.height,L,N,q.data):t.texImage2D(n.TEXTURE_2D,$,X,q.width,q.height,0,L,N,q.data);H.generateMipmaps=!1}else ae?(j&&t.texStorage2D(n.TEXTURE_2D,ce,X,Ce.width,Ce.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ce.width,Ce.height,L,N,Ce.data)):t.texImage2D(n.TEXTURE_2D,0,X,Ce.width,Ce.height,0,L,N,Ce.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){ae&&j&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ce,X,ne[0].width,ne[0].height,Ce.depth);for(let $=0,Ae=ne.length;$<Ae;$++)q=ne[$],H.format!==ni?L!==null?ae?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$,0,0,0,q.width,q.height,Ce.depth,L,q.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,$,X,q.width,q.height,Ce.depth,0,q.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?t.texSubImage3D(n.TEXTURE_2D_ARRAY,$,0,0,0,q.width,q.height,Ce.depth,L,N,q.data):t.texImage3D(n.TEXTURE_2D_ARRAY,$,X,q.width,q.height,Ce.depth,0,L,N,q.data)}else{ae&&j&&t.texStorage2D(n.TEXTURE_2D,ce,X,ne[0].width,ne[0].height);for(let $=0,Ae=ne.length;$<Ae;$++)q=ne[$],H.format!==ni?L!==null?ae?t.compressedTexSubImage2D(n.TEXTURE_2D,$,0,0,q.width,q.height,L,q.data):t.compressedTexImage2D(n.TEXTURE_2D,$,X,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?t.texSubImage2D(n.TEXTURE_2D,$,0,0,q.width,q.height,L,N,q.data):t.texImage2D(n.TEXTURE_2D,$,X,q.width,q.height,0,L,N,q.data)}else if(H.isDataArrayTexture)ae?(j&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ce,X,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,L,N,Ce.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,X,Ce.width,Ce.height,Ce.depth,0,L,N,Ce.data);else if(H.isData3DTexture)ae?(j&&t.texStorage3D(n.TEXTURE_3D,ce,X,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,L,N,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,X,Ce.width,Ce.height,Ce.depth,0,L,N,Ce.data);else if(H.isFramebufferTexture){if(j)if(ae)t.texStorage2D(n.TEXTURE_2D,ce,X,Ce.width,Ce.height);else{let $=Ce.width,Ae=Ce.height;for(let we=0;we<ce;we++)t.texImage2D(n.TEXTURE_2D,we,X,$,Ae,0,L,N,null),$>>=1,Ae>>=1}}else if(ne.length>0&&Z){ae&&j&&t.texStorage2D(n.TEXTURE_2D,ce,X,ne[0].width,ne[0].height);for(let $=0,Ae=ne.length;$<Ae;$++)q=ne[$],ae?t.texSubImage2D(n.TEXTURE_2D,$,0,0,L,N,q):t.texImage2D(n.TEXTURE_2D,$,X,L,N,q);H.generateMipmaps=!1}else ae?(j&&t.texStorage2D(n.TEXTURE_2D,ce,X,Ce.width,Ce.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,L,N,Ce)):t.texImage2D(n.TEXTURE_2D,0,X,L,N,Ce);S(H,Z)&&M(Re),Ue.__version=Ie.version,H.onUpdate&&H.onUpdate(H)}J.__version=H.version}function _e(J,H,ue){if(H.image.length!==6)return;let Re=le(J,H),Be=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+ue);let Ie=i.get(Be);if(Be.version!==Ie.__version||Re===!0){t.activeTexture(n.TEXTURE0+ue),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);let Ue=H.isCompressedTexture||H.image[0].isCompressedTexture,Ne=H.image[0]&&H.image[0].isDataTexture,Ce=[];for(let $=0;$<6;$++)!Ue&&!Ne?Ce[$]=v(H.image[$],!1,!0,h):Ce[$]=Ne?H.image[$].image:H.image[$],Ce[$]=We(H,Ce[$]);let Z=Ce[0],L=C(Z)||c,N=a.convert(H.format,H.colorSpace),X=a.convert(H.type),q=_(H.internalFormat,N,X,H.colorSpace),ne=c&&H.isVideoTexture!==!0,ae=Ie.__version===void 0||Re===!0,j=T(H,Z,L);oe(n.TEXTURE_CUBE_MAP,H,L);let ce;if(Ue){ne&&ae&&t.texStorage2D(n.TEXTURE_CUBE_MAP,j,q,Z.width,Z.height);for(let $=0;$<6;$++){ce=Ce[$].mipmaps;for(let Ae=0;Ae<ce.length;Ae++){let we=ce[Ae];H.format!==ni?N!==null?ne?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,0,0,we.width,we.height,N,we.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,q,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ne?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,0,0,we.width,we.height,N,X,we.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,q,we.width,we.height,0,N,X,we.data)}}}else{ce=H.mipmaps,ne&&ae&&(ce.length>0&&j++,t.texStorage2D(n.TEXTURE_CUBE_MAP,j,q,Ce[0].width,Ce[0].height));for(let $=0;$<6;$++)if(Ne){ne?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,Ce[$].width,Ce[$].height,N,X,Ce[$].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,q,Ce[$].width,Ce[$].height,0,N,X,Ce[$].data);for(let Ae=0;Ae<ce.length;Ae++){let Ge=ce[Ae].image[$].image;ne?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,0,0,Ge.width,Ge.height,N,X,Ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,q,Ge.width,Ge.height,0,N,X,Ge.data)}}else{ne?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,N,X,Ce[$]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,q,N,X,Ce[$]);for(let Ae=0;Ae<ce.length;Ae++){let we=ce[Ae];ne?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,0,0,N,X,we.image[$]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,q,N,X,we.image[$])}}}S(H,L)&&M(n.TEXTURE_CUBE_MAP),Ie.__version=Be.version,H.onUpdate&&H.onUpdate(H)}J.__version=H.version}function pe(J,H,ue,Re,Be){let Ie=a.convert(ue.format,ue.colorSpace),Ue=a.convert(ue.type),Ne=_(ue.internalFormat,Ie,Ue,ue.colorSpace);i.get(H).__hasExternalTextures||(Be===n.TEXTURE_3D||Be===n.TEXTURE_2D_ARRAY?t.texImage3D(Be,0,Ne,H.width,H.height,H.depth,0,Ie,Ue,null):t.texImage2D(Be,0,Ne,H.width,H.height,0,Ie,Ue,null)),t.bindFramebuffer(n.FRAMEBUFFER,J),Pe(H)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Re,Be,i.get(ue).__webglTexture,0,Se(H)):(Be===n.TEXTURE_2D||Be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Re,Be,i.get(ue).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function K(J,H,ue){if(n.bindRenderbuffer(n.RENDERBUFFER,J),H.depthBuffer&&!H.stencilBuffer){let Re=n.DEPTH_COMPONENT16;if(ue||Pe(H)){let Be=H.depthTexture;Be&&Be.isDepthTexture&&(Be.type===cs?Re=n.DEPTH_COMPONENT32F:Be.type===Ns&&(Re=n.DEPTH_COMPONENT24));let Ie=Se(H);Pe(H)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ie,Re,H.width,H.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ie,Re,H.width,H.height)}else n.renderbufferStorage(n.RENDERBUFFER,Re,H.width,H.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,J)}else if(H.depthBuffer&&H.stencilBuffer){let Re=Se(H);ue&&Pe(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,n.DEPTH24_STENCIL8,H.width,H.height):Pe(H)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,n.DEPTH24_STENCIL8,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,J)}else{let Re=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let Be=0;Be<Re.length;Be++){let Ie=Re[Be],Ue=a.convert(Ie.format,Ie.colorSpace),Ne=a.convert(Ie.type),Ce=_(Ie.internalFormat,Ue,Ne,Ie.colorSpace),Z=Se(H);ue&&Pe(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Z,Ce,H.width,H.height):Pe(H)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Z,Ce,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,Ce,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function be(J,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(H.depthTexture).__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),W(H.depthTexture,0);let Re=i.get(H.depthTexture).__webglTexture,Be=Se(H);if(H.depthTexture.format===go)Pe(H)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,Be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(H.depthTexture.format===Bc)Pe(H)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,Be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function me(J){let H=i.get(J),ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!H.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");be(H.__webglFramebuffer,J)}else if(ue){H.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[Re]),H.__webglDepthbuffer[Re]=n.createRenderbuffer(),K(H.__webglDepthbuffer[Re],J,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer=n.createRenderbuffer(),K(H.__webglDepthbuffer,J,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function fe(J,H,ue){let Re=i.get(J);H!==void 0&&pe(Re.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),ue!==void 0&&me(J)}function de(J){let H=J.texture,ue=i.get(J),Re=i.get(H);J.addEventListener("dispose",B),J.isWebGLMultipleRenderTargets!==!0&&(Re.__webglTexture===void 0&&(Re.__webglTexture=n.createTexture()),Re.__version=H.version,l.memory.textures++);let Be=J.isWebGLCubeRenderTarget===!0,Ie=J.isWebGLMultipleRenderTargets===!0,Ue=C(J)||c;if(Be){ue.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)ue.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(ue.__webglFramebuffer=n.createFramebuffer(),Ie)if(o.drawBuffers){let Ne=J.texture;for(let Ce=0,Z=Ne.length;Ce<Z;Ce++){let L=i.get(Ne[Ce]);L.__webglTexture===void 0&&(L.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&J.samples>0&&Pe(J)===!1){let Ne=Ie?H:[H];ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ce=0;Ce<Ne.length;Ce++){let Z=Ne[Ce];ue.__webglColorRenderbuffer[Ce]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ce]);let L=a.convert(Z.format,Z.colorSpace),N=a.convert(Z.type),X=_(Z.internalFormat,L,N,Z.colorSpace,J.isXRRenderTarget===!0),q=Se(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,q,X,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ce,n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ce])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),K(ue.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Be){t.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture),oe(n.TEXTURE_CUBE_MAP,H,Ue);for(let Ne=0;Ne<6;Ne++)pe(ue.__webglFramebuffer[Ne],J,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne);S(H,Ue)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ie){let Ne=J.texture;for(let Ce=0,Z=Ne.length;Ce<Z;Ce++){let L=Ne[Ce],N=i.get(L);t.bindTexture(n.TEXTURE_2D,N.__webglTexture),oe(n.TEXTURE_2D,L,Ue),pe(ue.__webglFramebuffer,J,L,n.COLOR_ATTACHMENT0+Ce,n.TEXTURE_2D),S(L,Ue)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;(J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(c?Ne=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ne,Re.__webglTexture),oe(Ne,H,Ue),pe(ue.__webglFramebuffer,J,H,n.COLOR_ATTACHMENT0,Ne),S(H,Ue)&&M(Ne),t.unbindTexture()}J.depthBuffer&&me(J)}function Fe(J){let H=C(J)||c,ue=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let Re=0,Be=ue.length;Re<Be;Re++){let Ie=ue[Re];if(S(Ie,H)){let Ue=J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ne=i.get(Ie).__webglTexture;t.bindTexture(Ue,Ne),M(Ue),t.unbindTexture()}}}function ye(J){if(c&&J.samples>0&&Pe(J)===!1){let H=J.isWebGLMultipleRenderTargets?J.texture:[J.texture],ue=J.width,Re=J.height,Be=n.COLOR_BUFFER_BIT,Ie=[],Ue=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=i.get(J),Ce=J.isWebGLMultipleRenderTargets===!0;if(Ce)for(let Z=0;Z<H.length;Z++)t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Z,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Z,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let Z=0;Z<H.length;Z++){Ie.push(n.COLOR_ATTACHMENT0+Z),J.depthBuffer&&Ie.push(Ue);let L=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(L===!1&&(J.depthBuffer&&(Be|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&(Be|=n.STENCIL_BUFFER_BIT)),Ce&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Z]),L===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ue]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ue])),Ce){let N=i.get(H[Z]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,N,0)}n.blitFramebuffer(0,0,ue,Re,0,0,ue,Re,Be,n.NEAREST),p&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ie)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ce)for(let Z=0;Z<H.length;Z++){t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Z,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Z]);let L=i.get(H[Z]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Z,n.TEXTURE_2D,L,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}}function Se(J){return Math.min(f,J.samples)}function Pe(J){let H=i.get(J);return c&&J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Ee(J){let H=l.render.frame;m.get(J)!==H&&(m.set(J,H),J.update())}function We(J,H){let ue=J.colorSpace,Re=J.format,Be=J.type;return J.isCompressedTexture===!0||J.format===Y0||ue!==kr&&ue!==yo&&(ue===it?c===!1?e.has("EXT_sRGB")===!0&&Re===ni?(J.format=Y0,J.minFilter=Et,J.generateMipmaps=!1):H=Cd.sRGBToLinear(H):(Re!==ni||Be!==oa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),H}this.allocateTextureUnit=G,this.resetTextureUnits=V,this.setTexture2D=W,this.setTexture2DArray=k,this.setTexture3D=Y,this.setTextureCube=te,this.rebindTextures=fe,this.setupRenderTarget=de,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=ye,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Pe}function w3(n,e,t){let i=t.isWebGL2;function o(a,l=yo){let c;if(a===oa)return n.UNSIGNED_BYTE;if(a===zE)return n.UNSIGNED_SHORT_4_4_4_4;if(a===HE)return n.UNSIGNED_SHORT_5_5_5_1;if(a===HP)return n.BYTE;if(a===VP)return n.SHORT;if(a===Vh)return n.UNSIGNED_SHORT;if(a===GE)return n.INT;if(a===Ns)return n.UNSIGNED_INT;if(a===cs)return n.FLOAT;if(a===Tn)return i?n.HALF_FLOAT:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(a===WP)return n.ALPHA;if(a===ni)return n.RGBA;if(a===XP)return n.LUMINANCE;if(a===YP)return n.LUMINANCE_ALPHA;if(a===go)return n.DEPTH_COMPONENT;if(a===Bc)return n.DEPTH_STENCIL;if(a===Y0)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(a===By)return n.RED;if(a===VE)return n.RED_INTEGER;if(a===ZP)return n.RG;if(a===WE)return n.RG_INTEGER;if(a===XE)return n.RGBA_INTEGER;if(a===O0||a===Q0||a===G0||a===z0)if(l===it)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(a===O0)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Q0)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===G0)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===z0)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(a===O0)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Q0)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===G0)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===z0)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===lS||a===cS||a===uS||a===hS)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(a===lS)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===cS)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===uS)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===hS)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===KP)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===AS||a===fS)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(a===AS)return l===it?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(a===fS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===dS||a===pS||a===mS||a===gS||a===yS||a===vS||a===wS||a===bS||a===xS||a===CS||a===SS||a===ES||a===IS||a===MS)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(a===dS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===pS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===mS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===gS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===yS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===vS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===wS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===bS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===xS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===CS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===SS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===ES)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===IS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===MS)return l===it?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===H0)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(a===H0)return l===it?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===jP||a===TS||a===_S||a===DS)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(a===H0)return c.COMPRESSED_RED_RGTC1_EXT;if(a===TS)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===_S)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===DS)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===nl?i?n.UNSIGNED_INT_24_8:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:o}}var J0=class extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Yt=class extends mt{constructor(){super(),this.isGroup=!0,this.type="Group"}},z7={type:"move"},pd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yt,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yt,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yt,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let o=null,a=null,l=null,c=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){l=!0;for(let b of e.hand.values()){let g=t.getJointPose(b,i),w=this._getHandJoint(h,b);g!==null&&(w.matrix.fromArray(g.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=g.radius),w.visible=g!==null}let A=h.joints["index-finger-tip"],f=h.joints["thumb-tip"],d=A.position.distanceTo(f.position),p=.02,m=.005;h.inputState.pinching&&d>p+m?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&d<=p-m&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));c!==null&&(o=t.getPose(e.targetRaySpace,i),o===null&&a!==null&&(o=a),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(z7)))}return c!==null&&(c.visible=o!==null),u!==null&&(u.visible=a!==null),h!==null&&(h.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Yt;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},ll=class extends jt{constructor(e,t,i,o,a,l,c,u,h,A){if(A=A!==void 0?A:go,A!==go&&A!==Bc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&A===go&&(i=Ns),i===void 0&&A===Bc&&(i=nl),super(null,o,a,l,c,u,A,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Tt,this.minFilter=u!==void 0?u:Tt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},YS=class extends Ji{constructor(e,t){super();let i=this,o=null,a=1,l=null,c="local-floor",u=1,h=null,A=null,f=null,d=null,p=null,m=null,b=t.getContextAttributes(),g=null,w=null,I=[],v=[],C=new rn;C.layers.enable(1),C.viewport=new pt;let E=new rn;E.layers.enable(2),E.viewport=new pt;let S=[C,E],M=new J0;M.layers.enable(1),M.layers.enable(2);let _=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let Y=I[k];return Y===void 0&&(Y=new pd,I[k]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(k){let Y=I[k];return Y===void 0&&(Y=new pd,I[k]=Y),Y.getGripSpace()},this.getHand=function(k){let Y=I[k];return Y===void 0&&(Y=new pd,I[k]=Y),Y.getHandSpace()};function D(k){let Y=v.indexOf(k.inputSource);if(Y===-1)return;let te=I[Y];te!==void 0&&(te.update(k.inputSource,k.frame,h||l),te.dispatchEvent({type:k.type,data:k.inputSource}))}function R(){o.removeEventListener("select",D),o.removeEventListener("selectstart",D),o.removeEventListener("selectend",D),o.removeEventListener("squeeze",D),o.removeEventListener("squeezestart",D),o.removeEventListener("squeezeend",D),o.removeEventListener("end",R),o.removeEventListener("inputsourceschange",B);for(let k=0;k<I.length;k++){let Y=v[k];Y!==null&&(v[k]=null,I[k].disconnect(Y))}_=null,T=null,e.setRenderTarget(g),p=null,d=null,f=null,o=null,w=null,W.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){a=k,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){c=k,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(k){h=k},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return o},this.setSession=async function(k){if(o=k,o!==null){if(g=e.getRenderTarget(),o.addEventListener("select",D),o.addEventListener("selectstart",D),o.addEventListener("selectend",D),o.addEventListener("squeeze",D),o.addEventListener("squeezestart",D),o.addEventListener("squeezeend",D),o.addEventListener("end",R),o.addEventListener("inputsourceschange",B),b.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Y={antialias:o.renderState.layers===void 0?b.antialias:!0,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(o,t,Y),o.updateRenderState({baseLayer:p}),w=new _t(p.framebufferWidth,p.framebufferHeight,{format:ni,type:oa,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let Y=null,te=null,ie=null;b.depth&&(ie=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Y=b.stencil?Bc:go,te=b.stencil?nl:Ns);let re={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:a};f=new XRWebGLBinding(o,t),d=f.createProjectionLayer(re),o.updateRenderState({layers:[d]}),w=new _t(d.textureWidth,d.textureHeight,{format:ni,type:oa,depthTexture:new ll(d.textureWidth,d.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0});let se=e.properties.get(w);se.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(u),h=null,l=await o.requestReferenceSpace(c),W.setContext(o),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function B(k){for(let Y=0;Y<k.removed.length;Y++){let te=k.removed[Y],ie=v.indexOf(te);ie>=0&&(v[ie]=null,I[ie].disconnect(te))}for(let Y=0;Y<k.added.length;Y++){let te=k.added[Y],ie=v.indexOf(te);if(ie===-1){for(let se=0;se<I.length;se++)if(se>=v.length){v.push(te),ie=se;break}else if(v[se]===null){v[se]=te,ie=se;break}if(ie===-1)break}let re=I[ie];re&&re.connect(te)}}let P=new U,F=new U;function z(k,Y,te){P.setFromMatrixPosition(Y.matrixWorld),F.setFromMatrixPosition(te.matrixWorld);let ie=P.distanceTo(F),re=Y.projectionMatrix.elements,se=te.projectionMatrix.elements,oe=re[14]/(re[10]-1),le=re[14]/(re[10]+1),xe=(re[9]+1)/re[5],_e=(re[9]-1)/re[5],pe=(re[8]-1)/re[0],K=(se[8]+1)/se[0],be=oe*pe,me=oe*K,fe=ie/(-pe+K),de=fe*-pe;Y.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(de),k.translateZ(fe),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert();let Fe=oe+fe,ye=le+fe,Se=be-de,Pe=me+(ie-de),Ee=xe*le/ye*Fe,We=_e*le/ye*Fe;k.projectionMatrix.makePerspective(Se,Pe,Ee,We,Fe,ye),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}function Q(k,Y){Y===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(Y.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(o===null)return;M.near=E.near=C.near=k.near,M.far=E.far=C.far=k.far,(_!==M.near||T!==M.far)&&(o.updateRenderState({depthNear:M.near,depthFar:M.far}),_=M.near,T=M.far);let Y=k.parent,te=M.cameras;Q(M,Y);for(let ie=0;ie<te.length;ie++)Q(te[ie],Y);te.length===2?z(M,C,E):M.projectionMatrix.copy(C.projectionMatrix),V(k,M,Y)};function V(k,Y,te){te===null?k.matrix.copy(Y.matrixWorld):(k.matrix.copy(te.matrixWorld),k.matrix.invert(),k.matrix.multiply(Y.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0);let ie=k.children;for(let re=0,se=ie.length;re<se;re++)ie[re].updateMatrixWorld(!0);k.projectionMatrix.copy(Y.projectionMatrix),k.projectionMatrixInverse.copy(Y.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=Ih*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&p===null))return u},this.setFoveation=function(k){u=k,d!==null&&(d.fixedFoveation=k),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=k)};let G=null;function O(k,Y){if(A=Y.getViewerPose(h||l),m=Y,A!==null){let te=A.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let ie=!1;te.length!==M.cameras.length&&(M.cameras.length=0,ie=!0);for(let re=0;re<te.length;re++){let se=te[re],oe=null;if(p!==null)oe=p.getViewport(se);else{let xe=f.getViewSubImage(d,se);oe=xe.viewport,re===0&&(e.setRenderTargetTextures(w,xe.colorTexture,d.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(w))}let le=S[re];le===void 0&&(le=new rn,le.layers.enable(re),le.viewport=new pt,S[re]=le),le.matrix.fromArray(se.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(se.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(oe.x,oe.y,oe.width,oe.height),re===0&&(M.matrix.copy(le.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ie===!0&&M.cameras.push(le)}}for(let te=0;te<I.length;te++){let ie=v[te],re=I[te];ie!==null&&re!==void 0&&re.update(ie,Y,h||l)}G&&G(k,Y),Y.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Y}),m=null}let W=new p3;W.setAnimationLoop(O),this.setAnimationLoop=function(k){G=k},this.dispose=function(){}}};function H7(n,e){function t(g,w){g.matrixAutoUpdate===!0&&g.updateMatrix(),w.value.copy(g.matrix)}function i(g,w){w.color.getRGB(g.fogColor.value,d3(n)),w.isFog?(g.fogNear.value=w.near,g.fogFar.value=w.far):w.isFogExp2&&(g.fogDensity.value=w.density)}function o(g,w,I,v,C){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(g,w):w.isMeshToonMaterial?(a(g,w),f(g,w)):w.isMeshPhongMaterial?(a(g,w),A(g,w)):w.isMeshStandardMaterial?(a(g,w),d(g,w),w.isMeshPhysicalMaterial&&p(g,w,C)):w.isMeshMatcapMaterial?(a(g,w),m(g,w)):w.isMeshDepthMaterial?a(g,w):w.isMeshDistanceMaterial?(a(g,w),b(g,w)):w.isMeshNormalMaterial?a(g,w):w.isLineBasicMaterial?(l(g,w),w.isLineDashedMaterial&&c(g,w)):w.isPointsMaterial?u(g,w,I,v):w.isSpriteMaterial?h(g,w):w.isShadowMaterial?(g.color.value.copy(w.color),g.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(g,w){g.opacity.value=w.opacity,w.color&&g.diffuse.value.copy(w.color),w.emissive&&g.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.bumpMap&&(g.bumpMap.value=w.bumpMap,t(w.bumpMap,g.bumpMapTransform),g.bumpScale.value=w.bumpScale,w.side===Gn&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,t(w.normalMap,g.normalMapTransform),g.normalScale.value.copy(w.normalScale),w.side===Gn&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,t(w.displacementMap,g.displacementMapTransform),g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,g.emissiveMapTransform)),w.specularMap&&(g.specularMap.value=w.specularMap,t(w.specularMap,g.specularMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);let I=e.get(w).envMap;if(I&&(g.envMap.value=I,g.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=w.reflectivity,g.ior.value=w.ior,g.refractionRatio.value=w.refractionRatio),w.lightMap){g.lightMap.value=w.lightMap;let v=n.useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=w.lightMapIntensity*v,t(w.lightMap,g.lightMapTransform)}w.aoMap&&(g.aoMap.value=w.aoMap,g.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,g.aoMapTransform))}function l(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform))}function c(g,w){g.dashSize.value=w.dashSize,g.totalSize.value=w.dashSize+w.gapSize,g.scale.value=w.scale}function u(g,w,I,v){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.size.value=w.size*I,g.scale.value=v*.5,w.map&&(g.map.value=w.map,t(w.map,g.uvTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function h(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.rotation.value=w.rotation,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function A(g,w){g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4)}function f(g,w){w.gradientMap&&(g.gradientMap.value=w.gradientMap)}function d(g,w){g.metalness.value=w.metalness,w.metalnessMap&&(g.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,g.metalnessMapTransform)),g.roughness.value=w.roughness,w.roughnessMap&&(g.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,g.roughnessMapTransform)),e.get(w).envMap&&(g.envMapIntensity.value=w.envMapIntensity)}function p(g,w,I){g.ior.value=w.ior,w.sheen>0&&(g.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),g.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(g.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,g.sheenColorMapTransform)),w.sheenRoughnessMap&&(g.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,g.sheenRoughnessMapTransform))),w.clearcoat>0&&(g.clearcoat.value=w.clearcoat,g.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(g.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,g.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(g.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Gn&&g.clearcoatNormalScale.value.negate())),w.iridescence>0&&(g.iridescence.value=w.iridescence,g.iridescenceIOR.value=w.iridescenceIOR,g.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(g.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,g.iridescenceMapTransform)),w.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),w.transmission>0&&(g.transmission.value=w.transmission,g.transmissionSamplerMap.value=I.texture,g.transmissionSamplerSize.value.set(I.width,I.height),w.transmissionMap&&(g.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,g.transmissionMapTransform)),g.thickness.value=w.thickness,w.thicknessMap&&(g.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=w.attenuationDistance,g.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(g.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(g.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=w.specularIntensity,g.specularColor.value.copy(w.specularColor),w.specularColorMap&&(g.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,g.specularColorMapTransform)),w.specularIntensityMap&&(g.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,w){w.matcap&&(g.matcap.value=w.matcap)}function b(g,w){let I=e.get(w).light;g.referencePosition.value.setFromMatrixPosition(I.matrixWorld),g.nearDistance.value=I.shadow.camera.near,g.farDistance.value=I.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function V7(n,e,t,i){let o={},a={},l=[],c=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(I,v){let C=v.program;i.uniformBlockBinding(I,C)}function h(I,v){let C=o[I.id];C===void 0&&(m(I),C=A(I),o[I.id]=C,I.addEventListener("dispose",g));let E=v.program;i.updateUBOMapping(I,E);let S=e.render.frame;a[I.id]!==S&&(d(I),a[I.id]=S)}function A(I){let v=f();I.__bindingPointIndex=v;let C=n.createBuffer(),E=I.__size,S=I.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,E,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,C),C}function f(){for(let I=0;I<c;I++)if(l.indexOf(I)===-1)return l.push(I),I;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(I){let v=o[I.id],C=I.uniforms,E=I.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let S=0,M=C.length;S<M;S++){let _=C[S];if(p(_,S,E)===!0){let T=_.__offset,D=Array.isArray(_.value)?_.value:[_.value],R=0;for(let B=0;B<D.length;B++){let P=D[B],F=b(P);typeof P=="number"?(_.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,T+R,_.__data)):P.isMatrix3?(_.__data[0]=P.elements[0],_.__data[1]=P.elements[1],_.__data[2]=P.elements[2],_.__data[3]=P.elements[0],_.__data[4]=P.elements[3],_.__data[5]=P.elements[4],_.__data[6]=P.elements[5],_.__data[7]=P.elements[0],_.__data[8]=P.elements[6],_.__data[9]=P.elements[7],_.__data[10]=P.elements[8],_.__data[11]=P.elements[0]):(P.toArray(_.__data,R),R+=F.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,_.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(I,v,C){let E=I.value;if(C[v]===void 0){if(typeof E=="number")C[v]=E;else{let S=Array.isArray(E)?E:[E],M=[];for(let _=0;_<S.length;_++)M.push(S[_].clone());C[v]=M}return!0}else if(typeof E=="number"){if(C[v]!==E)return C[v]=E,!0}else{let S=Array.isArray(C[v])?C[v]:[C[v]],M=Array.isArray(E)?E:[E];for(let _=0;_<S.length;_++){let T=S[_];if(T.equals(M[_])===!1)return T.copy(M[_]),!0}}return!1}function m(I){let v=I.uniforms,C=0,E=16,S=0;for(let M=0,_=v.length;M<_;M++){let T=v[M],D={boundary:0,storage:0},R=Array.isArray(T.value)?T.value:[T.value];for(let B=0,P=R.length;B<P;B++){let F=R[B],z=b(F);D.boundary+=z.boundary,D.storage+=z.storage}if(T.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=C,M>0){S=C%E;let B=E-S;S!==0&&B-D.boundary<0&&(C+=E-S,T.__offset=C)}C+=D.storage}return S=C%E,S>0&&(C+=E-S),I.__size=C,I.__cache={},this}function b(I){let v={boundary:0,storage:0};return typeof I=="number"?(v.boundary=4,v.storage=4):I.isVector2?(v.boundary=8,v.storage=8):I.isVector3||I.isColor?(v.boundary=16,v.storage=12):I.isVector4?(v.boundary=16,v.storage=16):I.isMatrix3?(v.boundary=48,v.storage=48):I.isMatrix4?(v.boundary=64,v.storage=64):I.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",I),v}function g(I){let v=I.target;v.removeEventListener("dispose",g);let C=l.indexOf(v.__bindingPointIndex);l.splice(C,1),n.deleteBuffer(o[v.id]),delete o[v.id],delete a[v.id]}function w(){for(let I in o)n.deleteBuffer(o[I]);l=[],o={},a={}}return{bind:u,update:h,dispose:w}}function W7(){let n=xd("canvas");return n.style.display="block",n}var Rh=class{constructor(e={}){let{canvas:t=W7(),context:i=null,depth:o=!0,stencil:a=!0,alpha:l=!1,antialias:c=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;i!==null?d=i.getContextAttributes().alpha:d=l;let p=new Uint32Array(4),m=new Int32Array(4),b=null,g=null,w=[],I=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=it,this.useLegacyLights=!0,this.toneMapping=mo,this.toneMappingExposure=1;let v=this,C=!1,E=0,S=0,M=null,_=-1,T=null,D=new pt,R=new pt,B=null,P=new De(0),F=0,z=t.width,Q=t.height,V=1,G=null,O=null,W=new pt(0,0,z,Q),k=new pt(0,0,z,Q),Y=!1,te=new al,ie=!1,re=!1,se=null,oe=new ke,le=new he,xe=new U,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function pe(){return M===null?V:1}let K=i;function be(ee,ve){for(let Te=0;Te<ee.length;Te++){let ge=ee[Te],Le=t.getContext(ge,ve);if(Le!==null)return Le}return null}try{let ee={alpha:!0,depth:o,stencil:a,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:A,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${_y}`),t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",$,!1),t.addEventListener("webglcontextcreationerror",Ae,!1),K===null){let ve=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ve.shift(),K=be(ve,ee),K===null)throw be(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&K instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let me,fe,de,Fe,ye,Se,Pe,Ee,We,J,H,ue,Re,Be,Ie,Ue,Ne,Ce,Z,L,N,X,q,ne;function ae(){me=new AK(K),fe=new oK(K,me,e),me.init(fe),X=new w3(K,me,fe),de=new Q7(K,me,fe),Fe=new pK(K),ye=new T7,Se=new G7(K,me,de,ye,fe,X,Fe),Pe=new lK(v),Ee=new hK(v),We=new E6(K,fe),q=new rK(K,me,We,fe),J=new fK(K,We,Fe,q),H=new vK(K,J,We,Fe),Z=new yK(K,fe,Se),Ue=new aK(ye),ue=new M7(v,Pe,Ee,me,fe,q,Ue),Re=new H7(v,ye),Be=new D7,Ie=new N7(me,fe),Ce=new iK(v,Pe,Ee,de,H,d,u),Ne=new O7(v,H,fe),ne=new V7(K,Fe,fe,de),L=new sK(K,me,Fe,fe),N=new dK(K,me,Fe,fe),Fe.programs=ue.programs,v.capabilities=fe,v.extensions=me,v.properties=ye,v.renderLists=Be,v.shadowMap=Ne,v.state=de,v.info=Fe}ae();let j=new YS(v,K);this.xr=j,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){let ee=me.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){let ee=me.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(ee){ee!==void 0&&(V=ee,this.setSize(z,Q,!1))},this.getSize=function(ee){return ee.set(z,Q)},this.setSize=function(ee,ve,Te=!0){if(j.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=ee,Q=ve,t.width=Math.floor(ee*V),t.height=Math.floor(ve*V),Te===!0&&(t.style.width=ee+"px",t.style.height=ve+"px"),this.setViewport(0,0,ee,ve)},this.getDrawingBufferSize=function(ee){return ee.set(z*V,Q*V).floor()},this.setDrawingBufferSize=function(ee,ve,Te){z=ee,Q=ve,V=Te,t.width=Math.floor(ee*Te),t.height=Math.floor(ve*Te),this.setViewport(0,0,ee,ve)},this.getCurrentViewport=function(ee){return ee.copy(D)},this.getViewport=function(ee){return ee.copy(W)},this.setViewport=function(ee,ve,Te,ge){ee.isVector4?W.set(ee.x,ee.y,ee.z,ee.w):W.set(ee,ve,Te,ge),de.viewport(D.copy(W).multiplyScalar(V).floor())},this.getScissor=function(ee){return ee.copy(k)},this.setScissor=function(ee,ve,Te,ge){ee.isVector4?k.set(ee.x,ee.y,ee.z,ee.w):k.set(ee,ve,Te,ge),de.scissor(R.copy(k).multiplyScalar(V).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(ee){de.setScissorTest(Y=ee)},this.setOpaqueSort=function(ee){G=ee},this.setTransparentSort=function(ee){O=ee},this.getClearColor=function(ee){return ee.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(ee=!0,ve=!0,Te=!0){let ge=0;if(ee){let Le=!1;if(M!==null){let qe=M.texture.format;Le=qe===XE||qe===WE||qe===VE}if(Le){let qe=M.texture.type,ot=qe===oa||qe===Ns||qe===Vh||qe===nl||qe===zE||qe===HE,lt=Ce.getClearColor(),ut=Ce.getClearAlpha(),wt=lt.r,Oe=lt.g,ft=lt.b;ot?(p[0]=wt,p[1]=Oe,p[2]=ft,p[3]=ut,K.clearBufferuiv(K.COLOR,0,p)):(m[0]=wt,m[1]=Oe,m[2]=ft,m[3]=ut,K.clearBufferiv(K.COLOR,0,m))}else ge|=K.COLOR_BUFFER_BIT}ve&&(ge|=K.DEPTH_BUFFER_BIT),Te&&(ge|=K.STENCIL_BUFFER_BIT),K.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",$,!1),t.removeEventListener("webglcontextcreationerror",Ae,!1),Be.dispose(),Ie.dispose(),ye.dispose(),Pe.dispose(),Ee.dispose(),H.dispose(),q.dispose(),ne.dispose(),ue.dispose(),j.dispose(),j.removeEventListener("sessionstart",at),j.removeEventListener("sessionend",vt),se&&(se.dispose(),se=null),st.stop()};function ce(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function $(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;let ee=Fe.autoReset,ve=Ne.enabled,Te=Ne.autoUpdate,ge=Ne.needsUpdate,Le=Ne.type;ae(),Fe.autoReset=ee,Ne.enabled=ve,Ne.autoUpdate=Te,Ne.needsUpdate=ge,Ne.type=Le}function Ae(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function we(ee){let ve=ee.target;ve.removeEventListener("dispose",we),Ge(ve)}function Ge(ee){ze(ee),ye.remove(ee)}function ze(ee){let ve=ye.get(ee).programs;ve!==void 0&&(ve.forEach(function(Te){ue.releaseProgram(Te)}),ee.isShaderMaterial&&ue.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,ve,Te,ge,Le,qe){ve===null&&(ve=_e);let ot=Le.isMesh&&Le.matrixWorld.determinant()<0,lt=Kn(ee,ve,Te,ge,Le);de.setMaterial(ge,ot);let ut=Te.index,wt=1;ge.wireframe===!0&&(ut=J.getWireframeAttribute(Te),wt=2);let Oe=Te.drawRange,ft=Te.attributes.position,fn=Oe.start*wt,en=(Oe.start+Oe.count)*wt;qe!==null&&(fn=Math.max(fn,qe.start*wt),en=Math.min(en,(qe.start+qe.count)*wt)),ut!==null?(fn=Math.max(fn,0),en=Math.min(en,ut.count)):ft!=null&&(fn=Math.max(fn,0),en=Math.min(en,ft.count));let Pi=en-fn;if(Pi<0||Pi===1/0)return;q.setup(Le,ge,lt,Te,ut);let is,dn=L;if(ut!==null&&(is=We.get(ut),dn=N,dn.setIndex(is)),Le.isMesh)ge.wireframe===!0?(de.setLineWidth(ge.wireframeLinewidth*pe()),dn.setMode(K.LINES)):dn.setMode(K.TRIANGLES);else if(Le.isLine){let St=ge.linewidth;St===void 0&&(St=1),de.setLineWidth(St*pe()),Le.isLineSegments?dn.setMode(K.LINES):Le.isLineLoop?dn.setMode(K.LINE_LOOP):dn.setMode(K.LINE_STRIP)}else Le.isPoints?dn.setMode(K.POINTS):Le.isSprite&&dn.setMode(K.TRIANGLES);if(Le.isInstancedMesh)dn.renderInstances(fn,Pi,Le.count);else if(Te.isInstancedBufferGeometry){let St=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,Za=Math.min(Te.instanceCount,St);dn.renderInstances(fn,Pi,Za)}else dn.render(fn,Pi)},this.compile=function(ee,ve){function Te(ge,Le,qe){ge.transparent===!0&&ge.side===Pt&&ge.forceSinglePass===!1?(ge.side=Gn,ge.needsUpdate=!0,gn(ge,Le,qe),ge.side=Ai,ge.needsUpdate=!0,gn(ge,Le,qe),ge.side=Pt):gn(ge,Le,qe)}g=Ie.get(ee),g.init(),I.push(g),ee.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ve.layers)&&(g.pushLight(ge),ge.castShadow&&g.pushShadow(ge))}),g.setupLights(v.useLegacyLights),ee.traverse(function(ge){let Le=ge.material;if(Le)if(Array.isArray(Le))for(let qe=0;qe<Le.length;qe++){let ot=Le[qe];Te(ot,ee,ge)}else Te(Le,ee,ge)}),I.pop(),g=null};let Ze=null;function je(ee){Ze&&Ze(ee)}function at(){st.stop()}function vt(){st.start()}let st=new p3;st.setAnimationLoop(je),typeof self<"u"&&st.setContext(self),this.setAnimationLoop=function(ee){Ze=ee,j.setAnimationLoop(ee),ee===null?st.stop():st.start()},j.addEventListener("sessionstart",at),j.addEventListener("sessionend",vt),this.render=function(ee,ve){if(ve!==void 0&&ve.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),j.enabled===!0&&j.isPresenting===!0&&(j.cameraAutoUpdate===!0&&j.updateCamera(ve),ve=j.getCamera()),ee.isScene===!0&&ee.onBeforeRender(v,ee,ve,M),g=Ie.get(ee,I.length),g.init(),I.push(g),oe.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),te.setFromProjectionMatrix(oe),re=this.localClippingEnabled,ie=Ue.init(this.clippingPlanes,re),b=Be.get(ee,w.length),b.init(),w.push(b),kn(ee,ve,0,v.sortObjects),b.finish(),v.sortObjects===!0&&b.sort(G,O),this.info.render.frame++,ie===!0&&Ue.beginShadows();let Te=g.state.shadowsArray;if(Ne.render(Te,ee,ve),ie===!0&&Ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ce.render(b,ee),g.setupLights(v.useLegacyLights),ve.isArrayCamera){let ge=ve.cameras;for(let Le=0,qe=ge.length;Le<qe;Le++){let ot=ge[Le];Pn(b,ee,ot,ot.viewport)}}else Pn(b,ee,ve);M!==null&&(Se.updateMultisampleRenderTarget(M),Se.updateRenderTargetMipmap(M)),ee.isScene===!0&&ee.onAfterRender(v,ee,ve),q.resetDefaultState(),_=-1,T=null,I.pop(),I.length>0?g=I[I.length-1]:g=null,w.pop(),w.length>0?b=w[w.length-1]:b=null};function kn(ee,ve,Te,ge){if(ee.visible===!1)return;if(ee.layers.test(ve.layers)){if(ee.isGroup)Te=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(ve);else if(ee.isLight)g.pushLight(ee),ee.castShadow&&g.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||te.intersectsSprite(ee)){ge&&xe.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(oe);let ot=H.update(ee),lt=ee.material;lt.visible&&b.push(ee,ot,lt,Te,xe.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||te.intersectsObject(ee))){let ot=H.update(ee),lt=ee.material;if(ge&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),xe.copy(ee.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),xe.copy(ot.boundingSphere.center)),xe.applyMatrix4(ee.matrixWorld).applyMatrix4(oe)),Array.isArray(lt)){let ut=ot.groups;for(let wt=0,Oe=ut.length;wt<Oe;wt++){let ft=ut[wt],fn=lt[ft.materialIndex];fn&&fn.visible&&b.push(ee,ot,fn,Te,xe.z,ft)}}else lt.visible&&b.push(ee,ot,lt,Te,xe.z,null)}}let qe=ee.children;for(let ot=0,lt=qe.length;ot<lt;ot++)kn(qe[ot],ve,Te,ge)}function Pn(ee,ve,Te,ge){let Le=ee.opaque,qe=ee.transmissive,ot=ee.transparent;g.setupLightsView(Te),ie===!0&&Ue.setGlobalState(v.clippingPlanes,Te),qe.length>0&&kt(Le,qe,ve,Te),ge&&de.viewport(D.copy(ge)),Le.length>0&&Rt(Le,ve,Te),qe.length>0&&Rt(qe,ve,Te),ot.length>0&&Rt(ot,ve,Te),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function kt(ee,ve,Te,ge){let Le=fe.isWebGL2;se===null&&(se=new _t(1,1,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?Tn:oa,minFilter:Fs,samples:Le?4:0})),v.getDrawingBufferSize(le),Le?se.setSize(le.x,le.y):se.setSize(Z0(le.x),Z0(le.y));let qe=v.getRenderTarget();v.setRenderTarget(se),v.getClearColor(P),F=v.getClearAlpha(),F<1&&v.setClearColor(16777215,.5),v.clear();let ot=v.toneMapping;v.toneMapping=mo,Rt(ee,Te,ge),Se.updateMultisampleRenderTarget(se),Se.updateRenderTargetMipmap(se);let lt=!1;for(let ut=0,wt=ve.length;ut<wt;ut++){let Oe=ve[ut],ft=Oe.object,fn=Oe.geometry,en=Oe.material,Pi=Oe.group;if(en.side===Pt&&ft.layers.test(ge.layers)){let is=en.side;en.side=Gn,en.needsUpdate=!0,Si(ft,Te,ge,fn,en,Pi),en.side=is,en.needsUpdate=!0,lt=!0}}lt===!0&&(Se.updateMultisampleRenderTarget(se),Se.updateRenderTargetMipmap(se)),v.setRenderTarget(qe),v.setClearColor(P,F),v.toneMapping=ot}function Rt(ee,ve,Te){let ge=ve.isScene===!0?ve.overrideMaterial:null;for(let Le=0,qe=ee.length;Le<qe;Le++){let ot=ee[Le],lt=ot.object,ut=ot.geometry,wt=ge===null?ot.material:ge,Oe=ot.group;lt.layers.test(Te.layers)&&Si(lt,ve,Te,ut,wt,Oe)}}function Si(ee,ve,Te,ge,Le,qe){ee.onBeforeRender(v,ve,Te,ge,Le,qe),ee.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Le.onBeforeRender(v,ve,Te,ge,ee,qe),Le.transparent===!0&&Le.side===Pt&&Le.forceSinglePass===!1?(Le.side=Gn,Le.needsUpdate=!0,v.renderBufferDirect(Te,ve,ge,Le,ee,qe),Le.side=Ai,Le.needsUpdate=!0,v.renderBufferDirect(Te,ve,ge,Le,ee,qe),Le.side=Pt):v.renderBufferDirect(Te,ve,ge,Le,ee,qe),ee.onAfterRender(v,ve,Te,ge,Le,qe)}function gn(ee,ve,Te){ve.isScene!==!0&&(ve=_e);let ge=ye.get(ee),Le=g.state.lights,qe=g.state.shadowsArray,ot=Le.state.version,lt=ue.getParameters(ee,Le.state,qe,ve,Te),ut=ue.getProgramCacheKey(lt),wt=ge.programs;ge.environment=ee.isMeshStandardMaterial?ve.environment:null,ge.fog=ve.fog,ge.envMap=(ee.isMeshStandardMaterial?Ee:Pe).get(ee.envMap||ge.environment),wt===void 0&&(ee.addEventListener("dispose",we),wt=new Map,ge.programs=wt);let Oe=wt.get(ut);if(Oe!==void 0){if(ge.currentProgram===Oe&&ge.lightsStateVersion===ot)return yn(ee,lt),Oe}else lt.uniforms=ue.getUniforms(ee),ee.onBuild(Te,lt,v),ee.onBeforeCompile(lt,v),Oe=ue.acquireProgram(lt,ut),wt.set(ut,Oe),ge.uniforms=lt.uniforms;let ft=ge.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(ft.clippingPlanes=Ue.uniform),yn(ee,lt),ge.needsLights=ki(ee),ge.lightsStateVersion=ot,ge.needsLights&&(ft.ambientLightColor.value=Le.state.ambient,ft.lightProbe.value=Le.state.probe,ft.directionalLights.value=Le.state.directional,ft.directionalLightShadows.value=Le.state.directionalShadow,ft.spotLights.value=Le.state.spot,ft.spotLightShadows.value=Le.state.spotShadow,ft.rectAreaLights.value=Le.state.rectArea,ft.ltc_1.value=Le.state.rectAreaLTC1,ft.ltc_2.value=Le.state.rectAreaLTC2,ft.pointLights.value=Le.state.point,ft.pointLightShadows.value=Le.state.pointShadow,ft.hemisphereLights.value=Le.state.hemi,ft.directionalShadowMap.value=Le.state.directionalShadowMap,ft.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,ft.spotShadowMap.value=Le.state.spotShadowMap,ft.spotLightMatrix.value=Le.state.spotLightMatrix,ft.spotLightMap.value=Le.state.spotLightMap,ft.pointShadowMap.value=Le.state.pointShadowMap,ft.pointShadowMatrix.value=Le.state.pointShadowMatrix);let fn=Oe.getUniforms(),en=Ch.seqWithValue(fn.seq,ft);return ge.currentProgram=Oe,ge.uniformsList=en,Oe}function yn(ee,ve){let Te=ye.get(ee);Te.outputColorSpace=ve.outputColorSpace,Te.instancing=ve.instancing,Te.skinning=ve.skinning,Te.morphTargets=ve.morphTargets,Te.morphNormals=ve.morphNormals,Te.morphColors=ve.morphColors,Te.morphTargetsCount=ve.morphTargetsCount,Te.numClippingPlanes=ve.numClippingPlanes,Te.numIntersection=ve.numClipIntersection,Te.vertexAlphas=ve.vertexAlphas,Te.vertexTangents=ve.vertexTangents,Te.toneMapping=ve.toneMapping}function Kn(ee,ve,Te,ge,Le){ve.isScene!==!0&&(ve=_e),Se.resetTextureUnits();let qe=ve.fog,ot=ge.isMeshStandardMaterial?ve.environment:null,lt=M===null?v.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:kr,ut=(ge.isMeshStandardMaterial?Ee:Pe).get(ge.envMap||ot),wt=ge.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,Oe=!!Te.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),ft=!!Te.morphAttributes.position,fn=!!Te.morphAttributes.normal,en=!!Te.morphAttributes.color,Pi=ge.toneMapped?v.toneMapping:mo,is=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,dn=is!==void 0?is.length:0,St=ye.get(ge),Za=g.state.lights;if(ie===!0&&(re===!0||ee!==T)){let Ei=ee===T&&ge.id===_;Ue.setState(ge,ee,Ei)}let Nn=!1;ge.version===St.__version?(St.needsLights&&St.lightsStateVersion!==Za.state.version||St.outputColorSpace!==lt||Le.isInstancedMesh&&St.instancing===!1||!Le.isInstancedMesh&&St.instancing===!0||Le.isSkinnedMesh&&St.skinning===!1||!Le.isSkinnedMesh&&St.skinning===!0||St.envMap!==ut||ge.fog===!0&&St.fog!==qe||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==Ue.numPlanes||St.numIntersection!==Ue.numIntersection)||St.vertexAlphas!==wt||St.vertexTangents!==Oe||St.morphTargets!==ft||St.morphNormals!==fn||St.morphColors!==en||St.toneMapping!==Pi||fe.isWebGL2===!0&&St.morphTargetsCount!==dn)&&(Nn=!0):(Nn=!0,St.__version=ge.version);let rs=St.currentProgram;Nn===!0&&(rs=gn(ge,ve,Le));let Wf=!1,jo=!1,Zu=!1,Fn=rs.getUniforms(),Ds=St.uniforms;if(de.useProgram(rs.program)&&(Wf=!0,jo=!0,Zu=!0),ge.id!==_&&(_=ge.id,jo=!0),Wf||T!==ee){if(Fn.setValue(K,"projectionMatrix",ee.projectionMatrix),fe.logarithmicDepthBuffer&&Fn.setValue(K,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),T!==ee&&(T=ee,jo=!0,Zu=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){let Ei=Fn.map.cameraPosition;Ei!==void 0&&Ei.setValue(K,xe.setFromMatrixPosition(ee.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Fn.setValue(K,"isOrthographic",ee.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Le.isSkinnedMesh)&&Fn.setValue(K,"viewMatrix",ee.matrixWorldInverse)}if(Le.isSkinnedMesh){Fn.setOptional(K,Le,"bindMatrix"),Fn.setOptional(K,Le,"bindMatrixInverse");let Ei=Le.skeleton;Ei&&(fe.floatVertexTextures?(Ei.boneTexture===null&&Ei.computeBoneTexture(),Fn.setValue(K,"boneTexture",Ei.boneTexture,Se),Fn.setValue(K,"boneTextureSize",Ei.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let uo=Te.morphAttributes;if((uo.position!==void 0||uo.normal!==void 0||uo.color!==void 0&&fe.isWebGL2===!0)&&Z.update(Le,Te,rs),(jo||St.receiveShadow!==Le.receiveShadow)&&(St.receiveShadow=Le.receiveShadow,Fn.setValue(K,"receiveShadow",Le.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Ds.envMap.value=ut,Ds.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),jo&&(Fn.setValue(K,"toneMappingExposure",v.toneMappingExposure),St.needsLights&&Mr(Ds,Zu),qe&&ge.fog===!0&&Re.refreshFogUniforms(Ds,qe),Re.refreshMaterialUniforms(Ds,ge,V,Q,se),Ch.upload(K,St.uniformsList,Ds,Se)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(Ch.upload(K,St.uniformsList,Ds,Se),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Fn.setValue(K,"center",Le.center),Fn.setValue(K,"modelViewMatrix",Le.modelViewMatrix),Fn.setValue(K,"normalMatrix",Le.normalMatrix),Fn.setValue(K,"modelMatrix",Le.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){let Ei=ge.uniformsGroups;for(let fc=0,Xf=Ei.length;fc<Xf;fc++)if(fe.isWebGL2){let Tr=Ei[fc];ne.update(Tr,rs),ne.bind(Tr,rs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rs}function Mr(ee,ve){ee.ambientLightColor.needsUpdate=ve,ee.lightProbe.needsUpdate=ve,ee.directionalLights.needsUpdate=ve,ee.directionalLightShadows.needsUpdate=ve,ee.pointLights.needsUpdate=ve,ee.pointLightShadows.needsUpdate=ve,ee.spotLights.needsUpdate=ve,ee.spotLightShadows.needsUpdate=ve,ee.rectAreaLights.needsUpdate=ve,ee.hemisphereLights.needsUpdate=ve}function ki(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ee,ve,Te){ye.get(ee.texture).__webglTexture=ve,ye.get(ee.depthTexture).__webglTexture=Te;let ge=ye.get(ee);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=Te===void 0,ge.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,ve){let Te=ye.get(ee);Te.__webglFramebuffer=ve,Te.__useDefaultFramebuffer=ve===void 0},this.setRenderTarget=function(ee,ve=0,Te=0){M=ee,E=ve,S=Te;let ge=!0,Le=null,qe=!1,ot=!1;if(ee){let ut=ye.get(ee);ut.__useDefaultFramebuffer!==void 0?(de.bindFramebuffer(K.FRAMEBUFFER,null),ge=!1):ut.__webglFramebuffer===void 0?Se.setupRenderTarget(ee):ut.__hasExternalTextures&&Se.rebindTextures(ee,ye.get(ee.texture).__webglTexture,ye.get(ee.depthTexture).__webglTexture);let wt=ee.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(ot=!0);let Oe=ye.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Le=Oe[ve],qe=!0):fe.isWebGL2&&ee.samples>0&&Se.useMultisampledRTT(ee)===!1?Le=ye.get(ee).__webglMultisampledFramebuffer:Le=Oe,D.copy(ee.viewport),R.copy(ee.scissor),B=ee.scissorTest}else D.copy(W).multiplyScalar(V).floor(),R.copy(k).multiplyScalar(V).floor(),B=Y;if(de.bindFramebuffer(K.FRAMEBUFFER,Le)&&fe.drawBuffers&&ge&&de.drawBuffers(ee,Le),de.viewport(D),de.scissor(R),de.setScissorTest(B),qe){let ut=ye.get(ee.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ut.__webglTexture,Te)}else if(ot){let ut=ye.get(ee.texture),wt=ve||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,ut.__webglTexture,Te||0,wt)}_=-1},this.readRenderTargetPixels=function(ee,ve,Te,ge,Le,qe,ot){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=ye.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&ot!==void 0&&(lt=lt[ot]),lt){de.bindFramebuffer(K.FRAMEBUFFER,lt);try{let ut=ee.texture,wt=ut.format,Oe=ut.type;if(wt!==ni&&X.convert(wt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let ft=Oe===Tn&&(me.has("EXT_color_buffer_half_float")||fe.isWebGL2&&me.has("EXT_color_buffer_float"));if(Oe!==oa&&X.convert(Oe)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Oe===cs&&(fe.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=ee.width-ge&&Te>=0&&Te<=ee.height-Le&&K.readPixels(ve,Te,ge,Le,X.convert(wt),X.convert(Oe),qe)}finally{let ut=M!==null?ye.get(M).__webglFramebuffer:null;de.bindFramebuffer(K.FRAMEBUFFER,ut)}}},this.copyFramebufferToTexture=function(ee,ve,Te=0){let ge=Math.pow(2,-Te),Le=Math.floor(ve.image.width*ge),qe=Math.floor(ve.image.height*ge);Se.setTexture2D(ve,0),K.copyTexSubImage2D(K.TEXTURE_2D,Te,0,0,ee.x,ee.y,Le,qe),de.unbindTexture()},this.copyTextureToTexture=function(ee,ve,Te,ge=0){let Le=ve.image.width,qe=ve.image.height,ot=X.convert(Te.format),lt=X.convert(Te.type);Se.setTexture2D(Te,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Te.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Te.unpackAlignment),ve.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,Le,qe,ot,lt,ve.image.data):ve.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,ve.mipmaps[0].width,ve.mipmaps[0].height,ot,ve.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,ge,ee.x,ee.y,ot,lt,ve.image),ge===0&&Te.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),de.unbindTexture()},this.copyTextureToTexture3D=function(ee,ve,Te,ge,Le=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let qe=ee.max.x-ee.min.x+1,ot=ee.max.y-ee.min.y+1,lt=ee.max.z-ee.min.z+1,ut=X.convert(ge.format),wt=X.convert(ge.type),Oe;if(ge.isData3DTexture)Se.setTexture3D(ge,0),Oe=K.TEXTURE_3D;else if(ge.isDataArrayTexture)Se.setTexture2DArray(ge,0),Oe=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ge.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ge.unpackAlignment);let ft=K.getParameter(K.UNPACK_ROW_LENGTH),fn=K.getParameter(K.UNPACK_IMAGE_HEIGHT),en=K.getParameter(K.UNPACK_SKIP_PIXELS),Pi=K.getParameter(K.UNPACK_SKIP_ROWS),is=K.getParameter(K.UNPACK_SKIP_IMAGES),dn=Te.isCompressedTexture?Te.mipmaps[0]:Te.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,dn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,dn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,ee.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,ee.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ee.min.z),Te.isDataTexture||Te.isData3DTexture?K.texSubImage3D(Oe,Le,ve.x,ve.y,ve.z,qe,ot,lt,ut,wt,dn.data):Te.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Oe,Le,ve.x,ve.y,ve.z,qe,ot,lt,ut,dn.data)):K.texSubImage3D(Oe,Le,ve.x,ve.y,ve.z,qe,ot,lt,ut,wt,dn),K.pixelStorei(K.UNPACK_ROW_LENGTH,ft),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,fn),K.pixelStorei(K.UNPACK_SKIP_PIXELS,en),K.pixelStorei(K.UNPACK_SKIP_ROWS,Pi),K.pixelStorei(K.UNPACK_SKIP_IMAGES,is),Le===0&&ge.generateMipmaps&&K.generateMipmap(Oe),de.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?Se.setTextureCube(ee,0):ee.isData3DTexture?Se.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?Se.setTexture2DArray(ee,0):Se.setTexture2D(ee,0),de.unbindTexture()},this.resetState=function(){E=0,S=0,M=null,de.reset(),q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return po}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===it?il:KE}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===il?it:kr}},q0=class extends Rh{};q0.prototype.isWebGL1Renderer=!0;var Lh=class n{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new De(e),this.density=t}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},$0=class n{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new De(e),this.near=t,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},ua=class extends mt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},hr=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=wd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Br()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let o=0,a=this.stride;o<a;o++)this.array[e+o]=t.array[i+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Zi=new U,zn=class n{constructor(e,t,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyMatrix4(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyNormalMatrix(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.transformDirection(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Lr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Lr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Lr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Lr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,t,i,o,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),i=xt(i,this.array),o=xt(o,this.array),a=xt(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let o=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return new $e(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let o=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[o+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Md=class extends _n{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},fh,sd=new U,dh=new U,ph=new U,mh=new he,od=new he,b3=new ke,y0=new U,ad=new U,v0=new U,Mk=new he,WC=new he,Tk=new he,ey=class extends mt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",fh===void 0){fh=new Ke;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new hr(t,5);fh.setIndex([0,1,2,0,2,3]),fh.setAttribute("position",new zn(i,3,0,!1)),fh.setAttribute("uv",new zn(i,2,3,!1))}this.geometry=fh,this.material=e!==void 0?e:new Md,this.center=new he(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dh.setFromMatrixScale(this.matrixWorld),b3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ph.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&dh.multiplyScalar(-ph.z);let i=this.material.rotation,o,a;i!==0&&(a=Math.cos(i),o=Math.sin(i));let l=this.center;w0(y0.set(-.5,-.5,0),ph,l,dh,o,a),w0(ad.set(.5,-.5,0),ph,l,dh,o,a),w0(v0.set(.5,.5,0),ph,l,dh,o,a),Mk.set(0,0),WC.set(1,0),Tk.set(1,1);let c=e.ray.intersectTriangle(y0,ad,v0,!1,sd);if(c===null&&(w0(ad.set(-.5,.5,0),ph,l,dh,o,a),WC.set(0,1),c=e.ray.intersectTriangle(y0,v0,ad,!1,sd),c===null))return;let u=e.ray.origin.distanceTo(sd);u<e.near||u>e.far||t.push({distance:u,point:sd.clone(),uv:Gt.getInterpolation(sd,y0,ad,v0,Mk,WC,Tk,new he),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function w0(n,e,t,i,o,a){mh.subVectors(n,t).addScalar(.5).multiply(i),o!==void 0?(od.x=a*mh.x-o*mh.y,od.y=o*mh.x+a*mh.y):od.copy(mh),n.copy(e),n.x+=od.x,n.y+=od.y,n.applyMatrix4(b3)}var b0=new U,_k=new U,ty=class extends mt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let i=0,o=t.length;i<o;i++){let a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);let o=this.levels,a;for(a=0;a<o.length&&!(t<o[a].distance);a++);return o.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let i,o;for(i=1,o=t.length;i<o;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){b0.setFromMatrixPosition(this.matrixWorld);let o=e.ray.origin.distanceTo(b0);this.getObjectForDistance(o).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){b0.setFromMatrixPosition(e.matrixWorld),_k.setFromMatrixPosition(this.matrixWorld);let i=b0.distanceTo(_k)/e.zoom;t[0].object.visible=!0;let o,a;for(o=1,a=t.length;o<a;o++){let l=t[o].distance;if(t[o].object.visible&&(l-=l*t[o].hysteresis),i>=l)t[o-1].object.visible=!1,t[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<a;o++)t[o].object.visible=!1}}toJSON(e){let t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];let i=this.levels;for(let o=0,a=i.length;o<a;o++){let l=i[o];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}},Dk=new U,Rk=new pt,Lk=new pt,X7=new U,Bk=new ke,gh=new U,XC=new Vt,kk=new ke,YC=new cr,cl=class extends He{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ke,this.bindMatrixInverse=new ke,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ht),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)gh.fromBufferAttribute(t,i),this.applyBoneTransform(i,gh),this.boundingBox.expandByPoint(gh)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vt),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)gh.fromBufferAttribute(t,i),this.applyBoneTransform(i,gh),this.boundingSphere.expandByPoint(gh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,o=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XC.copy(this.boundingSphere),XC.applyMatrix4(o),e.ray.intersectsSphere(XC)!==!1&&(kk.copy(o).invert(),YC.copy(e.ray).applyMatrix4(kk),!(this.boundingBox!==null&&YC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,YC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new pt,t=this.geometry.attributes.skinWeight;for(let i=0,o=t.count;i<o;i++){e.fromBufferAttribute(t,i);let a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,o=this.geometry;Rk.fromBufferAttribute(o.attributes.skinIndex,e),Lk.fromBufferAttribute(o.attributes.skinWeight,e),Dk.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){let l=Lk.getComponent(a);if(l!==0){let c=Rk.getComponent(a);Bk.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(X7.copy(Dk).applyMatrix4(Bk),l)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}},bo=class extends mt{constructor(){super(),this.isBone=!0,this.type="Bone"}},vo=class extends jt{constructor(e=null,t=1,i=1,o,a,l,c,u,h=Tt,A=Tt,f,d){super(null,l,c,u,h,A,o,a,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Pk=new ke,Y7=new ke,ul=class n{constructor(e=[],t=[]){this.uuid=Br(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new ke)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new ke;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,o=this.boneTexture;for(let a=0,l=e.length;a<l;a++){let c=e[a]?e[a].matrixWorld:Y7;Pk.multiplyMatrices(c,t[a]),Pk.toArray(i,a*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=h3(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new vo(t,e,e,ni,cs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,o=e.bones.length;i<o;i++){let a=e.bones[i],l=t[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new bo),this.bones.push(l),this.boneInverses.push(new ke().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let o=0,a=t.length;o<a;o++){let l=t[o];e.bones.push(l.uuid);let c=i[o];e.boneInverses.push(c.toArray())}return e}},Pr=class extends $e{constructor(e,t,i,o=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},yh=new ke,Nk=new ke,x0=[],Fk=new Ht,Z7=new ke,ld=new He,cd=new Vt,hl=class extends He{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pr(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<i;o++)this.setMatrixAt(o,Z7)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ht),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,yh),Fk.copy(e.boundingBox).applyMatrix4(yh),this.boundingBox.union(Fk)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vt),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,yh),cd.copy(e.boundingSphere).applyMatrix4(yh),this.boundingSphere.union(cd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let i=this.matrixWorld,o=this.count;if(ld.geometry=this.geometry,ld.material=this.material,ld.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cd.copy(this.boundingSphere),cd.applyMatrix4(i),e.ray.intersectsSphere(cd)!==!1))for(let a=0;a<o;a++){this.getMatrixAt(a,yh),Nk.multiplyMatrices(i,yh),ld.matrixWorld=Nk,ld.raycast(e,x0);for(let l=0,c=x0.length;l<c;l++){let u=x0[l];u.instanceId=a,u.object=this,t.push(u)}x0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pr(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},bn=class extends _n{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new De(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Uk=new U,Ok=new U,Qk=new ke,ZC=new cr,C0=new Vt,Ar=class extends mt{constructor(e=new Ke,t=new bn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let o=1,a=t.count;o<a;o++)Uk.fromBufferAttribute(t,o-1),Ok.fromBufferAttribute(t,o),i[o]=i[o-1],i[o]+=Uk.distanceTo(Ok);e.setAttribute("lineDistance",new Ve(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,o=this.matrixWorld,a=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),C0.copy(i.boundingSphere),C0.applyMatrix4(o),C0.radius+=a,e.ray.intersectsSphere(C0)===!1)return;Qk.copy(o).invert(),ZC.copy(e.ray).applyMatrix4(Qk);let c=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new U,A=new U,f=new U,d=new U,p=this.isLineSegments?2:1,m=i.index,g=i.attributes.position;if(m!==null){let w=Math.max(0,l.start),I=Math.min(m.count,l.start+l.count);for(let v=w,C=I-1;v<C;v+=p){let E=m.getX(v),S=m.getX(v+1);if(h.fromBufferAttribute(g,E),A.fromBufferAttribute(g,S),ZC.distanceSqToSegment(h,A,d,f)>u)continue;d.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(d);_<e.near||_>e.far||t.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let w=Math.max(0,l.start),I=Math.min(g.count,l.start+l.count);for(let v=w,C=I-1;v<C;v+=p){if(h.fromBufferAttribute(g,v),A.fromBufferAttribute(g,v+1),ZC.distanceSqToSegment(h,A,d,f)>u)continue;d.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}},Gk=new U,zk=new U,fi=class extends Ar{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let o=0,a=t.count;o<a;o+=2)Gk.fromBufferAttribute(t,o),zk.fromBufferAttribute(t,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+Gk.distanceTo(zk);e.setAttribute("lineDistance",new Ve(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Bh=class extends Ar{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},ha=class extends _n{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Hk=new ke,ZS=new cr,S0=new Vt,E0=new U,Al=class extends mt{constructor(e=new Ke,t=new ha){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,o=this.matrixWorld,a=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),S0.copy(i.boundingSphere),S0.applyMatrix4(o),S0.radius+=a,e.ray.intersectsSphere(S0)===!1)return;Hk.copy(o).invert(),ZS.copy(e.ray).applyMatrix4(Hk);let c=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=i.index,f=i.attributes.position;if(h!==null){let d=Math.max(0,l.start),p=Math.min(h.count,l.start+l.count);for(let m=d,b=p;m<b;m++){let g=h.getX(m);E0.fromBufferAttribute(f,g),Vk(E0,g,u,o,e,t,this)}}else{let d=Math.max(0,l.start),p=Math.min(f.count,l.start+l.count);for(let m=d,b=p;m<b;m++)E0.fromBufferAttribute(f,m),Vk(E0,m,u,o,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=o.length;a<l;a++){let c=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}};function Vk(n,e,t,i,o,a,l){let c=ZS.distanceSqToPoint(n);if(c<t){let u=new U;ZS.closestPointToPoint(n,u),u.applyMatrix4(i);let h=o.ray.origin.distanceTo(u);if(h<o.near||h>o.far)return;a.push({distance:h,distanceToRay:Math.sqrt(c),point:u,index:e,face:null,object:l})}}var Td=class extends jt{constructor(e,t,i,o,a,l,c,u,h){super(e,t,i,o,a,l,c,u,h),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Et,this.magFilter=a!==void 0?a:Et,this.generateMipmaps=!1;let A=this;function f(){A.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},KS=class extends jt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Tt,this.minFilter=Tt,this.generateMipmaps=!1,this.needsUpdate=!0}},_d=class extends jt{constructor(e,t,i,o,a,l,c,u,h,A,f,d){super(null,l,c,u,h,A,o,a,f,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},jS=class extends _d{constructor(e,t,i,o,a,l){super(e,t,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=Qn}},Dd=class extends jt{constructor(e,t,i,o,a,l,c,u,h){super(e,t,i,o,a,l,c,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}},qi=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,o=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),a+=i.distanceTo(o),t.push(a),o=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),o=0,a=i.length,l;t?l=t:l=e*i[a-1];let c=0,u=a-1,h;for(;c<=u;)if(o=Math.floor(c+(u-c)/2),h=i[o]-l,h<0)c=o+1;else if(h>0)u=o-1;else{u=o;break}if(o=u,i[o]===l)return o/(a-1);let A=i[o],d=i[o+1]-A,p=(l-A)/d;return(o+p)/(a-1)}getTangent(e,t){let o=e-1e-4,a=e+1e-4;o<0&&(o=0),a>1&&(a=1);let l=this.getPoint(o),c=this.getPoint(a),u=t||(l.isVector2?new he:new U);return u.copy(c).sub(l).normalize(),u}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new U,o=[],a=[],l=[],c=new U,u=new ke;for(let p=0;p<=e;p++){let m=p/e;o[p]=this.getTangentAt(m,new U)}a[0]=new U,l[0]=new U;let h=Number.MAX_VALUE,A=Math.abs(o[0].x),f=Math.abs(o[0].y),d=Math.abs(o[0].z);A<=h&&(h=A,i.set(1,0,0)),f<=h&&(h=f,i.set(0,1,0)),d<=h&&i.set(0,0,1),c.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],c),l[0].crossVectors(o[0],a[0]);for(let p=1;p<=e;p++){if(a[p]=a[p-1].clone(),l[p]=l[p-1].clone(),c.crossVectors(o[p-1],o[p]),c.length()>Number.EPSILON){c.normalize();let m=Math.acos(Mn(o[p-1].dot(o[p]),-1,1));a[p].applyMatrix4(u.makeRotationAxis(c,m))}l[p].crossVectors(o[p],a[p])}if(t===!0){let p=Math.acos(Mn(a[0].dot(a[e]),-1,1));p/=e,o[0].dot(c.crossVectors(a[0],a[e]))>0&&(p=-p);for(let m=1;m<=e;m++)a[m].applyMatrix4(u.makeRotationAxis(o[m],p*m)),l[m].crossVectors(o[m],a[m])}return{tangents:o,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},kh=class extends qi{constructor(e=0,t=0,i=1,o=1,a=0,l=Math.PI*2,c=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=o,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=c,this.aRotation=u}getPoint(e,t){let i=t||new he,o=Math.PI*2,a=this.aEndAngle-this.aStartAngle,l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(l?a=0:a=o),this.aClockwise===!0&&!l&&(a===o?a=-o:a=a-o);let c=this.aStartAngle+e*a,u=this.aX+this.xRadius*Math.cos(c),h=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){let A=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=u-this.aX,p=h-this.aY;u=d*A-p*f+this.aX,h=d*f+p*A+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ny=class extends kh{constructor(e,t,i,o,a,l){super(e,t,i,i,o,a,l),this.isArcCurve=!0,this.type="ArcCurve"}};function $E(){let n=0,e=0,t=0,i=0;function o(a,l,c,u){n=a,e=c,t=-3*a+3*l-2*c-u,i=2*a-2*l+c+u}return{initCatmullRom:function(a,l,c,u,h){o(l,c,h*(c-a),h*(u-l))},initNonuniformCatmullRom:function(a,l,c,u,h,A,f){let d=(l-a)/h-(c-a)/(h+A)+(c-l)/A,p=(c-l)/A-(u-l)/(A+f)+(u-c)/f;d*=A,p*=A,o(l,c,d,p)},calc:function(a){let l=a*a,c=l*a;return n+e*a+t*l+i*c}}}var I0=new U,KC=new $E,jC=new $E,JC=new $E,Qc=class extends qi{constructor(e=[],t=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=o}getPoint(e,t=new U){let i=t,o=this.points,a=o.length,l=(a-(this.closed?0:1))*e,c=Math.floor(l),u=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:u===0&&c===a-1&&(c=a-2,u=1);let h,A;this.closed||c>0?h=o[(c-1)%a]:(I0.subVectors(o[0],o[1]).add(o[0]),h=I0);let f=o[c%a],d=o[(c+1)%a];if(this.closed||c+2<a?A=o[(c+2)%a]:(I0.subVectors(o[a-1],o[a-2]).add(o[a-1]),A=I0),this.curveType==="centripetal"||this.curveType==="chordal"){let p=this.curveType==="chordal"?.5:.25,m=Math.pow(h.distanceToSquared(f),p),b=Math.pow(f.distanceToSquared(d),p),g=Math.pow(d.distanceToSquared(A),p);b<1e-4&&(b=1),m<1e-4&&(m=b),g<1e-4&&(g=b),KC.initNonuniformCatmullRom(h.x,f.x,d.x,A.x,m,b,g),jC.initNonuniformCatmullRom(h.y,f.y,d.y,A.y,m,b,g),JC.initNonuniformCatmullRom(h.z,f.z,d.z,A.z,m,b,g)}else this.curveType==="catmullrom"&&(KC.initCatmullRom(h.x,f.x,d.x,A.x,this.tension),jC.initCatmullRom(h.y,f.y,d.y,A.y,this.tension),JC.initCatmullRom(h.z,f.z,d.z,A.z,this.tension));return i.set(KC.calc(u),jC.calc(u),JC.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let o=e.points[t];this.points.push(new U().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function Wk(n,e,t,i,o){let a=(i-e)*.5,l=(o-t)*.5,c=n*n,u=n*c;return(2*t-2*i+a+l)*u+(-3*t+3*i-2*a-l)*c+a*n+t}function K7(n,e){let t=1-n;return t*t*e}function j7(n,e){return 2*(1-n)*n*e}function J7(n,e){return n*n*e}function md(n,e,t,i){return K7(n,e)+j7(n,t)+J7(n,i)}function q7(n,e){let t=1-n;return t*t*t*e}function $7(n,e){let t=1-n;return 3*t*t*n*e}function ej(n,e){return 3*(1-n)*n*n*e}function tj(n,e){return n*n*n*e}function gd(n,e,t,i,o){return q7(n,e)+$7(n,t)+ej(n,i)+tj(n,o)}var Rd=class extends qi{constructor(e=new he,t=new he,i=new he,o=new he){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=o}getPoint(e,t=new he){let i=t,o=this.v0,a=this.v1,l=this.v2,c=this.v3;return i.set(gd(e,o.x,a.x,l.x,c.x),gd(e,o.y,a.y,l.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},iy=class extends qi{constructor(e=new U,t=new U,i=new U,o=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=o}getPoint(e,t=new U){let i=t,o=this.v0,a=this.v1,l=this.v2,c=this.v3;return i.set(gd(e,o.x,a.x,l.x,c.x),gd(e,o.y,a.y,l.y,c.y),gd(e,o.z,a.z,l.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ph=class extends qi{constructor(e=new he,t=new he){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new he){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ry=class extends qi{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new U){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ld=class extends qi{constructor(e=new he,t=new he,i=new he){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new he){let i=t,o=this.v0,a=this.v1,l=this.v2;return i.set(md(e,o.x,a.x,l.x),md(e,o.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Bd=class extends qi{constructor(e=new U,t=new U,i=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new U){let i=t,o=this.v0,a=this.v1,l=this.v2;return i.set(md(e,o.x,a.x,l.x),md(e,o.y,a.y,l.y),md(e,o.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},kd=class extends qi{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new he){let i=t,o=this.points,a=(o.length-1)*e,l=Math.floor(a),c=a-l,u=o[l===0?l:l-1],h=o[l],A=o[l>o.length-2?o.length-1:l+1],f=o[l>o.length-3?o.length-1:l+2];return i.set(Wk(c,u.x,h.x,A.x,f.x),Wk(c,u.y,h.y,A.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let o=e.points[t];this.points.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let o=e.points[t];this.points.push(new he().fromArray(o))}return this}},eI=Object.freeze({__proto__:null,ArcCurve:ny,CatmullRomCurve3:Qc,CubicBezierCurve:Rd,CubicBezierCurve3:iy,EllipseCurve:kh,LineCurve:Ph,LineCurve3:ry,QuadraticBezierCurve:Ld,QuadraticBezierCurve3:Bd,SplineCurve:kd}),sy=class extends qi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ph(t,e))}getPoint(e,t){let i=e*this.getLength(),o=this.getCurveLengths(),a=0;for(;a<o.length;){if(o[a]>=i){let l=o[a]-i,c=this.curves[a],u=c.getLength(),h=u===0?0:1-l/u;return c.getPointAt(h,t)}a++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,o=this.curves.length;i<o;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let o=0,a=this.curves;o<a.length;o++){let l=a[o],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,u=l.getPoints(c);for(let h=0;h<u.length;h++){let A=u[h];i&&i.equals(A)||(t.push(A),i=A)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let o=e.curves[t];this.curves.push(new eI[o.type]().fromJSON(o))}return this}},Gc=class extends sy{constructor(e){super(),this.type="Path",this.currentPoint=new he,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Ph(this.currentPoint.clone(),new he(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,o){let a=new Ld(this.currentPoint.clone(),new he(e,t),new he(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}bezierCurveTo(e,t,i,o,a,l){let c=new Rd(this.currentPoint.clone(),new he(e,t),new he(i,o),new he(a,l));return this.curves.push(c),this.currentPoint.set(a,l),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new kd(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,o,a,l){let c=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+c,t+u,i,o,a,l),this}absarc(e,t,i,o,a,l){return this.absellipse(e,t,i,i,o,a,l),this}ellipse(e,t,i,o,a,l,c,u){let h=this.currentPoint.x,A=this.currentPoint.y;return this.absellipse(e+h,t+A,i,o,a,l,c,u),this}absellipse(e,t,i,o,a,l,c,u){let h=new kh(e,t,i,o,a,l,c,u);if(this.curves.length>0){let f=h.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(h);let A=h.getPoint(1);return this.currentPoint.copy(A),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Pd=class n extends Ke{constructor(e=[new he(0,-.5),new he(.5,0),new he(0,.5)],t=12,i=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:o},t=Math.floor(t),o=Mn(o,0,Math.PI*2);let a=[],l=[],c=[],u=[],h=[],A=1/t,f=new U,d=new he,p=new U,m=new U,b=new U,g=0,w=0;for(let I=0;I<=e.length-1;I++)switch(I){case 0:g=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,p.x=w*1,p.y=-g,p.z=w*0,b.copy(p),p.normalize(),u.push(p.x,p.y,p.z);break;case e.length-1:u.push(b.x,b.y,b.z);break;default:g=e[I+1].x-e[I].x,w=e[I+1].y-e[I].y,p.x=w*1,p.y=-g,p.z=w*0,m.copy(p),p.x+=b.x,p.y+=b.y,p.z+=b.z,p.normalize(),u.push(p.x,p.y,p.z),b.copy(m)}for(let I=0;I<=t;I++){let v=i+I*A*o,C=Math.sin(v),E=Math.cos(v);for(let S=0;S<=e.length-1;S++){f.x=e[S].x*C,f.y=e[S].y,f.z=e[S].x*E,l.push(f.x,f.y,f.z),d.x=I/t,d.y=S/(e.length-1),c.push(d.x,d.y);let M=u[3*S+0]*C,_=u[3*S+1],T=u[3*S+0]*E;h.push(M,_,T)}}for(let I=0;I<t;I++)for(let v=0;v<e.length-1;v++){let C=v+I*e.length,E=C,S=C+e.length,M=C+e.length+1,_=C+1;a.push(E,S,_),a.push(M,_,S)}this.setIndex(a),this.setAttribute("position",new Ve(l,3)),this.setAttribute("uv",new Ve(c,2)),this.setAttribute("normal",new Ve(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}},Nh=class n extends Pd{constructor(e=1,t=1,i=4,o=8){let a=new Gc;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(i),o),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:o}}static fromJSON(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}},oy=class n extends Ke{constructor(e=1,t=32,i=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:o},t=Math.max(3,t);let a=[],l=[],c=[],u=[],h=new U,A=new he;l.push(0,0,0),c.push(0,0,1),u.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){let p=i+f/t*o;h.x=e*Math.cos(p),h.y=e*Math.sin(p),l.push(h.x,h.y,h.z),c.push(0,0,1),A.x=(l[d]/e+1)/2,A.y=(l[d+1]/e+1)/2,u.push(A.x,A.y)}for(let f=1;f<=t;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new Ve(l,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}},Nr=class n extends Ke{constructor(e=1,t=1,i=1,o=32,a=1,l=!1,c=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:o,heightSegments:a,openEnded:l,thetaStart:c,thetaLength:u};let h=this;o=Math.floor(o),a=Math.floor(a);let A=[],f=[],d=[],p=[],m=0,b=[],g=i/2,w=0;I(),l===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(A),this.setAttribute("position",new Ve(f,3)),this.setAttribute("normal",new Ve(d,3)),this.setAttribute("uv",new Ve(p,2));function I(){let C=new U,E=new U,S=0,M=(t-e)/i;for(let _=0;_<=a;_++){let T=[],D=_/a,R=D*(t-e)+e;for(let B=0;B<=o;B++){let P=B/o,F=P*u+c,z=Math.sin(F),Q=Math.cos(F);E.x=R*z,E.y=-D*i+g,E.z=R*Q,f.push(E.x,E.y,E.z),C.set(z,M,Q).normalize(),d.push(C.x,C.y,C.z),p.push(P,1-D),T.push(m++)}b.push(T)}for(let _=0;_<o;_++)for(let T=0;T<a;T++){let D=b[T][_],R=b[T+1][_],B=b[T+1][_+1],P=b[T][_+1];A.push(D,R,P),A.push(R,B,P),S+=6}h.addGroup(w,S,0),w+=S}function v(C){let E=m,S=new he,M=new U,_=0,T=C===!0?e:t,D=C===!0?1:-1;for(let B=1;B<=o;B++)f.push(0,g*D,0),d.push(0,D,0),p.push(.5,.5),m++;let R=m;for(let B=0;B<=o;B++){let F=B/o*u+c,z=Math.cos(F),Q=Math.sin(F);M.x=T*Q,M.y=g*D,M.z=T*z,f.push(M.x,M.y,M.z),d.push(0,D,0),S.x=z*.5+.5,S.y=Q*.5*D+.5,p.push(S.x,S.y),m++}for(let B=0;B<o;B++){let P=E+B,F=R+B;C===!0?A.push(F,F+1,P):A.push(F+1,F,P),_+=3}h.addGroup(w,_,C===!0?1:2),w+=_}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},ay=class n extends Nr{constructor(e=1,t=1,i=32,o=1,a=!1,l=0,c=Math.PI*2){super(0,e,t,i,o,a,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},fl=class n extends Ke{constructor(e=[],t=[],i=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:o};let a=[],l=[];c(o),h(i),A(),this.setAttribute("position",new Ve(a,3)),this.setAttribute("normal",new Ve(a.slice(),3)),this.setAttribute("uv",new Ve(l,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function c(I){let v=new U,C=new U,E=new U;for(let S=0;S<t.length;S+=3)p(t[S+0],v),p(t[S+1],C),p(t[S+2],E),u(v,C,E,I)}function u(I,v,C,E){let S=E+1,M=[];for(let _=0;_<=S;_++){M[_]=[];let T=I.clone().lerp(C,_/S),D=v.clone().lerp(C,_/S),R=S-_;for(let B=0;B<=R;B++)B===0&&_===S?M[_][B]=T:M[_][B]=T.clone().lerp(D,B/R)}for(let _=0;_<S;_++)for(let T=0;T<2*(S-_)-1;T++){let D=Math.floor(T/2);T%2===0?(d(M[_][D+1]),d(M[_+1][D]),d(M[_][D])):(d(M[_][D+1]),d(M[_+1][D+1]),d(M[_+1][D]))}}function h(I){let v=new U;for(let C=0;C<a.length;C+=3)v.x=a[C+0],v.y=a[C+1],v.z=a[C+2],v.normalize().multiplyScalar(I),a[C+0]=v.x,a[C+1]=v.y,a[C+2]=v.z}function A(){let I=new U;for(let v=0;v<a.length;v+=3){I.x=a[v+0],I.y=a[v+1],I.z=a[v+2];let C=g(I)/2/Math.PI+.5,E=w(I)/Math.PI+.5;l.push(C,1-E)}m(),f()}function f(){for(let I=0;I<l.length;I+=6){let v=l[I+0],C=l[I+2],E=l[I+4],S=Math.max(v,C,E),M=Math.min(v,C,E);S>.9&&M<.1&&(v<.2&&(l[I+0]+=1),C<.2&&(l[I+2]+=1),E<.2&&(l[I+4]+=1))}}function d(I){a.push(I.x,I.y,I.z)}function p(I,v){let C=I*3;v.x=e[C+0],v.y=e[C+1],v.z=e[C+2]}function m(){let I=new U,v=new U,C=new U,E=new U,S=new he,M=new he,_=new he;for(let T=0,D=0;T<a.length;T+=9,D+=6){I.set(a[T+0],a[T+1],a[T+2]),v.set(a[T+3],a[T+4],a[T+5]),C.set(a[T+6],a[T+7],a[T+8]),S.set(l[D+0],l[D+1]),M.set(l[D+2],l[D+3]),_.set(l[D+4],l[D+5]),E.copy(I).add(v).add(C).divideScalar(3);let R=g(E);b(S,D+0,I,R),b(M,D+2,v,R),b(_,D+4,C,R)}}function b(I,v,C,E){E<0&&I.x===1&&(l[v]=I.x-1),C.x===0&&C.z===0&&(l[v]=E/2/Math.PI+.5)}function g(I){return Math.atan2(I.z,-I.x)}function w(I){return Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.vertices,e.indices,e.radius,e.details)}},ly=class n extends fl{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,o=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},M0=new U,T0=new U,qC=new U,_0=new Gt,cy=class extends Ke{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let o=Math.pow(10,4),a=Math.cos(Rc*t),l=e.getIndex(),c=e.getAttribute("position"),u=l?l.count:c.count,h=[0,0,0],A=["a","b","c"],f=new Array(3),d={},p=[];for(let m=0;m<u;m+=3){l?(h[0]=l.getX(m),h[1]=l.getX(m+1),h[2]=l.getX(m+2)):(h[0]=m,h[1]=m+1,h[2]=m+2);let{a:b,b:g,c:w}=_0;if(b.fromBufferAttribute(c,h[0]),g.fromBufferAttribute(c,h[1]),w.fromBufferAttribute(c,h[2]),_0.getNormal(qC),f[0]=`${Math.round(b.x*o)},${Math.round(b.y*o)},${Math.round(b.z*o)}`,f[1]=`${Math.round(g.x*o)},${Math.round(g.y*o)},${Math.round(g.z*o)}`,f[2]=`${Math.round(w.x*o)},${Math.round(w.y*o)},${Math.round(w.z*o)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let I=0;I<3;I++){let v=(I+1)%3,C=f[I],E=f[v],S=_0[A[I]],M=_0[A[v]],_=`${C}_${E}`,T=`${E}_${C}`;T in d&&d[T]?(qC.dot(d[T].normal)<=a&&(p.push(S.x,S.y,S.z),p.push(M.x,M.y,M.z)),d[T]=null):_ in d||(d[_]={index0:h[I],index1:h[v],normal:qC.clone()})}}for(let m in d)if(d[m]){let{index0:b,index1:g}=d[m];M0.fromBufferAttribute(c,b),T0.fromBufferAttribute(c,g),p.push(M0.x,M0.y,M0.z),p.push(T0.x,T0.y,T0.z)}this.setAttribute("position",new Ve(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},aa=class extends Gc{constructor(e){super(e),this.uuid=Br(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,o=this.holes.length;i<o;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let o=e.holes[t];this.holes.push(new Gc().fromJSON(o))}return this}},nj={triangulate:function(n,e,t=2){let i=e&&e.length,o=i?e[0]*t:n.length,a=x3(n,0,o,t,!0),l=[];if(!a||a.next===a.prev)return l;let c,u,h,A,f,d,p;if(i&&(a=aj(n,e,a,t)),n.length>80*t){c=h=n[0],u=A=n[1];for(let m=t;m<o;m+=t)f=n[m],d=n[m+1],f<c&&(c=f),d<u&&(u=d),f>h&&(h=f),d>A&&(A=d);p=Math.max(h-c,A-u),p=p!==0?32767/p:0}return Nd(a,l,t,c,u,p,0),l}};function x3(n,e,t,i,o){let a,l;if(o===yj(n,e,t,i)>0)for(a=e;a<t;a+=i)l=Xk(a,n[a],n[a+1],l);else for(a=t-i;a>=e;a-=i)l=Xk(a,n[a],n[a+1],l);return l&&Fy(l,l.next)&&(Ud(l),l=l.next),l}function zc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Fy(t,t.next)||vn(t.prev,t,t.next)===0)){if(Ud(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Nd(n,e,t,i,o,a,l){if(!n)return;!l&&a&&Aj(n,i,o,a);let c=n,u,h;for(;n.prev!==n.next;){if(u=n.prev,h=n.next,a?rj(n,i,o,a):ij(n)){e.push(u.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),Ud(n),n=h.next,c=h.next;continue}if(n=h,n===c){l?l===1?(n=sj(zc(n),e,t),Nd(n,e,t,i,o,a,2)):l===2&&oj(n,e,t,i,o,a):Nd(zc(n),e,t,i,o,a,1);break}}}function ij(n){let e=n.prev,t=n,i=n.next;if(vn(e,t,i)>=0)return!1;let o=e.x,a=t.x,l=i.x,c=e.y,u=t.y,h=i.y,A=o<a?o<l?o:l:a<l?a:l,f=c<u?c<h?c:h:u<h?u:h,d=o>a?o>l?o:l:a>l?a:l,p=c>u?c>h?c:h:u>h?u:h,m=i.next;for(;m!==e;){if(m.x>=A&&m.x<=d&&m.y>=f&&m.y<=p&&bh(o,c,a,u,l,h,m.x,m.y)&&vn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function rj(n,e,t,i){let o=n.prev,a=n,l=n.next;if(vn(o,a,l)>=0)return!1;let c=o.x,u=a.x,h=l.x,A=o.y,f=a.y,d=l.y,p=c<u?c<h?c:h:u<h?u:h,m=A<f?A<d?A:d:f<d?f:d,b=c>u?c>h?c:h:u>h?u:h,g=A>f?A>d?A:d:f>d?f:d,w=JS(p,m,e,t,i),I=JS(b,g,e,t,i),v=n.prevZ,C=n.nextZ;for(;v&&v.z>=w&&C&&C.z<=I;){if(v.x>=p&&v.x<=b&&v.y>=m&&v.y<=g&&v!==o&&v!==l&&bh(c,A,u,f,h,d,v.x,v.y)&&vn(v.prev,v,v.next)>=0||(v=v.prevZ,C.x>=p&&C.x<=b&&C.y>=m&&C.y<=g&&C!==o&&C!==l&&bh(c,A,u,f,h,d,C.x,C.y)&&vn(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;v&&v.z>=w;){if(v.x>=p&&v.x<=b&&v.y>=m&&v.y<=g&&v!==o&&v!==l&&bh(c,A,u,f,h,d,v.x,v.y)&&vn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;C&&C.z<=I;){if(C.x>=p&&C.x<=b&&C.y>=m&&C.y<=g&&C!==o&&C!==l&&bh(c,A,u,f,h,d,C.x,C.y)&&vn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function sj(n,e,t){let i=n;do{let o=i.prev,a=i.next.next;!Fy(o,a)&&C3(o,i,i.next,a)&&Fd(o,a)&&Fd(a,o)&&(e.push(o.i/t|0),e.push(i.i/t|0),e.push(a.i/t|0),Ud(i),Ud(i.next),i=n=a),i=i.next}while(i!==n);return zc(i)}function oj(n,e,t,i,o,a){let l=n;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&pj(l,c)){let u=S3(l,c);l=zc(l,l.next),u=zc(u,u.next),Nd(l,e,t,i,o,a,0),Nd(u,e,t,i,o,a,0);return}c=c.next}l=l.next}while(l!==n)}function aj(n,e,t,i){let o=[],a,l,c,u,h;for(a=0,l=e.length;a<l;a++)c=e[a]*i,u=a<l-1?e[a+1]*i:n.length,h=x3(n,c,u,i,!1),h===h.next&&(h.steiner=!0),o.push(dj(h));for(o.sort(lj),a=0;a<o.length;a++)t=cj(o[a],t);return t}function lj(n,e){return n.x-e.x}function cj(n,e){let t=uj(n,e);if(!t)return e;let i=S3(t,n);return zc(i,i.next),zc(t,t.next)}function uj(n,e){let t=e,i=-1/0,o,a=n.x,l=n.y;do{if(l<=t.y&&l>=t.next.y&&t.next.y!==t.y){let d=t.x+(l-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=a&&d>i&&(i=d,o=t.x<t.next.x?t:t.next,d===a))return o}t=t.next}while(t!==e);if(!o)return null;let c=o,u=o.x,h=o.y,A=1/0,f;t=o;do a>=t.x&&t.x>=u&&a!==t.x&&bh(l<h?a:i,l,u,h,l<h?i:a,l,t.x,t.y)&&(f=Math.abs(l-t.y)/(a-t.x),Fd(t,n)&&(f<A||f===A&&(t.x>o.x||t.x===o.x&&hj(o,t)))&&(o=t,A=f)),t=t.next;while(t!==c);return o}function hj(n,e){return vn(n.prev,n,e.prev)<0&&vn(e.next,n,n.next)<0}function Aj(n,e,t,i){let o=n;do o.z===0&&(o.z=JS(o.x,o.y,e,t,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n);o.prevZ.nextZ=null,o.prevZ=null,fj(o)}function fj(n){let e,t,i,o,a,l,c,u,h=1;do{for(t=n,n=null,a=null,l=0;t;){for(l++,i=t,c=0,e=0;e<h&&(c++,i=i.nextZ,!!i);e++);for(u=h;c>0||u>0&&i;)c!==0&&(u===0||!i||t.z<=i.z)?(o=t,t=t.nextZ,c--):(o=i,i=i.nextZ,u--),a?a.nextZ=o:n=o,o.prevZ=a,a=o;t=i}a.nextZ=null,h*=2}while(l>1);return n}function JS(n,e,t,i,o){return n=(n-t)*o|0,e=(e-i)*o|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function dj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function bh(n,e,t,i,o,a,l,c){return(o-l)*(e-c)>=(n-l)*(a-c)&&(n-l)*(i-c)>=(t-l)*(e-c)&&(t-l)*(a-c)>=(o-l)*(i-c)}function pj(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!mj(n,e)&&(Fd(n,e)&&Fd(e,n)&&gj(n,e)&&(vn(n.prev,n,e.prev)||vn(n,e.prev,e))||Fy(n,e)&&vn(n.prev,n,n.next)>0&&vn(e.prev,e,e.next)>0)}function vn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Fy(n,e){return n.x===e.x&&n.y===e.y}function C3(n,e,t,i){let o=R0(vn(n,e,t)),a=R0(vn(n,e,i)),l=R0(vn(t,i,n)),c=R0(vn(t,i,e));return!!(o!==a&&l!==c||o===0&&D0(n,t,e)||a===0&&D0(n,i,e)||l===0&&D0(t,n,i)||c===0&&D0(t,e,i))}function D0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function R0(n){return n>0?1:n<0?-1:0}function mj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&C3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Fd(n,e){return vn(n.prev,n,n.next)<0?vn(n,e,n.next)>=0&&vn(n,n.prev,e)>=0:vn(n,e,n.prev)<0||vn(n,n.next,e)<0}function gj(n,e){let t=n,i=!1,o=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function S3(n,e){let t=new qS(n.i,n.x,n.y),i=new qS(e.i,e.x,e.y),o=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=o,o.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function Xk(n,e,t,i){let o=new qS(n,e,t);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function Ud(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function qS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yj(n,e,t,i){let o=0;for(let a=e,l=t-i;a<t;a+=i)o+=(n[l]-n[a])*(n[a+1]+n[l+1]),l=a;return o}var wo=class n{static area(e){let t=e.length,i=0;for(let o=t-1,a=0;a<t;o=a++)i+=e[o].x*e[a].y-e[a].x*e[o].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],o=[],a=[];Yk(e),Zk(i,e);let l=e.length;t.forEach(Yk);for(let u=0;u<t.length;u++)o.push(l),l+=t[u].length,Zk(i,t[u]);let c=nj.triangulate(i,o);for(let u=0;u<c.length;u+=3)a.push(c.slice(u,u+3));return a}};function Yk(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Zk(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var uy=class n extends Ke{constructor(e=new aa([new he(.5,.5),new he(-.5,.5),new he(-.5,-.5),new he(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,o=[],a=[];for(let c=0,u=e.length;c<u;c++){let h=e[c];l(h)}this.setAttribute("position",new Ve(o,3)),this.setAttribute("uv",new Ve(a,2)),this.computeVertexNormals();function l(c){let u=[],h=t.curveSegments!==void 0?t.curveSegments:12,A=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:p-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,w=t.extrudePath,I=t.UVGenerator!==void 0?t.UVGenerator:vj,v,C=!1,E,S,M,_;w&&(v=w.getSpacedPoints(A),C=!0,d=!1,E=w.computeFrenetFrames(A,!1),S=new U,M=new U,_=new U),d||(g=0,p=0,m=0,b=0);let T=c.extractPoints(h),D=T.shape,R=T.holes;if(!wo.isClockWise(D)){D=D.reverse();for(let K=0,be=R.length;K<be;K++){let me=R[K];wo.isClockWise(me)&&(R[K]=me.reverse())}}let P=wo.triangulateShape(D,R),F=D;for(let K=0,be=R.length;K<be;K++){let me=R[K];D=D.concat(me)}function z(K,be,me){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(be,me)}let Q=D.length,V=P.length;function G(K,be,me){let fe,de,Fe,ye=K.x-be.x,Se=K.y-be.y,Pe=me.x-K.x,Ee=me.y-K.y,We=ye*ye+Se*Se,J=ye*Ee-Se*Pe;if(Math.abs(J)>Number.EPSILON){let H=Math.sqrt(We),ue=Math.sqrt(Pe*Pe+Ee*Ee),Re=be.x-Se/H,Be=be.y+ye/H,Ie=me.x-Ee/ue,Ue=me.y+Pe/ue,Ne=((Ie-Re)*Ee-(Ue-Be)*Pe)/(ye*Ee-Se*Pe);fe=Re+ye*Ne-K.x,de=Be+Se*Ne-K.y;let Ce=fe*fe+de*de;if(Ce<=2)return new he(fe,de);Fe=Math.sqrt(Ce/2)}else{let H=!1;ye>Number.EPSILON?Pe>Number.EPSILON&&(H=!0):ye<-Number.EPSILON?Pe<-Number.EPSILON&&(H=!0):Math.sign(Se)===Math.sign(Ee)&&(H=!0),H?(fe=-Se,de=ye,Fe=Math.sqrt(We)):(fe=ye,de=Se,Fe=Math.sqrt(We/2))}return new he(fe/Fe,de/Fe)}let O=[];for(let K=0,be=F.length,me=be-1,fe=K+1;K<be;K++,me++,fe++)me===be&&(me=0),fe===be&&(fe=0),O[K]=G(F[K],F[me],F[fe]);let W=[],k,Y=O.concat();for(let K=0,be=R.length;K<be;K++){let me=R[K];k=[];for(let fe=0,de=me.length,Fe=de-1,ye=fe+1;fe<de;fe++,Fe++,ye++)Fe===de&&(Fe=0),ye===de&&(ye=0),k[fe]=G(me[fe],me[Fe],me[ye]);W.push(k),Y=Y.concat(k)}for(let K=0;K<g;K++){let be=K/g,me=p*Math.cos(be*Math.PI/2),fe=m*Math.sin(be*Math.PI/2)+b;for(let de=0,Fe=F.length;de<Fe;de++){let ye=z(F[de],O[de],fe);oe(ye.x,ye.y,-me)}for(let de=0,Fe=R.length;de<Fe;de++){let ye=R[de];k=W[de];for(let Se=0,Pe=ye.length;Se<Pe;Se++){let Ee=z(ye[Se],k[Se],fe);oe(Ee.x,Ee.y,-me)}}}let te=m+b;for(let K=0;K<Q;K++){let be=d?z(D[K],Y[K],te):D[K];C?(M.copy(E.normals[0]).multiplyScalar(be.x),S.copy(E.binormals[0]).multiplyScalar(be.y),_.copy(v[0]).add(M).add(S),oe(_.x,_.y,_.z)):oe(be.x,be.y,0)}for(let K=1;K<=A;K++)for(let be=0;be<Q;be++){let me=d?z(D[be],Y[be],te):D[be];C?(M.copy(E.normals[K]).multiplyScalar(me.x),S.copy(E.binormals[K]).multiplyScalar(me.y),_.copy(v[K]).add(M).add(S),oe(_.x,_.y,_.z)):oe(me.x,me.y,f/A*K)}for(let K=g-1;K>=0;K--){let be=K/g,me=p*Math.cos(be*Math.PI/2),fe=m*Math.sin(be*Math.PI/2)+b;for(let de=0,Fe=F.length;de<Fe;de++){let ye=z(F[de],O[de],fe);oe(ye.x,ye.y,f+me)}for(let de=0,Fe=R.length;de<Fe;de++){let ye=R[de];k=W[de];for(let Se=0,Pe=ye.length;Se<Pe;Se++){let Ee=z(ye[Se],k[Se],fe);C?oe(Ee.x,Ee.y+v[A-1].y,v[A-1].x+me):oe(Ee.x,Ee.y,f+me)}}}ie(),re();function ie(){let K=o.length/3;if(d){let be=0,me=Q*be;for(let fe=0;fe<V;fe++){let de=P[fe];le(de[2]+me,de[1]+me,de[0]+me)}be=A+g*2,me=Q*be;for(let fe=0;fe<V;fe++){let de=P[fe];le(de[0]+me,de[1]+me,de[2]+me)}}else{for(let be=0;be<V;be++){let me=P[be];le(me[2],me[1],me[0])}for(let be=0;be<V;be++){let me=P[be];le(me[0]+Q*A,me[1]+Q*A,me[2]+Q*A)}}i.addGroup(K,o.length/3-K,0)}function re(){let K=o.length/3,be=0;se(F,be),be+=F.length;for(let me=0,fe=R.length;me<fe;me++){let de=R[me];se(de,be),be+=de.length}i.addGroup(K,o.length/3-K,1)}function se(K,be){let me=K.length;for(;--me>=0;){let fe=me,de=me-1;de<0&&(de=K.length-1);for(let Fe=0,ye=A+g*2;Fe<ye;Fe++){let Se=Q*Fe,Pe=Q*(Fe+1),Ee=be+fe+Se,We=be+de+Se,J=be+de+Pe,H=be+fe+Pe;xe(Ee,We,J,H)}}}function oe(K,be,me){u.push(K),u.push(be),u.push(me)}function le(K,be,me){_e(K),_e(be),_e(me);let fe=o.length/3,de=I.generateTopUV(i,o,fe-3,fe-2,fe-1);pe(de[0]),pe(de[1]),pe(de[2])}function xe(K,be,me,fe){_e(K),_e(be),_e(fe),_e(be),_e(me),_e(fe);let de=o.length/3,Fe=I.generateSideWallUV(i,o,de-6,de-3,de-2,de-1);pe(Fe[0]),pe(Fe[1]),pe(Fe[3]),pe(Fe[1]),pe(Fe[2]),pe(Fe[3])}function _e(K){o.push(u[K*3+0]),o.push(u[K*3+1]),o.push(u[K*3+2])}function pe(K){a.push(K.x),a.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return wj(t,i,e)}static fromJSON(e,t){let i=[];for(let a=0,l=e.shapes.length;a<l;a++){let c=t[e.shapes[a]];i.push(c)}let o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new eI[o.type]().fromJSON(o)),new n(i,e.options)}},vj={generateTopUV:function(n,e,t,i,o){let a=e[t*3],l=e[t*3+1],c=e[i*3],u=e[i*3+1],h=e[o*3],A=e[o*3+1];return[new he(a,l),new he(c,u),new he(h,A)]},generateSideWallUV:function(n,e,t,i,o,a){let l=e[t*3],c=e[t*3+1],u=e[t*3+2],h=e[i*3],A=e[i*3+1],f=e[i*3+2],d=e[o*3],p=e[o*3+1],m=e[o*3+2],b=e[a*3],g=e[a*3+1],w=e[a*3+2];return Math.abs(c-A)<Math.abs(l-h)?[new he(l,1-u),new he(h,1-f),new he(d,1-m),new he(b,1-w)]:[new he(c,1-u),new he(A,1-f),new he(p,1-m),new he(g,1-w)]}};function wj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,o=n.length;i<o;i++){let a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var Fh=class n extends fl{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},Od=class n extends fl{constructor(e=1,t=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,o,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},hy=class n extends Ke{constructor(e=.5,t=1,i=32,o=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:o,thetaStart:a,thetaLength:l},i=Math.max(3,i),o=Math.max(1,o);let c=[],u=[],h=[],A=[],f=e,d=(t-e)/o,p=new U,m=new he;for(let b=0;b<=o;b++){for(let g=0;g<=i;g++){let w=a+g/i*l;p.x=f*Math.cos(w),p.y=f*Math.sin(w),u.push(p.x,p.y,p.z),h.push(0,0,1),m.x=(p.x/t+1)/2,m.y=(p.y/t+1)/2,A.push(m.x,m.y)}f+=d}for(let b=0;b<o;b++){let g=b*(i+1);for(let w=0;w<i;w++){let I=w+g,v=I,C=I+i+1,E=I+i+2,S=I+1;c.push(v,C,S),c.push(C,E,S)}}this.setIndex(c),this.setAttribute("position",new Ve(u,3)),this.setAttribute("normal",new Ve(h,3)),this.setAttribute("uv",new Ve(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},Ay=class n extends Ke{constructor(e=new aa([new he(0,.5),new he(-.5,-.5),new he(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],o=[],a=[],l=[],c=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let A=0;A<e.length;A++)h(e[A]),this.addGroup(c,u,A),c+=u,u=0;this.setIndex(i),this.setAttribute("position",new Ve(o,3)),this.setAttribute("normal",new Ve(a,3)),this.setAttribute("uv",new Ve(l,2));function h(A){let f=o.length/3,d=A.extractPoints(t),p=d.shape,m=d.holes;wo.isClockWise(p)===!1&&(p=p.reverse());for(let g=0,w=m.length;g<w;g++){let I=m[g];wo.isClockWise(I)===!0&&(m[g]=I.reverse())}let b=wo.triangulateShape(p,m);for(let g=0,w=m.length;g<w;g++){let I=m[g];p=p.concat(I)}for(let g=0,w=p.length;g<w;g++){let I=p[g];o.push(I.x,I.y,0),a.push(0,0,1),l.push(I.x,I.y)}for(let g=0,w=b.length;g<w;g++){let I=b[g],v=I[0]+f,C=I[1]+f,E=I[2]+f;i.push(v,C,E),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return bj(t,e)}static fromJSON(e,t){let i=[];for(let o=0,a=e.shapes.length;o<a;o++){let l=t[e.shapes[o]];i.push(l)}return new n(i,e.curveSegments)}};function bj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let o=n[t];e.shapes.push(o.uuid)}else e.shapes.push(n.uuid);return e}var Hc=class n extends Ke{constructor(e=1,t=32,i=16,o=0,a=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let u=Math.min(l+c,Math.PI),h=0,A=[],f=new U,d=new U,p=[],m=[],b=[],g=[];for(let w=0;w<=i;w++){let I=[],v=w/i,C=0;w===0&&l===0?C=.5/t:w===i&&u===Math.PI&&(C=-.5/t);for(let E=0;E<=t;E++){let S=E/t;f.x=-e*Math.cos(o+S*a)*Math.sin(l+v*c),f.y=e*Math.cos(l+v*c),f.z=e*Math.sin(o+S*a)*Math.sin(l+v*c),m.push(f.x,f.y,f.z),d.copy(f).normalize(),b.push(d.x,d.y,d.z),g.push(S+C,1-v),I.push(h++)}A.push(I)}for(let w=0;w<i;w++)for(let I=0;I<t;I++){let v=A[w][I+1],C=A[w][I],E=A[w+1][I],S=A[w+1][I+1];(w!==0||l>0)&&p.push(v,C,S),(w!==i-1||u<Math.PI)&&p.push(C,E,S)}this.setIndex(p),this.setAttribute("position",new Ve(m,3)),this.setAttribute("normal",new Ve(b,3)),this.setAttribute("uv",new Ve(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},fy=class n extends fl{constructor(e=1,t=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,o,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},dy=class n extends Ke{constructor(e=1,t=.4,i=12,o=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:o,arc:a},i=Math.floor(i),o=Math.floor(o);let l=[],c=[],u=[],h=[],A=new U,f=new U,d=new U;for(let p=0;p<=i;p++)for(let m=0;m<=o;m++){let b=m/o*a,g=p/i*Math.PI*2;f.x=(e+t*Math.cos(g))*Math.cos(b),f.y=(e+t*Math.cos(g))*Math.sin(b),f.z=t*Math.sin(g),c.push(f.x,f.y,f.z),A.x=e*Math.cos(b),A.y=e*Math.sin(b),d.subVectors(f,A).normalize(),u.push(d.x,d.y,d.z),h.push(m/o),h.push(p/i)}for(let p=1;p<=i;p++)for(let m=1;m<=o;m++){let b=(o+1)*p+m-1,g=(o+1)*(p-1)+m-1,w=(o+1)*(p-1)+m,I=(o+1)*p+m;l.push(b,g,I),l.push(g,w,I)}this.setIndex(l),this.setAttribute("position",new Ve(c,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},Uh=class n extends Ke{constructor(e=1,t=.4,i=64,o=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:o,p:a,q:l},i=Math.floor(i),o=Math.floor(o);let c=[],u=[],h=[],A=[],f=new U,d=new U,p=new U,m=new U,b=new U,g=new U,w=new U;for(let v=0;v<=i;++v){let C=v/i*a*Math.PI*2;I(C,a,l,e,p),I(C+.01,a,l,e,m),g.subVectors(m,p),w.addVectors(m,p),b.crossVectors(g,w),w.crossVectors(b,g),b.normalize(),w.normalize();for(let E=0;E<=o;++E){let S=E/o*Math.PI*2,M=-t*Math.cos(S),_=t*Math.sin(S);f.x=p.x+(M*w.x+_*b.x),f.y=p.y+(M*w.y+_*b.y),f.z=p.z+(M*w.z+_*b.z),u.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),h.push(d.x,d.y,d.z),A.push(v/i),A.push(E/o)}}for(let v=1;v<=i;v++)for(let C=1;C<=o;C++){let E=(o+1)*(v-1)+(C-1),S=(o+1)*v+(C-1),M=(o+1)*v+C,_=(o+1)*(v-1)+C;c.push(E,S,_),c.push(S,M,_)}this.setIndex(c),this.setAttribute("position",new Ve(u,3)),this.setAttribute("normal",new Ve(h,3)),this.setAttribute("uv",new Ve(A,2));function I(v,C,E,S,M){let _=Math.cos(v),T=Math.sin(v),D=E/C*v,R=Math.cos(D);M.x=S*(2+R)*.5*_,M.y=S*(2+R)*T*.5,M.z=S*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},dl=class n extends Ke{constructor(e=new Bd(new U(-1,-1,0),new U(-1,1,0),new U(1,1,0)),t=64,i=1,o=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:o,closed:a};let l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;let c=new U,u=new U,h=new he,A=new U,f=[],d=[],p=[],m=[];b(),this.setIndex(m),this.setAttribute("position",new Ve(f,3)),this.setAttribute("normal",new Ve(d,3)),this.setAttribute("uv",new Ve(p,2));function b(){for(let v=0;v<t;v++)g(v);g(a===!1?t:0),I(),w()}function g(v){A=e.getPointAt(v/t,A);let C=l.normals[v],E=l.binormals[v];for(let S=0;S<=o;S++){let M=S/o*Math.PI*2,_=Math.sin(M),T=-Math.cos(M);u.x=T*C.x+_*E.x,u.y=T*C.y+_*E.y,u.z=T*C.z+_*E.z,u.normalize(),d.push(u.x,u.y,u.z),c.x=A.x+i*u.x,c.y=A.y+i*u.y,c.z=A.z+i*u.z,f.push(c.x,c.y,c.z)}}function w(){for(let v=1;v<=t;v++)for(let C=1;C<=o;C++){let E=(o+1)*(v-1)+(C-1),S=(o+1)*v+(C-1),M=(o+1)*v+C,_=(o+1)*(v-1)+C;m.push(E,S,_),m.push(S,M,_)}}function I(){for(let v=0;v<=t;v++)for(let C=0;C<=o;C++)h.x=v/t,h.y=C/o,p.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n(new eI[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},py=class extends Ke{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let t=[],i=new Set,o=new U,a=new U;if(e.index!==null){let l=e.attributes.position,c=e.index,u=e.groups;u.length===0&&(u=[{start:0,count:c.count,materialIndex:0}]);for(let h=0,A=u.length;h<A;++h){let f=u[h],d=f.start,p=f.count;for(let m=d,b=d+p;m<b;m+=3)for(let g=0;g<3;g++){let w=c.getX(m+g),I=c.getX(m+(g+1)%3);o.fromBufferAttribute(l,w),a.fromBufferAttribute(l,I),Kk(o,a,i)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}}else{let l=e.attributes.position;for(let c=0,u=l.count/3;c<u;c++)for(let h=0;h<3;h++){let A=3*c+h,f=3*c+(h+1)%3;o.fromBufferAttribute(l,A),a.fromBufferAttribute(l,f),Kk(o,a,i)===!0&&(t.push(o.x,o.y,o.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ve(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function Kk(n,e,t){let i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(o)===!0?!1:(t.add(i),t.add(o),!0)}var jk=Object.freeze({__proto__:null,BoxGeometry:wn,CapsuleGeometry:Nh,CircleGeometry:oy,ConeGeometry:ay,CylinderGeometry:Nr,DodecahedronGeometry:ly,EdgesGeometry:cy,ExtrudeGeometry:uy,IcosahedronGeometry:Fh,LatheGeometry:Pd,OctahedronGeometry:Od,PlaneGeometry:Ii,PolyhedronGeometry:fl,RingGeometry:hy,ShapeGeometry:Ay,SphereGeometry:Hc,TetrahedronGeometry:fy,TorusGeometry:dy,TorusKnotGeometry:Uh,TubeGeometry:dl,WireframeGeometry:py}),Oh=class extends _n{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new De(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},xo=class extends yt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Jn=class extends _n{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new De(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Dn=class extends Jn{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new De(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new De(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new De(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},fr=class extends _n{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new De(16777215),this.specular=new De(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},my=class extends _n{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new De(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Qh=class extends _n{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},Gh=class extends _n{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},gy=class extends _n{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new De(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},yy=class extends bn{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function as(n,e,t){return tI(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Tc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function tI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function E3(n){function e(o,a){return n[o]-n[a]}let t=n.length,i=new Array(t);for(let o=0;o!==t;++o)i[o]=o;return i.sort(e),i}function $S(n,e,t){let i=n.length,o=new n.constructor(i);for(let a=0,l=0;l!==i;++a){let c=t[a]*e;for(let u=0;u!==e;++u)o[l++]=n[c+u]}return o}function nI(n,e,t,i){let o=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[o++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),t.push.apply(t,l)),a=n[o++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=n[o++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),t.push(l)),a=n[o++];while(a!==void 0)}function xj(n,e,t,i,o=30){let a=n.clone();a.name=e;let l=[];for(let u=0;u<a.tracks.length;++u){let h=a.tracks[u],A=h.getValueSize(),f=[],d=[];for(let p=0;p<h.times.length;++p){let m=h.times[p]*o;if(!(m<t||m>=i)){f.push(h.times[p]);for(let b=0;b<A;++b)d.push(h.values[p*A+b])}}f.length!==0&&(h.times=Tc(f,h.times.constructor),h.values=Tc(d,h.values.constructor),l.push(h))}a.tracks=l;let c=1/0;for(let u=0;u<a.tracks.length;++u)c>a.tracks[u].times[0]&&(c=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*c);return a.resetDuration(),a}function Cj(n,e=0,t=n,i=30){i<=0&&(i=30);let o=t.tracks.length,a=e/i;for(let l=0;l<o;++l){let c=t.tracks[l],u=c.ValueTypeName;if(u==="bool"||u==="string")continue;let h=n.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===u});if(h===void 0)continue;let A=0,f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=f/3);let d=0,p=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=c.times.length-1,b;if(a<=c.times[0]){let w=A,I=f-A;b=as(c.values,w,I)}else if(a>=c.times[m]){let w=m*f+A,I=w+f-A;b=as(c.values,w,I)}else{let w=c.createInterpolant(),I=A,v=f-A;w.evaluate(a),b=as(w.resultBuffer,I,v)}u==="quaternion"&&new It().fromArray(b).normalize().conjugate().toArray(b);let g=h.times.length;for(let w=0;w<g;++w){let I=w*p+d;if(u==="quaternion")It.multiplyQuaternionsFlat(h.values,I,b,0,h.values,I);else{let v=p-d*2;for(let C=0;C<v;++C)h.values[I+C]-=b[C]}}}return n.blendMode=YE,n}var Sj={arraySlice:as,convertArray:Tc,isTypedArray:tI,getKeyframeOrder:E3,sortedArray:$S,flattenJSON:nI,subclip:xj,makeClipAdditive:Cj},Aa=class{constructor(e,t,i,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,o=t[i],a=t[i-1];e:{t:{let l;n:{i:if(!(e<o)){for(let c=i+2;;){if(o===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(a=o,o=t[++i],e<o)break t}l=t.length;break n}if(!(e>=a)){let c=t[1];e<c&&(i=2,a=c);for(let u=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(o=a,a=t[--i-1],e>=a)break t}l=i,i=0;break n}break e}for(;i<l;){let c=i+l>>>1;e<t[c]?l=c:i=c+1}if(o=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,o)}return this.interpolate_(i,a,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=e*o;for(let l=0;l!==o;++l)t[l]=i[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},vy=class extends Aa{constructor(e,t,i,o){super(e,t,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ic,endingEnd:Ic}}intervalChanged_(e,t,i){let o=this.parameterPositions,a=e-2,l=e+1,c=o[a],u=o[l];if(c===void 0)switch(this.getSettings_().endingStart){case Mc:a=e,c=2*t-i;break;case vd:a=o.length-2,c=t+o[a]-o[a+1];break;default:a=e,c=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Mc:l=e,u=2*i-t;break;case vd:l=1,u=i+o[1]-o[0];break;default:l=e-1,u=t}let h=(i-t)*.5,A=this.valueSize;this._weightPrev=h/(t-c),this._weightNext=h/(u-i),this._offsetPrev=a*A,this._offsetNext=l*A}interpolate_(e,t,i,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=e*c,h=u-c,A=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,p=this._weightNext,m=(i-t)/(o-t),b=m*m,g=b*m,w=-d*g+2*d*b-d*m,I=(1+d)*g+(-1.5-2*d)*b+(-.5+d)*m+1,v=(-1-p)*g+(1.5+p)*b+.5*m,C=p*g-p*b;for(let E=0;E!==c;++E)a[E]=w*l[A+E]+I*l[h+E]+v*l[u+E]+C*l[f+E];return a}},Qd=class extends Aa{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e,t,i,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=e*c,h=u-c,A=(i-t)/(o-t),f=1-A;for(let d=0;d!==c;++d)a[d]=l[h+d]*f+l[u+d]*A;return a}},wy=class extends Aa{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e){return this.copySampleValue_(e-1)}},Fr=class{constructor(e,t,i,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tc(t,this.TimeBufferType),this.values=Tc(i,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Tc(e.times,Array),values:Tc(e.values,Array)};let o=e.getInterpolation();o!==e.DefaultInterpolation&&(i.interpolation=o)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new wy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Qd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kc:t=this.InterpolantFactoryMethodDiscrete;break;case ol:t=this.InterpolantFactoryMethodLinear;break;case V0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kc;case this.InterpolantFactoryMethodLinear:return ol;case this.InterpolantFactoryMethodSmooth:return V0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,o=t.length;i!==o;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,o=t.length;i!==o;++i)t[i]*=e}return this}trim(e,t){let i=this.times,o=i.length,a=0,l=o-1;for(;a!==o&&i[a]<e;)++a;for(;l!==-1&&i[l]>t;)--l;if(++l,a!==0||l!==o){a>=l&&(l=Math.max(l,1),a=l-1);let c=this.getValueSize();this.times=as(i,a,l),this.values=as(this.values,a*c,l*c)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,o=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==a;c++){let u=i[c];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,u),e=!1;break}if(l!==null&&l>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,u,l),e=!1;break}l=u}if(o!==void 0&&tI(o))for(let c=0,u=o.length;c!==u;++c){let h=o[c];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,h),e=!1;break}}return e}optimize(){let e=as(this.times),t=as(this.values),i=this.getValueSize(),o=this.getInterpolation()===V0,a=e.length-1,l=1;for(let c=1;c<a;++c){let u=!1,h=e[c],A=e[c+1];if(h!==A&&(c!==1||h!==e[0]))if(o)u=!0;else{let f=c*i,d=f-i,p=f+i;for(let m=0;m!==i;++m){let b=t[f+m];if(b!==t[d+m]||b!==t[p+m]){u=!0;break}}}if(u){if(c!==l){e[l]=e[c];let f=c*i,d=l*i;for(let p=0;p!==i;++p)t[d+p]=t[f+p]}++l}}if(a>0){e[l]=e[a];for(let c=a*i,u=l*i,h=0;h!==i;++h)t[u+h]=t[c+h];++l}return l!==e.length?(this.times=as(e,0,l),this.values=as(t,0,l*i)):(this.times=e,this.values=t),this}clone(){let e=as(this.times,0),t=as(this.values,0),i=this.constructor,o=new i(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}};Fr.prototype.TimeBufferType=Float32Array;Fr.prototype.ValueBufferType=Float32Array;Fr.prototype.DefaultInterpolation=ol;var fa=class extends Fr{};fa.prototype.ValueTypeName="bool";fa.prototype.ValueBufferType=Array;fa.prototype.DefaultInterpolation=kc;fa.prototype.InterpolantFactoryMethodLinear=void 0;fa.prototype.InterpolantFactoryMethodSmooth=void 0;var Gd=class extends Fr{};Gd.prototype.ValueTypeName="color";var us=class extends Fr{};us.prototype.ValueTypeName="number";var by=class extends Aa{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e,t,i,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=(i-t)/(o-t),h=e*c;for(let A=h+c;h!==A;h+=4)It.slerpFlat(a,0,l,h-c,l,h,u);return a}},Ur=class extends Fr{InterpolantFactoryMethodLinear(e){return new by(this.times,this.values,this.getValueSize(),e)}};Ur.prototype.ValueTypeName="quaternion";Ur.prototype.DefaultInterpolation=ol;Ur.prototype.InterpolantFactoryMethodSmooth=void 0;var da=class extends Fr{};da.prototype.ValueTypeName="string";da.prototype.ValueBufferType=Array;da.prototype.DefaultInterpolation=kc;da.prototype.InterpolantFactoryMethodLinear=void 0;da.prototype.InterpolantFactoryMethodSmooth=void 0;var Us=class extends Fr{};Us.prototype.ValueTypeName="vector";var Os=class{constructor(e,t=-1,i,o=ky){this.name=e,this.tracks=i,this.duration=t,this.blendMode=o,this.uuid=Br(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,o=1/(e.fps||1);for(let l=0,c=i.length;l!==c;++l)t.push(Ij(i[l]).scale(o));let a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){let t=[],i=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=i.length;a!==l;++a)t.push(Fr.toJSON(i[a]));return o}static CreateFromMorphTargetSequence(e,t,i,o){let a=t.length,l=[];for(let c=0;c<a;c++){let u=[],h=[];u.push((c+a-1)%a,c,(c+1)%a),h.push(0,1,0);let A=E3(u);u=$S(u,1,A),h=$S(h,1,A),!o&&u[0]===0&&(u.push(a),h.push(h[0])),l.push(new us(".morphTargetInfluences["+t[c].name+"]",u,h).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let o=e;i=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<i.length;o++)if(i[o].name===t)return i[o];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let o={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,u=e.length;c<u;c++){let h=e[c],A=h.name.match(a);if(A&&A.length>1){let f=A[1],d=o[f];d||(o[f]=d=[]),d.push(h)}}let l=[];for(let c in o)l.push(this.CreateFromMorphTargetSequence(c,o[c],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(f,d,p,m,b){if(p.length!==0){let g=[],w=[];nI(p,g,w,m),g.length!==0&&b.push(new f(d,g,w))}},o=[],a=e.name||"default",l=e.fps||30,c=e.blendMode,u=e.length||-1,h=e.hierarchy||[];for(let f=0;f<h.length;f++){let d=h[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let p={},m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let b=0;b<d[m].morphTargets.length;b++)p[d[m].morphTargets[b]]=-1;for(let b in p){let g=[],w=[];for(let I=0;I!==d[m].morphTargets.length;++I){let v=d[m];g.push(v.time),w.push(v.morphTarget===b?1:0)}o.push(new us(".morphTargetInfluence["+b+"]",g,w))}u=p.length*l}else{let p=".bones["+t[f].name+"]";i(Us,p+".position",d,"pos",o),i(Ur,p+".quaternion",d,"rot",o),i(Us,p+".scale",d,"scl",o)}}return o.length===0?null:new this(a,u,o,c)}resetDuration(){let e=this.tracks,t=0;for(let i=0,o=e.length;i!==o;++i){let a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Ej(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return us;case"vector":case"vector2":case"vector3":case"vector4":return Us;case"color":return Gd;case"quaternion":return Ur;case"bool":case"boolean":return fa;case"string":return da}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Ij(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=Ej(n.type);if(n.times===void 0){let t=[],i=[];nI(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Vc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},zd=class{constructor(e,t,i){let o=this,a=!1,l=0,c=0,u,h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(A){c++,a===!1&&o.onStart!==void 0&&o.onStart(A,l,c),a=!0},this.itemEnd=function(A){l++,o.onProgress!==void 0&&o.onProgress(A,l,c),l===c&&(a=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(A){o.onError!==void 0&&o.onError(A)},this.resolveURL=function(A){return u?u(A):A},this.setURLModifier=function(A){return u=A,this},this.addHandler=function(A,f){return h.push(A,f),this},this.removeHandler=function(A){let f=h.indexOf(A);return f!==-1&&h.splice(f,2),this},this.getHandler=function(A){for(let f=0,d=h.length;f<d;f+=2){let p=h[f],m=h[f+1];if(p.global&&(p.lastIndex=0),p.test(A))return m}return null}}},I3=new zd,pn=class{constructor(e){this.manager=e!==void 0?e:I3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(o,a){i.load(e,o,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};pn.DEFAULT_MATERIAL_NAME="__DEFAULT";var ia={},eE=class extends Error{constructor(e,t){super(e),this.response=t}},si=class extends pn{constructor(e){super(e)}load(e,t,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=Vc.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(ia[e]!==void 0){ia[e].push({onLoad:t,onProgress:i,onError:o});return}ia[e]=[],ia[e].push({onLoad:t,onProgress:i,onError:o});let l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,u=this.responseType;fetch(l).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;let A=ia[e],f=h.body.getReader(),d=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),p=d?parseInt(d):0,m=p!==0,b=0,g=new ReadableStream({start(w){I();function I(){f.read().then(({done:v,value:C})=>{if(v)w.close();else{b+=C.byteLength;let E=new ProgressEvent("progress",{lengthComputable:m,loaded:b,total:p});for(let S=0,M=A.length;S<M;S++){let _=A[S];_.onProgress&&_.onProgress(E)}w.enqueue(C),I()}})}}});return new Response(g)}else throw new eE(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(A=>new DOMParser().parseFromString(A,c));case"json":return h.json();default:if(c===void 0)return h.text();{let f=/charset="?([^;"\s]*)"?/i.exec(c),d=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(d);return h.arrayBuffer().then(m=>p.decode(m))}}}).then(h=>{Vc.add(e,h);let A=ia[e];delete ia[e];for(let f=0,d=A.length;f<d;f++){let p=A[f];p.onLoad&&p.onLoad(h)}}).catch(h=>{let A=ia[e];if(A===void 0)throw this.manager.itemError(e),h;delete ia[e];for(let f=0,d=A.length;f<d;f++){let p=A[f];p.onError&&p.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},tE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=new si(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(u){o?o(u):console.error(u),a.manager.itemError(e)}},i,o)}parse(e){let t=[];for(let i=0;i<e.length;i++){let o=Os.parse(e[i]);t.push(o)}return t}},nE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=[],c=new _d,u=new si(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let h=0;function A(f){u.load(e[f],function(d){let p=a.parse(d,!0);l[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},h+=1,h===6&&(p.mipmapCount===1&&(c.minFilter=Et),c.image=l,c.format=p.format,c.needsUpdate=!0,t&&t(c))},i,o)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)A(f);else u.load(e,function(f){let d=a.parse(f,!0);if(d.isCubemap){let p=d.mipmaps.length/d.mipmapCount;for(let m=0;m<p;m++){l[m]={mipmaps:[]};for(let b=0;b<d.mipmapCount;b++)l[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+b]),l[m].format=d.format,l[m].width=d.width,l[m].height=d.height}c.image=l}else c.image.width=d.width,c.image.height=d.height,c.mipmaps=d.mipmaps;d.mipmapCount===1&&(c.minFilter=Et),c.format=d.format,c.needsUpdate=!0,t&&t(c)},i,o);return c}},Wc=class extends pn{constructor(e){super(e)}load(e,t,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,l=Vc.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;let c=xd("img");function u(){A(),Vc.add(e,this),t&&t(this),a.manager.itemEnd(e)}function h(f){A(),o&&o(f),a.manager.itemError(e),a.manager.itemEnd(e)}function A(){c.removeEventListener("load",u,!1),c.removeEventListener("error",h,!1)}return c.addEventListener("load",u,!1),c.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c}},iE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=new Nc;a.colorSpace=it;let l=new Wc(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function u(h){l.load(e[h],function(A){a.images[h]=A,c++,c===6&&(a.needsUpdate=!0,t&&t(a))},void 0,o)}for(let h=0;h<e.length;++h)u(h);return a}},rE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=new vo,c=new si(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(a.withCredentials),c.load(e,function(u){let h=a.parse(u);h&&(h.image!==void 0?l.image=h.image:h.data!==void 0&&(l.image.width=h.width,l.image.height=h.height,l.image.data=h.data),l.wrapS=h.wrapS!==void 0?h.wrapS:Qn,l.wrapT=h.wrapT!==void 0?h.wrapT:Qn,l.magFilter=h.magFilter!==void 0?h.magFilter:Et,l.minFilter=h.minFilter!==void 0?h.minFilter:Et,l.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?l.colorSpace=h.colorSpace:h.encoding!==void 0&&(l.encoding=h.encoding),h.flipY!==void 0&&(l.flipY=h.flipY),h.format!==void 0&&(l.format=h.format),h.type!==void 0&&(l.type=h.type),h.mipmaps!==void 0&&(l.mipmaps=h.mipmaps,l.minFilter=Fs),h.mipmapCount===1&&(l.minFilter=Et),h.generateMipmaps!==void 0&&(l.generateMipmaps=h.generateMipmaps),l.needsUpdate=!0,t&&t(l,h))},i,o),l}},pa=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=new jt,l=new Wc(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){a.image=c,a.needsUpdate=!0,t!==void 0&&t(a)},i,o),a}},Co=class extends mt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new De(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Xc=class extends Co{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new De(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},$C=new ke,Jk=new U,qk=new U,Hd=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new ke,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new al,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;Jk.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jk),qk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qk),t.updateMatrixWorld(),$C.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($C),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply($C)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},sE=class extends Hd{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Ih*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(i!==t.fov||o!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=o,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},pl=class extends Co{constructor(e,t,i=0,o=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mt.DEFAULT_UP),this.updateMatrix(),this.target=new mt,this.distance=i,this.angle=o,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new sE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},$k=new ke,ud=new U,eS=new U,oE=class extends Hd{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new pt(2,1,1,1),new pt(0,1,1,1),new pt(3,1,1,1),new pt(1,1,1,1),new pt(3,0,1,1),new pt(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,o=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),ud.setFromMatrixPosition(e.matrixWorld),i.position.copy(ud),eS.copy(i.position),eS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(eS),i.updateMatrixWorld(),o.makeTranslation(-ud.x,-ud.y,-ud.z),$k.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($k)}},Qs=class extends Co{constructor(e,t,i=0,o=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new oE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},aE=class extends Hd{constructor(){super(new Ui(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Or=class extends Co{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mt.DEFAULT_UP),this.updateMatrix(),this.target=new mt,this.shadow=new aE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},ml=class extends Co{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},xy=class extends Co{constructor(e,t,i=10,o=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},Cy=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let i=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*o),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*o)),t.addScaledVector(l[5],1.092548*(o*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(i*a)),t.addScaledVector(l[8],.546274*(i*i-o*o)),t}getIrradianceAt(e,t){let i=e.x,o=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*o),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*o),t.addScaledVector(l[5],2*.429043*o*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*i*a),t.addScaledVector(l[8],.429043*(i*i-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){let i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){let i=e.x,o=e.y,a=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*o,t[5]=1.092548*o*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-o*o)}},zh=class extends Co{constructor(e=new Cy,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}},Sy=class n extends pn{constructor(e){super(e),this.textures={}}load(e,t,i,o){let a=this,l=new si(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(u){o?o(u):console.error(u),a.manager.itemError(e)}},i,o)}parse(e){let t=this.textures;function i(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}let o=n.createMaterialFromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new De().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(o.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(o.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(o.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(o.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(o.alphaHash=e.alphaHash),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(o.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let a in e.uniforms){let l=e.uniforms[a];switch(o.uniforms[a]={},l.type){case"t":o.uniforms[a].value=i(l.value);break;case"c":o.uniforms[a].value=new De().setHex(l.value);break;case"v2":o.uniforms[a].value=new he().fromArray(l.value);break;case"v3":o.uniforms[a].value=new U().fromArray(l.value);break;case"v4":o.uniforms[a].value=new pt().fromArray(l.value);break;case"m3":o.uniforms[a].value=new dt().fromArray(l.value);break;case"m4":o.uniforms[a].value=new ke().fromArray(l.value);break;default:o.uniforms[a].value=l.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(o.glslVersion=e.glslVersion),e.extensions!==void 0)for(let a in e.extensions)o.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(o.lights=e.lights),e.clipping!==void 0&&(o.clipping=e.clipping),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=i(e.map)),e.matcap!==void 0&&(o.matcap=i(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),o.normalScale=new he().fromArray(a)}return e.displacementMap!==void 0&&(o.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new he().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(o.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(o.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(o.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=i(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){let t={ShadowMaterial:Oh,SpriteMaterial:Md,RawShaderMaterial:xo,ShaderMaterial:yt,PointsMaterial:ha,MeshPhysicalMaterial:Dn,MeshStandardMaterial:Jn,MeshPhongMaterial:fr,MeshToonMaterial:my,MeshNormalMaterial:Qh,MeshLambertMaterial:Gh,MeshDepthMaterial:Uc,MeshDistanceMaterial:Oc,MeshBasicMaterial:Nt,MeshMatcapMaterial:gy,LineDashedMaterial:yy,LineBasicMaterial:bn,Material:_n};return new t[e]}},Gs=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,o=e.length;i<o;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},gl=class extends Ke{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Ey=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=new si(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(u){o?o(u):console.error(u),a.manager.itemError(e)}},i,o)}parse(e){let t={},i={};function o(p,m){if(t[m]!==void 0)return t[m];let g=p.interleavedBuffers[m],w=a(p,g.buffer),I=vh(g.type,w),v=new hr(I,g.stride);return v.uuid=g.uuid,t[m]=v,v}function a(p,m){if(i[m]!==void 0)return i[m];let g=p.arrayBuffers[m],w=new Uint32Array(g).buffer;return i[m]=w,w}let l=e.isInstancedBufferGeometry?new gl:new Ke,c=e.data.index;if(c!==void 0){let p=vh(c.type,c.array);l.setIndex(new $e(p,1))}let u=e.data.attributes;for(let p in u){let m=u[p],b;if(m.isInterleavedBufferAttribute){let g=o(e.data,m.data);b=new zn(g,m.itemSize,m.offset,m.normalized)}else{let g=vh(m.type,m.array),w=m.isInstancedBufferAttribute?Pr:$e;b=new w(g,m.itemSize,m.normalized)}m.name!==void 0&&(b.name=m.name),m.usage!==void 0&&b.setUsage(m.usage),m.updateRange!==void 0&&(b.updateRange.offset=m.updateRange.offset,b.updateRange.count=m.updateRange.count),l.setAttribute(p,b)}let h=e.data.morphAttributes;if(h)for(let p in h){let m=h[p],b=[];for(let g=0,w=m.length;g<w;g++){let I=m[g],v;if(I.isInterleavedBufferAttribute){let C=o(e.data,I.data);v=new zn(C,I.itemSize,I.offset,I.normalized)}else{let C=vh(I.type,I.array);v=new $e(C,I.itemSize,I.normalized)}I.name!==void 0&&(v.name=I.name),b.push(v)}l.morphAttributes[p]=b}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);let f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,m=f.length;p!==m;++p){let b=f[p];l.addGroup(b.start,b.count,b.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let p=new U;d.center!==void 0&&p.fromArray(d.center),l.boundingSphere=new Vt(p,d.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}},lE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=this.path===""?Gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;let c=new si(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(f){o!==void 0&&o(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}let A=h.metadata;if(A===void 0||A.type===void 0||A.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(h,t)},i,o)}async loadAsync(e,t){let i=this,o=this.path===""?Gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;let a=new si(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);let l=await a.loadAsync(e,t),c=JSON.parse(l),u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){let i=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,o),l=this.parseImages(e.images,function(){t!==void 0&&t(h)}),c=this.parseTextures(e.textures,l),u=this.parseMaterials(e.materials,c),h=this.parseObject(e.object,a,u,c,i),A=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,A),t!==void 0){let f=!1;for(let d in l)if(l[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(h)}return h}async parseAsync(e){let t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,o,c,l,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),u}parseShapes(e){let t={};if(e!==void 0)for(let i=0,o=e.length;i<o;i++){let a=new aa().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){let i={},o={};if(t.traverse(function(a){a.isBone&&(o[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){let c=new ul().fromJSON(e[a],o);i[c.uuid]=c}return i}parseGeometries(e,t){let i={};if(e!==void 0){let o=new Ey;for(let a=0,l=e.length;a<l;a++){let c,u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":c=o.parse(u);break;default:u.type in jk?c=jk[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}c.uuid=u.uuid,u.name!==void 0&&(c.name=u.name),u.userData!==void 0&&(c.userData=u.userData),i[u.uuid]=c}}return i}parseMaterials(e,t){let i={},o={};if(e!==void 0){let a=new Sy;a.setTextures(t);for(let l=0,c=e.length;l<c;l++){let u=e[l];i[u.uuid]===void 0&&(i[u.uuid]=a.parse(u)),o[u.uuid]=i[u.uuid]}}return o}parseAnimations(e){let t={};if(e!==void 0)for(let i=0;i<e.length;i++){let o=e[i],a=Os.parse(o);t[a.uuid]=a}return t}parseImages(e,t){let i=this,o={},a;function l(u){return i.manager.itemStart(u),a.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function c(u){if(typeof u=="string"){let h=u,A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return l(A)}else return u.data?{data:vh(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){let u=new zd(t);a=new Wc(u),a.setCrossOrigin(this.crossOrigin);for(let h=0,A=e.length;h<A;h++){let f=e[h],d=f.url;if(Array.isArray(d)){let p=[];for(let m=0,b=d.length;m<b;m++){let g=d[m],w=c(g);w!==null&&(w instanceof HTMLImageElement?p.push(w):p.push(new vo(w.data,w.width,w.height)))}o[f.uuid]=new sa(p)}else{let p=c(f.url);o[f.uuid]=new sa(p)}}}return o}async parseImagesAsync(e){let t=this,i={},o;async function a(l){if(typeof l=="string"){let c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await o.loadAsync(u)}else return l.data?{data:vh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){o=new Wc(this.manager),o.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){let u=e[l],h=u.url;if(Array.isArray(h)){let A=[];for(let f=0,d=h.length;f<d;f++){let p=h[f],m=await a(p);m!==null&&(m instanceof HTMLImageElement?A.push(m):A.push(new vo(m.data,m.width,m.height)))}i[u.uuid]=new sa(A)}else{let A=await a(u.url);i[u.uuid]=new sa(A)}}}return i}parseTextures(e,t){function i(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}let o={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){let c=e[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);let u=t[c.image],h=u.data,A;Array.isArray(h)?(A=new Nc,h.length===6&&(A.needsUpdate=!0)):(h&&h.data?A=new vo:A=new jt,h&&(A.needsUpdate=!0)),A.source=u,A.uuid=c.uuid,c.name!==void 0&&(A.name=c.name),c.mapping!==void 0&&(A.mapping=i(c.mapping,Mj)),c.channel!==void 0&&(A.channel=c.channel),c.offset!==void 0&&A.offset.fromArray(c.offset),c.repeat!==void 0&&A.repeat.fromArray(c.repeat),c.center!==void 0&&A.center.fromArray(c.center),c.rotation!==void 0&&(A.rotation=c.rotation),c.wrap!==void 0&&(A.wrapS=i(c.wrap[0],eP),A.wrapT=i(c.wrap[1],eP)),c.format!==void 0&&(A.format=c.format),c.internalFormat!==void 0&&(A.internalFormat=c.internalFormat),c.type!==void 0&&(A.type=c.type),c.colorSpace!==void 0&&(A.colorSpace=c.colorSpace),c.encoding!==void 0&&(A.encoding=c.encoding),c.minFilter!==void 0&&(A.minFilter=i(c.minFilter,tP)),c.magFilter!==void 0&&(A.magFilter=i(c.magFilter,tP)),c.anisotropy!==void 0&&(A.anisotropy=c.anisotropy),c.flipY!==void 0&&(A.flipY=c.flipY),c.generateMipmaps!==void 0&&(A.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(A.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(A.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(A.compareFunction=c.compareFunction),c.userData!==void 0&&(A.userData=c.userData),o[c.uuid]=A}return o}parseObject(e,t,i,o,a){let l;function c(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function u(d){if(d!==void 0){if(Array.isArray(d)){let p=[];for(let m=0,b=d.length;m<b;m++){let g=d[m];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),p.push(i[g])}return p}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function h(d){return o[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),o[d]}let A,f;switch(e.type){case"Scene":l=new ua,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new De(e.background):l.background=h(e.background)),e.environment!==void 0&&(l.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new $0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Lh(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":l=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Ui(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new ml(e.color,e.intensity);break;case"DirectionalLight":l=new Or(e.color,e.intensity);break;case"PointLight":l=new Qs(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new xy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new pl(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new Xc(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new zh().fromJSON(e);break;case"SkinnedMesh":A=c(e.geometry),f=u(e.material),l=new cl(A,f),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":A=c(e.geometry),f=u(e.material),l=new He(A,f);break;case"InstancedMesh":A=c(e.geometry),f=u(e.material);let d=e.count,p=e.instanceMatrix,m=e.instanceColor;l=new hl(A,f,d),l.instanceMatrix=new Pr(new Float32Array(p.array),16),m!==void 0&&(l.instanceColor=new Pr(new Float32Array(m.array),m.itemSize));break;case"LOD":l=new ty;break;case"Line":l=new Ar(c(e.geometry),u(e.material));break;case"LineLoop":l=new Bh(c(e.geometry),u(e.material));break;case"LineSegments":l=new fi(c(e.geometry),u(e.material));break;case"PointCloud":case"Points":l=new Al(c(e.geometry),u(e.material));break;case"Sprite":l=new ey(u(e.material));break;case"Group":l=new Yt;break;case"Bone":l=new bo;break;default:l=new mt}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){let d=e.children;for(let p=0;p<d.length;p++)l.add(this.parseObject(d[p],t,i,o,a))}if(e.animations!==void 0){let d=e.animations;for(let p=0;p<d.length;p++){let m=d[p];l.animations.push(a[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);let d=e.levels;for(let p=0;p<d.length;p++){let m=d[p],b=l.getObjectByProperty("uuid",m.object);b!==void 0&&l.addLevel(b,m.distance,m.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){let o=t[i.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(o,i.bindMatrix)}})}},Mj={UVMapping:Ly,CubeReflectionMapping:rl,CubeRefractionMapping:sl,EquirectangularReflectionMapping:ca,EquirectangularRefractionMapping:yd,CubeUVReflectionMapping:Hh},eP={RepeatWrapping:ji,ClampToEdgeWrapping:Qn,MirroredRepeatWrapping:Lc},tP={NearestFilter:Tt,NearestMipmapNearestFilter:Sh,NearestMipmapLinearFilter:Dc,LinearFilter:Et,LinearMipmapNearestFilter:Kd,LinearMipmapLinearFilter:Fs},Vd=class extends pn{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,l=Vc.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;let c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){Vc.add(e,u),t&&t(u),a.manager.itemEnd(e)}).catch(function(u){o&&o(u),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}},L0,Wd=class{static getContext(){return L0===void 0&&(L0=new(window.AudioContext||window.webkitAudioContext)),L0}static setContext(e){L0=e}},cE=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=new si(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{let h=u.slice(0);Wd.getContext().decodeAudioData(h,function(f){t(f)},c)}catch(h){c(h)}},i,o);function c(u){o?o(u):console.error(u),a.manager.itemError(e)}}},uE=class extends zh{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;let o=new De().set(e),a=new De().set(t),l=new U(o.r,o.g,o.b),c=new U(a.r,a.g,a.b),u=Math.sqrt(Math.PI),h=u*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(c).multiplyScalar(u),this.sh.coefficients[1].copy(l).sub(c).multiplyScalar(h)}},hE=class extends zh{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;let i=new De().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}},nP=new ke,iP=new ke,yc=new ke,AE=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yc.copy(e.projectionMatrix);let o=t.eyeSep/2,a=o*t.near/t.focus,l=t.near*Math.tan(Rc*t.fov*.5)/t.zoom,c,u;iP.elements[12]=-o,nP.elements[12]=o,c=-l*t.aspect+a,u=l*t.aspect+a,yc.elements[0]=2*t.near/(u-c),yc.elements[8]=(u+c)/(u-c),this.cameraL.projectionMatrix.copy(yc),c=-l*t.aspect-a,u=l*t.aspect-a,yc.elements[0]=2*t.near/(u-c),yc.elements[8]=(u+c)/(u-c),this.cameraR.projectionMatrix.copy(yc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(iP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nP)}},yl=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=rP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function rP(){return(typeof performance>"u"?Date:performance).now()}var vc=new U,sP=new It,Tj=new U,wc=new U,fE=class extends mt{constructor(){super(),this.type="AudioListener",this.context=Wd.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yl}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vc,sP,Tj),wc.set(0,0,-1).applyQuaternion(sP),t.positionX){let o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vc.x,o),t.positionY.linearRampToValueAtTime(vc.y,o),t.positionZ.linearRampToValueAtTime(vc.z,o),t.forwardX.linearRampToValueAtTime(wc.x,o),t.forwardY.linearRampToValueAtTime(wc.y,o),t.forwardZ.linearRampToValueAtTime(wc.z,o),t.upX.linearRampToValueAtTime(i.x,o),t.upY.linearRampToValueAtTime(i.y,o),t.upZ.linearRampToValueAtTime(i.z,o)}else t.setPosition(vc.x,vc.y,vc.z),t.setOrientation(wc.x,wc.y,wc.z,i.x,i.y,i.z)}},Iy=class extends mt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},bc=new U,oP=new It,_j=new U,xc=new U,dE=class extends Iy{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bc,oP,_j),xc.set(0,0,1).applyQuaternion(oP);let t=this.panner;if(t.positionX){let i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bc.x,i),t.positionY.linearRampToValueAtTime(bc.y,i),t.positionZ.linearRampToValueAtTime(bc.z,i),t.orientationX.linearRampToValueAtTime(xc.x,i),t.orientationY.linearRampToValueAtTime(xc.y,i),t.orientationZ.linearRampToValueAtTime(xc.z,i)}else t.setPosition(bc.x,bc.y,bc.z),t.setOrientation(xc.x,xc.y,xc.z)}},pE=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}},My=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let o,a,l;switch(t){case"quaternion":o=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:o=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,o=this.valueSize,a=e*o+o,l=this.cumulativeWeight;if(l===0){for(let c=0;c!==o;++c)i[a+c]=i[c];l=t}else{l+=t;let c=t/l;this._mixBufferRegion(i,a,0,c,o)}this.cumulativeWeight=l}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,o=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,o=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){let u=t*this._origIndex;this._mixBufferRegion(i,o,u,1-a,t)}l>0&&this._mixBufferRegionAdditive(i,o,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){c.setValue(i,o);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,o=i*this._origIndex;e.getValue(t,o);for(let a=i,l=o;a!==l;++a)t[a]=t[o+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,o,a){if(o>=.5)for(let l=0;l!==a;++l)e[t+l]=e[i+l]}_slerp(e,t,i,o){It.slerpFlat(e,t,e,t,e,i,o)}_slerpAdditive(e,t,i,o,a){let l=this._workIndex*a;It.multiplyQuaternionsFlat(e,l,e,t,e,i),It.slerpFlat(e,t,e,t,e,l,o)}_lerp(e,t,i,o,a){let l=1-o;for(let c=0;c!==a;++c){let u=t+c;e[u]=e[u]*l+e[i+c]*o}}_lerpAdditive(e,t,i,o,a){for(let l=0;l!==a;++l){let c=t+l;e[c]=e[c]+e[i+l]*o}}},iI="\\[\\]\\.:\\/",Dj=new RegExp("["+iI+"]","g"),rI="[^"+iI+"]",Rj="[^"+iI.replace("\\.","")+"]",Lj=/((?:WC+[\/:])*)/.source.replace("WC",rI),Bj=/(WCOD+)?/.source.replace("WCOD",Rj),kj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rI),Pj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rI),Nj=new RegExp("^"+Lj+Bj+kj+Pj+"$"),Fj=["material","materials","bones","map"],mE=class{constructor(e,t,i){let o=i||Lt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=i.length;o!==a;++o)i[o].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Lt=class n{constructor(e,t,i){this.path=t,this.parsedPath=i||n.parseTrackName(t),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new n.Composite(e,t,i):new n(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dj,"")}static parseTrackName(e){let t=Nj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let a=i.nodeName.substring(o+1);Fj.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){let i=function(a){for(let l=0;l<a.length;l++){let c=a[l];if(c.name===t||c.uuid===t)return c;let u=i(c.children);if(u)return u}return null},o=i(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let o=0,a=i.length;o!==a;++o)e[t++]=i[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let o=0,a=i.length;o!==a;++o)i[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let o=0,a=i.length;o!==a;++o)i[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let o=0,a=i.length;o!==a;++o)i[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,o=t.propertyName,a=t.propertyIndex;if(e||(e=n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let A=0;A<e.length;A++)if(e[A].name===h){h=A;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}let l=e[o];if(l===void 0){let h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+o+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(u=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Lt.Composite=mE;Lt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Lt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Lt.prototype.GetterByBindingType=[Lt.prototype._getValue_direct,Lt.prototype._getValue_array,Lt.prototype._getValue_arrayElement,Lt.prototype._getValue_toArray];Lt.prototype.SetterByBindingTypeAndVersioning=[[Lt.prototype._setValue_direct,Lt.prototype._setValue_direct_setNeedsUpdate,Lt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_array,Lt.prototype._setValue_array_setNeedsUpdate,Lt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_arrayElement,Lt.prototype._setValue_arrayElement_setNeedsUpdate,Lt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_fromArray,Lt.prototype._setValue_fromArray_setNeedsUpdate,Lt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var gE=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Br(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let i=0,o=arguments.length;i!==o;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length,c,u=e.length,h=this.nCachedObjects_;for(let A=0,f=arguments.length;A!==f;++A){let d=arguments[A],p=d.uuid,m=t[p];if(m===void 0){m=u++,t[p]=m,e.push(d);for(let b=0,g=l;b!==g;++b)a[b].push(new Lt(d,i[b],o[b]))}else if(m<h){c=e[m];let b=--h,g=e[b];t[g.uuid]=m,e[m]=g,t[p]=b,e[b]=d;for(let w=0,I=l;w!==I;++w){let v=a[w],C=v[b],E=v[m];v[m]=C,E===void 0&&(E=new Lt(d,i[w],o[w])),v[b]=E}}else e[m]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){let e=this._objects,t=this._indicesByUUID,i=this._bindings,o=i.length,a=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){let u=arguments[l],h=u.uuid,A=t[h];if(A!==void 0&&A>=a){let f=a++,d=e[f];t[d.uuid]=A,e[A]=d,t[h]=f,e[f]=u;for(let p=0,m=o;p!==m;++p){let b=i[p],g=b[f],w=b[A];b[A]=g,b[f]=w}}}this.nCachedObjects_=a}uncache(){let e=this._objects,t=this._indicesByUUID,i=this._bindings,o=i.length,a=this.nCachedObjects_,l=e.length;for(let c=0,u=arguments.length;c!==u;++c){let h=arguments[c],A=h.uuid,f=t[A];if(f!==void 0)if(delete t[A],f<a){let d=--a,p=e[d],m=--l,b=e[m];t[p.uuid]=f,e[f]=p,t[b.uuid]=d,e[d]=b,e.pop();for(let g=0,w=o;g!==w;++g){let I=i[g],v=I[d],C=I[m];I[f]=v,I[d]=C,I.pop()}}else{let d=--l,p=e[d];d>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let m=0,b=o;m!==b;++m){let g=i[m];g[f]=g[d],g.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){let i=this._bindingsIndicesByPath,o=i[e],a=this._bindings;if(o!==void 0)return a[o];let l=this._paths,c=this._parsedPaths,u=this._objects,h=u.length,A=this.nCachedObjects_,f=new Array(h);o=a.length,i[e]=o,l.push(e),c.push(t),a.push(f);for(let d=A,p=u.length;d!==p;++d){let m=u[d];f[d]=new Lt(m,e,t)}return f}unsubscribe_(e){let t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){let o=this._paths,a=this._parsedPaths,l=this._bindings,c=l.length-1,u=l[c],h=e[c];t[h]=i,l[i]=u,l.pop(),a[i]=a[c],a.pop(),o[i]=o[c],o.pop()}}},Ty=class{constructor(e,t,i=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=o;let a=t.tracks,l=a.length,c=new Array(l),u={endingStart:Ic,endingEnd:Ic};for(let h=0;h!==l;++h){let A=a[h].createInterpolant(null);c[h]=A,A.settings=u}this._interpolantSettings=u,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let o=this._clip.duration,a=e._clip.duration,l=a/o,c=o/a;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let o=this._mixer,a=o.time,l=this.timeScale,c=this._timeScaleInterpolant;c===null&&(c=o._lendControlInterpolant(),this._timeScaleInterpolant=c);let u=c.parameterPositions,h=c.sampleValues;return u[0]=a,u[1]=a+i,h[0]=e/l,h[1]=t/l,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,o){if(!this.enabled){this._updateWeight(e);return}let a=this._startTime;if(a!==null){let u=(e-a)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);let l=this._updateTime(t),c=this._updateWeight(e);if(c>0){let u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case YE:for(let A=0,f=u.length;A!==f;++A)u[A].evaluate(l),h[A].accumulateAdditive(c);break;case ky:default:for(let A=0,f=u.length;A!==f;++A)u[A].evaluate(l),h[A].accumulate(o,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let o=i.evaluate(e)[0];t*=o,e>i.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let o=i.evaluate(e)[0];t*=o,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,o=this.time+e,a=this._loopCount,l=i===$P;if(e===0)return a===-1?o:l&&(a&1)===1?t-o:o;if(i===JP){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),o>=t||o<0){let c=Math.floor(o/t);o-=t*c,a+=Math.abs(c);let u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){let h=e<0;this._setEndings(h,!h,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=o;if(l&&(a&1)===1)return t-o}return o}_setEndings(e,t,i){let o=this._interpolantSettings;i?(o.endingStart=Mc,o.endingEnd=Mc):(e?o.endingStart=this.zeroSlopeAtStart?Mc:Ic:o.endingStart=vd,t?o.endingEnd=this.zeroSlopeAtEnd?Mc:Ic:o.endingEnd=vd)}_scheduleFading(e,t,i){let o=this._mixer,a=o.time,l=this._weightInterpolant;l===null&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);let c=l.parameterPositions,u=l.sampleValues;return c[0]=a,u[0]=t,c[1]=a+e,u[1]=i,this}},Uj=new Float32Array(1),Yc=class extends Ji{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,o=e._clip.tracks,a=o.length,l=e._propertyBindings,c=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName,A=h[u];A===void 0&&(A={},h[u]=A);for(let f=0;f!==a;++f){let d=o[f],p=d.name,m=A[p];if(m!==void 0)++m.referenceCount,l[f]=m;else{if(m=l[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,u,p));continue}let b=t&&t._propertyBindings[f].binding.parsedPath;m=new My(Lt.create(i,p,b),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,u,p),l[f]=m}c[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,o=e._clip.uuid,a=this._actionsByClip[o];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,o,i)}let t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){let a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){let a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let o=this._actions,a=this._actionsByClip,l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{let c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=o.length,o.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],o=e._cacheIndex;i._cacheIndex=o,t[o]=i,t.pop(),e._cacheIndex=null;let a=e._clip.uuid,l=this._actionsByClip,c=l[a],u=c.knownActions,h=u[u.length-1],A=e._byClipCacheIndex;h._byClipCacheIndex=A,u[A]=h,u.pop(),e._byClipCacheIndex=null;let f=c.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],u.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){let a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,o=this._nActiveActions++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,o=--this._nActiveActions,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){let o=this._bindingsByRootAndName,a=this._bindings,l=o[t];l===void 0&&(l={},o[t]=l),l[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,o=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,c=l[o],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete c[a],Object.keys(c).length===0&&delete l[o]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,o=this._nActiveBindings++,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,o=--this._nActiveBindings,a=t[o];e._cacheIndex=o,t[o]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new Qd(new Float32Array(2),new Float32Array(2),1,Uj),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,o=--this._nActiveControlInterpolants,a=t[o];e.__cacheIndex=o,t[o]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){let o=t||this._root,a=o.uuid,l=typeof e=="string"?Os.findByName(o,e):e,c=l!==null?l.uuid:e,u=this._actionsByClip[c],h=null;if(i===void 0&&(l!==null?i=l.blendMode:i=ky),u!==void 0){let f=u.actionByRoot[a];if(f!==void 0&&f.blendMode===i)return f;h=u.knownActions[0],l===null&&(l=h._clip)}if(l===null)return null;let A=new Ty(this,l,t,i);return this._bindAction(A,h),this._addInactiveAction(A,c,a),A}existingAction(e,t){let i=t||this._root,o=i.uuid,a=typeof e=="string"?Os.findByName(i,e):e,l=a?a.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[o]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,o=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(o,e,a,l);let c=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)c[h].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,o=this._actionsByClip,a=o[i];if(a!==void 0){let l=a.knownActions;for(let c=0,u=l.length;c!==u;++c){let h=l[c];this._deactivateAction(h);let A=h._cacheIndex,f=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,f._cacheIndex=A,t[A]=f,t.pop(),this._removeInactiveBindingsForAction(h)}delete o[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let l in i){let c=i[l].actionByRoot,u=c[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}let o=this._bindingsByRootAndName,a=o[t];if(a!==void 0)for(let l in a){let c=a[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},yE=class n{constructor(e){this.value=e}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},Oj=0,vE=class extends Ji{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Oj++}),this.name="",this.usage=wd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let i=0,o=t.length;i<o;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}},Xd=class extends hr{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},wE=class{constructor(e,t,i,o,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=o,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},Yd=class{constructor(e,t,i=0,o=1/0){this.ray=new cr(e,t),this.near=i,this.far=o,this.camera=null,this.layers=new Th,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return bE(e,this,i,t),i.sort(aP),i}intersectObjects(e,t=!0,i=[]){for(let o=0,a=e.length;o<a;o++)bE(e[o],this,i,t);return i.sort(aP),i}};function aP(n,e){return n.distance-e.distance}function bE(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){let o=n.children;for(let a=0,l=o.length;a<l;a++)bE(o[a],e,t,!0)}}var vl=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},xE=class{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}},lP=new he,CE=class{constructor(e=new he(1/0,1/0),t=new he(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=lP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},cP=new U,B0=new U,Rn=class{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){cP.subVectors(e,this.start),B0.subVectors(this.end,this.start);let i=B0.dot(B0),a=B0.dot(cP)/i;return t&&(a=Mn(a,0,1)),a}closestPointToPoint(e,t,i){let o=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},uP=new U,SE=class extends mt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new Ke,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,u=32;l<u;l++,c++){let h=l/u*Math.PI*2,A=c/u*Math.PI*2;o.push(Math.cos(h),Math.sin(h),1,Math.cos(A),Math.sin(A),1)}i.setAttribute("position",new Ve(o,3));let a=new bn({fog:!1,toneMapped:!1});this.cone=new fi(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),uP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},tl=new U,k0=new ke,tS=new ke,EE=class extends fi{constructor(e){let t=M3(e),i=new Ke,o=[],a=[],l=new De(0,0,1),c=new De(0,1,0);for(let h=0;h<t.length;h++){let A=t[h];A.parent&&A.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),a.push(l.r,l.g,l.b),a.push(c.r,c.g,c.b))}i.setAttribute("position",new Ve(o,3)),i.setAttribute("color",new Ve(a,3));let u=new bn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,i=this.geometry,o=i.getAttribute("position");tS.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){let c=t[a];c.parent&&c.parent.isBone&&(k0.multiplyMatrices(tS,c.matrixWorld),tl.setFromMatrixPosition(k0),o.setXYZ(l,tl.x,tl.y,tl.z),k0.multiplyMatrices(tS,c.parent.matrixWorld),tl.setFromMatrixPosition(k0),o.setXYZ(l+1,tl.x,tl.y,tl.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function M3(n){let e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,M3(n.children[t]));return e}var IE=class extends He{constructor(e,t,i){let o=new Hc(t,4,2),a=new Nt({wireframe:!0,fog:!1,toneMapped:!1});super(o,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Qj=new U,hP=new De,AP=new De,ME=class extends mt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";let o=new Od(t);o.rotateY(Math.PI*.5),this.material=new Nt({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let a=o.getAttribute("position"),l=new Float32Array(a.count*3);o.setAttribute("color",new $e(l,3)),this.add(new He(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");hP.copy(this.light.color),AP.copy(this.light.groundColor);for(let i=0,o=t.count;i<o;i++){let a=i<o/2?hP:AP;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Qj.setFromMatrixPosition(this.light.matrixWorld).negate())}},TE=class extends fi{constructor(e=10,t=10,i=4473924,o=8947848){i=new De(i),o=new De(o);let a=t/2,l=e/t,c=e/2,u=[],h=[];for(let d=0,p=0,m=-c;d<=t;d++,m+=l){u.push(-c,0,m,c,0,m),u.push(m,0,-c,m,0,c);let b=d===a?i:o;b.toArray(h,p),p+=3,b.toArray(h,p),p+=3,b.toArray(h,p),p+=3,b.toArray(h,p),p+=3}let A=new Ke;A.setAttribute("position",new Ve(u,3)),A.setAttribute("color",new Ve(h,3));let f=new bn({vertexColors:!0,toneMapped:!1});super(A,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},_E=class extends fi{constructor(e=10,t=16,i=8,o=64,a=4473924,l=8947848){a=new De(a),l=new De(l);let c=[],u=[];if(t>1)for(let f=0;f<t;f++){let d=f/t*(Math.PI*2),p=Math.sin(d)*e,m=Math.cos(d)*e;c.push(0,0,0),c.push(p,0,m);let b=f&1?a:l;u.push(b.r,b.g,b.b),u.push(b.r,b.g,b.b)}for(let f=0;f<i;f++){let d=f&1?a:l,p=e-e/i*f;for(let m=0;m<o;m++){let b=m/o*(Math.PI*2),g=Math.sin(b)*p,w=Math.cos(b)*p;c.push(g,0,w),u.push(d.r,d.g,d.b),b=(m+1)/o*(Math.PI*2),g=Math.sin(b)*p,w=Math.cos(b)*p,c.push(g,0,w),u.push(d.r,d.g,d.b)}}let h=new Ke;h.setAttribute("position",new Ve(c,3)),h.setAttribute("color",new Ve(u,3));let A=new bn({vertexColors:!0,toneMapped:!1});super(h,A),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},fP=new U,P0=new U,dP=new U,DE=class extends mt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let o=new Ke;o.setAttribute("position",new Ve([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let a=new bn({fog:!1,toneMapped:!1});this.lightPlane=new Ar(o,a),this.add(this.lightPlane),o=new Ke,o.setAttribute("position",new Ve([0,0,0,0,0,1],3)),this.targetLine=new Ar(o,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fP.setFromMatrixPosition(this.light.matrixWorld),P0.setFromMatrixPosition(this.light.target.matrixWorld),dP.subVectors(P0,fP),this.lightPlane.lookAt(P0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(P0),this.targetLine.scale.z=dP.length()}},N0=new U,In=new Dh,RE=class extends fi{constructor(e){let t=new Ke,i=new bn({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(m,b){u(m),u(b)}function u(m){o.push(0,0,0),a.push(0,0,0),l[m]===void 0&&(l[m]=[]),l[m].push(o.length/3-1)}t.setAttribute("position",new Ve(o,3)),t.setAttribute("color",new Ve(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();let h=new De(16755200),A=new De(16711680),f=new De(43775),d=new De(16777215),p=new De(3355443);this.setColors(h,A,f,d,p)}setColors(e,t,i,o,a){let c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,o.r,o.g,o.b),c.setXYZ(39,o.r,o.g,o.b),c.setXYZ(40,a.r,a.g,a.b),c.setXYZ(41,a.r,a.g,a.b),c.setXYZ(42,a.r,a.g,a.b),c.setXYZ(43,a.r,a.g,a.b),c.setXYZ(44,a.r,a.g,a.b),c.setXYZ(45,a.r,a.g,a.b),c.setXYZ(46,a.r,a.g,a.b),c.setXYZ(47,a.r,a.g,a.b),c.setXYZ(48,a.r,a.g,a.b),c.setXYZ(49,a.r,a.g,a.b),c.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,o=1;In.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Un("c",t,e,In,0,0,-1),Un("t",t,e,In,0,0,1),Un("n1",t,e,In,-i,-o,-1),Un("n2",t,e,In,i,-o,-1),Un("n3",t,e,In,-i,o,-1),Un("n4",t,e,In,i,o,-1),Un("f1",t,e,In,-i,-o,1),Un("f2",t,e,In,i,-o,1),Un("f3",t,e,In,-i,o,1),Un("f4",t,e,In,i,o,1),Un("u1",t,e,In,i*.7,o*1.1,-1),Un("u2",t,e,In,-i*.7,o*1.1,-1),Un("u3",t,e,In,0,o*2,-1),Un("cf1",t,e,In,-i,0,1),Un("cf2",t,e,In,i,0,1),Un("cf3",t,e,In,0,-o,1),Un("cf4",t,e,In,0,o,1),Un("cn1",t,e,In,-i,0,-1),Un("cn2",t,e,In,i,0,-1),Un("cn3",t,e,In,0,-o,-1),Un("cn4",t,e,In,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Un(n,e,t,i,o,a,l){N0.set(o,a,l).unproject(i);let c=e[n];if(c!==void 0){let u=t.getAttribute("position");for(let h=0,A=c.length;h<A;h++)u.setXYZ(c[h],N0.x,N0.y,N0.z)}}var F0=new Ht,LE=class extends fi{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),a=new Ke;a.setIndex(new $e(i,1)),a.setAttribute("position",new $e(o,3)),super(a,new bn({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&F0.setFromObject(this.object),F0.isEmpty())return;let t=F0.min,i=F0.max,o=this.geometry.attributes.position,a=o.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=t.x,a[4]=i.y,a[5]=i.z,a[6]=t.x,a[7]=t.y,a[8]=i.z,a[9]=i.x,a[10]=t.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=t.z,a[15]=t.x,a[16]=i.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=i.x,a[22]=t.y,a[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BE=class extends fi{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Ke;a.setIndex(new $e(i,1)),a.setAttribute("position",new Ve(o,3)),super(a,new bn({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},kE=class extends Ar{constructor(e,t=1,i=16776960){let o=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Ke;l.setAttribute("position",new Ve(a,3)),l.computeBoundingSphere(),super(l,new bn({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Ke;u.setAttribute("position",new Ve(c,3)),u.computeBoundingSphere(),this.add(new He(u,new Nt({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},pP=new U,U0,nS,PE=class extends mt{constructor(e=new U(0,0,1),t=new U(0,0,0),i=1,o=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",U0===void 0&&(U0=new Ke,U0.setAttribute("position",new Ve([0,0,0,0,1,0],3)),nS=new Nr(0,.5,1,5,1),nS.translate(0,-.5,0)),this.position.copy(t),this.line=new Ar(U0,new bn({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new He(nS,new Nt({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{pP.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(pP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},NE=class extends fi{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Ke;o.setAttribute("position",new Ve(t,3)),o.setAttribute("color",new Ve(i,3));let a=new bn({vertexColors:!0,toneMapped:!1});super(o,a),this.type="AxesHelper"}setColors(e,t,i){let o=new De,a=this.geometry.attributes.color.array;return o.set(e),o.toArray(a,0),o.toArray(a,3),o.set(t),o.toArray(a,6),o.toArray(a,9),o.set(i),o.toArray(a,12),o.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},FE=class{constructor(){this.type="ShapePath",this.color=new De,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,o){return this.currentPath.quadraticCurveTo(e,t,i,o),this}bezierCurveTo(e,t,i,o,a,l){return this.currentPath.bezierCurveTo(e,t,i,o,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){let I=[];for(let v=0,C=w.length;v<C;v++){let E=w[v],S=new aa;S.curves=E.curves,I.push(S)}return I}function i(w,I){let v=I.length,C=!1;for(let E=v-1,S=0;S<v;E=S++){let M=I[E],_=I[S],T=_.x-M.x,D=_.y-M.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(M=I[S],T=-T,_=I[E],D=-D),w.y<M.y||w.y>_.y)continue;if(w.y===M.y){if(w.x===M.x)return!0}else{let R=D*(w.x-M.x)-T*(w.y-M.y);if(R===0)return!0;if(R<0)continue;C=!C}}else{if(w.y!==M.y)continue;if(_.x<=w.x&&w.x<=M.x||M.x<=w.x&&w.x<=_.x)return!0}}return C}let o=wo.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,c,u,h=[];if(a.length===1)return c=a[0],u=new aa,u.curves=c.curves,h.push(u),h;let A=!o(a[0].getPoints());A=e?!A:A;let f=[],d=[],p=[],m=0,b;d[m]=void 0,p[m]=[];for(let w=0,I=a.length;w<I;w++)c=a[w],b=c.getPoints(),l=o(b),l=e?!l:l,l?(!A&&d[m]&&m++,d[m]={s:new aa,p:b},d[m].s.curves=c.curves,A&&m++,p[m]=[]):p[m].push({h:c,p:b[0]});if(!d[0])return t(a);if(d.length>1){let w=!1,I=0;for(let v=0,C=d.length;v<C;v++)f[v]=[];for(let v=0,C=d.length;v<C;v++){let E=p[v];for(let S=0;S<E.length;S++){let M=E[S],_=!0;for(let T=0;T<d.length;T++)i(M.p,d[T].p)&&(v!==T&&I++,_?(_=!1,f[T].push(M)):w=!0);_&&f[v].push(M)}}I>0&&w===!1&&(p=f)}let g;for(let w=0,I=d.length;w<I;w++){u=d[w].s,h.push(u),g=p[w];for(let v=0,C=g.length;v<C;v++)u.holes.push(g[v].h)}return h}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_y}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_y);var KI={};ho(KI,{badroty:()=>XJ,bindbutton:()=>lq,campos:()=>WI,camstatus:()=>hN,camto:()=>aN,chain:()=>OJ,default:()=>Mi,elt:()=>eN,exports:()=>cq,fbx:()=>eq,filter:()=>NJ,getdatauri:()=>nq,gltf:()=>np,gltf0:()=>$J,gltfdraco:()=>cN,grow:()=>nN,ld:()=>sN,ldmodule:()=>KJ,linear:()=>FJ,loadjs:()=>dN,log:()=>YI,lookat:()=>oN,lookto:()=>tp,lookto0:()=>jJ,map:()=>PJ,mk:()=>uq,objload:()=>sq,pos:()=>GJ,postimg:()=>rq,pp:()=>JJ,putimg:()=>iq,quat:()=>QJ,rot:()=>XI,roty:()=>rN,rroty:()=>YJ,runcamstatus:()=>oq,setstatus:()=>pN,sgltf:()=>uN,sleep:()=>ZJ,slide:()=>tN,throttle:()=>hq,timingloop:()=>tq,togglefullscreen:()=>qh,togglefullscreen0:()=>lN,toquat:()=>iN,tweenrunning:()=>UJ,tweenupdate:()=>$3,vec3:()=>Gr,vidbox:()=>jy,videotexture:()=>AN,wireframe:()=>fN,xhr:()=>qJ,xhrpost:()=>ZI,ygrow:()=>VJ});var T3=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Gj=function(n){return new Worker(n)};try{URL.revokeObjectURL(T3(""))}catch{T3=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},Gj=function(e){return new Worker(e,{type:"module"})}}var hs=Uint8Array,xl=Uint16Array,aI=Uint32Array,_3=new hs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D3=new hs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zj=new hs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R3=function(n,e){for(var t=new xl(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var o=new aI(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)o[a]=a-t[i]<<5|i;return[t,o]},L3=R3(_3,2),B3=L3[0],Hj=L3[1];B3[28]=258,Hj[258]=28;var k3=R3(D3,0),Vj=k3[0],yge=k3[1],lI=new xl(32768);for(Zt=0;Zt<32768;++Zt)ma=(Zt&43690)>>>1|(Zt&21845)<<1,ma=(ma&52428)>>>2|(ma&13107)<<2,ma=(ma&61680)>>>4|(ma&3855)<<4,lI[Zt]=((ma&65280)>>>8|(ma&255)<<8)>>>1;var ma,Zt,Jd=function(n,e,t){for(var i=n.length,o=0,a=new xl(e);o<i;++o)++a[n[o]-1];var l=new xl(e);for(o=0;o<e;++o)l[o]=l[o-1]+a[o-1]<<1;var c;if(t){c=new xl(1<<e);var u=15-e;for(o=0;o<i;++o)if(n[o])for(var h=o<<4|n[o],A=e-n[o],f=l[n[o]-1]++<<A,d=f|(1<<A)-1;f<=d;++f)c[lI[f]>>>u]=h}else for(c=new xl(i),o=0;o<i;++o)n[o]&&(c[o]=lI[l[n[o]-1]++]>>>15-n[o]);return c},qd=new hs(288);for(Zt=0;Zt<144;++Zt)qd[Zt]=8;var Zt;for(Zt=144;Zt<256;++Zt)qd[Zt]=9;var Zt;for(Zt=256;Zt<280;++Zt)qd[Zt]=7;var Zt;for(Zt=280;Zt<288;++Zt)qd[Zt]=8;var Zt,P3=new hs(32);for(Zt=0;Zt<32;++Zt)P3[Zt]=5;var Zt;var Wj=Jd(qd,9,1);var Xj=Jd(P3,5,1),sI=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Hs=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},oI=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Yj=function(n){return(n/8|0)+(n&7&&1)},Zj=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof xl?xl:n instanceof aI?aI:hs)(t-e);return i.set(n.subarray(e,t)),i},Kj=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new hs(0);var o=!e||t,a=!t||t.i;t||(t={}),e||(e=new hs(i*3));var l=function(se){var oe=e.length;if(se>oe){var le=new hs(Math.max(oe*2,se));le.set(e),e=le}},c=t.f||0,u=t.p||0,h=t.b||0,A=t.l,f=t.d,d=t.m,p=t.n,m=i*8;do{if(!A){t.f=c=Hs(n,u,1);var b=Hs(n,u+1,3);if(u+=3,b)if(b==1)A=Wj,f=Xj,d=9,p=5;else if(b==2){var v=Hs(n,u,31)+257,C=Hs(n,u+10,15)+4,E=v+Hs(n,u+5,31)+1;u+=14;for(var S=new hs(E),M=new hs(19),_=0;_<C;++_)M[zj[_]]=Hs(n,u+_*3,7);u+=C*3;for(var T=sI(M),D=(1<<T)-1,R=Jd(M,T,1),_=0;_<E;){var B=R[Hs(n,u,D)];u+=B&15;var g=B>>>4;if(g<16)S[_++]=g;else{var P=0,F=0;for(g==16?(F=3+Hs(n,u,3),u+=2,P=S[_-1]):g==17?(F=3+Hs(n,u,7),u+=3):g==18&&(F=11+Hs(n,u,127),u+=7);F--;)S[_++]=P}}var z=S.subarray(0,v),Q=S.subarray(v);d=sI(z),p=sI(Q),A=Jd(z,d,1),f=Jd(Q,p,1)}else throw"invalid block type";else{var g=Yj(u)+4,w=n[g-4]|n[g-3]<<8,I=g+w;if(I>i){if(a)throw"unexpected EOF";break}o&&l(h+w),e.set(n.subarray(g,I),h),t.b=h+=w,t.p=u=I*8;continue}if(u>m){if(a)throw"unexpected EOF";break}}o&&l(h+131072);for(var V=(1<<d)-1,G=(1<<p)-1,O=u;;O=u){var P=A[oI(n,u)&V],W=P>>>4;if(u+=P&15,u>m){if(a)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(W<256)e[h++]=W;else if(W==256){O=u,A=null;break}else{var k=W-254;if(W>264){var _=W-257,Y=_3[_];k=Hs(n,u,(1<<Y)-1)+B3[_],u+=Y}var te=f[oI(n,u)&G],ie=te>>>4;if(!te)throw"invalid distance";u+=te&15;var Q=Vj[ie];if(ie>3){var Y=D3[ie];Q+=oI(n,u)&(1<<Y)-1,u+=Y}if(u>m){if(a)throw"unexpected EOF";break}o&&l(h+131072);for(var re=h+k;h<re;h+=4)e[h]=e[h-Q],e[h+1]=e[h+1-Q],e[h+2]=e[h+2-Q],e[h+3]=e[h+3-Q];h=re}}t.l=A,t.p=O,t.b=h,A&&(c=1,t.m=d,t.d=f,t.n=p)}while(!c);return h==e.length?e:Zj(e,0,h)};var jj=new hs(0);var Jj=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function N3(n,e){return Kj((Jj(n),n.subarray(2,-4)),e)}var qj=typeof TextDecoder<"u"&&new TextDecoder,$j=0;try{qj.decode(jj,{stream:!0}),$j=1}catch{}function F3(n,e,t){let i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let o=n,a=i,l=Math.floor((o+a)/2);for(;e<t[l]||e>=t[l+1];)e<t[l]?a=l:o=l,l=Math.floor((o+a)/2);return l}function tJ(n,e,t,i){let o=[],a=[],l=[];o[0]=1;for(let c=1;c<=t;++c){a[c]=e-i[n+1-c],l[c]=i[n+c]-e;let u=0;for(let h=0;h<c;++h){let A=l[h+1],f=a[c-h],d=o[h]/(A+f);o[h]=u+A*d,u=f*d}o[c]=u}return o}function U3(n,e,t,i){let o=F3(n,i,e),a=tJ(o,i,n,e),l=new pt(0,0,0,0);for(let c=0;c<=n;++c){let u=t[o-n+c],h=a[c],A=u.w*h;l.x+=u.x*A,l.y+=u.y*A,l.z+=u.z*A,l.w+=u.w*h}return l}function nJ(n,e,t,i,o){let a=[];for(let f=0;f<=t;++f)a[f]=0;let l=[];for(let f=0;f<=i;++f)l[f]=a.slice(0);let c=[];for(let f=0;f<=t;++f)c[f]=a.slice(0);c[0][0]=1;let u=a.slice(0),h=a.slice(0);for(let f=1;f<=t;++f){u[f]=e-o[n+1-f],h[f]=o[n+f]-e;let d=0;for(let p=0;p<f;++p){let m=h[p+1],b=u[f-p];c[f][p]=m+b;let g=c[p][f-1]/c[f][p];c[p][f]=d+m*g,d=b*g}c[f][f]=d}for(let f=0;f<=t;++f)l[0][f]=c[f][t];for(let f=0;f<=t;++f){let d=0,p=1,m=[];for(let b=0;b<=t;++b)m[b]=a.slice(0);m[0][0]=1;for(let b=1;b<=i;++b){let g=0,w=f-b,I=t-b;f>=b&&(m[p][0]=m[d][0]/c[I+1][w],g=m[p][0]*c[w][I]);let v=w>=-1?1:-w,C=f-1<=I?b-1:t-f;for(let S=v;S<=C;++S)m[p][S]=(m[d][S]-m[d][S-1])/c[I+1][w+S],g+=m[p][S]*c[w+S][I];f<=I&&(m[p][b]=-m[d][b-1]/c[I+1][f],g+=m[p][b]*c[f][I]),l[b][f]=g;let E=d;d=p,p=E}}let A=t;for(let f=1;f<=i;++f){for(let d=0;d<=t;++d)l[f][d]*=A;A*=t-f}return l}function iJ(n,e,t,i,o){let a=o<n?o:n,l=[],c=F3(n,i,e),u=nJ(c,i,n,a,e),h=[];for(let A=0;A<t.length;++A){let f=t[A].clone(),d=f.w;f.x*=d,f.y*=d,f.z*=d,h[A]=f}for(let A=0;A<=a;++A){let f=h[c-n].clone().multiplyScalar(u[A][0]);for(let d=1;d<=n;++d)f.add(h[c-n+d].clone().multiplyScalar(u[A][d]));l[A]=f}for(let A=a+1;A<=o+1;++A)l[A]=new pt(0,0,0);return l}function rJ(n,e){let t=1;for(let o=2;o<=n;++o)t*=o;let i=1;for(let o=2;o<=e;++o)i*=o;for(let o=2;o<=n-e;++o)i*=o;return t/i}function sJ(n){let e=n.length,t=[],i=[];for(let a=0;a<e;++a){let l=n[a];t[a]=new U(l.x,l.y,l.z),i[a]=l.w}let o=[];for(let a=0;a<e;++a){let l=t[a].clone();for(let c=1;c<=a;++c)l.sub(o[a-c].clone().multiplyScalar(rJ(a,c)*i[c]));o[a]=l.divideScalar(i[0])}return o}function O3(n,e,t,i,o){let a=iJ(n,e,t,i,o);return sJ(a)}var Uy=class extends qi{constructor(e,t,i,o,a){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=o||0,this.endKnot=a||this.knots.length-1;for(let l=0;l<i.length;++l){let c=i[l];this.controlPoints[l]=new pt(c.x,c.y,c.z,c.w)}}getPoint(e,t=new U){let i=t,o=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=U3(this.degree,this.knots,this.controlPoints,o);return a.w!==1&&a.divideScalar(a.w),i.set(a.x,a.y,a.z)}getTangent(e,t=new U){let i=t,o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=O3(this.degree,this.knots,this.controlPoints,o,1);return i.copy(a[1]).normalize(),i}};var Dt,Hn,dr,Qy=class extends pn{constructor(e){super(e)}load(e,t,i,o){let a=this,l=a.path===""?Gs.extractUrlBase(e):a.path,c=new si(this.manager);c.setPath(a.path),c.setResponseType("arraybuffer"),c.setRequestHeader(a.requestHeader),c.setWithCredentials(a.withCredentials),c.load(e,function(u){try{t(a.parse(u,l))}catch(h){o?o(h):console.error(h),a.manager.itemError(e)}},i,o)}parse(e,t){if(aJ(e))Dt=new pI().parse(e);else{let o=V3(e);if(!lJ(o))throw new Error("THREE.FBXLoader: Unknown format.");if(Q3(o)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Q3(o));Dt=new dI().parse(o)}let i=new pa(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new hI(i,this.manager).parse(Dt)}},hI=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Hn=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),o=this.parseDeformers(),a=new AI().parse(o);return this.parseScene(o,a,i),dr}parseConnections(){let e=new Map;return"Connections"in Dt&&Dt.Connections.connections.forEach(function(i){let o=i[0],a=i[1],l=i[2];e.has(o)||e.set(o,{parents:[],children:[]});let c={ID:a,relationship:l};e.get(o).parents.push(c),e.has(a)||e.set(a,{parents:[],children:[]});let u={ID:o,relationship:l};e.get(a).children.push(u)}),e}parseImages(){let e={},t={};if("Video"in Dt.Objects){let i=Dt.Objects.Video;for(let o in i){let a=i[o],l=parseInt(o);if(e[l]=a.RelativeFilename||a.Filename,"Content"in a){let c=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,u=typeof a.Content=="string"&&a.Content!=="";if(c||u){let h=this.parseImage(i[o]);t[a.RelativeFilename||a.Filename]=h}}}}for(let i in e){let o=e[i];t[o]!==void 0?e[i]=t[o]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){let t=e.Content,i=e.RelativeFilename||e.Filename,o=i.slice(i.lastIndexOf(".")+1).toLowerCase(),a;switch(o){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if(typeof t=="string")return"data:"+a+";base64,"+t;{let l=new Uint8Array(t);return window.URL.createObjectURL(new Blob([l],{type:a}))}}parseTextures(e){let t=new Map;if("Texture"in Dt.Objects){let i=Dt.Objects.Texture;for(let o in i){let a=this.parseTexture(i[o],e);t.set(parseInt(o),a)}}return t}parseTexture(e,t){let i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;let o=e.WrapModeU,a=e.WrapModeV,l=o!==void 0?o.value:0,c=a!==void 0?a.value:0;if(i.wrapS=l===0?ji:Qn,i.wrapT=c===0?ji:Qn,"Scaling"in e){let u=e.Scaling.value;i.repeat.x=u[0],i.repeat.y=u[1]}if("Translation"in e){let u=e.Translation.value;i.offset.x=u[0],i.offset.y=u[1]}return i}loadTexture(e,t){let i,o=this.textureLoader.path,a=Hn.get(e.id).children;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(i=t[a[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let l,c=e.FileName.slice(-3).toLowerCase();if(c==="tga"){let u=this.manager.getHandler(".tga");u===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),l=new jt):(u.setPath(this.textureLoader.path),l=u.load(i))}else c==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),l=new jt):l=this.textureLoader.load(i);return this.textureLoader.setPath(o),l}parseMaterials(e){let t=new Map;if("Material"in Dt.Objects){let i=Dt.Objects.Material;for(let o in i){let a=this.parseMaterial(i[o],e);a!==null&&t.set(parseInt(o),a)}}return t}parseMaterial(e,t){let i=e.id,o=e.attrName,a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!Hn.has(i))return null;let l=this.parseParameters(e,t,i),c;switch(a.toLowerCase()){case"phong":c=new fr;break;case"lambert":c=new Gh;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),c=new fr;break}return c.setValues(l),c.name=o,c}parseParameters(e,t,i){let o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=new De().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(o.color=new De().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=new De().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(o.emissive=new De().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=new De().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(o.specular=new De().fromArray(e.SpecularColor.value).convertSRGBToLinear());let a=this;return Hn.get(i).children.forEach(function(l){let c=l.relationship;switch(c){case"Bump":o.bumpMap=a.getTexture(t,l.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(t,l.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(t,l.ID),o.map!==void 0&&(o.map.colorSpace=it);break;case"DisplacementColor":o.displacementMap=a.getTexture(t,l.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(t,l.ID),o.emissiveMap!==void 0&&(o.emissiveMap.colorSpace=it);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(t,l.ID);break;case"ReflectionColor":o.envMap=a.getTexture(t,l.ID),o.envMap!==void 0&&(o.envMap.mapping=ca,o.envMap.colorSpace=it);break;case"SpecularColor":o.specularMap=a.getTexture(t,l.ID),o.specularMap!==void 0&&(o.specularMap.colorSpace=it);break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(t,l.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",c);break}}),o}getTexture(e,t){return"LayeredTexture"in Dt.Objects&&t in Dt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Hn.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in Dt.Objects){let i=Dt.Objects.Deformer;for(let o in i){let a=i[o],l=Hn.get(parseInt(o));if(a.attrType==="Skin"){let c=this.parseSkeleton(l,i);c.ID=o,l.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=l.parents[0].ID,e[o]=c}else if(a.attrType==="BlendShape"){let c={id:o};c.rawTargets=this.parseMorphTargets(l,i),c.id=o,l.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[o]=c}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let i=[];return e.children.forEach(function(o){let a=t[o.ID];if(a.attrType!=="Cluster")return;let l={ID:o.ID,indices:[],weights:[],transformLink:new ke().fromArray(a.TransformLink.a)};"Indexes"in a&&(l.indices=a.Indexes.a,l.weights=a.Weights.a),i.push(l)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){let i=[];for(let o=0;o<e.children.length;o++){let a=e.children[o],l=t[a.ID],c={name:l.attrName,initialWeight:l.DeformPercent,id:l.id,fullWeights:l.FullWeights.a};if(l.attrType!=="BlendShapeChannel")return;c.geoID=Hn.get(parseInt(a.ID)).children.filter(function(u){return u.relationship===void 0})[0].ID,i.push(c)}return i}parseScene(e,t,i){dr=new Yt;let o=this.parseModels(e.skeletons,t,i),a=Dt.Objects.Model,l=this;o.forEach(function(u){let h=a[u.ID];l.setLookAtProperties(u,h),Hn.get(u.ID).parents.forEach(function(f){let d=o.get(f.ID);d!==void 0&&d.add(u)}),u.parent===null&&dr.add(u)}),this.bindSkeleton(e.skeletons,t,o),this.createAmbientLight(),dr.traverse(function(u){if(u.userData.transformData){u.parent&&(u.userData.transformData.parentMatrix=u.parent.matrix,u.userData.transformData.parentMatrixWorld=u.parent.matrixWorld);let h=z3(u.userData.transformData);u.applyMatrix4(h),u.updateWorldMatrix()}});let c=new fI().parse();dr.children.length===1&&dr.children[0].isGroup&&(dr.children[0].animations=c,dr=dr.children[0]),dr.animations=c}parseModels(e,t,i){let o=new Map,a=Dt.Objects.Model;for(let l in a){let c=parseInt(l),u=a[l],h=Hn.get(c),A=this.buildSkeleton(h,e,c,u.attrName);if(!A){switch(u.attrType){case"Camera":A=this.createCamera(h);break;case"Light":A=this.createLight(h);break;case"Mesh":A=this.createMesh(h,t,i);break;case"NurbsCurve":A=this.createCurve(h,t);break;case"LimbNode":case"Root":A=new bo;break;case"Null":default:A=new Yt;break}A.name=u.attrName?Lt.sanitizeNodeName(u.attrName):"",A.ID=c}this.getTransformData(A,u),o.set(c,A)}return o}buildSkeleton(e,t,i,o){let a=null;return e.parents.forEach(function(l){for(let c in t){let u=t[c];u.rawBones.forEach(function(h,A){if(h.ID===l.ID){let f=a;a=new bo,a.matrixWorld.copy(h.transformLink),a.name=o?Lt.sanitizeNodeName(o):"",a.ID=i,u.bones[A]=a,f!==null&&a.add(f)}})}}),a}createCamera(e){let t,i;if(e.children.forEach(function(o){let a=Dt.Objects.NodeAttribute[o.ID];a!==void 0&&(i=a)}),i===void 0)t=new mt;else{let o=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(o=1);let a=1;i.NearPlane!==void 0&&(a=i.NearPlane.value/1e3);let l=1e3;i.FarPlane!==void 0&&(l=i.FarPlane.value/1e3);let c=window.innerWidth,u=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(c=i.AspectWidth.value,u=i.AspectHeight.value);let h=c/u,A=45;i.FieldOfView!==void 0&&(A=i.FieldOfView.value);let f=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:t=new rn(A,h,a,l),f!==null&&t.setFocalLength(f);break;case 1:t=new Ui(-c/2,c/2,u/2,-u/2,a,l);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),t=new mt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(o){let a=Dt.Objects.NodeAttribute[o.ID];a!==void 0&&(i=a)}),i===void 0)t=new mt;else{let o;i.LightType===void 0?o=0:o=i.LightType.value;let a=16777215;i.Color!==void 0&&(a=new De().fromArray(i.Color.value).convertSRGBToLinear());let l=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(l=0);let c=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?c=0:c=i.FarAttenuationEnd.value);let u=1;switch(o){case 0:t=new Qs(a,l,c,u);break;case 1:t=new Or(a,l);break;case 2:let h=Math.PI/3;i.InnerAngle!==void 0&&(h=Jt.degToRad(i.InnerAngle.value));let A=0;i.OuterAngle!==void 0&&(A=Jt.degToRad(i.OuterAngle.value),A=Math.max(A,1)),t=new pl(a,l,c,h,A,u);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Qs(a,l);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let o,a=null,l=null,c=[];return e.children.forEach(function(u){t.has(u.ID)&&(a=t.get(u.ID)),i.has(u.ID)&&c.push(i.get(u.ID))}),c.length>1?l=c:c.length>0?l=c[0]:(l=new fr({name:pn.DEFAULT_MATERIAL_NAME,color:13421772}),c.push(l)),"color"in a.attributes&&c.forEach(function(u){u.vertexColors=!0}),a.FBX_Deformer?(o=new cl(a,l),o.normalizeSkinWeights()):o=new He(a,l),o}createCurve(e,t){let i=e.children.reduce(function(a,l){return t.has(l.ID)&&(a=t.get(l.ID)),a},null),o=new bn({name:pn.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Ar(i,o)}getTransformData(e,t){let i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=H3(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Hn.get(e.ID).children.forEach(function(o){if(o.relationship==="LookAtProperty"){let a=Dt.Objects.Model[o.ID];if("Lcl_Translation"in a){let l=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(l),dr.add(e.target)):e.lookAt(new U().fromArray(l))}}})}bindSkeleton(e,t,i){let o=this.parsePoseNodes();for(let a in e){let l=e[a];Hn.get(parseInt(l.ID)).parents.forEach(function(u){if(t.has(u.ID)){let h=u.ID;Hn.get(h).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new ul(l.bones),o[f.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in Dt.Objects){let t=Dt.Objects.Pose;for(let i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){let o=t[i].PoseNode;Array.isArray(o)?o.forEach(function(a){e[a.Node]=new ke().fromArray(a.Matrix.a)}):e[o.Node]=new ke().fromArray(o.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Dt&&"AmbientColor"in Dt.GlobalSettings){let e=Dt.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],o=e[2];if(t!==0||i!==0||o!==0){let a=new De(t,i,o).convertSRGBToLinear();dr.add(new ml(a,1))}}}},AI=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in Dt.Objects){let i=Dt.Objects.Geometry;for(let o in i){let a=Hn.get(parseInt(o)),l=this.parseGeometry(a,i[o],e);t.set(parseInt(o),l)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){let o=i.skeletons,a=[],l=e.parents.map(function(f){return Dt.Objects.Model[f.ID]});if(l.length===0)return;let c=e.children.reduce(function(f,d){return o[d.ID]!==void 0&&(f=o[d.ID]),f},null);e.children.forEach(function(f){i.morphTargets[f.ID]!==void 0&&a.push(i.morphTargets[f.ID])});let u=l[0],h={};"RotationOrder"in u&&(h.eulerOrder=H3(u.RotationOrder.value)),"InheritType"in u&&(h.inheritType=parseInt(u.InheritType.value)),"GeometricTranslation"in u&&(h.translation=u.GeometricTranslation.value),"GeometricRotation"in u&&(h.rotation=u.GeometricRotation.value),"GeometricScaling"in u&&(h.scale=u.GeometricScaling.value);let A=z3(h);return this.genGeometry(t,c,a,A)}genGeometry(e,t,i,o){let a=new Ke;e.attrName&&(a.name=e.attrName);let l=this.parseGeoNode(e,t),c=this.genBuffers(l),u=new Ve(c.vertex,3);if(u.applyMatrix4(o),a.setAttribute("position",u),c.colors.length>0&&a.setAttribute("color",new Ve(c.colors,3)),t&&(a.setAttribute("skinIndex",new Pc(c.weightsIndices,4)),a.setAttribute("skinWeight",new Ve(c.vertexWeights,4)),a.FBX_Deformer=t),c.normal.length>0){let h=new dt().getNormalMatrix(o),A=new Ve(c.normal,3);A.applyNormalMatrix(h),a.setAttribute("normal",A)}if(c.uvs.forEach(function(h,A){let f=A===0?"uv":`uv${A}`;a.setAttribute(f,new Ve(c.uvs[A],2))}),l.material&&l.material.mappingType!=="AllSame"){let h=c.materialIndex[0],A=0;if(c.materialIndex.forEach(function(f,d){f!==h&&(a.addGroup(A,d-A,h),h=f,A=d)}),a.groups.length>0){let f=a.groups[a.groups.length-1],d=f.start+f.count;d!==c.materialIndex.length&&a.addGroup(d,c.materialIndex.length-d,h)}a.groups.length===0&&a.addGroup(0,c.materialIndex.length,c.materialIndex[0])}return this.addMorphTargets(a,e,i,o),a}parseGeoNode(e,t){let i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let o=0;for(;e.LayerElementUV[o];)e.LayerElementUV[o].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[o])),o++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(o,a){o.indices.forEach(function(l,c){i.weightTable[l]===void 0&&(i.weightTable[l]=[]),i.weightTable[l].push({id:a,weight:o.weights[c]})})})),i}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,o=0,a=!1,l=[],c=[],u=[],h=[],A=[],f=[],d=this;return e.vertexIndices.forEach(function(p,m){let b,g=!1;p<0&&(p=p^-1,g=!0);let w=[],I=[];if(l.push(p*3,p*3+1,p*3+2),e.color){let v=Oy(m,i,p,e.color);u.push(v[0],v[1],v[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(v){I.push(v.weight),w.push(v.id)}),I.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);let v=[0,0,0,0],C=[0,0,0,0];I.forEach(function(E,S){let M=E,_=w[S];C.forEach(function(T,D,R){if(M>T){R[D]=M,M=T;let B=v[D];v[D]=_,_=B}})}),w=v,I=C}for(;I.length<4;)I.push(0),w.push(0);for(let v=0;v<4;++v)A.push(I[v]),f.push(w[v])}if(e.normal){let v=Oy(m,i,p,e.normal);c.push(v[0],v[1],v[2])}e.material&&e.material.mappingType!=="AllSame"&&(b=Oy(m,i,p,e.material)[0],b<0&&(d.negativeMaterialIndices=!0,b=0)),e.uv&&e.uv.forEach(function(v,C){let E=Oy(m,i,p,v);h[C]===void 0&&(h[C]=[]),h[C].push(E[0]),h[C].push(E[1])}),o++,g&&(o>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),d.genFace(t,e,l,b,c,u,h,A,f,o),i++,o=0,l=[],c=[],u=[],h=[],A=[],f=[])}),t}genFace(e,t,i,o,a,l,c,u,h,A){for(let f=2;f<A;f++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(f-1)*3]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[i[f*3]]),e.vertex.push(t.vertexPositions[i[f*3+1]]),e.vertex.push(t.vertexPositions[i[f*3+2]]),t.skeleton&&(e.vertexWeights.push(u[0]),e.vertexWeights.push(u[1]),e.vertexWeights.push(u[2]),e.vertexWeights.push(u[3]),e.vertexWeights.push(u[(f-1)*4]),e.vertexWeights.push(u[(f-1)*4+1]),e.vertexWeights.push(u[(f-1)*4+2]),e.vertexWeights.push(u[(f-1)*4+3]),e.vertexWeights.push(u[f*4]),e.vertexWeights.push(u[f*4+1]),e.vertexWeights.push(u[f*4+2]),e.vertexWeights.push(u[f*4+3]),e.weightsIndices.push(h[0]),e.weightsIndices.push(h[1]),e.weightsIndices.push(h[2]),e.weightsIndices.push(h[3]),e.weightsIndices.push(h[(f-1)*4]),e.weightsIndices.push(h[(f-1)*4+1]),e.weightsIndices.push(h[(f-1)*4+2]),e.weightsIndices.push(h[(f-1)*4+3]),e.weightsIndices.push(h[f*4]),e.weightsIndices.push(h[f*4+1]),e.weightsIndices.push(h[f*4+2]),e.weightsIndices.push(h[f*4+3])),t.color&&(e.colors.push(l[0]),e.colors.push(l[1]),e.colors.push(l[2]),e.colors.push(l[(f-1)*3]),e.colors.push(l[(f-1)*3+1]),e.colors.push(l[(f-1)*3+2]),e.colors.push(l[f*3]),e.colors.push(l[f*3+1]),e.colors.push(l[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(o),e.materialIndex.push(o),e.materialIndex.push(o)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[(f-1)*3]),e.normal.push(a[(f-1)*3+1]),e.normal.push(a[(f-1)*3+2]),e.normal.push(a[f*3]),e.normal.push(a[f*3+1]),e.normal.push(a[f*3+2])),t.uv&&t.uv.forEach(function(d,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(c[p][0]),e.uvs[p].push(c[p][1]),e.uvs[p].push(c[p][(f-1)*2]),e.uvs[p].push(c[p][(f-1)*2+1]),e.uvs[p].push(c[p][f*2]),e.uvs[p].push(c[p][f*2+1])})}addMorphTargets(e,t,i,o){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let a=this;i.forEach(function(l){l.rawTargets.forEach(function(c){let u=Dt.Objects.Geometry[c.geoID];u!==void 0&&a.genMorphGeometry(e,t,u,o,c.name)})})}genMorphGeometry(e,t,i,o,a){let l=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],c=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],h=e.attributes.position.count*3,A=new Float32Array(h);for(let m=0;m<u.length;m++){let b=u[m]*3;A[b]=c[m*3],A[b+1]=c[m*3+1],A[b+2]=c[m*3+2]}let f={vertexIndices:l,vertexPositions:A},d=this.genBuffers(f),p=new Ve(d.vertex,3);p.name=a||i.attrName,p.applyMatrix4(o),e.morphAttributes.position.push(p)}parseNormals(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,o=e.Normals.a,a=[];return i==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:o,indices:a,mappingType:t,referenceType:i}}parseUVs(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,o=e.UV.a,a=[];return i==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:o,indices:a,mappingType:t,referenceType:i}}parseVertexColors(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,o=e.Colors.a,a=[];i==="IndexToDirect"&&(a=e.ColorIndex.a);for(let l=0,c=new De;l<o.length;l+=4)c.fromArray(o,l).convertSRGBToLinear().toArray(o,l);return{dataSize:4,buffer:o,indices:a,mappingType:t,referenceType:i}}parseMaterialIndices(e){let t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let o=e.Materials.a,a=[];for(let l=0;l<o.length;++l)a.push(l);return{dataSize:1,buffer:o,indices:a,mappingType:t,referenceType:i}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Ke;let i=t-1,o=e.KnotVector.a,a=[],l=e.Points.a;for(let f=0,d=l.length;f<d;f+=4)a.push(new pt().fromArray(l,f));let c,u;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){c=i,u=o.length-1-c;for(let f=0;f<i;++f)a.push(a[f])}let A=new Uy(i,o,a,c,u).getPoints(a.length*12);return new Ke().setFromPoints(A)}},fI=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let i in t){let o=t[i],a=this.addClip(o);e.push(a)}return e}parseClips(){if(Dt.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=Dt.Objects.AnimationCurveNode,t=new Map;for(let i in e){let o=e[i];if(o.attrName.match(/S|R|T|DeformPercent/)!==null){let a={id:o.id,attr:o.attrName,curves:{}};t.set(a.id,a)}}return t}parseAnimationCurves(e){let t=Dt.Objects.AnimationCurve;for(let i in t){let o={id:t[i].id,times:t[i].KeyTime.a.map(cJ),values:t[i].KeyValueFloat.a},a=Hn.get(o.id);if(a!==void 0){let l=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?e.get(l).curves.x=o:c.match(/Y/)?e.get(l).curves.y=o:c.match(/Z/)?e.get(l).curves.z=o:c.match(/DeformPercent/)&&e.has(l)&&(e.get(l).curves.morph=o)}}}parseAnimationLayers(e){let t=Dt.Objects.AnimationLayer,i=new Map;for(let o in t){let a=[],l=Hn.get(parseInt(o));l!==void 0&&(l.children.forEach(function(u,h){if(e.has(u.ID)){let A=e.get(u.ID);if(A.curves.x!==void 0||A.curves.y!==void 0||A.curves.z!==void 0){if(a[h]===void 0){let f=Hn.get(u.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(f!==void 0){let d=Dt.Objects.Model[f.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",u);return}let p={modelName:d.attrName?Lt.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};dr.traverse(function(m){m.ID===d.id&&(p.transform=m.matrix,m.userData.transformData&&(p.eulerOrder=m.userData.transformData.eulerOrder))}),p.transform||(p.transform=new ke),"PreRotation"in d&&(p.preRotation=d.PreRotation.value),"PostRotation"in d&&(p.postRotation=d.PostRotation.value),a[h]=p}}a[h]&&(a[h][A.attr]=A)}else if(A.curves.morph!==void 0){if(a[h]===void 0){let f=Hn.get(u.ID).parents.filter(function(w){return w.relationship!==void 0})[0].ID,d=Hn.get(f).parents[0].ID,p=Hn.get(d).parents[0].ID,m=Hn.get(p).parents[0].ID,b=Dt.Objects.Model[m],g={modelName:b.attrName?Lt.sanitizeNodeName(b.attrName):"",morphName:Dt.Objects.Deformer[f].attrName};a[h]=g}a[h][A.attr]=A}}}),i.set(parseInt(o),a))}return i}parseAnimStacks(e){let t=Dt.Objects.AnimationStack,i={};for(let o in t){let a=Hn.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let l=e.get(a[0].ID);i[o]={name:t[o].attrName,layer:l}}return i}addClip(e){let t=[],i=this;return e.layer.forEach(function(o){t=t.concat(i.generateTracks(o))}),new Os(e.name,-1,t)}generateTracks(e){let t=[],i=new U,o=new It,a=new U;if(e.transform&&e.transform.decompose(i,o,a),i=i.toArray(),o=new ur().setFromQuaternion(o,e.eulerOrder).toArray(),a=a.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let l=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");l!==void 0&&t.push(l)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let l=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotation,e.postRotation,e.eulerOrder);l!==void 0&&t.push(l)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let l=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");l!==void 0&&t.push(l)}if(e.DeformPercent!==void 0){let l=this.generateMorphTrack(e);l!==void 0&&t.push(l)}return t}generateVectorTrack(e,t,i,o){let a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);return new Us(e+"."+o,a,l)}generateRotationTrack(e,t,i,o,a,l){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Jt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Jt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Jt.degToRad));let c=this.getTimesForAllAxes(t),u=this.getKeyframeTrackValues(c,t,i);o!==void 0&&(o=o.map(Jt.degToRad),o.push(l),o=new ur().fromArray(o),o=new It().setFromEuler(o)),a!==void 0&&(a=a.map(Jt.degToRad),a.push(l),a=new ur().fromArray(a),a=new It().setFromEuler(a).invert());let h=new It,A=new ur,f=[];for(let d=0;d<u.length;d+=3)A.set(u[d],u[d+1],u[d+2],l),h.setFromEuler(A),o!==void 0&&h.premultiply(o),a!==void 0&&h.multiply(a),h.toArray(f,d/3*4);return new Ur(e+".quaternion",c,f)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,i=t.values.map(function(a){return a/100}),o=dr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new us(e.modelName+".morphTargetInfluences["+o+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,o){return i-o}),t.length>1){let i=1,o=t[0];for(let a=1;a<t.length;a++){let l=t[a];l!==o&&(t[i]=l,o=l,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){let o=i,a=[],l=-1,c=-1,u=-1;return e.forEach(function(h){if(t.x&&(l=t.x.times.indexOf(h)),t.y&&(c=t.y.times.indexOf(h)),t.z&&(u=t.z.times.indexOf(h)),l!==-1){let A=t.x.values[l];a.push(A),o[0]=A}else a.push(o[0]);if(c!==-1){let A=t.y.values[c];a.push(A),o[1]=A}else a.push(o[1]);if(u!==-1){let A=t.z.values[u];a.push(A),o[2]=A}else a.push(o[2])}),a}interpolateRotations(e){for(let t=1;t<e.values.length;t++){let i=e.values[t-1],o=e.values[t]-i,a=Math.abs(o);if(a>=180){let l=a/180,c=o/l,u=i+c,h=e.times[t-1],f=(e.times[t]-h)/l,d=h+f,p=[],m=[];for(;d<e.times[t];)p.push(d),d+=f,m.push(u),u+=c;e.times=G3(e.times,t,p),e.values=G3(e.values,t,m)}}}},dI=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new zy,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,i=e.split(/[\r\n]+/);return i.forEach(function(o,a){let l=o.match(/^[\s\t]*;/),c=o.match(/^[\s\t]*$/);if(l||c)return;let u=o.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),h=o.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),A=o.match("^\\t{"+(t.currentIndent-1)+"}}");u?t.parseNodeBegin(o,u):h?t.parseNodeProperty(o,h,i[++a]):A?t.popStack():o.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(o)}),this.allNodes}parseNodeBegin(e,t){let i=t[1].trim().replace(/^"/,"").replace(/"$/,""),o=t[2].split(",").map(function(u){return u.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:i},l=this.parseNodeAttr(o),c=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,a):i in c?(i==="PoseNode"?c.PoseNode.push(a):c[i].id!==void 0&&(c[i]={},c[i][c[i].id]=c[i]),l.id!==""&&(c[i][l.id]=a)):typeof l.id=="number"?(c[i]={},c[i][l.id]=a):i!=="Properties70"&&(i==="PoseNode"?c[i]=[a]:c[i]=a),typeof l.id=="number"&&(a.id=l.id),l.name!==""&&(a.attrName=l.name),l.type!==""&&(a.attrType=l.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",o="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),o=e[2]),{id:t,name:i,type:o}}parseNodeProperty(e,t,i){let o=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();o==="Content"&&a===","&&(a=i.replace(/"/g,"").replace(/,$/,"").trim());let l=this.getCurrentNode();if(l.name==="Properties70"){this.parseNodeSpecialProperty(e,o,a);return}if(o==="C"){let u=a.split(",").slice(1),h=parseInt(u[0]),A=parseInt(u[1]),f=a.split(",").slice(3);f=f.map(function(d){return d.trim().replace(/^"/,"")}),o="connections",a=[h,A],hJ(a,f),l[o]===void 0&&(l[o]=[])}o==="Node"&&(l.id=a),o in l&&Array.isArray(l[o])?l[o].push(a):o!=="a"?l[o]=a:l.a=a,this.setCurrentProp(l,o),o==="a"&&a.slice(-1)!==","&&(l.a=uI(a))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=uI(t.a))}parseNodeSpecialProperty(e,t,i){let o=i.split('",').map(function(A){return A.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=o[0],l=o[1],c=o[2],u=o[3],h=o[4];switch(l){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=uI(h);break}this.getPrevNode()[a]={type:l,type2:c,flag:u,value:h},this.setCurrentProp(this.getPrevNode(),a)}},pI=class{parse(e){let t=new Gy(e);t.skip(23);let i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let o=new zy;for(;!this.endOfContent(t);){let a=this.parseNode(t,i);a!==null&&o.add(a.name,a)}return o}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let i={},o=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let l=e.getUint8(),c=e.getString(l);if(o===0)return null;let u=[];for(let d=0;d<a;d++)u.push(this.parseProperty(e));let h=u.length>0?u[0]:"",A=u.length>1?u[1]:"",f=u.length>2?u[2]:"";for(i.singleProperty=a===1&&e.getOffset()===o;o>e.getOffset();){let d=this.parseNode(e,t);d!==null&&this.parseSubNode(c,i,d)}return i.propertyList=u,typeof h=="number"&&(i.id=h),A!==""&&(i.attrName=A),f!==""&&(i.attrType=f),c!==""&&(i.name=c),i}parseSubNode(e,t,i){if(i.singleProperty===!0){let o=i.propertyList[0];Array.isArray(o)?(t[i.name]=i,i.a=o):t[i.name]=o}else if(e==="Connections"&&i.name==="C"){let o=[];i.propertyList.forEach(function(a,l){l!==0&&o.push(a)}),t.connections===void 0&&(t.connections=[]),t.connections.push(o)}else if(i.name==="Properties70")Object.keys(i).forEach(function(a){t[a]=i[a]});else if(e==="Properties70"&&i.name==="P"){let o=i.propertyList[0],a=i.propertyList[1],l=i.propertyList[2],c=i.propertyList[3],u;o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?u=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:u=i.propertyList[4],t[o]={type:a,type2:l,flag:c,value:u}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){let t=e.getString(1),i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let o=e.getUint32(),a=e.getUint32(),l=e.getUint32();if(a===0)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}let c=N3(new Uint8Array(e.getArrayBuffer(l))),u=new Gy(c.buffer);switch(t){case"b":case"c":return u.getBooleanArray(o);case"d":return u.getFloat64Array(o);case"f":return u.getFloat32Array(o);case"i":return u.getInt32Array(o);case"l":return u.getInt64Array(o)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Gy=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let o=i.indexOf(0);return o>=0&&(i=new Uint8Array(this.dv.buffer,t,o)),this._textDecoder.decode(i)}},zy=class{add(e,t){this[e]=t}};function aJ(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===V3(n,0,e.length)}function lJ(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function i(o){let a=n[o-1];return n=n.slice(t+o),t++,a}for(let o=0;o<e.length;++o)if(i(1)===e[o])return!1;return!0}function Q3(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function cJ(n){return n/46186158e3}var uJ=[];function Oy(n,e,t,i){let o;switch(i.mappingType){case"ByPolygonVertex":o=n;break;case"ByPolygon":o=e;break;case"ByVertice":o=t;break;case"AllSame":o=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(o=i.indices[o]);let a=o*i.dataSize,l=a+i.dataSize;return AJ(uJ,i.buffer,a,l)}var cI=new ur,Kh=new U;function z3(n){let e=new ke,t=new ke,i=new ke,o=new ke,a=new ke,l=new ke,c=new ke,u=new ke,h=new ke,A=new ke,f=new ke,d=new ke,p=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Kh.fromArray(n.translation)),n.preRotation){let D=n.preRotation.map(Jt.degToRad);D.push(n.eulerOrder||ur.DEFAULT_ORDER),t.makeRotationFromEuler(cI.fromArray(D))}if(n.rotation){let D=n.rotation.map(Jt.degToRad);D.push(n.eulerOrder||ur.DEFAULT_ORDER),i.makeRotationFromEuler(cI.fromArray(D))}if(n.postRotation){let D=n.postRotation.map(Jt.degToRad);D.push(n.eulerOrder||ur.DEFAULT_ORDER),o.makeRotationFromEuler(cI.fromArray(D)),o.invert()}n.scale&&a.scale(Kh.fromArray(n.scale)),n.scalingOffset&&c.setPosition(Kh.fromArray(n.scalingOffset)),n.scalingPivot&&l.setPosition(Kh.fromArray(n.scalingPivot)),n.rotationOffset&&u.setPosition(Kh.fromArray(n.rotationOffset)),n.rotationPivot&&h.setPosition(Kh.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),A.copy(n.parentMatrixWorld));let m=t.clone().multiply(i).multiply(o),b=new ke;b.extractRotation(A);let g=new ke;g.copyPosition(A);let w=g.clone().invert().multiply(A),I=b.clone().invert().multiply(w),v=a,C=new ke;if(p===0)C.copy(b).multiply(m).multiply(I).multiply(v);else if(p===1)C.copy(b).multiply(I).multiply(m).multiply(v);else{let R=new ke().scale(new U().setFromMatrixScale(f)).clone().invert(),B=I.clone().multiply(R);C.copy(b).multiply(m).multiply(B).multiply(v)}let E=h.clone().invert(),S=l.clone().invert(),M=e.clone().multiply(u).multiply(h).multiply(t).multiply(i).multiply(o).multiply(E).multiply(c).multiply(l).multiply(a).multiply(S),_=new ke().copyPosition(M),T=A.clone().multiply(_);return d.copyPosition(T),M=d.clone().multiply(C),M.premultiply(A.invert()),M}function H3(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function uI(n){return n.split(",").map(function(t){return parseFloat(t)})}function V3(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function hJ(n,e){for(let t=0,i=n.length,o=e.length;t<o;t++,i++)n[i]=e[t]}function AJ(n,e,t,i){for(let o=t,a=0;o<i;o++,a++)n[a]=e[o];return n}function G3(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}var mI={};ho(mI,{computeMikkTSpaceTangents:()=>fJ,computeMorphedAttributes:()=>vJ,deepCloneAttribute:()=>dJ,deinterleaveAttribute:()=>Vy,deinterleaveGeometry:()=>mJ,estimateBytesUsed:()=>gJ,interleaveAttributes:()=>pJ,mergeAttributes:()=>Hy,mergeBufferAttributes:()=>CJ,mergeBufferGeometries:()=>xJ,mergeGeometries:()=>W3,mergeGroups:()=>wJ,mergeVertices:()=>yJ,toCreasedNormals:()=>bJ,toTrianglesDrawMode:()=>Wy});function fJ(n,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!n.hasAttribute("position")||!n.hasAttribute("normal")||!n.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(l){if(l.normalized||l.isInterleavedBufferAttribute){let c=new Float32Array(l.count*l.itemSize);for(let u=0,h=0;u<l.count;u++)c[h++]=l.getX(u),c[h++]=l.getY(u),l.itemSize>2&&(c[h++]=l.getZ(u));return c}return l.array instanceof Float32Array?l.array:new Float32Array(l.array)}let o=n.index?n.toNonIndexed():n,a=e.generateTangents(i(o.attributes.position),i(o.attributes.normal),i(o.attributes.uv));if(t)for(let l=3;l<a.length;l+=4)a[l]*=-1;return o.setAttribute("tangent",new $e(a,4)),n!==o&&n.copy(o),n}function W3(n,e=!1){let t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),o=new Set(Object.keys(n[0].morphAttributes)),a={},l={},c=n[0].morphTargetsRelative,u=new Ke,h=0;for(let A=0;A<n.length;++A){let f=n[A],d=0;if(t!==(f.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in f.attributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;a[p]===void 0&&(a[p]=[]),a[p].push(f.attributes[p]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". Make sure all geometries have the same number of attributes."),null;if(c!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in f.morphAttributes){if(!o.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+".  .morphAttributes must be consistent throughout all geometries."),null;l[p]===void 0&&(l[p]=[]),l[p].push(f.morphAttributes[p])}if(e){let p;if(t)p=f.index.count;else if(f.attributes.position!==void 0)p=f.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". The geometry must have either an index or a position attribute"),null;u.addGroup(h,p,A),h+=p}}if(t){let A=0,f=[];for(let d=0;d<n.length;++d){let p=n[d].index;for(let m=0;m<p.count;++m)f.push(p.getX(m)+A);A+=n[d].attributes.position.count}u.setIndex(f)}for(let A in a){let f=Hy(a[A]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+A+" attribute."),null;u.setAttribute(A,f)}for(let A in l){let f=l[A][0].length;if(f===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[A]=[];for(let d=0;d<f;++d){let p=[];for(let b=0;b<l[A].length;++b)p.push(l[A][b][d]);let m=Hy(p);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+A+" morphAttribute."),null;u.morphAttributes[A].push(m)}}return u}function Hy(n){let e,t,i,o=-1,a=0;for(let h=0;h<n.length;++h){let A=n[h];if(A.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=A.array.constructor),e!==A.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=A.itemSize),t!==A.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=A.normalized),i!==A.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(o===-1&&(o=A.gpuType),o!==A.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=A.array.length}let l=new e(a),c=0;for(let h=0;h<n.length;++h)l.set(n[h].array,c),c+=n[h].array.length;let u=new $e(l,t,i);return o!==void 0&&(u.gpuType=o),u}function dJ(n){return n.isInstancedInterleavedBufferAttribute||n.isInterleavedBufferAttribute?Vy(n):n.isInstancedBufferAttribute?new Pr().copy(n):new $e().copy(n)}function pJ(n){let e,t=0,i=0;for(let h=0,A=n.length;h<A;++h){let f=n[h];if(e===void 0&&(e=f.array.constructor),e!==f.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=f.array.length,i+=f.itemSize}let o=new hr(new e(t),i),a=0,l=[],c=["getX","getY","getZ","getW"],u=["setX","setY","setZ","setW"];for(let h=0,A=n.length;h<A;h++){let f=n[h],d=f.itemSize,p=f.count,m=new zn(o,d,a,f.normalized);l.push(m),a+=d;for(let b=0;b<p;b++)for(let g=0;g<d;g++)m[u[g]](b,f[c[g]](b))}return l}function Vy(n){let e=n.data.array.constructor,t=n.count,i=n.itemSize,o=n.normalized,a=new e(t*i),l;n.isInstancedInterleavedBufferAttribute?l=new Pr(a,i,o,n.meshPerAttribute):l=new $e(a,i,o);for(let c=0;c<t;c++)l.setX(c,n.getX(c)),i>=2&&l.setY(c,n.getY(c)),i>=3&&l.setZ(c,n.getZ(c)),i>=4&&l.setW(c,n.getW(c));return l}function mJ(n){let e=n.attributes,t=n.morphTargets,i=new Map;for(let o in e){let a=e[o];a.isInterleavedBufferAttribute&&(i.has(a)||i.set(a,Vy(a)),e[o]=i.get(a))}for(let o in t){let a=t[o];a.isInterleavedBufferAttribute&&(i.has(a)||i.set(a,Vy(a)),t[o]=i.get(a))}}function gJ(n){let e=0;for(let i in n.attributes){let o=n.getAttribute(i);e+=o.count*o.itemSize*o.array.BYTES_PER_ELEMENT}let t=n.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function yJ(n,e=1e-4){e=Math.max(e,Number.EPSILON);let t={},i=n.getIndex(),o=n.getAttribute("position"),a=i?i.count:o.count,l=0,c=Object.keys(n.attributes),u={},h={},A=[],f=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let g=0,w=c.length;g<w;g++){let I=c[g],v=n.attributes[I];u[I]=new $e(new v.array.constructor(v.count*v.itemSize),v.itemSize,v.normalized);let C=n.morphAttributes[I];C&&(h[I]=new $e(new C.array.constructor(C.count*C.itemSize),C.itemSize,C.normalized))}let p=Math.log10(1/e),m=Math.pow(10,p);for(let g=0;g<a;g++){let w=i?i.getX(g):g,I="";for(let v=0,C=c.length;v<C;v++){let E=c[v],S=n.getAttribute(E),M=S.itemSize;for(let _=0;_<M;_++)I+=`${~~(S[f[_]](w)*m)},`}if(I in t)A.push(t[I]);else{for(let v=0,C=c.length;v<C;v++){let E=c[v],S=n.getAttribute(E),M=n.morphAttributes[E],_=S.itemSize,T=u[E],D=h[E];for(let R=0;R<_;R++){let B=f[R],P=d[R];if(T[P](l,S[B](w)),M)for(let F=0,z=M.length;F<z;F++)D[F][P](l,M[F][B](w))}}t[I]=l,A.push(l),l++}}let b=n.clone();for(let g in n.attributes){let w=u[g];if(b.setAttribute(g,new $e(w.array.slice(0,l*w.itemSize),w.itemSize,w.normalized)),g in h)for(let I=0;I<h[g].length;I++){let v=h[g][I];b.morphAttributes[g][I]=new $e(v.array.slice(0,l*v.itemSize),v.itemSize,v.normalized)}}return b.setIndex(A),b}function Wy(n,e){if(e===ZE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Wh||e===jd){let t=n.getIndex();if(t===null){let l=[],c=n.getAttribute("position");if(c!==void 0){for(let u=0;u<c.count;u++)l.push(u);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,o=[];if(e===Wh)for(let l=1;l<=i;l++)o.push(t.getX(0)),o.push(t.getX(l)),o.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(o.push(t.getX(l)),o.push(t.getX(l+1)),o.push(t.getX(l+2))):(o.push(t.getX(l+2)),o.push(t.getX(l+1)),o.push(t.getX(l)));o.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let a=n.clone();return a.setIndex(o),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function vJ(n){let e=new U,t=new U,i=new U,o=new U,a=new U,l=new U,c=new U,u=new U,h=new U;function A(O,W,k,Y,te,ie,re,se){e.fromBufferAttribute(W,te),t.fromBufferAttribute(W,ie),i.fromBufferAttribute(W,re);let oe=O.morphTargetInfluences;if(k&&oe){c.set(0,0,0),u.set(0,0,0),h.set(0,0,0);for(let le=0,xe=k.length;le<xe;le++){let _e=oe[le],pe=k[le];_e!==0&&(o.fromBufferAttribute(pe,te),a.fromBufferAttribute(pe,ie),l.fromBufferAttribute(pe,re),Y?(c.addScaledVector(o,_e),u.addScaledVector(a,_e),h.addScaledVector(l,_e)):(c.addScaledVector(o.sub(e),_e),u.addScaledVector(a.sub(t),_e),h.addScaledVector(l.sub(i),_e)))}e.add(c),t.add(u),i.add(h)}O.isSkinnedMesh&&(O.applyBoneTransform(te,e),O.applyBoneTransform(ie,t),O.applyBoneTransform(re,i)),se[te*3+0]=e.x,se[te*3+1]=e.y,se[te*3+2]=e.z,se[ie*3+0]=t.x,se[ie*3+1]=t.y,se[ie*3+2]=t.z,se[re*3+0]=i.x,se[re*3+1]=i.y,se[re*3+2]=i.z}let f=n.geometry,d=n.material,p,m,b,g=f.index,w=f.attributes.position,I=f.morphAttributes.position,v=f.morphTargetsRelative,C=f.attributes.normal,E=f.morphAttributes.position,S=f.groups,M=f.drawRange,_,T,D,R,B,P,F,z=new Float32Array(w.count*w.itemSize),Q=new Float32Array(C.count*C.itemSize);if(g!==null)if(Array.isArray(d))for(_=0,D=S.length;_<D;_++)for(B=S[_],P=Math.max(B.start,M.start),F=Math.min(B.start+B.count,M.start+M.count),T=P,R=F;T<R;T+=3)p=g.getX(T),m=g.getX(T+1),b=g.getX(T+2),A(n,w,I,v,p,m,b,z),A(n,C,E,v,p,m,b,Q);else for(P=Math.max(0,M.start),F=Math.min(g.count,M.start+M.count),_=P,D=F;_<D;_+=3)p=g.getX(_),m=g.getX(_+1),b=g.getX(_+2),A(n,w,I,v,p,m,b,z),A(n,C,E,v,p,m,b,Q);else if(Array.isArray(d))for(_=0,D=S.length;_<D;_++)for(B=S[_],P=Math.max(B.start,M.start),F=Math.min(B.start+B.count,M.start+M.count),T=P,R=F;T<R;T+=3)p=T,m=T+1,b=T+2,A(n,w,I,v,p,m,b,z),A(n,C,E,v,p,m,b,Q);else for(P=Math.max(0,M.start),F=Math.min(w.count,M.start+M.count),_=P,D=F;_<D;_+=3)p=_,m=_+1,b=_+2,A(n,w,I,v,p,m,b,z),A(n,C,E,v,p,m,b,Q);let V=new Ve(z,3),G=new Ve(Q,3);return{positionAttribute:w,normalAttribute:C,morphedPositionAttribute:V,morphedNormalAttribute:G}}function wJ(n){if(n.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),n;let e=n.groups;if(e=e.sort((l,c)=>l.materialIndex!==c.materialIndex?l.materialIndex-c.materialIndex:l.start-c.start),n.getIndex()===null){let l=n.getAttribute("position"),c=[];for(let u=0;u<l.count;u+=3)c.push(u,u+1,u+2);n.setIndex(c)}let t=n.getIndex(),i=[];for(let l=0;l<e.length;l++){let c=e[l],u=c.start,h=u+c.count;for(let A=u;A<h;A++)i.push(t.getX(A))}n.dispose(),n.setIndex(i);let o=0;for(let l=0;l<e.length;l++){let c=e[l];c.start=o,o+=c.count}let a=e[0];n.groups=[a];for(let l=1;l<e.length;l++){let c=e[l];a.materialIndex===c.materialIndex?a.count+=c.count:(a=c,n.groups.push(a))}return n}function bJ(n,e=Math.PI/3){let t=Math.cos(e),i=(1+1e-10)*100,o=[new U,new U,new U],a=new U,l=new U,c=new U,u=new U;function h(b){let g=~~(b.x*i),w=~~(b.y*i),I=~~(b.z*i);return`${g},${w},${I}`}let A=n.index?n.toNonIndexed():n,f=A.attributes.position,d={};for(let b=0,g=f.count/3;b<g;b++){let w=3*b,I=o[0].fromBufferAttribute(f,w+0),v=o[1].fromBufferAttribute(f,w+1),C=o[2].fromBufferAttribute(f,w+2);a.subVectors(C,v),l.subVectors(I,v);let E=new U().crossVectors(a,l).normalize();for(let S=0;S<3;S++){let M=o[S],_=h(M);_ in d||(d[_]=[]),d[_].push(E)}}let p=new Float32Array(f.count*3),m=new $e(p,3,!1);for(let b=0,g=f.count/3;b<g;b++){let w=3*b,I=o[0].fromBufferAttribute(f,w+0),v=o[1].fromBufferAttribute(f,w+1),C=o[2].fromBufferAttribute(f,w+2);a.subVectors(C,v),l.subVectors(I,v),c.crossVectors(a,l).normalize();for(let E=0;E<3;E++){let S=o[E],M=h(S),_=d[M];u.set(0,0,0);for(let T=0,D=_.length;T<D;T++){let R=_[T];c.dot(R)>t&&u.add(R)}u.normalize(),m.setXYZ(w+E,u.x,u.y,u.z)}}return A.setAttribute("normal",m),A}function xJ(n,e=!1){return console.warn("THREE.BufferGeometryUtils: mergeBufferGeometries() has been renamed to mergeGeometries()."),W3(n,e)}function CJ(n){return console.warn("THREE.BufferGeometryUtils: mergeBufferAttributes() has been renamed to mergeAttributes()."),Hy(n)}var ep=class extends pn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new CI(t)}),this.register(function(t){return new RI(t)}),this.register(function(t){return new LI(t)}),this.register(function(t){return new BI(t)}),this.register(function(t){return new EI(t)}),this.register(function(t){return new II(t)}),this.register(function(t){return new MI(t)}),this.register(function(t){return new TI(t)}),this.register(function(t){return new xI(t)}),this.register(function(t){return new _I(t)}),this.register(function(t){return new SI(t)}),this.register(function(t){return new DI(t)}),this.register(function(t){return new wI(t)}),this.register(function(t){return new kI(t)}),this.register(function(t){return new PI(t)})}load(e,t,i,o){let a=this,l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=Gs.extractUrlBase(e),this.manager.itemStart(e);let c=function(h){o?o(h):console.error(h),a.manager.itemError(e),a.manager.itemEnd(e)},u=new si(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{a.parse(h,l,function(A){t(A),a.manager.itemEnd(e)},c)}catch(A){c(A)}},i,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,o){let a,l={},c={},u=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===j3){try{l[Ft.KHR_BINARY_GLTF]=new NI(e)}catch(f){o&&o(f);return}a=JSON.parse(l[Ft.KHR_BINARY_GLTF].content)}else a=JSON.parse(u.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let h=new HI(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){let f=this.pluginCallbacks[A](h);c[f.name]=f,l[f.name]=!0}if(a.extensionsUsed)for(let A=0;A<a.extensionsUsed.length;++A){let f=a.extensionsUsed[A],d=a.extensionsRequired||[];switch(f){case Ft.KHR_MATERIALS_UNLIT:l[f]=new bI;break;case Ft.KHR_DRACO_MESH_COMPRESSION:l[f]=new FI(a,this.dracoLoader);break;case Ft.KHR_TEXTURE_TRANSFORM:l[f]=new UI;break;case Ft.KHR_MESH_QUANTIZATION:l[f]=new OI;break;default:d.indexOf(f)>=0&&c[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}h.setExtensions(l),h.setPlugins(c),h.parse(i,o)}parseAsync(e,t){let i=this;return new Promise(function(o,a){i.parse(e,t,o,a)})}};function SJ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var Ft={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},wI=class{constructor(e){this.parser=e,this.name=Ft.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,o=t.length;i<o;i++){let a=t[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,o=t.cache.get(i);if(o)return o;let a=t.json,u=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],h,A=new De(16777215);u.color!==void 0&&A.fromArray(u.color);let f=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new Or(A),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Qs(A),h.distance=f;break;case"spot":h=new pl(A),h.distance=f,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),h.decay=2,Sl(h,u),u.intensity!==void 0&&(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||"light_"+e),o=Promise.resolve(h),t.cache.add(i,o),o}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,a=i.json.nodes[e],c=(a.extensions&&a.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(u){return i._getNodeRef(t.cache,c,u)})}},bI=class{constructor(){this.name=Ft.KHR_MATERIALS_UNLIT}getMaterialType(){return Nt}extendParams(e,t,i){let o=[];e.color=new De(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let l=a.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}a.baseColorTexture!==void 0&&o.push(i.assignTexture(e,"map",a.baseColorTexture,it))}return Promise.all(o)}},xI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=o.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}},CI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){let c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new he(c,c)}return Promise.all(a)}},SI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}},EI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new De(0,0,0),t.sheenRoughness=0,t.sheen=1;let l=o.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&a.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,it)),l.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}},II=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&a.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(a)}},MI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&a.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;let c=l.attenuationColor||[1,1,1];return t.attenuationColor=new De(c[0],c[1],c[2]),Promise.all(a)}},TI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=o.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}},_I=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&a.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));let c=l.specularColorFactor||[1,1,1];return t.specularColor=new De(c[0],c[1],c[2]),l.specularColorTexture!==void 0&&a.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,it)),Promise.all(a)}},DI=class{constructor(e){this.parser=e,this.name=Ft.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dn}extendMaterialParams(e,t){let i=this.parser,o=i.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();let a=[],l=o.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&a.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(a)}},RI=class{constructor(e){this.parser=e,this.name=Ft.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,o=i.textures[e];if(!o.extensions||!o.extensions[this.name])return null;let a=o.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,l)}},LI=class{constructor(e){this.parser=e,this.name=Ft.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,o=i.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;let l=a.extensions[t],c=o.images[l.source],u=i.textureLoader;if(c.uri){let h=i.options.manager.getHandler(c.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,l.source,u);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},BI=class{constructor(e){this.parser=e,this.name=Ft.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,o=i.json,a=o.textures[e];if(!a.extensions||!a.extensions[t])return null;let l=a.extensions[t],c=o.images[l.source],u=i.textureLoader;if(c.uri){let h=i.options.manager.getHandler(c.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,l.source,u);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},kI=class{constructor(e){this.name=Ft.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let o=i.extensions[this.name],a=this.parser.getDependency("buffer",o.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(c){let u=o.byteOffset||0,h=o.byteLength||0,A=o.count,f=o.byteStride,d=new Uint8Array(c,u,h);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(A,f,d,o.mode,o.filter).then(function(p){return p.buffer}):l.ready.then(function(){let p=new ArrayBuffer(A*f);return l.decodeGltfBuffer(new Uint8Array(p),A,f,d,o.mode,o.filter),p})})}else return null}},PI=class{constructor(e){this.name=Ft.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let o=t.meshes[i.mesh];for(let h of o.primitives)if(h.mode!==As.TRIANGLES&&h.mode!==As.TRIANGLE_STRIP&&h.mode!==As.TRIANGLE_FAN&&h.mode!==void 0)return null;let l=i.extensions[this.name].attributes,c=[],u={};for(let h in l)c.push(this.parser.getDependency("accessor",l[h]).then(A=>(u[h]=A,u[h])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(h=>{let A=h.pop(),f=A.isGroup?A.children:[A],d=h[0].count,p=[];for(let m of f){let b=new ke,g=new U,w=new It,I=new U(1,1,1),v=new hl(m.geometry,m.material,d);for(let C=0;C<d;C++)u.TRANSLATION&&g.fromBufferAttribute(u.TRANSLATION,C),u.ROTATION&&w.fromBufferAttribute(u.ROTATION,C),u.SCALE&&I.fromBufferAttribute(u.SCALE,C),v.setMatrixAt(C,b.compose(g,w,I));for(let C in u)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&m.geometry.setAttribute(C,u[C]);mt.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),p.push(v)}return A.isGroup?(A.clear(),A.add(...p),A):p[0]}))}},j3="glTF",$d=12,X3={JSON:1313821514,BIN:5130562},NI=class{constructor(e){this.name=Ft.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,$d),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==j3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let o=this.header.length-$d,a=new DataView(e,$d),l=0;for(;l<o;){let c=a.getUint32(l,!0);l+=4;let u=a.getUint32(l,!0);if(l+=4,u===X3.JSON){let h=new Uint8Array(e,$d+l,c);this.content=i.decode(h)}else if(u===X3.BIN){let h=$d+l;this.body=e.slice(h,h+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},FI=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ft.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,o=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},u={},h={};for(let A in l){let f=GI[A]||A.toLowerCase();c[f]=l[A]}for(let A in e.attributes){let f=GI[A]||A.toLowerCase();if(l[A]!==void 0){let d=i.accessors[e.attributes[A]],p=jh[d.componentType];h[f]=p.name,u[f]=d.normalized===!0}}return t.getDependency("bufferView",a).then(function(A){return new Promise(function(f){o.decodeDracoFile(A,function(d){for(let p in d.attributes){let m=d.attributes[p],b=u[p];b!==void 0&&(m.normalized=b)}f(d)},c,h)})})}},UI=class{constructor(){this.name=Ft.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},OI=class{constructor(){this.name=Ft.KHR_MESH_QUANTIZATION}},Xy=class extends Aa{constructor(e,t,i,o){super(e,t,i,o)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=e*o*3+o;for(let l=0;l!==o;l++)t[l]=i[a+l];return t}interpolate_(e,t,i,o){let a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,u=c*2,h=c*3,A=o-t,f=(i-t)/A,d=f*f,p=d*f,m=e*h,b=m-h,g=-2*p+3*d,w=p-d,I=1-g,v=w-d+f;for(let C=0;C!==c;C++){let E=l[b+C+c],S=l[b+C+u]*A,M=l[m+C+c],_=l[m+C]*A;a[C]=I*E+v*S+g*M+w*_}return a}},EJ=new It,QI=class extends Xy{interpolate_(e,t,i,o){let a=super.interpolate_(e,t,i,o);return EJ.fromArray(a).normalize().toArray(a),a}},As={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Y3={9728:Tt,9729:Et,9984:Sh,9985:Kd,9986:Dc,9987:Fs},Z3={33071:Qn,33648:Lc,10497:ji},gI={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},GI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},IJ={CUBICSPLINE:void 0,LINEAR:ol,STEP:kc},yI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function MJ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Jn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ai})),n.DefaultMaterial}function Zc(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Sl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function TJ(n,e,t){let i=!1,o=!1,a=!1;for(let h=0,A=e.length;h<A;h++){let f=e[h];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(a=!0),i&&o&&a)break}if(!i&&!o&&!a)return Promise.resolve(n);let l=[],c=[],u=[];for(let h=0,A=e.length;h<A;h++){let f=e[h];if(i){let d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;l.push(d)}if(o){let d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;c.push(d)}if(a){let d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;u.push(d)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){let A=h[0],f=h[1],d=h[2];return i&&(n.morphAttributes.position=A),o&&(n.morphAttributes.normal=f),a&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function _J(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,o=t.length;i<o;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function DJ(n){let e,t=n.extensions&&n.extensions[Ft.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+vI(t.attributes):e=n.indices+":"+vI(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,o=n.targets.length;i<o;i++)e+=":"+vI(n.targets[i]);return e}function vI(n){let e="",t=Object.keys(n).sort();for(let i=0,o=t.length;i<o;i++)e+=t[i]+":"+n[t[i]]+";";return e}function zI(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function RJ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var LJ=new ke,HI=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new SJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,o=!1,a=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,a=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||o&&a<98?this.textureLoader=new pa(this.options.manager):this.textureLoader=new Vd(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new si(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,o=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){let c={scene:l[0][o.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:o.asset,parser:i,userData:{}};Zc(a,c,o),Sl(c,o),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let o=0,a=t.length;o<a;o++){let l=t[o].joints;for(let c=0,u=l.length;c<u;c++)e[l[c]].isBone=!0}for(let o=0,a=e.length;o<a;o++){let l=e[o];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let o=i.clone(),a=(l,c)=>{let u=this.associations.get(l);u!=null&&this.associations.set(c,u);for(let[h,A]of l.children.entries())a(A,c.children[h])};return a(i,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let o=e(t[i]);if(o)return o}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let o=0;o<t.length;o++){let a=e(t[o]);a&&i.push(a)}return i}getDependency(e,t){let i=e+":"+t,o=this.cache.get(i);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":o=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":o=this.loadCamera(t);break;default:if(o=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(i,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(a,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ft.KHR_BINARY_GLTF].body);let o=this.options;return new Promise(function(a,l){i.load(Gs.resolveURL(t.uri,o.path),a,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let o=t.byteLength||0,a=t.byteOffset||0;return i.slice(a,a+o)})}loadAccessor(e){let t=this,i=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){let l=gI[o.type],c=jh[o.componentType],u=o.normalized===!0,h=new c(o.count*l);return Promise.resolve(new $e(h,l,u))}let a=[];return o.bufferView!==void 0?a.push(this.getDependency("bufferView",o.bufferView)):a.push(null),o.sparse!==void 0&&(a.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(a).then(function(l){let c=l[0],u=gI[o.type],h=jh[o.componentType],A=h.BYTES_PER_ELEMENT,f=A*u,d=o.byteOffset||0,p=o.bufferView!==void 0?i.bufferViews[o.bufferView].byteStride:void 0,m=o.normalized===!0,b,g;if(p&&p!==f){let w=Math.floor(d/p),I="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+w+":"+o.count,v=t.cache.get(I);v||(b=new h(c,w*p,o.count*p/A),v=new hr(b,p/A),t.cache.add(I,v)),g=new zn(v,u,d%p/A,m)}else c===null?b=new h(o.count*u):b=new h(c,d,o.count*u),g=new $e(b,u,m);if(o.sparse!==void 0){let w=gI.SCALAR,I=jh[o.sparse.indices.componentType],v=o.sparse.indices.byteOffset||0,C=o.sparse.values.byteOffset||0,E=new I(l[1],v,o.sparse.count*w),S=new h(l[2],C,o.sparse.count*u);c!==null&&(g=new $e(g.array.slice(),g.itemSize,g.normalized));for(let M=0,_=E.length;M<_;M++){let T=E[M];if(g.setX(T,S[M*u]),u>=2&&g.setY(T,S[M*u+1]),u>=3&&g.setZ(T,S[M*u+2]),u>=4&&g.setW(T,S[M*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){let t=this.json,i=this.options,a=t.textures[e].source,l=t.images[a],c=this.textureLoader;if(l.uri){let u=i.manager.getHandler(l.uri);u!==null&&(c=u)}return this.loadTextureImage(e,a,c)}loadTextureImage(e,t,i){let o=this,a=this.json,l=a.textures[e],c=a.images[t],u=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[u])return this.textureCache[u];let h=this.loadImageSource(t,i).then(function(A){A.flipY=!1,A.name=l.name||c.name||"",A.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(A.name=c.uri);let d=(a.samplers||{})[l.sampler]||{};return A.magFilter=Y3[d.magFilter]||Et,A.minFilter=Y3[d.minFilter]||Fs,A.wrapS=Z3[d.wrapS]||ji,A.wrapT=Z3[d.wrapT]||ji,o.associations.set(A,{textures:e}),A}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){let i=this,o=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());let l=o.images[e],c=self.URL||self.webkitURL,u=l.uri||"",h=!1;if(l.bufferView!==void 0)u=i.getDependency("bufferView",l.bufferView).then(function(f){h=!0;let d=new Blob([f],{type:l.mimeType});return u=c.createObjectURL(d),u});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let A=Promise.resolve(u).then(function(f){return new Promise(function(d,p){let m=d;t.isImageBitmapLoader===!0&&(m=function(b){let g=new jt(b);g.needsUpdate=!0,d(g)}),t.load(Gs.resolveURL(f,a.path),m,void 0,p)})}).then(function(f){return h===!0&&c.revokeObjectURL(u),f.userData.mimeType=l.mimeType||RJ(l.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),f});return this.sourceCache[e]=A,A}assignTexture(e,t,i,o){let a=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),a.extensions[Ft.KHR_TEXTURE_TRANSFORM]){let c=i.extensions!==void 0?i.extensions[Ft.KHR_TEXTURE_TRANSFORM]:void 0;if(c){let u=a.associations.get(l);l=a.extensions[Ft.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),a.associations.set(l,u)}}return o!==void 0&&(l.colorSpace=o),e[t]=l,l})}assignFinalMaterial(e){let t=e.geometry,i=e.material,o=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){let c="PointsMaterial:"+i.uuid,u=this.cache.get(c);u||(u=new ha,_n.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(c,u)),i=u}else if(e.isLine){let c="LineBasicMaterial:"+i.uuid,u=this.cache.get(c);u||(u=new bn,_n.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(c,u)),i=u}if(o||a||l){let c="ClonedMaterial:"+i.uuid+":";o&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let u=this.cache.get(c);u||(u=i.clone(),a&&(u.vertexColors=!0),l&&(u.flatShading=!0),o&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(c,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return Jn}loadMaterial(e){let t=this,i=this.json,o=this.extensions,a=i.materials[e],l,c={},u=a.extensions||{},h=[];if(u[Ft.KHR_MATERIALS_UNLIT]){let f=o[Ft.KHR_MATERIALS_UNLIT];l=f.getMaterialType(),h.push(f.extendParams(c,a,t))}else{let f=a.pbrMetallicRoughness||{};if(c.color=new De(1,1,1),c.opacity=1,Array.isArray(f.baseColorFactor)){let d=f.baseColorFactor;c.color.fromArray(d),c.opacity=d[3]}f.baseColorTexture!==void 0&&h.push(t.assignTexture(c,"map",f.baseColorTexture,it)),c.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,c.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(c,"metalnessMap",f.metallicRoughnessTexture)),h.push(t.assignTexture(c,"roughnessMap",f.metallicRoughnessTexture))),l=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}a.doubleSided===!0&&(c.side=Pt);let A=a.alphaMode||yI.OPAQUE;if(A===yI.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,A===yI.MASK&&(c.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&l!==Nt&&(h.push(t.assignTexture(c,"normalMap",a.normalTexture)),c.normalScale=new he(1,1),a.normalTexture.scale!==void 0)){let f=a.normalTexture.scale;c.normalScale.set(f,f)}return a.occlusionTexture!==void 0&&l!==Nt&&(h.push(t.assignTexture(c,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&l!==Nt&&(c.emissive=new De().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&l!==Nt&&h.push(t.assignTexture(c,"emissiveMap",a.emissiveTexture,it)),Promise.all(h).then(function(){let f=new l(c);return a.name&&(f.name=a.name),Sl(f,a),t.associations.set(f,{materials:e}),a.extensions&&Zc(o,f,a),f})}createUniqueName(e){let t=Lt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,o=this.primitiveCache;function a(c){return i[Ft.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(u){return K3(u,c,t)})}let l=[];for(let c=0,u=e.length;c<u;c++){let h=e[c],A=DJ(h),f=o[A];if(f)l.push(f.promise);else{let d;h.extensions&&h.extensions[Ft.KHR_DRACO_MESH_COMPRESSION]?d=a(h):d=K3(new Ke,h,t),o[A]={primitive:h,promise:d},l.push(d)}}return Promise.all(l)}loadMesh(e){let t=this,i=this.json,o=this.extensions,a=i.meshes[e],l=a.primitives,c=[];for(let u=0,h=l.length;u<h;u++){let A=l[u].material===void 0?MJ(this.cache):this.getDependency("material",l[u].material);c.push(A)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(u){let h=u.slice(0,u.length-1),A=u[u.length-1],f=[];for(let p=0,m=A.length;p<m;p++){let b=A[p],g=l[p],w,I=h[p];if(g.mode===As.TRIANGLES||g.mode===As.TRIANGLE_STRIP||g.mode===As.TRIANGLE_FAN||g.mode===void 0)w=a.isSkinnedMesh===!0?new cl(b,I):new He(b,I),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),g.mode===As.TRIANGLE_STRIP?w.geometry=Wy(w.geometry,jd):g.mode===As.TRIANGLE_FAN&&(w.geometry=Wy(w.geometry,Wh));else if(g.mode===As.LINES)w=new fi(b,I);else if(g.mode===As.LINE_STRIP)w=new Ar(b,I);else if(g.mode===As.LINE_LOOP)w=new Bh(b,I);else if(g.mode===As.POINTS)w=new Al(b,I);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(w.geometry.morphAttributes).length>0&&_J(w,a),w.name=t.createUniqueName(a.name||"mesh_"+e),Sl(w,a),g.extensions&&Zc(o,w,g),t.assignFinalMaterial(w),f.push(w)}for(let p=0,m=f.length;p<m;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return a.extensions&&Zc(o,f[0],a),f[0];let d=new Yt;a.extensions&&Zc(o,d,a),t.associations.set(d,{meshes:e});for(let p=0,m=f.length;p<m;p++)d.add(f[p]);return d})}loadCamera(e){let t,i=this.json.cameras[e],o=i[i.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new rn(Jt.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):i.type==="orthographic"&&(t=new Ui(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Sl(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let o=0,a=t.joints.length;o<a;o++)i.push(this._loadNodeShallow(t.joints[o]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(o){let a=o.pop(),l=o,c=[],u=[];for(let h=0,A=l.length;h<A;h++){let f=l[h];if(f){c.push(f);let d=new ke;a!==null&&d.fromArray(a.array,h*16),u.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new ul(c,u)})}loadAnimation(e){let t=this.json,i=this,o=t.animations[e],a=o.name?o.name:"animation_"+e,l=[],c=[],u=[],h=[],A=[];for(let f=0,d=o.channels.length;f<d;f++){let p=o.channels[f],m=o.samplers[p.sampler],b=p.target,g=b.node,w=o.parameters!==void 0?o.parameters[m.input]:m.input,I=o.parameters!==void 0?o.parameters[m.output]:m.output;b.node!==void 0&&(l.push(this.getDependency("node",g)),c.push(this.getDependency("accessor",w)),u.push(this.getDependency("accessor",I)),h.push(m),A.push(b))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(u),Promise.all(h),Promise.all(A)]).then(function(f){let d=f[0],p=f[1],m=f[2],b=f[3],g=f[4],w=[];for(let I=0,v=d.length;I<v;I++){let C=d[I],E=p[I],S=m[I],M=b[I],_=g[I];if(C===void 0)continue;C.updateMatrix&&(C.updateMatrix(),C.matrixAutoUpdate=!0);let T=i._createAnimationTracks(C,E,S,M,_);if(T)for(let D=0;D<T.length;D++)w.push(T[D])}return new Os(a,void 0,w)})}createNodeMesh(e){let t=this.json,i=this,o=t.nodes[e];return o.mesh===void 0?null:i.getDependency("mesh",o.mesh).then(function(a){let l=i._getNodeRef(i.meshCache,o.mesh,a);return o.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let u=0,h=o.weights.length;u<h;u++)c.morphTargetInfluences[u]=o.weights[u]}),l})}loadNode(e){let t=this.json,i=this,o=t.nodes[e],a=i._loadNodeShallow(e),l=[],c=o.children||[];for(let h=0,A=c.length;h<A;h++)l.push(i.getDependency("node",c[h]));let u=o.skin===void 0?Promise.resolve(null):i.getDependency("skin",o.skin);return Promise.all([a,Promise.all(l),u]).then(function(h){let A=h[0],f=h[1],d=h[2];d!==null&&A.traverse(function(p){p.isSkinnedMesh&&p.bind(d,LJ)});for(let p=0,m=f.length;p<m;p++)A.add(f[p]);return A})}_loadNodeShallow(e){let t=this.json,i=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let a=t.nodes[e],l=a.name?o.createUniqueName(a.name):"",c=[],u=o._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return u&&c.push(u),a.camera!==void 0&&c.push(o.getDependency("camera",a.camera).then(function(h){return o._getNodeRef(o.cameraCache,a.camera,h)})),o._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){c.push(h)}),this.nodeCache[e]=Promise.all(c).then(function(h){let A;if(a.isBone===!0?A=new bo:h.length>1?A=new Yt:h.length===1?A=h[0]:A=new mt,A!==h[0])for(let f=0,d=h.length;f<d;f++)A.add(h[f]);if(a.name&&(A.userData.name=a.name,A.name=l),Sl(A,a),a.extensions&&Zc(i,A,a),a.matrix!==void 0){let f=new ke;f.fromArray(a.matrix),A.applyMatrix4(f)}else a.translation!==void 0&&A.position.fromArray(a.translation),a.rotation!==void 0&&A.quaternion.fromArray(a.rotation),a.scale!==void 0&&A.scale.fromArray(a.scale);return o.associations.has(A)||o.associations.set(A,{}),o.associations.get(A).nodes=e,A}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],o=this,a=new Yt;i.name&&(a.name=o.createUniqueName(i.name)),Sl(a,i),i.extensions&&Zc(t,a,i);let l=i.nodes||[],c=[];for(let u=0,h=l.length;u<h;u++)c.push(o.getDependency("node",l[u]));return Promise.all(c).then(function(u){for(let A=0,f=u.length;A<f;A++)a.add(u[A]);let h=A=>{let f=new Map;for(let[d,p]of o.associations)(d instanceof _n||d instanceof jt)&&f.set(d,p);return A.traverse(d=>{let p=o.associations.get(d);p!=null&&f.set(d,p)}),f};return o.associations=h(a),a})}_createAnimationTracks(e,t,i,o,a){let l=[],c=e.name?e.name:e.uuid,u=[];Cl[a.path]===Cl.weights?e.traverse(function(d){d.morphTargetInfluences&&u.push(d.name?d.name:d.uuid)}):u.push(c);let h;switch(Cl[a.path]){case Cl.weights:h=us;break;case Cl.rotation:h=Ur;break;case Cl.position:case Cl.scale:default:switch(i.itemSize){case 1:h=us;break;case 2:case 3:h=Us;break}break}let A=o.interpolation!==void 0?IJ[o.interpolation]:ol,f=this._getArrayFromAccessor(i);for(let d=0,p=u.length;d<p;d++){let m=new h(u[d]+"."+Cl[a.path],t.array,f,A);A==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),l.push(m)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=zI(t.constructor),o=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a++)o[a]=t[a]*i;t=o}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let o=this instanceof Ur?QI:Xy;return new o(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function BJ(n,e,t){let i=e.attributes,o=new Ht;if(i.POSITION!==void 0){let c=t.json.accessors[i.POSITION],u=c.min,h=c.max;if(u!==void 0&&h!==void 0){if(o.set(new U(u[0],u[1],u[2]),new U(h[0],h[1],h[2])),c.normalized){let A=zI(jh[c.componentType]);o.min.multiplyScalar(A),o.max.multiplyScalar(A)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let a=e.targets;if(a!==void 0){let c=new U,u=new U;for(let h=0,A=a.length;h<A;h++){let f=a[h];if(f.POSITION!==void 0){let d=t.json.accessors[f.POSITION],p=d.min,m=d.max;if(p!==void 0&&m!==void 0){if(u.setX(Math.max(Math.abs(p[0]),Math.abs(m[0]))),u.setY(Math.max(Math.abs(p[1]),Math.abs(m[1]))),u.setZ(Math.max(Math.abs(p[2]),Math.abs(m[2]))),d.normalized){let b=zI(jh[d.componentType]);u.multiplyScalar(b)}c.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(c)}n.boundingBox=o;let l=new Vt;o.getCenter(l.center),l.radius=o.min.distanceTo(o.max)/2,n.boundingSphere=l}function K3(n,e,t){let i=e.attributes,o=[];function a(l,c){return t.getDependency("accessor",l).then(function(u){n.setAttribute(c,u)})}for(let l in i){let c=GI[l]||l.toLowerCase();c in n.attributes||o.push(a(i[l],c))}if(e.indices!==void 0&&!n.index){let l=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});o.push(l)}return Sl(n,e),BJ(n,e,t),Promise.all(o).then(function(){return e.targets!==void 0?TJ(n,e.targets,t):n})}var VI=new WeakMap,Yy=class extends pn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,o){let a=new si(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,l=>{this.parse(l,t,o)},i,o)}parse(e,t,i){this.decodeDracoFile(e,t,null,null,it).catch(i)}decodeDracoFile(e,t,i,o,a=kr){let l={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:a};return this.decodeGeometry(e,l).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(VI.has(e)){let u=VI.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o,a=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(a,l).then(u=>(o=u,new Promise((h,A)=>{o._callbacks[a]={resolve:h,reject:A},o.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return c.catch(()=>!0).then(()=>{o&&a&&this._releaseTask(o,a)}),VI.set(e,{key:i,promise:c}),c}_createGeometry(e){let t=new Ke;e.index&&t.setIndex(new $e(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let o=e.attributes[i],a=o.name,l=o.array,c=o.itemSize,u=new $e(l,c);a==="color"&&(this._assignVertexColorSpace(u,o.vertexColorSpace),u.normalized=!(l instanceof Float32Array)),t.setAttribute(a,u)}return t}_assignVertexColorSpace(e,t){if(t!==it)return;let i=new De;for(let o=0,a=e.count;o<a;o++)i.fromBufferAttribute(e,o).convertSRGBToLinear(),e.setXYZ(o,i.r,i.g,i.b)}_loadLibrary(e,t){let i=new si(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((o,a)=>{i.load(e,o,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let o=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let a=kJ.toString(),l=["/* draco decoder */",o,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(a){let l=a.data;switch(l.type){case"decode":o._callbacks[l.id].resolve(l);break;case"error":o._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,a){return o._taskLoad>a._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function kJ(){let n,e;onmessage=function(l){let c=l.data;switch(c.type){case"init":n=c.decoderConfig,e=new Promise(function(A){n.onModuleLoaded=function(f){A({draco:f})},DracoDecoderModule(n)});break;case"decode":let u=c.buffer,h=c.taskConfig;e.then(A=>{let f=A.draco,d=new f.Decoder;try{let p=t(f,d,new Int8Array(u),h),m=p.attributes.map(b=>b.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:c.id,error:p.message})}finally{f.destroy(d)}});break}};function t(l,c,u,h){let A=h.attributeIDs,f=h.attributeTypes,d,p,m=c.GetEncodedGeometryType(u);if(m===l.TRIANGULAR_MESH)d=new l.Mesh,p=c.DecodeArrayToMesh(u,u.byteLength,d);else if(m===l.POINT_CLOUD)d=new l.PointCloud,p=c.DecodeArrayToPointCloud(u,u.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let b={index:null,attributes:[]};for(let g in A){let w=self[f[g]],I,v;if(h.useUniqueIDs)v=A[g],I=c.GetAttributeByUniqueId(d,v);else{if(v=c.GetAttributeId(d,l[A[g]]),v===-1)continue;I=c.GetAttribute(d,v)}let C=o(l,c,d,g,w,I);g==="color"&&(C.vertexColorSpace=h.vertexColorSpace),b.attributes.push(C)}return m===l.TRIANGULAR_MESH&&(b.index=i(l,c,d)),l.destroy(d),b}function i(l,c,u){let A=u.num_faces()*3,f=A*4,d=l._malloc(f);c.GetTrianglesUInt32Array(u,f,d);let p=new Uint32Array(l.HEAPF32.buffer,d,A).slice();return l._free(d),{array:p,itemSize:1}}function o(l,c,u,h,A,f){let d=f.num_components(),m=u.num_points()*d,b=m*A.BYTES_PER_ELEMENT,g=a(l,A),w=l._malloc(b);c.GetAttributeDataArrayForAllPoints(u,f,g,b,w);let I=new A(l.HEAPF32.buffer,w,m).slice();return l._free(w),{name:h,array:I,itemSize:d}}function a(l,c){switch(c){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}var Qr=Ao(q3());function*PJ(n,e){let t=0;for(let i of n)yield e(i,t++)}function*NJ(n,e){let t=0;for(let i of n)e(i,t++)&&(yield i)}function Mi(n,e){let t=new Qr.Tween(n).easing(Qr.Easing.Cubic.InOut);return e||t.start(),t}function FJ(n,e){let t=new Qr.Tween(n).easing(Qr.Easing.Linear);return e||t.start(),t}function $3(){try{Qr.update()}catch(n){console.warn("tween update lossage",n),Qr.removeAll()}}window.tween=Mi;window.tweenupdate=$3;function UJ(){return Qr.isRunning()}function OJ(n,e){return n.chain(e)}function eN(n){return document.querySelector(n)}function Gr(n,e,t){return new U(n,e,t)}window.vec3=Gr;function QJ(n,e,t,i){return new It(n,e,t,i)}function GJ(n){return n.position}function zJ(n,e,t){e=e||10,t=t||50;let i=!1,o=[],a=function(){if(o.length&&!i){i=!0;for(let l=0;l<e&&o.length;l++)o.shift().call();setTimeout(function(){i=!1,a()},t)}};return function(){o.push(n.bind(this,...arguments)),a()}}function HJ(n,e,t){return zJ(function(){n.modelsync&&n.modelsync(t)},20,51)}var Jh=HJ;function tN(n,e,t,i,o,a){return Mi(n.position,a).to({x:e,y:t,z:i},o).on("update",Jh(n))}window.slide=tN;function nN(n,e,t){return Mi(n.scale).to({x:e,y:e,z:e},t||1e3).on("update",Jh(n))}window.grow=nN;function VJ(n,e,t){let i=n.scale.x,o=n.scale.z;return Mi(n.scale).to({x:i,y:e,z:o},t)}function iN(n,e,t,i,o,a){return Mi(n.quaternion).to({x:e,y:t,z:i,w:o},a||1e3).on("update",Jh(n))}window.toquat=iN;function XI(n,e,t,i,o){return Mi(n.rotation).to({x:e,y:t,z:i},o||1e3).on("update",Jh(n))}window.rot=XI;function WJ(n,e,t,i,o){let a=new It,l=new mt,c,u={t:0};return a.copy(n.quaternion),l.quaternion.copy(a),l.rotateOnAxis(e,t),c=l.quaternion,Mi(u).to({t:1},i).easing(Qr.Easing.Linear.None).on("update",function(){n.quaternion.slerpQuaternions(a,c,u.t),o&&o()})}function rN(n,e,t){return WJ(n,Gr(0,1,0),e,t,Jh(n))}function XJ(n,e,t){return Mi(n.rotation).to({y:e},t||1e3).on("update",Jh(n))}function YJ(n,e,t){let i=n.rotation;return XI(n,i.x,e,i.z,t)}window.roty=rN;function YI(n,e){var t=[""].concat(Array.prototype.slice.call(arguments,0));console.log.apply(console,arguments)}function ZJ(n){return new Promise(e=>setTimeout(e,n))}function KJ(n,e){var t=document.createElement("script");t.type="module",t.readyState?t.onreadystatechange=function(){YI("ldmodule ready",t),(t.readyState=="loaded"||t.readyState=="complete")&&(t.onreadystatechange=null,e&&e(t))}:e&&(t.onload=function(){e(t)}),t.src=n,document.getElementsByTagName("head")[0].appendChild(t)}function sN(n,e){var t=document.createElement("script");t.type="application/javascript",t.readyState?t.onreadystatechange=function(){YI("ldready",t),(t.readyState=="loaded"||t.readyState=="complete")&&(t.onreadystatechange=null,e&&e(t))}:e&&(t.onload=function(){e(t)}),t.src=n,document.getElementsByTagName("head")[0].appendChild(t)}window.ld=sN;function tp(n,e,t,i){e=e||.8,t=t??0,i=i||1e3;let o=lim,a=o.orbitcontrols||o.fpcontrols,l=o.camera;if(n.position?n=n.position.clone():n=n.clone(),o.orbitcontrols&&Mi(a.target).to({x:n.x,y:n.y,z:n.z},i).on("update",function(c){l.lookAt(c),l.userData.targetRotation.copy(l.rotation)}),o.fpcontrols){let c=l.matrixWorld.clone(),u=new U,h=new It,A=new U;Mi({n:0}).to({n:1},i).on("update",f=>{c.lookAt(l.position,n,l.up),c.decompose(u,h,A),l.quaternion.slerp(h,f.n),l.userData.targetRotation.copy(l.rotation)})}Mi(l.position).to({x:n.x,y:n.y+t,z:n.z+e},i).on("update",function(c){l.userData.targetPosition.copy(l.position)})}function oN(n,e){e=e||1e3;let t=lim,i=t.orbitcontrols||t.fpcontrols,o=t.camera;if(n.position?n=n.position.clone():n=n.clone(),t.orbitcontrols&&Mi(i.target).to({x:n.x,y:n.y,z:n.z},e).on("update",function(a){o.lookAt(a),o.userData.targetRotation.copy(o.rotation)}),t.fpcontrols){let a=o.matrixWorld.clone(),l=new U,c=new It,u=new U;Mi({n:0}).to({n:1},e).on("update",h=>{a.lookAt(o.position,n,o.up),a.decompose(l,c,u),o.quaternion.slerp(c,h.n),o.userData.targetRotation.copy(o.rotation)})}}window.lookat=oN;function jJ(n,e,t,i){let o=new Ht().setFromObject(n),a=o.max.y-o.min.y,l=Gr(0,a/2,0).add(n.position);return tp(l,a*1.1,a/4)}window.lookto=tp;function aN(n,e,t,i,o,a){let l=window.app,c=l.orbitcontrols||l.fpcontrols,u=l.camera,h=1e3;return(i||o||a)&&Mi(c.target).to({x:i,y:o,z:a},h).on("update",()=>c.update()),Mi(u.position).to({x:n,y:e,z:t},h).on("update",()=>c.update())}window.camto=aN;function JJ(n){return JSON.stringify(n)}function qh(n,e){e=e||(n.path&&n.path.length?n.path[0]:n.srcElement),document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),e.exitFullscreen&&e.exitFullscreen()):e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}window.togglefullscreen=qh;window.togglefullscreen0=lN;function lN(n){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen()}function qJ(n,e,t){let i=new XMLHttpRequest;return e&&i.overrideMimeType&&i.overrideMimeType(e),i.open("GET",n,!0),t&&(i.onreadystatechange=function(o){i.readyState==4&&t(i)}),i.send(null),i}function ZI(n,e,t){let i=new XMLHttpRequest;return i.open("POST",n,!0),i.setRequestHeader("Content-type","application/json"),t&&(i.onreadystatechange=function(){i.readyState===4&&t(i)}),i.send(e),i}var Ky;function cN(n,e,t){let i=new ep;Ky||(Ky=new Yy,Ky.setDecoderPath("./jsm/libs/draco/")),i.setDRACOLoader(Ky),i.setPath(e||"./stuff/"),i.load(n,function(o){t&&t(o)})}function uN(n,e,t){let i=new mt;return e=e||"./stuff/",np(n,e,o=>{let a=o.scene;if(o.animations.length){let l=new Yc(a);o.animations.forEach(c=>l.clipAction(c).play())}i.add(a),a.traverse(l=>{l.receiveShadow=!1,l.castShadow=!0,l.frustumCulled=!1,l.material&&(console.warn(l.material),l.material.transparent=!0)}),t&&t(i)}),i}var np=cN;window.gltf=np;window.sgltf=uN;function $J(n,e,t){let i=new ep;i.setPath(e||"./"),i.load(n,function(o){t&&t(o)})}function eq(n,e){new Qy().load(n,i=>e&&e(i))}function tq(n,e){let t=Date.now(),i=e||1e3;for(;--i;)n();return Date.now()-t}function nq(n,e){let t=n.width,i=n.height;e&&(t*=e,i*=e);let o=document.createElement("canvas");return o.width=t,o.height=i,o.getContext("2d").drawImage(n,0,0,t,i),o.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,""),o.toDataURL("image/png")}function iq(n,e){let t=Date.now(),i={timestamp:t,data:n};return ZI("https://"+localconfig.server+":"+localconfig.port+"/putimg",JSON.stringify(i),o=>console.log("putimg",o)),t}function rq(n,e){e=e||Date.now();let t={data:n,timestamp:e};return ZI("https://"+localconfig.server+":"+localconfig.port+"/rdb/putimg",JSON.stringify(t)),t}function sq(n,e,t){new OBJLoader().setPath(e||"./stuff/").load(n,function(i){t&&t(i)})}function oq(n,e){setInterval(()=>hN(n),e||200)}var WI=Gr(-1,-1,-1),aq=Gr(0,0,0);function hN(n){let e=n.camera.position,t=e.distanceTo(WI),i=e.distanceTo(aq);if(t<1e-6)return;WI=e.clone();let o=e.toArray().map(a=>a.toFixed(3));o.push(i.toFixed(2)),n.setstatus(o+"<br>tracking: "+n.trackingstate)}function AN(n){let e=document.createElement("video"),t=new Td(e);return e.style.visible="hidden",e.src=n,e.muted=!0,e.autoplay=!1,e.playsinline=!1,e.webkitPlaysinline=!1,e.crossOrigin="anonymous",t.vid=e,t}function jy(n){let e=new AN(n),t=e.vid,i=new He(new wn(1,.8,1),new Dn({color:16777215,map:e,transparent:!0,side:Pt}));return i.tag="vidbox",i.vid=t,t.onloadeddata=()=>{t.pause(),t.currentTime=0,t.playsinline=!0,t.loop=!0,t.fullscreen=!1},i.castShadow=!0,i.receiveShadow=!1,i}window.vidbox=jy;function fN(n,e){e===void 0&&(e=!0),n.traverse(t=>t.material&&(t.material.wireframe=e))}window.wireframe=fN;function lq(n,e){document.getElementById(n).addEventListener("click",e)}function cq(n,e){Object.keys(e.exports).forEach(t=>{window[t]=e.exports[t]})}function uq(n){return new n}function hq(n,e){let t,i;return function(){let o=this,a=arguments;i?(clearTimeout(t),t=setTimeout(function(){Date.now()-i>=e&&(n.apply(o,a),i=Date.now())},e-(Date.now()-i))):(n.apply(o,a),i=Date.now())}}async function dN(n){return await import("./"+n)}window.loadjs=dN;function Aq(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}window.easeInOutQuad=Aq;function fq(n,e,t,i){return(n/=i/2)<1?t/2*n*n*n+e:t/2*((n-=2)*n*n+2)+e}window.easeInOutCubic=fq;function dq(){let n=document.createElement("iframe");return n.sandbox="allow-scripts allow-same-origin",n.src="sandbox.html",n.style.visible=!1,document.body.append(n),n.send=e=>n.contentWindow.postMessage(e),n}window.sandboxframe=dq;function pq(n){let e=new Blob([n],{type:"application/javascript"}),t=new Worker(URL.createObjectURL(e));return t.onmessage=i=>console.log("worker.onmessage",i.data),t}window.blobworker=pq;function pN(n){eN("#status").innerHTML=n}window.setstatus=pN;var ai=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},mq=new Ui(-1,1,1,-1,0,1),jI=new Ke;jI.setAttribute("position",new Ve([-1,3,0,-1,-1,0,3,-1,0],3));jI.setAttribute("uv",new Ve([0,2,0,0,2,0],2));var pr=class{constructor(e){this._mesh=new He(jI,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,mq)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var Jy=class extends yt{constructor(e){super({uniforms:{uDiffuse:{value:null},uResolution:{value:new he(1,1)},uDepthBuffer:{value:null},uSurfaceBuffer:{value:null},uCameraNear:{value:e.camera.near},uCameraFar:{value:e.camera.far},uColorTexture:{value:"./textures/color-noise.png"},uCloudTexture:{value:"./textures/cloud-noise.png"}},fragmentShader:`
#include <packing>

vec2 grad(ivec2 z) {
    // 2D to 1D  (feel free to replace by some other)
    int n = z.x+z.y*11111;

    // Hugo Elias hash (feel free to replace by another one)
    n = (n<<13)^n;
    n = (n*(n*n*15731+789221)+1376312589)>>16;

    #if 0

    // simple random vectors
    return vec2(cos(float(n)), sin(float(n)));

    #else

    // Perlin style vectors
    n &= 7;
    vec2 gr = vec2(n&1, n>>1)*2.0-1.0;
    return (n>=6) ? vec2(0.0, gr.x) :
    (n>=4) ? vec2(gr.x, 0.0) :
    gr;
    #endif
}

float noise(in vec2 p) {
    ivec2 i = ivec2(floor(p));
    vec2 f = fract(p);

    vec2 u = f*f*(3.0-2.0*f);// feel free to replace by a quintic smoothstep instead

    return mix(mix(dot(grad(i+ivec2(0, 0)), f-vec2(0.0, 0.0)),
    dot(grad(i+ivec2(1, 0)), f-vec2(1.0, 0.0)), u.x),
    mix(dot(grad(i+ivec2(0, 1)), f-vec2(0.0, 1.0)),
    dot(grad(i+ivec2(1, 1)), f-vec2(1.0, 1.0)), u.x), u.y);
}

uniform sampler2D uDiffuse;
uniform sampler2D uSurfaceBuffer;
uniform sampler2D uDepthBuffer;

uniform sampler2D uCloudTexture;
uniform sampler2D uColorTexture;

uniform float uNear;
uniform float uFar;

uniform vec2 uResolution;

varying vec2 vUv;


float valueAtPoint(sampler2D image, vec2 coord, vec2 texel, vec2 point) {
    vec3 luma = vec3(0.299, 0.587, 0.114);

    return dot(texture2D(image, coord + texel * point).xyz, luma);
}

float diffuseValue(int x, int y) {
    float cutoff = 40.0;
    float offset =  0.5 / cutoff;
    float noiseValue = clamp(texture(uCloudTexture, vUv).r, 0.0, cutoff) / cutoff - offset;

    return valueAtPoint(uDiffuse, vUv + noiseValue, vec2(1.0 / uResolution.x, 1.0 / uResolution.y), vec2(x, y)) * 0.6;
}

float normalValue(int x, int y) {
    float cutoff = 50.0;
    float offset = 0.5 / cutoff;
    float noiseValue = clamp(texture(uCloudTexture, vUv).r, 0.0, cutoff) / cutoff - offset;

    return valueAtPoint(uSurfaceBuffer, vUv + noiseValue, vec2(1.0 / uResolution.x, 1.0 / uResolution.y), vec2(x, y)) * 0.3;
}

float getValue(int x, int y) {
    float noiseValue = noise(gl_FragCoord.xy);
    noiseValue = noiseValue * 2.0 - 1.0;
    noiseValue *= 10.0;

    return diffuseValue(x, y) + normalValue(x, y) * noiseValue;
}

float getPixelDepth(int x, int y) {
    float fragCoordZ = texture2D(uDepthBuffer, vUv + vec2(x, y) * 1.0 / uResolution).x;
    float viewZ = perspectiveDepthToViewZ(fragCoordZ, uNear, uFar);
    return viewZToOrthographicDepth(viewZ, uNear, uFar);
}

vec3 getSurfaceValue(int x, int y) {
    return texture2D(uSurfaceBuffer, vUv + vec2(x, y) / uResolution).rgb;
}

float sobelFloat(sampler2D diffuse, vec2 uv, vec2 texel) {
    // kernel definition (in glsl matrices are filled in column-major order)
    const mat3 Gx = mat3(-1, -2, -1, 0, 0, 0, 1, 2, 1);// x direction kernel
    const mat3 Gy = mat3(-1, 0, 1, -2, 0, 2, -1, 0, 1);// y direction kernel

    // fetch the 3x3 neighbourhood of a fragment

    // first column
    float tx0y0 = getValue(-1, -1);
    float tx0y1 = getValue(-1, 0);
    float tx0y2 = getValue(-1, 1);

    // second column
    float tx1y0 = getValue(0, -1);
    float tx1y1 = getValue(0, 0);
    float tx1y2 = getValue(0, 1);

    // third column
    float tx2y0 = getValue(1, -1);
    float tx2y1 = getValue(1, 0);
    float tx2y2 = getValue(1, 1);

    // gradient value in x direction
    float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +
    Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +
    Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;

    // gradient value in y direction
    float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +
    Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +
    Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;

    // magnitute of the total gradient
    float G = (valueGx * valueGx) + (valueGy * valueGy);
    return clamp(G, 0.0, 1.0);
}

float readDepth( sampler2D depthSampler, vec2 coord ) {
    float fragCoordZ = texture2D( depthSampler, coord ).x;
    float viewZ = perspectiveDepthToViewZ( fragCoordZ, uNear, uFar );
    return viewZToOrthographicDepth( viewZ, uNear, uFar );
}


void main() {
    vec2 size = vec2(textureSize(uDiffuse, 0));
    vec4 texel = texture2D(uDiffuse, vUv);

    vec2 fragCoord = gl_FragCoord.xy;

    vec2 noiseValue = vec2(noise(fragCoord));
    noiseValue = noiseValue * 2.0 - 1.0;
    noiseValue *= 10.0;

    vec4 cloudNoiseValue = texture2D(uCloudTexture, vUv);

    float sobelValue = sobelFloat(uDiffuse, vUv, 1.0 / uResolution);
    sobelValue = smoothstep(0.01, 0.03, sobelValue);

    vec4 uLineColor = vec4(0.32, 0.12, 0.2, 1.0);

    if (sobelValue > 0.1) {
        gl_FragColor = uLineColor * 0.5;
    } else {
        gl_FragColor = texel;
    }
}
`,vertexShader:`
varying vec2 vUv;

void main() {

    vUv = uv;

    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}

`}),this.uniforms.uResolution.value=new he(window.innerWidth,window.innerHeight)}update(){}resize(){this.uniforms.uResolution.value=new he(window.innerWidth,window.innerHeight)}};var qy=class extends ai{constructor(e){super(),this.engine=e,this.fsQuad=new pr,this.material=new Jy(this.engine),this.fsQuad.material=this.material,console.warn("pencil",window.innerWidth,window.innerHeight);let t=new _t(window.innerWidth,window.innerHeight);t.texture.format=ni,t.texture.type=Tn,t.texture.minFilter=Tt,t.texture.magFilter=Tt,t.texture.generateMipmaps=!1,t.stencilBuffer=!1,this.surfaceBuffer=t,this.normalMaterial=new Qh,this.material.uniforms.uCameraNear.value=this.engine.camera.near,this.material.uniforms.uCameraFar.value=this.engine.camera.far}render(e,t,i){let o=t.depthBuffer;t.depthBuffer=!1,e.setRenderTarget(this.surfaceBuffer);let a=this.engine.scene.overrideMaterial;this.engine.scene.overrideMaterial=this.normalMaterial,e.render(this.engine.scene,this.engine.camera),this.engine.scene.overrideMaterial=a,this.material.uniforms.uDiffuse.value=i.texture,this.material.uniforms.uDepthBuffer.value=i.depthTexture,this.material.uniforms.uSurfaceBuffer.value=this.surfaceBuffer.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e)),t.depthBuffer=o}dispose(){this.material.dispose(),this.fsQuad.dispose()}setSize(){this.material.resize()}};var $ge=Ao(JI()),GN=Ao($y()),zN=Ao(i2());function eA(n){return Math.min(Math.max(n,0),1)}var jge=window.webkit!==void 0,Gq="featurePoint",zq="horizontalPlane",Hq="verticalPlane",Vq="existingPlane",Wq="existingPlaneUsingExtent";var iv={[Gq]:1,[zq]:2,[Hq]:4,[Vq]:8,[Wq]:16},jc={normal:"normal",notAvailable:"notAvailable",excessiveMotion:"excessiveMotion",insufficientFeatures:"insufficientFeatures",initializing:"initializing",relocalizing:"relocalizing"};var Xq={camera:{near:.001,far:1e3},pointCloud:!1,imageFrame:!1},Oi=Xq;var Yq=new class{constructor(){(0,GN.default)(this),this.sethandlers(),(0,zN.default)(Oi).on("change",this.updateConfig)}onARFrame(e){this.emit("frame",JSON.parse(e))}onHitTest(e){this.emit("hitTest",JSON.parse(e))}onAnchorsAdded(e){this.emit("anchorsAdded",JSON.parse(e))}onAnchorsRemoved(e){this.emit("anchorsRemoved",JSON.parse(e))}onSessionInterupted(){this.emit("sessionInterupted")}onSessionInteruptedEnded(){this.emit("sessionInteruptedEnded")}onTrackingStateChange(e){this.emit("trackingStateChange",e)}hitTest(e,t,i=iv.featurePoint){let o={action:"hitTest",value:{x:eA(e,0,1),y:eA(t,0,1)},hitType:i};this.postMessage(o)}addAnchor(e=[]){let t={action:"addAnchor",value:e};this.postMessage(t)}removeAnchors(e=[]){let t={action:"removeAnchors",value:e};this.postMessage(t)}loadPage(e){let t={action:"loadPage",value:e};this.postMessage(t)}resetSession(){let e={action:"resetSession"};this.postMessage(e)}sethandlers(){this.updateConfig=()=>{let e={action:"config",value:Oi};this.postMessage(e)},this.postMessage=e=>{try{window.webkit.messageHandlers.callbackHandler.postMessage(e)}catch(t){if(!window.webkit)return;console.warn("webkit callback",t)}}}},HN=Yq;var s0e=Ao(JI()),VN=Ao($y()),WN=Ao(i2());var Zq=new class{constructor(){(0,VN.default)(this),this.sethandlers(),(0,WN.default)(Oi).on("change",this.updateConfig)}onARFrame(e){this.emit("frame",JSON.parse(e))}onHitTest(e){this.emit("hitTest",JSON.parse(e))}onAnchorsAdded(e){this.emit("anchorsAdded",JSON.parse(e))}onAnchorsRemoved(e){this.emit("anchorsRemoved",JSON.parse(e))}onSessionInterupted(){this.emit("sessionInterupted")}onSessionInteruptedEnded(){this.emit("sessionInteruptedEnded")}onTrackingStateChange(e){this.emit("trackingStateChange",e)}hitTest(e,t,i=iv.featurePoint){let o={action:"hitTest",value:{x:eA(e,0,1),y:eA(t,0,1)},hitType:i};this.postMessage(o)}addAnchor(e=[]){let t={action:"addAnchor",value:e};this.postMessage(t)}removeAnchors(e=[]){let t={action:"removeAnchors",value:e};this.postMessage(t)}loadPage(e){let t={action:"loadPage",value:e};this.postMessage(t)}resetSession(){let e={action:"resetSession"};this.postMessage(e)}sethandlers(){this.updateConfig=()=>{let e={action:"config",value:Oi};this.postMessage(e)},this.postMessage=e=>{try{window.webkit.messageHandlers.callbackHandler.postMessage(e)}catch(t){if(!window.webkit)return;console.warn("webkit callback",t)}}}onDebug(e){this.emit("debug",e)}},Qi=Zq;var lp=class extends rn{update(e){this.quaternion.fromArray(e.quaternion),this.position.fromArray(e.position),this.projectionMatrix.fromArray(e.projection),this.updateMatrix()}};var r2="ARAnchor",cp="ARPlaneAnchor",rv=class{constructor(e,t){this.type=t,this.identifier=e}},sv=class extends rv{constructor(e){super(e.identifier,r2),this.group=new mt,this.group.matrixAutoUpdate=!1,this.update(e)}update(e){this.group.matrix.fromArray(e.transform)}},XN=new Ii(1,1,10,10);XN.applyMatrix4(new ke().makeRotationX(Math.PI/2));var ov=class extends rv{constructor(e){super(e.identifier,cp),this.group=new Yt,this.group.matrixAutoUpdate=!1,this.mesh=new He(XN,new Nt({wireframe:!1,opacity:.3,transparent:!0,side:Pt})),this.mesh.receiveShadow=!0,this.mesh.visible=!1,this.group.add(this.mesh),this.update(e)}update(e){this.group.matrix.fromArray(e.transform),this.mesh.position.fromArray(e.center),this.mesh.scale.x=e.extent[0],this.mesh.scale.z=e.extent[2]}getPosition(){return[this.group.matrix.elements[12],this.group.matrix.elements[13],this.group.matrix.elements[14]]}};var YN=.1,ZN=new Ii(YN,YN,1,1);ZN.applyMatrix4(new ke().makeRotationX(-Math.PI/2));var up=class{constructor(){this.tracking=!1,this.raycaster=new Yd,this.origin=new he(.5*2-1,-.5*2+1),this.nup=0,this.nintersect=0,this.mesh=new He(ZN,new yt({vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          varying vec2 vUv;

          float sdRect(vec2 uv2, vec2 tl, vec2 br) {
            vec2 d = max(tl - uv2, uv2 - br);
            return step(length(max(vec2(0.0), d)) + min(0.0, max(d.x, d.y)), 0.0);
          }

          void main() {
            float rect = 1.0 - sdRect(vUv, vec2(0.1), vec2(0.9));
            gl_FragColor = vec4(rect);
          }
        `,transparent:!0}))}update(e,t){this.objects=[],t.forEach(o=>{o.type===cp&&this.objects.push(o.mesh)}),this.raycaster.setFromCamera(this.origin,e);let i=this.raycaster.intersectObjects(this.objects)[0];this.nup++,i?(this.nintersect++,this.mesh.visible=!0,this.tracking=!0,this.mesh.position.copy(i.point),this.mesh.position.y+=1e-4):(this.mesh.visible=!1,this.tracking=!1)}getPosition(){return this.mesh.position}};var av=class n{static createButton(e){let t=document.createElement("button");function i(){let u=null;async function h(f){f.addEventListener("end",A),await e.xr.setSession(f),t.textContent="EXIT VR",u=f}function A(){u.removeEventListener("end",A),t.textContent="ENTER VR",u=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(u===null){let f={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",f).then(h)}else u.end()}}function o(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function a(){o(),t.textContent="VR NOT SUPPORTED"}function l(u){o(),console.warn("Exception when trying to call xr.isSessionSupported",u),t.textContent="VR NOT ALLOWED"}function c(u){u.style.position="absolute",u.style.bottom="20px",u.style.padding="12px 6px",u.style.border="1px solid #fff",u.style.borderRadius="4px",u.style.background="rgba(0,0,0,0.1)",u.style.color="#fff",u.style.font="normal 13px sans-serif",u.style.textAlign="center",u.style.opacity="0.5",u.style.outline="none",u.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",c(t),navigator.xr.isSessionSupported("immersive-vr").then(function(u){u?i():a(),u&&n.xrSessionIsGranted&&t.click()}).catch(l),t;{let u=document.createElement("a");return window.isSecureContext===!1?(u.href=document.location.href.replace(/^http:/,"https:"),u.innerHTML="WEBXR NEEDS HTTPS"):(u.href="https://immersiveweb.dev/",u.innerHTML="WEBXR NOT AVAILABLE"),u.style.left="calc(50% - 90px)",u.style.width="180px",u.style.textDecoration="none",c(u),u}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{n.xrSessionIsGranted=!0})}}};av.xrSessionIsGranted=!1;av.registerSessionGrantedListener();var KN={type:"change"},s2={type:"start"},jN={type:"end"},lv=new cr,JN=new On,Kq=Math.cos(70*Jt.DEG2RAD),cv=class extends Ji{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new U,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:wl.ROTATE,MIDDLE:wl.DOLLY,RIGHT:wl.PAN},this.touches={ONE:zs.ROTATE,TWO:zs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Z){Z.addEventListener("keydown",H),this._domElementKeyEvents=Z},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",H),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(KN),i.update(),a=o.NONE},this.update=function(){let Z=new U,L=new It().setFromUnitVectors(e.up,new U(0,1,0)),N=L.clone().invert(),X=new U,q=new It,ne=new U,ae=2*Math.PI;return function(){let ce=i.object.position;Z.copy(ce).sub(i.target),Z.applyQuaternion(L),c.setFromVector3(Z),i.autoRotate&&a===o.NONE&&R(T()),i.enableDamping?(c.theta+=u.theta*i.dampingFactor,c.phi+=u.phi*i.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let $=i.minAzimuthAngle,Ae=i.maxAzimuthAngle;isFinite($)&&isFinite(Ae)&&($<-Math.PI?$+=ae:$>Math.PI&&($-=ae),Ae<-Math.PI?Ae+=ae:Ae>Math.PI&&(Ae-=ae),$<=Ae?c.theta=Math.max($,Math.min(Ae,c.theta)):c.theta=c.theta>($+Ae)/2?Math.max($,c.theta):Math.min(Ae,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(A,i.dampingFactor):i.target.add(A),i.zoomToCursor&&S||i.object.isOrthographicCamera?c.radius=O(c.radius):c.radius=O(c.radius*h),Z.setFromSpherical(c),Z.applyQuaternion(N),ce.copy(i.target).add(Z),i.object.lookAt(i.target),i.enableDamping===!0?(u.theta*=1-i.dampingFactor,u.phi*=1-i.dampingFactor,A.multiplyScalar(1-i.dampingFactor)):(u.set(0,0,0),A.set(0,0,0));let we=!1;if(i.zoomToCursor&&S){let Ge=null;if(i.object.isPerspectiveCamera){let ze=Z.length();Ge=O(ze*h);let Ze=ze-Ge;i.object.position.addScaledVector(C,Ze),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){let ze=new U(E.x,E.y,0);ze.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),we=!0;let Ze=new U(E.x,E.y,0);Ze.unproject(i.object),i.object.position.sub(Ze).add(ze),i.object.updateMatrixWorld(),Ge=Z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ge!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ge).add(i.object.position):(lv.origin.copy(i.object.position),lv.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(lv.direction))<Kq?e.lookAt(i.target):(JN.setFromNormalAndCoplanarPoint(i.object.up,i.target),lv.intersectPlane(JN,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),we=!0);return h=1,S=!1,we||X.distanceToSquared(i.object.position)>l||8*(1-q.dot(i.object.quaternion))>l||ne.distanceToSquared(i.target)>0?(i.dispatchEvent(KN),X.copy(i.object.position),q.copy(i.object.quaternion),ne.copy(i.target),we=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Be),i.domElement.removeEventListener("pointerdown",ye),i.domElement.removeEventListener("pointercancel",Pe),i.domElement.removeEventListener("wheel",J),i.domElement.removeEventListener("pointermove",Se),i.domElement.removeEventListener("pointerup",Pe),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",H),i._domElementKeyEvents=null)};let i=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=o.NONE,l=1e-6,c=new vl,u=new vl,h=1,A=new U,f=new he,d=new he,p=new he,m=new he,b=new he,g=new he,w=new he,I=new he,v=new he,C=new U,E=new he,S=!1,M=[],_={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function D(){return Math.pow(.95,i.zoomSpeed)}function R(Z){u.theta-=Z}function B(Z){u.phi-=Z}let P=function(){let Z=new U;return function(N,X){Z.setFromMatrixColumn(X,0),Z.multiplyScalar(-N),A.add(Z)}}(),F=function(){let Z=new U;return function(N,X){i.screenSpacePanning===!0?Z.setFromMatrixColumn(X,1):(Z.setFromMatrixColumn(X,0),Z.crossVectors(i.object.up,Z)),Z.multiplyScalar(N),A.add(Z)}}(),z=function(){let Z=new U;return function(N,X){let q=i.domElement;if(i.object.isPerspectiveCamera){let ne=i.object.position;Z.copy(ne).sub(i.target);let ae=Z.length();ae*=Math.tan(i.object.fov/2*Math.PI/180),P(2*N*ae/q.clientHeight,i.object.matrix),F(2*X*ae/q.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(P(N*(i.object.right-i.object.left)/i.object.zoom/q.clientWidth,i.object.matrix),F(X*(i.object.top-i.object.bottom)/i.object.zoom/q.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function Q(Z){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?h/=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(Z){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?h*=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(Z){if(!i.zoomToCursor)return;S=!0;let L=i.domElement.getBoundingClientRect(),N=Z.clientX-L.left,X=Z.clientY-L.top,q=L.width,ne=L.height;E.x=N/q*2-1,E.y=-(X/ne)*2+1,C.set(E.x,E.y,1).unproject(e).sub(e.position).normalize()}function O(Z){return Math.max(i.minDistance,Math.min(i.maxDistance,Z))}function W(Z){f.set(Z.clientX,Z.clientY)}function k(Z){G(Z),w.set(Z.clientX,Z.clientY)}function Y(Z){m.set(Z.clientX,Z.clientY)}function te(Z){d.set(Z.clientX,Z.clientY),p.subVectors(d,f).multiplyScalar(i.rotateSpeed);let L=i.domElement;R(2*Math.PI*p.x/L.clientHeight),B(2*Math.PI*p.y/L.clientHeight),f.copy(d),i.update()}function ie(Z){I.set(Z.clientX,Z.clientY),v.subVectors(I,w),v.y>0?Q(D()):v.y<0&&V(D()),w.copy(I),i.update()}function re(Z){b.set(Z.clientX,Z.clientY),g.subVectors(b,m).multiplyScalar(i.panSpeed),z(g.x,g.y),m.copy(b),i.update()}function se(Z){G(Z),Z.deltaY<0?V(D()):Z.deltaY>0&&Q(D()),i.update()}function oe(Z){let L=!1;switch(Z.code){case i.keys.UP:Z.ctrlKey||Z.metaKey||Z.shiftKey?B(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(0,i.keyPanSpeed),L=!0;break;case i.keys.BOTTOM:Z.ctrlKey||Z.metaKey||Z.shiftKey?B(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(0,-i.keyPanSpeed),L=!0;break;case i.keys.LEFT:Z.ctrlKey||Z.metaKey||Z.shiftKey?R(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(i.keyPanSpeed,0),L=!0;break;case i.keys.RIGHT:Z.ctrlKey||Z.metaKey||Z.shiftKey?R(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(-i.keyPanSpeed,0),L=!0;break}L&&(Z.preventDefault(),i.update())}function le(){if(M.length===1)f.set(M[0].pageX,M[0].pageY);else{let Z=.5*(M[0].pageX+M[1].pageX),L=.5*(M[0].pageY+M[1].pageY);f.set(Z,L)}}function xe(){if(M.length===1)m.set(M[0].pageX,M[0].pageY);else{let Z=.5*(M[0].pageX+M[1].pageX),L=.5*(M[0].pageY+M[1].pageY);m.set(Z,L)}}function _e(){let Z=M[0].pageX-M[1].pageX,L=M[0].pageY-M[1].pageY,N=Math.sqrt(Z*Z+L*L);w.set(0,N)}function pe(){i.enableZoom&&_e(),i.enablePan&&xe()}function K(){i.enableZoom&&_e(),i.enableRotate&&le()}function be(Z){if(M.length==1)d.set(Z.pageX,Z.pageY);else{let N=Ce(Z),X=.5*(Z.pageX+N.x),q=.5*(Z.pageY+N.y);d.set(X,q)}p.subVectors(d,f).multiplyScalar(i.rotateSpeed);let L=i.domElement;R(2*Math.PI*p.x/L.clientHeight),B(2*Math.PI*p.y/L.clientHeight),f.copy(d)}function me(Z){if(M.length===1)b.set(Z.pageX,Z.pageY);else{let L=Ce(Z),N=.5*(Z.pageX+L.x),X=.5*(Z.pageY+L.y);b.set(N,X)}g.subVectors(b,m).multiplyScalar(i.panSpeed),z(g.x,g.y),m.copy(b)}function fe(Z){let L=Ce(Z),N=Z.pageX-L.x,X=Z.pageY-L.y,q=Math.sqrt(N*N+X*X);I.set(0,q),v.set(0,Math.pow(I.y/w.y,i.zoomSpeed)),Q(v.y),w.copy(I)}function de(Z){i.enableZoom&&fe(Z),i.enablePan&&me(Z)}function Fe(Z){i.enableZoom&&fe(Z),i.enableRotate&&be(Z)}function ye(Z){i.enabled!==!1&&(M.length===0&&(i.domElement.setPointerCapture(Z.pointerId),i.domElement.addEventListener("pointermove",Se),i.domElement.addEventListener("pointerup",Pe)),Ie(Z),Z.pointerType==="touch"?ue(Z):Ee(Z))}function Se(Z){i.enabled!==!1&&(Z.pointerType==="touch"?Re(Z):We(Z))}function Pe(Z){Ue(Z),M.length===0&&(i.domElement.releasePointerCapture(Z.pointerId),i.domElement.removeEventListener("pointermove",Se),i.domElement.removeEventListener("pointerup",Pe)),i.dispatchEvent(jN),a=o.NONE}function Ee(Z){let L;switch(Z.button){case 0:L=i.mouseButtons.LEFT;break;case 1:L=i.mouseButtons.MIDDLE;break;case 2:L=i.mouseButtons.RIGHT;break;default:L=-1}switch(L){case wl.DOLLY:if(i.enableZoom===!1)return;k(Z),a=o.DOLLY;break;case wl.ROTATE:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enablePan===!1)return;Y(Z),a=o.PAN}else{if(i.enableRotate===!1)return;W(Z),a=o.ROTATE}break;case wl.PAN:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enableRotate===!1)return;W(Z),a=o.ROTATE}else{if(i.enablePan===!1)return;Y(Z),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&i.dispatchEvent(s2)}function We(Z){switch(a){case o.ROTATE:if(i.enableRotate===!1)return;te(Z);break;case o.DOLLY:if(i.enableZoom===!1)return;ie(Z);break;case o.PAN:if(i.enablePan===!1)return;re(Z);break}}function J(Z){i.enabled===!1||i.enableZoom===!1||a!==o.NONE||(Z.preventDefault(),i.dispatchEvent(s2),se(Z),i.dispatchEvent(jN))}function H(Z){i.enabled===!1||i.enablePan===!1||oe(Z)}function ue(Z){switch(Ne(Z),M.length){case 1:switch(i.touches.ONE){case zs.ROTATE:if(i.enableRotate===!1)return;le(),a=o.TOUCH_ROTATE;break;case zs.PAN:if(i.enablePan===!1)return;xe(),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(i.touches.TWO){case zs.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;pe(),a=o.TOUCH_DOLLY_PAN;break;case zs.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;K(),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&i.dispatchEvent(s2)}function Re(Z){switch(Ne(Z),a){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;be(Z),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;me(Z),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;de(Z),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Fe(Z),i.update();break;default:a=o.NONE}}function Be(Z){i.enabled!==!1&&Z.preventDefault()}function Ie(Z){M.push(Z)}function Ue(Z){delete _[Z.pointerId];for(let L=0;L<M.length;L++)if(M[L].pointerId==Z.pointerId){M.splice(L,1);return}}function Ne(Z){let L=_[Z.pointerId];L===void 0&&(L=new he,_[Z.pointerId]=L),L.set(Z.pageX,Z.pageY)}function Ce(Z){let L=Z.pointerId===M[0].pointerId?M[1]:M[0];return _[L.pointerId]}i.domElement.addEventListener("contextmenu",Be),i.domElement.addEventListener("pointerdown",ye),i.domElement.addEventListener("pointercancel",Pe),i.domElement.addEventListener("wheel",J,{passive:!1}),this.update()}};var E0e=new U,I0e=new vl,M0e=new U;var qN=Ao($y()),hp=class{constructor(e){(0,qN.default)(this),this.pointers=[],this.isDown=!1;let t={passive:!0};e.addEventListener("touchstart",i=>this.onTouchStart(i),t),e.addEventListener("touchmove",i=>this.onTouchMove(i),t),e.addEventListener("touchend",i=>this.onTouchEnd(i),t)}getPointers(e){let t=[];return e.touches!==void 0?Object.keys(e.touches).forEach(i=>{let o=e.touches[i];t.push({x:o.pageX/window.innerWidth,y:o.pageY/window.innerHeight})}):t.push({x:e.pageX/window.innerWidth,y:e.pageY/window.innerHeight}),t}onTouchStart(e){this.isDown=!0,this.pointers=this.getPointers(e),this.emit("start",this.pointers)}onTouchMove(e){this.isDown&&(this.pointers=this.getPointers(e),this.emit("move",this.pointers))}onTouchEnd(){this.isDown=!1,this.emit("end",this.pointers)}};var Jc=class n{constructor(e,t){this.height=1.6,this.velocityMin=Math.log(1),this.velocityMax=Math.log(4),this.velocityRange=this.velocityMax-this.velocityMin,this.camera=e,this.isLocked=!1,this.movement=new U,this.element=t,this.velocity=2,this.target=new U,this.buttons={primary:!1,secondary:!1,tertiary:!1},e.position.set(0,this.height,0),e.rotation.order="YXZ",e.userData.targetPosition=e.position.clone(),e.userData.targetRotation=e.rotation.clone(),e.userData.targetQuaternion=e.quaternion.clone(),document.addEventListener("contextmenu",i=>i.preventDefault()),t.addEventListener("touchstart",i=>i.preventDefault()),t.addEventListener("pointerdown",this._pointerdown=this.onPointerDown.bind(this)),document.addEventListener("pointerlockchange",this._pointerlockchange=this.onLock.bind(this)),document.addEventListener("pointermove",this._pointermove=this.onPointerMove.bind(this)),document.addEventListener("pointerup",this._pointerup=this.onPointerUp.bind(this)),document.addEventListener("keydown",this._keydown=this.onKeyDown.bind(this)),document.addEventListener("keyup",this._keyup=this.onKeyUp.bind(this))}detach(){this.element.removeEventListener("pointerdown",this._pointerdown),document.removeEventListener("pointerlockchange",this._pointerlockchange),document.removeEventListener("pointermove",this._pointermove),document.removeEventListener("pointerup",this._pointerup),document.removeEventListener("keydown",this._keydown),document.removeEventListener("keyup",this._keyup)}lock(){let{isLocked:e,element:t}=this;if(!e)try{t.requestPointerLock()}catch{console.warn("RPL")}}unlock(){let{buttons:e,isLocked:t}=this;t&&(e.primary=!1,e.secondary=!1,e.tertiary=!1,document.exitPointerLock())}onLock(){function e(i){document.querySelector("#status").innerHTML=i}let{movement:t}=this;this.isLocked=!!document.pointerLockElement,e("L:"+this.isLocked),document.body.classList[this.isLocked?"add":"remove"]("pointerlock"),this.isLocked||t.set(0,0,0)}onPointerDown(e){let{buttons:t,isLocked:i}=this;if(e.isPrimary){if(!i){this.lock();return}if(i){this.unlock();return}switch(e.button){case 0:t.primary=!0;break;case 2:t.secondary=!0;break;case 1:t.tertiary=!0;break}}}onPointerMove(e){let{camera:t,isLocked:i}=this;if(!e.isPrimary||!i)return;let{movementX:o,movementY:a}=e;t.userData.targetRotation.y-=o*.003,t.userData.targetRotation.x-=a*.003,t.userData.targetRotation.x=Math.min(Math.max(t.userData.targetRotation.x,Math.PI*-.5),Math.PI*.5)}onPointerUp(e){let{buttons:t,isLocked:i}=this;if(!(!e.isPrimary||!i))switch(e.button){case 0:t.primary=!1;break;case 2:t.secondary=!1;break;case 1:t.tertiary=!1;break}}onKeyDown(e){let{isLocked:t,movement:i}=this;if(e.code=="Enter"){t?this.unlock():(this.lock(),this.onLock());return}if(!(!t||e.repeat))switch(e.code){case"KeyW":case"ArrowUp":i.z=1;break;case"KeyA":case"ArrowLeft":i.x=-1;break;case"KeyS":case"ArrowDown":i.z=-1;break;case"KeyD":case"ArrowRight":i.x=1;break;case"KeyK":case"KeyQ":i.y=1;break;case"KeyJ":case"KeyZ":i.y=-1;break}}onKeyUp(e){let{isLocked:t,movement:i}=this;if(t)switch(e.code){case"KeyW":case"ArrowUp":i.z>0&&(i.z=0);break;case"KeyA":case"ArrowLeft":i.x<0&&(i.x=0);break;case"KeyS":case"ArrowDown":i.z<0&&(i.z=0);break;case"KeyD":case"ArrowRight":i.x>0&&(i.x=0);break;case"KeyK":case"KeyQ":i.y>0&&(i.y=0);break;case"KeyJ":case"KeyZ":i.y<0&&(i.y=0);break}}onWheel(e){let{velocity:t,isLocked:i}=this;if(!i)return;let{velocityMin:o,velocityRange:a}=n,l=Math.min(Math.max((Math.log(t)-o)/a-e.deltaY*3e-4,0),1);this.velocity=Math.exp(o+l*a)}setHeightmap(e){this.heightmap=e}update(e){let{camera:t,heightmap:i,movement:o,velocity:a}=this;t.rotation.x=Jt.damp(t.rotation.x,t.userData.targetRotation.x,20,e),t.rotation.y=Jt.damp(t.rotation.y,t.userData.targetRotation.y,20,e),(o.x!==0||o.y!==0||o.z!==0)&&(t.getWorldDirection(n.forward),n.right.crossVectors(n.forward,n.worldUp).normalize(),n.direction.set(0,0,0).addScaledVector(n.right,o.x).addScaledVector(n.worldUp,o.y).addScaledVector(n.forward,o.z).normalize(),t.userData.targetPosition.addScaledVector(n.direction,a*e),i&&(t.userData.targetPosition.y=Math.max(t.userData.targetPosition.y,i.getHeight(t.userData.targetPosition)+n.height))),t.position.x=Jt.damp(t.position.x,t.userData.targetPosition.x,10,e),t.position.y=Jt.damp(t.position.y,t.userData.targetPosition.y,10,e),t.position.z=Jt.damp(t.position.z,t.userData.targetPosition.z,10,e),this.changelistener&&this.changelistener()}};Jc.forward=new U;Jc.right=new U;Jc.worldUp=new U(0,1,0);Jc.direction=new U;var o2=Jc;var qc={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var mr=class extends ai{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof yt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=oi.clone(e.uniforms),this.material=new yt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pr(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var Ap=class extends ai{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){let o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);let l,c;this.inverse?(l=0,c=1):(l=1,c=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,l,4294967295),a.buffers.stencil.setClear(c),a.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.color.setMask(!0),a.buffers.depth.setMask(!0),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}},uv=class extends ai{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var ga=class{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){let i=e.getSize(new he);this._width=i.width,this._height=i.height,t=new _t(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Tn}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new mr(qc),this.copyPass.material.blending=lr,this.clock=new yl}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),i=!1;for(let o=0,a=this.passes.length;o<a;o++){let l=this.passes[o];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),l.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),l.needsSwap){if(i){let c=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(c.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}Ap!==void 0&&(l instanceof Ap?i=!0:l instanceof uv&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){let t=this.renderer.getSize(new he);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(i,o),this.renderTarget2.setSize(i,o);for(let a=0;a<this.passes.length;a++)this.passes[a].setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var tA=class extends ai{constructor(e,t,i,o,a){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=a!==void 0?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new De}render(e,t,i){let o=e.autoClear;e.autoClear=!1;let a,l;this.overrideMaterial!==void 0&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,a),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=l),e.autoClear=o}};var a2={name:"ConvolutionShader",defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new he(.001953125,0)},cKernel:{value:[]}},vertexShader:`

		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float cKernel[ KERNEL_SIZE_INT ];

		uniform sampler2D tDiffuse;
		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vec2 imageCoord = vUv;
			vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );

			for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {

				sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];
				imageCoord += uImageIncrement;

			}

			gl_FragColor = sum;

		}`,buildKernel:function(n){let t=2*Math.ceil(n*3)+1;t>25&&(t=25);let i=(t-1)*.5,o=new Array(t),a=0;for(let l=0;l<t;++l)o[l]=jq(l-i,n),a+=o[l];for(let l=0;l<t;++l)o[l]/=a;return o}};function jq(n,e){return Math.exp(-(n*n)/(2*e*e))}var nA=class n extends ai{constructor(e=1,t=25,i=4){super(),this.renderTargetX=new _t(1,1,{type:Tn}),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new _t(1,1,{type:Tn}),this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=oi.clone(hv.uniforms),this.combineUniforms.strength.value=e,this.materialCombine=new yt({name:hv.name,uniforms:this.combineUniforms,vertexShader:hv.vertexShader,fragmentShader:hv.fragmentShader,blending:la,transparent:!0});let o=a2;this.convolutionUniforms=oi.clone(o.uniforms),this.convolutionUniforms.uImageIncrement.value=n.blurX,this.convolutionUniforms.cKernel.value=a2.buildKernel(i),this.materialConvolution=new yt({name:o.name,uniforms:this.convolutionUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new pr(null)}render(e,t,i,o,a){a&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=i.texture,this.convolutionUniforms.uImageIncrement.value=n.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=n.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,a&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.clear&&e.clear(),this.fsQuad.render(e)}setSize(e,t){this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}},hv={name:"CombineShader",uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float strength;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = strength * texel;

		}`};nA.blurX=new he(.001953125,0);nA.blurY=new he(0,.001953125);var El={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new De(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var Av=class n extends ai{constructor(e,t,i,o){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=o,this.resolution=e!==void 0?new he(e.x,e.y):new he(256,256),this.clearColor=new De(0,0,0);let a={minFilter:Et,magFilter:Et,format:ni};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new _t(l,c,a),this.renderTargetBright.texture.name="UnrealBloomPass0.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){let p=new _t(l,c,a);p.texture.name="UnrealBloomPass0.h"+d,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);let m=new _t(l,c,a);m.texture.name="UnrealBloomPass0.v"+d,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),l=Math.round(l/2),c=Math.round(c/2)}El===void 0&&console.error("THREE.UnrealBloomPass0 relies on LuminosityHighPassShader");let u=El;this.highPassUniforms=oi.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new yt({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,defines:{}}),this.separableBlurMaterials=[];let h=[3,5,7,9,11];l=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[d])),this.separableBlurMaterials[d].uniforms.texSize.value=new he(l,c),l=Math.round(l/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;let A=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=A,this.bloomTintColors=[new U(1,1,1),new U(1,1,1),new U(1,1,1),new U(1,1,1),new U(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,qc===void 0&&console.error("THREE.UnrealBloomPass0 relies on CopyShader");let f=qc;this.copyUniforms=oi.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new yt({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:la,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new De,this.oldClearAlpha=1,this.basic=new Nt,this.fsQuad=new pr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let i=Math.round(e/2),o=Math.round(t/2);this.renderTargetBright.setSize(i,o);for(let a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(i,o),this.renderTargetsVertical[a].setSize(i,o),this.separableBlurMaterials[a].uniforms.texSize.value=new he(i,o),i=Math.round(i/2),o=Math.round(o/2)}render(e,t,i,o,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let u=0;u<this.nMips;u++)this.fsQuad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[u].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[u]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[u]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[u];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeperableBlurMaterial(e){return new yt({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new he(.5,.5)},direction:{value:new he(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
            varying vec2 vUv;
            uniform sampler2D colorTexture;
            uniform vec2 texSize;
            uniform vec2 direction;
            
            float gaussianPdf(in float x, in float sigma) {
                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
            }
            void main() {
                  vec2 invSize = 1.0 / texSize;
                  float fSigma = float(SIGMA);
                  float weightSum = gaussianPdf(0.0, fSigma);
                  float alphaSum = 0.0;
                  vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
                  for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
                    float x = float(i);
                    float w = gaussianPdf(x, fSigma);
                    vec2 uvOffset = direction * invSize * x;
                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
                    diffuseSum += (sample1.rgb + sample2.rgb) * w;
                    alphaSum += (sample1.a + sample2.a) * w;
                    weightSum += 2.0 * w;
                  }
                  gl_FragColor = vec4(diffuseSum/weightSum, alphaSum/weightSum);
            }`})}getCompositeMaterial(e){return new yt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform sampler2D dirtTexture;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Av.BlurDirectionX=new he(1,0);Av.BlurDirectionY=new he(0,1);var Il=class n extends ai{constructor(e,t,i,o){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=o,this.resolution=e!==void 0?new he(e.x,e.y):new he(256,256),this.clearColor=new De(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let a=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new _t(a,l,{type:Tn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){let d=new _t(a,l,{type:Tn});d.texture.name="UnrealBloomPass.h"+f,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);let p=new _t(a,l,{type:Tn});p.texture.name="UnrealBloomPass.v"+f,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),a=Math.round(a/2),l=Math.round(l/2)}let c=El;this.highPassUniforms=oi.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new yt({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),this.separableBlurMaterials=[];let u=[3,5,7,9,11];a=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[f])),this.separableBlurMaterials[f].uniforms.invSize.value=new he(1/a,1/l),a=Math.round(a/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;let h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new U(1,1,1),new U(1,1,1),new U(1,1,1),new U(1,1,1),new U(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let A=qc;this.copyUniforms=oi.clone(A.uniforms),this.blendMaterial=new yt({uniforms:this.copyUniforms,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,blending:la,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new De,this.oldClearAlpha=1,this.basic=new Nt,this.fsQuad=new pr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let i=Math.round(e/2),o=Math.round(t/2);this.renderTargetBright.setSize(i,o);for(let a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(i,o),this.renderTargetsVertical[a].setSize(i,o),this.separableBlurMaterials[a].uniforms.invSize.value=new he(1/i,1/o),i=Math.round(i/2),o=Math.round(o/2)}render(e,t,i,o,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let c=this.renderTargetBright;for(let u=0;u<this.nMips;u++)this.fsQuad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[u].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[u]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[u]),e.clear(),this.fsQuad.render(e),c=this.renderTargetsVertical[u];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeperableBlurMaterial(e){let t=[];for(let i=0;i<e;i++)t.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return new yt({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new he(.5,.5)},direction:{value:new he(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new yt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Il.BlurDirectionX=new he(1,0);Il.BlurDirectionY=new he(0,1);var fp={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},dp={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},fv={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};var pp=class extends ai{constructor(e,t){super(),this.edgesRT=new _t(e,t,{depthBuffer:!1,type:Tn}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new _t(e,t,{depthBuffer:!1,type:Tn}),this.weightsRT.texture.name="SMAAPass.weights";let i=this,o=new Image;o.src=this.getAreaTexture(),o.onload=function(){i.areaTexture.needsUpdate=!0},this.areaTexture=new jt,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=o,this.areaTexture.minFilter=Et,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;let a=new Image;a.src=this.getSearchTexture(),a.onload=function(){i.searchTexture.needsUpdate=!0},this.searchTexture=new jt,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=a,this.searchTexture.magFilter=Tt,this.searchTexture.minFilter=Tt,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=oi.clone(fp.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new yt({defines:Object.assign({},fp.defines),uniforms:this.uniformsEdges,vertexShader:fp.vertexShader,fragmentShader:fp.fragmentShader}),this.uniformsWeights=oi.clone(dp.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new yt({defines:Object.assign({},dp.defines),uniforms:this.uniformsWeights,vertexShader:dp.vertexShader,fragmentShader:dp.fragmentShader}),this.uniformsBlend=oi.clone(fv.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new yt({uniforms:this.uniformsBlend,vertexShader:fv.vertexShader,fragmentShader:fv.fragmentShader}),this.needsSwap=!1,this.fsQuad=new pr(null)}render(e,t,i){this.uniformsEdges.tDiffuse.value=i.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=i.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,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"}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}};var l2={uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float l = luminance( texel.rgb );

			gl_FragColor = vec4( l, l, l, texel.w );

		}`};var c2={uniforms:{tDiffuse:{value:null},resolution:{value:new he}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;

		void main() {

			vec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );

		// kernel definition (in glsl matrices are filled in column-major order)

			const mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 ); // x direction kernel
			const mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 ); // y direction kernel

		// fetch the 3x3 neighbourhood of a fragment

		// first column

			float tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;
			float tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;
			float tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;

		// second column

			float tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;
			float tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;
			float tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;

		// third column

			float tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;
			float tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;
			float tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;

		// gradient value in x direction

			float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +
				Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +
				Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;

		// gradient value in y direction

			float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +
				Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +
				Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;

		// magnitute of the total gradient

			float G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );

			gl_FragColor = vec4( vec3( G ), 1 );

		}`};var Iye={uniforms:{tDiffuse:{value:null},resolution:{value:new he(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`};var $N={uniforms:{tDiffuse:{value:null}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform sampler2D tDiffuse;
		varying vec2 vUv;
        const vec4 white = vec4(1.,1.,1.,1.);

		void main() {
			vec4 color = texture2D(tDiffuse, vUv);
			gl_FragColor = vec4(1,1,1,1) - color;
		}`};var u2={uniforms:{tDiffuse:{type:"t",value:null},threshold:{value:.8},clearsaturation:{value:.5},color:{value:[0,0,0,1]},clearcolor:{value:[0,0,0,0]},uTime:{value:0}},vertexShader:`
        varying float x, y, z;
		varying vec2 vUv;
		varying float r_mod;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0 );
            x = gl_Position.x; y = gl_Position.y; z = gl_Position.z;
            x += y; y -= x; z += x - y;
		}`,fragmentShader:`
        uniform float uTime;
		uniform sampler2D tDiffuse;
        uniform float threshold;
        uniform float clearsaturation;
        uniform vec4 color;
        uniform vec4 clearcolor;
		varying vec2 vUv;
        varying float x, y, z;
		varying float r_mod;

		float rand(float s, float r) {
            return mod(mod(s, r + r_mod) * 112341.0, 1.0);
        }
        const vec4 clear = vec4(0,0,0,0);
        const vec4 black = vec4(0,0,0,1);

		void main() {
			vec4 c = texture2D(tDiffuse, vUv);
            float bright = 0.33333 * (c.r + c.g + c.b);

            if (bright < threshold) {
                float r = rand(uTime * 1.0, x * y);
                if (r < clearsaturation)
                    c = clearcolor;
                else
                    c = color;
             } else
                c = clearcolor;
			gl_FragColor = c;
		}`};var dv=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(A){A.preventDefault(),i(++n%e.children.length)},!1);function t(A){return e.appendChild(A.dom),A}function i(A){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===A?"block":"none";n=A}var o=(performance||Date).now(),a=o,l=0,c=t(new dv.Panel("FPS","#0ff","#002")),u=t(new dv.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new dv.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){l++;var A=(performance||Date).now();if(u.update(A-o,200),A>=a+1e3&&(c.update(l*1e3/(A-a),100),a=A,l=0,h)){var f=performance.memory;h.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return A},update:function(){o=this.end()},domElement:e,setMode:i}};dv.Panel=function(n,e,t){var i=1/0,o=0,a=Math.round,l=a(window.devicePixelRatio||1),c=80*l,u=48*l,h=3*l,A=2*l,f=3*l,d=15*l,p=74*l,m=30*l,b=document.createElement("canvas");b.width=c,b.height=u,b.style.cssText="width:80px;height:48px";var g=b.getContext("2d");return g.font="bold "+9*l+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,c,u),g.fillStyle=e,g.fillText(n,h,A),g.fillRect(f,d,p,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(f,d,p,m),{dom:b,update:function(w,I){i=Math.min(i,w),o=Math.max(o,w),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,c,d),g.fillStyle=e,g.fillText(a(w)+" "+n+" ("+a(i)+"-"+a(o)+")",h,A),g.drawImage(b,f+l,d,p-l,m,f,d,p-l,m),g.fillRect(f+p-l,d,l,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(f+p-l,d,l,a((1-w/I)*m))}}};var eF=new U,Jq=new It,tF=new U,pv=class extends mt{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}};var So=new ke,qq=new ke,mp=class{constructor(e={}){let t=this,i,o,a,l,c={camera:{fov:0,style:""},objects:new WeakMap},u=e.element!==void 0?e.element:document.createElement("div");u.style.overflow="hidden",this.domElement=u;let h=document.createElement("div");h.style.transformOrigin="0 0",h.style.pointerEvents="none",u.appendChild(h);let A=document.createElement("div");A.style.transformStyle="preserve-3d",h.appendChild(A),this.getSize=function(){return{width:i,height:o}},this.render=function(b,g){let w=g.projectionMatrix.elements[5]*l;c.camera.fov!==w&&(h.style.perspective=g.isPerspectiveCamera?w+"px":"",c.camera.fov=w),g.view&&g.view.enabled?(h.style.transform=`translate( ${-g.view.offsetX*(i/g.view.width)}px, ${-g.view.offsetY*(o/g.view.height)}px )`,h.style.transform+=`scale( ${g.view.fullWidth/g.view.width}, ${g.view.fullHeight/g.view.height} )`):h.style.transform="",b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),g.parent===null&&g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld();let I,v;g.isOrthographicCamera&&(I=-(g.right+g.left)/2,v=(g.top+g.bottom)/2);let C=g.view&&g.view.enabled?g.view.height/g.view.fullHeight:1,E=g.isOrthographicCamera?`scale( ${C} )scale(`+w+")translate("+f(I)+"px,"+f(v)+"px)"+d(g.matrixWorldInverse):`scale( ${C} )translateZ(`+w+"px)"+d(g.matrixWorldInverse),S=E+"translate("+a+"px,"+l+"px)";c.camera.style!==S&&(A.style.transform=S,c.camera.style=S),m(b,b,g,E)},this.setSize=function(b,g){i=b,o=g,a=i/2,l=o/2,u.style.width=b+"px",u.style.height=g+"px",h.style.width=b+"px",h.style.height=g+"px",A.style.width=b+"px",A.style.height=g+"px"};function f(b){return Math.abs(b)<1e-10?0:b}function d(b){let g=b.elements;return"matrix3d("+f(g[0])+","+f(-g[1])+","+f(g[2])+","+f(g[3])+","+f(g[4])+","+f(-g[5])+","+f(g[6])+","+f(g[7])+","+f(g[8])+","+f(-g[9])+","+f(g[10])+","+f(g[11])+","+f(g[12])+","+f(-g[13])+","+f(g[14])+","+f(g[15])+")"}function p(b){let g=b.elements;return"translate(-50%,-50%)"+("matrix3d("+f(g[0])+","+f(g[1])+","+f(g[2])+","+f(g[3])+","+f(-g[4])+","+f(-g[5])+","+f(-g[6])+","+f(-g[7])+","+f(g[8])+","+f(g[9])+","+f(g[10])+","+f(g[11])+","+f(g[12])+","+f(g[13])+","+f(g[14])+","+f(g[15])+")")}function m(b,g,w,I){if(b.isCSS3DObject){let v=b.visible===!0&&b.layers.test(w.layers)===!0;if(b.element.style.display=v===!0?"":"none",v===!0){b.onBeforeRender(t,g,w);let C;b.isCSS3DSprite?(So.copy(w.matrixWorldInverse),So.transpose(),b.rotation2D!==0&&So.multiply(qq.makeRotationZ(b.rotation2D)),b.matrixWorld.decompose(eF,Jq,tF),So.setPosition(eF),So.scale(tF),So.elements[3]=0,So.elements[7]=0,So.elements[11]=0,So.elements[15]=1,C=p(So)):C=p(b.matrixWorld);let E=b.element,S=c.objects.get(b);if(S===void 0||S.style!==C){E.style.transform=C;let M={style:C};c.objects.set(b,M)}E.parentNode!==A&&A.appendChild(E),b.onAfterRender(t,g,w)}}for(let v=0,C=b.children.length;v<C;v++)m(b.children[v],g,w,I)}}};var mv=class extends ua{constructor(e=null){super();let t=new wn;t.deleteAttribute("uv");let i=new Jn({side:Gn}),o=new Jn,a=5;e!==null&&e._useLegacyLights===!1&&(a=900);let l=new Qs(16777215,a,28,2);l.position.set(.418,16.199,.3),this.add(l);let c=new He(t,i);c.position.set(-.757,13.219,.717),c.scale.set(31.713,28.305,28.591),this.add(c);let u=new He(t,o);u.position.set(-10.906,2.009,1.846),u.rotation.set(0,-.195,0),u.scale.set(2.328,7.905,4.651),this.add(u);let h=new He(t,o);h.position.set(-5.607,-.754,-.758),h.rotation.set(0,.994,0),h.scale.set(1.97,1.534,3.955),this.add(h);let A=new He(t,o);A.position.set(6.167,.857,7.803),A.rotation.set(0,.561,0),A.scale.set(3.927,6.285,3.687),this.add(A);let f=new He(t,o);f.position.set(-2.017,.018,6.124),f.rotation.set(0,.333,0),f.scale.set(2.002,4.566,2.064),this.add(f);let d=new He(t,o);d.position.set(2.291,-.756,-2.621),d.rotation.set(0,-.286,0),d.scale.set(1.546,1.552,1.496),this.add(d);let p=new He(t,o);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),this.add(p);let m=new He(t,iA(50));m.position.set(-16.116,14.37,8.208),m.scale.set(.1,2.428,2.739),this.add(m);let b=new He(t,iA(50));b.position.set(-16.109,18.021,-8.207),b.scale.set(.1,2.425,2.751),this.add(b);let g=new He(t,iA(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);let w=new He(t,iA(43));w.position.set(-.462,8.89,14.52),w.scale.set(4.38,5.441,.088),this.add(w);let I=new He(t,iA(20));I.position.set(3.235,11.486,-12.541),I.scale.set(2.5,2,.1),this.add(I);let v=new He(t,iA(100));v.position.set(0,20,0),v.scale.set(1,.1,1),this.add(v)}dispose(){let e=new Set;this.traverse(t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))});for(let t of e)t.dispose()}};function iA(n){let e=new Nt;return e.color.setScalar(n),e}var gv=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},Oye=new Ui(-1,1,1,-1,0,1),nF=new Ke;nF.setAttribute("position",new Ve([-1,3,0,-1,-1,0,3,-1,0],3));nF.setAttribute("uv",new Ve([0,2,0,0,2,0],2));var yp=new Ke;yp.setAttribute("position",new $e(new Float32Array([-1,-1,3,-1,-1,3]),2));yp.setAttribute("uv",new $e(new Float32Array([0,0,2,0,0,2]),2));yp.boundingSphere=new Vt;yp.computeBoundingSphere=function(){};var $q=new Ui,rA=class{constructor(e){this._mesh=new He(yp,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,$q)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}},e$={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new ke},viewMat:{value:new ke},projViewMat:{value:new ke},projectionMatrixInv:{value:new ke},viewMatrixInv:{value:new ke},cameraPos:{value:new U},resolution:{value:new he},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform highp sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float[SAMPLES] samplesR;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        return getWorldPosLog(vec3(coord, depth));
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
      vec3 bitangent = cross(normal, tangent);
      mat3 tbn = mat3(tangent, bitangent, normal);
      float occluded = 0.0;
      float totalWeight = 0.0;
     /* float radiusScreen = distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(48.0, 0.0) / resolution)
      );/*vUv.x < 0.5 ? radius : min(distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(100.0, 0.0) / resolution)
      ), radius);
      float distanceFalloffScreen = radiusScreen * 0.2;*/
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      for(float i = 0.0; i < FSAMPLES; i++) {
        vec3 sampleDirection = 
        tbn * 
        samples[int(i)];
        ;
        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;
        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) 
         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/
        #ifdef LOGDEPTH
        float distSample = linearize_depth_log(sampleDepth, near, far);
        #else
        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);
        #endif
        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);
        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);
        float weight = dot(sampleDirection, normal);
          occluded += rangeCheck * weight * 
            (distSample + bias
               < distWorld ? 1.0 : 0.0) * (
          (dot(
            diff,
            diff
             
            ) < 1.0 || (sampleDepth == depth) || (
              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0
            ) ? 0.0 : 1.0)
          );
          totalWeight += weight;
      }
      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);
}`},t$={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new ke},viewMat:{value:new ke},projectionMatrixInv:{value:new ke},viewMatrixInv:{value:new ke},cameraPos:{value:new U},resolution:{value:new he},color:{value:new U(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0}},depthWrite:!1,depthTest:!1,vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform highp sampler2D downsampledDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform bool fog;
    uniform bool fogExp;
    uniform bool colorMultiply;
    uniform float fogDensity;
    uniform float fogNear;
    uniform float fogFar;
    uniform float radius;
    uniform float distanceFalloff;
    uniform vec3 cameraPos;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        #ifdef HALFRES 
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

        #ifdef LOGDEPTH
        texel.a = clamp(texel.a, 0.0, 1.0);
        if (texel.a == 0.0) {
          texel.a = 1.0;
        }
        #endif
     
        float finalAo = pow(texel.a, intensity);
        float fogFactor;
        float fogDepth = distance(
            cameraPos,
            getWorldPos(depth, vUv)
        );
        if (fog) {
            if (fogExp) {
                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
            } else {
                fogFactor = smoothstep( fogNear, fogFar, fogDepth );
            }
        }
        finalAo = mix(finalAo, 1.0, fogFactor);
        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = LinearTosRGB(gl_FragColor);
        }
    }
    `},n$={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new ke},viewMat:{value:new ke},projectionMatrixInv:{value:new ke},viewMatrixInv:{value:new ke},cameraPos:{value:new U},resolution:{value:new he},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.a;
        float baseOcc = data.a;
        vec3 normal = data.rgb * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        if (d == 1.0) {
          gl_FragColor = data;
          return;
        }
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
            radiusToUse * distanceFalloff
        : distanceFalloff;


        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.a;
            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
            float rangeCheck = dSample == 1.0 ? 0.0 :exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        if (count > 0.0) {
          occlusion /= count;
        }
        #ifdef LOGDEPTH
          occlusion = clamp(occlusion, 0.0, 1.0);
          if (occlusion == 0.0) {
            occlusion = 1.0;
          }
        #endif
        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);
    }
    `},i$={uniforms:{sceneDepth:{value:null},resolution:{value:new he},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new ke},projectionMatrixInv:{value:new ke},logDepth:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform highp sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        vec2[] uvSamples = vec2[4](
            uv,
            uv + vec2(pixelSize.x, 0.0),
            uv + vec2(0.0, pixelSize.y),
            uv + pixelSize
        );
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[] samples = float[4](depth00, depth10, depth01, depth11);
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
       /* float[] samples = float[4](depth00, depth10, depth01, depth11);
        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);
        float[] distances = float[4](depth00, depth10, depth01, depth11);
        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));

        int remaining[3];
        int rejected[3];
        int i, j, k;

        for(i = 0, j = 0, k = 0; i < 4; ++i) {
            if (distances[i] < maxDistance) {
                remaining[j++] = i;
            } else {
                rejected[k++] = i;
            }
        }
        for(;j < 3;++j) {
            remaining[j] = rejected[--k];
        }
        vec3 s = vec3(
            samples[remaining[0]],
            samples[remaining[1]],
            samples[remaining[2]]
        );
        c = (s.x + s.y + s.z) / 3.0;

        distances[0] = abs(c - s.x);
        distances[1] = abs(c - s.y);
        distances[2] = abs(c - s.z);

        float minDistance = min(min(distances[0], distances[1]), distances[2]);

        for(i = 0; i < 3; ++i) {
            if (distances[i] == minDistance) {
                break;
            }
        }*/
      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]
        ), 0.0);*/
    }`},iF="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",Hye=Uint8Array.from(atob(iF),n=>n.charCodeAt(0));var r$=Uint8Array.from(atob(iF),n=>n.charCodeAt(0));function rF(n,e,t){if(e.getQueryParameter(n,e.QUERY_RESULT_AVAILABLE)){let a=e.getQueryParameter(n,e.QUERY_RESULT)/1e6;t.lastTime=a}else setTimeout(()=>{rF(n,e,t)},1)}var gp=class extends gv{constructor(e,t,i=512,o=512){super(),this.width=i,this.height=o,this.clear=!0,this.camera=t,this.scene=e,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new De(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,autoRenderBeauty:!0,colorMultiply:!0},{set:(a,l,c)=>{let u=a[l];return a[l]=c,l==="aoSamples"&&u!==c&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),l==="denoiseSamples"&&u!==c&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),l==="halfRes"&&u!==c&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),l==="depthAwareUpsampling"&&u!==c&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.beautyRenderTarget=new _t(this.width,this.height,{minFilter:Et,magFilter:Tt}),this.beautyRenderTarget.depthTexture=new ll(this.width,this.height,Ns),this.beautyRenderTarget.depthTexture.format=go,this.writeTargetInternal=new _t(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1}),this.readTargetInternal=new _t(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1}),this.bluenoise=new vo(r$,128,128),this.bluenoise.colorSpace=yo,this.bluenoise.wrapS=ji,this.bluenoise.wrapT=ji,this.bluenoise.minFilter=Tt,this.bluenoise.magFilter=Tt,this.bluenoise.needsUpdate=!0,this.lastTime=0,this._r=new he,this._c=new De}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new Ed(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=By,this.depthDownsampleTarget.texture[0].type=cs,this.depthDownsampleTarget.texture[0].minFilter=Tt,this.depthDownsampleTarget.texture[0].magFilter=Tt,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=ni,this.depthDownsampleTarget.texture[1].type=Tn,this.depthDownsampleTarget.texture[1].minFilter=Tt,this.depthDownsampleTarget.texture[1].magFilter=Tt,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new rA(new yt(i$))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);let t={...e$};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new yt(t)):this.effectShaderQuad=new rA(new yt(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);let t={...n$};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new yt(t)):this.poissonBlurQuad=new rA(new yt(t))}configureEffectCompositer(e=!1){let t={...t$};e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new yt(t)):this.effectCompositerQuad=new rA(new yt(t))}generateHemisphereSamples(e){let t=[];for(let i=0;i<e;i++){let o=2.399963*i,a=Math.sqrt(i+.5)/Math.sqrt(e),l=a*Math.cos(o),c=a*Math.sin(o),u=Math.sqrt(1-(l*l+c*c));t.push(new U(l,c,u))}return t}generateHemisphereSamplesR(e){let t=[];for(let i=0;i<e;i++)t.push((i+1)/e);return t}generateDenoiseSamples(e,t){let i=2*Math.PI*t/e,o=1/e,a=o,l=[],c=o,u=0;for(let h=0;h<e;h++)l.push(new he(Math.cos(u),Math.sin(u)).multiplyScalar(Math.pow(c,.75))),c+=a,u+=i;return l}setSize(e,t){this.width=e,this.height=t;let i=this.configuration.halfRes?.5:1;this.beautyRenderTarget.setSize(e,t),this.writeTargetInternal.setSize(e*i,t*i),this.readTargetInternal.setSize(e*i,t*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*i,t*i)}render(e,t,i,o,a){e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer));let l,c,u;this.debugMode&&(l=e.getContext(),c=l.getExtension("EXT_disjoint_timer_query_webgl2"),c===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.configuration.autoRenderBeauty&&(e.setRenderTarget(this.beautyRenderTarget),e.render(this.scene,this.camera)),this.debugMode&&(u=l.createQuery(),l.beginQuery(c.TIME_ELAPSED_EXT,u));let h=e.xr.enabled;e.xr.enabled=!1,this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let A=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(A*=.5),this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new U),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=A,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let f=0;f<this.configuration.denoiseIterations;f++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new U),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=A,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=f,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=this.beautyRenderTarget.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.beautyRenderTarget.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=A,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new U),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.renderToScreen?null:t),this.effectCompositerQuad.render(e),this.debugMode&&(l.endQuery(c.TIME_ELAPSED_EXT),rF(u,l,this)),e.xr.enabled=h}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}};var h2=new ke,vp=class n{constructor(e){e=e||{},this.vertices={near:[new U,new U,new U,new U],far:[new U,new U,new U,new U]},e.projectionMatrix!==void 0&&this.setFromProjectionMatrix(e.projectionMatrix,e.maxFar||1e4)}setFromProjectionMatrix(e,t){let i=e.elements[11]===0;return h2.copy(e).invert(),this.vertices.near[0].set(1,1,-1),this.vertices.near[1].set(1,-1,-1),this.vertices.near[2].set(-1,-1,-1),this.vertices.near[3].set(-1,1,-1),this.vertices.near.forEach(function(o){o.applyMatrix4(h2)}),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach(function(o){o.applyMatrix4(h2);let a=Math.abs(o.z);i?o.z*=Math.min(t/a,1):o.multiplyScalar(Math.min(t/a,1))}),this.vertices}split(e,t){for(;e.length>t.length;)t.push(new n);t.length=e.length;for(let i=0;i<e.length;i++){let o=t[i];if(i===0)for(let a=0;a<4;a++)o.vertices.near[a].copy(this.vertices.near[a]);else for(let a=0;a<4;a++)o.vertices.near[a].lerpVectors(this.vertices.near[a],this.vertices.far[a],e[i-1]);if(i===e.length-1)for(let a=0;a<4;a++)o.vertices.far[a].copy(this.vertices.far[a]);else for(let a=0;a<4;a++)o.vertices.far[a].lerpVectors(this.vertices.near[a],this.vertices.far[a],e[i])}}toSpace(e,t){for(let i=0;i<4;i++)t.vertices.near[i].copy(this.vertices.near[i]).applyMatrix4(e),t.vertices.far[i].copy(this.vertices.far[i]).applyMatrix4(e)}};var A2={lights_fragment_begin:`
GeometricContext geometry;

geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

#ifdef CLEARCOAT

	geometry.clearcoatNormal = clearcoatNormal;

#endif

IncidentLight directLight;

#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

		pointLight = pointLights[ i ];

		getPointLightInfo( pointLight, geometry, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif

		RE_Direct( directLight, geometry, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

		spotLight = spotLights[ i ];

		getSpotLightInfo( spotLight, geometry, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;

		#endif

		RE_Direct( directLight, geometry, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM ) && defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	float linearDepth = (vViewPosition.z) / (shadowFar - cameraNear);
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#if defined( USE_SHADOWMAP ) && defined( CSM_FADE )
	vec2 cascade;
	float cascadeCenter;
	float closestEdge;
	float margin;
	float csmx;
	float csmy;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );

	  	#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
			// NOTE: Depth gets larger away from the camera.
			// cascade.x is closer, cascade.y is further
			cascade = CSM_cascades[ i ];
			cascadeCenter = ( cascade.x + cascade.y ) / 2.0;
			closestEdge = linearDepth < cascadeCenter ? cascade.x : cascade.y;
			margin = 0.25 * pow( closestEdge, 2.0 );
			csmx = cascade.x - margin / 2.0;
			csmy = cascade.y + margin / 2.0;
			if( linearDepth >= csmx && ( linearDepth < csmy || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 ) ) {

				float dist = min( linearDepth - csmx, csmy - linearDepth );
				float ratio = clamp( dist / margin, 0.0, 1.0 );

				vec3 prevColor = directLight.color;
				directionalLightShadow = directionalLightShadows[ i ];
				directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

				bool shouldFadeLastCascade = UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth > cascadeCenter;
				directLight.color = mix( prevColor, directLight.color, shouldFadeLastCascade ? ratio : 1.0 );

				ReflectedLight prevLight = reflectedLight;
				RE_Direct( directLight, geometry, material, reflectedLight );

				bool shouldBlend = UNROLLED_LOOP_INDEX != CSM_CASCADES - 1 || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth < cascadeCenter;
				float blendRatio = shouldBlend ? ratio : 1.0;

				reflectedLight.directDiffuse = mix( prevLight.directDiffuse, reflectedLight.directDiffuse, blendRatio );
				reflectedLight.directSpecular = mix( prevLight.directSpecular, reflectedLight.directSpecular, blendRatio );
				reflectedLight.indirectDiffuse = mix( prevLight.indirectDiffuse, reflectedLight.indirectDiffuse, blendRatio );
				reflectedLight.indirectSpecular = mix( prevLight.indirectSpecular, reflectedLight.indirectSpecular, blendRatio );

			}
	  	#endif

	}
	#pragma unroll_loop_end
	#else

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, geometry, directLight );

			#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )

			directionalLightShadow = directionalLightShadows[ i ];
			if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y) directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

			if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && (linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1)) RE_Direct( directLight, geometry, material, reflectedLight );

			#endif

		}
		#pragma unroll_loop_end

	#endif

	#if ( NUM_DIR_LIGHTS > NUM_DIR_LIGHT_SHADOWS)
		// compute the lights not casting shadows (if any)

		#pragma unroll_loop_start
		for ( int i = NUM_DIR_LIGHT_SHADOWS; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];

			getDirectionalLightInfo( directionalLight, geometry, directLight );

			RE_Direct( directLight, geometry, material, reflectedLight );

		}
		#pragma unroll_loop_end

	#endif

#endif


#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM ) && !defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];

		getDirectionalLightInfo( directionalLight, geometry, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometry, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

	RectAreaLight rectAreaLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if defined( RE_IndirectDiffuse )

	vec3 iblIrradiance = vec3( 0.0 );

	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );

	#if ( NUM_HEMI_LIGHTS > 0 )

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );

		}
		#pragma unroll_loop_end

	#endif

#endif

#if defined( RE_IndirectSpecular )

	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );

#endif
`,lights_pars_begin:`
#if defined( USE_CSM ) && defined( CSM_CASCADES )
uniform vec2 CSM_cascades[CSM_CASCADES];
uniform float cameraNear;
uniform float shadowFar;
#endif
	`+ht.lights_pars_begin};var sF=new ke,f2=new vp,ya=new U,wp=new Ht,d2=[],p2=[],m2=new ke,oF=new ke,s$=new U(0,1,0),yv=class{constructor(e){this.camera=e.camera,this.parent=e.parent,this.cascades=e.cascades||3,this.maxFar=e.maxFar||1e5,this.mode=e.mode||"practical",this.shadowMapSize=e.shadowMapSize||2048,this.shadowBias=e.shadowBias||1e-6,this.lightDirection=e.lightDirection||new U(1,-1,1).normalize(),this.lightIntensity=e.lightIntensity||3,this.lightNear=e.lightNear||1,this.lightFar=e.lightFar||2e3,this.lightMargin=e.lightMargin||200,this.customSplitsCallback=e.customSplitsCallback,this.fade=!1,this.mainFrustum=new vp,this.frustums=[],this.breaks=[],this.lights=[],this.shaders=new Map,this.createLights(),this.updateFrustums(),this.injectInclude()}createLights(){for(let e=0;e<this.cascades;e++){let t=new Or(16777215,this.lightIntensity);t.castShadow=!0,t.shadow.mapSize.width=this.shadowMapSize,t.shadow.mapSize.height=this.shadowMapSize,t.shadow.camera.near=this.lightNear,t.shadow.camera.far=this.lightFar,t.shadow.bias=this.shadowBias,this.parent.add(t),this.parent.add(t.target),this.lights.push(t)}}initCascades(){let e=this.camera;e.updateProjectionMatrix(),this.mainFrustum.setFromProjectionMatrix(e.projectionMatrix,this.maxFar),this.mainFrustum.split(this.breaks,this.frustums)}updateShadowBounds(){let e=this.frustums;for(let t=0;t<e.length;t++){let o=this.lights[t].shadow.camera,a=this.frustums[t],l=a.vertices.near,c=a.vertices.far,u=c[0],h;u.distanceTo(c[2])>u.distanceTo(l[2])?h=c[2]:h=l[2];let A=u.distanceTo(h);if(this.fade){let f=this.camera,d=Math.max(f.far,this.maxFar),p=a.vertices.far[0].z/(d-f.near),m=.25*Math.pow(p,2)*(d-f.near);A+=m}o.left=-A/2,o.right=A/2,o.top=A/2,o.bottom=-A/2,o.updateProjectionMatrix()}}getBreaks(){let e=this.camera,t=Math.min(e.far,this.maxFar);switch(this.breaks.length=0,this.mode){case"uniform":i(this.cascades,e.near,t,this.breaks);break;case"logarithmic":o(this.cascades,e.near,t,this.breaks);break;case"practical":a(this.cascades,e.near,t,.5,this.breaks);break;case"custom":this.customSplitsCallback===void 0&&console.error("CSM: Custom split scheme callback not defined."),this.customSplitsCallback(this.cascades,e.near,t,this.breaks);break}function i(l,c,u,h){for(let A=1;A<l;A++)h.push((c+(u-c)*A/l)/u);h.push(1)}function o(l,c,u,h){for(let A=1;A<l;A++)h.push(c*(u/c)**(A/l)/u);h.push(1)}function a(l,c,u,h,A){d2.length=0,p2.length=0,o(l,c,u,p2),i(l,c,u,d2);for(let f=1;f<l;f++)A.push(Jt.lerp(d2[f-1],p2[f-1],h));A.push(1)}}update(){let e=this.camera,t=this.frustums;m2.lookAt(new U,this.lightDirection,s$),oF.copy(m2).invert();for(let i=0;i<t.length;i++){let o=this.lights[i],a=o.shadow.camera,l=(a.right-a.left)/this.shadowMapSize,c=(a.top-a.bottom)/this.shadowMapSize;sF.multiplyMatrices(oF,e.matrixWorld),t[i].toSpace(sF,f2);let u=f2.vertices.near,h=f2.vertices.far;wp.makeEmpty();for(let A=0;A<4;A++)wp.expandByPoint(u[A]),wp.expandByPoint(h[A]);wp.getCenter(ya),ya.z=wp.max.z+this.lightMargin,ya.x=Math.floor(ya.x/l)*l,ya.y=Math.floor(ya.y/c)*c,ya.applyMatrix4(m2),o.position.copy(ya),o.target.position.copy(ya),o.target.position.x+=this.lightDirection.x,o.target.position.y+=this.lightDirection.y,o.target.position.z+=this.lightDirection.z}}injectInclude(){ht.lights_fragment_begin=A2.lights_fragment_begin,ht.lights_pars_begin=A2.lights_pars_begin}setupMaterial(e){e.defines=e.defines||{},e.defines.USE_CSM=1,e.defines.CSM_CASCADES=this.cascades,this.fade&&(e.defines.CSM_FADE="");let t=[],i=this,o=this.shaders;e.onBeforeCompile=function(a){let l=Math.min(i.camera.far,i.maxFar);i.getExtendedBreaks(t),a.uniforms.CSM_cascades={value:t},a.uniforms.cameraNear={value:i.camera.near},a.uniforms.shadowFar={value:l},o.set(e,a)},o.set(e,null)}updateUniforms(){let e=Math.min(this.camera.far,this.maxFar);this.shaders.forEach(function(i,o){if(i!==null){let a=i.uniforms;this.getExtendedBreaks(a.CSM_cascades.value),a.cameraNear.value=this.camera.near,a.shadowFar.value=e}!this.fade&&"CSM_FADE"in o.defines?(delete o.defines.CSM_FADE,o.needsUpdate=!0):this.fade&&!("CSM_FADE"in o.defines)&&(o.defines.CSM_FADE="",o.needsUpdate=!0)},this)}getExtendedBreaks(e){for(;e.length<this.breaks.length;)e.push(new he);e.length=this.breaks.length;for(let t=0;t<this.cascades;t++){let i=this.breaks[t],o=this.breaks[t-1]||0;e[t].x=o,e[t].y=i}}updateFrustums(){this.getBreaks(),this.initCascades(),this.updateShadowBounds(),this.updateUniforms()}remove(){for(let e=0;e<this.lights.length;e++)this.parent.remove(this.lights[e].target),this.parent.remove(this.lights[e])}dispose(){let e=this.shaders;e.forEach(function(t,i){delete i.onBeforeCompile,delete i.defines.USE_CSM,delete i.defines.CSM_CASCADES,delete i.defines.CSM_FADE,t!==null&&(delete t.uniforms.CSM_cascades,delete t.uniforms.cameraNear,delete t.uniforms.shadowFar),i.needsUpdate=!0}),e.clear()}};function y2(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function o$(n,e){let t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);let i=y2(t);return(o,a)=>i.then(l=>a(l.transaction(e,o).objectStore(e)))}var g2;function aF(){return g2||(g2=o$("keyval-store","keyval")),g2}function lF(n,e=aF()){return e("readonly",t=>y2(t.get(n)))}function cF(n,e,t=aF()){return t("readwrite",i=>(i.put(e,n),y2(i.transaction)))}async function vv(n){return lF(n)}async function wv(n,e){return await cF(n,e)}window.ARKit=Qi;window.THREE=Zh;function Ws(...n){console.log("[lim]",...n)}window.nerk=Ws;function Eo(){return window._embedded==!0}window.isembedded=Eo;var sA=class n extends Ji{static create=(...e)=>new n(...e);constructor(e,t){if(super(),window.app=this,this.parent=e,this.width=this.parent.clientWidth,this.height=this.parent.clientHeight,this.clock=new yl,this.idletime=180*1e3,this.anchors={},this.mixers=[],this.updatefns=[],this.resizefns=[],this.trackingstate="",this.interval=0,this.resizeTimeout=0,this.campos=new U,this.lastcampos=new U,Oi.imageFrame=!1,Oi.pointCloud=!1,Qi.updateConfig(),Eo()||(document.body.style.background="#bbbbb0"),this.initevents(),this.makekeytab(),this.scene=new ua,this.root=new Yt,this.scene.add(this.root),Eo()&&(this.root.position.y=-1),this.renderer=new Rh({alpha:!0,antialias:!1,stencil:!1,powerPreference:"high-performance"}),this.renderer.outputColorSpace="srgb",this.renderer.autoClear=!0,this.renderer.info.autoReset=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Dy,this.renderer.useLegacyLights=!1,this.parent.appendChild(this.renderer.domElement),mp&&(this.cssrend=new mp,this.cssscene=new ua,this.cssrend.domElement.id="css3d",this.cssrend.domElement.style.position="absolute",this.cssrend.domElement.style.background="rgba(0,0,0,0)",this.cssrend.domElement.style.overflow="hidden",this.cssrend.domElement.style.top=0,this.cssrend.domElement.style.left=0,this.cssrend.domElement.style.pointerEvents="none",this.parent.appendChild(this.cssrend.domElement)),Eo())this.camera=new lp,this.camera.far=400,this.camera.position.y=1e3,this.camera.updateMatrixWorld();else{let l=40,c=600,u=.1,h=this.width/this.height;this.camera=new rn(l,h,u,c),this.camera.position.set(0,.8,4)}this.camtform=new Yt,this.scene.add(this.camtform),this.camtform.add(this.camera),Eo(),this.csm=new yv({camera:this.camera,cascades:4,lightDirection:new U(.5,-1,-.25).normalize(),maxFar:1e3,mode:"practical",parent:this.scene,shadowMapSize:3e3,fade:!0}),Eo()||(this.composer=this.composerao());let i=new Fc(this.renderer);i.compileEquirectangularShader(),this.envmap=i.fromScene(new mv).texture,this.envmap.colorSpace="srgb",this.scene.environment=this.envmap,this.renderer.toneMapping=Ry,this.renderer.toneMappingExposure=.9,this.scene.fog=new Lh(12303280,.01),this.touchControls=new hp(this.renderer.domElement),this.setuphandlers(),this.bindlisteners(),this.resize(),Eo()||(this.fpcontrols=new o2(this.camera,this.renderer.domElement),this.restorecamera()),this.makefloor(),Eo()&&(this.planeindicator=new up,this.scene.add(this.planeindicator.mesh),this.overlayui()),setInterval(this.checkidle.bind(this),1e3),this.anchorMesh=(()=>{let l=new wn(.1,.1,.1),c=new fr({opacity:.7,side:Ai,transparent:!0}),u=new He(l,c);return l.translate(0,.05,0),u.castShadow=!0,u.receiveShadow=!0,u})(),Eo()?this.renderer.setAnimationLoop(this.render.bind(this)):this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.parent.focus();let o=new Jn;o.color.setHex(5592405),o.transparent=!0,o.opacity=1,o.side=Pt,this.overridematerial=o;let a=sotext();a.position.set(1,1,-2),this.root.add(a),this.inited=new Date().toLocaleString()}addorbitcontrols(){this.orbitcontrols=new cv(this.camera,this.renderer.domElement),this.orbitcontrols.enableDamping=!0,this.orbitcontrols.dampingFactor=.6,this.orbitcontrols.touches.ONE=zs.PAN,this.orbitcontrols.touches.TWO=zs.DOLLY_ROTATE,this.fpcontrols.detach(),this.fpcontrols=null}addfpcontrols(){this.fpcontrols=new o2(this.camera,this.renderer.domElement),this.orbitcontrols.dispose(),this.orbitcontrols=null}async p0place(){let e=(await place()).a;e.position.y=-1,this.root.add(e)}lightset0(){let e=new Xc(16777215,16777215,1),t=new Or(16777215,1);e.intensity=.5,this.hemilight=e,this.scene.add(e),t.intensity=1,t.position.set(-10,30,10),t.shadow.mapSize.set(2048,2048),t.castShadow=!0;{let i=20;t.shadow.camera.left=-i,t.shadow.camera.right=i,t.shadow.camera.top=i,t.shadow.camera.bottom=-i,t.shadow.camera.aspect=1,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.005}this.dlight=t,this.scene.add(t)}lightset1(){let e=new Xc(16777215,0,1),t=new Or(16777215,1),i=new ml;i.intensity=.5,this.scene.add(i),e.intensity=.3,this.hemilight=e,this.scene.add(e),t.intensity=.5,t.position.set(-10,30,10),t.shadow.mapSize.set(2048,2048),t.castShadow=!0;{let o=25;t.shadow.camera.left=-o,t.shadow.camera.right=o,t.shadow.camera.top=o,t.shadow.camera.bottom=-o,t.shadow.camera.aspect=1,t.shadow.camera.near=1,t.shadow.camera.far=50}this.dlight=t,this.scene.add(t)}makefloor(){this.floor=new He(new Nr(350,350,.001,20),new Oh),this.floor.receiveShadow=!0,this.floor.material.transparent=!0,this.floor.material.opacity=.5,this.floor.renderOrder=1,this.root.add(this.floor)}overlayui(){document.body.style.background="transparent";let e=this.makebutton("exit");e.style.position="absolute",e.style.bottom="1px",e.style.right="1px",document.body.appendChild(e),e.addEventListener("click",()=>Io({action:"exit"})),e=this.makebutton("reload"),e.style.position="absolute",e.style.bottom="1px",e.style.right="60px",document.body.appendChild(e),e.addEventListener("click",()=>{Io({action:"reload"})})}composerao(){let e=new ga(this.renderer),t=new gp(this.scene,this.camera,window.innerWidth,window.innerHeight);return t.configuration.halfRes=!0,e.n8aopass=t,e.addPass(t),e.addPass(new pp(window.innerWidth,window.innerHeight)),e}composeraoaa(){let e=new ga(this.renderer),t=new gp(this.scene,this.camera,window.innerWidth,window.innerHeight);return t.configuration.halfRes=!0,e.n8aopass=t,e.addPass(new pp(window.innerWidth,window.innerHeight)),e}composerpencil(){let e=new ga(this.renderer),t=new qy(this);return t.renderToScreen=!0,e.addPass(t),e}composerbloom(){let e=new ga(this.renderer),t=new tA(this.scene,this.camera),i=new Il(new he(window.innerWidth,window.innerHeight),1,1.4,.8);return e.addPass(t),e.addPass(i),e.bloom=i,e}composer0(){let e=this.parent.clientWidth,t=this.parent.clientHeight,i=new ga(this.renderer);i.addPass(new tA(this.scene,this.camera)),i.addPass(new mr(l2));let o=new mr(El);o.uniforms.defaultColor={value:new De(16777215)},o.uniforms.luminosityThreshold={value:.04},i.addPass(o),this.sobel=new mr(c2);let a=()=>{let u=this.parent.offsetWidth,h=this.parent.offsetHeight;this.sobel.uniforms.resolution.value.x=u*window.devicePixelRatio,this.sobel.uniforms.resolution.value.y=u*window.devicePixelRatio};a(),this.resizefns.push(a),i.addPass(this.sobel);let l=new mr($N);i.addPass(l),this.invertindex=i.passes.length-1,this.invertpass=l,this.thresh=new mr(u2),this.thresh.uniforms.clearsaturation.value=.15,this.thresh.uniforms.threshold.value=.99,i.addPass(this.thresh);let c=new Il(new he(window.innerWidth,window.innerHeight),1,.4,0);return this.updatefns.push(()=>{this.thresh.uniforms.uTime.value=this.clock.getElapsedTime()}),i}composer0invert(){let e=this.parent.clientWidth,t=this.parent.clientHeight,i=new ga(this.renderer);i.addPass(new tA(this.scene,this.camera)),i.addPass(new mr(l2));let o=new mr(El);o.uniforms.defaultColor={value:new De(16777215)},o.uniforms.luminosityThreshold={value:.05},i.addPass(o),this.sobel=new mr(c2);let a=()=>{let h=this.parent.offsetWidth,A=this.parent.offsetHeight;this.sobel.uniforms.resolution.value.x=h*window.devicePixelRatio,this.sobel.uniforms.resolution.value.y=h*window.devicePixelRatio};a(),this.resizefns.push(a),i.addPass(this.sobel);let l=new mr(u2);l.uniforms.clearsaturation.value=.07,l.uniforms.threshold.value=.01,i.addPass(l),this.thresh=l;let c=new Il(new he(window.innerWidth,window.innerHeight),0,.4,.85),u=new nA;return this.updatefns.push(()=>{l.uniforms.uTime.value=this.clock.getElapsedTime()}),i}pause(){this.orbitcontrols&&(this.orbitcontrols.enabled=!1),this.renderer.setAnimationLoop(null)}resume(){this.orbitcontrols&&(this.orbitcontrols.enabled=!0),this.renderer.setAnimationLoop(this.render.bind(this))}hittest(){Qi.hitTest(x,y,hitType=ARHitTestResultType.featurePoint)}togglepoints(e){return e=e===void 0?!Oi.pointCloud:e,Oi.pointCloud=e,Qi.updateConfig(),Oi.pointCloud}toggleimage(e){return e===!0||e===!1?Oi.imageFrame=e:Oi.imageFrame=!Oi.imageFrame,Qi.updateConfig(),Oi.imageFrame}bindlisteners(){window.addEventListener("resize",this.onResize,!1),this.touchControls.on("end",this.onTouch),HN.on("frame",this.onARFrame.bind(this)),Qi.on("frame",this.onARFrame.bind(this)),Qi.on("sessionInterupted",this.onARSessionInterupted),Qi.on("sessionInteruptedEnded",this.onARSessionInteruptedEnded),Qi.on("trackingStateChange",this.onARTrackingStateChange),Qi.on("anchorsAdded",this.onARAnchorsAdded),Qi.on("anchorsRemoved",this.onARAnchorsRemoved),Qi.on("debug",e=>this.onDebug(e))}onDebug(e){Ws("ondebug",e)}setuphandlers(){let e=this;this.onResize=()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.resize.bind(this),1)},this.onARFrame=t=>{let i=this.camera;if(this.arframedata=t,t.mapdata&&(this.mapdata=t.mapdata,console.log("mapdata",this.mapdata.length),this.onmapdata&&this.onmapdata(this.mapdata)),t.camera&&(this.camera.update(t.camera),this.dispatchEvent({type:"viewchange"})),t.ambientIntensity&&this.dlight&&(this.dlight.intensity=t.ambientIntensity),this.planeindicator&&this.planeindicator.update(this.camera,Object.values(this.anchors)),t.pointCloud)try{let o=t.pointCloud.points,a=t.image;this.pointCloud.update(t.pointCloud.points)}catch(o){console.warn(o)}if(t.image)try{let o=document.querySelector("#img0");o.src="data:image/jpeg;charset=utf-8;base64,"+t.image,imgcallback&&imgcallback(o)}catch(o){console.warn(o)}t.anchors&&t.anchors.forEach(o=>{this.anchors[o.identifier]===void 0?this.addARAnchor(o):this.updateARAnchor(o)})},this.onARAnchorsAdded=t=>{},this.onARAnchorsRemoved=t=>{t.anchors.forEach(i=>{this.anchors[i.identifier]&&this.scene.remove(this.anchors[i.identifier].group)})},this.onARSessionInterupted=()=>{Ws("session interupted")},this.onARSessionInteruptedEnded=()=>{Ws("session interupted ended")},this.onTouch=()=>{if(this.planeindicator&&this.planeindicator.tracking){let t=this.planeindicator.getPosition(),i=Object.values(this.anchors).filter(c=>c.type===r2),o=i.map(c=>c.identifier),a=new ke;Qi.removeAnchors(o),a.makeTranslation(t.x,t.y,t.z),Ws("ground",t.y.toFixed(2)),this.root.position.y=t.y,Qi.addAnchor(a.toArray());let l=t.toArray().map(c=>c.toFixed(1))}},this.onARTrackingStateChange=t=>{switch(t){case jc.normal:this.trackingstate="normal";break;case jc.notAvailable:this.trackingstate="not available";break;case jc.excessiveMotion:this.trackingstate="too much camera motion";break;case jc.insufficientFeatures:this.trackingstate="not enough features";break;case jc.initializing:this.trackingstate="initialising";break;case jc.relocalizing:this.trackingstate="relocalising";break;default:break}Ws("tracking",this.trackingstate)}}addARAnchor(e){switch(e.type){case cp:{this.anchors[e.identifier]=new ov(e);break}default:{this.anchors[e.identifier]=new sv(e),this.anchorMesh&&(this.anchorMesh.visible=!0,this.anchors[e.identifier].group.add(this.anchorMesh));break}}this.scene.add(this.anchors[e.identifier].group)}updateARAnchor(e){this.anchors[e.identifier].update(e)}prerendertasks(e){this.updatefns.forEach(t=>t()),this.mixers.forEach(t=>t.update(e)),tweenupdate()}render(){let e=this.clock.getDelta();this.renderer.info.reset(),this.prerendertasks(e),this.orbitcontrols&&this.orbitcontrols.update(),this.fpcontrols&&this.fpcontrols.update(.05),this.csm&&this.csm.update(),this.composer?this.composer.render(e):this.renderer.render(this.scene,this.camera),this.cssrend&&this.cssrend.render(this.cssscene,this.camera)}checkidle(){let e=Date.now();if(Eo()){this.activitystamp=e;return}return this.checkpointcamera(),this.camera.position.equals(this.campos)||(this.campos.copy(this.camera.position),this.activitystamp=e),e-this.activitystamp>this.idletime?(this.interval||(this.interval=1e3),this.isidle=!0):this.isidle=!1,this.interval}restorecamera(){let e=localStorage.getItem("camera");try{if(e){e=JSON.parse(e),this.camera.position.fromArray(e.pos),this.camera.rotation.fromArray(e.rot),this.camera.userData.targetPosition.copy(this.camera.position),this.camera.userData.targetRotation.copy(this.camera.rotation);let t=this.orbitcontrols||this.fpcontrols;t.target.fromArray(e.target),t.update(1)}}catch(t){Ws(t)}return e}checkpointcamera(){try{if(this.camera.position.distanceToSquared(this.lastcampos)>0){let e=this.orbitcontrols||this.fpcontrols,t={pos:this.camera.position.toArray(),rot:this.camera.rotation.toArray(),target:e.target.toArray()};localStorage.setItem("camera",JSON.stringify(t)),this.lastcampos.copy(this.camera.position)}}catch(e){Ws(e)}}focus(){return this.parent.focus()}initevents(){let e=this.parent,t=this,i={passive:!0};e.addEventListener("mouseenter",o=>{this.focus()},!0),e.addEventListener("touchend",o=>{this.focus()}),e.addEventListener("keydown",o=>this.keydispatch(o)),["mouseenter","touchstart","touchend","touchmove","dragstart","dragend","dragmove","wheel","mousewheel","click","keypress","keyup","keydown"].forEach(o=>e.addEventListener(o,a=>t.setactive(a),i))}setactive(e){this.interval=0,this.isidle&&(this.activitystamp=Date.now(),this.idletimeout&&clearTimeout(this.idletimeout),this.rafid&&(cancelAnimationFrame(this.rafid),this.rafid=requestAnimationFrame(this.render_raf.bind(this))),this.checkidle())}render_raf(){this.interval?this.idletimeout=setTimeout(e=>this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.interval):this.rafid=requestAnimationFrame(this.render_raf.bind(this)),this.render()}resize(){let e=this.parent.clientWidth,t=this.parent.clientHeight;this.width=e,this.height=t,this.renderer.setSize(e,t),this.composer&&this.composer.setSize(e,t),this.cssrend&&this.cssrend.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.resizefns.forEach(i=>i())}makekeytab(){this.keytab={h:()=>this.home(),c:()=>repl.cfocus(),\u00E7:()=>repl.cfocus(),r:()=>this.reload()}}reload(){console.warn("reload"),this.unload("reload"),window.location.reload()}unload(e){return Ws("unload...return",e,lim.inited)}keydispatch(e){if(!(e.ctrlKey||e.altKey||e.metaKey))return!1;if(e.key=="f")try{qh(null,document.body)}catch(i){Ws("tfs",i)}let t=this.keytab[e.key];return t?(e.preventDefault(),t(e)):!0}synclight(){return this.pointlight.position.copy(this.camera.position)}home(e){tp(Gr(0,1.2,0),5,.1,e)}bindbutton(e,t,i){let o=document.getElementById(e);o.addEventListener("click",t),i&&(o.innerHTML=i)}makebutton(e){let t=document.createElement("div"),i=document.createElement("span");return t.id=e,t.classList.add("button"),t.appendChild(i),i.innerText=e,t}dead__lookto(e,t,i,o){t=t||1,i=i??.1,o=o||1e3;let a=this.orbitcontrols||this.fpcontrols,l=this.camera;return e.position&&(e=e.position.clone()),this.orbitcontrols&&tween(a.target).to({x:e.x,y:e.y,z:e.z},o/2).on("update",()=>a.update(1)),this.fpcontrols&&tween(l.rotation).to({x:e.x,y:e.y,z:e.z},o/2).on("update",c=>{l.lookAt(c),l.userData.targetRotation.copy(l.rotation),a.update(.1)}),tween(l.position).delay(10+o/2).to({x:e.x,y:e.y+i,z:e.z+t},o).on("update",function(){l.userData.targetPosition&&l.userData.targetPosition.copy(l.position),a.update(1)})}exportmap(e){Io({action:"exportmap",file:e})}importmapfile(e){Io({action:"importmap",file:e})}importmap(e){Io({action:"importmap",mapdata:e})}clearcache(){Io({action:"importmap"})}async savemap(e){e=e||"default",this.exportmap(e),this.onmapdata=async t=>{console.warn("onmapdata",t.length),await wv(e,t),this.onmapdata=!1}}async restoremap(e){e=e||"default";let t=await vv(e);console.warn("restoremap",t.length),this.importmap(t)}nerk(...e){Ws("lim",e)}postmessage(e){return Io(e)}};async function l$(n){let e=new CompressionStream("gzip"),t=e.writer.getWriter(),i=[],o=e.readable.getReader(),a=0;for(t.write(n),t.close();;){let{value:u,done:h}=await o.read();if(h)break;i.push(u),a+=u.byteLength}let l=new Uint8Array(totalSize),c=0;for(let u of i)l.set(u,c),c+=u.byteLength;return l}window.compress=l$;var Io=n=>n;window.webkit&&(Io=n=>Qi.postMessage(n));window.jsinterface&&(Io=n=>window.jsinterface.postMessage(JSON.stringify(n)));window.postmessage=Io;sA.info={version:.1,revision:2032,lastmod:"last modified: Thu Aug 10 18:44:03 2023 "};window.Lim=sA;var e_={};ho(e_,{Repl:()=>fu,newrepl:()=>xQ});window.confirm=()=>!0;var bp=class{constructor(e){let t=_os_device_from_basic_console();this.dev=t,this.callback=e||(i=>window.lastout=i),t.use_async_input=()=>!0,t.output_add_buffer=i=>{this.callback(t.decoder.decode(i))},_program_start()}async evalsync(e){let t=this.callback,i=this;return new Promise((o,a)=>{i.callback=l=>{l.match("> ")&&(this.callback=t),l=l.trim(),l=l.replace("> ",""),o(l)},i.eval(e)})}eval(e){if(!e.length)return;let t=this.dev,i=t.read_condvar_scm;t.rbuf=t.encoder.encode(e),t.rlo=0,t.read_condvar_scm=null,i&&_os_condvar_ready_set(i,!0)}};window.Gambit=bp;var Ut=class n{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let o=[];return this.decompose(0,e,o,2),i.length&&i.decompose(0,i.length,o,3),this.decompose(t,this.length,o,1),aA.from(o,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),aA.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),o=new tu(this),a=new tu(e);for(let l=t,c=t;;){if(o.next(l),a.next(l),l=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(c+=o.value.length,o.done||c>=i)return!0}}iter(e=1){return new tu(this,e)}iterRange(e,t=this.length){return new Sv(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let o=this.line(e).from;i=this.iterRange(o,Math.max(o,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ev(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?n.empty:e.length<=32?new zr(e):aA.from(zr.split(e,[]))}},zr=class n extends Ut{constructor(e,t=c$(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,o){for(let a=0;;a++){let l=this.text[a],c=o+l.length;if((t?i:c)>=e)return new w2(o,c,i,l);o=c+1,i++}}decompose(e,t,i,o){let a=e<=0&&t>=this.length?this:new n(uF(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(o&1){let l=i.pop(),c=Cv(a.text,l.text.slice(),0,a.length);if(c.length<=32)i.push(new n(c,l.length+a.length));else{let u=c.length>>1;i.push(new n(c.slice(0,u)),new n(c.slice(u)))}}else i.push(a)}replace(e,t,i){if(!(i instanceof n))return super.replace(e,t,i);let o=Cv(this.text,Cv(i.text,uF(this.text,0,e)),t),a=this.length+i.length-(t-e);return o.length<=32?new n(o,a):aA.from(n.split(o,[]),a)}sliceString(e,t=this.length,i=`
`){let o="";for(let a=0,l=0;a<=t&&l<this.text.length;l++){let c=this.text[l],u=a+c.length;a>e&&l&&(o+=i),e<u&&t>a&&(o+=c.slice(Math.max(0,e-a),t-a)),a=u+1}return o}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],o=-1;for(let a of e)i.push(a),o+=a.length+1,i.length==32&&(t.push(new n(i,o)),i=[],o=-1);return o>-1&&t.push(new n(i,o)),t}},aA=class n extends Ut{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,o){for(let a=0;;a++){let l=this.children[a],c=o+l.length,u=i+l.lines-1;if((t?u:c)>=e)return l.lineInner(e,t,i,o);o=c+1,i=u+1}}decompose(e,t,i,o){for(let a=0,l=0;l<=t&&a<this.children.length;a++){let c=this.children[a],u=l+c.length;if(e<=u&&t>=l){let h=o&((l<=e?1:0)|(u>=t?2:0));l>=e&&u<=t&&!h?i.push(c):c.decompose(e-l,t-l,i,h)}l=u+1}}replace(e,t,i){if(i.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e>=a&&t<=c){let u=l.replace(e-a,t-a,i),h=this.lines-l.lines+u.lines;if(u.lines<h>>5-1&&u.lines>h>>5+1){let A=this.children.slice();return A[o]=u,new n(A,this.length-(t-e)+i.length)}return super.replace(a,c,u)}a=c+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let o="";for(let a=0,l=0;a<this.children.length&&l<=t;a++){let c=this.children[a],u=l+c.length;l>e&&a&&(o+=i),e<u&&t>l&&(o+=c.sliceString(e-l,t-l,i)),l=u+1}return o}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof n))return 0;let i=0,[o,a,l,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=t,a+=t){if(o==l||a==c)return i;let u=this.children[o],h=e.children[a];if(u!=h)return i+u.scanIdentical(h,t);i+=u.length+1}}static from(e,t=e.reduce((i,o)=>i+o.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let m of e)m.flatten(p);return new zr(p,t)}let o=Math.max(32,i>>5),a=o<<1,l=o>>1,c=[],u=0,h=-1,A=[];function f(p){let m;if(p.lines>a&&p instanceof n)for(let b of p.children)f(b);else p.lines>l&&(u>l||!u)?(d(),c.push(p)):p instanceof zr&&u&&(m=A[A.length-1])instanceof zr&&p.lines+m.lines<=32?(u+=p.lines,h+=p.length+1,A[A.length-1]=new zr(m.text.concat(p.text),m.length+1+p.length)):(u+p.lines>o&&d(),u+=p.lines,h+=p.length+1,A.push(p))}function d(){u!=0&&(c.push(A.length==1?A[0]:n.from(A,h)),h=-1,u=A.length=0)}for(let p of e)f(p);return d(),c.length==1?c[0]:new n(c,t)}};Ut.empty=new zr([""],0);function c$(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Cv(n,e,t=0,i=1e9){for(let o=0,a=0,l=!0;a<n.length&&o<=i;a++){let c=n[a],u=o+c.length;u>=t&&(u>i&&(c=c.slice(0,i-o)),o<t&&(c=c.slice(t-o)),l?(e[e.length-1]+=c,l=!1):e.push(c)),o=u+1}return e}function uF(n,e,t){return Cv(n,[""],e,t)}var tu=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof zr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,o=this.nodes[i],a=this.offsets[i],l=a>>1,c=o instanceof zr?o.text.length:o.children.length;if(l==(t>0?c:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof zr){let u=o.text[l+(t<0?-1:0)];if(this.offsets[i]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=o.children[l+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof zr?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Sv=class{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new tu(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*t,this.value=o.length<=i?o:t<0?o.slice(o.length-i):o.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Ev=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:o}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Ut.prototype[Symbol.iterator]=function(){return this.iter()},tu.prototype[Symbol.iterator]=Sv.prototype[Symbol.iterator]=Ev.prototype[Symbol.iterator]=function(){return this});var w2=class{constructor(e,t,i,o){this.from=e,this.to=t,this.number=i,this.text=o}get length(){return this.to-this.from}},lA="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<lA.length;n++)lA[n]+=lA[n-1];function u$(n){for(let e=1;e<lA.length;e+=2)if(lA[e]>n)return lA[e-1]<=n;return!1}function hF(n){return n>=127462&&n<=127487}var AF=8205;function li(n,e,t=!0,i=!0){return(t?yF:h$)(n,e,i)}function yF(n,e,t){if(e==n.length)return e;e&&vF(n.charCodeAt(e))&&wF(n.charCodeAt(e-1))&&e--;let i=qn(n,e);for(e+=er(i);e<n.length;){let o=qn(n,e);if(i==AF||o==AF||t&&u$(o))e+=er(o),i=o;else if(hF(o)){let a=0,l=e-2;for(;l>=0&&hF(qn(n,l));)a++,l-=2;if(a%2==0)break;e+=2}else break}return e}function h$(n,e,t){for(;e>0;){let i=yF(n,e-2,t);if(i<e)return i;e--}return 0}function vF(n){return n>=56320&&n<57344}function wF(n){return n>=55296&&n<56320}function qn(n,e){let t=n.charCodeAt(e);if(!wF(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return vF(i)?(t-55296<<10)+(i-56320)+65536:t}function Mp(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function er(n){return n<65536?1:2}var b2=/\r\n?|\n/,di=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(di||(di={})),va=class n{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,o=0;t<this.sections.length;){let a=this.sections[t++],l=this.sections[t++];l<0?(e(i,o,a),o+=a):o+=l,i+=a}}iterChangedRanges(e,t=!1){x2(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?e.push(i,o):e.push(o,i)}return new n(e)}composeDesc(e){return this.empty?e:e.empty?this:bF(this,e)}mapDesc(e,t=!1){return e.empty?this:C2(this,e,t)}mapPos(e,t=-1,i=di.Simple){let o=0,a=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],u=this.sections[l++],h=o+c;if(u<0){if(h>e)return a+(e-o);a+=c}else{if(i!=di.Simple&&h>=e&&(i==di.TrackDel&&o<e&&h>e||i==di.TrackBefore&&o<e||i==di.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!c)return e==o||t<0?a:a+u;a+=u}o=h}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e,t=e){for(let i=0,o=0;i<this.sections.length&&o<=t;){let a=this.sections[i++],l=this.sections[i++],c=o+a;if(l>=0&&o<=t&&c>=e)return o<e&&c>t?"cover":!0;o=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];e+=(e?" ":"")+i+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new n(e)}static create(e){return new n(e)}},tr=class n extends va{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return x2(this,(t,i,o,a,l)=>e=e.replace(o,o+(i-t),l),!1),e}mapDesc(e,t=!1){return C2(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let o=0,a=0;o<t.length;o+=2){let l=t[o],c=t[o+1];if(c>=0){t[o]=c,t[o+1]=l;let u=o>>1;for(;i.length<u;)i.push(Ut.empty);i.push(l?e.slice(a,a+l):Ut.empty)}a+=l}return new n(t,i)}compose(e){return this.empty?e:e.empty?this:bF(this,e,!0)}map(e,t=!1){return e.empty?this:C2(this,e,t,!0)}iterChanges(e,t=!1){x2(this,e,t)}get desc(){return va.create(this.sections)}filter(e){let t=[],i=[],o=[],a=new nu(this);e:for(let l=0,c=0;;){let u=l==e.length?1e9:e[l++];for(;c<u||c==u&&a.len==0;){if(a.done)break e;let A=Math.min(a.len,u-c);Gi(o,A,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;Gi(t,A,f),f>0&&Ml(i,t,a.text),a.forward(A),c+=A}let h=e[l++];for(;c<h;){if(a.done)break e;let A=Math.min(a.len,h-c);Gi(t,A,-1),Gi(o,A,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(A),c+=A}}return{changes:new n(t,i),filtered:va.create(o)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],o=this.sections[t+1];o<0?e.push(i):o==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let o=[],a=[],l=0,c=null;function u(A=!1){if(!A&&!o.length)return;l<t&&Gi(o,t-l,-1);let f=new n(o,a);c=c?c.compose(f.map(c)):f,o=[],a=[],l=0}function h(A){if(Array.isArray(A))for(let f of A)h(f);else if(A instanceof n){if(A.length!=t)throw new RangeError(`Mismatched change set length (got ${A.length}, expected ${t})`);u(),c=c?c.compose(A.map(c)):A}else{let{from:f,to:d=f,insert:p}=A;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let m=p?typeof p=="string"?Ut.of(p.split(i||b2)):p:Ut.empty,b=m.length;if(f==d&&b==0)return;f<l&&u(),f>l&&Gi(o,f-l,-1),Gi(o,d-f,b),Ml(a,o,m),l=d}}return h(e),u(!c),c}static empty(e){return new n(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;i.length<o;)i.push(Ut.empty);i[o]=Ut.of(a.slice(1)),t.push(a[0],i[o].length)}}}return new n(t,i)}static createSet(e,t){return new n(e,t)}};function Gi(n,e,t,i=!1){if(e==0&&t<=0)return;let o=n.length-2;o>=0&&t<=0&&t==n[o+1]?n[o]+=e:e==0&&n[o]==0?n[o+1]+=t:i?(n[o]+=e,n[o+1]+=t):n.push(e,t)}function Ml(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Ut.empty);n.push(t)}}function x2(n,e,t){let i=n.inserted;for(let o=0,a=0,l=0;l<n.sections.length;){let c=n.sections[l++],u=n.sections[l++];if(u<0)o+=c,a+=c;else{let h=o,A=a,f=Ut.empty;for(;h+=c,A+=u,u&&i&&(f=f.append(i[l-2>>1])),!(t||l==n.sections.length||n.sections[l+1]<0);)c=n.sections[l++],u=n.sections[l++];e(o,h,a,A,f),o=h,a=A}}}function C2(n,e,t,i=!1){let o=[],a=i?[]:null,l=new nu(n),c=new nu(e);for(let u=-1;;)if(l.ins==-1&&c.ins==-1){let h=Math.min(l.len,c.len);Gi(o,h,-1),l.forward(h),c.forward(h)}else if(c.ins>=0&&(l.ins<0||u==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!t))){let h=c.len;for(Gi(o,c.ins,-1);h;){let A=Math.min(l.len,h);l.ins>=0&&u<l.i&&l.len<=A&&(Gi(o,0,l.ins),a&&Ml(a,o,l.text),u=l.i),l.forward(A),h-=A}c.next()}else if(l.ins>=0){let h=0,A=l.len;for(;A;)if(c.ins==-1){let f=Math.min(A,c.len);h+=f,A-=f,c.forward(f)}else if(c.ins==0&&c.len<A)A-=c.len,c.next();else break;Gi(o,h,u<l.i?l.ins:0),a&&u<l.i&&Ml(a,o,l.text),u=l.i,l.forward(l.len-A)}else{if(l.done&&c.done)return a?tr.createSet(o,a):va.create(o);throw new Error("Mismatched change set lengths")}}function bF(n,e,t=!1){let i=[],o=t?[]:null,a=new nu(n),l=new nu(e);for(let c=!1;;){if(a.done&&l.done)return o?tr.createSet(i,o):va.create(i);if(a.ins==0)Gi(i,a.len,0,c),a.next();else if(l.len==0&&!l.done)Gi(i,0,l.ins,c),o&&Ml(o,i,l.text),l.next();else{if(a.done||l.done)throw new Error("Mismatched change set lengths");{let u=Math.min(a.len2,l.len),h=i.length;if(a.ins==-1){let A=l.ins==-1?-1:l.off?0:l.ins;Gi(i,u,A,c),o&&A&&Ml(o,i,l.text)}else l.ins==-1?(Gi(i,a.off?0:a.len,u,c),o&&Ml(o,i,a.textBit(u))):(Gi(i,a.off?0:a.len,l.off?0:l.ins,c),o&&!l.off&&Ml(o,i,l.text));c=(a.ins>u||l.ins>=0&&l.len>u)&&(c||i.length>h),a.forward2(u),l.forward(u)}}}}var nu=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ut.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ut.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},oA=class n{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,o;return this.empty?i=o=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),i==this.from&&o==this.to?this:new n(i,o,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Qe.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Qe.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Qe.range(e.anchor,e.head)}static create(e,t,i){return new n(e,t,i)}},Qe=class n{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:n.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new n([this.main],0)}addRange(e,t=!0){return n.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,n.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(e.ranges.map(t=>oA.fromJSON(t)),e.main)}static single(e,t=e){return new n([n.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=i:a.from<i)return n.normalized(e.slice(),t);i=a.to}return new n(e,t)}static cursor(e,t=0,i,o){return oA.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(o??33554431)<<5)}static range(e,t,i,o){let a=(i??33554431)<<5|(o==null?3:Math.min(2,o));return t<e?oA.create(t,e,24|a):oA.create(e,t,(t>e?4:0)|a)}static normalized(e,t=0){let i=e[t];e.sort((o,a)=>o.from-a.from),t=e.indexOf(i);for(let o=1;o<e.length;o++){let a=e[o],l=e[o-1];if(a.empty?a.from<=l.to:a.from<l.to){let c=l.from,u=Math.max(a.to,l.to);o<=t&&t--,e.splice(--o,2,a.anchor>a.head?n.range(u,c):n.range(c,u))}}return new n(e,t)}};function xF(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var L2=0,nt=class n{constructor(e,t,i,o,a){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=o,this.id=L2++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}static define(e={}){return new n(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:B2),!!e.static,e.enables)}of(e){return new cA([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cA(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cA(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}};function B2(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}var cA=class{constructor(e,t,i,o){this.dependencies=e,this.facet=t,this.type=i,this.value=o,this.id=L2++}dynamicSlot(e){var t;let i=this.value,o=this.facet.compareInput,a=this.id,l=e[a]>>1,c=this.type==2,u=!1,h=!1,A=[];for(let f of this.dependencies)f=="doc"?u=!0:f=="selection"?h=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||A.push(e[f.id]);return{create(f){return f.values[l]=i(f),1},update(f,d){if(u&&d.docChanged||h&&(d.docChanged||d.selection)||S2(f,A)){let p=i(f);if(c?!fF(p,f.values[l],o):!o(p,f.values[l]))return f.values[l]=p,1}return 0},reconfigure:(f,d)=>{let p,m=d.config.address[a];if(m!=null){let b=_v(d,m);if(this.dependencies.every(g=>g instanceof nt?d.facet(g)===f.facet(g):g instanceof ci?d.field(g,!1)==f.field(g,!1):!0)||(c?fF(p=i(f),b,o):o(p=i(f),b)))return f.values[l]=b,0}else p=i(f);return f.values[l]=p,1}}}};function fF(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function S2(n,e){let t=!1;for(let i of e)Cp(n,i)&1&&(t=!0);return t}function A$(n,e,t){let i=t.map(u=>n[u.id]),o=t.map(u=>u.type),a=i.filter(u=>!(u&1)),l=n[e.id]>>1;function c(u){let h=[];for(let A=0;A<i.length;A++){let f=_v(u,i[A]);if(o[A]==2)for(let d of f)h.push(d);else h.push(f)}return e.combine(h)}return{create(u){for(let h of i)Cp(u,h);return u.values[l]=c(u),1},update(u,h){if(!S2(u,a))return 0;let A=c(u);return e.compare(A,u.values[l])?0:(u.values[l]=A,1)},reconfigure(u,h){let A=S2(u,i),f=h.config.facets[e.id],d=h.facet(e);if(f&&!A&&B2(t,f))return u.values[l]=d,0;let p=c(u);return e.compare(p,d)?(u.values[l]=d,0):(u.values[l]=p,1)}}}var dF=nt.define({static:!0}),ci=class n{constructor(e,t,i,o,a){this.id=e,this.createF=t,this.updateF=i,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let t=new n(L2++,e.create,e.update,e.compare||((i,o)=>i===o),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(dF).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,o)=>{let a=i.values[t],l=this.updateF(a,o);return this.compareF(a,l)?0:(i.values[t]=l,1)},reconfigure:(i,o)=>o.config.address[this.id]!=null?(i.values[t]=o.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,dF.of({field:this,create:e})]}get extension(){return this}},$c={lowest:4,low:3,default:2,high:1,highest:0};function xp(n){return e=>new Iv(e,n)}var ds={highest:xp($c.highest),high:xp($c.high),default:xp($c.default),low:xp($c.low),lowest:xp($c.lowest)},Iv=class{constructor(e,t){this.inner=e,this.prec=t}},Mv=class n{of(e){return new Sp(this,e)}reconfigure(e){return n.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Sp=class{constructor(e,t){this.compartment=e,this.inner=t}},Tv=class n{constructor(e,t,i,o,a,l){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=o,this.staticValues=a,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let o=[],a=Object.create(null),l=new Map;for(let d of f$(e,t,l))d instanceof ci?o.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let c=Object.create(null),u=[],h=[];for(let d of o)c[d.id]=h.length<<1,h.push(p=>d.slot(p));let A=i?.config.facets;for(let d in a){let p=a[d],m=p[0].facet,b=A&&A[d]||[];if(p.every(g=>g.type==0))if(c[m.id]=u.length<<1|1,B2(b,p))u.push(i.facet(m));else{let g=m.combine(p.map(w=>w.value));u.push(i&&m.compare(g,i.facet(m))?i.facet(m):g)}else{for(let g of p)g.type==0?(c[g.id]=u.length<<1|1,u.push(g.value)):(c[g.id]=h.length<<1,h.push(w=>g.dynamicSlot(w)));c[m.id]=h.length<<1,h.push(g=>A$(g,m,p))}}let f=h.map(d=>d(c));return new n(e,l,f,c,u,a)}};function f$(n,e,t){let i=[[],[],[],[],[]],o=new Map;function a(l,c){let u=o.get(l);if(u!=null){if(u<=c)return;let h=i[u].indexOf(l);h>-1&&i[u].splice(h,1),l instanceof Sp&&t.delete(l.compartment)}if(o.set(l,c),Array.isArray(l))for(let h of l)a(h,c);else if(l instanceof Sp){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(l.compartment)||l.inner;t.set(l.compartment,h),a(h,c)}else if(l instanceof Iv)a(l.inner,l.prec);else if(l instanceof ci)i[c].push(l),l.provides&&a(l.provides,c);else if(l instanceof cA)i[c].push(l),l.facet.extensions&&a(l.facet.extensions,$c.default);else{let h=l.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(h,c)}}return a(n,$c.default),i.reduce((l,c)=>l.concat(c))}function Cp(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let o=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|o}function _v(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}var CF=nt.define(),SF=nt.define({combine:n=>n.some(e=>e),static:!0}),EF=nt.define({combine:n=>n.length?n[0]:void 0,static:!0}),IF=nt.define(),MF=nt.define(),TF=nt.define(),_F=nt.define({combine:n=>n.length?n[0]:!1}),gr=class{constructor(e,t){this.type=e,this.value=t}static define(){return new E2}},E2=class{of(e){return new gr(this,e)}},I2=class{constructor(e){this.map=e}of(e){return new Ot(this,e)}},Ot=class n{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new n(this.type,t)}is(e){return this.type==e}static define(e={}){return new I2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let o of e){let a=o.map(t);a&&i.push(a)}return i}};Ot.reconfigure=Ot.define();Ot.appendConfig=Ot.define();var pi=class n{constructor(e,t,i,o,a,l){this.startState=e,this.changes=t,this.selection=i,this.effects=o,this.annotations=a,this.scrollIntoView=l,this._doc=null,this._state=null,i&&xF(i,t.newLength),a.some(c=>c.type==n.time)||(this.annotations=a.concat(n.time.of(Date.now())))}static create(e,t,i,o,a,l){return new n(e,t,i,o,a,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(n.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};pi.time=gr.define();pi.userEvent=gr.define();pi.addToHistory=gr.define();pi.remote=gr.define();function d$(n,e){let t=[];for(let i=0,o=0;;){let a,l;if(i<n.length&&(o==e.length||e[o]>=n[i]))a=n[i++],l=n[i++];else if(o<e.length)a=e[o++],l=e[o++];else return t;!t.length||t[t.length-1]<a?t.push(a,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function DF(n,e,t){var i;let o,a,l;return t?(o=e.changes,a=tr.empty(e.changes.length),l=n.changes.compose(e.changes)):(o=e.changes.map(n.changes),a=n.changes.mapDesc(e.changes,!0),l=n.changes.compose(o)),{changes:l,selection:e.selection?e.selection.map(a):(i=n.selection)===null||i===void 0?void 0:i.map(o),effects:Ot.mapEffects(n.effects,o).concat(Ot.mapEffects(e.effects,a)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function M2(n,e,t){let i=e.selection,o=uA(e.annotations);return e.userEvent&&(o=o.concat(pi.userEvent.of(e.userEvent))),{changes:e.changes instanceof tr?e.changes:tr.of(e.changes||[],t,n.facet(EF)),selection:i&&(i instanceof Qe?i:Qe.single(i.anchor,i.head)),effects:uA(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function RF(n,e,t){let i=M2(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let l=!!e[a].sequential;i=DF(i,M2(n,e[a],l?i.changes.newLength:n.doc.length),l)}let o=pi.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return m$(t?p$(o):o)}function p$(n){let e=n.startState,t=!0;for(let o of e.facet(IF)){let a=o(n);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:d$(t,a))}if(t!==!0){let o,a;if(t===!1)a=n.changes.invertedDesc,o=tr.empty(e.doc.length);else{let l=n.changes.filter(t);o=l.changes,a=l.filtered.mapDesc(l.changes).invertedDesc}n=pi.create(e,o,n.selection&&n.selection.map(a),Ot.mapEffects(n.effects,a),n.annotations,n.scrollIntoView)}let i=e.facet(MF);for(let o=i.length-1;o>=0;o--){let a=i[o](n);a instanceof pi?n=a:Array.isArray(a)&&a.length==1&&a[0]instanceof pi?n=a[0]:n=RF(e,uA(a),!1)}return n}function m$(n){let e=n.startState,t=e.facet(TF),i=n;for(let o=t.length-1;o>=0;o--){let a=t[o](n);a&&Object.keys(a).length&&(i=DF(i,M2(e,a,n.changes.newLength),!0))}return i==n?n:pi.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}var g$=[];function uA(n){return n==null?g$:Array.isArray(n)?n:[n]}var mn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(mn||(mn={})),y$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,T2;try{T2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function v$(n){if(T2)return T2.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||y$.test(t)))return!0}return!1}function w$(n){return e=>{if(!/\S/.test(e))return mn.Space;if(v$(e))return mn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return mn.Word;return mn.Other}}var on=class n{constructor(e,t,i,o,a,l){this.config=e,this.doc=t,this.selection=i,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Cp(this,c<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Cp(this,i),_v(this,i)}update(...e){return RF(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:o}=t;for(let l of e.effects)l.is(Mv.reconfigure)?(t&&(o=new Map,t.compartments.forEach((c,u)=>o.set(u,c)),t=null),o.set(l.value.compartment,l.value.extension)):l.is(Ot.reconfigure)?(t=null,i=l.value):l.is(Ot.appendConfig)&&(t=null,i=uA(i).concat(l.value));let a;t?a=e.startState.values.slice():(t=Tv.resolve(i,o,this),a=new n(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values),new n(t,e.newDoc,e.newSelection,a,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Qe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),o=this.changes(i.changes),a=[i.range],l=uA(i.effects);for(let c=1;c<t.ranges.length;c++){let u=e(t.ranges[c]),h=this.changes(u.changes),A=h.map(o);for(let d=0;d<c;d++)a[d]=a[d].map(A);let f=o.mapDesc(h,!0);a.push(u.range.map(f)),o=o.compose(A),l=Ot.mapEffects(l,A).concat(Ot.mapEffects(uA(u.effects),f))}return{changes:o,selection:Qe.create(a,t.mainIndex),effects:l}}changes(e=[]){return e instanceof tr?e:tr.of(e,this.doc.length,this.facet(n.lineSeparator))}toText(e){return Ut.of(e.split(this.facet(n.lineSeparator)||b2))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Cp(this,t),_v(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let o=e[i];o instanceof ci&&this.config.address[o.id]!=null&&(t[i]=o.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i){for(let a in i)if(Object.prototype.hasOwnProperty.call(e,a)){let l=i[a],c=e[a];o.push(l.init(u=>l.spec.fromJSON(c,u)))}}return n.create({doc:e.doc,selection:Qe.fromJSON(e.selection),extensions:t.extensions?o.concat([t.extensions]):o})}static create(e={}){let t=Tv.resolve(e.extensions||[],new Map),i=e.doc instanceof Ut?e.doc:Ut.of((e.doc||"").split(t.staticFacet(n.lineSeparator)||b2)),o=e.selection?e.selection instanceof Qe?e.selection:Qe.single(e.selection.anchor,e.selection.head):Qe.single(0);return xF(o,i.length),t.staticFacet(SF)||(o=o.asSingle()),new n(t,i,o,t.dynamicSlots.map(()=>null),(a,l)=>l.create(a),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(_F)}phrase(e,...t){for(let i of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>t.length?i:t[a-1]})),e}languageDataAt(e,t,i=-1){let o=[];for(let a of this.facet(CF))for(let l of a(this,t,i))Object.prototype.hasOwnProperty.call(l,e)&&o.push(l[e]);return o}charCategorizer(e){return w$(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),l=e-i,c=e-i;for(;l>0;){let u=li(t,l,!1);if(a(t.slice(u,l))!=mn.Word)break;l=u}for(;c<o;){let u=li(t,c);if(a(t.slice(c,u))!=mn.Word)break;c=u}return l==c?null:Qe.range(l+i,c+i)}};on.allowMultipleSelections=SF;on.tabSize=nt.define({combine:n=>n.length?n[0]:4});on.lineSeparator=EF;on.readOnly=_F;on.phrases=nt.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(o=>n[o]==e[o])}});on.languageData=CF;on.changeFilter=IF;on.transactionFilter=MF;on.transactionExtender=TF;Mv.reconfigure=Ot.define();function Hr(n,e,t={}){let i={};for(let o of n)for(let a of Object.keys(o)){let l=o[a],c=i[a];if(c===void 0)i[a]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(t,a))i[a]=t[a](c,l);else throw new Error("Config merge conflict for field "+a)}for(let o in e)i[o]===void 0&&(i[o]=e[o]);return i}var Xs=class{eq(e){return this==e}range(e,t=e){return Ep.create(e,t,this)}};Xs.prototype.startSide=Xs.prototype.endSide=0;Xs.prototype.point=!1;Xs.prototype.mapMode=di.TrackDel;var Ep=class n{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new n(e,t,i)}};function _2(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}var D2=class n{constructor(e,t,i,o){this.from=e,this.to=t,this.value=i,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,o=0){let a=i?this.to:this.from;for(let l=o,c=a.length;;){if(l==c)return l;let u=l+c>>1,h=a[u]-e||(i?this.value[u].endSide:this.value[u].startSide)-t;if(u==l)return h>=0?l:c;h>=0?c=u:l=u+1}}between(e,t,i,o){for(let a=this.findIndex(t,-1e9,!0),l=this.findIndex(i,1e9,!1,a);a<l;a++)if(o(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let i=[],o=[],a=[],l=-1,c=-1;for(let u=0;u<this.value.length;u++){let h=this.value[u],A=this.from[u]+e,f=this.to[u]+e,d,p;if(A==f){let m=t.mapPos(A,h.startSide,h.mapMode);if(m==null||(d=p=m,h.startSide!=h.endSide&&(p=t.mapPos(A,h.endSide),p<d)))continue}else if(d=t.mapPos(A,h.startSide),p=t.mapPos(f,h.endSide),d>p||d==p&&h.startSide>0&&h.endSide<=0)continue;(p-d||h.endSide-h.startSide)<0||(l<0&&(l=d),h.point&&(c=Math.max(c,p-d)),i.push(h),o.push(d-l),a.push(p-l))}return{mapped:i.length?new n(o,a,i,c):null,pos:l}}},Vn=class n{constructor(e,t,i,o){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=o}static create(e,t,i,o){return new n(e,t,i,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:o=0,filterTo:a=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(i&&(t=t.slice().sort(_2)),this.isEmpty)return t.length?n.of(t):this;let c=new Dv(this,null,-1).goto(0),u=0,h=[],A=new fs;for(;c.value||u<t.length;)if(u<t.length&&(c.from-t[u].from||c.startSide-t[u].value.startSide)>=0){let f=t[u++];A.addInner(f.from,f.to,f.value)||h.push(f)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(c.chunkIndex)<t[u].from)&&(!l||o>this.chunkEnd(c.chunkIndex)||a<this.chunkPos[c.chunkIndex])&&A.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||o>c.to||a<c.from||l(c.from,c.to,c.value))&&(A.addInner(c.from,c.to,c.value)||h.push(Ep.create(c.from,c.to,c.value))),c.next());return A.finishInner(this.nextLayer.isEmpty&&!h.length?n.empty:this.nextLayer.update({add:h,filter:l,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],o=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],u=this.chunk[l],h=e.touchesRange(c,c+u.length);if(h===!1)o=Math.max(o,u.maxPoint),t.push(u),i.push(e.mapPos(c));else if(h===!0){let{mapped:A,pos:f}=u.map(c,e);A&&(o=Math.max(o,A.maxPoint),t.push(A),i.push(f))}}let a=this.nextLayer.map(e);return t.length==0?a:new n(i,t,a||n.empty,o)}between(e,t,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o];if(t>=a&&e<=a+l.length&&l.between(a,e-a,t-a,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Ip.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ip.from(e).goto(t)}static compare(e,t,i,o,a=-1){let l=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),c=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),u=pF(l,c,i),h=new eu(l,u,a),A=new eu(c,u,a);i.iterGaps((f,d,p)=>mF(h,f,A,d,p,o)),i.empty&&i.length==0&&mF(h,0,A,0,0,o)}static eq(e,t,i=0,o){o==null&&(o=1e9-1);let a=e.filter(A=>!A.isEmpty&&t.indexOf(A)<0),l=t.filter(A=>!A.isEmpty&&e.indexOf(A)<0);if(a.length!=l.length)return!1;if(!a.length)return!0;let c=pF(a,l),u=new eu(a,c,0).goto(i),h=new eu(l,c,0).goto(i);for(;;){if(u.to!=h.to||!R2(u.active,h.active)||u.point&&(!h.point||!u.point.eq(h.point)))return!1;if(u.to>o)return!0;u.next(),h.next()}}static spans(e,t,i,o,a=-1){let l=new eu(e,null,a).goto(t),c=t,u=l.openStart;for(;;){let h=Math.min(l.to,i);if(l.point){let A=l.activeForPoint(l.to),f=l.pointFrom<t?A.length+1:Math.min(A.length,u);o.point(c,h,l.point,A,f,l.pointRank),u=Math.min(l.openEnd(h),A.length)}else h>c&&(o.span(c,h,l.active,u),u=l.openEnd(h));if(l.to>i)return u+(l.point&&l.to>i?1:0);c=l.to,l.next()}}static of(e,t=!1){let i=new fs;for(let o of e instanceof Ep?[e]:t?b$(e):e)i.add(o.from,o.to,o.value);return i.finish()}};Vn.empty=new Vn([],[],null,-1);function b$(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(_2(e,i)>0)return n.slice().sort(_2);e=i}return n}Vn.empty.nextLayer=Vn.empty;var fs=class n{finishChunk(e){this.chunks.push(new D2(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new n)).add(e,t,i)}addInner(e,t,i){let o=e-this.lastTo||i.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Vn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Vn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function pF(n,e,t){let i=new Map;for(let a of n)for(let l=0;l<a.chunk.length;l++)a.chunk[l].maxPoint<=0&&i.set(a.chunk[l],a.chunkPos[l]);let o=new Set;for(let a of e)for(let l=0;l<a.chunk.length;l++){let c=i.get(a.chunk[l]);c!=null&&(t?t.mapPos(c):c)==a.chunkPos[l]&&!t?.touchesRange(c,c+a.chunk[l].length)&&o.add(a.chunk[l])}return o}var Dv=class{constructor(e,t,i,o=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Ip=class n{constructor(e){this.heap=e}static from(e,t=null,i=-1){let o=[];for(let a=0;a<e.length;a++)for(let l=e[a];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&o.push(new Dv(l,t,i,a));return o.length==1?o[0]:new n(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)v2(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)v2(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),v2(this.heap,0)}}};function v2(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let o=n[i];if(i+1<n.length&&o.compare(n[i+1])>=0&&(o=n[i+1],i++),t.compare(o)<0)break;n[i]=t,n[e]=o,e=i}}var eu=class{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ip.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){bv(this.active,e),bv(this.activeTo,e),bv(this.activeRank,e),this.minActive=gF(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:o,rank:a}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;xv(this.active,t,i),xv(this.activeTo,t,o),xv(this.activeRank,t,a),e&&xv(e,t,this.cursor.from),this.minActive=gF(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&bv(i,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let o=i.length-1;o>=0&&i[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}};function mF(n,e,t,i,o,a){n.goto(e),t.goto(i);let l=i+o,c=i,u=i-e;for(;;){let h=n.to+u-t.to||n.endSide-t.endSide,A=h<0?n.to+u:t.to,f=Math.min(A,l);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&R2(n.activeForPoint(n.to),t.activeForPoint(t.to))||a.comparePoint(c,f,n.point,t.point):f>c&&!R2(n.active,t.active)&&a.compareRange(c,f,n.active,t.active),A>l)break;c=A,h<=0&&n.next(),h>=0&&t.next()}}function R2(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function bv(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function xv(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function gF(n,e){let t=-1,i=1e9;for(let o=0;o<e.length;o++)(e[o]-i||n[o].endSide-n[t].endSide)<0&&(t=o,i=e[o]);return t}function iu(n,e,t=n.length){let i=0;for(let o=0;o<t;)n.charCodeAt(o)==9?(i+=e-i%e,o++):(i++,o=li(n,o));return i}function LF(n,e,t,i){for(let o=0,a=0;;){if(a>=e)return o;if(o==n.length)break;a+=n.charCodeAt(o)==9?t-a%t:1,o=li(n,o)}return i===!0?-1:n.length}var k2="\u037C",BF=typeof Symbol>"u"?"__"+k2:Symbol.for(k2),P2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),kF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},ps=class{constructor(e,t){this.rules=[];let{finish:i}=t||{};function o(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function a(l,c,u,h){let A=[],f=/^@(\w+)\b/.exec(l[0]),d=f&&f[1]=="keyframes";if(f&&c==null)return u.push(l[0]+";");for(let p in c){let m=c[p];if(/&/.test(p))a(p.split(/,\s*/).map(b=>l.map(g=>b.replace(/&/,g))).reduce((b,g)=>b.concat(g)),m,u);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");a(o(p),m,A,d)}else m!=null&&A.push(p.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+m+";")}(A.length||d)&&u.push((i&&!f&&!h?l.map(i):l).join(", ")+" {"+A.join(" ")+"}")}for(let l in e)a(o(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=kF[BF]||1;return kF[BF]=e+1,k2+e.toString(36)}static mount(e,t){(e[P2]||new N2(e)).mount(Array.isArray(t)?t:[t])}},PF=new Map,N2=class{constructor(e){let t=e.ownerDocument||e,i=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=PF.get(t);if(o)return e.adoptedStyleSheets=[o.sheet,...e.adoptedStyleSheets],e[P2]=o;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],PF.set(t,this)}else{this.styleTag=t.createElement("style");let o=e.head||e;o.insertBefore(this.styleTag,o.firstChild)}this.modules=[],e[P2]=this}mount(e){let t=this.sheet,i=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),t)for(let u=0;u<l.rules.length;u++)t.insertRule(l.rules[u],i++)}else{for(;o<c;)i+=this.modules[o++].rules.length;i+=l.rules.length,o++}}if(!t){let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a}}};var wa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hA={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},x$=typeof navigator<"u"&&/Mac/.test(navigator.platform),C$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for($n=0;$n<10;$n++)wa[48+$n]=wa[96+$n]=String($n);var $n;for($n=1;$n<=24;$n++)wa[$n+111]="F"+$n;var $n;for($n=65;$n<=90;$n++)wa[$n]=String.fromCharCode($n+32),hA[$n]=String.fromCharCode($n);var $n;for(Rv in wa)hA.hasOwnProperty(Rv)||(hA[Rv]=wa[Rv]);var Rv;function NF(n){var e=x$&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||C$&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?hA:wa)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Wv(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function H2(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function S$(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Qv(n,e){if(!e.anchorNode)return!1;try{return H2(n,e.anchorNode)}catch{return!1}}function kp(n){return n.nodeType==3?ru(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Xv(n,e,t,i){return t?FF(n,e,t,i,-1)||FF(n,e,t,i,1):!1}function Yv(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function FF(n,e,t,i,o){for(;;){if(n==t&&e==i)return!0;if(e==(o<0?0:Rl(n))){if(n.nodeName=="DIV")return!1;let a=n.parentNode;if(!a||a.nodeType!=1)return!1;e=Yv(n)+(o<0?0:1),n=a}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=o<0?Rl(n):0}else return!1}}function Rl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function EM(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function E$(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function I$(n,e,t,i,o,a,l,c){let u=n.ownerDocument,h=u.defaultView||window;for(let A=n,f=!1;A&&!f;)if(A.nodeType==1){let d,p=A==u.body;if(p)d=E$(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(A).position)&&(f=!0),A.scrollHeight<=A.clientHeight&&A.scrollWidth<=A.clientWidth){A=A.assignedSlot||A.parentNode;continue}let g=A.getBoundingClientRect();d={left:g.left,right:g.left+A.clientWidth,top:g.top,bottom:g.top+A.clientHeight}}let m=0,b=0;if(o=="nearest")e.top<d.top?(b=-(d.top-e.top+l),t>0&&e.bottom>d.bottom+b&&(b=e.bottom-d.bottom+b+l)):e.bottom>d.bottom&&(b=e.bottom-d.bottom+l,t<0&&e.top-b<d.top&&(b=-(d.top+b-e.top+l)));else{let g=e.bottom-e.top,w=d.bottom-d.top;b=(o=="center"&&g<=w?e.top+g/2-w/2:o=="start"||o=="center"&&t<0?e.top-l:e.bottom-w+l)-d.top}if(i=="nearest"?e.left<d.left?(m=-(d.left-e.left+a),t>0&&e.right>d.right+m&&(m=e.right-d.right+m+a)):e.right>d.right&&(m=e.right-d.right+a,t<0&&e.left<d.left+m&&(m=-(d.left+m-e.left+a))):m=(i=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:i=="start"==c?e.left-a:e.right-(d.right-d.left)+a)-d.left,m||b)if(p)h.scrollBy(m,b);else{let g=0,w=0;if(b){let I=A.scrollTop;A.scrollTop+=b,w=A.scrollTop-I}if(m){let I=A.scrollLeft;A.scrollLeft+=m,g=A.scrollLeft-I}e={left:e.left-g,top:e.top-w,right:e.right-g,bottom:e.bottom-w},g&&Math.abs(g-m)<1&&(i="nearest"),w&&Math.abs(w-b)<1&&(o="nearest")}if(p)break;A=A.assignedSlot||A.parentNode}else if(A.nodeType==11)A=A.host;else break}function M$(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}var V2=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Rl(t):0),i,Math.min(e.focusOffset,i?Rl(i):0))}set(e,t,i,o){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=o}},AA=null;function vU(n){if(n.setActive)return n.setActive();if(AA)return n.focus(AA);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(AA==null?{get preventScroll(){return AA={preventScroll:!0},!0}}:void 0),!AA){AA=!1;for(let t=0;t<e.length;){let i=e[t++],o=e[t++],a=e[t++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=a&&(i.scrollLeft=a)}}}var UF;function ru(n,e,t=e){let i=UF||(UF=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function mA(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},o=new KeyboardEvent("keydown",i);o.synthetic=!0,n.dispatchEvent(o);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,n.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function T$(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function wU(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function _$(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Rl(t));;)if(i){if(t.nodeType!=1)return!1;let o=t.childNodes[i-1];o.contentEditable=="false"?i--:(t=o,i=Rl(t))}else{if(t==n)return!0;i=Yv(t),t=t.parentNode}}function bU(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}var yr=class n{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new n(e.parentNode,Yv(e),t)}static after(e,t){return new n(e.parentNode,Yv(e)+1,t)}},IM=[],un=class n{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,o=null,a;for(let l of this.children){if(l.flags&7){if(!l.dom&&(a=o?o.nextSibling:i.firstChild)){let c=n.get(a);(!c||!c.parent&&c.canReuseDOM(l))&&l.reuseDOM(a)}l.sync(e,t),l.flags&=-8}if(a=o?o.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&a!=l.dom&&(t.written=!0),l.dom.parentNode==i)for(;a&&a!=l.dom;)a=OF(a);else i.insertBefore(l.dom,a);o=l.dom}for(a=o?o.nextSibling:i.firstChild,a&&t&&t.node==i&&(t.written=!0);a;)a=OF(a)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let o=Rl(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!n.get(i);)i=i.nextSibling;if(!i)return this.length;for(let o=0,a=0;;o++){let l=this.children[o];if(l.dom==i)return a;a+=l.length+l.breakAfter}}domBoundsAround(e,t,i=0){let o=-1,a=-1,l=-1,c=-1;for(let u=0,h=i,A=i;u<this.children.length;u++){let f=this.children[u],d=h+f.length;if(h<e&&d>t)return f.domBoundsAround(e,t,h);if(d>=e&&o==-1&&(o=u,a=h),h>t&&f.dom.parentNode==this.dom){l=u,c=A;break}A=d,h=d+f.breakAfter}return{from:a,to:c<0?i+this.length:c,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=IM){this.markDirty();for(let o=e;o<t;o++){let a=this.children[o];a.parent==this&&a.destroy()}this.children.splice(e,t-e,...i);for(let o=0;o<i.length;o++)i[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Zv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,o,a,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}};un.prototype.breakAfter=0;function OF(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}var Zv=class{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}};function xU(n,e,t,i,o,a,l,c,u){let{children:h}=n,A=h.length?h[e]:null,f=a.length?a[a.length-1]:null,d=f?f.breakAfter:l;if(!(e==i&&A&&!l&&!d&&a.length<2&&A.merge(t,o,a.length?f:null,t==0,c,u))){if(i<h.length){let p=h[i];p&&o<p.length?(e==i&&(p=p.split(o),o=0),!d&&f&&p.merge(0,o,f,!0,0,u)?a[a.length-1]=p:(o&&p.merge(0,o,null,!1,0,u),a.push(p))):p?.breakAfter&&(f?f.breakAfter=1:l=1),i++}for(A&&(A.breakAfter=l,t>0&&(!l&&a.length&&A.merge(t,A.length,a[0],!1,c,0)?A.breakAfter=a.shift().breakAfter:(t<A.length||A.children.length&&A.children[A.children.length-1].length==0)&&A.merge(t,A.length,null,!1,c,0),e++));e<i&&a.length;)if(h[i-1].become(a[a.length-1]))i--,a.pop(),u=a.length?0:c;else if(h[e].become(a[0]))e++,a.shift(),c=a.length?0:u;else break;!a.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,c,u)&&e--,(e<i||a.length)&&n.replaceChildren(e,i,a)}}function CU(n,e,t,i,o,a){let l=n.childCursor(),{i:c,off:u}=l.findPos(t,1),{i:h,off:A}=l.findPos(e,-1),f=e-t;for(let d of i)f+=d.length;n.length+=f,xU(n,h,A,c,u,i,0,o,a)}var fA="\uFFFF",Kv=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(on.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=fA}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let o=e;;){this.findPointBefore(i,o);let a=this.text.length;this.readNode(o);let l=o.nextSibling;if(l==t)break;let c=un.get(o),u=un.get(l);(c&&u?c.breakAfter:(c?c.breakAfter:QF(o))||QF(l)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>a)&&this.lineBreak(),o=l}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,l=1,c;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(c=o.exec(t))&&(a=c.index,l=c[0].length),this.append(t.slice(i,a<0?t.length:a)),a<0)break;if(this.lineBreak(),l>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=l-1);i=a+l}}readNode(e){if(e.cmIgnore)return;let t=un.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let o=i.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}};function QF(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}var jv=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},Wr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},W2=typeof document<"u"?document:{documentElement:{style:{}}},X2=/Edge\/(\d+)/.exec(Wr.userAgent),SU=/MSIE \d/.test(Wr.userAgent),Y2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wr.userAgent),o1=!!(SU||Y2||X2),GF=!o1&&/gecko\/(\d+)/i.test(Wr.userAgent),F2=!o1&&/Chrome\/(\d+)/.exec(Wr.userAgent),zF="webkitFontSmoothing"in W2.documentElement.style,EU=!o1&&/Apple Computer/.test(Wr.vendor),HF=EU&&(/Mobile\/\w+/.test(Wr.userAgent)||Wr.maxTouchPoints>2),et={mac:HF||/Mac/.test(Wr.platform),windows:/Win/.test(Wr.platform),linux:/Linux|X11/.test(Wr.platform),ie:o1,ie_version:SU?W2.documentMode||6:Y2?+Y2[1]:X2?+X2[1]:0,gecko:GF,gecko_version:GF?+(/Firefox\/(\d+)/.exec(Wr.userAgent)||[0,0])[1]:0,chrome:!!F2,chrome_version:F2?+F2[1]:0,ios:HF,android:/Android\b/.test(Wr.userAgent),webkit:zF,safari:EU,webkit_version:zF?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:W2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},D$=256,ba=class n extends un{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof n)||this.length-(t-e)+i.length>D$||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new yr(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return R$(this.dom,e,t)}},Ll=class n extends un{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let o of t)o.setParent(this)}setAttrs(e){if(wU(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,o,a,l){return i&&(!(i instanceof n&&i.mark.eq(this.mark))||e&&a<=0||t<this.length&&l<=0)?!1:(CU(this,e,t,i?i.children:[],a-1,l-1),this.markDirty(),!0)}split(e){let t=[],i=0,o=-1,a=0;for(let c of this.children){let u=i+c.length;u>e&&t.push(i<e?c.split(e-i):c),o<0&&i>=e&&(o=a),i=u,a++}let l=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new n(this.mark,t,l)}domAtPos(e){return IU(this,e)}coordsAt(e,t){return TU(this,e,t)}};function R$(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let o=e,a=e,l=0;e==0&&t<0||e==i&&t>=0?et.chrome||et.gecko||(e?(o--,l=1):a<i&&(a++,l=-1)):t<0?o--:a<i&&a++;let c=ru(n,o,a).getClientRects();if(!c.length)return null;let u=c[(l?l<0:t>=0)?0:c.length-1];return et.safari&&!l&&u.width==0&&(u=Array.prototype.find.call(c,h=>h.width)||u),l?EM(u,l<0):u||null}var Jv=class n extends un{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new n(e,t,i)}split(e){let t=n.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,o,a,l){return i&&(!(i instanceof n)||!this.widget.compare(i.widget)||e>0&&a<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof n&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,o=this.posAtStart;return i?i.slice(o,o+this.length):Ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yr.before(this.dom):yr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let l=this.side?this.side<0:e>0;for(let c=l?o.length-1:0;a=o[c],!(e>0?c==0:c==o.length-1||a.top<a.bottom);c+=l?-1:1);return EM(a,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Pp=class n extends un{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof n&&e.side==this.side}split(){return new n(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yr.before(this.dom):yr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ut.empty}get isHidden(){return!0}};ba.prototype.children=Jv.prototype.children=Pp.prototype.children=IM;function IU(n,e){let t=n.dom,{children:i}=n,o=0;for(let a=0;o<i.length;o++){let l=i[o],c=a+l.length;if(!(c==a&&l.getSide()<=0)){if(e>a&&e<c&&l.dom.parentNode==t)return l.domAtPos(e-a);if(e<=a)break;a=c}}for(let a=o;a>0;a--){let l=i[a-1];if(l.dom.parentNode==t)return l.domAtPos(l.length)}for(let a=o;a<i.length;a++){let l=i[a];if(l.dom.parentNode==t)return l.domAtPos(0)}return new yr(t,0)}function MU(n,e,t){let i,{children:o}=n;t>0&&e instanceof Ll&&o.length&&(i=o[o.length-1])instanceof Ll&&i.mark.eq(e.mark)?MU(i,e.children[0],t-1):(o.push(e),e.setParent(n)),n.length+=e.length}function TU(n,e,t){let i=null,o=-1,a=null,l=-1;function c(h,A){for(let f=0,d=0;f<h.children.length&&d<=A;f++){let p=h.children[f],m=d+p.length;m>=A&&(p.children.length?c(p,A-d):(!a||a.isHidden&&t>0)&&(m>A||d==m&&p.getSide()>0)?(a=p,l=A-d):(d<A||d==m&&p.getSide()<0&&!p.isHidden)&&(i=p,o=A-d)),d=m}}c(n,e);let u=(t<0?i:a)||i||a;return u?u.coordsAt(Math.max(0,u==i?o:l),t):L$(n)}function L$(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=kp(e);return t[t.length-1]||null}function Z2(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}var VF=Object.create(null);function MM(n,e,t){if(n==e)return!0;n||(n=VF),e||(e=VF);let i=Object.keys(n),o=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=o.length-(t&&o.indexOf(t)>-1?1:0))return!1;for(let a of i)if(a!=t&&(o.indexOf(a)==-1||n[a]!==e[a]))return!1;return!0}function K2(n,e,t){let i=null;if(e)for(let o in e)t&&o in t||n.removeAttribute(i=o);if(t)for(let o in t)e&&e[o]==t[o]||n.setAttribute(i=o,t[o]);return!!i}function B$(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}var xa=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}destroy(e){}},Wn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Wn||(Wn={})),qt=class extends Xs{constructor(e,t,i,o){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(e){return new Np(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Bl(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,o;if(e.isBlockGap)i=-5e8,o=4e8;else{let{start:a,end:l}=_U(e,t);i=(a?t?-3e8:-1:5e8)-1,o=(l?t?2e8:1:-6e8)+1}return new Bl(e,i,o,t,e.widget||null,!0)}static line(e){return new Fp(e)}static set(e,t=!1){return Vn.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};qt.none=Vn.empty;var Np=class n extends qt{constructor(e){let{start:t,end:i}=_U(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof n&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&MM(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};Np.prototype.point=!1;var Fp=class n extends qt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof n&&this.spec.class==e.spec.class&&MM(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};Fp.prototype.mapMode=di.TrackBefore;Fp.prototype.point=!0;var Bl=class n extends qt{constructor(e,t,i,o,a,l){super(t,i,a,e),this.block=o,this.isReplace=l,this.mapMode=o?t<=0?di.TrackBefore:di.TrackAfter:di.TrackDel}get type(){return this.startSide<this.endSide?Wn.WidgetRange:this.startSide<=0?Wn.WidgetBefore:Wn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof n&&k$(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};Bl.prototype.point=!0;function _U(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function k$(n,e){return n==e||!!(n&&e&&n.compare(e))}function j2(n,e,t,i=0){let o=t.length-1;o>=0&&t[o]+i>=n?t[o]=Math.max(t[o],e):t.push(n,e)}var Vr=class n extends un{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,o,a,l){if(i){if(!(i instanceof n))return!1;this.dom||i.transferDOM(this)}return o&&this.setDeco(i?i.attrs:null),CU(this,e,t,i?i.children:[],a,l),!0}split(e){let t=new n;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:o}=this.childPos(e);o&&(t.append(this.children[i].split(o),0),this.children[i].merge(o,this.children[i].length,null,!1,0,0),i++);for(let a=i;a<this.children.length;a++)t.append(this.children[a],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){MM(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){MU(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Z2(t,this.attrs||{})),i&&(this.attrs=Z2({class:i},this.attrs||{}))}domAtPos(e){return IU(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(wU(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(K2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let o=this.dom.lastChild;for(;o&&un.get(o)instanceof Ll;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((i=un.get(o))===null||i===void 0?void 0:i.isEditable)==!1&&(!et.ios||!this.children.some(a=>a instanceof ba))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof ba)||/[^ -~]/.test(i.text))return null;let o=kp(i.dom);if(o.length!=1)return null;e+=o[0].width,t=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=TU(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:o}=this.parent.view.viewState,a=i.bottom-i.top;if(Math.abs(a-o.lineHeight)<2&&o.textHeight<a){let l=(a-o.textHeight)/2;return{top:i.top+l,bottom:i.bottom-l,left:i.left,right:i.left}}}return i}become(e){return!1}get type(){return Wn.Text}static find(e,t){for(let i=0,o=0;i<e.children.length;i++){let a=e.children[i],l=o+a.length;if(l>=t){if(a instanceof n)return a;if(l>t)break}o=l+a.breakAfter}return null}},Up=class n extends un{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,o,a,l){return i&&(!(i instanceof n)||!this.widget.compare(i.widget)||e>0&&a<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?yr.before(this.dom):yr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new n(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return IM}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ut.empty}domBoundsAround(){return null}become(e){return e instanceof n&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Rp=class n{constructor(e,t,i,o){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Up&&e.type==Wn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Vr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lv(new Pp(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:l,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Lv(new ba(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=0}}span(e,t,i,o){this.buildText(t-e,i,o),this.pos=t,this.openStart<0&&(this.openStart=o)}point(e,t,i,o,a,l){if(this.disallowBlockEffectsFor[l]&&i instanceof Bl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(i instanceof Bl)if(i.block){let{type:u}=i;u==Wn.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Up(i.widget||new qv("div"),c,u))}else{let u=Jv.create(i.widget||new qv("span"),c,c?0:i.startSide),h=this.atCursorPos&&!u.isEditable&&a<=o.length&&(e<t||i.startSide>0),A=!u.isEditable&&(e<t||a>o.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),h&&(f.append(Lv(new Pp(1),o),a),a=o.length+Math.max(0,a-o.length)),f.append(Lv(u,o),a),this.atCursorPos=A,this.pendingBuffer=A?e<t||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,i,o,a){let l=new n(e,t,i,a);return l.openEnd=Vn.spans(o,t,i,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}};function Lv(n,e){for(let t of e)n=new Ll(t,[n],n.length);return n}var qv=class extends xa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}},DU=nt.define(),RU=nt.define(),LU=nt.define(),BU=nt.define(),J2=nt.define(),kU=nt.define(),PU=nt.define(),NU=nt.define({combine:n=>n.some(e=>e)}),FU=nt.define({combine:n=>n.some(e=>e)}),$v=class n{constructor(e,t="nearest",i="nearest",o=5,a=5){this.range=e,this.y=t,this.x=i,this.yMargin=o,this.xMargin=a}map(e){return e.empty?this:new n(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}},WF=Ot.define({map:(n,e)=>n.map(e)});function Xr(n,e,t){let i=n.facet(BU);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var a1=nt.define({combine:n=>n.length?n[0]:!0}),P$=0,Tp=nt.define(),mi=class n{constructor(e,t,i,o){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=o(this)}static define(e,t){let{eventHandlers:i,provide:o,decorations:a}=t||{};return new n(P$++,e,i,l=>{let c=[Tp.of(l)];return a&&c.push(Op.of(u=>{let h=u.plugin(l);return h?a(h):qt.none})),o&&c.push(o(l)),c})}static fromClass(e,t){return n.define(i=>new e(i),t)}},Lp=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Xr(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Xr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},UU=nt.define(),TM=nt.define(),Op=nt.define(),_M=nt.define(),OU=nt.define();function QU(n){let e=0,t=0,i=0,o=0;for(let a of n.state.facet(OU)){let l=a(n);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(t=Math.max(t,l.right)),l.top!=null&&(i=Math.max(i,l.top)),l.bottom!=null&&(o=Math.max(o,l.bottom)))}return{left:e,right:t,top:i,bottom:o}}var _p=nt.define(),_o=class n{constructor(e,t,i,o){this.fromA=e,this.toA=t,this.fromB=i,this.toB=o}join(e){return new n(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let o=e[t-1];if(!(o.fromA>i.toA)){if(o.toA<i.fromA)break;i=i.join(o),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let o=0,a=0,l=0,c=0;;o++){let u=o==e.length?null:e[o],h=l-c,A=u?u.fromB:1e9;for(;a<t.length&&t[a]<A;){let f=t[a],d=t[a+1],p=Math.max(c,f),m=Math.min(A,d);if(p<=m&&new n(p+h,m+h,p,m).addToSet(i),d>A)break;a+=2}if(!u)return i;new n(u.fromA,u.toA,u.fromB,u.toB).addToSet(i),l=u.toA,c=u.toB}}},e1=class n{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=tr.empty(this.startState.doc.length);for(let a of i)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,l,c,u)=>o.push(new _o(a,l,c,u))),this.changedRanges=o}static create(e,t,i){return new n(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},cn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(cn||(cn={})),q2=cn.LTR,N$=cn.RTL;function GU(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}var F$=GU("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),U$=GU("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$2=Object.create(null),Mo=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);$2[e]=t,$2[t]=-e}function O$(n){return n<=247?F$[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?U$[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}var Q$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,_l=class{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?N$:q2}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,o){let a=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=t&&c.to>=t){if(c.level==i)return l;(a<0||(o!=0?o<0?c.from<t:c.to>t:e[a].level>c.level))&&(a=l)}}if(a<0)throw new RangeError("Index out of range");return a}},xn=[];function G$(n,e){let t=n.length,i=e==q2?1:2,o=e==q2?2:1;if(!n||i==1&&!Q$.test(n))return zU(t);for(let l=0,c=i,u=i;l<t;l++){let h=O$(n.charCodeAt(l));h==512?h=c:h==8&&u==4&&(h=16),xn[l]=h==4?2:h,h&7&&(u=h),c=h}for(let l=0,c=i,u=i;l<t;l++){let h=xn[l];if(h==128)l<t-1&&c==xn[l+1]&&c&24?h=xn[l]=c:xn[l]=256;else if(h==64){let A=l+1;for(;A<t&&xn[A]==64;)A++;let f=l&&c==8||A<t&&xn[A]==8?u==1?1:8:256;for(let d=l;d<A;d++)xn[d]=f;l=A-1}else h==8&&u==1&&(xn[l]=1);c=h,h&7&&(u=h)}for(let l=0,c=0,u=0,h,A,f;l<t;l++)if(A=$2[h=n.charCodeAt(l)])if(A<0){for(let d=c-3;d>=0;d-=3)if(Mo[d+1]==-A){let p=Mo[d+2],m=p&2?i:p&4?p&1?o:i:0;m&&(xn[l]=xn[Mo[d]]=m),c=d;break}}else{if(Mo.length==189)break;Mo[c++]=l,Mo[c++]=h,Mo[c++]=u}else if((f=xn[l])==2||f==1){let d=f==i;u=d?0:1;for(let p=c-3;p>=0;p-=3){let m=Mo[p+2];if(m&2)break;if(d)Mo[p+2]|=2;else{if(m&4)break;Mo[p+2]|=4}}}for(let l=0;l<t;l++)if(xn[l]==256){let c=l+1;for(;c<t&&xn[c]==256;)c++;let u=(l?xn[l-1]:i)==1,h=(c<t?xn[c]:i)==1,A=u==h?u?1:2:i;for(let f=l;f<c;f++)xn[f]=A;l=c-1}let a=[];if(i==1)for(let l=0;l<t;){let c=l,u=xn[l++]!=1;for(;l<t&&u==(xn[l]!=1);)l++;if(u)for(let h=l;h>c;){let A=h,f=xn[--h]!=2;for(;h>c&&f==(xn[h-1]!=2);)h--;a.push(new _l(h,A,f?2:1))}else a.push(new _l(c,l,0))}else for(let l=0;l<t;){let c=l,u=xn[l++]==2;for(;l<t&&u==(xn[l]==2);)l++;a.push(new _l(c,l,u?1:2))}return a}function zU(n){return[new _l(0,n,0)]}var HU="";function z$(n,e,t,i,o){var a;let l=i.head-n.from,c=-1;if(l==0){if(!o||!n.length)return null;e[0].level!=t&&(l=e[0].side(!1,t),c=0)}else if(l==n.length){if(o)return null;let d=e[e.length-1];d.level!=t&&(l=d.side(!0,t),c=e.length-1)}c<0&&(c=_l.find(e,l,(a=i.bidiLevel)!==null&&a!==void 0?a:-1,i.assoc));let u=e[c];l==u.side(o,t)&&(u=e[c+=o?1:-1],l=u.side(!o,t));let h=o==(u.dir==t),A=li(n.text,l,h);if(HU=n.text.slice(Math.min(l,A),Math.max(l,A)),A!=u.side(o,t))return Qe.cursor(A+n.from,h?-1:1,u.level);let f=c==(o?e.length-1:0)?null:e[c+(o?1:-1)];return!f&&u.level!=t?Qe.cursor(o?n.to:n.from,o?-1:1,t):f&&f.level<u.level?Qe.cursor(f.side(!o,t)+n.from,o?1:-1,f.level):Qe.cursor(A+n.from,o?-1:1,u.level)}var t1=class extends un{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Vr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new _o(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=this.view.inputState.composing<0?null:V$(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;t=new _o(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(t.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(et.ie||et.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=X$(o,a,e.changes);return t=_o.extendWithRanges(t,l),!(this.flags&7)&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=et.chrome||et.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||o.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof Up&&l.widget instanceof n1&&a.push(l.dom);o.updateGaps(a)}updateChildren(e,t,i){let o=i?i.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let l=o.length-1;;l--){let c=l>=0?o[l]:null;if(!c)break;let{fromA:u,toA:h,fromB:A,toB:f}=c,d,p,m,b;if(i&&i.range.fromB<f&&i.range.toB>A){let C=Rp.build(this.view.state.doc,A,i.range.fromB,this.decorations,this.dynamicDecorationMap),E=Rp.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);p=C.breakAtStart,m=C.openStart,b=E.openEnd;let S=this.compositionView(i);E.breakAtStart?S.breakAfter=1:E.content.length&&S.merge(S.length,S.length,E.content[0],!1,E.openStart,0)&&(S.breakAfter=E.content[0].breakAfter,E.content.shift()),C.content.length&&S.merge(0,0,C.content[C.content.length-1],!0,0,C.openEnd)&&C.content.pop(),d=C.content.concat(S).concat(E.content)}else({content:d,breakAtStart:p,openStart:m,openEnd:b}=Rp.build(this.view.state.doc,A,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:w}=a.findPos(h,1),{i:I,off:v}=a.findPos(u,-1);xU(this,I,v,g,w,d,p,m,b)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new ba(e.text.nodeValue);t.flags|=8;for(let{deco:o}of e.marks)t=new Ll(o,[t],t.length);let i=new Vr;return i.append(t,0),i}fixCompositionDOM(e){let t=(a,l)=>{l.flags|=8,this.markedForComposition.add(l);let c=un.get(a);c!=l&&(c&&(c.dom=null),l.setDOM(a))},i=this.childPos(e.range.fromB,1),o=this.children[i.i];t(e.line,o);for(let a=e.marks.length-1;a>=-1;a--)i=o.childPos(i.off,1),o=o.children[i.i],t(a>=0?e.marks[a].node:e.text,o)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,o=i==this.dom,a=!o&&Qv(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(o||t||a))return;let l=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,u=this.domAtPos(c.anchor),h=c.empty?u:this.domAtPos(c.head);if(et.gecko&&c.empty&&!this.hasComposition&&H$(u)){let f=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(f,u.node.childNodes[u.offset]||null)),u=h=new yr(f,0),l=!0}let A=this.view.observer.selectionRange;(l||!A.focusNode||!Xv(u.node,u.offset,A.anchorNode,A.anchorOffset)||!Xv(h.node,h.offset,A.focusNode,A.focusOffset))&&(this.view.observer.ignore(()=>{et.android&&et.chrome&&this.dom.contains(A.focusNode)&&Y$(A.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Wv(this.view.root);if(f)if(c.empty){if(et.gecko){let d=W$(u.node,u.offset);if(d&&d!=3){let p=WU(u.node,u.offset,d==1?1:-1);p&&(u=new yr(p,d==1?0:p.nodeValue.length))}}f.collapse(u.node,u.offset),c.bidiLevel!=null&&A.cursorBidiLevel!=null&&(A.cursorBidiLevel=c.bidiLevel)}else if(f.extend){f.collapse(u.node,u.offset);try{f.extend(h.node,h.offset)}catch{}}else{let d=document.createRange();c.anchor>c.head&&([u,h]=[h,u]),d.setEnd(h.node,h.offset),d.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(u,h)),this.impreciseAnchor=u.precise?null:new yr(A.anchorNode,A.anchorOffset),this.impreciseHead=h.precise?null:new yr(A.focusNode,A.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Wv(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let l=Vr.find(this,t.head);if(!l)return;let c=l.posAtStart;if(t.head==c||t.head==c+l.length)return;let u=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!u||!h||u.bottom>h.top)return;let A=this.domAtPos(t.head+t.assoc);i.collapse(A.node,A.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(o,a)}nearest(e){for(let t=e;t;){let i=un.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let o=this.children[t];if(i<o.length||o instanceof Vr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,o=this.children.length-1;;o--){let a=this.children[o],l=i-a.breakAfter-a.length;if(e>l||e==l&&a.type!=Wn.WidgetBefore&&a.type!=Wn.WidgetAfter&&(!o||t==2||this.children[o-1].breakAfter||this.children[o-1].type==Wn.WidgetBefore&&t>-2))return a.coordsAt(e-l,t);i=l}}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),o=this.children[t];if(!(o instanceof Vr))return null;for(;o.children.length;){let{i:c,off:u}=o.childPos(i,1);for(;;c++){if(c==o.children.length)return null;if((o=o.children[c]).length)break}i=u}if(!(o instanceof ba))return null;let a=li(o.text,i);if(a==i)return null;let l=ru(o.dom,i,a).getClientRects();return!l.length||l[0].top>=l[0].bottom?null:l[0]}measureVisibleLineHeights(e){let t=[],{from:i,to:o}=e,a=this.view.contentDOM.clientWidth,l=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,u=this.view.textDirection==cn.LTR;for(let h=0,A=0;A<this.children.length;A++){let f=this.children[A],d=h+f.length;if(d>o)break;if(h>=i){let p=f.dom.getBoundingClientRect();if(t.push(p.height),l){let m=f.dom.lastChild,b=m?kp(m):[];if(b.length){let g=b[b.length-1],w=u?g.right-p.left:p.right-g.left;w>c&&(c=w,this.minWidth=a,this.minWidthFrom=h,this.minWidthTo=d)}}}h=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?cn.RTL:cn.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Vr){let l=a.measureTextSize();if(l)return l}let e=document.createElement("div"),t,i,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=kp(e.firstChild)[0];t=e.getBoundingClientRect().height,i=a?a.width/27:7,o=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:o}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Zv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,o=0;;o++){let a=o==t.viewports.length?null:t.viewports[o],l=a?a.from-1:this.length;if(l>i){let c=t.lineBlockAt(l).bottom-t.lineBlockAt(i).top;e.push(qt.replace({widget:new n1(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!a)break;i=a.to+1}return qt.set(e)}updateDeco(){let e=this.view.state.facet(Op).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),o;if(!i)return;!t.empty&&(o=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,o.left),top:Math.min(i.top,o.top),right:Math.max(i.right,o.right),bottom:Math.max(i.bottom,o.bottom)});let a=QU(this.view),l={left:i.left-a.left,top:i.top-a.top,right:i.right+a.right,bottom:i.bottom+a.bottom};I$(this.view.scrollDOM,l,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==cn.LTR)}};function H$(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}var n1=class extends xa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function VU(n){let e=n.observer.selectionRange,t=e.focusNode&&WU(e.focusNode,e.focusOffset,0);if(!t)return null;let i=un.get(t),o,a;if(i instanceof ba)o=i.posAtStart,a=o+i.length;else e:for(let l=0,c=t;;){for(let h=c.previousSibling,A;h;h=h.previousSibling){if(A=un.get(h)){o=a=A.posAtEnd+l;break e}let f=new Kv([],n.state);if(f.readNode(h),f.text.indexOf(fA)>-1)return null;l+=f.text.length}if(c=c.parentNode,!c)return null;let u=un.get(c);if(u){o=a=u.posAtStart+l;break}}return{from:o,to:a,node:t}}function V$(n,e){let t=VU(n);if(!t)return null;let{from:i,to:o,node:a}=t,l=e.mapPos(i,-1),c=e.mapPos(o,1),u=a.nodeValue;if(/[\n\r]/.test(u))return null;if(c-l!=u.length){let d=e.mapPos(i,1),p=e.mapPos(o,-1);if(p-d==u.length)l=d,c=p;else if(n.state.doc.sliceString(c-u.length,c)==u)l=c-u.length;else if(n.state.doc.sliceString(l,l+u.length)==u)c=l+u.length;else return null}let{main:h}=n.state.selection;if(n.state.doc.sliceString(l,c)!=u||l>h.head||c<h.head)return null;let A=[],f=new _o(i,o,l,c);for(let d=a.parentNode;;d=d.parentNode){let p=un.get(d);if(p instanceof Ll)A.push({node:d,deco:p.mark});else{if(p instanceof Vr||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:f,text:a,marks:A,line:d};if(d!=n.contentDOM)A.push({node:d,deco:new Np({inclusive:!0,attributes:B$(d),tagName:d.tagName.toLowerCase()})});else return null}}}function WU(n,e,t){if(t<=0)for(let i=n,o=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&o>0)i=i.childNodes[o-1],o=Rl(i);else break}if(t>=0)for(let i=n,o=e;;){if(i.nodeType==3)return i;if(i.nodeType==1&&o<i.childNodes.length&&t>=0)i=i.childNodes[o],o=0;else break}return null}function W$(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}var eM=class{constructor(){this.changes=[]}compareRange(e,t){j2(e,t,this.changes)}comparePoint(e,t){j2(e,t,this.changes)}};function X$(n,e,t){let i=new eM;return Vn.compare(n,e,t,i),i.changes}function Y$(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Z$(n,e,t=1){let i=n.charCategorizer(e),o=n.doc.lineAt(e),a=e-o.from;if(o.length==0)return Qe.cursor(e);a==0?t=1:a==o.length&&(t=-1);let l=a,c=a;t<0?l=li(o.text,a,!1):c=li(o.text,a);let u=i(o.text.slice(l,c));for(;l>0;){let h=li(o.text,l,!1);if(i(o.text.slice(h,l))!=u)break;l=h}for(;c<o.length;){let h=li(o.text,c);if(i(o.text.slice(c,h))!=u)break;c=h}return Qe.range(l+o.from,c+o.from)}function K$(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function j$(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function U2(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function XF(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function YF(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function tM(n,e,t){let i,o,a,l,c=!1,u,h,A,f;for(let m=n.firstChild;m;m=m.nextSibling){let b=kp(m);for(let g=0;g<b.length;g++){let w=b[g];o&&U2(o,w)&&(w=XF(YF(w,o.bottom),o.top));let I=K$(e,w),v=j$(t,w);if(I==0&&v==0)return m.nodeType==3?ZF(m,e,t):tM(m,e,t);if(!i||l>v||l==v&&a>I){i=m,o=w,a=I,l=v;let C=v?t<w.top?-1:1:I?e<w.left?-1:1:0;c=!C||(C>0?g<b.length-1:g>0)}I==0?t>w.bottom&&(!A||A.bottom<w.bottom)?(u=m,A=w):t<w.top&&(!f||f.top>w.top)&&(h=m,f=w):A&&U2(A,w)?A=YF(A,w.bottom):f&&U2(f,w)&&(f=XF(f,w.top))}}if(A&&A.bottom>=t?(i=u,o=A):f&&f.top<=t&&(i=h,o=f),!i)return{node:n,offset:0};let d=Math.max(o.left,Math.min(o.right,e));if(i.nodeType==3)return ZF(i,d,t);if(c&&i.contentEditable!="false")return tM(i,d,t);let p=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(o.left+o.right)/2?1:0);return{node:n,offset:p}}function ZF(n,e,t){let i=n.nodeValue.length,o=-1,a=1e9,l=0;for(let c=0;c<i;c++){let u=ru(n,c,c+1).getClientRects();for(let h=0;h<u.length;h++){let A=u[h];if(A.top==A.bottom)continue;l||(l=e-A.left);let f=(A.top>t?A.top-t:t-A.bottom)-1;if(A.left-1<=e&&A.right+1>=e&&f<a){let d=e>=(A.left+A.right)/2,p=d;if((et.chrome||et.gecko)&&ru(n,c).getBoundingClientRect().left==A.right&&(p=!d),f<=0)return{node:n,offset:c+(p?1:0)};o=c+(p?1:0),a=f}}}return{node:n,offset:o>-1?o:l>0?n.nodeValue.length:0}}function XU(n,e,t,i=-1){var o,a;let l=n.contentDOM.getBoundingClientRect(),c=l.top+n.viewState.paddingTop,u,{docHeight:h}=n.viewState,{x:A,y:f}=e,d=f-c;if(d<0)return 0;if(d>h)return n.state.doc.length;for(let C=n.viewState.heightOracle.textHeight/2,E=!1;u=n.elementAtHeight(d),u.type!=Wn.Text;)for(;d=i>0?u.bottom+C:u.top-C,!(d>=0&&d<=h);){if(E)return t?null:0;E=!0,i=-i}f=c+d;let p=u.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:KF(n,l,u,A,f);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:KF(n,l,u,A,f);let m=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:m,g=b.elementFromPoint(A,f);g&&!n.contentDOM.contains(g)&&(g=null),g||(A=Math.max(l.left+1,Math.min(l.right-1,A)),g=b.elementFromPoint(A,f),g&&!n.contentDOM.contains(g)&&(g=null));let w,I=-1;if(g&&((o=n.docView.nearest(g))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let C=m.caretPositionFromPoint(A,f);C&&({offsetNode:w,offset:I}=C)}else if(m.caretRangeFromPoint){let C=m.caretRangeFromPoint(A,f);C&&({startContainer:w,startOffset:I}=C,(!n.contentDOM.contains(w)||et.safari&&J$(w,I,A)||et.chrome&&q$(w,I,A))&&(w=void 0))}}if(!w||!n.docView.dom.contains(w)){let C=Vr.find(n.docView,p);if(!C)return d>u.top+u.height/2?u.to:u.from;({node:w,offset:I}=tM(C.dom,A,f))}let v=n.docView.nearest(w);if(!v)return null;if(v.isWidget&&((a=v.dom)===null||a===void 0?void 0:a.nodeType)==1){let C=v.dom.getBoundingClientRect();return e.y<C.top||e.y<=C.bottom&&e.x<=(C.left+C.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(w,I)+v.posAtStart}function KF(n,e,t,i,o){let a=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,u=Math.floor((o-t.top-(n.defaultLineHeight-c)*.5)/c);a+=u*n.viewState.heightOracle.lineLength}let l=n.state.sliceDoc(t.from,t.to);return t.from+LF(l,a,n.state.tabSize)}function J$(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let o=n.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return ru(n,i-1,i).getBoundingClientRect().left>t}function q$(n,e,t){if(e!=0)return!1;for(let o=n;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let i=n.nodeType==1?n.getBoundingClientRect():ru(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function nM(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Wn.Text))return i}return t}function $$(n,e,t,i){let o=nM(n,e.head),a=!i||o.type!=Wn.Text||!(n.lineWrapping||o.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(a){let l=n.dom.getBoundingClientRect(),c=n.textDirectionAt(o.from),u=n.posAtCoords({x:t==(c==cn.LTR)?l.right-1:l.left+1,y:(a.top+a.bottom)/2});if(u!=null)return Qe.cursor(u,t?-1:1)}return Qe.cursor(t?o.to:o.from,t?-1:1)}function jF(n,e,t,i){let o=n.state.doc.lineAt(e.head),a=n.bidiSpans(o),l=n.textDirectionAt(o.from);for(let c=e,u=null;;){let h=z$(o,a,l,c,t),A=HU;if(!h){if(o.number==(t?n.state.doc.lines:1))return c;A=`
`,o=n.state.doc.line(o.number+(t?1:-1)),a=n.bidiSpans(o),h=Qe.cursor(t?o.from:o.to)}if(u){if(!u(A))return c}else{if(!i)return h;u=i(A)}c=h}}function eee(n,e,t){let i=n.state.charCategorizer(e),o=i(t);return a=>{let l=i(a);return o==mn.Space&&(o=l),o==l}}function tee(n,e,t,i){let o=e.head,a=t?1:-1;if(o==(t?n.state.doc.length:0))return Qe.cursor(o,e.assoc);let l=e.goalColumn,c,u=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(o),A=n.documentTop;if(h)l==null&&(l=h.left-u.left),c=a<0?h.top:h.bottom;else{let p=n.viewState.lineBlockAt(o);l==null&&(l=Math.min(u.right-u.left,n.defaultCharacterWidth*(o-p.from))),c=(a<0?p.top:p.bottom)+A}let f=u.left+l,d=i??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let m=c+(d+p)*a,b=XU(n,{x:f,y:m},!1,a);if(m<u.top||m>u.bottom||(a<0?b<o:b>o))return Qe.cursor(b,e.assoc,void 0,l)}}function Gv(n,e,t){for(;;){let i=0;for(let o of n)o.between(e-1,e+1,(a,l,c)=>{if(e>a&&e<l){let u=i||t||(e-a<l-e?-1:1);e=u<0?a:l,i=u}});if(!i)return e}}function O2(n,e,t){let i=Gv(n.state.facet(_M).map(o=>o(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Qe.cursor(i,i<t.from?1:-1)}var iM=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(i,o)=>{this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(e,o)||(this.mustFlushObserver(o)&&e.observer.forceFlush(),this.runCustomHandlers(o.type,e,o)?o.preventDefault():i(e,o))};for(let i in ei){let o=ei[i];e.contentDOM.addEventListener(i,a=>{JF(e,a)&&t(o,a)},sM[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{if(i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(ei.mousedown,i),!i.defaultPrevented&&i.button==2)){let o=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=o,200)}}),e.scrollDOM.addEventListener("drop",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(ei.drop,i)}),et.chrome&&et.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,et.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let o;this.customHandlers=[];for(let a of t)if(o=(i=a.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:o});for(let l in o)this.registeredEvents.indexOf(l)<0&&l!="scroll"&&(this.registeredEvents.push(l),e.contentDOM.addEventListener(l,c=>{JF(e,c)&&this.runCustomHandlers(l,e,c)&&c.preventDefault()}))}}runCustomHandlers(e,t,i){for(let o of this.customHandlers){let a=o.handlers[e];if(a)try{if(a.call(o.plugin,i,t)||i.defaultPrevented)return!0}catch(l){Xr(t.state,l)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let o=i.handlers.scroll;if(o)try{o.call(i.plugin,t,e)}catch(a){Xr(e.state,a)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(t.keyCode!=27&&ZU.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),et.android&&et.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return et.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=YU.find(o=>o.keyCode==t.keyCode))&&!t.ctrlKey||nee.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,mA(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:et.safari&&!et.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},YU=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],nee="dthko",ZU=[16,17,18,20,91,92,224,225],Bv=6;function kv(n){return Math.max(0,n)*.7+8}function iee(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}var rM=class{constructor(e,t,i,o){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=M$(e.contentDOM),this.atoms=e.state.facet(_M).map(l=>l(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(on.allowMultipleSelections)&&ree(e,t),this.dragging=oee(e,t)&&qU(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&iee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,o=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},l=QU(this.view);e.clientX-l.left<=a.left+Bv?i=-kv(a.left-e.clientX):e.clientX+l.right>=a.right-Bv&&(i=kv(e.clientX-a.right)),e.clientY-l.top<=a.top+Bv?o=-kv(a.top-e.clientY):e.clientY+l.bottom>=a.bottom-Bv&&(o=kv(e.clientY-a.bottom)),this.setScrollSpeed(i,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let o=e.ranges[i],a=null;if(o.empty){let l=Gv(this.atoms,o.from,0);l!=o.from&&(a=Qe.cursor(l,-1))}else{let l=Gv(this.atoms,o.from,-1),c=Gv(this.atoms,o.to,1);(l!=o.from||c!=o.to)&&(a=Qe.range(o.from==o.anchor?l:c,o.from==o.head?l:c))}a&&(t||(t=e.ranges.slice()),t[i]=a)}return t?Qe.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection)||i.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function ree(n,e){let t=n.state.facet(DU);return t.length?t[0](e):et.mac?e.metaKey:e.ctrlKey}function see(n,e){let t=n.state.facet(RU);return t.length?t[0](e):et.mac?!e.altKey:!e.ctrlKey}function oee(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Wv(n.root);if(!i||i.rangeCount==0)return!0;let o=i.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function JF(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=un.get(t))&&i.ignoreEvent(e))return!1;return!0}var ei=Object.create(null),sM=Object.create(null),KU=et.ie&&et.ie_version<15||et.ios&&et.webkit_version<604;function aee(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),jU(n,t.value)},50)}function jU(n,e){let{state:t}=n,i,o=1,a=t.toText(e),l=a.lines==t.selection.ranges.length;if(oM!=null&&t.selection.ranges.every(u=>u.empty)&&oM==a.toString()){let u=-1;i=t.changeByRange(h=>{let A=t.doc.lineAt(h.from);if(A.from==u)return{range:h};u=A.from;let f=t.toText((l?a.line(o++).text:e)+t.lineBreak);return{changes:{from:A.from,insert:f},range:Qe.cursor(h.from+f.length)}})}else l?i=t.changeByRange(u=>{let h=a.line(o++);return{changes:{from:u.from,to:u.to,insert:h.text},range:Qe.cursor(u.from+h.length)}}):i=t.replaceSelection(a);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ei.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now())};ei.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ei.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};sM.touchstart=sM.touchmove={passive:!0};ei.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(LU))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=uee(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new rM(n,e,t,i)),i&&n.observer.ignore(()=>vU(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function qF(n,e,t,i){if(i==1)return Qe.cursor(e,t);if(i==2)return Z$(n.state,e,t);{let o=Vr.find(n.docView,e),a=n.state.doc.lineAt(o?o.posAtEnd:e),l=o?o.posAtStart:a.from,c=o?o.posAtEnd:a.to;return c<n.state.doc.length&&c==a.to&&c++,Qe.range(l,c)}}var JU=(n,e)=>n>=e.top&&n<=e.bottom,$F=(n,e,t)=>JU(e,t)&&n>=t.left&&n<=t.right;function lee(n,e,t,i){let o=Vr.find(n.docView,e);if(!o)return 1;let a=e-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let l=o.coordsAt(a,-1);if(l&&$F(t,i,l))return-1;let c=o.coordsAt(a,1);return c&&$F(t,i,c)?1:l&&JU(i,l)?-1:1}function eU(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:lee(n,t,e.clientX,e.clientY)}}var cee=et.ie&&et.ie_version<=11,tU=null,nU=0,iU=0;function qU(n){if(!cee)return n.detail;let e=tU,t=iU;return tU=n,iU=Date.now(),nU=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(nU+1)%3:1}function uee(n,e){let t=eU(n,e),i=qU(e),o=n.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),o=o.map(a.changes))},get(a,l,c){let u=eU(n,a),h,A=qF(n,u.pos,u.bias,i);if(t.pos!=u.pos&&!l){let f=qF(n,t.pos,t.bias,i),d=Math.min(f.from,A.from),p=Math.max(f.to,A.to);A=d<A.from?Qe.range(d,p):Qe.range(p,d)}return l?o.replaceRange(o.main.extend(A.from,A.to)):c&&i==1&&o.ranges.length>1&&(h=hee(o,u.pos))?h:c?o.addRange(A):Qe.create([A])}}}function hee(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:o}=n.ranges[t];if(i<=e&&o>=e)return Qe.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}ei.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function rU(n,e,t,i){if(!t)return;let o=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:a}=n.inputState,l=i&&a&&a.dragging&&see(n,e)?{from:a.dragging.from,to:a.dragging.to}:null,c={from:o,insert:t},u=n.state.changes(l?[l,c]:c);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(o,-1),head:u.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"})}ei.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),o=0,a=()=>{++o==t.length&&rU(n,e,i.filter(l=>l!=null).join(n.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let c=new FileReader;c.onerror=a,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[l]=c.result),a()},c.readAsText(t[l])}}else rU(n,e,e.dataTransfer.getData("Text"),!0)};ei.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=KU?null:e.clipboardData;t?(jU(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):aee(n)};function Aee(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function fee(n){let e=[],t=[],i=!1;for(let o of n.selection.ranges)o.empty||(e.push(n.sliceDoc(o.from,o.to)),t.push(o));if(!e.length){let o=-1;for(let{from:a}of n.selection.ranges){let l=n.doc.lineAt(a);l.number>o&&(e.push(l.text),t.push({from:l.from,to:Math.min(n.doc.length,l.to+1)})),o=l.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}var oM=null;ei.copy=ei.cut=(n,e)=>{let{text:t,ranges:i,linewise:o}=fee(n.state);if(!t&&!o)return;oM=o?t:null;let a=KU?null:e.clipboardData;a?(e.preventDefault(),a.clearData(),a.setData("text/plain",t)):Aee(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};var $U=gr.define();function eO(n,e){let t=[];for(let i of n.facet(PU)){let o=i(n,e);o&&t.push(o)}return t?n.update({effects:t,annotations:$U.of(!0)}):null}function tO(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=eO(n.state,e);t?n.dispatch(t):n.update([])}},10)}ei.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),tO(n)};ei.blur=n=>{n.observer.clearSelectionRange(),tO(n)};ei.compositionstart=ei.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};ei.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,et.chrome&&et.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)};ei.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ei.beforeinput=(n,e)=>{var t;let i;if(et.chrome&&et.android&&(i=YU.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};var sU=["pre-wrap","normal","pre-line","break-spaces"],aM=class{constructor(e){this.lineWrapping=e,this.doc=Ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sU.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let o=e[i];o<0?i++:this.heightSamples[Math.floor(o*10)]||(t=!0,this.heightSamples[Math.floor(o*10)]=!0)}return t}refresh(e,t,i,o,a,l){let c=sU.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=i,this.textHeight=o,this.lineLength=a,u){this.heightSamples={};for(let h=0;h<l.length;h++){let A=l[h];A<0?h++:this.heightSamples[Math.floor(A*10)]=!0}}return u}},lM=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},To=class n{constructor(e,t,i,o,a){this.from=e,this.length=t,this.top=i,this.height=o,this._content=a}get type(){return typeof this._content=="number"?Wn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Bl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new n(this.from,this.length+e.length,this.top,this.height+e.height,t)}},ln=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(ln||(ln={})),zv=.001,Yr=class n{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>zv&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return n.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,o){let a=this,l=i.doc;for(let c=o.length-1;c>=0;c--){let{fromA:u,toA:h,fromB:A,toB:f}=o[c],d=a.lineAt(u,ln.ByPosNoHeight,i.setDoc(t),0,0),p=d.to>=h?d:a.lineAt(h,ln.ByPosNoHeight,i,0,0);for(f+=p.to-h,h=p.to;c>0&&d.from<=o[c-1].toA;)u=o[c-1].fromA,A=o[c-1].fromB,c--,u<d.from&&(d=a.lineAt(u,ln.ByPosNoHeight,i,0,0));A+=d.from-u,u=d.from;let m=uM.build(i.setDoc(l),e,A,f);a=a.replace(u,h,m)}return a.updateHeight(i,0)}static empty(){return new ms(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,o=0,a=0;for(;;)if(t==i)if(o>a*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),i+=1+c.break,o-=c.size}else if(a>o*2){let c=e[i];c.break?e.splice(i,1,c.left,null,c.right):e.splice(i,1,c.left,c.right),i+=2+c.break,a-=c.size}else break;else if(o<a){let c=e[t++];c&&(o+=c.size)}else{let c=e[--i];c&&(a+=c.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,i++),new cM(n.of(e.slice(0,t)),l,n.of(e.slice(i)))}};Yr.prototype.size=1;var i1=class extends Yr{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,o){return new To(o,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,o,a){return this.blockAt(0,i,o,a)}forEachLine(e,t,i,o,a,l){e<=a+this.length&&t>=a&&l(this.blockAt(0,i,o,a))}updateHeight(e,t=0,i=!1,o){return o&&o.from<=t&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},ms=class n extends i1{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,o){return new To(o,this.length,i,this.height,this.breaks)}replace(e,t,i){let o=i[0];return i.length==1&&(o instanceof n||o instanceof Dl&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof Dl?o=new n(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):Yr.of(i)}updateHeight(e,t=0,i=!1,o){return o&&o.from<=t&&o.more?this.setHeight(e,o.heights[o.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Dl=class n extends Yr{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,o=e.doc.lineAt(t+this.length).number,a=o-i+1,l,c=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*a);l=u/a,this.length>a+1&&(c=(this.height-u)/(this.length-a-1))}else l=this.height/a;return{firstLine:i,lastLine:o,perLine:l,perChar:c}}blockAt(e,t,i,o){let{firstLine:a,lastLine:l,perLine:c,perChar:u}=this.heightMetrics(t,o);if(t.lineWrapping){let h=o+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),A=t.doc.lineAt(h),f=c+A.length*u,d=Math.max(i,e-f/2);return new To(A.from,A.length,d,f,0)}else{let h=Math.max(0,Math.min(l-a,Math.floor((e-i)/c))),{from:A,length:f}=t.doc.line(a+h);return new To(A,f,i+c*h,c,0)}}lineAt(e,t,i,o,a){if(t==ln.ByHeight)return this.blockAt(e,i,o,a);if(t==ln.ByPosNoHeight){let{from:p,to:m}=i.doc.lineAt(e);return new To(p,m-p,0,0,0)}let{firstLine:l,perLine:c,perChar:u}=this.heightMetrics(i,a),h=i.doc.lineAt(e),A=c+h.length*u,f=h.number-l,d=o+c*f+u*(h.from-a-f);return new To(h.from,h.length,Math.max(o,Math.min(d,o+this.height-A)),A,0)}forEachLine(e,t,i,o,a,l){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:c,perLine:u,perChar:h}=this.heightMetrics(i,a);for(let A=e,f=o;A<=t;){let d=i.doc.lineAt(A);if(A==e){let m=d.number-c;f+=u*m+h*(e-a-m)}let p=u+h*d.length;l(new To(d.from,d.length,f,p,0)),f+=p,A=d.to+1}}replace(e,t,i){let o=this.length-t;if(o>0){let a=i[i.length-1];a instanceof n?i[i.length-1]=new n(a.length+o):i.push(null,new n(o-1))}if(e>0){let a=i[0];a instanceof n?i[0]=new n(e+a.length):i.unshift(new n(e-1),null)}return Yr.of(i)}decomposeLeft(e,t){t.push(new n(e-1),null)}decomposeRight(e,t){t.push(null,new n(this.length-e-1))}updateHeight(e,t=0,i=!1,o){let a=t+this.length;if(o&&o.from<=t+this.length&&o.more){let l=[],c=Math.max(t,o.from),u=-1;for(o.from>t&&l.push(new n(o.from-t-1).updateHeight(e,t));c<=a&&o.more;){let A=e.doc.lineAt(c).length;l.length&&l.push(null);let f=o.heights[o.index++];u==-1?u=f:Math.abs(f-u)>=zv&&(u=-2);let d=new ms(A,f);d.outdated=!1,l.push(d),c+=A+1}c<=a&&l.push(null,new n(a-c).updateHeight(e,c));let h=Yr.of(l);return(u<0||Math.abs(h.height-this.height)>=zv||Math.abs(u-this.heightMetrics(e,t).perLine)>=zv)&&(e.heightChanged=!0),h}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},cM=class extends Yr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,o){let a=i+this.left.height;return e<a?this.left.blockAt(e,t,i,o):this.right.blockAt(e,t,a,o+this.left.length+this.break)}lineAt(e,t,i,o,a){let l=o+this.left.height,c=a+this.left.length+this.break,u=t==ln.ByHeight?e<l:e<c,h=u?this.left.lineAt(e,t,i,o,a):this.right.lineAt(e,t,i,l,c);if(this.break||(u?h.to<c:h.from>c))return h;let A=t==ln.ByPosNoHeight?ln.ByPosNoHeight:ln.ByPos;return u?h.join(this.right.lineAt(c,A,i,l,c)):this.left.lineAt(c,A,i,o,a).join(h)}forEachLine(e,t,i,o,a,l){let c=o+this.left.height,u=a+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,i,o,a,l),t>=u&&this.right.forEachLine(e,t,i,c,u,l);else{let h=this.lineAt(u,ln.ByPos,i,o,a);e<h.from&&this.left.forEachLine(e,h.from-1,i,o,a,l),h.to>=e&&h.from<=t&&l(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,c,u,l)}}replace(e,t,i){let o=this.left.length+this.break;if(t<o)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,t-o,i));let a=[];e>0&&this.decomposeLeft(e,a);let l=a.length;for(let c of i)a.push(c);if(e>0&&oU(a,l-1),t<this.length){let c=a.length;this.decomposeRight(t,a),oU(a,c)}return Yr.of(a)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,o=i+this.break;if(e>=o)return this.right.decomposeRight(e-o,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<o&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Yr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,o){let{left:a,right:l}=this,c=t+a.length+this.break,u=null;return o&&o.from<=t+a.length&&o.more?u=a=a.updateHeight(e,t,i,o):a.updateHeight(e,t,i),o&&o.from<=c+l.length&&o.more?u=l=l.updateHeight(e,c,i,o):l.updateHeight(e,c,i),u?this.balanced(a,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function oU(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Dl&&(i=n[e+1])instanceof Dl&&n.splice(e-1,3,new Dl(t.length+1+i.length))}var dee=5,uM=class n{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof ms?o.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ms(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let o=i.widget?i.widget.estimatedHeight:0,a=i.widget?i.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let l=t-e;i.block?this.addBlock(new i1(l,o,i)):(l||a||o>=dee)&&this.addLineDeco(o,a,l)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ms(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Dl(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ms)return e;let t=new ms(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let i=(t=e.deco)===null||t===void 0?void 0:t.type;i==Wn.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i!=Wn.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,i){let o=this.ensureLine();o.length+=i,o.collapsed+=i,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ms)&&!this.isCovered?this.nodes.push(new ms(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let o of this.nodes)o instanceof ms&&o.updateHeight(this.oracle,i),i+=o?o.length:1;return this.nodes}static build(e,t,i,o){let a=new n(i,e);return Vn.spans(t,i,o,a,0),a.finish(i)}};function pee(n,e,t){let i=new hM;return Vn.compare(n,e,t,i,0),i.changes}var hM=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,o){(e<t||i&&i.heightRelevant||o&&o.heightRelevant)&&j2(e,t,this.changes,5)}};function mee(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,o=i.defaultView||window,a=Math.max(0,t.left),l=Math.min(o.innerWidth,t.right),c=Math.max(0,t.top),u=Math.min(o.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let A=h,f=window.getComputedStyle(A);if((A.scrollHeight>A.clientHeight||A.scrollWidth>A.clientWidth)&&f.overflow!="visible"){let d=A.getBoundingClientRect();a=Math.max(a,d.left),l=Math.min(l,d.right),c=Math.max(c,d.top),u=h==n.parentNode?d.bottom:Math.min(u,d.bottom)}h=f.position=="absolute"||f.position=="fixed"?A.offsetParent:A.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:a-t.left,right:Math.max(a,l)-t.left,top:c-(t.top+e),bottom:Math.max(c,u)-(t.top+e)}}function gee(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var Bp=class{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],a=t[i];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e){return qt.replace({widget:new AM(this.size,e)}).range(this.from,this.to)}},AM=class extends xa{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},r1=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=aU,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=cn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(TM).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new aM(t),this.stateDeco=e.facet(Op).filter(i=>typeof i!="function"),this.heightMap=Yr.empty().applyChanges(this.stateDeco,Ut.empty,this.heightOracle.setDoc(e.doc),[new _o(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=qt.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let o=i?t.head:t.anchor;if(!e.some(({from:a,to:l})=>o>=a&&o<=l)){let{from:a,to:l}=this.lineBlockAt(o);e.push(new dA(a,l))}}this.viewports=e.sort((i,o)=>i.from-o.from),this.scaler=this.heightMap.height<=7e6?aU:new fM(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Dp(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Op).filter(A=>typeof A!="function");let o=e.changedRanges,a=_o.extendWithRanges(o,pee(i,this.stateDeco,e?e.changes:tr.empty(this.state.doc.length))),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=l&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let h=!e.changes.empty||e.flags&2||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(FU)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),o=this.heightOracle,a=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?cn.RTL:cn.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),c=t.getBoundingClientRect(),u=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let h=0,A=0,f=parseInt(i.paddingTop)||0,d=parseInt(i.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=bU(e.scrollDOM);let p=(this.printing?gee:mee)(t,this.paddingTop),m=p.top-this.pixelViewport.top,b=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let w=c.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),u){let v=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(v)&&(l=!0),l||o.lineWrapping&&Math.abs(w-this.contentDOMWidth)>o.charWidth){let{lineHeight:C,charWidth:E,textHeight:S}=e.docView.measureTextSize();l=C>0&&o.refresh(a,C,E,S,w/E,v),l&&(e.docView.minWidth=0,h|=8)}m>0&&b>0?A=Math.max(m,b):m<0&&b<0&&(A=Math.min(m,b)),o.heightChanged=!1;for(let C of this.viewports){let E=C.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?Yr.empty().applyChanges(this.stateDeco,Ut.empty,this.heightOracle,[new _o(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,l,new lM(C.from,E))}o.heightChanged&&(h|=2)}let I=!this.viewportIsAppropriate(this.viewport,A)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return I&&(this.viewport=this.getViewport(A,this.scrollTarget)),this.updateForViewport(),(h&2||I)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,u=new dA(o.lineAt(l-i*1e3,ln.ByHeight,a,0,0).from,o.lineAt(c+(1-i)*1e3,ln.ByHeight,a,0,0).to);if(t){let{head:h}=t.range;if(h<u.from||h>u.to){let A=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=o.lineAt(h,ln.ByPos,a,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-A/2:t.y=="start"||t.y=="nearest"&&h<u.from?d=f.top:d=f.bottom-A,u=new dA(o.lineAt(d-1e3/2,ln.ByHeight,a,0,0).from,o.lineAt(d+A+1e3/2,ln.ByHeight,a,0,0).to)}}return u}mapViewport(e,t){let i=t.mapPos(e.from,-1),o=t.mapPos(e.to,1);return new dA(this.heightMap.lineAt(i,ln.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,ln.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,ln.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,ln.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||o<=l-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||a>=c+Math.max(10,Math.min(i,250)))&&o>l-2*1e3&&a<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let o of e)t.touchesRange(o.from,o.to)||i.push(new Bp(t.mapPos(o.from),t.mapPos(o.to),o.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,a=o>>1,l=o<<1;if(this.defaultTextDirection!=cn.LTR&&!i)return[];let c=[],u=(h,A,f,d)=>{if(A-h<a)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let g of m)if(g>h&&g<A){u(h,g-10,f,d),u(g+10,A,f,d);return}let b=vee(e,g=>g.from>=f.from&&g.to<=f.to&&Math.abs(g.from-h)<a&&Math.abs(g.to-A)<a&&!m.some(w=>g.from<w&&g.to>w));if(!b){if(A<f.to&&t&&i&&t.visibleRanges.some(g=>g.from<=A&&g.to>=A)){let g=t.moveToLineBoundary(Qe.cursor(A),!1,!0).head;g>h&&(A=g)}b=new Bp(h,A,this.gapSize(f,h,A,d))}c.push(b)};for(let h of this.viewportLines){if(h.length<l)continue;let A=yee(h.from,h.to,this.stateDeco);if(A.total<l)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let m=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,g;if(f!=null){let w=Nv(A,f),I=((this.visibleBottom-this.visibleTop)/2+m)/h.height;b=w-I,g=w+I}else b=(this.visibleTop-h.top-m)/h.height,g=(this.visibleBottom-h.top+m)/h.height;d=Pv(A,b),p=Pv(A,g)}else{let m=A.total*this.heightOracle.charWidth,b=o*this.heightOracle.charWidth,g,w;if(f!=null){let I=Nv(A,f),v=((this.pixelViewport.right-this.pixelViewport.left)/2+b)/m;g=I-v,w=I+v}else g=(this.pixelViewport.left-b)/m,w=(this.pixelViewport.right+b)/m;d=Pv(A,g),p=Pv(A,w)}d>h.from&&u(h.from,d,h,A),p<h.to&&u(p,h.to,h,A)}return c}gapSize(e,t,i,o){let a=Nv(o,i)-Nv(o,t);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){Bp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=qt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Vn.spans(e,this.viewport.from,this.viewport.to,{span(o,a){t.push({from:o,to:a})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=t[a].from||o.to!=t[a].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Dp(this.heightMap.lineAt(e,ln.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Dp(this.heightMap.lineAt(this.scaler.fromDOM(e),ln.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Dp(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},dA=class{constructor(e,t){this.from=e,this.to=t}};function yee(n,e,t){let i=[],o=n,a=0;return Vn.spans(t,n,e,{span(){},point(l,c){l>o&&(i.push({from:o,to:l}),a+=l-o),o=c}},20),o<e&&(i.push({from:o,to:e}),a+=e-o),{total:a,ranges:i}}function Pv({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let o=0;;o++){let{from:a,to:l}=e[o],c=l-a;if(i<=c)return a+i;i-=c}}function Nv(n,e){let t=0;for(let{from:i,to:o}of n.ranges){if(e<=o){t+=e-i;break}t+=o-i}return t/n.total}function vee(n,e){for(let t of n)if(e(t))return t}var aU={toDOM(n){return n},fromDOM(n){return n},scale:1},fM=class{constructor(e,t,i){let o=0,a=0,l=0;this.viewports=i.map(({from:c,to:u})=>{let h=t.lineAt(c,ln.ByPos,e,0,0).top,A=t.lineAt(u,ln.ByPos,e,0,0).bottom;return o+=A-h,{from:c,to:u,top:h,bottom:A,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(t.height-o);for(let c of this.viewports)c.domTop=l+(c.top-a)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),a=c.bottom}toDOM(e){for(let t=0,i=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return o+(e-i)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);i=a.bottom,o=a.domBottom}}fromDOM(e){for(let t=0,i=0,o=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return i+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);i=a.bottom,o=a.domBottom}}};function Dp(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new To(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(o=>Dp(o,e)):n._content)}var Fv=nt.define({combine:n=>n.join(" ")}),dM=nt.define({combine:n=>n.indexOf(!0)>-1}),pM=ps.newName(),nO=ps.newName(),iO=ps.newName(),rO={"&light":"."+nO,"&dark":"."+iO};function mM(n,e,t){return new ps(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,o=>{if(o=="&")return n;if(!t||!t[o])throw new RangeError(`Unsupported selector: ${o}`);return t[o]}):n+" "+i}})}var wee=mM("."+pM,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},rO),gM=class{constructor(e,t,i,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let c=a||l?[]:xee(e),u=new Kv(c,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=Cee(c,this.bounds.from)}else{let c=e.observer.selectionRange,u=a&&a.node==c.focusNode&&a.offset==c.focusOffset||!H2(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!H2(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=Qe.single(h,u)}}};function sO(n,e){let t,{newSel:i}=e,o=n.state.selection.main,a=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:c}=e.bounds,u=o.from,h=null;(a===8||et.android&&e.text.length<c-l)&&(u=o.to,h="end");let A=bee(n.state.doc.sliceString(l,c,fA),e.text,u-l,h);A&&(et.chrome&&a==13&&A.toB==A.from+2&&e.text.slice(A.from,A.toB)==fA+fA&&A.toB--,t={from:l+A.from,to:l+A.toA,insert:Ut.of(e.text.slice(A.from,A.toB).split(fA))})}else i&&(!n.hasFocus&&n.state.facet(a1)||i.main.eq(o))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!o.empty&&i&&i.main.empty?t={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:t&&t.from>=o.from&&t.to<=o.to&&(t.from!=o.from||t.to!=o.to)&&o.to-o.from-(t.to-t.from)<=4?t={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,o.to))}:(et.mac||et.android)&&t&&t.from==t.to&&t.from==o.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Qe.single(i.main.anchor-1,i.main.head-1)),t={from:o.from,to:o.to,insert:Ut.of([" "])}):et.chrome&&t&&t.from==t.to&&t.from==o.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Qe.single(i.main.anchor-1,i.main.head-1)),t={from:o.from,to:o.to,insert:Ut.of([" "])}),t){let l=n.state;if(et.ios&&n.inputState.flushIOSKey(n)||et.android&&(t.from==o.from&&t.to==o.to&&t.insert.length==1&&t.insert.lines==2&&mA(n.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&t.insert.length==0||a==8&&t.insert.length<t.to-t.from)&&mA(n.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&t.insert.length==0&&mA(n.contentDOM,"Delete",46)))return!0;let c=t.insert.toString();if(n.state.facet(kU).some(A=>A(n,t.from,t.to,c)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let u;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let A=o.from<t.from?l.sliceDoc(o.from,t.from):"",f=o.to>t.to?l.sliceDoc(t.to,o.to):"";u=l.replaceSelection(n.state.toText(A+t.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let A=l.changes(t),f=i&&i.main.to<=A.newLength?i.main:void 0;if(l.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let d=n.state.sliceDoc(t.from,t.to),p=VU(n)||n.state.doc.lineAt(o.head),m=o.to-t.to,b=o.to-o.from;u=l.changeByRange(g=>{if(g.from==o.from&&g.to==o.to)return{changes:A,range:f||g.map(A)};let w=g.to-m,I=w-d.length;if(g.to-g.from!=b||n.state.sliceDoc(I,w)!=d||p&&g.to>=p.from&&g.from<=p.to)return{range:g};let v=l.changes({from:I,to:w,insert:t.insert}),C=g.to-o.to;return{changes:v,range:f?Qe.range(Math.max(0,f.anchor+C),Math.max(0,f.head+C)):g.map(v)}})}else u={changes:A,selection:f&&l.selection.replaceRange(f)}}let h="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,h+=".compose",n.inputState.compositionFirstChange&&(h+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(u,{scrollIntoView:!0,userEvent:h}),!0}else if(i&&!i.main.eq(o)){let l=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(l=!0),c=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:l,userEvent:c}),!0}else return!1}function bee(n,e,t,i){let o=Math.min(n.length,e.length),a=0;for(;a<o&&n.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==o&&n.length==e.length)return null;let l=n.length,c=e.length;for(;l>0&&c>0&&n.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(i=="end"){let u=Math.max(0,a-Math.min(l,c));t-=l+u-a}if(l<a&&n.length<e.length){let u=t<=a&&t>=l?a-t:0;a-=u,c=a+(c-l),l=a}else if(c<a){let u=t<=a&&t>=c?a-t:0;a-=u,l=a+(l-c),c=a}return{from:a,toA:l,toB:c}}function xee(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:o,focusOffset:a}=n.observer.selectionRange;return t&&(e.push(new jv(t,i)),(o!=t||a!=i)&&e.push(new jv(o,a))),e}function Cee(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Qe.single(t+e,i+e):null}var See={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Q2=et.ie&&et.ie_version<=11,yM=class{constructor(e){this.view=e,this.active=!1,this.selectionRange=new V2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(et.ie&&et.ie_version<=11||et.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Q2&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(a1)?i.root.activeElement!=this.dom:!Qv(i.dom,o))return;let a=o.anchorNode&&i.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(et.ie&&et.ie_version<=11||et.android&&et.chrome)&&!i.state.selection.main.empty&&o.focusNode&&Xv(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=et.safari&&e.root.nodeType==11&&S$(this.dom.ownerDocument)==this.dom&&Eee(this.view)||Wv(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Qv(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&_$(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,See),Q2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Q2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&mA(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,o=!1;for(let a of e){let l=this.readMutation(a);l&&(l.typeOver&&(o=!0),t==-1?{from:t,to:i}=l:(t=Math.min(l.from,t),i=Math.max(l.to,i)))}return{from:t,to:i,typeOver:o}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),o=this.selectionChanged&&Qv(this.dom,this.selectionRange);return e<0&&!o?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new gM(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,o=sO(this.view,t);return this.view.state==i&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=lU(t,e.previousSibling||e.target.previousSibling,-1),o=lU(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:o?t.posBefore(o):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,o;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(o=this.resizeContent)===null||o===void 0||o.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};function lU(n,e,t){for(;e;){let i=un.get(e);if(i&&i.parent==n)return i;let o=e.parentNode;e=o!=n.dom?o:t>0?e.nextSibling:e.previousSibling}return null}function Eee(n){let e=null;function t(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,o=e.startOffset,a=e.endContainer,l=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor);return Xv(c.node,c.offset,a,l)&&([i,o,a,l]=[a,l,i,o]),{anchorNode:i,anchorOffset:o,focusNode:a,focusOffset:l}}var tt=class n{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||T$(e.parent)||document,this.viewState=new r1(e.state||on.create(e)),this.plugins=this.state.facet(Tp).map(t=>new Lp(t));for(let t of this.plugins)t.update(this);this.observer=new yM(this),this.inputState=new iM(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new t1(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let t=e.length==1&&e[0]instanceof pi?e[0]:this.state.update(...e);this._dispatch(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,o,a=this.state;for(let d of e){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let l=this.hasFocus,c=0,u=null;e.some(d=>d.annotation($U))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,u=eO(a,l),u||(c=1));let h=this.observer.delayedAndroidKey,A=null;if(h?(this.observer.clearDelayedAndroidKey(),A=this.observer.readChange(),(A&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(A=null)):this.observer.clear(),a.facet(on.phrases)!=this.state.facet(on.phrases))return this.setState(a);o=e1.create(this,a,e),o.flags|=c;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;f=new $v(p.empty?p:Qe.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(WF)&&(f=p.value)}this.viewState.update(o,f),this.bidiCache=s1.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),t=this.docView.update(o),this.state.facet(_p)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(Fv)!=o.state.facet(Fv)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let d of this.state.facet(J2))d(o);(u||A)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),A&&!sO(this,A)&&h.force&&mA(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new r1(e),this.plugins=e.facet(Tp).map(i=>new Lp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new t1(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Tp),i=e.state.facet(Tp);if(t!=i){let o=[];for(let a of i){let l=t.indexOf(a);if(l<0)o.push(new Lp(a));else{let c=this.plugins[l];c.mustUpdate=e,o.push(c)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,{scrollTop:o}=i,{scrollAnchorPos:a,scrollAnchorHeight:l}=this.viewState;o!=this.viewState.scrollTop&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(bU(i))a=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(o);a=p.from,l=p.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];u&4||([this.measureRequests,h]=[h,this.measureRequests]);let A=h.map(p=>{try{return p.read(this)}catch(m){return Xr(this.state,m),cU}}),f=e1.create(this,this.state,[]),d=!1;f.flags|=u,t?t.flags|=u:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f));for(let p=0;p<h.length;p++)if(A[p]!=cU)try{let m=h[p];m.write&&m.write(A[p],this)}catch(m){Xr(this.state,m)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let m=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-l;if(m>1||m<-1){o=i.scrollTop=o+m,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(J2))c(t)}get themeClasses(){return pM+" "+(this.state.facet(dM)?iO:nO)+" "+this.state.facet(Fv)}updateAttrs(){let e=uU(this,UU,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(a1)?"true":"false",class:"cm-content",style:`${et.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),uU(this,TM,t);let i=this.observer.ignore(()=>{let o=K2(this.contentDOM,this.contentAttrs,t),a=K2(this.dom,this.editorAttrs,e);return o||a});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let o of i.effects)if(o.is(n.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(_p),ps.mount(this.root,this.styleModules.concat(wee).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return O2(this,e,jF(this,e,t,i))}moveByGroup(e,t){return O2(this,e,jF(this,e,t,i=>eee(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return $$(this,e,t,i)}moveVertically(e,t,i){return O2(this,e,tee(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),XU(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o),l=a[_l.find(a,e-o.from,-1,t)];return EM(i,l.dir==cn.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NU)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Iee)return zU(e.length);let t=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t)return o.order;let i=G$(e.text,t);return this.bidiCache.push(new s1(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||et.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vU(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return WF.of(new $v(typeof e=="number"?Qe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return mi.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=ps.newName(),o=[Fv.of(i),_p.of(mM(`.${i}`,e))];return t&&t.dark&&o.push(dM.of(!0)),o}static baseTheme(e){return ds.lowest(_p.of(mM("."+pM,e,rO)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),o=i&&un.get(i)||un.get(e);return((t=o?.rootView)===null||t===void 0?void 0:t.view)||null}};tt.styleModule=_p;tt.inputHandler=kU;tt.focusChangeEffect=PU;tt.perLineTextDirection=NU;tt.exceptionSink=BU;tt.updateListener=J2;tt.editable=a1;tt.mouseSelectionStyle=LU;tt.dragMovesSelection=RU;tt.clickAddsSelectionRange=DU;tt.decorations=Op;tt.atomicRanges=_M;tt.scrollMargins=OU;tt.darkTheme=dM;tt.contentAttributes=TM;tt.editorAttributes=UU;tt.lineWrapping=tt.contentAttributes.of({class:"cm-lineWrapping"});tt.announce=Ot.define();var Iee=4096,cU={},s1=class n{constructor(e,t,i,o){this.from=e,this.to=t,this.dir=i,this.order=o}static update(e,t){if(t.empty)return e;let i=[],o=e.length?e[e.length-1].dir:cn.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let l=e[a];l.dir==o&&!t.touchesRange(l.from,l.to)&&i.push(new n(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.order))}return i}};function uU(n,e,t){for(let i=n.state.facet(e),o=i.length-1;o>=0;o--){let a=i[o],l=typeof a=="function"?a(n):a;l&&Z2(l,t)}return t}var Mee=et.mac?"mac":et.windows?"win":et.linux?"linux":"key";function Tee(n,e){let t=n.split(/-(?!$)/),i=t[t.length-1];i=="Space"&&(i=" ");let o,a,l,c;for(let u=0;u<t.length-1;++u){let h=t[u];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))o=!0;else if(/^(c|ctrl|control)$/i.test(h))a=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))e=="mac"?c=!0:a=!0;else throw new Error("Unrecognized modifier name: "+h)}return o&&(i="Alt-"+i),a&&(i="Ctrl-"+i),c&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Uv(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}var _ee=ds.default(tt.domEventHandlers({keydown(n,e){return lO(oO(e.state),n,e,"editor")}})),Zr=nt.define({enables:_ee}),hU=new WeakMap;function oO(n){let e=n.facet(Zr),t=hU.get(e);return t||hU.set(e,t=Ree(e.reduce((i,o)=>i.concat(o),[]))),t}function aO(n,e,t){return lO(oO(n.state),e,n,t)}var Tl=null,Dee=4e3;function Ree(n,e=Mee){let t=Object.create(null),i=Object.create(null),o=(l,c)=>{let u=i[l];if(u==null)i[l]=c;else if(u!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},a=(l,c,u,h,A)=>{var f,d;let p=t[l]||(t[l]=Object.create(null)),m=c.split(/ (?!$)/).map(w=>Tee(w,e));for(let w=1;w<m.length;w++){let I=m.slice(0,w).join(" ");o(I,!0),p[I]||(p[I]={preventDefault:!0,stopPropagation:!1,run:[v=>{let C=Tl={view:v,prefix:I,scope:l};return setTimeout(()=>{Tl==C&&(Tl=null)},Dee),!0}]})}let b=m.join(" ");o(b,!1);let g=p[b]||(p[b]={preventDefault:!1,stopPropagation:!1,run:((d=(f=p._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});u&&g.run.push(u),h&&(g.preventDefault=!0),A&&(g.stopPropagation=!0)};for(let l of n){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let h of c){let A=t[h]||(t[h]=Object.create(null));A._any||(A._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in A)A[f].run.push(l.any)}let u=l[e]||l.key;if(u)for(let h of c)a(h,u,l.run,l.preventDefault,l.stopPropagation),l.shift&&a(h,"Shift-"+u,l.shift,l.preventDefault,l.stopPropagation)}return t}function lO(n,e,t,i){let o=NF(e),a=qn(o,0),l=er(a)==o.length&&o!=" ",c="",u=!1,h=!1,A=!1;Tl&&Tl.view==t&&Tl.scope==i&&(c=Tl.prefix+" ",ZU.indexOf(e.keyCode)<0&&(h=!0,Tl=null));let f=new Set,d=g=>{if(g){for(let w of g.run)if(!f.has(w)&&(f.add(w),w(t,e)))return g.stopPropagation&&(A=!0),!0;g.preventDefault&&(g.stopPropagation&&(A=!0),h=!0)}return!1},p=n[i],m,b;return p&&(d(p[c+Uv(o,e,!l)])?u=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(et.windows&&e.ctrlKey&&e.altKey)&&(m=wa[e.keyCode])&&m!=o?(d(p[c+Uv(m,e,!0)])||e.shiftKey&&(b=hA[e.keyCode])!=o&&b!=m&&d(p[c+Uv(b,e,!1)]))&&(u=!0):l&&e.shiftKey&&d(p[c+Uv(o,e,!0)])&&(u=!0),!u&&d(p._any)&&(u=!0)),h&&(u=!0),u&&A&&e.stopPropagation(),u}var Qp=class n{constructor(e,t,i,o,a){this.className=e,this.left=t,this.top=i,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let o=e.coordsAtPos(i.head,i.assoc||1);if(!o)return[];let a=cO(e);return[new n(t,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return Lee(e,t,i)}};function cO(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==cn.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function AU(n,e,t){let i=Qe.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:Wn.Text}}function Lee(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),o=Math.min(t.to,n.viewport.to),a=n.textDirection==cn.LTR,l=n.contentDOM,c=l.getBoundingClientRect(),u=cO(n),h=l.querySelector(".cm-line"),A=h&&window.getComputedStyle(h),f=c.left+(A?parseInt(A.paddingLeft)+Math.min(0,parseInt(A.textIndent)):0),d=c.right-(A?parseInt(A.paddingRight):0),p=nM(n,i),m=nM(n,o),b=p.type==Wn.Text?p:null,g=m.type==Wn.Text?m:null;if(b&&(n.lineWrapping||p.widgetLineBreaks)&&(b=AU(n,i,b)),g&&(n.lineWrapping||m.widgetLineBreaks)&&(g=AU(n,o,g)),b&&g&&b.from==g.from)return I(v(t.from,t.to,b));{let E=b?v(t.from,null,b):C(p,!1),S=g?v(null,t.to,g):C(m,!0),M=[];return(b||p).to<(g||m).from-(b&&g?1:0)||p.widgetLineBreaks>1&&E.bottom+n.defaultLineHeight/2<S.top?M.push(w(f,E.bottom,d,S.top)):E.bottom<S.top&&n.elementAtHeight((E.bottom+S.top)/2).type==Wn.Text&&(E.bottom=S.top=(E.bottom+S.top)/2),I(E).concat(M).concat(I(S))}function w(E,S,M,_){return new Qp(e,E-u.left,S-u.top-.01,M-E,_-S+.01)}function I({top:E,bottom:S,horizontal:M}){let _=[];for(let T=0;T<M.length;T+=2)_.push(w(M[T],E,M[T+1],S));return _}function v(E,S,M){let _=1e9,T=-1e9,D=[];function R(F,z,Q,V,G){let O=n.coordsAtPos(F,F==M.to?-2:2),W=n.coordsAtPos(Q,Q==M.from?2:-2);!O||!W||(_=Math.min(O.top,W.top,_),T=Math.max(O.bottom,W.bottom,T),G==cn.LTR?D.push(a&&z?f:O.left,a&&V?d:W.right):D.push(!a&&V?f:W.left,!a&&z?d:O.right))}let B=E??M.from,P=S??M.to;for(let F of n.visibleRanges)if(F.to>B&&F.from<P)for(let z=Math.max(F.from,B),Q=Math.min(F.to,P);;){let V=n.state.doc.lineAt(z);for(let G of n.bidiSpans(V)){let O=G.from+V.from,W=G.to+V.from;if(O>=Q)break;W>z&&R(Math.max(O,z),E==null&&O<=B,Math.min(W,Q),S==null&&W>=P,G.dir)}if(z=V.to+1,z>=Q)break}return D.length==0&&R(B,E==null,P,S==null,n.textDirection),{top:_,bottom:T,horizontal:D}}function C(E,S){let M=c.top+(S?E.top:E.bottom);return{top:M,bottom:M,horizontal:[]}}}function Bee(n,e){return n.constructor==e.constructor&&n.eq(e)}var vM=class{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Hv)!=e.state.facet(Hv)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Hv);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!Bee(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let o of e)o.update&&t&&o.constructor&&this.drawn[i].constructor&&o.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(o.draw(),t);for(;t;){let o=t.nextSibling;t.remove(),t=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},Hv=nt.define();function uO(n){return[mi.define(e=>new vM(e,n)),Hv.of(n)]}var hO=!et.ios,Gp=nt.define({combine(n){return Hr(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function l1(n={}){return[Gp.of(n),kee,Pee,Nee,FU.of(!0)]}function AO(n){return n.startState.facet(Gp)!=n.state.facet(Gp)}var kee=uO({above:!0,markers(n){let{state:e}=n,t=e.facet(Gp),i=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||hO:t.drawRangeCursor){let l=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=o.empty?o:Qe.cursor(o.head,o.head>o.anchor?-1:1);for(let u of Qp.forRange(n,l,c))i.push(u)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=AO(n);return t&&fU(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){fU(e.state,n)},class:"cm-cursorLayer"});function fU(n,e){e.style.animationDuration=n.facet(Gp).cursorBlinkRate+"ms"}var Pee=uO({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Qp.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||AO(n)},class:"cm-selectionLayer"}),fO={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};hO&&(fO[".cm-line"].caretColor="transparent !important");var Nee=ds.highest(tt.theme(fO));function dU(n,e,t,i,o){e.lastIndex=0;for(let a=n.iterRange(t,i),l=t,c;!a.next().done;l+=a.value.length)if(!a.lineBreak)for(;c=e.exec(a.value);)o(l+c.index,c)}function Fee(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:o,to:a}of t)o=Math.max(n.state.doc.lineAt(o).from,o-e),a=Math.min(n.state.doc.lineAt(a).to,a+e),i.length&&i[i.length-1].to>=o?i[i.length-1].to=a:i.push({from:o,to:a});return i}var wM=class{constructor(e){let{regexp:t,decoration:i,decorate:o,boundary:a,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,o)this.addMatch=(c,u,h,A)=>o(A,h,h+c[0].length,c,u);else if(typeof i=="function")this.addMatch=(c,u,h,A)=>{let f=i(c,u,h);f&&A(h,h+c[0].length,f)};else if(i)this.addMatch=(c,u,h,A)=>A(h,h+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=l}createDeco(e){let t=new fs,i=t.add.bind(t);for(let{from:o,to:a}of Fee(e,this.maxLength))dU(e.state.doc,this.regexp,o,a,(l,c)=>this.addMatch(c,e,l,i));return t.finish()}updateDeco(e,t){let i=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((a,l,c,u)=>{u>e.view.viewport.from&&c<e.view.viewport.to&&(i=Math.min(c,i),o=Math.max(u,o))}),e.viewportChanged||o-i>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,t.map(e.changes),i,o):t}updateRange(e,t,i,o){for(let a of e.visibleRanges){let l=Math.max(a.from,i),c=Math.min(a.to,o);if(c>l){let u=e.state.doc.lineAt(l),h=u.to<c?e.state.doc.lineAt(c):u,A=Math.max(a.from,u.from),f=Math.min(a.to,h.to);if(this.boundary){for(;l>u.from;l--)if(this.boundary.test(u.text[l-1-u.from])){A=l;break}for(;c<h.to;c++)if(this.boundary.test(h.text[c-h.from])){f=c;break}}let d=[],p,m=(b,g,w)=>d.push(w.range(b,g));if(u==h)for(this.regexp.lastIndex=A-u.from;(p=this.regexp.exec(u.text))&&p.index<f-u.from;)this.addMatch(p,e,p.index+u.from,m);else dU(e.state.doc,this.regexp,A,f,(b,g)=>this.addMatch(g,e,b,m));t=t.update({filterFrom:A,filterTo:f,filter:(b,g)=>b<A||g>f,add:d})}}return t}},bM=/x/.unicode!=null?"gu":"g",Uee=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,bM),Oee={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},G2=null;function Qee(){var n;if(G2==null&&typeof document<"u"&&document.body){let e=document.body.style;G2=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return G2||!1}var Vv=nt.define({combine(n){let e=Hr(n,{render:null,specialChars:Uee,addSpecialChars:null});return(e.replaceTabs=!Qee())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,bM)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,bM)),e}});function c1(n={}){return[Vv.of(n),Gee()]}var pU=null;function Gee(){return pU||(pU=mi.fromClass(class{constructor(n){this.view=n,this.decorations=qt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Vv)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new wM({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:o}=t.state,a=qn(e[0],0);if(a==9){let l=o.lineAt(i),c=t.state.tabSize,u=iu(l.text,c,i-l.from);return qt.replace({widget:new CM((c-u%c)*this.view.defaultCharacterWidth)})}return this.decorationCache[a]||(this.decorationCache[a]=qt.replace({widget:new xM(n,a)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Vv);n.startState.facet(Vv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}var zee="\u2022";function Hee(n){return n>=32?zee:n==10?"\u2424":String.fromCharCode(9216+n)}var xM=class extends xa{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Hee(this.code),i=e.state.phrase("Control character")+" "+(Oee[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,i,t);if(o)return o;let a=document.createElement("span");return a.textContent=t,a.title=i,a.setAttribute("aria-label",i),a.className="cm-specialChar",a}ignoreEvent(){return!1}},CM=class extends xa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};var Ov="-10000px",SM=class{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),o=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[];for(let l=0;l<o.length;l++){let c=o[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let A=this.tooltips[h];A&&A.create==c.create&&(u=h)}if(u<0)a[l]=this.createTooltipView(c);else{let h=a[l]=this.tooltipViews[u];h.update&&h.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(l.dom.remove(),(t=l.destroy)===null||t===void 0||t.call(l));return this.input=i,this.tooltips=o,this.tooltipViews=a,!0}};function Vee(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}var z2=nt.define({combine:n=>{var e,t,i;return{position:et.ios?"absolute":((e=n.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(o=>o.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(o=>o.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Vee}}}),mU=new WeakMap,dO=mi.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(z2);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new SM(n,DM,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(z2);if(i.position!=this.position){this.position=i.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Ov,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(z2).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:i}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=n.pos[a],A=n.size[a];if(!h||h.bottom<=Math.max(t.top,i.top)||h.top>=Math.min(t.bottom,i.bottom)||h.right<Math.max(t.left,i.left)-.1||h.left>Math.min(t.right,i.right)+.1){u.style.top=Ov;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,d=f?7:0,p=A.right-A.left,m=(e=mU.get(c))!==null&&e!==void 0?e:A.bottom-A.top,b=c.offset||Xee,g=this.view.textDirection==cn.LTR,w=A.width>i.right-i.left?g?i.left:i.right-A.width:g?Math.min(h.left-(f?14:0)+b.x,i.right-p):Math.max(i.left,h.left-p+(f?14:0)-b.x),I=!!l.above;!l.strictSide&&(I?h.top-(A.bottom-A.top)-b.y<i.top:h.bottom+(A.bottom-A.top)+b.y>i.bottom)&&I==i.bottom-h.bottom>h.top-i.top&&(I=!I);let v=(I?h.top-i.top:i.bottom-h.bottom)-d;if(v<m&&c.resize!==!1){if(v<this.view.defaultLineHeight){u.style.top=Ov;continue}mU.set(c,m),u.style.height=(m=v)+"px"}else u.style.height&&(u.style.height="");let C=I?h.top-m-d-b.y:h.bottom+d+b.y,E=w+p;if(c.overlap!==!0)for(let S of o)S.left<E&&S.right>w&&S.top<C+m&&S.bottom>C&&(C=I?S.top-m-2-d:S.bottom+d+2);this.position=="absolute"?(u.style.top=C-n.parent.top+"px",u.style.left=w-n.parent.left+"px"):(u.style.top=C+"px",u.style.left=w+"px"),f&&(f.style.left=`${h.left+(g?b.x:-b.x)-(w+14-7)}px`),c.overlap!==!0&&o.push({left:w,top:C,right:E,bottom:C+m}),u.classList.toggle("cm-tooltip-above",I),u.classList.toggle("cm-tooltip-below",!I),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ov}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Wee=tt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Xee={x:0,y:0},DM=nt.define({enables:[dO,Wee]});function RM(n,e){let t=n.plugin(dO);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}var gU=nt.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function LM(n,e){let t=n.plugin(pO),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}var pO=mi.fromClass(class{constructor(n){this.input=n.state.facet(gA),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(gU);this.top=new pA(n,!0,e.topContainer),this.bottom=new pA(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(gU);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new pA(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new pA(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(gA);if(t!=this.input){let i=t.filter(u=>u),o=[],a=[],l=[],c=[];for(let u of i){let h=this.specs.indexOf(u),A;h<0?(A=u(n.view),c.push(A)):(A=this.panels[h],A.update&&A.update(n)),o.push(A),(A.top?a:l).push(A)}this.specs=i,this.panels=o,this.top.sync(a),this.bottom.sync(l);for(let u of c)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>tt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),pA=class{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=yU(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=yU(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function yU(n){let e=n.nextSibling;return n.remove(),e}var gA=nt.define({enables:pO}),Ca=class extends Xs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Ca.prototype.elementClass="";Ca.prototype.toDOM=void 0;Ca.prototype.mapMode=di.TrackBefore;Ca.prototype.startSide=Ca.prototype.endSide=-1;Ca.prototype.point=!0;var Yee=0,zp=class{constructor(e,t){this.from=e,this.to=t}},Ct=class{constructor(e={}){this.id=Yee++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=nr.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}};Ct.closedBy=new Ct({deserialize:n=>n.split(" ")});Ct.openedBy=new Ct({deserialize:n=>n.split(" ")});Ct.group=new Ct({deserialize:n=>n.split(" ")});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});var Zee=Object.create(null),nr=class n{constructor(e,t,i,o=0){this.name=e,this.props=t,this.id=i,this.flags=o}static define(e){let t=e.props&&e.props.length?Object.create(null):Zee,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new n(e.name||"",t,e.id,i);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ct.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let o of i.split(" "))t[o]=e[i];return i=>{for(let o=i.prop(Ct.group),a=-1;a<(o?o.length:0);a++){let l=t[a<0?i.name:o[a]];if(l)return l}}}};nr.none=new nr("",Object.create(null),0,8);var A1=class n{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let o=null;for(let a of e){let l=a(i);l&&(o||(o=Object.assign({},i.props)),o[l[0].id]=l[1])}t.push(o?new nr(i.name,o,i.id,i.flags):i)}return new n(t)}},u1=new WeakMap,mO=new WeakMap,gi;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(gi||(gi={}));var Cn=class n{constructor(e,t,i,o,a){if(this.type=e,this.children=t,this.positions=i,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[l,c]of a)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=this.prop(Ct.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let o=i.toString();o&&(t&&(t+=","),t+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new vA(this.topNode,e)}cursorAt(e,t=0,i=0){let o=u1.get(this)||this.topNode,a=new vA(o);return a.moveTo(e,t),u1.set(this,a._tree),a}get topNode(){return new ou(this,0,0,null)}resolve(e,t=0){let i=yA(u1.get(this)||this.topNode,e,t,!1);return u1.set(this,i),i}resolveInner(e,t=0){let i=yA(mO.get(this)||this.topNode,e,t,!0);return mO.set(this,i),i}iterate(e){let{enter:t,leave:i,from:o=0,to:a=this.length}=e,l=e.mode||0,c=(l&gi.IncludeAnonymous)>0;for(let u=this.cursor(l|gi.IncludeAnonymous);;){let h=!1;if(u.from<=a&&u.to>=o&&(!c&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;h=!0}for(;h&&i&&(c||!u.type.isAnonymous)&&i(u),!u.nextSibling();){if(!u.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:FM(nr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,o)=>new n(this.type,t,i,o,this.propValues),e.makeTree||((t,i,o)=>new n(nr.none,t,i,o)))}static build(e){return Kee(e)}};Cn.empty=new Cn(nr.none,[],[],0);var BM=class n{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n(this.buffer,this.index)}},su=class n{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return nr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],o=this.set.types[t],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),e+=4,i==e)return a;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return a+"("+l.join(",")+")"}findChild(e,t,i,o,a){let{buffer:l}=this,c=-1;for(let u=e;u!=t&&!(yO(a,o,l[u+1],l[u+2])&&(c=u,i>0));u=l[u+3]);return c}slice(e,t,i){let o=this.buffer,a=new Uint16Array(t-e),l=0;for(let c=e,u=0;c<t;){a[u++]=o[c++],a[u++]=o[c++]-i;let h=a[u++]=o[c++]-i;a[u++]=o[c++]-e,l=Math.max(l,h)}return new n(a,l,this.set)}};function yO(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function vO(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function yA(n,e,t,i){for(var o;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let l=!i&&n instanceof ou&&n.index<0?null:n.parent;if(!l)return n;n=l}let a=i?0:gi.IgnoreOverlays;if(i)for(let l=n,c=l.parent;c;l=c,c=l.parent)l instanceof ou&&l.index<0&&((o=c.enter(e,t,a))===null||o===void 0?void 0:o.from)!=l.from&&(n=c);for(;;){let l=n.enter(e,t,a);if(!l)return n;n=l}}var ou=class n{constructor(e,t,i,o){this._tree=e,this.from=t,this.index=i,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,o,a=0){for(let l=this;;){for(let{children:c,positions:u}=l._tree,h=t>0?c.length:-1;e!=h;e+=t){let A=c[e],f=u[e]+l.from;if(yO(o,i,f,f+A.length)){if(A instanceof su){if(a&gi.ExcludeBuffers)continue;let d=A.findChild(0,A.buffer.length,t,i-f,o);if(d>-1)return new Hp(new kM(l,A,e,f),null,d)}else if(a&gi.IncludeAnonymous||!A.type.isAnonymous||NM(A)){let d;if(!(a&gi.IgnoreMounts)&&A.props&&(d=A.prop(Ct.mounted))&&!d.overlay)return new n(d.tree,f,e,l);let p=new n(A,f,e,l);return a&gi.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?A.children.length-1:0,t,i,o)}}}if(a&gi.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let o;if(!(i&gi.IgnoreOverlays)&&(o=this._tree.prop(Ct.mounted))&&o.overlay){let a=e-this.from;for(let{from:l,to:c}of o.overlay)if((t>0?l<=a:l<a)&&(t<0?c>=a:c>a))return new n(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new vA(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return yA(this,e,t,!1)}resolveInner(e,t=0){return yA(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vO(this,e)}getChild(e,t=null,i=null){let o=f1(this,e,t,i);return o.length?o[0]:null}getChildren(e,t=null,i=null){return f1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return d1(this,e)}};function f1(n,e,t,i){let o=n.cursor(),a=[];if(!o.firstChild())return a;if(t!=null){for(;!o.type.is(t);)if(!o.nextSibling())return a}for(;;){if(i!=null&&o.type.is(i))return a;if(o.type.is(e)&&a.push(o.node),!o.nextSibling())return i==null?a:[]}}function d1(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}var kM=class{constructor(e,t,i,o){this.parent=e,this.buffer=t,this.index=i,this.start=o}},Hp=class n{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.context.start,i);return a<0?null:new n(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&gi.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new n(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new n(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new n(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new vA(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,o=this.index+4,a=i.buffer[this.index+3];if(a>o){let l=i.buffer[this.index+1];e.push(i.slice(o,a,l)),t.push(0)}return new Cn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return yA(this,e,t,!1)}resolveInner(e,t=0){return yA(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vO(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let o=f1(this,e,t,i);return o.length?o[0]:null}getChildren(e,t=null,i=null){return f1(this,e,t,i)}get node(){return this}matchContext(e){return d1(this,e)}},vA=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ou)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:o}=this.buffer;return this.type=t||o.set.types[o.buffer[e]],this.from=i+o.buffer[e+1],this.to=i+o.buffer[e+2],!0}yield(e){return e?e instanceof ou?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.buffer.start,i);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&gi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&gi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&gi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let o=i<0?0:this.stack[i]+4;if(this.index!=o)return this.yieldBuf(t.findChild(o,this.index,-1,0,4))}else{let o=t.buffer[this.index+3];if(o<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(o)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:i}=o)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let a=t+e,l=e<0?-1:i._tree.children.length;a!=l;a+=e){let c=i._tree.children[a];if(this.mode&gi.IncludeAnonymous||c instanceof su||!c.type.isAnonymous||NM(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let o=this.index,a=this.stack.length;a>=0;){for(let l=e;l;l=l._parent)if(l.index==o){if(o==this.index)return l;t=l,i=a+1;break e}o=this.stack[--a]}for(let o=i;o<this.stack.length;o++)t=new Hp(this.buffer,t,this.stack[o]);return this.bufferNode=new Hp(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(o=!0)}for(;o&&t&&t(this),o=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,o=!0}}}matchContext(e){if(!this.buffer)return d1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return d1(this.node,e,o);let l=i[t.buffer[this.stack[a]]];if(!l.isAnonymous){if(e[o]&&e[o]!=l.name)return!1;o--}}return!0}};function NM(n){return n.children.some(e=>e instanceof su||!e.type.isAnonymous||NM(e))}function Kee(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:o=1024,reused:a=[],minRepeatType:l=i.types.length}=n,c=Array.isArray(t)?new BM(t,t.length):t,u=i.types,h=0,A=0;function f(C,E,S,M,_){let{id:T,start:D,end:R,size:B}=c,P=A;for(;B<0;)if(c.next(),B==-1){let G=a[T];S.push(G),M.push(D-C);return}else if(B==-3){h=T;return}else if(B==-4){A=T;return}else throw new RangeError(`Unrecognized record size: ${B}`);let F=u[T],z,Q,V=D-C;if(R-D<=o&&(Q=b(c.pos-E,_))){let G=new Uint16Array(Q.size-Q.skip),O=c.pos-Q.size,W=G.length;for(;c.pos>O;)W=g(Q.start,G,W);z=new su(G,R-Q.start,i),V=Q.start-C}else{let G=c.pos-B;c.next();let O=[],W=[],k=T>=l?T:-1,Y=0,te=R;for(;c.pos>G;)k>=0&&c.id==k&&c.size>=0?(c.end<=te-o&&(p(O,W,D,Y,c.end,te,k,P),Y=O.length,te=c.end),c.next()):f(D,G,O,W,k);if(k>=0&&Y>0&&Y<O.length&&p(O,W,D,Y,D,te,k,P),O.reverse(),W.reverse(),k>-1&&Y>0){let ie=d(F);z=FM(F,O,W,0,O.length,0,R-D,ie,ie)}else z=m(F,O,W,R-D,P-R)}S.push(z),M.push(V)}function d(C){return(E,S,M)=>{let _=0,T=E.length-1,D,R;if(T>=0&&(D=E[T])instanceof Cn){if(!T&&D.type==C&&D.length==M)return D;(R=D.prop(Ct.lookAhead))&&(_=S[T]+D.length+R)}return m(C,E,S,M,_)}}function p(C,E,S,M,_,T,D,R){let B=[],P=[];for(;C.length>M;)B.push(C.pop()),P.push(E.pop()+S-_);C.push(m(i.types[D],B,P,T-_,R-T)),E.push(_-S)}function m(C,E,S,M,_=0,T){if(h){let D=[Ct.contextHash,h];T=T?[D].concat(T):[D]}if(_>25){let D=[Ct.lookAhead,_];T=T?[D].concat(T):[D]}return new Cn(C,E,S,M,T)}function b(C,E){let S=c.fork(),M=0,_=0,T=0,D=S.end-o,R={size:0,start:0,skip:0};e:for(let B=S.pos-C;S.pos>B;){let P=S.size;if(S.id==E&&P>=0){R.size=M,R.start=_,R.skip=T,T+=4,M+=4,S.next();continue}let F=S.pos-P;if(P<0||F<B||S.start<D)break;let z=S.id>=l?4:0,Q=S.start;for(S.next();S.pos>F;){if(S.size<0)if(S.size==-3)z+=4;else break e;else S.id>=l&&(z+=4);S.next()}_=Q,M+=P,T+=z}return(E<0||M==C)&&(R.size=M,R.start=_,R.skip=T),R.size>4?R:void 0}function g(C,E,S){let{id:M,start:_,end:T,size:D}=c;if(c.next(),D>=0&&M<l){let R=S;if(D>4){let B=c.pos-(D-4);for(;c.pos>B;)S=g(C,E,S)}E[--S]=R,E[--S]=T-C,E[--S]=_-C,E[--S]=M}else D==-3?h=M:D==-4&&(A=M);return S}let w=[],I=[];for(;c.pos>0;)f(n.start||0,n.bufferStart||0,w,I,-1);let v=(e=n.length)!==null&&e!==void 0?e:w.length?I[0]+w[0].length:0;return new Cn(u[n.topID],w.reverse(),I.reverse(),v)}var gO=new WeakMap;function h1(n,e){if(!n.isAnonymous||e instanceof su||e.type!=n)return 1;let t=gO.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Cn)){t=1;break}t+=h1(n,i)}gO.set(e,t)}return t}function FM(n,e,t,i,o,a,l,c,u){let h=0;for(let m=i;m<o;m++)h+=h1(n,e[m]);let A=Math.ceil(h*1.5/8),f=[],d=[];function p(m,b,g,w,I){for(let v=g;v<w;){let C=v,E=b[v],S=h1(n,m[v]);for(v++;v<w;v++){let M=h1(n,m[v]);if(S+M>=A)break;S+=M}if(v==C+1){if(S>A){let M=m[C];p(M.children,M.positions,0,M.children.length,b[C]+I);continue}f.push(m[C])}else{let M=b[v-1]+m[v-1].length-E;f.push(FM(n,m,b,C,v,E,M,null,u))}d.push(E+I-a)}}return p(e,t,i,o,0),(c||u)(f,d,l)}var au=class n{constructor(e,t,i,o,a=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=o,this.open=(a?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let o=[new n(0,e.length,e,0,!1,i)];for(let a of t)a.to>e.length&&o.push(a);return o}static applyChanges(e,t,i=128){if(!t.length)return e;let o=[],a=1,l=e.length?e[0]:null;for(let c=0,u=0,h=0;;c++){let A=c<t.length?t[c]:null,f=A?A.fromA:1e9;if(f-u>=i)for(;l&&l.from<f;){let d=l;if(u>=d.from||f<=d.to||h){let p=Math.max(d.from,u)-h,m=Math.min(d.to,f)-h;d=p>=m?null:new n(p,m,d.tree,d.offset+h,c>0,!!A)}if(d&&o.push(d),l.to>f)break;l=a<e.length?e[a++]:null}if(!A)break;u=A.toA,h=A.toA-A.toB}return o}},Vp=class{startParse(e,t,i){return typeof e=="string"&&(e=new PM(e)),i=i?i.length?i.map(o=>new zp(o.from,o.to)):[new zp(0,0)]:[new zp(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let o=this.startParse(e,t,i);for(;;){let a=o.advance();if(a)return a}}},PM=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var v1e=new Ct({perNode:!0});var jee=0,Bo=class n{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=jee++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new n([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new y1;return t=>t.modified.indexOf(e)>-1?t:y1.get(t.base||t,t.modified.concat(e).sort((i,o)=>i.id-o.id))}},Jee=0,y1=class n{constructor(){this.instances=[],this.id=Jee++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(c=>c.base==e&&qee(t,c.modified));if(i)return i;let o=[],a=new Bo(o,e,t);for(let c of t)c.instances.push(a);let l=$ee(t);for(let c of e.set)if(!c.modified.length)for(let u of l)o.push(n.get(c,u));return a}};function qee(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function $ee(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,o=e.length;i<o;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function xO(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let o of t.split(" "))if(o){let a=[],l=2,c=o;for(let f=0;;){if(c=="..."&&f>0&&f+3==o.length){l=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!d)throw new RangeError("Invalid path: "+o);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==o.length)break;let p=o[f++];if(f==o.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+o);c=o.slice(f)}let u=a.length-1,h=a[u];if(!h)throw new RangeError("Invalid path: "+o);let A=new wA(i,l,u>0?a.slice(0,u):null);e[h]=A.sort(e[h])}}return CO.add(e)}var CO=new Ct,wA=class{constructor(e,t,i,o){this.tags=e,this.mode=t,this.context=i,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};wA.empty=new wA([],2,null);function GM(n,e){let t=Object.create(null);for(let a of n)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let l of a.tag)t[l.id]=a.class;let{scope:i,all:o=null}=e||{};return{style:a=>{let l=o;for(let c of a)for(let u of c.set){let h=t[u.id];if(h){l=l?l+" "+h:h;break}}return l},scope:i}}function ete(n,e){let t=null;for(let i of n){let o=i.style(e);o&&(t=t?t+" "+o:o)}return t}function SO(n,e,t,i=0,o=n.length){let a=new OM(i,Array.isArray(e)?e:[e],t);a.highlightRange(n.cursor(),i,o,"",a.highlighters),a.flush(o)}var OM=class{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,o,a){let{type:l,from:c,to:u}=e;if(c>=i||u<=t)return;l.isTop&&(a=this.highlighters.filter(p=>!p.scope||p.scope(l)));let h=o,A=tte(e)||wA.empty,f=ete(a,A.tags);if(f&&(h&&(h+=" "),h+=f,A.mode==1&&(o+=(o?" ":"")+f)),this.startSpan(Math.max(t,c),h),A.opaque)return;let d=e.tree&&e.tree.prop(Ct.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+c,1),m=this.highlighters.filter(g=>!g.scope||g.scope(d.tree.type)),b=e.firstChild();for(let g=0,w=c;;g++){let I=g<d.overlay.length?d.overlay[g]:null,v=I?I.from+c:u,C=Math.max(t,w),E=Math.min(i,v);if(C<E&&b)for(;e.from<E&&(this.highlightRange(e,C,E,o,a),this.startSpan(Math.min(E,e.to),h),!(e.to>=v||!e.nextSibling())););if(!I||v>i)break;w=I.to+c,w>t&&(this.highlightRange(p.cursor(),Math.max(t,I.from+c),Math.min(i,w),"",m),this.startSpan(Math.min(i,w),h))}b&&e.parent()}else if(e.firstChild()){d&&(o="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,o,a),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}};function tte(n){let e=n.type.prop(CO);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}var Ye=Bo.define,p1=Ye(),kl=Ye(),wO=Ye(kl),bO=Ye(kl),Pl=Ye(),m1=Ye(Pl),UM=Ye(Pl),Lo=Ye(),lu=Ye(Lo),Do=Ye(),Ro=Ye(),QM=Ye(),Wp=Ye(QM),g1=Ye(),Me={comment:p1,lineComment:Ye(p1),blockComment:Ye(p1),docComment:Ye(p1),name:kl,variableName:Ye(kl),typeName:wO,tagName:Ye(wO),propertyName:bO,attributeName:Ye(bO),className:Ye(kl),labelName:Ye(kl),namespace:Ye(kl),macroName:Ye(kl),literal:Pl,string:m1,docString:Ye(m1),character:Ye(m1),attributeValue:Ye(m1),number:UM,integer:Ye(UM),float:Ye(UM),bool:Ye(Pl),regexp:Ye(Pl),escape:Ye(Pl),color:Ye(Pl),url:Ye(Pl),keyword:Do,self:Ye(Do),null:Ye(Do),atom:Ye(Do),unit:Ye(Do),modifier:Ye(Do),operatorKeyword:Ye(Do),controlKeyword:Ye(Do),definitionKeyword:Ye(Do),moduleKeyword:Ye(Do),operator:Ro,derefOperator:Ye(Ro),arithmeticOperator:Ye(Ro),logicOperator:Ye(Ro),bitwiseOperator:Ye(Ro),compareOperator:Ye(Ro),updateOperator:Ye(Ro),definitionOperator:Ye(Ro),typeOperator:Ye(Ro),controlOperator:Ye(Ro),punctuation:QM,separator:Ye(QM),bracket:Wp,angleBracket:Ye(Wp),squareBracket:Ye(Wp),paren:Ye(Wp),brace:Ye(Wp),content:Lo,heading:lu,heading1:Ye(lu),heading2:Ye(lu),heading3:Ye(lu),heading4:Ye(lu),heading5:Ye(lu),heading6:Ye(lu),contentSeparator:Ye(Lo),list:Ye(Lo),quote:Ye(Lo),emphasis:Ye(Lo),strong:Ye(Lo),link:Ye(Lo),monospace:Ye(Lo),strikethrough:Ye(Lo),inserted:Ye(),deleted:Ye(),changed:Ye(),invalid:Ye(),meta:g1,documentMeta:Ye(g1),annotation:Ye(g1),processingInstruction:Ye(g1),definition:Bo.defineModifier(),constant:Bo.defineModifier(),function:Bo.defineModifier(),standard:Bo.defineModifier(),local:Bo.defineModifier(),special:Bo.defineModifier()},x1e=GM([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var zM,bA=new Ct;function nte(n){return nt.define({combine:n?e=>e.concat(n):void 0})}var ite=new Ct,Kr=class{constructor(e,t,i=[],o=""){this.data=e,this.name=o,on.prototype.hasOwnProperty("tree")||Object.defineProperty(on.prototype,"tree",{get(){return zi(this)}}),this.parser=t,this.extension=[xA.of(this),on.languageData.of((a,l,c)=>{let u=EO(a,l,c),h=u.type.prop(bA);if(!h)return[];let A=a.facet(h),f=u.type.prop(ite);if(f){let d=u.resolve(l-u.from,c);for(let p of f)if(p.test(d,a)){let m=a.facet(p.facet);return p.type=="replace"?m:m.concat(A)}}return A})].concat(i)}isActiveAt(e,t,i=-1){return EO(e,t,i).type.prop(bA)==this.data}findRegions(e){let t=e.facet(xA);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],o=(a,l)=>{if(a.prop(bA)==this.data){i.push({from:l,to:l+a.length});return}let c=a.prop(Ct.mounted);if(c){if(c.tree.prop(bA)==this.data){if(c.overlay)for(let u of c.overlay)i.push({from:u.from+l,to:u.to+l});else i.push({from:l,to:l+a.length});return}else if(c.overlay){let u=i.length;if(o(c.tree,c.overlay[0].from+l),i.length>u)return}}for(let u=0;u<a.children.length;u++){let h=a.children[u];h instanceof Cn&&o(h,a.positions[u]+l)}};return o(zi(e),0),i}get allowsNesting(){return!0}};Kr.setState=Ot.define();function EO(n,e,t){let i=n.facet(xA),o=zi(n).topNode;if(!i||i.allowsNesting)for(let a=o;a;a=a.enter(e,t,gi.ExcludeBuffers))a.type.isTop&&(o=a);return o}function zi(n){let e=n.field(Kr.state,!1);return e?e.tree:Cn.empty}var XM=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}},Xp=null,Yp=class n{constructor(e,t,i=[],o,a,l,c,u){this.parser=e,this.state=t,this.fragments=i,this.tree=o,this.treeLen=a,this.viewport=l,this.skipped=c,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new n(e,t,[],Cn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new XM(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Cn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(au.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(au.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Xp;Xp=this;try{return e()}finally{Xp=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=IO(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:o,treeLen:a,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((h,A,f,d)=>u.push({fromA:h,toA:A,fromB:f,toB:d})),i=au.applyChanges(i,u),o=Cn.empty,a=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let h of this.skipped){let A=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);A<f&&c.push({from:A,to:f})}}}return new n(this.parser,t,i,o,a,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:o,to:a}=this.skipped[i];o<e.to&&a>e.from&&(this.fragments=IO(this.fragments,o,a),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Vp{createParse(t,i,o){let a=o[0].from,l=o[o.length-1].to;return{parsedPos:a,advance(){let u=Xp;if(u){for(let h of o)u.tempSkipped.push(h);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=l,new Cn(nr.none,[],[],l-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Xp}};function IO(n,e,t){return au.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}var Zp=class n{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new n(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Yp.create(e.facet(xA).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new n(i)}};Kr.state=ci.define({create:Zp.init,update(n,e){for(let t of e.effects)if(t.is(Kr.setState))return t.value;return e.startState.facet(xA)!=e.state.facet(xA)?Zp.init(e.state):n.apply(e)}});var DO=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(DO=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var HM=typeof navigator<"u"&&(!((zM=navigator.scheduling)===null||zM===void 0)&&zM.isInputPending)?()=>navigator.scheduling.isInputPending():null,rte=mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Kr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Kr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=DO(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,a=i.field(Kr.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!HM?Math.max(25,e.timeRemaining()-5):1e9),c=a.context.treeLen<o&&i.doc.length>o+1e3,u=a.context.work(()=>HM&&HM()||Date.now()>l,o+(c?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Kr.setState.of(new Zp(a.context))})),this.chunkBudget>0&&!(u&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xA=nt.define({combine(n){return n.length?n[0]:null},enables:n=>[Kr.state,rte,tt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});var RO=nt.define(),jp=nt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Zs(n){let e=n.facet(jp);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function SA(n,e){let t="",i=n.tabSize,o=n.facet(jp)[0];if(o=="	"){for(;e>=i;)t+="	",e-=i;o=" "}for(let a=0;a<e;a++)t+=o;return t}function x1(n,e){n instanceof on&&(n=new cu(n));for(let i of n.state.facet(RO)){let o=i(n,e);if(o!==void 0)return o}let t=zi(n.state);return t?ote(n,t,e):null}var cu=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Zs(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=i.from&&o<=i.to?a&&o==e?{text:"",from:e}:(t<0?o<e:o<=e)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(e,t);return i.slice(e-o,Math.min(i.length,e+100-o))}column(e,t=1){let{text:i,from:o}=this.lineAt(e,t),a=this.countColumn(i,e-o),l=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return l>-1&&(a+=l-this.countColumn(i,i.search(/\S|$/))),a}countColumn(e,t=e.length){return iu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:o}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let l=a(o);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},ste=new Ct;function ote(n,e,t){return LO(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function ate(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function lte(n){let e=n.type.prop(ste);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Ct.closedBy))){let o=n.lastChild,a=o&&i.indexOf(o.name)>-1;return l=>Ate(l,!0,1,void 0,a&&!ate(l)?o.from:void 0)}return n.parent==null?cte:null}function LO(n,e,t){for(;n;n=n.parent){let i=lte(n);if(i)return i(YM.create(t,e,n))}return null}function cte(){return 0}var YM=class n extends cu{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new n(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ute(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?LO(e,this.pos,this.base):0}};function ute(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function hte(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let o=n.options.simulateBreak,a=n.state.doc.lineAt(t.from),l=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let c=t.to;;){let u=e.childAfter(c);if(!u||u==i)return null;if(!u.type.isSkipped)return u.from<l?t:null;c=u.to}}function Ate(n,e,t,i,o){let a=n.textAfter,l=a.match(/^\s*/)[0].length,c=i&&a.slice(l,l+i.length)==i||o==n.pos+l,u=e?hte(n):null;return u?c?n.column(u.from):n.column(u.to):n.baseIndent+(c?0:n.unit*t)}var fte=200;function $M(){return on.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,o=t.lineAt(i);if(i>o.from+fte)return n;let a=t.sliceString(o.from,i);if(!e.some(h=>h.test(a)))return n;let{state:l}=n,c=-1,u=[];for(let{head:h}of l.selection.ranges){let A=l.doc.lineAt(h);if(A.from==c)continue;c=A.from;let f=x1(l,A.from);if(f==null)continue;let d=/^\s*/.exec(A.text)[0],p=SA(l,f);d!=p&&u.push({from:A.from,to:A.from+d.length,insert:p})}return u.length?[n,{changes:u,sequential:!0}]:n})}var CA=class n{constructor(e,t){this.specs=e;let i;function o(c){let u=ps.newName();return(i||(i=Object.create(null)))["."+u]=c,u}let a=typeof t.all=="string"?t.all:t.all?o(t.all):void 0,l=t.scope;this.scope=l instanceof Kr?c=>c.prop(bA)==l.data:l?c=>c==l:void 0,this.style=GM(e.map(c=>({tag:c.tag,class:c.class||o(Object.assign({},c,{tag:null}))})),{all:a}).style,this.module=i?new ps(i):null,this.themeType=t.themeType}static define(e,t){return new n(e,t||{})}},ZM=nt.define(),BO=nt.define({combine(n){return n.length?[n[0]]:null}});function VM(n){let e=n.facet(ZM);return e.length?e:n.facet(BO)}function C1(n,e){let t=[dte],i;return n instanceof CA&&(n.module&&t.push(tt.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(BO.of(n)):i?t.push(ZM.computeN([tt.darkTheme],o=>o.facet(tt.darkTheme)==(i=="dark")?[n]:[])):t.push(ZM.of(n)),t}var KM=class{constructor(e){this.markCache=Object.create(null),this.tree=zi(e.state),this.decorations=this.buildDeco(e,VM(e.state))}update(e){let t=zi(e.state),i=VM(e.state),o=i!=VM(e.startState);t.length<e.view.viewport.to&&!o&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||o)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return qt.none;let i=new fs;for(let{from:o,to:a}of e.visibleRanges)SO(this.tree,t,(l,c,u)=>{i.add(l,c,this.markCache[u]||(this.markCache[u]=qt.mark({class:u})))},o,a);return i.finish()}},dte=ds.high(mi.fromClass(KM,{decorations:n=>n.decorations})),kO=CA.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),pte=tt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),PO=1e4,NO="()[]{}",FO=nt.define({combine(n){return Hr(n,{afterCursor:!0,brackets:NO,maxScanDistance:PO,renderMatch:yte})}}),mte=qt.mark({class:"cm-matchingBracket"}),gte=qt.mark({class:"cm-nonmatchingBracket"});function yte(n){let e=[],t=n.matched?mte:gte;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}var vte=ci.define({create(){return qt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(FO);for(let o of e.state.selection.ranges){if(!o.empty)continue;let a=Ys(e.state,o.head,-1,i)||o.head>0&&Ys(e.state,o.head-1,1,i)||i.afterCursor&&(Ys(e.state,o.head,1,i)||o.head<e.state.doc.length&&Ys(e.state,o.head+1,-1,i));a&&(t=t.concat(i.renderMatch(a,e.state)))}return qt.set(t,!0)},provide:n=>tt.decorations.from(n)}),wte=[vte,pte];function eT(n={}){return[FO.of(n),wte]}var bte=new Ct;function jM(n,e,t){let i=n.prop(e<0?Ct.openedBy:Ct.closedBy);if(i)return i;if(n.name.length==1){let o=t.indexOf(n.name);if(o>-1&&o%2==(e<0?1:0))return[t[o+e]]}return null}function JM(n){let e=n.type.prop(bte);return e?e(n.node):n}function Ys(n,e,t,i={}){let o=i.maxScanDistance||PO,a=i.brackets||NO,l=zi(n),c=l.resolveInner(e,t);for(let u=c;u;u=u.parent){let h=jM(u.type,t,a);if(h&&u.from<u.to){let A=JM(u);if(A&&(t>0?e>=A.from&&e<A.to:e>A.from&&e<=A.to))return xte(n,e,t,u,A,h,a)}}return Cte(n,e,t,l,c.type,o,a)}function xte(n,e,t,i,o,a,l){let c=i.parent,u={from:o.from,to:o.to},h=0,A=c?.cursor();if(A&&(t<0?A.childBefore(i.from):A.childAfter(i.to)))do if(t<0?A.to<=i.from:A.from>=i.to){if(h==0&&a.indexOf(A.type.name)>-1&&A.from<A.to){let f=JM(A);return{start:u,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(jM(A.type,t,l))h++;else if(jM(A.type,-t,l)){if(h==0){let f=JM(A);return{start:u,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}h--}}while(t<0?A.prevSibling():A.nextSibling());return{start:u,matched:!1}}function Cte(n,e,t,i,o,a,l){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=l.indexOf(c);if(u<0||u%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},A=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!A.next().done&&d<=a;){let p=A.value;t<0&&(d+=p.length);let m=e+d*t;for(let b=t>0?0:p.length-1,g=t>0?p.length:-1;b!=g;b+=t){let w=l.indexOf(p[b]);if(!(w<0||i.resolveInner(m+b,1).type!=o))if(w%2==0==t>0)f++;else{if(f==1)return{start:h,end:{from:m+b,to:m+b+1},matched:w>>1==u>>1};f--}}t>0&&(d+=p.length)}return A.done?{start:h,matched:!1}:null}function MO(n,e,t,i=0,o=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let a=o;for(let l=i;l<e;l++)n.charCodeAt(l)==9?a+=t-a%t:a++;return a}var v1=class{constructor(e,t,i,o){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=o,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=MO(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:MO(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let o=l=>i?l.toLowerCase():l,a=this.string.substr(this.pos,e.length);return o(a)==o(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&t!==!1&&(this.pos+=o[0].length),o)}}current(){return this.string.slice(this.start,this.pos)}};function Ste(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||Ete,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||nT}}function Ete(n){if(typeof n!="object")return n;let e={};for(let t in n){let i=n[t];e[t]=i instanceof Array?i.slice():i}return e}var TO=new WeakMap,w1=class n extends Kr{constructor(e){let t=nte(e.languageData),i=Ste(e),o,a=new class extends Vp{createParse(l,c,u){return new qM(o,l,c,u)}};super(t,a,[RO.of((l,c)=>this.getIndent(l,c))],e.name),this.topNode=_te(t),o=this,this.streamParser=i,this.stateAfter=new Ct({perNode:!0}),this.tokenTable=e.tokenTable?new b1(i.tokenTable):Tte}static define(e){return new n(e)}getIndent(e,t){let i=zi(e.state),o=i.resolve(t);for(;o&&o.type!=this.topNode;)o=o.parent;if(!o)return null;let a,{overrideIndentation:l}=e.options;l&&(a=TO.get(e.state),a!=null&&a<t-1e4&&(a=void 0));let c=tT(this,i,0,o.from,a??t),u,h;if(c?(h=c.state,u=c.pos+1):(h=this.streamParser.startState(e.unit),u=0),t-u>1e4)return null;for(;u<t;){let f=e.state.doc.lineAt(u),d=Math.min(t,f.to);if(f.length){let p=l?l(f.from):-1,m=new v1(f.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;m.pos<d-f.from;)OO(this.streamParser.token,m,h)}else this.streamParser.blankLine(h,e.unit);if(d==t)break;u=f.to+1}let A=e.lineAt(t);return l&&a==null&&TO.set(e.state,A.from),this.streamParser.indent(h,/^\s*(.*)/.exec(A.text)[1],e)}get allowsNesting(){return!1}};function tT(n,e,t,i,o){let a=t>=i&&t+e.length<=o&&e.prop(n.stateAfter);if(a)return{state:n.streamParser.copyState(a),pos:t+e.length};for(let l=e.children.length-1;l>=0;l--){let c=e.children[l],u=t+e.positions[l],h=c instanceof Cn&&u<o&&tT(n,c,u,i,o);if(h)return h}return null}function UO(n,e,t,i,o){if(o&&t<=0&&i>=e.length)return e;!o&&e.type==n.topNode&&(o=!0);for(let a=e.children.length-1;a>=0;a--){let l=e.positions[a],c=e.children[a],u;if(l<i&&c instanceof Cn){if(!(u=UO(n,c,t-l,i-l,o)))break;return o?new Cn(e.type,e.children.slice(0,a).concat(u),e.positions.slice(0,a+1),l+u.length):u}}return null}function Ite(n,e,t,i){for(let o of e){let a=o.from+(o.openStart?25:0),l=o.to-(o.openEnd?25:0),c=a<=t&&l>t&&tT(n,o.tree,0-o.offset,t,l),u;if(c&&(u=UO(n,o.tree,t+o.offset,c.pos+o.offset,!1)))return{state:c.state,tree:u}}return{state:n.streamParser.startState(i?Zs(i):4),tree:Cn.empty}}var qM=class{constructor(e,t,i,o){this.lang=e,this.input=t,this.fragments=i,this.ranges=o,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=o[o.length-1].to;let a=Yp.get(),l=o[0].from,{state:c,tree:u}=Ite(e,i,l,a?.state);this.state=c,this.parsedPos=this.chunkStart=l+u.length;for(let h=0;h<u.children.length;h++)this.chunks.push(u.children[h]),this.chunkPos.push(u.positions[h]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Zs(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=Yp.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let o=this.rangeIndex;;){let a=this.ranges[o].to;if(a>=i||(t=t.slice(0,a-(i-t.length)),o++,o==this.ranges.length))break;let l=this.ranges[o].from,c=this.lineAfter(l);t+=c,i=l+c.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let o=this.ranges[this.rangeIndex].to,a=e+t;if(i>0?o>a:o>=a)break;let l=this.ranges[++this.rangeIndex].from;t+=l-o}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,o,a){if(this.ranges.length>1){a=this.skipGapsTo(t,a,1),t+=a;let l=this.chunk.length;a=this.skipGapsTo(i,a,-1),i+=a,o+=this.chunk.length-l}return this.chunk.push(e,t,i,o),a}parseLine(e){let{line:t,end:i}=this.nextLine(),o=0,{streamParser:a}=this.lang,l=new v1(t,e?e.state.tabSize:4,e?Zs(e.state):2);if(l.eol())a.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let c=OO(a.token,l,this.state);if(c&&(o=this.emitToken(this.lang.tokenTable.resolve(c),this.parsedPos+l.start,this.parsedPos+l.pos,4,o)),l.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Cn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Mte,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Cn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Cn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function OO(n,e,t){e.start=e.pos;for(let i=0;i<10;i++){let o=n(e,t);if(e.pos>e.start)return o}throw new Error("Stream parser failed to advance stream.")}var nT=Object.create(null),Kp=[nr.none],Mte=new A1(Kp),_O=[],QO=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])QO[n]=GO(nT,e);var b1=class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),QO)}resolve(e){return e?this.table[e]||(this.table[e]=GO(this.extra,e)):0}},Tte=new b1(nT);function WM(n,e){_O.indexOf(n)>-1||(_O.push(n),console.warn(e))}function GO(n,e){let t=null;for(let a of e.split(".")){let l=n[a]||Me[a];l?typeof l=="function"?t?t=l(t):WM(a,`Modifier ${a} used at start of tag`):t?WM(a,`Tag ${a} used as modifier`):t=l:WM(a,`Unknown highlighting tag ${a}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),o=nr.define({id:Kp.length,name:i,props:[xO({[i]:t})]});return Kp.push(o),o.id}function _te(n){let e=nr.define({id:Kp.length,name:"Document",props:[bA.add(()=>n)]});return Kp.push(e),e}var D1=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=oT(n.state,t.from);return i.line?Dte(n):i.block?Lte(n):!1};function sT(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let o=n(e,t);return o?(i(t.update(o)),!0):!1}}var Dte=sT(Pte,0);var Rte=sT(zO,0);var Lte=sT((n,e)=>zO(n,e,kte(e)),0);function oT(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var Jp=50;function Bte(n,{open:e,close:t},i,o){let a=n.sliceDoc(i-Jp,i),l=n.sliceDoc(o,o+Jp),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-e.length,h)==e&&l.slice(u,u+t.length)==t)return{open:{pos:i-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};let A,f;o-i<=2*Jp?A=f=n.sliceDoc(i,o):(A=n.sliceDoc(i,i+Jp),f=n.sliceDoc(o-Jp,o));let d=/^\s*/.exec(A)[0].length,p=/\s*$/.exec(f)[0].length,m=f.length-p-t.length;return A.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:i+d+e.length,margin:/\s/.test(A.charAt(d+e.length))?1:0},close:{pos:o-p-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function kte(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),o=t.to<=i.to?i:n.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>i.from?e[a].to=o.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:o.to})}return e}function zO(n,e,t=e.selection.ranges){let i=t.map(a=>oT(e,a.from).block);if(!i.every(a=>a))return null;let o=t.map((a,l)=>Bte(e,i[l],a.from,a.to));if(n!=2&&!o.every(a=>a))return{changes:e.changes(t.map((a,l)=>o[l]?[]:[{from:a.from,insert:i[l].open+" "},{from:a.to,insert:" "+i[l].close}]))};if(n!=1&&o.some(a=>a)){let a=[];for(let l=0,c;l<o.length;l++)if(c=o[l]){let u=i[l],{open:h,close:A}=c;a.push({from:h.pos-u.open.length,to:h.pos+h.margin},{from:A.pos-A.margin,to:A.pos+u.close.length})}return{changes:a}}return null}function Pte(n,e,t=e.selection.ranges){let i=[],o=-1;for(let{from:a,to:l}of t){let c=i.length,u=1e9,h=oT(e,a).line;if(h){for(let A=a;A<=l;){let f=e.doc.lineAt(A);if(f.from>o&&(a==l||l>f.from)){o=f.from;let d=/^\s*/.exec(f.text)[0].length,p=d==f.length,m=f.text.slice(d,d+h.length)==h?d:-1;d<f.text.length&&d<u&&(u=d),i.push({line:f,comment:m,token:h,indent:d,empty:p,single:!1})}A=f.to+1}if(u<1e9)for(let A=c;A<i.length;A++)i[A].indent<i[A].line.text.length&&(i[A].indent=u);i.length==c+1&&(i[c].single=!0)}}if(n!=2&&i.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:u,indent:h,empty:A,single:f}of i)(f||!A)&&a.push({from:c.from+h,insert:u+" "});let l=e.changes(a);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&i.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:c,token:u}of i)if(c>=0){let h=l.from+c,A=h+u.length;l.text[A-l.from]==" "&&A++,a.push({from:h,to:A})}return{changes:a}}return null}var rT=gr.define(),Nte=gr.define(),Fte=nt.define(),HO=nt.define({combine(n){return Hr(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,o)=>e(i,o)||t(i,o)})}});function Ute(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}var VO=ci.define({create(){return uu.empty},update(n,e){let t=e.state.facet(HO),i=e.annotation(rT);if(i){let u=e.docChanged?Qe.single(Ute(e.changes)):void 0,h=Ks.fromTransaction(e,u),A=i.side,f=A==0?n.undone:n.done;return h?f=E1(f,f.length,t.minDepth,h):f=YO(f,e.startState.selection),new uu(A==0?i.rest:f,A==0?f:i.rest)}let o=e.annotation(Nte);if((o=="full"||o=="before")&&(n=n.isolate()),e.annotation(pi.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let a=Ks.fromTransaction(e),l=e.annotation(pi.time),c=e.annotation(pi.userEvent);return a?n=n.addChanges(a,l,c,t,e):e.selection&&(n=n.addSelection(e.startState.selection,l,c,t.newGroupDelay)),(o=="full"||o=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new uu(n.done.map(Ks.fromJSON),n.undone.map(Ks.fromJSON))}});function WO(n={}){return[VO,HO.of(n),tt.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?L1:e.inputType=="historyRedo"?qp:null;return i?(e.preventDefault(),i(t)):!1}})]}function R1(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let o=t.field(VO,!1);if(!o)return!1;let a=o.pop(n,t,e);return a?(i(a),!0):!1}}var L1=R1(0,!1),qp=R1(1,!1),Ote=R1(0,!0),Qte=R1(1,!0);var Ks=class n{constructor(e,t,i,o,a){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new n(e.changes&&tr.fromJSON(e.changes),[],e.mapped&&va.fromJSON(e.mapped),e.startSelection&&Qe.fromJSON(e.startSelection),e.selectionsAfter.map(Qe.fromJSON))}static fromTransaction(e,t){let i=gs;for(let o of e.startState.facet(Fte)){let a=o(e);a.length&&(i=i.concat(a))}return!i.length&&e.changes.empty?null:new n(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,gs)}static selection(e){return new n(void 0,gs,void 0,void 0,e)}};function E1(n,e,t,i){let o=e+1>t+20?e-t-1:0,a=n.slice(o,e);return a.push(i),a}function Gte(n,e){let t=[],i=!1;return n.iterChangedRanges((o,a)=>t.push(o,a)),e.iterChangedRanges((o,a,l,c)=>{for(let u=0;u<t.length;){let h=t[u++],A=t[u++];c>=h&&l<=A&&(i=!0)}}),i}function zte(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function XO(n,e){return n.length?e.length?n.concat(e):n:e}var gs=[],Hte=200;function YO(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Hte));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),E1(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ks.selection([e])]}function Vte(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function iT(n,e){if(!n.length)return n;let t=n.length,i=gs;for(;t;){let o=Wte(n[t-1],e,i);if(o.changes&&!o.changes.empty||o.effects.length){let a=n.slice(0,t);return a[t-1]=o,a}else e=o.mapped,t--,i=o.selectionsAfter}return i.length?[Ks.selection(i)]:gs}function Wte(n,e,t){let i=XO(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(e)):gs,t);if(!n.changes)return Ks.selection(i);let o=n.changes.map(e),a=e.mapDesc(n.changes,!0),l=n.mapped?n.mapped.composeDesc(a):a;return new Ks(o,Ot.mapEffects(n.effects,e),l,n.startSelection.map(a),i)}var Xte=/^(input\.type|delete)($|\.)/,uu=class n{constructor(e,t,i=0,o=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new n(this.done,this.undone):this}addChanges(e,t,i,o,a){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!i||Xte.test(i))&&(!c.selectionsAfter.length&&t-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,Gte(c.changes,e.changes))||i=="input.type.compose")?l=E1(l,l.length-1,o.minDepth,new Ks(e.changes.compose(c.changes),XO(e.effects,c.effects),c.mapped,c.startSelection,gs)):l=E1(l,l.length,o.minDepth,e),new n(l,gs,t,i)}addSelection(e,t,i,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:gs;return a.length>0&&t-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&zte(a[a.length-1],e)?this:new n(YO(this.done,e),this.undone,t,i)}addMapping(e){return new n(iT(this.done,e),iT(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let o=e==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1];if(i&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:rT.of({side:e,rest:Vte(o)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=o.length==1?gs:o.slice(0,o.length-1);return a.mapped&&(l=iT(l,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:rT.of({side:e,rest:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};uu.empty=new uu(gs,gs);var ZO=[{key:"Mod-z",run:L1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:qp,preventDefault:!0},{linux:"Ctrl-Shift-z",run:qp,preventDefault:!0},{key:"Mod-u",run:Ote,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Qte,preventDefault:!0}];function IA(n,e){return Qe.create(n.ranges.map(e),n.mainIndex)}function ko(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function js({state:n,dispatch:e},t){let i=IA(n.selection,t);return i.eq(n.selection)?!1:(e(ko(n,i)),!0)}function B1(n,e){return Qe.cursor(e?n.to:n.from)}function k1(n,e){return js(n,t=>t.empty?n.moveByChar(t,e):B1(t,e))}function Hi(n){return n.textDirectionAt(n.state.selection.main.head)==cn.LTR}var KO=n=>k1(n,!Hi(n)),jO=n=>k1(n,Hi(n)),JO=n=>k1(n,!0),qO=n=>k1(n,!1);function $O(n,e){return js(n,t=>t.empty?n.moveByGroup(t,e):B1(t,e))}var aT=n=>$O(n,!Hi(n)),lT=n=>$O(n,Hi(n));function Yte(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function P1(n,e,t){let i=zi(n).resolveInner(e.head),o=t?Ct.closedBy:Ct.openedBy;for(let u=e.head;;){let h=t?i.childAfter(u):i.childBefore(u);if(!h)break;Yte(n,h,o)?i=h:u=t?h.to:h.from}let a=i.type.prop(o),l,c;return a&&(l=t?Ys(n,i.from,1):Ys(n,i.to,-1))&&l.matched?c=t?l.end.to:l.end.from:c=t?i.to:i.from,Qe.cursor(c,t?-1:1)}var Zte=n=>js(n,e=>P1(n.state,e,!Hi(n))),Kte=n=>js(n,e=>P1(n.state,e,Hi(n)));function e5(n,e){return js(n,t=>{if(!t.empty)return B1(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}var N1=n=>e5(n,!1),F1=n=>e5(n,!0);function t5(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,o;if(e){for(let a of n.state.facet(tt.scrollMargins)){let l=a(n);l?.top&&(t=Math.max(l?.top,t)),l?.bottom&&(i=Math.max(l?.bottom,i))}o=n.scrollDOM.clientHeight-t-i}else o=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,o-5)}}function n5(n,e){let t=t5(n),{state:i}=n,o=IA(i.selection,l=>l.empty?n.moveVertically(l,e,t.height):B1(l,e));if(o.eq(i.selection))return!1;let a;if(t.selfScroll){let l=n.coordsAtPos(i.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),u=c.top+t.marginTop,h=c.bottom-t.marginBottom;l&&l.top>u&&l.bottom<h&&(a=tt.scrollIntoView(o.main.head,{y:"start",yMargin:l.top-u}))}return n.dispatch(ko(i,o),{effects:a}),!0}var I1=n=>n5(n,!1),$p=n=>n5(n,!0);function Nl(n,e,t){let i=n.lineBlockAt(e.head),o=n.moveToLineBoundary(e,t);if(o.head==e.head&&o.head!=(t?i.to:i.from)&&(o=n.moveToLineBoundary(e,t,!1)),!t&&o.head==i.from&&i.length){let a=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;a&&e.head!=i.from+a&&(o=Qe.cursor(i.from+a))}return o}var jte=n=>js(n,e=>Nl(n,e,!0)),Jte=n=>js(n,e=>Nl(n,e,!1)),qte=n=>js(n,e=>Nl(n,e,!Hi(n))),$te=n=>js(n,e=>Nl(n,e,Hi(n))),cT=n=>js(n,e=>Qe.cursor(n.lineBlockAt(e.head).from,1)),uT=n=>js(n,e=>Qe.cursor(n.lineBlockAt(e.head).to,-1));function ene(n,e,t){let i=!1,o=IA(n.selection,a=>{let l=Ys(n,a.head,-1)||Ys(n,a.head,1)||a.head>0&&Ys(n,a.head-1,1)||a.head<n.doc.length&&Ys(n,a.head+1,-1);if(!l||!l.end)return a;i=!0;let c=l.start.from==a.head?l.end.to:l.end.from;return t?Qe.range(a.anchor,c):Qe.cursor(c)});return i?(e(ko(n,o)),!0):!1}var tne=({state:n,dispatch:e})=>ene(n,e,!1);function ys(n,e){let t=IA(n.state.selection,i=>{let o=e(i);return Qe.range(i.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(ko(n.state,t)),!0)}function U1(n,e){return ys(n,t=>n.moveByChar(t,e))}var i5=n=>U1(n,!Hi(n)),r5=n=>U1(n,Hi(n)),hT=n=>U1(n,!0),AT=n=>U1(n,!1);function O1(n,e){return ys(n,t=>n.moveByGroup(t,e))}var fT=n=>O1(n,!Hi(n)),dT=n=>O1(n,Hi(n)),s5=n=>O1(n,!0),o5=n=>O1(n,!1);var nne=n=>ys(n,e=>P1(n.state,e,!Hi(n))),ine=n=>ys(n,e=>P1(n.state,e,Hi(n)));function a5(n,e){return ys(n,t=>n.moveVertically(t,e))}var im=n=>a5(n,!1),rm=n=>a5(n,!0);function l5(n,e){return ys(n,t=>n.moveVertically(t,e,t5(n).height))}var M1=n=>l5(n,!1),EA=n=>l5(n,!0),rne=n=>ys(n,e=>Nl(n,e,!0)),sne=n=>ys(n,e=>Nl(n,e,!1)),one=n=>ys(n,e=>Nl(n,e,!Hi(n))),ane=n=>ys(n,e=>Nl(n,e,Hi(n))),Q1=n=>ys(n,e=>Qe.cursor(n.lineBlockAt(e.head).from)),G1=n=>ys(n,e=>Qe.cursor(n.lineBlockAt(e.head).to)),T1=({state:n,dispatch:e})=>(e(ko(n,{anchor:0})),!0),_1=({state:n,dispatch:e})=>(e(ko(n,{anchor:n.doc.length})),!0),em=({state:n,dispatch:e})=>(e(ko(n,{anchor:n.selection.main.anchor,head:0})),!0),tm=({state:n,dispatch:e})=>(e(ko(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),pT=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),lne=({state:n,dispatch:e})=>{let t=W1(n).map(({from:i,to:o})=>Qe.range(i,Math.min(o+1,n.doc.length)));return e(n.update({selection:Qe.create(t),userEvent:"select"})),!0},cne=({state:n,dispatch:e})=>{let t=IA(n.selection,i=>{var o;let a=zi(n).resolveInner(i.head,1);for(;!(a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from||!(!((o=a.parent)===null||o===void 0)&&o.parent));)a=a.parent;return Qe.range(a.to,a.from)});return e(ko(n,t)),!0},c5=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Qe.create([t.main]):t.main.empty||(i=Qe.create([Qe.cursor(t.main.head)])),i?(e(ko(n,i)),!0):!1};function z1(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,o=i.changeByRange(a=>{let{from:l,to:c}=a;if(l==c){let u=e(l);u<l?(t="delete.backward",u=S1(n,u,!1)):u>l&&(t="delete.forward",u=S1(n,u,!0)),l=Math.min(l,u),c=Math.max(c,u)}else l=S1(n,l,!1),c=S1(n,c,!0);return l==c?{range:a}:{changes:{from:l,to:c},range:Qe.cursor(l)}});return o.changes.empty?!1:(n.dispatch(i.update(o,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?tt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function S1(n,e,t){if(n instanceof tt)for(let i of n.state.facet(tt.atomicRanges).map(o=>o(n)))i.between(e,e,(o,a)=>{o<e&&a>e&&(e=t?a:o)});return e}var u5=(n,e)=>z1(n,t=>{let{state:i}=n,o=i.doc.lineAt(t),a,l;if(!e&&t>o.from&&t<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,t-o.from))){if(a[a.length-1]=="	")return t-1;let c=iu(a,i.tabSize),u=c%Zs(i)||Zs(i);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)t--;l=t}else l=li(o.text,t-o.from,e,e)+o.from,l==t&&o.number!=(e?i.doc.lines:1)&&(l+=e?1:-1);return l}),nm=n=>u5(n,!1),H1=n=>u5(n,!0),h5=(n,e)=>z1(n,t=>{let i=t,{state:o}=n,a=o.doc.lineAt(i),l=o.charCategorizer(i);for(let c=null;;){if(i==(e?a.to:a.from)){i==t&&a.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);break}let u=li(a.text,i-a.from,e)+a.from,h=a.text.slice(Math.min(i,u)-a.from,Math.max(i,u)-a.from),A=l(h);if(c!=null&&A!=c)break;(h!=" "||i!=t)&&(c=A),i=u}return i}),A5=n=>h5(n,!1),une=n=>h5(n,!0),f5=n=>z1(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),hne=n=>z1(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)});var V1=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ut.of(["",""])},range:Qe.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},mT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let o=i.from,a=n.doc.lineAt(o),l=o==a.from?o-1:li(a.text,o-a.from,!1)+a.from,c=o==a.to?o+1:li(a.text,o-a.from,!0)+a.from;return{changes:{from:l,to:c,insert:n.doc.slice(o,c).append(n.doc.slice(l,o))},range:Qe.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function W1(n){let e=[],t=-1;for(let i of n.selection.ranges){let o=n.doc.lineAt(i.from),a=n.doc.lineAt(i.to);if(!i.empty&&i.to==a.from&&(a=n.doc.lineAt(i.to-1)),t>=o.number){let l=e[e.length-1];l.to=a.to,l.ranges.push(i)}else e.push({from:o.from,to:a.to,ranges:[i]});t=a.number+1}return e}function d5(n,e,t){if(n.readOnly)return!1;let i=[],o=[];for(let a of W1(n)){if(t?a.to==n.doc.length:a.from==0)continue;let l=n.doc.lineAt(t?a.to+1:a.from-1),c=l.length+1;if(t){i.push({from:a.to,to:l.to},{from:a.from,insert:l.text+n.lineBreak});for(let u of a.ranges)o.push(Qe.range(Math.min(n.doc.length,u.anchor+c),Math.min(n.doc.length,u.head+c)))}else{i.push({from:l.from,to:a.from},{from:a.to,insert:n.lineBreak+l.text});for(let u of a.ranges)o.push(Qe.range(u.anchor-c,u.head-c))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Qe.create(o,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Ane=({state:n,dispatch:e})=>d5(n,e,!1),fne=({state:n,dispatch:e})=>d5(n,e,!0);function p5(n,e,t){if(n.readOnly)return!1;let i=[];for(let o of W1(n))t?i.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):i.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var dne=({state:n,dispatch:e})=>p5(n,e,!1),pne=({state:n,dispatch:e})=>p5(n,e,!0),mne=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(W1(e).map(({from:o,to:a})=>(o>0?o--:a<e.doc.length&&a++,{from:o,to:a}))),i=IA(e.selection,o=>n.moveVertically(o,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function gne(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=zi(n).resolveInner(e),i=t.childBefore(e),o=t.childAfter(e),a;return i&&o&&i.to<=e&&o.from>=e&&(a=i.type.prop(Ct.closedBy))&&a.indexOf(o.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}var yne=m5(!1),vne=m5(!0);function m5(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(o=>{let{from:a,to:l}=o,c=e.doc.lineAt(a),u=!n&&a==l&&gne(e,a);n&&(a=l=(l<=c.to?c:e.doc.lineAt(l)).to);let h=new cu(e,{simulateBreak:a,simulateDoubleBreak:!!u}),A=x1(h,a);for(A==null&&(A=/^\s*/.exec(e.doc.lineAt(a).text)[0].length);l<c.to&&/\s/.test(c.text[l-c.from]);)l++;u?{from:a,to:l}=u:a>c.from&&a<c.from+100&&!/\S/.test(c.text.slice(0,a))&&(a=c.from);let f=["",SA(e,A)];return u&&f.push(SA(e,h.lineIndent(c.from,-1))),{changes:{from:a,to:l,insert:Ut.of(f)},range:Qe.cursor(a+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function gT(n,e){let t=-1;return n.changeByRange(i=>{let o=[];for(let l=i.from;l<=i.to;){let c=n.doc.lineAt(l);c.number>t&&(i.empty||i.to>c.from)&&(e(c,o,i),t=c.number),l=c.to+1}let a=n.changes(o);return{changes:o,range:Qe.range(a.mapPos(i.anchor,1),a.mapPos(i.head,1))}})}var yT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new cu(n,{overrideIndentation:a=>{let l=t[a];return l??-1}}),o=gT(n,(a,l,c)=>{let u=x1(i,a.from);if(u==null)return;/\S/.test(a.text)||(u=0);let h=/^\s*/.exec(a.text)[0],A=SA(n,u);(h!=A||c.from<a.from+h.length)&&(t[a.from]=u,l.push({from:a.from,to:a.from+h.length,insert:A}))});return o.changes.empty||e(n.update(o,{userEvent:"indent"})),!0},g5=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gT(n,(t,i)=>{i.push({from:t.from,insert:n.facet(jp)})}),{userEvent:"input.indent"})),!0),y5=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gT(n,(t,i)=>{let o=/^\s*/.exec(t.text)[0];if(!o)return;let a=iu(o,n.tabSize),l=0,c=SA(n,Math.max(0,a-Zs(n)));for(;l<o.length&&l<c.length&&o.charCodeAt(l)==c.charCodeAt(l);)l++;i.push({from:t.from+l,to:t.from+o.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0);var wne=[{key:"Ctrl-b",run:KO,shift:i5,preventDefault:!0},{key:"Ctrl-f",run:jO,shift:r5},{key:"Ctrl-p",run:N1,shift:im},{key:"Ctrl-n",run:F1,shift:rm},{key:"Ctrl-a",run:cT,shift:Q1},{key:"Ctrl-e",run:uT,shift:G1},{key:"Ctrl-d",run:H1},{key:"Ctrl-h",run:nm},{key:"Ctrl-k",run:f5},{key:"Ctrl-Alt-h",run:A5},{key:"Ctrl-o",run:V1},{key:"Ctrl-t",run:mT},{key:"Ctrl-v",run:$p}],bne=[{key:"ArrowLeft",run:KO,shift:i5,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:aT,shift:fT,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:qte,shift:one,preventDefault:!0},{key:"ArrowRight",run:jO,shift:r5,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:lT,shift:dT,preventDefault:!0},{mac:"Cmd-ArrowRight",run:$te,shift:ane,preventDefault:!0},{key:"ArrowUp",run:N1,shift:im,preventDefault:!0},{mac:"Cmd-ArrowUp",run:T1,shift:em},{mac:"Ctrl-ArrowUp",run:I1,shift:M1},{key:"ArrowDown",run:F1,shift:rm,preventDefault:!0},{mac:"Cmd-ArrowDown",run:_1,shift:tm},{mac:"Ctrl-ArrowDown",run:$p,shift:EA},{key:"PageUp",run:I1,shift:M1},{key:"PageDown",run:$p,shift:EA},{key:"Home",run:Jte,shift:sne,preventDefault:!0},{key:"Mod-Home",run:T1,shift:em},{key:"End",run:jte,shift:rne,preventDefault:!0},{key:"Mod-End",run:_1,shift:tm},{key:"Enter",run:yne},{key:"Mod-a",run:pT},{key:"Backspace",run:nm,shift:nm},{key:"Delete",run:H1},{key:"Mod-Backspace",mac:"Alt-Backspace",run:A5},{key:"Mod-Delete",mac:"Alt-Delete",run:une},{mac:"Mod-Backspace",run:hne},{mac:"Mod-Delete",run:f5}].concat(wne.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),v5=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Zte,shift:nne},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Kte,shift:ine},{key:"Alt-ArrowUp",run:Ane},{key:"Shift-Alt-ArrowUp",run:dne},{key:"Alt-ArrowDown",run:fne},{key:"Shift-Alt-ArrowDown",run:pne},{key:"Escape",run:c5},{key:"Mod-Enter",run:vne},{key:"Alt-l",mac:"Ctrl-l",run:lne},{key:"Mod-i",run:cne,preventDefault:!0},{key:"Mod-[",run:y5},{key:"Mod-]",run:g5},{key:"Mod-Alt-\\",run:yT},{key:"Shift-Mod-k",run:mne},{key:"Shift-Mod-\\",run:tne},{key:"Mod-/",run:D1},{key:"Alt-A",run:Rte}].concat(bne),w5={key:"Tab",run:g5,shift:y5};function vr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];typeof o=="string"?n.setAttribute(i,o):o!=null&&(n[i]=o)}e++}for(;e<arguments.length;e++)b5(n,arguments[e]);return n}function b5(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)b5(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}var x5=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n,Z1=class{constructor(e,t,i=0,o=e.length,a,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,o),this.bufferStart=i,this.normalize=a?c=>a(x5(c)):x5,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return qn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Mp(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=er(e);let o=this.normalize(t);for(let a=0,l=i;;a++){let c=o.charCodeAt(a),u=this.match(c,l);if(a==o.length-1){if(u)return this.value=u,this;break}l==i&&a<t.length&&t.charCodeAt(a)==c&&l++}}}match(e,t){let i=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[o+1],to:t+1}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}};typeof Symbol<"u"&&(Z1.prototype[Symbol.iterator]=function(){return this});var I5={from:-1,to:-1,match:/.*/.exec("")},ST="gm"+(/x/.unicode==null?"":"u"),K1=class{constructor(e,t,i,o=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=I5,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new J1(e,t,i,o,a);this.re=new RegExp(t,ST+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let l=e.lineAt(o);this.curLineStart=l.from,this.matchPos=q1(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,o=i+t[0].length;if(this.matchPos=q1(this.text,o+(i==o?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<o||i>this.value.to)&&(!this.test||this.test(i,o,t)))return this.value={from:i,to:o,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},vT=new WeakMap,j1=class n{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let o=vT.get(e);if(!o||o.from>=i||o.to<=t){let c=new n(t,e.sliceString(t,i));return vT.set(e,c),c}if(o.from==t&&o.to==i)return o;let{text:a,from:l}=o;return l>t&&(a=e.sliceString(t,l)+a,l=t),o.to<i&&(a+=e.sliceString(o.to,i)),vT.set(e,new n(l,a)),new n(t,a.slice(t-l,i-l))}},J1=class{constructor(e,t,i,o,a){this.text=e,this.to=a,this.done=!1,this.value=I5,this.matchPos=q1(e,o),this.re=new RegExp(t,ST+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=j1.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,o=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,o,t)))return this.value={from:i,to:o,match:t},this.matchPos=q1(this.text,o+(i==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=j1.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(K1.prototype[Symbol.iterator]=J1.prototype[Symbol.iterator]=function(){return this});function Cne(n){try{return new RegExp(n,ST),!0}catch{return!1}}function q1(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}var _A=nt.define({combine(n){return Hr(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new CT(e),scrollToMatch:e=>tt.scrollIntoView(e)})}});var $1=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Cne(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new bT(this):new wT(this)}getCursor(e,t=0,i){let o=e.doc?e:on.create({doc:e});return i==null&&(i=o.doc.length),this.regexp?TA(this,o,t,i):MA(this,o,t,i)}},ew=class{constructor(e){this.spec=e}};function MA(n,e,t,i){return new Z1(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:o=>o.toLowerCase(),n.wholeWord?Sne(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Sne(n,e){return(t,i,o,a)=>((a>t||a+o.length<i)&&(a=Math.max(0,t-2),o=n.sliceString(a,Math.min(n.length,i+2))),(e(tw(o,t-a))!=mn.Word||e(nw(o,t-a))!=mn.Word)&&(e(nw(o,i-a))!=mn.Word||e(tw(o,i-a))!=mn.Word))}var wT=class extends ew{constructor(e){super(e)}nextMatch(e,t,i){let o=MA(this.spec,e,i,e.doc.length).nextOverlapping();return o.done&&(o=MA(this.spec,e,0,t).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,t,i){for(let o=i;;){let a=Math.max(t,o-1e4-this.spec.unquoted.length),l=MA(this.spec,e,a,o),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(a==t)return null;o-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=MA(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=t)return null;o.push(i.value)}return o}highlight(e,t,i,o){let a=MA(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}};function TA(n,e,t,i){return new K1(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Ene(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function tw(n,e){return n.slice(li(n,e,!1),e)}function nw(n,e){return n.slice(e,li(n,e))}function Ene(n){return(e,t,i)=>!i[0].length||(n(tw(i.input,i.index))!=mn.Word||n(nw(i.input,i.index))!=mn.Word)&&(n(nw(i.input,i.index+i[0].length))!=mn.Word||n(tw(i.input,i.index+i[0].length))!=mn.Word)}var bT=class extends ew{nextMatch(e,t,i){let o=TA(this.spec,e,i,e.doc.length).next();return o.done&&(o=TA(this.spec,e,0,t).next()),o.done?null:o.value}prevMatchInRange(e,t,i){for(let o=1;;o++){let a=Math.max(t,i-o*1e4),l=TA(this.spec,e,a,i),c=null;for(;!l.next().done;)c=l.value;if(c&&(a==t||c.from>a+10))return c;if(a==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=TA(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=t)return null;o.push(i.value)}return o}highlight(e,t,i,o){let a=TA(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}},om=Ot.define(),ET=Ot.define(),Fl=ci.define({create(n){return new sm(xT(n).create(),null)},update(n,e){for(let t of e.effects)t.is(om)?n=new sm(t.value.create(),n.panel):t.is(ET)&&(n=new sm(n.query,t.value?IT:null));return n},provide:n=>gA.from(n,e=>e.panel)});var sm=class{constructor(e,t){this.query=e,this.panel=t}},Ine=qt.mark({class:"cm-searchMatch"}),Mne=qt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Tne=mi.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Fl))}update(n){let e=n.state.field(Fl);(e!=n.startState.field(Fl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return qt.none;let{view:t}=this,i=new fs;for(let o=0,a=t.visibleRanges,l=a.length;o<l;o++){let{from:c,to:u}=a[o];for(;o<l-1&&u>a[o+1].from-2*250;)u=a[++o].to;n.highlight(t.state,c,u,(h,A)=>{let f=t.state.selection.ranges.some(d=>d.from==h&&d.to==A);i.add(h,A,f?Mne:Ine)})}return i.finish()}},{decorations:n=>n.decorations});function am(n){return e=>{let t=e.state.field(Fl,!1);return t&&t.query.spec.valid?n(e,t):iw(e)}}var C5=am((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let o=Qe.single(i.from,i.to),a=n.state.facet(_A);return n.dispatch({selection:o,effects:[MT(n,i),a.scrollToMatch(o.main,n)],userEvent:"select.search"}),T5(n),!0}),S5=am((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,o=e.prevMatch(t,i,i);if(!o)return!1;let a=Qe.single(o.from,o.to),l=n.state.facet(_A);return n.dispatch({selection:a,effects:[MT(n,o),l.scrollToMatch(a.main,n)],userEvent:"select.search"}),T5(n),!0}),_ne=am((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Qe.create(t.map(i=>Qe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)});var E5=am((n,{query:e})=>{let{state:t}=n,{from:i,to:o}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,i,i);if(!a)return!1;let l=[],c,u,h=[];if(a.from==i&&a.to==o&&(u=t.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(t,a.from,a.to),h.push(tt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),a){let A=l.length==0||l[0].from>=a.to?0:a.to-a.from-u.length;c=Qe.single(a.from-A,a.to-A),h.push(MT(n,a)),h.push(t.facet(_A).scrollToMatch(c.main,n))}return n.dispatch({changes:l,selection:c,effects:h,userEvent:"input.replace"}),!0}),Dne=am((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(o=>{let{from:a,to:l}=o;return{from:a,to:l,insert:e.getReplacement(o)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:tt.announce.of(i),userEvent:"input.replace.all"}),!0});function IT(n){return n.state.facet(_A).createPanel(n)}function xT(n,e){var t,i,o,a,l;let c=n.selection.main,u=c.empty||c.to>c.from+100?"":n.sliceDoc(c.from,c.to);if(e&&!u)return e;let h=n.facet(_A);return new $1({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:h.literal,regexp:(a=e?.regexp)!==null&&a!==void 0?a:h.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:h.wholeWord})}function M5(n){let e=LM(n,IT);return e&&e.dom.querySelector("[main-field]")}function T5(n){let e=M5(n);e&&e==n.root.activeElement&&e.select()}var iw=n=>{let e=n.state.field(Fl,!1);if(e&&e.panel){let t=M5(n);if(t&&t!=n.root.activeElement){let i=xT(n.state,e.query.spec);i.valid&&n.dispatch({effects:om.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[ET.of(!0),e?om.of(xT(n.state,e.query.spec)):Ot.appendConfig.of(Bne)]});return!0},Rne=n=>{let e=n.state.field(Fl,!1);if(!e||!e.panel)return!1;let t=LM(n,IT);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:ET.of(!1)}),!0};var CT=class{constructor(e){this.view=e;let t=this.query=e.state.field(Fl).query.spec;this.commit=this.commit.bind(this),this.searchField=vr("input",{value:t.search,placeholder:jr(e,"Find"),"aria-label":jr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=vr("input",{value:t.replace,placeholder:jr(e,"Replace"),"aria-label":jr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=vr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=vr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=vr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(o,a,l){return vr("button",{class:"cm-button",name:o,onclick:a,type:"button"},l)}this.dom=vr("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,i("next",()=>C5(e),[jr(e,"next")]),i("prev",()=>S5(e),[jr(e,"previous")]),i("select",()=>_ne(e),[jr(e,"all")]),vr("label",null,[this.caseField,jr(e,"match case")]),vr("label",null,[this.reField,jr(e,"regexp")]),vr("label",null,[this.wordField,jr(e,"by word")]),...e.state.readOnly?[]:[vr("br"),this.replaceField,i("replace",()=>E5(e),[jr(e,"replace")]),i("replaceAll",()=>Dne(e),[jr(e,"replace all")])],vr("button",{name:"close",onclick:()=>Rne(e),"aria-label":jr(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new $1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:om.of(e)}))}keydown(e){aO(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?S5:C5)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),E5(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(om)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(_A).top}};function jr(n,e){return n.state.phrase(e)}var X1=30,Y1=/[\s\.,:;?!]/;function MT(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),o=n.state.doc.lineAt(t).to,a=Math.max(i.from,e-X1),l=Math.min(o,t+X1),c=n.state.sliceDoc(a,l);if(a!=i.from){for(let u=0;u<X1;u++)if(!Y1.test(c[u+1])&&Y1.test(c[u])){c=c.slice(u);break}}if(l!=o){for(let u=c.length-1;u>c.length-X1;u--)if(!Y1.test(c[u-1])&&Y1.test(c[u])){c=c.slice(0,u);break}}return tt.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${i.number}.`)}var Lne=tt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Bne=[Fl,ds.lowest(Tne),Lne];var sw=class{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=zi(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),o=t.text.slice(i-t.from,this.pos-t.from),a=o.search(U5(e,!1));return a<0?null:{from:i+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};function _5(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function kne(n){let e=Object.create(null),t=Object.create(null);for(let{label:o}of n){e[o[0]]=!0;for(let a=1;a<o.length;a++)t[o[a]]=!0}let i=_5(e)+_5(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Pne(n){let e=n.map(o=>typeof o=="string"?{label:o}:o),[t,i]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:kne(e);return o=>{let a=o.matchBefore(i);return a||o.explicit?{from:a?a.from:o.pos,options:e,validFor:t}:null}}var ow=class{constructor(e,t,i,o){this.completion=e,this.source=t,this.match=i,this.score=o}};function Ul(n){return n.selection.main.from}function U5(n,e){var t;let{source:i}=n,o=e&&i[0]!="^",a=i[i.length-1]!="$";return!o&&!a?n:new RegExp(`${o?"^":""}(?:${i})${a?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}var Nne=gr.define();function Fne(n,e,t,i){let{main:o}=n.selection,a=t-o.from,l=i-o.from;return Object.assign(Object.assign({},n.changeByRange(c=>c!=o&&t!=i&&n.sliceDoc(c.from+a,c.from+l)!=n.sliceDoc(t,i)?{range:c}:{changes:{from:c.from+a,to:i==o.from?c.to:c.from+l,insert:e},range:Qe.cursor(c.from+a+e.length)})),{userEvent:"input.complete"})}var D5=new WeakMap;function Une(n){if(!Array.isArray(n))return n;let e=D5.get(n);return e||D5.set(n,e=Pne(n)),e}var PT=Ot.define(),lm=Ot.define(),_T=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=qn(e,t),o=er(i);this.chars.push(i);let a=e.slice(t,t+o),l=a.toUpperCase();this.folded.push(qn(l==a?a.toLowerCase():l,0)),t+=o}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:i,any:o,precise:a,byWord:l}=this;if(t.length==1){let I=qn(e,0),v=er(I),C=v==e.length?0:-100;if(I!=t[0])if(I==i[0])C+=-200;else return!1;return this.ret(C,[0,v])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=t.length,h=0;if(c<0){for(let I=0,v=Math.min(e.length,200);I<v&&h<u;){let C=qn(e,I);(C==t[h]||C==i[h])&&(o[h++]=I),I+=er(C)}if(h<u)return!1}let A=0,f=0,d=!1,p=0,m=-1,b=-1,g=/[a-z]/.test(e),w=!0;for(let I=0,v=Math.min(e.length,200),C=0;I<v&&f<u;){let E=qn(e,I);c<0&&(A<u&&E==t[A]&&(a[A++]=I),p<u&&(E==t[p]||E==i[p]?(p==0&&(m=I),b=I+1,p++):p=0));let S,M=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(S=Mp(E))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!I||M==1&&g||C==0&&M!=0)&&(t[f]==E||i[f]==E&&(d=!0)?l[f++]=I:l.length&&(w=!1)),C=M,I+=er(E)}return f==u&&l[0]==0&&w?this.result(-100+(d?-200:0),l,e):p==u&&m==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):p==u?this.ret(-200+-700-e.length,[m,b]):f==u?this.result(-100+(d?-200:0)+-700+(w?0:-1100),l,e):t.length==2?!1:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,t,i){let o=[],a=0;for(let l of t){let c=l+(this.astral?er(qn(i,l)):1);a&&o[a-1]==l?o[a-1]=c:(o[a++]=l,o[a++]=c)}return this.ret(e-i.length,o)}},wr=nt.define({combine(n){return Hr(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:One,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>R5(e(i),t(i)),optionClass:(e,t)=>i=>R5(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function R5(n,e){return n?e?n+" "+e:n:e}function One(n,e,t,i,o){let a=n.textDirection==cn.RTL,l=a,c=!1,u="top",h,A,f=e.left-o.left,d=o.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(l&&f<Math.min(p,d)?l=!1:!l&&d<Math.min(p,f)&&(l=!0),p<=(l?f:d))h=Math.max(o.top,Math.min(t.top,o.bottom-m))-e.top,A=Math.min(400,l?f:d);else{c=!0,A=Math.min(400,(a?e.right:o.right-e.left)-30);let b=o.bottom-e.bottom;b>=m||b>e.top?h=t.bottom-e.top:(u="bottom",h=e.bottom-t.top)}return{style:`${u}: ${h}px; max-width: ${A}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function Qne(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,o){let a=document.createElement("span");a.className="cm-completionLabel";let l=t.displayLabel||t.label,c=0;for(let u=0;u<o.length;){let h=o[u++],A=o[u++];h>c&&a.appendChild(document.createTextNode(l.slice(c,h)));let f=a.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(h,A))),f.className="cm-completionMatchedText",c=A}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function L5(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let o=Math.floor(e/t);return{from:o*t,to:(o+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}var DT=class{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let o=e.state.field(t),{options:a,selected:l}=o.open,c=e.state.facet(wr);this.optionContent=Qne(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=L5(a.length,l,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{for(let h=u.target,A;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(A=/-(\d+)$/.exec(h.id))&&+A[1]<a.length){this.applyCompletion(e,a[+A[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(wr).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:lm.of(null)})}),this.list=this.dom.appendChild(this.createListBox(a,o.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,i,o;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=l&&(this.updateSel(),((t=a.open)===null||t===void 0?void 0:t.disabled)!=((i=l.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((o=a.open)===null||o===void 0)&&o.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=L5(t.options.length,t.selected,this.view.state.facet(wr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:o}=i;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(i);if(!a)return;"then"in a?a.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>Xr(this.view.state,l,"completion info")):this.addInfoPane(a,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:a}=e;i.appendChild(o),this.infoDestroy=a||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)i.nodeName!="LI"||!i.id?o--:o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&zne(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let l=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:l.innerWidth,bottom:l.innerHeight}}return o.top>Math.min(a.bottom,t.bottom)-10||o.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(wr).positionInfo(this.view,t,o,i,a)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){let o=document.createElement("ul");o.id=t,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let l=i.from;l<i.to;l++){let{completion:c,match:u}=e[l],{section:h}=c;if(h){let d=typeof h=="string"?h:h.name;if(d!=a&&(l>i.from||i.from==0))if(a=d,typeof h!="string"&&h.header)o.appendChild(h.header(h));else{let p=o.appendChild(document.createElement("completion-section"));p.textContent=d}}let A=o.appendChild(document.createElement("li"));A.id=t+"-"+l,A.setAttribute("role","option");let f=this.optionClass(c);f&&(A.className=f);for(let d of this.optionContent){let p=d(c,this.view.state,u);p&&A.appendChild(p)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function Gne(n,e){return t=>new DT(t,n,e)}function zne(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function B5(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function Hne(n,e){let t=[],i=null,o=u=>{t.push(u);let{section:h}=u.completion;if(h){i||(i=[]);let A=typeof h=="string"?h:h.name;i.some(f=>f.name==A)||i.push(typeof h=="string"?{name:A}:h)}};for(let u of n)if(u.hasResult()){let h=u.result.getMatch;if(u.result.filter===!1)for(let A of u.result.options)o(new ow(A,u.source,h?h(A):[],1e9-t.length));else{let A=new _T(e.sliceDoc(u.from,u.to));for(let f of u.result.options)if(A.match(f.label)){let d=f.displayLabel?h?h(f,A.matched):[]:A.matched;o(new ow(f,u.source,d,A.score+(f.boost||0)))}}}if(i){let u=Object.create(null),h=0,A=(f,d)=>{var p,m;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(f.name<d.name?-1:1)};for(let f of i.sort(A))h-=1e5,u[f.name]=h;for(let f of t){let{section:d}=f.completion;d&&(f.score+=u[typeof d=="string"?d:d.name])}}let a=[],l=null,c=e.facet(wr).compareCompletions;for(let u of t.sort((h,A)=>A.score-h.score||c(h.completion,A.completion))){let h=u.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?a.push(u):B5(u.completion)>B5(l)&&(a[a.length-1]=u),l=u.completion}return a}var RT=class n{constructor(e,t,i,o,a,l){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=o,this.selected=a,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new n(this.options,k5(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,o,a){let l=Hne(e,t);if(!l.length)return o&&e.some(u=>u.state==1)?new n(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let c=t.facet(wr).selectOnOpen?0:-1;if(o&&o.selected!=c&&o.selected!=-1){let u=o.options[o.selected].completion;for(let h=0;h<l.length;h++)if(l[h].completion==u){c=h;break}}return new n(l,k5(i,c),{pos:e.reduce((u,h)=>h.hasResult()?Math.min(u,h.from):u,1e8),create:Gne(Jr,G5),above:a.aboveCursor},o?o.timestamp:Date.now(),c,!1)}map(e){return new n(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}},LT=class n{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new n(Xne,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(wr),a=(i.override||t.languageDataAt("autocomplete",Ul(t)).map(Une)).map(c=>(this.active.find(h=>h.source==c)||new Sa(c,this.active.some(h=>h.state!=0)?1:0)).update(e,i));a.length==this.active.length&&a.every((c,u)=>c==this.active[u])&&(a=this.active);let l=this.open;l&&e.docChanged&&(l=l.map(e.changes)),e.selection||a.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!Vne(a,this.active)?l=RT.build(a,t,this.id,l,i):l&&l.disabled&&!a.some(c=>c.state==1)&&(l=null),!l&&a.every(c=>c.state!=1)&&a.some(c=>c.hasResult())&&(a=a.map(c=>c.hasResult()?new Sa(c.source,0):c));for(let c of e.effects)c.is(Q5)&&(l=l&&l.setSelected(c.value,this.id));return a==this.active&&l==this.open?this:new n(a,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Wne}};function Vne(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let o=t==n.length,a=i==e.length;if(o||a)return o==a;if(n[t++].result!=e[i++].result)return!1}}var Wne={"aria-autocomplete":"list"};function k5(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}var Xne=[];function BT(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}var Sa=class n{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=BT(e),o=this;i?o=o.handleUserEvent(e,i,t):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new n(o.source,0));for(let a of e.effects)if(a.is(PT))o=new n(o.source,1,a.value?Ul(e.state):-1);else if(a.is(lm))o=new n(o.source,0);else if(a.is(O5))for(let l of a.value)l.source==o.source&&(o=l);return o}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new n(this.source,1)}handleChange(e){return e.changes.touchesRange(Ul(e.startState))?new n(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new n(this.source,this.state,e.mapPos(this.explicitPos))}},aw=class n extends Sa{constructor(e,t,i,o,a){super(e,2,t),this.result=i,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,t,i){var o;let a=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=Ul(e.state);if((this.explicitPos<0?c<=a:c<this.from)||c>l||t=="delete"&&Ul(e.startState)==this.from)return new Sa(this.source,t=="input"&&i.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return Yne(this.result.validFor,e.state,a,l)?new n(this.source,u,this.result,a,l):this.result.update&&(h=this.result.update(this.result,a,l,new sw(e.state,c,u>=0)))?new n(this.source,u,h,h.from,(o=h.to)!==null&&o!==void 0?o:Ul(e.state)):new Sa(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Sa(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new n(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};function Yne(n,e,t,i){if(!n)return!1;let o=e.sliceDoc(t,i);return typeof n=="function"?n(o,t,i,e):U5(n,!0).test(o)}var O5=Ot.define({map(n,e){return n.map(t=>t.map(e))}}),Q5=Ot.define(),Jr=ci.define({create(){return LT.start()},update(n,e){return n.update(e)},provide:n=>[DM.from(n,e=>e.tooltip),tt.contentAttributes.from(n,e=>e.attrs)]});function G5(n,e){let t=e.completion.apply||e.completion.label,i=n.state.field(Jr).active.find(o=>o.source==e.source);return i instanceof aw?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Fne(n.state,t,i.from,i.to)),{annotations:Nne.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}function rw(n,e="option"){return t=>{let i=t.state.field(Jr,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(wr).interactionDelay)return!1;let o=1,a;e=="page"&&(a=RM(t,i.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,c=i.open.selected>-1?i.open.selected+o*(n?1:-1):n?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),t.dispatch({effects:Q5.of(c)}),!0}}var Zne=n=>{let e=n.state.field(Jr,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(wr).interactionDelay?!1:G5(n,e.open.options[e.open.selected])},NT=n=>n.state.field(Jr,!1)?(n.dispatch({effects:PT.of(!0)}),!0):!1,Kne=n=>{let e=n.state.field(Jr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:lm.of(null)}),!0)},kT=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},P5=50,jne=50,Jne=1e3,qne=mi.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Jr).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Jr);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Jr)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!BT(i));for(let i=0;i<this.running.length;i++){let o=this.running[i];if(t||o.updates.length+n.transactions.length>jne&&Date.now()-o.time>Jne){for(let a of o.context.abortListeners)try{a()}catch(l){Xr(this.view.state,l)}o.context.abortListeners=null,this.running.splice(i--,1)}else o.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(o=>o.active.source==i.source))?setTimeout(()=>this.startUpdate(),P5):-1,this.composing!=0)for(let i of n.transactions)BT(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Jr);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Ul(e),i=new sw(e,t,n.explicitPos==t),o=new kT(n,i);this.running.push(o),Promise.resolve(n.source(i)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:lm.of(null)}),Xr(this.view.state,a)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),P5))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(wr);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let l=new aw(o.active.source,o.active.explicitPos,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:Ul(o.updates.length?o.updates[0].startState:this.view.state));for(let c of o.updates)l=l.update(c,t);if(l.hasResult()){e.push(l);continue}}let a=this.view.state.field(Jr).active.find(l=>l.source==o.active.source);if(a&&a.state==1)if(o.done==null){let l=new Sa(o.active.source,0);for(let c of o.updates)l=l.update(c,t);l.state!=1&&e.push(l)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:O5.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Jr,!1);if(e&&e.tooltip&&this.view.state.facet(wr).closeOnBlur){let t=e.open&&RM(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&this.view.dispatch({effects:lm.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:PT.of(!1)}),20),this.composing=0}}}),$ne=tt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var cm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},hu=Ot.define({map(n,e){let t=e.mapPos(n,-1,di.TrackAfter);return t??void 0}}),FT=new class extends Xs{};FT.startSide=1;FT.endSide=-1;var z5=ci.define({create(){return Vn.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=Vn.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(hu)&&(n=n.update({add:[FT.range(t.value,t.value+1)]}));return n}});function H5(){return[tie,z5]}var TT="()[]{}<>";function V5(n){for(let e=0;e<TT.length;e+=2)if(TT.charCodeAt(e)==n)return TT.charAt(e+1);return Mp(n<128?n:n+1)}function W5(n,e){return n.languageDataAt("closeBrackets",e)[0]||cm}var eie=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),tie=tt.inputHandler.of((n,e,t,i)=>{if((eie?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let o=n.state.selection.main;if(i.length>2||i.length==2&&er(qn(i,0))==1||e!=o.from||t!=o.to)return!1;let a=iie(n.state,i);return a?(n.dispatch(a),!0):!1}),nie=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=W5(n,n.selection.main.head).brackets||cm.brackets,o=null,a=n.changeByRange(l=>{if(l.empty){let c=rie(n.doc,l.head);for(let u of i)if(u==c&&lw(n.doc,l.head)==V5(qn(u,0)))return{changes:{from:l.head-u.length,to:l.head+u.length},range:Qe.cursor(l.head-u.length)}}return{range:o=l}});return o||e(n.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},X5=[{key:"Backspace",run:nie}];function iie(n,e){let t=W5(n,n.selection.main.head),i=t.brackets||cm.brackets;for(let o of i){let a=V5(qn(o,0));if(e==o)return a==o?aie(n,o,i.indexOf(o+o+o)>-1,t):sie(n,o,a,t.before||cm.before);if(e==a&&Y5(n,n.selection.main.from))return oie(n,o,a)}return null}function Y5(n,e){let t=!1;return n.field(z5).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function lw(n,e){let t=n.sliceString(e,e+2);return t.slice(0,er(qn(t,0)))}function rie(n,e){let t=n.sliceString(e-2,e);return er(qn(t,0))==t.length?t:t.slice(1)}function sie(n,e,t,i){let o=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:t,from:l.to}],effects:hu.of(l.to+e.length),range:Qe.range(l.anchor+e.length,l.head+e.length)};let c=lw(n.doc,l.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:e+t,from:l.head},effects:hu.of(l.head+e.length),range:Qe.cursor(l.head+e.length)}:{range:o=l}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function oie(n,e,t){let i=null,o=n.changeByRange(a=>a.empty&&lw(n.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:Qe.cursor(a.head+t.length)}:i={range:a});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function aie(n,e,t,i){let o=i.stringPrefixes||cm.stringPrefixes,a=null,l=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:hu.of(c.to+e.length),range:Qe.range(c.anchor+e.length,c.head+e.length)};let u=c.head,h=lw(n.doc,u),A;if(h==e){if(N5(n,u))return{changes:{insert:e+e,from:u},effects:hu.of(u+e.length),range:Qe.cursor(u+e.length)};if(Y5(n,u)){let d=t&&n.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+d.length,insert:d},range:Qe.cursor(u+d.length)}}}else{if(t&&n.sliceDoc(u-2*e.length,u)==e+e&&(A=F5(n,u-2*e.length,o))>-1&&N5(n,A))return{changes:{insert:e+e+e+e,from:u},effects:hu.of(u+e.length),range:Qe.cursor(u+e.length)};if(n.charCategorizer(u)(h)!=mn.Word&&F5(n,u,o)>-1&&!lie(n,u,e,o))return{changes:{insert:e+e,from:u},effects:hu.of(u+e.length),range:Qe.cursor(u+e.length)}}return{range:a=c}});return a?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function N5(n,e){let t=zi(n).resolveInner(e+1);return t.parent&&t.from==e}function lie(n,e,t,i){let o=zi(n).resolveInner(e,-1),a=i.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=n.sliceDoc(o.from,Math.min(o.to,o.from+t.length+a)),u=c.indexOf(t);if(!u||u>-1&&i.indexOf(c.slice(0,u))>-1){let A=o.firstChild;for(;A&&A.from==o.from&&A.to-A.from>t.length+u;){if(n.sliceDoc(A.to-t.length,A.to)==t)return!1;A=A.firstChild}return!0}let h=o.to==e&&o.parent;if(!h)break;o=h}return!1}function F5(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=mn.Word)return e;for(let o of t){let a=e-o.length;if(n.sliceDoc(a,e)==o&&i(n.sliceDoc(a-1,a))!=mn.Word)return a}return-1}function Z5(n={}){return[Jr,wr.of(n),qne,cie,$ne]}var UT=[{key:"Ctrl-Space",run:NT},{key:"Escape",run:Kne},{key:"ArrowDown",run:rw(!0)},{key:"ArrowUp",run:rw(!1)},{key:"PageDown",run:rw(!0,"page")},{key:"PageUp",run:rw(!1,"page")},{key:"Enter",run:Zne}],cie=ds.highest(Zr.computeN([wr],n=>n.facet(wr).defaultKeymap?[UT]:[]));var K5=(()=>[c1(),WO(),l1(),C1(kO,{fallback:!0}),Zr.of([...v5,...ZO])])();var uie=n=>{let e=QT(n.state);return e.line?hie(n):e.block?fie(n):!1};function OT(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let o=n(e,t);return o?(i(t.update(o)),!0):!1}}var hie=OT(mie,0);var Aie=OT(J5,0);var fie=OT((n,e)=>J5(n,e,pie(e)),0),j5=[{key:"Mod-/",run:uie},{key:"Alt-A",run:Aie}];function QT(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var um=50;function die(n,{open:e,close:t},i,o){let a=n.sliceDoc(i-um,i),l=n.sliceDoc(o,o+um),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-e.length,h)==e&&l.slice(u,u+t.length)==t)return{open:{pos:i-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};let A,f;o-i<=2*um?A=f=n.sliceDoc(i,o):(A=n.sliceDoc(i,i+um),f=n.sliceDoc(o-um,o));let d=/^\s*/.exec(A)[0].length,p=/\s*$/.exec(f)[0].length,m=f.length-p-t.length;return A.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:i+d+e.length,margin:/\s/.test(A.charAt(d+e.length))?1:0},close:{pos:o-p-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function pie(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),o=t.to<=i.to?i:n.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>i.from?e[a].to=o.to:e.push({from:i.from,to:o.to})}return e}function J5(n,e,t=e.selection.ranges){let i=t.map(a=>QT(e,a.from).block);if(!i.every(a=>a))return null;let o=t.map((a,l)=>die(e,i[l],a.from,a.to));if(n!=2&&!o.every(a=>a))return{changes:e.changes(t.map((a,l)=>o[l]?[]:[{from:a.from,insert:i[l].open+" "},{from:a.to,insert:" "+i[l].close}]))};if(n!=1&&o.some(a=>a)){let a=[];for(let l=0,c;l<o.length;l++)if(c=o[l]){let u=i[l],{open:h,close:A}=c;a.push({from:h.pos-u.open.length,to:h.pos+h.margin},{from:A.pos-A.margin,to:A.pos+u.close.length})}return{changes:a}}return null}function mie(n,e,t=e.selection.ranges){let i=[],o=-1;for(let{from:a,to:l}of t){let c=i.length,u=1e9;for(let h=a;h<=l;){let A=e.doc.lineAt(h);if(A.from>o&&(a==l||l>A.from)){o=A.from;let f=QT(e,h).line;if(!f)continue;let d=/^\s*/.exec(A.text)[0].length,p=d==A.length,m=A.text.slice(d,d+f.length)==f?d:-1;d<A.text.length&&d<u&&(u=d),i.push({line:A,comment:m,token:f,indent:d,empty:p,single:!1})}h=A.to+1}if(u<1e9)for(let h=c;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=u);i.length==c+1&&(i[c].single=!0)}if(n!=2&&i.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:u,indent:h,empty:A,single:f}of i)(f||!A)&&a.push({from:c.from+h,insert:u+" "});let l=e.changes(a);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&i.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:c,token:u}of i)if(c>=0){let h=l.from+c,A=h+u.length;l.text[A-l.from]==" "&&A++,a.push({from:h,to:A})}return{changes:a}}return null}var gie="builtin",Au="comment",q5="string",$5="symbol",hm="atom",eQ="number",tQ="bracket",yie=2;function rQ(n){for(var e={},t=n.split(" "),i=0;i<t.length;++i)e[t[i]]=!0;return e}var nQ=rQ("\u03BB case-lambda call/cc class cond-expand define-class define-values exit-handler field import inherit init-field interface let*-values let-values let/ec mixin opt-lambda override protect provide public rename require require-for-syntax syntax syntax-case syntax-error unit/sig unless when with-syntax and begin call-with-current-continuation call-with-input-file call-with-output-file case cond define define-syntax define-macro defmacro delay do dynamic-wind else for-each if lambda let let* let-syntax letrec letrec-syntax map or syntax-rules abs acos angle append apply asin assoc assq assv atan boolean? caar cadr call-with-input-file call-with-output-file call-with-values car cdddar cddddr cdr ceiling char->integer char-alphabetic? char-ci<=? char-ci<? char-ci=? char-ci>=? char-ci>? char-downcase char-lower-case? char-numeric? char-ready? char-upcase char-upper-case? char-whitespace? char<=? char<? char=? char>=? char>? char? close-input-port close-output-port complex? cons cos current-input-port current-output-port denominator display eof-object? eq? equal? eqv? eval even? exact->inexact exact? exp expt #f floor force gcd imag-part inexact->exact inexact? input-port? integer->char integer? interaction-environment lcm length list list->string list->vector list-ref list-tail list? load log magnitude make-polar make-rectangular make-string make-vector max member memq memv min modulo negative? newline not null-environment null? number->string number? numerator odd? open-input-file open-output-file output-port? pair? peek-char port? positive? procedure? quasiquote quote quotient rational? rationalize read read-char real-part real? remainder reverse round scheme-report-environment set! set-car! set-cdr! sin sqrt string string->list string->number string->symbol string-append string-ci<=? string-ci<? string-ci=? string-ci>=? string-ci>? string-copy string-fill! string-length string-ref string-set! string<=? string<? string=? string>=? string>? string? substring symbol->string symbol? #t tan transcript-off transcript-on truncate values vector vector->list vector-fill! vector-length vector-ref vector-set! with-input-from-file with-output-to-file write write-char zero?"),vie=rQ("define let letrec let* lambda define-macro defmacro let-syntax letrec-syntax let-values let*-values define-syntax syntax-rules define-values when unless");function wie(n,e,t){this.indent=n,this.type=e,this.prev=t}function GT(n,e,t){n.indentStack=new wie(e,t,n.indentStack)}function bie(n){n.indentStack=n.indentStack.prev}var xie=new RegExp(/^(?:[-+]i|[-+][01]+#*(?:\/[01]+#*)?i|[-+]?[01]+#*(?:\/[01]+#*)?@[-+]?[01]+#*(?:\/[01]+#*)?|[-+]?[01]+#*(?:\/[01]+#*)?[-+](?:[01]+#*(?:\/[01]+#*)?)?i|[-+]?[01]+#*(?:\/[01]+#*)?)(?=[()\s;"]|$)/i),Cie=new RegExp(/^(?:[-+]i|[-+][0-7]+#*(?:\/[0-7]+#*)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?@[-+]?[0-7]+#*(?:\/[0-7]+#*)?|[-+]?[0-7]+#*(?:\/[0-7]+#*)?[-+](?:[0-7]+#*(?:\/[0-7]+#*)?)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?)(?=[()\s;"]|$)/i),Sie=new RegExp(/^(?:[-+]i|[-+][\da-f]+#*(?:\/[\da-f]+#*)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?@[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?[-+](?:[\da-f]+#*(?:\/[\da-f]+#*)?)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?)(?=[()\s;"]|$)/i),Eie=new RegExp(/^(?:[-+]i|[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)i|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)@[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)?i|(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*))(?=[()\s;"]|$)/i);function Iie(n){return n.match(xie)}function Mie(n){return n.match(Cie)}function zT(n,e){return e===!0&&n.backUp(1),n.match(Eie)}function Tie(n){return n.match(Sie)}function iQ(n,e){for(var t,i=!1;(t=n.next())!=null;){if(t==e.token&&!i){e.state.mode=!1;break}i=!i&&t=="\\"}}var sQ={name:"scheme",startState:function(){return{indentStack:null,indentation:0,mode:!1,sExprComment:!1,sExprQuote:!1}},token:function(n,e){if(e.indentStack==null&&n.sol()&&(e.indentation=n.indentation()),n.eatSpace())return null;var t=null;switch(e.mode){case"string":iQ(n,{token:'"',state:e}),t=q5;break;case"symbol":iQ(n,{token:"|",state:e}),t=$5;break;case"comment":for(var i,o=!1;(i=n.next())!=null;){if(i=="#"&&o){e.mode=!1;break}o=i=="|"}t=Au;break;case"s-expr-comment":if(e.mode=!1,n.peek()=="("||n.peek()=="[")e.sExprComment=0;else{n.eatWhile(/[^\s\(\)\[\]]/),t=Au;break}default:var a=n.next();if(a=='"')e.mode="string",t=q5;else if(a=="'")n.peek()=="("||n.peek()=="["?(typeof e.sExprQuote!="number"&&(e.sExprQuote=0),t=hm):(n.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),t=hm);else if(a=="|")e.mode="symbol",t=$5;else if(a=="#")if(n.eat("|"))e.mode="comment",t=Au;else if(n.eat(/[tf]/i))t=hm;else if(n.eat(";"))e.mode="s-expr-comment",t=Au;else{var l=null,c=!1,u=!0;n.eat(/[ei]/i)?c=!0:n.backUp(1),n.match(/^#b/i)?l=Iie:n.match(/^#o/i)?l=Mie:n.match(/^#x/i)?l=Tie:n.match(/^#d/i)?l=zT:n.match(/^[-+0-9.]/,!1)?(u=!1,l=zT):c||n.eat("#"),l!=null&&(u&&!c&&n.match(/^#[ei]/i),l(n)&&(t=eQ))}else if(/^[-+0-9.]/.test(a)&&zT(n,!0))t=eQ;else if(a==";")n.skipToEnd(),t=Au;else if(a=="("||a=="["){for(var h="",A=n.column(),f;(f=n.eat(/[^\s\(\[\;\)\]]/))!=null;)h+=f;h.length>0&&vie.propertyIsEnumerable(h)?GT(e,A+yie,a):(n.eatSpace(),n.eol()||n.peek()==";"?GT(e,A+1,a):GT(e,A+n.current().length,a)),n.backUp(n.current().length-1),typeof e.sExprComment=="number"&&e.sExprComment++,typeof e.sExprQuote=="number"&&e.sExprQuote++,t=tQ}else a==")"||a=="]"?(t=tQ,e.indentStack!=null&&e.indentStack.type==(a==")"?"(":"[")&&(bie(e),typeof e.sExprComment=="number"&&--e.sExprComment==0&&(t=Au,e.sExprComment=!1),typeof e.sExprQuote=="number"&&--e.sExprQuote==0&&(t=hm,e.sExprQuote=!1))):(n.eatWhile(/[\w_\-!$%&*+\.\/:<=>?@\^~]/),nQ&&nQ.propertyIsEnumerable(n.current())?t=gie:t="variable")}return typeof e.sExprComment=="number"?Au:typeof e.sExprQuote=="number"?hm:t},indent:function(n){return n.indentStack==null?n.indentation:n.indentStack.indent},languageData:{closeBrackets:{brackets:["(","[","{",'"']},commentTokens:{line:";;"}}};var VT=class{constructor(e,t,i,o,a,l){this.left=e,this.top=t,this.height=i,this.className=o,this.letter=a,this.partial=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.color=this.partial?"transparent":"",e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.letter==e.letter&&this.height==e.height&&this.className==e.className}},WT=class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,t=[];for(let i of e.selection.ranges){let o=i==e.selection.main,a=Lie(null,this.view,i,o);a&&t.push(a)}return{cursors:t}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,o)=>i.adjust(t[o]));this.cursors=e}}destroy(){this.cursorLayer.remove()}},_ie={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696"}},Die=ds.highest(tt.theme(_ie));function Rie(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==cn.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function Lie(n,e,t,i){let o=t.head;var a=1;let l=e.coordsAtPos(o,1);if(!l)return null;let c=Rie(e),u=o<e.state.doc.length&&e.state.sliceDoc(o,o+1);(!u||u==`
`||u=="\r")&&(u="\xA0");let h=l.bottom-l.top;return new VT(l.left-c.left,l.top-c.top+h*(1-a),h*a,i?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",u,a!=1)}var Bie=tt.theme({".cm-emacsMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"5px 10px",backgroundColor:"#fffa8f",fontFamily:"monospace"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"#fffa8f"}}),kie=mi.fromClass(class{constructor(n){this.status="",this.view=n,this.em=new Am(n),this.blockCursor=new WT(n),this.view.scrollDOM.classList.add("cm-emacsMode")}update(n){n.docChanged&&(this.em.$emacsMark=null,this.em.updateMarksOnChange(n.changes)),this.blockCursor.update(n)}destroy(){this.view.scrollDOM.classList.remove("cm-emacsMode"),this.blockCursor.destroy()}},{eventHandlers:{mousedown:function(){this.em.$emacsMark=null}},provide:n=>Zr.of([{any:function(e,t){var i;return!!(!((i=e.plugin(n))===null||i===void 0)&&i.em.handleKeyboard(t))}}])}),Pie=Ot.define(),Nie=ci.define({create:()=>!1,update(n,e){for(let t of e.effects)t.is(Pie)&&(n=t.value);return n},provide:n=>gA.from(n,e=>e?Fie:null)});function Fie(n){let e=document.createElement("div");return e.className="cm-vim-panel",{top:!1,dom:e}}function aQ(n={}){return[Bie,kie,Die,Nie]}var Uie={Return:"Return",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Return",Divide:"/",Slash:"/",Multiply:"*",Subtract:"-",Minus:"-",Equal:"="},Oie={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1},HT={},Am=class n{constructor(e){this.view=e,this.$data={count:0,keyChain:"",lastCommand:""},this.$emacsMarkRing=[],this.$emacsMark=null}static bindKey(e,t){e.split("|").forEach(function(i){let o="",a=i.split(/\s+/);a.forEach(function(l,c){let u=l.split(/-(?=.)/),h=u.pop();u.length&&(o+=u.sort().join("-")+"-"),o+=h,c===a.length-1?HT[o]=t:(HT[o]="null",o+=" ")})})}static getKey(e){var t=e.code,i=e.key;if(Oie[i])return["","",""];t.length>1&&(t[0]=="N"&&(t=t.replace(/^Numpad/,"")),t[0]=="K"&&(t=t.replace(/^Key/,""))),t=Uie[t]||t,t.length==1&&(t=t.toLowerCase());var o="";return e.ctrlKey&&(o+="C-"),e.metaKey&&(o+="CMD-"),e.altKey&&(o+="M-"),e.shiftKey&&(o+="S-"),[t,o,i]}static addCommands(e){Object.keys(e).forEach(function(t){var i=e[t];typeof i=="function"&&(i={exec:i}),n.commands[t]=i})}static execCommand(e,t,i,o=1){var a=void 0;if(typeof e=="function")for(var l=0;l<o;l++)e(t.view);else if(e!=="null")if(e.exec){o>1&&e.handlesCount&&(i||(i={}),typeof i=="object"&&(i.count=o),o=1);for(var l=0;l<o;l++)a=e.exec(t,i||{})}else throw new Error("missformed command");return a}handleKeyboard(e){var t=n.getKey(e),i=this.findCommand(t);if(i&&i.command){var o=n.execCommand(i.command,this,i.args,i.count);if(o===!1)return}return i}findCommand([e,t,i]){if(e){var o=this,a=this.$data;if(!t&&e.length==1&&(o.pushEmacsMark(),a.count)){var l=new Array(a.count+1).join(i);return a.count=null,{command:"insertstring",args:l}}if(t=="C-"||a.count){var h=parseInt(e[e.length-1]);if(typeof h=="number"&&!isNaN(h))return a.count=Math.max(a.count||0,0),a.count=10*a.count+h,{command:"null"}}t&&(e=t+e),a.keyChain&&(e=a.keyChain+=" "+e);var c=HT[e];if(a.keyChain=c=="null"?e:"",!!c){if(c==="null")return{command:"null"};if(c==="universalArgument")return a.count=-4,{command:"null"};var u;if(typeof c!="string"&&(u=c.args,c.command&&(c=c.command)),(c==="insertstring"||c===V1||c===D1)&&o.pushEmacsMark(),!(typeof c=="string"&&(c=n.commands[c],!c))){!c.readOnly&&!c.isYank&&(a.lastCommand=null);var h=a.count||1;return a.count&&(a.count=0),{command:c,args:u,count:h}}}}}showCommandLine(e){console.error("TODO")}updateMarksOnChange(e){this.$emacsMark&&(this.$emacsMark=this.updateMark(this.$emacsMark,e)),this.$emacsMarkRing=this.$emacsMarkRing.map(t=>this.updateMark(t,e)).filter(Boolean)}updateMark(e,t){if(e){var i=e.map(function(o){return t.mapPos(o,1,di.TrackDel)}).filter(o=>o!=null);return i.length==0?null:i}}emacsMark(){return this.$emacsMark}setEmacsMark(e){this.$emacsMark=e}pushEmacsMark(e,t){var i=this.$emacsMark;i&&this.$emacsMarkRing.push(i),!e||t?this.setEmacsMark(e):this.$emacsMarkRing.push(e)}popEmacsMark(){var e=this.emacsMark();return e?(this.setEmacsMark(null),e):this.$emacsMarkRing.pop()}getLastEmacsMark(){return this.$emacsMark||this.$emacsMarkRing.slice(-1)[0]}getCopyText(){var e=this.view.state;return e.selection.ranges.map(t=>e.sliceDoc(t.from,t.to)).join(`
`)}clearSelection(){var e=this.view,t=e.state.selection,i=!t.ranges.some(a=>a.from!=a.to);if(i)return!1;var o=t.ranges.map(a=>Qe.range(a.head,a.head));return e.dispatch({selection:Qe.create(o,t.mainIndex)}),!0}onPaste(e){var t=this.view,i=t.state.selection,o;if(i.ranges.length>1){var a=e.split(`
`);a.length==i.ranges.length&&(o=a)}var l=0,c=t.state.changeByRange(u=>{var h=o?o[l]:e;return l++,{changes:{from:u.from,to:u.to,insert:h},range:Qe.cursor(u.from+h.length)}});t.dispatch(c)}};Am.commands={};var oQ={"Up|C-p":{command:"goOrSelect",args:[N1,im]},"Down|C-n":{command:"goOrSelect",args:[F1,rm]},"Left|C-b":{command:"goOrSelect",args:[qO,AT]},"Right|C-f":{command:"goOrSelect",args:[JO,hT]},"C-Left|M-b":{command:"goOrSelect",args:[aT,fT]},"C-Right|M-f":{command:"goOrSelect",args:[lT,dT]},"Home|C-a":{command:"goOrSelect",args:[cT,Q1]},"End|C-e":{command:"goOrSelect",args:[uT,G1]},"C-Home|S-M-,":{command:"goOrSelect",args:[T1,em]},"C-End|S-M-.":{command:"goOrSelect",args:[_1,tm]},"S-Up|S-C-p":im,"S-Down|S-C-n":rm,"S-Left|S-C-b":AT,"S-Right|S-C-f":hT,"S-C-Left|S-M-b":o5,"S-C-Right|S-M-f":s5,"S-Home|S-C-a":Q1,"S-End|S-C-e":G1,"S-C-Home":em,"S-C-End":tm,"C-l":"recenterTopBottom","M-s":"centerSelection","M-g":"gotoline","C-x C-p|C-x h":pT,"PageDown|C-v|C-Down":{command:"goOrSelect",args:[$p,EA]},"PageUp|M-v|C-Up":{command:"goOrSelect",args:[I1,EA]},"S-C-Down":EA,"S-C-Up":M1,"C-s":iw,"C-r":iw,"M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:nm,"Delete|C-d":H1,"Return|C-m":{command:"insertstring",args:`
`},"C-o":V1,"M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","M-h":"selectParagraph","M-@|M-S-2":"markWord","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-w":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":mT,"M-u":{command:"changeCase",args:{dir:1}},"M-l":{command:"changeCase",args:{dir:-1}},"C-x C-u":{command:"changeCase",args:{dir:1,region:!0}},"C-x C-l":{command:"changeCase",args:{dir:1,region:!0}},"M-/":NT,"C-u":"universalArgument","M-;":D1,"C-/|C-x u|S-C--|C-z":L1,"S-C-/|S-C-x u|C--|S-C-z":qp,"C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "},Esc:"unsetTransientMark"};for(let n in oQ)oQ[n];var Qie="#282828",Gie="#3c3836",zie="#665c54",Hie="#928374",Vie="#ebdbb2",Wie="#d5c4a1",Xie="#bdae93",Yie="#a89984",Zie="#fb4934",Kie="#b8bb26",jie="#fabd2f",AQ="#83a598",Jie="#d3869b",qie="#8ec07c",$ie="#fe8019",fQ=Qie,ZT=Gie,fm=zie,lQ=Hie,DA=Vie,ere=Wie,tre=Xie,nre=Yie,Aw=Zie,cw=Kie,dm=jie,cQ=AQ,uw=Jie,hw=qie,fw=$ie,uQ=Aw,KT=ZT,XT=KT,ire=fQ,YT=ZT,rre=KT,hQ=fw,sre=tt.theme({"&":{color:DA,backgroundColor:ire},".cm-content":{caretColor:hQ},".cm-cursor, .cm-dropCursor":{borderLeftColor:hQ},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:rre},".cm-panels":{backgroundColor:KT,color:DA},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:fQ,color:dm,outline:`1px solid ${fm}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:fm},".cm-activeLine":{backgroundColor:XT},".cm-selectionMatch":{backgroundColor:fm},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${fm}`,fontStyle:"bold"},"&.cm-focused .cm-matchingBracket":{backgroundColor:fm},".cm-gutters":{backgroundColor:ZT,color:tre,border:"none"},".cm-activeLineGutter":{backgroundColor:XT},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:YT},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:YT,borderBottomColor:YT},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:XT,color:ere}}},{dark:!0}),ore=CA.define([{tag:Me.keyword,color:Aw},{tag:[Me.name,Me.deleted,Me.character,Me.propertyName,Me.macroName],color:hw},{tag:[Me.variableName],color:cQ},{tag:[Me.function(Me.variableName)],color:cw,fontStyle:"bold"},{tag:[Me.labelName],color:DA},{tag:[Me.color,Me.constant(Me.name),Me.standard(Me.name)],color:uw},{tag:[Me.definition(Me.name),Me.separator],color:DA},{tag:[Me.brace],color:DA},{tag:[Me.annotation],color:uQ},{tag:[Me.number,Me.changed,Me.annotation,Me.modifier,Me.self,Me.namespace],color:uw},{tag:[Me.typeName,Me.className],color:dm},{tag:[Me.operator,Me.operatorKeyword],color:Aw},{tag:[Me.tagName],color:hw,fontStyle:"bold"},{tag:[Me.squareBracket],color:fw},{tag:[Me.angleBracket],color:cQ},{tag:[Me.attributeName],color:hw},{tag:[Me.regexp],color:hw},{tag:[Me.quote],color:lQ},{tag:[Me.string],color:DA},{tag:Me.link,color:nre,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[Me.url,Me.escape,Me.special(Me.string)],color:uw},{tag:[Me.meta],color:dm},{tag:[Me.comment],color:lQ,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold",color:fw},{tag:Me.emphasis,fontStyle:"italic",color:cw},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.heading,fontWeight:"bold",color:cw},{tag:[Me.heading1,Me.heading2],fontWeight:"bold",color:cw},{tag:[Me.heading3,Me.heading4],fontWeight:"bold",color:dm},{tag:[Me.heading5,Me.heading6],color:dm},{tag:[Me.atom,Me.bool,Me.special(Me.variableName)],color:uw},{tag:[Me.processingInstruction,Me.inserted],color:AQ},{tag:[Me.contentSeparator],color:Aw},{tag:Me.invalid,color:fw,borderBottom:`1px dotted ${uQ}`}]),dQ=[sre,C1(ore)];function are(n,e=n.state){let t=new Set;for(let{from:i,to:o}of n.visibleRanges){let a=i;for(;a<=o;){let l=e.doc.lineAt(a);t.has(l)||t.add(l),a=l.to+1}}return t}function jT(n){let e=n.selection.main.head;return n.doc.lineAt(e)}function pQ(n,e){let t=0;e:for(let i=0;i<n.length;i++)switch(n[i]){case" ":{t+=1;continue e}case"	":{t+=e-t%e;continue e}case"\r":continue e;default:break e}return t}var pw=nt.define({combine(n){return Hr(n,{highlightActiveBlock:!0,hideFirstIndent:!1,markerType:"fullScope"})}}),JT=class{constructor(e,t,i,o){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=i,this.markerType=o;for(let a of this.lines)this.add(a);this.state.facet(pw).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has(typeof e=="number"?e:e.number)}get(e){let t=this.map.get(typeof e=="number"?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,i){let o=!e.text.trim().length,a={line:e,col:t,level:i,empty:o};return this.map.set(a.line.number,a),a}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(e.number===1)return this.set(e,0,0);if(e.number===this.state.doc.lines){let l=this.closestNonEmpty(e,-1);return this.set(e,0,l.level)}let o=this.closestNonEmpty(e,-1),a=this.closestNonEmpty(e,1);return o.level>=a.level&&this.markerType!=="codeOnly"?this.set(e,0,o.level):o.empty&&o.level===0&&a.level!==0?this.set(e,0,0):a.level>o.level?this.set(e,0,o.level+1):this.set(e,0,a.level)}let t=pQ(e.text,this.state.tabSize),i=Math.floor(t/this.unitWidth);return this.set(e,t,i)}closestNonEmpty(e,t){let i=e.number+t;for(;t===-1?i>=1:i<=this.state.doc.lines;){if(this.has(i)){let l=this.get(i);if(!l.empty)return l}let a=this.state.doc.line(i);if(a.text.trim().length){let l=pQ(a.text,this.state.tabSize),c=Math.floor(l/this.unitWidth);return this.set(a,l,c)}i+=t}let o=this.state.doc.line(t===-1?1:this.state.doc.lines);return this.set(o,0,0)}findAndSetActiveLines(){let e=jT(this.state);if(!this.has(e))return;let t=this.get(e);if(this.has(t.line.number+1)){let a=this.get(t.line.number+1);a.level>t.level&&(t=a)}if(this.has(t.line.number-1)){let a=this.get(t.line.number-1);a.level>t.level&&(t=a)}if(t.level===0)return;t.active=t.level;let i,o;for(i=t.line.number;i>1;i--){if(!this.has(i-1))continue;let a=this.get(i-1);if(a.level<t.level)break;a.active=t.level}for(o=t.line.number;o<this.state.doc.lines;o++){if(!this.has(o+1))continue;let a=this.get(o+1);if(a.level<t.level)break;a.active=t.level}}},lre="#F0F1F2",cre="#2B3245",ure="#E4E5E6",hre="#3C445C",mQ="1px",Are=tt.baseTheme({"&light":{"--indent-marker-bg-color":lre,"--indent-marker-active-bg-color":ure},"&dark":{"--indent-marker-bg-color":cre,"--indent-marker-active-bg-color":hre},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}});function dw(n,e,t,i){return`${`repeating-linear-gradient(to right, var(${n}) 0 ${mQ}, transparent ${mQ} ${e}ch)`} ${t*e}.5ch/calc(${e*i}ch - 1px) no-repeat`}function fre(n,e,t){let{level:i,active:o}=n;if(t&&i===0)return[];let a=t?1:0,l=[];if(o!==void 0){let c=o-a-1;c>0&&l.push(dw("--indent-marker-bg-color",e,a,c)),l.push(dw("--indent-marker-active-bg-color",e,o-1,1)),o!==i&&l.push(dw("--indent-marker-bg-color",e,o,i-o))}else l.push(dw("--indent-marker-bg-color",e,a,i-a));return l.join(",")}var qT=class{constructor(e){this.view=e,this.unitWidth=Zs(e.state),this.currentLineNumber=jT(e.state).number,this.generate(e.state)}update(e){let t=Zs(e.state),i=t!==this.unitWidth;i&&(this.unitWidth=t);let o=jT(e.state).number,a=o!==this.currentLineNumber;this.currentLineNumber=o;let l=e.state.facet(pw).highlightActiveBlock&&a;(e.docChanged||e.viewportChanged||i||l)&&this.generate(e.state)}generate(e){let t=new fs,i=are(this.view,e),{hideFirstIndent:o,markerType:a}=e.facet(pw),l=new JT(i,e,this.unitWidth,a);for(let c of i){let u=l.get(c.number);if(!u?.level)continue;let h=fre(u,this.unitWidth,o);t.add(c.from,c.from,qt.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${h}`}}))}this.decorations=t.finish()}};function gQ(n={}){return[pw.of(n),Are,mi.fromClass(qT,{decorations:e=>e.decorations})]}var dre=["(include-macros)",'(apropos "def")'],fu=class{constructor(e){let t=[K5,dQ,aQ(),w1.define(sQ),Z5(),l1(),eT(),H5(),c1(),gQ(),$M(),Zr.of(j5),Zr.of(w5),Zr.of(X5),Zr.of(UT),Zr.of([{key:"Ctrl-Enter",run:yQ(this)},{key:"Alt-Enter",run:yQ(this)},{key:"Ctrl-r",run:pre},{key:"Ctrl-P",run:o=>this.prevhist()},{key:"Alt-p",run:o=>this.prevhist(),preventDefault:!0},{key:"Mod-p",run:o=>this.prevhist(),preventDefault:!0},{key:"Alt-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Mod-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Ctrl-n",run:o=>this.nexthist(),preventDefault:!0},{key:"Ctrl-c",run:bQ(this)},{key:"Ctrl-h",run:wQ(this)},{key:"Alt-h",run:wQ(this)},{key:"Ctrl-Shift-f",run:vQ()},{key:"Alt-f",run:vQ()},{key:"Alt-q",run:yT}])];this.view=new tt({state:on.create({extensions:t}),parent:e}),this.history=localStorage.getItem("history")?JSON.parse(localStorage.getItem("history")):dre||[],repl.vm||(repl.vm=new bp(this.initrcv.bind(this))),this.vm=repl.vm,e.addEventListener("ontouchmove",o=>o.preventDefault()),e.addEventListener("mouseenter",o=>this.getfocus(o)),e.addEventListener("focus",o=>this.getfocus()),mre(this);let i=document.querySelector("#repldiv");setTimeout(()=>i.classList.remove("repldiv0"),800),setTimeout(()=>i.classList.add("repldivtransition"),1e3),CQ("hidden")}initrcv(e){e.startsWith("Gambit")||e.startsWith("GAMBEXT")?this.banner=e:e.match(":sentinel:")&&(this.vm.callback=this.rcv.bind(this)),this.vm.callback=this.rcv.bind(this)}rcv(e){this.append(e)}getfocus(e){this.focus()}reparent(e){let t=this.view.state;this.view.destroy(),this.view=new tt({state:t,parent:e}),e.addEventListener("ontouchmove",i=>i.preventDefault()),e.addEventListener("mouseenter",i=>this.focus()),e.addEventListener("focus",i=>this.focus())}cfocus(){this.view.focus()}focus(){this.view.focus()}unfocus(){this.view.contentDOM.blur(),document.querySelector("#limina").focus()}insertat(e,t){let i=this.view.state.doc,o=i.length+t.length;this.view.dispatch({changes:{from:e,insert:t},selection:{anchor:o},scrollIntoView:!0})}deleterange(e,t){this.view.dispatch({changes:{from:e,to:t}})}setselection(e){this.view.dispatch({selection:{anchor:e},scrollIntoView:!0})}append(e){this.insertat(this.view.state.doc.length,e)}docstring(){return this.view.state.doc.toString()}eval(e){return this.vm.eval(e)}evalview(){let e=this.view.state.doc.toString(),t=e.lastIndexOf("> "),i=e.substring(t+2);this.append(`
`),console.warn("input.push",i),this.history.push(i),this.histcursor=this.history.length-1,localStorage.setItem("history",JSON.stringify(this.history)),this.vm.eval(i)}histcursor=0;prevhist(){this.dhist(-1)}nexthist(){this.dhist(1)}dhist(e){if(!this.history.length)return;this.histcursor+=e,this.histcursor<0&&(this.histcursor=this.history.length-1),this.histcursor==this.history.length&&(this.histcursor=0);let t=this.view.state.doc.toString(),i=t.lastIndexOf("> ");this.deleterange(i+2,t.length);let o=this.history[this.histcursor];this.insertat(i+2,o)}};function yQ(n){return e=>(n.append(" "),n.evalview(),!0)}function vQ(){return n=>(qh(null,document.body),!0)}var pre=n=>(console.warn("repl.reload"),window.lim.reload(),!0);function wQ(n){return e=>(window.lim.home(),!0)}function bQ(n){return e=>(e.contentDOM.blur(),document.querySelector("#limina").focus(),!0)}window.unfocus=bQ;function $T(n){let e=document.createElement("div");return e.classList.add("replbutton"),e.innerText=n,e}function mre(n){let e=document.querySelector("#replbuttons"),t=$T("\u1403");t.addEventListener("click",()=>n.prevhist()),e.appendChild(t),t=$T("\u1401"),t.addEventListener("click",()=>n.nexthist()),e.appendChild(t),t=$T("\u808F"),t.addEventListener("click",()=>{n.evalview(),n.focus()}),e.appendChild(t)}fu.info={version:.1,revision:1594,lastmod:"last modified: Tue Aug  1 07:55:00 2023"};function xQ(n){let e=document.createElement("div");e.setAttribute("id",n),e.class="repldiv",e.style.width="600px",e.style.height="200px",document.body.appendChild(e);let t=new fu(e);return t.div=e,t.eval('(begin (println ";;; :sentinel:"))'),t}window.newrepl=xQ;function CQ(n){let e=document.querySelectorAll(".cm-scroller");for(let t=0;t<e.length;t++)e[t].style.overflowX=n}window.hackscroller=CQ;var CD={};ho(CD,{QCell:()=>Ym,QObj:()=>KA,_viewpub:()=>yD,downloadscene:()=>mz,getcellrep:()=>Na,getobj:()=>jA,getobjbyname:()=>uz,getscene:()=>rb,getsession:()=>Az,getview:()=>Zm,killobj:()=>bD,loadscene:()=>Zae,lsrestorescene:()=>Kae,makeobj:()=>wD,model_setdata:()=>sz,model_setpos:()=>tz,model_setpqs:()=>rz,model_setquat:()=>nz,model_setscale:()=>iz,objctor:()=>cz,objname:()=>lz,objs:()=>az,objsend:()=>oz,objsetdata:()=>jG,old_viewpub:()=>Oae,reparentobj:()=>fz,restorescene:()=>pz,savescene:()=>dz,set_view_listener_hook:()=>XG,setdata:()=>vD,setpos:()=>qG,setpqs:()=>JG,setquat:()=>$G,setscale:()=>ez,startcell:()=>ib,storescene:()=>Yae,view_notify_object_changed:()=>xD,viewpub:()=>ts,vobj:()=>hz});var ro=Ao(zG());var Wwe=new Error("timeout while waiting for mutex to become available"),Xwe=new Error("mutex already locked"),Ywe=new Error("request for lock canceled");window.Croquet=ro;ro.App.root=!1;var VG={};window.dispatchfns=VG;var eb,es,Nae;window.currentcell=es;var AD=class{constructor(e,t){this.name=e,this.root=t||new Yt,this.viewobjs={},WG[e]=this,this.startsession(e)}viewobj(e){return this.viewobjs[e]}setviewobj(e,t){return this.viewobjs[e]=t}killviewobj(e){delete this.viewobjs[this.id]}add(e){this.root.add(e)}remove(e){this.root.remove(e)}buildviewobj(e){let t=o=>(o instanceof _Scheme&&(o=_foreign2host(o)),e.linkviewobj(o),o.modelsync=a=>e.modelsync(a),this.add(o),o.twin&&lim.cssscene.add(o.twin),o),i=(0,eval)(e.ctor)(e);i instanceof Promise?i.then(t):t(i)}async startsession(e){let t=(await Promise.resolve().then(()=>(uD(),cD))).config;ro.Session.join({appId:t.appId,apiKey:t.apiKey,name:t.name,password:t.pass,model:Ym,view:dD}).then(i=>{i.model.cellname=e,this.session=i,this.model=i.model,this.view=i.view,lim.root.add(this.root)})}},WG={};function Na(n){return n||(n=gD),WG[n]}var gD="c0";function ib(n){return new AD(n||gD)}window.startcell=ib;var Ym=class extends ro.Model{init(){super.init(),es=this,window.currentcell=this,this.cellname="c0",this.objmap=new Map,this.namemap=new Map,this.subscribe(this.sessionId,"view-join",this._viewjoined),this.subscribe(this.sessionId,"view-exit",this._viewexited),this.subscribe(this.sessionId,"makeobj",this._makeobj),this.subscribe(this.sessionId,"killobj",this._killobj)}objs(){return Array.from(this.objmap.values())}getobj(e){return this.objmap.get(e)}getobjbyname(e){return this.namemap.get(e)}_viewjoined(e){this.viewid=e}_viewexited(e){this.viewid=null}_makeobj([e,t,i]){let o=this.getobjbyname(e);o||(o=KA.create([e,t,this.cellname]),this.objmap.set(o.id,o),this.namemap.set(e,o));let a=Xae(i,"then die");return a&&setTimeout(()=>a(o),0),o}_killobj(e){let t=e instanceof KA?e:this.getobj(e);this.objmap.delete(e),t&&(this.namemap.delete(t.name),t._kill())}work(e){this.$worklist||(this.$worklist=[]),this.$worklist.push(e),this.future(0).dowork()}dowork(e){try{for(;this.$worklist.length;)this.$worklist.shift()()}catch(t){window.lasterr=t,console.warn("dowork err",this.$worklist&&this.$worklist.length,e)}}static types(){return{"THREE.Color":De}}};Ym.register("QCell");var KA=class extends ro.Model{init([e,t,i]){super.init(),this.cellname=i,this.data={},this.name=e,this.ctor=t,this.scale=[1,1,1],this.position=[0,0,0],this.quaternion=[0,0,0,1],this.subscribe(this.id,"setpos",this._setpos),this.subscribe(this.id,"setquat",this._setquat),this.subscribe(this.id,"setscale",this._setscale),this.subscribe(this.id,"setpqs",this._setpqs),this.subscribe(this.id,{event:"immedsetpqs",handling:"immediate"},this._setpqs),this.subscribe(this.id,"transformed",this._transformed),this.subscribe(this.id,"setdata",this._setdata),this.subscribe(this.id,"objmsg",this._objreceive),this.subscribe(this.id,"kill",this._kill),this.publish("view","syncviewobj",this.id),qobj_init_hook&&qobj_init_hook(this)}cellrep(){return this.$cellrep||(this.$cellrep=Na(this.cellname)),this.$cellrep}viewobj(){return this.cellrep().viewobj(this.id)}objsend(e,t){ts(this.id,"objmsg",[e,t])}linkviewobj(e){return this.cellrep().setviewobj(this.id,e),e.model=this,xD(this),e}buildviewobj(){return this.viewobj()||this.cellrep().buildviewobj(this),this.viewobj()}kill(){bD(this)}killviewobj(){delete this.cellrep().killviewobj(this.id)}destroy(){super.destroy()}viewobjsync(){let e=this.viewobj();e.position.set(...this.position),e.quaternion.set(...this.quaternion),e.scale.set(...this.scale)}modelsync(e){let t=this.viewobj(),i=t.position.toArray(),o=t.quaternion.toArray(),a=t.scale.toArray(),l=1e-5,c=HG(i,this.position)>l,u=Math.abs(zae(o,this.quaternion))>l*.001,h=HG(a,this.scale)>l;if(e||c||u||h){let A=[c||e?i:void 0,u?o:void 0,h?a:void 0];this.$positiondirty=0,this.$quaterniondirty=0,this.$scaledirty=0,mD(this,this.id,"setpqs",A)}}syncdirty(e){let t=this.$positiondirty,i=this.$quaterniondirty,o=this.$scaledirty;if(e||t||i||o){let a=[t||e?this.position:void 0,i||e?this.quaternion:void 0,o||e?this.scale:void 0];this.$positiondirty=0,this.$quaterniondirty=0,this.$scaledirty=0,mD(this,this.id,"setpqs",a)}}_kill(){let e=this.viewobj();this.cellrep().remove(e),e&&e.twin&&lim.cssscene.remove(e.twin),qobj_destroy_hook&&qobj_destroy_hook(this),this.killviewobj(),this.destroy()}_setdata(e){e&&e._replace?(delete e._replace,this.data=e):(this.data=this.data||{},Object.assign(this.data,e)),this.publish("view","datachanged",this.id)}$ndispatch=0;_objreceive([e,t]){error("_objreceive fuck off"),++this.$ndispatch;let i=VG[this.id]||qobj_dispatch,o=i(this.$ndispatch,this,e,t||!1)}_setpqs([e,t,i]){e&&(this.position=e,this.$positiondirty=1),t&&(this.quaternion=t,this.$quaterniondirty=1),i&&(this.scale=i,this.$scaledirty=1),this.transformed()}_setpos(e){this.position=e,this.$positiondirty=1,this.transformed()}_setquat(e){this.quaternion=e,this.$quaterniondirty=1,this.transformed()}_setscale(e){this.scale=e,this.$scaledirty=1,this.transformed()}_transformed(){this.transformed()}transformed(){try{this.publish("view","transformchanged",this.id)}catch(e){console.warn("transformed err",window.lasterr=e)}}work(e,t){es.work(()=>e(this),t||"cellwork")}};KA.register("QObj");var qw,$w;function hD(n,e){let t=Date.now(),i=new U,o=new It;return function(a){let l=n.position,c=n.quaternion,u=Date.now();u-t<51||A();function A(){let f,d,p=1e-5;l.distanceToSquared(i)>p&&(f=l.toArray(),i.copy(l)),Math.abs(c.angleTo(o))>p*.01&&(d=c.toArray(),o.copy(c)),(f||d)&&(t=u,ts(e.id,"setpqs",d?[f,d]:[f]),fD&&fD(f,d,Zm().now()))}}}var fD=(n,e,t)=>console.warn("vlh");function XG(n){fD=n}window.set_view_listener_hook=XG;var dD=class extends ro.View{constructor(e){super(e),this.model=e,es=e,eb=this,this.subscribe(this.viewId,"synced",this._synced),this.subscribe("view","datachanged",this._ondatachanged),this.subscribe("view","transformchanged",this._ontransformchanged),this.subscribe("view","syncviewobj",this._syncviewobj),this.setup(),this.model.objs().forEach(i=>i.buildviewobj());let t=window.view_init_hook;t&&t(this)}_synced(e){this.$lastsync=this.now()}detach(){super.detach();let e=window.view_detach_hook;e&&e(this)}setup(){let e=this.model.getobjbyname("f0");e&&(lim.orbitcontrols&&(qw&&lim.orbitcontrols.removeEventListener("change",qw),qw=hD(lim.camera,e),lim.orbitcontrols.addEventListener("change",qw)),lim.fpcontrols&&(lim.fpcontrols.changelistener=hD(lim.camera,e)),$w&&lim.removeEventListener("viewchange",$w),$w=hD(lim.camera,e),lim.addEventListener("viewchange",$w))}notify_object_changed(e){this.publish("view","transformchanged",e.id),this.publish("view","datachanged",e.id)}_syncviewobj(e){this.model.getobj(e).buildviewobj()}cellrep(){return this.$cellrep||(this.$cellrep=Na(this.model.cellname)),this.$cellrep}_ondatachanged(e){let t=this.cellrep().viewobj(e);if(!t)return;let i=this.model.getobj(e);t.ondatachanged&&t.ondatachanged(i),default_object_data_changed(i)}_ontransformchanged(e){let t=this.model.getobj(e),i=t.viewobj();i&&(i.position.set(...t.position),i.quaternion.set(...t.quaternion),i.scale.set(...t.scale),i.ontransformchanged&&i.ontransformchanged(t))}},pD=60/2,Fae=50;function Uae(n){let e=pD;return pD=n,e}window.setburstsize=Uae;function YG(n){let e=!1,t=[],i=function(){if(t.length&&!e){e=!0;for(let o=0;o<pD&&t.length;o++)t.shift().call();setTimeout(function(){e=!1,i()},Fae)}};return function(){t.push(n.bind(this,...arguments)),i()}}function yD(n,e,t){let i=Zm();return i&&i.publish(n,e,t)}var ZG=YG(yD);function ts(n,e,t){return ZG(n,e,t)}window.viewpub=ts;function Oae(n,e,t){return n=="view"||eb&&n==eb.viewId?(console.log("viewpub",e,n),yD(n,e,t)):ZG(n,e,t)}function KG(n,e,t,i){n.future(0).publish(e,t,i)}var mD=YG(KG);window.objpub=mD;function vD(n,e){return ts(n.id,"setdata",e)}function jG(n,e){return KG(n,"setdata",e)}function JG(n,e,t,i){ts(n.id,"setpqs",[e,t,i])}function qG(n,e){ts(n.id,"setpos",e)}function $G(n,e){ts(n.id,"setquat",e)}function ez(n,e){ts(n.id,"setscale",e)}function JA(n){return es.work(n)}window.cellwork=JA;function tz(n,e){JA(()=>{n.publish(n.id,"setpos",e),n.future(0).syncdirty()})}function nz(n,e){JA(()=>{n.publish(n.id,"setquat",e),n.future(0).syncdirty()})}function iz(n,e){JA(()=>{n.publish(n.id,"setscale",e),n.future(0).syncdirty()})}function rz(n,e,t,i){JA(()=>{n.publish(n.id,"setpqs",[e,t,i]),n.future(0).syncdirty()})}function sz(n,e){JA(()=>{n.publish(n.id,"setdata",e),n.future(0).syncdirty()})}window.model_setpos=tz;window.model_setquat=nz;window.model_setscale=iz;window.model_setdata=sz;window.model_setpqs=rz;window.setdata=vD;window.objsetdata=jG;window.setpqs=JG;window.setpos=qG;window.setquat=$G;window.setscale=ez;function oz(n,e,t){ts(n.id,"objmsg",[e,t])}window.objsend=oz;function HG(n,e){let t=n[0]-e[0],i=n[1]-e[1],o=n[2]-e[2];return t*t+i*i+o*o}function Qae(n,e,t){return Math.max(e,Math.min(t,n))}function Gae(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function zae(n,e){return 2*Math.acos(Math.abs(Qae(Gae(n,e),-1,1)))}function Hae(n){document.onkeydown=e=>{if(!(e.ctrlKey||e.altKey||e.metaKey)||e.repeat)return;let t=n[e.key];t&&t(e)}}Hae({t:()=>lim.composer=lim.composer?!1:lim.composer0invert(),z:()=>console.warn("fuck off")});function az(n){return n=n||Na().model,n.objs()}function lz(n){return n.name}function cz(n){return n.ctor}function jA(n){let e=Na().model;return e.getobjbyname(n)||e.getobj(n)||!1}function uz(n){return Na().model.getobjbyname(n)||!1}function hz(n,e){let t=jA(n);return Na(e||gD).viewobj(t.id)||!1}function Zm(){return eb||!1}function Az(){return Nae||!1}var tb={},Vae=0;window.callbacks=tb;function Wae(n){let e="cb#"+Vae++;return tb[e]=n,e}function Xae(n,e){let t=tb[n];return e&&delete tb[n],t}function wD(n,e,t){let i=Wae(t);return ts(es.sessionId,"makeobj",[n,e,i])}function bD(n){return ts(es.sessionId,"killobj",n.id)}function fz(n,e){if(!e.data)return;let t=n.data&&n.data.parentid;if(t&&jA(t)){let i=jA(t).data.children;i instanceof Set&&i.has(n.id)&&i.delete(n.id)}if(n.data.parentid=e.id,e.data.children instanceof Set||(e.data.children=new Set),e.data.children.add(n.id),e.viewobj()&&n.viewobj())return e.viewobj().add(n.viewobj())}window.reparentobj=fz;window.makeobj=wD;window.killobj=bD;window.getview=Zm;window.getcell=Na;window.getcellrep=Na;window.getsession=Az;window.objs=az;window.obj=jA;window.getobj=jA;window.getobjbyname=uz;window.objname=lz;window.objctor=cz;window.vobj=hz;function nb(n){return n=n||es,n.objs().map(e=>({name:e.name,cellname:e.cellname,ctor:e.ctor,data:e.data,position:e.position,quaternion:e.quaternion,scale:e.scale}))}function Yae(n,e){e=e||es,FB.fsuploadstring(n,JSON.stringify(nb(e)))}async function Zae(n,e){e=e||es;let t=JSON.parse(await FB.fsgetstring(n));return sb(t),t}function dz(n,e){e=e||es,localStorage.setItem(n,JSON.stringify(nb(e))),wv(n,JSON.stringify(nb(e)))}async function rb(n){return JSON.parse(await vv(n))}async function pz(n,e){e=e||es;let t=await rb(n);return sb(t),t}function Kae(n,e){e=e||es;let t=JSON.parse(localStorage.getItem(n));return sb(t),t}function sb(n){let e=(t,i,o,a)=>{ts(t.id,"setpqs",[i,o,a])};n.forEach(t=>{let i=o=>{vD(o,t.data),e(o,t.position,t.quaternion,t.scale)};wD(t.name,t.ctor,i)})}async function mz(n){let e=await rb(n),t=document.createElement("a"),i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4));console.warn(i),t.setAttribute("href",i),t.setAttribute("download",`${n}.lmnl`),t.click()}window.scenerep=nb;window.savescene=dz;window.getscene=rb;window.restorescene=pz;window.downloadscene=mz;window.rescene=sb;function xD(n){Zm().notify_object_changed(n)}window.view_notify_object_changed=xD;function jae(n){return n instanceof Object}window.isobject=jae;var kR={};ho(kR,{anon:()=>A9,auth:()=>Qa,create_user:()=>fAe,dbget:()=>h9,dbval:()=>AAe,dbwrite:()=>hAe,fbapp:()=>lf,fsfetch:()=>wAe,fsgetblob:()=>SAe,fsgetbytes:()=>CAe,fsgetstring:()=>xAe,fsgeturl:()=>vAe,fsupload:()=>mAe,fsuploadimg:()=>gAe,fsuploadstring:()=>yAe,getstorageref:()=>pAe,getstore:()=>d9,initfirebase:()=>uAe,signin:()=>dAe,signout:()=>f9});var yz=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Jae=function(n){let e=[],t=0,i=0;for(;t<n.length;){let o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){let a=n[t++],l=n[t++],c=n[t++],u=((o&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let a=n[t++],l=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|l&63)}}return e.join("")},vz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){let a=n[o],l=o+1<n.length,c=l?n[o+1]:0,u=o+2<n.length,h=u?n[o+2]:0,A=a>>2,f=(a&3)<<4|c>>4,d=(c&15)<<2|h>>6,p=h&63;u||(p=64,l||(d=64)),i.push(t[A],t[f],t[d],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yz(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jae(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){let a=t[n.charAt(o++)],c=o<n.length?t[n.charAt(o)]:0;++o;let h=o<n.length?t[n.charAt(o)]:64;++o;let f=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||c==null||h==null||f==null)throw new ED;let d=a<<2|c>>4;if(i.push(d),h!==64){let p=c<<4&240|h>>2;if(i.push(p),f!==64){let m=h<<6&192|f;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ED=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qae=function(n){let e=yz(n);return vz.encodeByteArray(e,!0)},Km=function(n){return qae(n).replace(/\./g,"")},MD=function(n){try{return vz.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ele=()=>$ae().__FIREBASE_DEFAULTS__,tle=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nle=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&MD(n[1]);return e&&JSON.parse(e)},ab=()=>{try{return ele()||tle()||nle()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TD=n=>{var e,t;return(t=(e=ab())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},wz=n=>{let e=TD(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},_D=()=>{var n;return(n=ab())===null||n===void 0?void 0:n.config},DD=n=>{var e;return(e=ab())===null||e===void 0?void 0:e[`_${n}`]};var ob=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function bz(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n),c="";return[Km(JSON.stringify(t)),Km(JSON.stringify(l)),c].join(".")}function Di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Di())}function Cz(){var n;let e=(n=ab())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sz(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ez(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iz(){let n=Di();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mz(){try{return typeof indexedDB=="object"}catch{return!1}}function Tz(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}var ile="FirebaseError",ns=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ile,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fa.prototype.create)}},Fa=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],l=a?rle(a,i):"Error",c=`${this.serviceName}: ${l} (${o}).`;return new ns(o,c,i)}};function rle(n,e){return n.replace(sle,(t,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var sle=/\{\$([^}]+)}/g;function _z(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qA(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let o of t){if(!i.includes(o))return!1;let a=n[o],l=e[o];if(gz(a)&&gz(l)){if(!qA(a,l))return!1}else if(a!==l)return!1}for(let o of i)if(!t.includes(o))return!1;return!0}function gz(n){return n!==null&&typeof n=="object"}function $A(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ef(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function tf(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Dz(n,e){let t=new ID(n,e);return t.subscribe.bind(t)}var ID=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ole(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=SD),o.error===void 0&&(o.error=SD),o.complete===void 0&&(o.complete=SD);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ole(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function SD(){}var ebe=4*60*60*1e3;function wi(n){return n&&n._delegate?n._delegate:n}var Es=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Su="[DEFAULT]";var RD=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new ob;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lle(e))try{this.getOrInitializeService({instanceIdentifier:Su})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(t);try{let a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Su){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Su){return this.instances.has(e)}getOptions(e=Su){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[a,l]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(o)}return o}onInit(e,t){var i;let o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);let l=this.instances.get(o);return l&&e(l,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ale(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Su){return this.component?this.component.multipleInstances?e:Su:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ale(n){return n===Su?void 0:n}function lle(n){return n.instantiationMode==="EAGER"}var lb=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new RD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var cle=[],nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nn||(nn={}));var ule={debug:nn.DEBUG,verbose:nn.VERBOSE,info:nn.INFO,warn:nn.WARN,error:nn.ERROR,silent:nn.SILENT},hle=nn.INFO,Ale={[nn.DEBUG]:"log",[nn.VERBOSE]:"log",[nn.INFO]:"info",[nn.WARN]:"warn",[nn.ERROR]:"error"},fle=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),o=Ale[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nf=class{constructor(e){this.name=e,this._logLevel=hle,this._logHandler=fle,this._userLogHandler=null,cle.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ule[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nn.DEBUG,...e),this._logHandler(this,nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nn.VERBOSE,...e),this._logHandler(this,nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nn.INFO,...e),this._logHandler(this,nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nn.WARN,...e),this._logHandler(this,nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nn.ERROR,...e),this._logHandler(this,nn.ERROR,...e)}};var dle=(n,e)=>e.some(t=>n instanceof t),Rz,Lz;function ple(){return Rz||(Rz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mle(){return Lz||(Lz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Bz=new WeakMap,BD=new WeakMap,kz=new WeakMap,LD=new WeakMap,PD=new WeakMap;function gle(n){let e=new Promise((t,i)=>{let o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Qo(n.result)),o()},l=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Bz.set(t,n)}).catch(()=>{}),PD.set(e,n),e}function yle(n){if(BD.has(n))return;let e=new Promise((t,i)=>{let o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),o()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});BD.set(n,e)}var kD={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return BD.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kz.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Pz(n){kD=n(kD)}function vle(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(cb(this),e,...t);return kz.set(i,e.sort?e.sort():[e]),Qo(i)}:mle().includes(n)?function(...e){return n.apply(cb(this),e),Qo(Bz.get(this))}:function(...e){return Qo(n.apply(cb(this),e))}}function wle(n){return typeof n=="function"?vle(n):(n instanceof IDBTransaction&&yle(n),dle(n,ple())?new Proxy(n,kD):n)}function Qo(n){if(n instanceof IDBRequest)return gle(n);if(LD.has(n))return LD.get(n);let e=wle(n);return e!==n&&(LD.set(n,e),PD.set(e,n)),e}var cb=n=>PD.get(n);function Fz(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){let l=indexedDB.open(n,e),c=Qo(l);return i&&l.addEventListener("upgradeneeded",u=>{i(Qo(l.result),u.oldVersion,u.newVersion,Qo(l.transaction),u)}),t&&l.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),o&&u.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var ble=["get","getKey","getAll","getAllKeys","count"],xle=["put","add","delete","clear"],ND=new Map;function Nz(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ND.get(e))return ND.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,o=xle.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ble.includes(t)))return;let a=async function(l,...c){let u=this.transaction(l,o?"readwrite":"readonly"),h=u.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),o&&u.done]))[0]};return ND.set(e,a),a}Pz(n=>({...n,get:(e,t,i)=>Nz(e,t)||n.get(e,t,i),has:(e,t)=>!!Nz(e,t)||n.has(e,t)}));var UD=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Cle(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Cle(n){let e=n.getComponent();return e?.type==="VERSION"}var OD="@firebase/app",Uz="0.9.15";var Eu=new nf("@firebase/app"),Sle="@firebase/app-compat",Ele="@firebase/analytics-compat",Ile="@firebase/analytics",Mle="@firebase/app-check-compat",Tle="@firebase/app-check",_le="@firebase/auth",Dle="@firebase/auth-compat",Rle="@firebase/database",Lle="@firebase/database-compat",Ble="@firebase/functions",kle="@firebase/functions-compat",Ple="@firebase/installations",Nle="@firebase/installations-compat",Fle="@firebase/messaging",Ule="@firebase/messaging-compat",Ole="@firebase/performance",Qle="@firebase/performance-compat",Gle="@firebase/remote-config",zle="@firebase/remote-config-compat",Hle="@firebase/storage",Vle="@firebase/storage-compat",Wle="@firebase/firestore",Xle="@firebase/firestore-compat",Yle="firebase",Zle="10.1.0";var QD="[DEFAULT]",Kle={[OD]:"fire-core",[Sle]:"fire-core-compat",[Ile]:"fire-analytics",[Ele]:"fire-analytics-compat",[Tle]:"fire-app-check",[Mle]:"fire-app-check-compat",[_le]:"fire-auth",[Dle]:"fire-auth-compat",[Rle]:"fire-rtdb",[Lle]:"fire-rtdb-compat",[Ble]:"fire-fn",[kle]:"fire-fn-compat",[Ple]:"fire-iid",[Nle]:"fire-iid-compat",[Fle]:"fire-fcm",[Ule]:"fire-fcm-compat",[Ole]:"fire-perf",[Qle]:"fire-perf-compat",[Gle]:"fire-rc",[zle]:"fire-rc-compat",[Hle]:"fire-gcs",[Vle]:"fire-gcs-compat",[Wle]:"fire-fst",[Xle]:"fire-fst-compat","fire-js":"fire-js",[Yle]:"fire-js-all"};var ub=new Map,GD=new Map;function jle(n,e){try{n.container.addComponent(e)}catch(t){Eu.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ql(n){let e=n.name;if(GD.has(e))return Eu.debug(`There were multiple attempts to register component ${e}.`),!1;GD.set(e,n);for(let t of ub.values())jle(t,n);return!0}function Jm(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}var Jle={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Jl=new Fa("app","Firebase",Jle);var zD=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jl.create("app-deleted",{appName:this._name})}};var $l=Zle;function WD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:QD,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Jl.create("bad-app-name",{appName:String(o)});if(t||(t=_D()),!t)throw Jl.create("no-options");let a=ub.get(o);if(a){if(qA(t,a.options)&&qA(i,a.config))return a;throw Jl.create("duplicate-app",{appName:o})}let l=new lb(o);for(let u of GD.values())l.addComponent(u);let c=new zD(t,i,l);return ub.set(o,c),c}function hb(n=QD){let e=ub.get(n);if(!e&&n===QD&&_D())return WD();if(!e)throw Jl.create("no-app",{appName:n});return e}function so(n,e,t){var i;let o=(i=Kle[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);let a=o.match(/\s|\//),l=e.match(/\s|\//);if(a||l){let c=[`Unable to register library "${o}" with version "${e}":`];a&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eu.warn(c.join(" "));return}ql(new Es(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}var qle="firebase-heartbeat-database",$le=1,jm="firebase-heartbeat-store",FD=null;function zz(){return FD||(FD=Fz(qle,$le,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(jm)}}}).catch(n=>{throw Jl.create("idb-open",{originalErrorMessage:n.message})})),FD}async function ece(n){try{return await(await zz()).transaction(jm).objectStore(jm).get(Hz(n))}catch(e){if(e instanceof ns)Eu.warn(e.message);else{let t=Jl.create("idb-get",{originalErrorMessage:e?.message});Eu.warn(t.message)}}}async function Oz(n,e){try{let i=(await zz()).transaction(jm,"readwrite");await i.objectStore(jm).put(e,Hz(n)),await i.done}catch(t){if(t instanceof ns)Eu.warn(t.message);else{let i=Jl.create("idb-set",{originalErrorMessage:t?.message});Eu.warn(i.message)}}}function Hz(n){return`${n.name}!${n.options.appId}`}var tce=1024,nce=30*24*60*60*1e3,HD=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new VD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qz();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=nce}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Qz(),{heartbeatsToSend:t,unsentEntries:i}=ice(this._heartbeatsCache.heartbeats),o=Km(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}};function Qz(){return new Date().toISOString().substring(0,10)}function ice(n,e=tce){let t=[],i=n.slice();for(let o of n){let a=t.find(l=>l.agent===o.agent);if(a){if(a.dates.push(o.date),Gz(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gz(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var VD=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mz()?Tz().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ece(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return Oz(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return Oz(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}};function Gz(n){return Km(JSON.stringify({version:2,heartbeats:n})).length}function rce(n){ql(new Es("platform-logger",e=>new UD(e),"PRIVATE")),ql(new Es("heartbeat",e=>new HD(e),"PRIVATE")),so(OD,Uz,n),so(OD,Uz,"esm2017"),so("fire-js","")}rce("");var sce="firebase",oce="10.1.0";so(sce,oce,"app");function Ab(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function rH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sH=rH,oH=new Fa("auth","Firebase",rH());var vb=new nf("@firebase/auth");function ace(n,...e){vb.logLevel<=nn.WARN&&vb.warn(`Auth (${$l}): ${n}`,...e)}function db(n,...e){vb.logLevel<=nn.ERROR&&vb.error(`Auth (${$l}): ${n}`,...e)}function oo(n,...e){throw uR(n,...e)}function zo(n,...e){return uR(n,...e)}function lce(n,e,t){let i=Object.assign(Object.assign({},sH()),{[e]:t});return new Fa("auth","Firebase",i).create(e,{appName:n.name})}function uR(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return oH.create(n,...e)}function rt(n,e,...t){if(!n)throw uR(e,...t)}function Go(n){let e="INTERNAL ASSERTION FAILED: "+n;throw db(e),new Error(e)}function Oa(n,e){n||Go(e)}function KD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cce(){return Vz()==="http:"||Vz()==="https:"}function Vz(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function uce(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cce()||Sz()||"connection"in navigator)?navigator.onLine:!0}function hce(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Iu=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oa(t>e,"Short delay should be less than long delay!"),this.isMobile=xz()||Ez()}get(){return uce()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hR(n,e){Oa(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wb=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ace={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var fce=new Iu(3e4,6e4);function Ri(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Sr(n,e,t,i,o={}){return aH(n,o,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});let c=$A(Object.assign({key:n.config.apiKey},l)).slice(1),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),wb.fetch()(lH(n,n.config.apiHost,t,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},a))})}async function aH(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Ace),e);try{let o=new jD(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();let l=await a.json();if("needConfirmation"in l)throw qm(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{let c=a.ok?l.errorMessage:l.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw qm(n,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw qm(n,"email-already-in-use",l);if(u==="USER_DISABLED")throw qm(n,"user-disabled",l);let A=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw lce(n,A,h);oo(n,A)}}catch(o){if(o instanceof ns)throw o;oo(n,"network-request-failed",{message:String(o)})}}async function nc(n,e,t,i,o={}){let a=await Sr(n,e,t,i,o);return"mfaPendingCredential"in a&&oo(n,"multi-factor-auth-required",{_serverResponse:a}),a}function lH(n,e,t,i){let o=`${e}${t}?${i}`;return n.config.emulator?hR(n.config,o):`${n.config.apiScheme}://${o}`}var jD=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(zo(this.auth,"network-request-failed")),fce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function qm(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let o=zo(n,e,i);return o.customData._tokenResponse=t,o}async function dce(n,e){return Sr(n,"POST","/v1/accounts:delete",e)}async function pce(n,e){return Sr(n,"POST","/v1/accounts:lookup",e)}function $m(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cH(n,e=!1){let t=wi(n),i=await t.getIdToken(e),o=AR(i);rt(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");let a=typeof o.firebase=="object"?o.firebase:void 0,l=a?.sign_in_provider;return{claims:o,token:i,authTime:$m(XD(o.auth_time)),issuedAtTime:$m(XD(o.iat)),expirationTime:$m(XD(o.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function XD(n){return Number(n)*1e3}function AR(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return db("JWT malformed, contained fewer than 3 sections"),null;try{let o=MD(t);return o?JSON.parse(o):(db("Failed to decode base64 JWT payload"),null)}catch(o){return db("Caught error parsing JWT payload as JSON",o?.toString()),null}}function mce(n){let e=AR(n);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eg(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ns&&gce(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function gce({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var JD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var bb=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$m(this.lastLoginAt),this.creationTime=$m(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function xb(n){var e;let t=n.auth,i=await n.getIdToken(),o=await eg(n,pce(t,{idToken:i}));rt(o?.users.length,t,"internal-error");let a=o.users[0];n._notifyReloadListener(a);let l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?vce(a.providerUserInfo):[],c=yce(n.providerData,l),u=n.isAnonymous,h=!(n.email&&a.passwordHash)&&!c?.length,A=u?h:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new bb(a.createdAt,a.lastLoginAt),isAnonymous:A};Object.assign(n,f)}async function uH(n){let e=wi(n);await xb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yce(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function vce(n){return n.map(e=>{var{providerId:t}=e,i=Ab(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function wce(n,e){let t=await aH(n,{},async()=>{let i=$A({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,l=lH(n,o,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",wb.fetch()(l,{method:"POST",headers:c,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}var Cb=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mce(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return rt(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:o,expiresIn:a}=await wce(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:o,expirationTime:a}=t,l=new n;return i&&(rt(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),o&&(rt(typeof o=="string","internal-error",{appName:e}),l.accessToken=o),a&&(rt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Go("not implemented")}};function ec(n,e){rt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var tg=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Ab(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new bb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){let t=await eg(this,this.stsTokenManager.getToken(this.auth,e));return rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cH(this,e)}reload(){return uH(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xb(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await eg(this,dce(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,l,c,u,h,A;let f=(i=t.displayName)!==null&&i!==void 0?i:void 0,d=(o=t.email)!==null&&o!==void 0?o:void 0,p=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,m=(l=t.photoURL)!==null&&l!==void 0?l:void 0,b=(c=t.tenantId)!==null&&c!==void 0?c:void 0,g=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,w=(h=t.createdAt)!==null&&h!==void 0?h:void 0,I=(A=t.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:v,emailVerified:C,isAnonymous:E,providerData:S,stsTokenManager:M}=t;rt(v&&M,e,"internal-error");let _=Cb.fromJSON(this.name,M);rt(typeof v=="string",e,"internal-error"),ec(f,e.name),ec(d,e.name),rt(typeof C=="boolean",e,"internal-error"),rt(typeof E=="boolean",e,"internal-error"),ec(p,e.name),ec(m,e.name),ec(b,e.name),ec(g,e.name),ec(w,e.name),ec(I,e.name);let T=new n({uid:v,auth:e,email:d,emailVerified:C,displayName:f,isAnonymous:E,photoURL:m,phoneNumber:p,tenantId:b,stsTokenManager:_,createdAt:w,lastLoginAt:I});return S&&Array.isArray(S)&&(T.providerData=S.map(D=>Object.assign({},D))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t,i=!1){let o=new Cb;o.updateFromServerResponse(t);let a=new n({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xb(a),a}};var Wz=new Map;function Ua(n){Oa(n instanceof Function,"Expected a class definition");let e=Wz.get(n);return e?(Oa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wz.set(n,e),e)}var Sb=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Sb.type="NONE";var qD=Sb;function pb(n,e,t){return`firebase:${n}:${e}:${t}`}var Eb=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:o,name:a}=this.auth;this.fullUserKey=pb(this.userKey,o.apiKey,a),this.fullPersistenceKey=pb("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?tg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n(Ua(qD),e,i);let o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h),a=o[0]||Ua(qD),l=pb(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let A=await h._get(l);if(A){let f=tg._fromJSON(e,A);h!==a&&(c=f),a=h;break}}catch{}let u=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new n(a,e,i):(a=u[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new n(a,e,i))}};function Xz(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pH(e))return"Blackberry";if(mH(e))return"Webos";if(fR(e))return"Safari";if((e.includes("chrome/")||AH(e))&&!e.includes("edge/"))return"Chrome";if(dH(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function hH(n=Di()){return/firefox\//i.test(n)}function fR(n=Di()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AH(n=Di()){return/crios\//i.test(n)}function fH(n=Di()){return/iemobile/i.test(n)}function dH(n=Di()){return/android/i.test(n)}function pH(n=Di()){return/blackberry/i.test(n)}function mH(n=Di()){return/webos/i.test(n)}function Xb(n=Di()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bce(n=Di()){var e;return Xb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xce(){return Iz()&&document.documentMode===10}function gH(n=Di()){return Xb(n)||dH(n)||mH(n)||pH(n)||/windows phone/i.test(n)||fH(n)}function Cce(){try{return!!(window&&window!==window.top)}catch{return!1}}function yH(n,e=[]){let t;switch(n){case"Browser":t=Xz(Di());break;case"Worker":t=`${Xz(Di())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$l}/${i}`}async function vH(n,e){return Sr(n,"GET","/v2/recaptchaConfig",Ri(n,e))}function Yz(n){return n!==void 0&&n.enterprise!==void 0}var Ib=class{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>t.provider==="EMAIL_PASSWORD_PROVIDER"&&t.enforcementState!=="OFF")}};function Sce(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function wH(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{let a=zo("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",Sce().appendChild(i)})}function bH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Ece="https://www.google.com/recaptcha/enterprise.js?render=",Ice="recaptcha-enterprise",Mce="NO_RECAPTCHA",Mb=class{constructor(e){this.type=Ice,this.auth=ic(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{vH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Ib(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(u=>{c(u)})})}function o(a,l,c){let u=window.grecaptcha;Yz(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(Mce)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{i(this.auth).then(c=>{if(!t&&Yz(window.grecaptcha))o(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}wH(Ece+c).then(()=>{o(c,a,l)}).catch(u=>{l(u)})}}).catch(c=>{l(c)})})}};async function Tb(n,e,t,i=!1){let o=new Mb(n),a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}let l=Object.assign({},e);return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}var $D=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=a=>new Promise((l,c)=>{try{let u=e(a);l(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};var eR=class{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _b(this),this.idTokenSubscription=new _b(this),this.beforeStateQueue=new $D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ua(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Eb.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let i=await this.assertedPersistence.getCurrentUser(),o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=o?._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===c)&&u?.user&&(o=u.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xb(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hce()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?wi(e):null;return t&&rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ua(e))})}async initializeRecaptchaConfig(){let e=await vH(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Ib(e);this.tenantId==null?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new Mb(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ua(e)||this._popupRedirectResolver;rt(t,this,"argument-error"),this.redirectPersistenceManager=await Eb.create(this,[Ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};let a=typeof t=="function"?t:t.next.bind(t),l=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(l,this,"internal-error"),l.then(()=>a(this.currentUser)),typeof t=="function"?e.addObserver(t,i,o):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ace(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ic(n){return wi(n)}var _b=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dz(t=>this.observer=t)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function xH(n,e){let t=Jm(n,"auth");if(t.isInitialized()){let o=t.getImmediate(),a=t.getOptions();if(qA(a,e??{}))return o;oo(o,"already-initialized")}return t.initialize({options:e})}function Tce(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ua);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function CH(n,e,t){let i=ic(n);rt(i._canInitEmulator,i,"emulator-config-failed"),rt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let o=!!t?.disableWarnings,a=SH(e),{host:l,port:c}=_ce(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${a}//${l}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||Dce()}function SH(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _ce(n){let e=SH(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){let a=o[1];return{host:a,port:Zz(i.substr(a.length+1))}}else{let[a,l]=i.split(":");return{host:a,port:Zz(l)}}}function Zz(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Dce(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Mu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,t){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}};async function Rce(n,e){return Sr(n,"POST","/v1/accounts:update",e)}async function YD(n,e){return nc(n,"POST","/v1/accounts:signInWithPassword",Ri(n,e))}async function Lce(n,e){return nc(n,"POST","/v1/accounts:signInWithEmailLink",Ri(n,e))}async function Bce(n,e){return nc(n,"POST","/v1/accounts:signInWithEmailLink",Ri(n,e))}var ng=class n extends Mu{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((t=e._getRecaptchaConfig())===null||t===void 0)&&t.emailPasswordEnabled){let o=await Tb(e,i,"signInWithPassword");return YD(e,o)}else return YD(e,i).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let a=await Tb(e,i,"signInWithPassword");return YD(e,a)}else return Promise.reject(o)});case"emailLink":return Lce(e,{email:this._email,oobCode:this._password});default:oo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Rce(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Bce(e,{idToken:t,email:this._email,oobCode:this._password});default:oo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function rf(n,e){return nc(n,"POST","/v1/accounts:signInWithIdp",Ri(n,e))}var kce="http://localhost",Tu=class n extends Mu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Ab(t,["providerId","signInMethod"]);if(!i||!o)return null;let l=new n(i,o);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){let t=this.buildRequest();return rf(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,rf(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,rf(e,t)}buildRequest(){let e={requestUri:kce,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$A(t)}return e}};async function Pce(n,e){return Sr(n,"POST","/v1/accounts:sendVerificationCode",Ri(n,e))}async function Nce(n,e){return nc(n,"POST","/v1/accounts:signInWithPhoneNumber",Ri(n,e))}async function Fce(n,e){let t=await nc(n,"POST","/v1/accounts:signInWithPhoneNumber",Ri(n,e));if(t.temporaryProof)throw qm(n,"account-exists-with-different-credential",t);return t}var Uce={USER_NOT_FOUND:"user-not-found"};async function Oce(n,e){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return nc(n,"POST","/v1/accounts:signInWithPhoneNumber",Ri(n,t),Uce)}var ig=class n extends Mu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Nce(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Fce(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Oce(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:o}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:a}=e;return!i&&!t&&!o&&!a?null:new n({verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:a})}};function Qce(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gce(n){let e=ef(tf(n)).link,t=e?ef(tf(e)).deep_link_id:null,i=ef(tf(n)).deep_link_id;return(i?ef(tf(i)).link:null)||i||t||e||n}var Db=class n{constructor(e){var t,i,o,a,l,c;let u=ef(tf(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,A=(i=u.oobCode)!==null&&i!==void 0?i:null,f=Qce((o=u.mode)!==null&&o!==void 0?o:null);rt(h&&A&&f,"argument-error"),this.apiKey=h,this.operation=f,this.code=A,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=u.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Gce(e);try{return new n(t)}catch{return null}}};var _u=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return ng._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let i=Db.parseLink(t);return rt(i,"argument-error"),ng._fromEmailAndCode(e,i.code,i.tenantId)}};_u.PROVIDER_ID="password";_u.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_u.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Rb=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Du=class extends Rb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var rg=class n extends Du{constructor(){super("facebook.com")}static credential(e){return Tu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};rg.FACEBOOK_SIGN_IN_METHOD="facebook.com";rg.PROVIDER_ID="facebook.com";var sg=class n extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Tu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return n.credential(t,i)}catch{return null}}};sg.GOOGLE_SIGN_IN_METHOD="google.com";sg.PROVIDER_ID="google.com";var og=class n extends Du{constructor(){super("github.com")}static credential(e){return Tu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};og.GITHUB_SIGN_IN_METHOD="github.com";og.PROVIDER_ID="github.com";var ag=class n extends Du{constructor(){super("twitter.com")}static credential(e,t){return Tu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return n.credential(t,i)}catch{return null}}};ag.TWITTER_SIGN_IN_METHOD="twitter.com";ag.PROVIDER_ID="twitter.com";async function mb(n,e){return nc(n,"POST","/v1/accounts:signUp",Ri(n,e))}var tc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){let a=await tg._fromIdTokenResponse(e,i,o),l=Kz(i);return new n({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let o=Kz(i);return new n({user:e,providerId:o,_tokenResponse:i,operationType:t})}};function Kz(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function dR(n){var e;let t=ic(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new tc({user:t.currentUser,providerId:null,operationType:"signIn"});let i=await mb(t,{returnSecureToken:!0}),o=await tc._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}var tR=class n extends ns{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new n(e,t,i,o)}};function EH(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?tR._fromErrorAndOperation(n,a,e,i):a})}async function zce(n,e,t=!1){let i=await eg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tc._forOperation(n,"link",i)}async function Hce(n,e,t=!1){let{auth:i}=n,o="reauthenticate";try{let a=await eg(n,EH(i,o,e,n),t);rt(a.idToken,i,"internal-error");let l=AR(a.idToken);rt(l,i,"internal-error");let{sub:c}=l;return rt(n.uid===c,i,"user-mismatch"),tc._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&oo(i,"user-mismatch"),a}}async function IH(n,e,t=!1){let i="signIn",o=await EH(n,i,e),a=await tc._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function MH(n,e){return IH(ic(n),e)}async function pR(n,e,t){var i;let o=ic(n),a={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},l;if(!((i=o._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){let h=await Tb(o,a,"signUpPassword");l=mb(o,h)}else l=mb(o,a).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");let A=await Tb(o,a,"signUpPassword");return mb(o,A)}else return Promise.reject(h)});let c=await l.catch(h=>Promise.reject(h)),u=await tc._fromIdTokenResponse(o,"signIn",c);return await o._updateCurrentUser(u.user),u}function mR(n,e,t){return MH(wi(n),_u.credential(e,t))}function TH(n,e,t,i){return wi(n).onIdTokenChanged(e,t,i)}function _H(n,e,t){return wi(n).beforeAuthStateChanged(e,t)}function gR(n,e,t,i){return wi(n).onAuthStateChanged(e,t,i)}function Vce(n,e){return Sr(n,"POST","/v2/accounts/mfaEnrollment:start",Ri(n,e))}function Wce(n,e){return Sr(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ri(n,e))}function Xce(n,e){return Sr(n,"POST","/v2/accounts/mfaEnrollment:start",Ri(n,e))}function Yce(n,e){return Sr(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ri(n,e))}var Lb="__sak";var Bb=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lb,"1"),this.storage.removeItem(Lb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Zce(){let n=Di();return fR(n)||Xb(n)}var Kce=1e3,jce=10,kb=class extends Bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Zce()&&Cce(),this.fallbackToPolling=gH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,u)=>{this.notifyListeners(l,u)});return}let i=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}let o=()=>{let l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);xce()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jce):o()}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Kce)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};kb.type="LOCAL";var DH=kb;var Pb=class extends Bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};Pb.type="SESSION";var yR=Pb;function Jce(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Nb=class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;let i=new n(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:i,eventType:o,data:a}=t.data,l=this.handlersMap[o];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(l).map(async h=>h(t.origin,a)),u=await Jce(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Nb.receivers=[];function vR(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var nR=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,l;return new Promise((c,u)=>{let h=vR("",20);o.port1.start();let A=setTimeout(()=>{u(new Error("unsupported_event"))},i);l={messageChannel:o,onMessage(f){let d=f;if(d.data.eventId===h)switch(d.data.status){case"ack":clearTimeout(A),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(d.data.response);break;default:clearTimeout(A),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};function Ho(){return window}function qce(n){Ho().location.href=n}function RH(){return typeof Ho().WorkerGlobalScope<"u"&&typeof Ho().importScripts=="function"}async function $ce(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eue(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tue(){return RH()?self:null}var LH="firebaseLocalStorageDb",nue=1,Fb="firebaseLocalStorage",BH="fbase_key",Ru=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Yb(n,e){return n.transaction([Fb],e?"readwrite":"readonly").objectStore(Fb)}function iue(){let n=indexedDB.deleteDatabase(LH);return new Ru(n).toPromise()}function iR(){let n=indexedDB.open(LH,nue);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Fb,{keyPath:BH})}catch(o){t(o)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(Fb)?e(i):(i.close(),await iue(),e(await iR()))})})}async function jz(n,e,t){let i=Yb(n,!0).put({[BH]:e,value:t});return new Ru(i).toPromise()}async function rue(n,e){let t=Yb(n,!1).get(e),i=await new Ru(t).toPromise();return i===void 0?null:i.value}function Jz(n,e){let t=Yb(n,!0).delete(e);return new Ru(t).toPromise()}var sue=800,oue=3,Ub=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iR(),this.db)}async _withRetries(e){let t=0;for(;;)try{let i=await this._openDb();return await e(i)}catch(i){if(t++>oue)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nb._getInstance(tue()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $ce(),!this.activeServiceWorker)return;this.sender=new nR(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eue()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await iR();return await jz(e,Lb,"1"),await Jz(e,Lb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>jz(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(i=>rue(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jz(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(o=>{let a=Yb(o,!1).getAll();return new Ru(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],i=new Set;for(let{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ub.type="LOCAL";var kH=Ub;function aue(n,e){return Sr(n,"POST","/v2/accounts/mfaSignIn:start",Ri(n,e))}function lue(n,e){return Sr(n,"POST","/v2/accounts/mfaSignIn:finalize",Ri(n,e))}function cue(n,e){return Sr(n,"POST","/v2/accounts/mfaSignIn:finalize",Ri(n,e))}var Ibe=bH("rcb"),Mbe=new Iu(3e4,6e4);var uue="recaptcha";async function hue(n,e,t){var i;let o=await t.verify();try{rt(typeof o=="string",n,"argument-error"),rt(t.type===uue,n,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){let l=a.session;if("phoneNumber"in a)return rt(l.type==="enroll",n,"internal-error"),(await Vce(n,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}})).phoneSessionInfo.sessionInfo;{rt(l.type==="signin",n,"internal-error");let c=((i=a.multiFactorHint)===null||i===void 0?void 0:i.uid)||a.multiFactorUid;return rt(c,n,"missing-multi-factor-info"),(await aue(n,{mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:o}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:l}=await Pce(n,{phoneNumber:a.phoneNumber,recaptchaToken:o});return l}}finally{t._reset()}}var lg=class n{constructor(e){this.providerId=n.PROVIDER_ID,this.auth=ic(e)}verifyPhoneNumber(e,t){return hue(this.auth,e,wi(t))}static credential(e,t){return ig._fromVerification(e,t)}static credentialFromResult(e){let t=e;return n.credentialFromTaggedObject(t)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:i}=e;return t&&i?ig._fromTokenResponse(t,i):null}};lg.PROVIDER_ID="phone";lg.PHONE_SIGN_IN_METHOD="phone";function Aue(n,e){return e?Ua(e):(rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var cg=class extends Mu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rf(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function fue(n){return IH(n.auth,new cg(n),n.bypassAuthState)}function due(n){let{auth:e,user:t}=n;return rt(t,e,"internal-error"),Hce(t,new cg(n),n.bypassAuthState)}async function pue(n){let{auth:e,user:t}=n;return rt(t,e,"internal-error"),zce(t,new cg(n),n.bypassAuthState)}var Ob=class{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fue;case"linkViaPopup":case"linkViaRedirect":return pue;case"reauthViaPopup":case"reauthViaRedirect":return due;default:oo(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var mue=new Iu(2e3,1e4);var rR=class n extends Ob{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");let e=vR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mue.get())};e()}};rR.currentPopupAction=null;var gue="pendingRedirect",gb=new Map,sR=class extends Ob{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gb.get(this.auth._key());if(!e){try{let i=await yue(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gb.set(this.auth._key(),e)}return this.bypassAuthState||gb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function yue(n,e){let t=bue(e),i=wue(n);if(!await i._isAvailable())return!1;let o=await i._get(t)==="true";return await i._remove(t),o}function vue(n,e){gb.set(n._key(),e)}function wue(n){return Ua(n._redirectPersistence)}function bue(n){return pb(gue,n.config.apiKey,n.name)}async function xue(n,e,t=!1){let i=ic(n),o=Aue(i,e),l=await new sR(i,o,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}var Cue=10*60*1e3,oR=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sue(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!PH(e)){let o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(zo(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cue&&this.cachedEventUids.clear(),this.cachedEventUids.has(qz(e))}saveEventToCache(e){this.cachedEventUids.add(qz(e)),this.lastProcessedEventTime=Date.now()}};function qz(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PH({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Sue(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PH(n);default:return!1}}async function Eue(n,e={}){return Sr(n,"GET","/v1/projects",e)}var Iue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mue=/^https?/;async function Tue(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Eue(n);for(let t of e)try{if(_ue(t))return}catch{}oo(n,"unauthorized-domain")}function _ue(n){let e=KD(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!Mue.test(t))return!1;if(Iue.test(n))return i===n;let o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Due=new Iu(3e4,6e4);function $z(){let n=Ho().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Rue(n){return new Promise((e,t)=>{var i,o,a;function l(){$z(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$z(),t(zo(n,"network-request-failed"))},timeout:Due.get()})}if(!((o=(i=Ho().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Ho().gapi)===null||a===void 0)&&a.load)l();else{let c=bH("iframefcb");return Ho()[c]=()=>{gapi.load?l():t(zo(n,"network-request-failed"))},wH(`https://apis.google.com/js/api.js?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw yb=null,e})}var yb=null;function Lue(n){return yb=yb||Rue(n),yb}var Bue=new Iu(5e3,15e3),kue="__/auth/iframe",Pue="emulator/auth/iframe",Nue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uue(n){let e=n.config;rt(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?hR(e,Pue):`https://${n.config.authDomain}/${kue}`,i={apiKey:e.apiKey,appName:n.name,v:$l},o=Fue.get(n.config.apiHost);o&&(i.eid=o);let a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${$A(i).slice(1)}`}async function Oue(n){let e=await Lue(n),t=Ho().gapi;return rt(t,n,"internal-error"),e.open({where:document.body,url:Uue(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nue,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});let l=zo(n,"network-request-failed"),c=Ho().setTimeout(()=>{a(l)},Bue.get());function u(){Ho().clearTimeout(c),o(i)}i.ping(u).then(u,()=>{a(l)})}))}var Que={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gue=500,zue=600,Hue="_blank",Vue="http://localhost",Qb=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Wue(n,e,t,i=Gue,o=zue){let a=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},Que),{width:i.toString(),height:o.toString(),top:a,left:l}),h=Di().toLowerCase();t&&(c=AH(h)?Hue:t),hH(h)&&(e=e||Vue,u.scrollbars="yes");let A=Object.entries(u).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(bce(h)&&c!=="_self")return Xue(e||"",c),new Qb(null);let f=window.open(e||"",c,A);rt(f,n,"popup-blocked");try{f.focus()}catch{}return new Qb(f)}function Xue(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Yue="__/auth/handler",Zue="emulator/auth/handler",Kue=encodeURIComponent("fac");async function eH(n,e,t,i,o,a){rt(n.config.authDomain,n,"auth-domain-config-required"),rt(n.config.apiKey,n,"invalid-api-key");let l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$l,eventId:o};if(e instanceof Rb){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",_z(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(let[A,f]of Object.entries(a||{}))l[A]=f}if(e instanceof Du){let A=e.getScopes().filter(f=>f!=="");A.length>0&&(l.scopes=A.join(","))}n.tenantId&&(l.tid=n.tenantId);let c=l;for(let A of Object.keys(c))c[A]===void 0&&delete c[A];let u=await n._getAppCheckToken(),h=u?`#${Kue}=${encodeURIComponent(u)}`:"";return`${jue(n)}?${$A(c).slice(1)}${h}`}function jue({config:n}){return n.emulator?hR(n,Zue):`https://${n.authDomain}/${Yue}`}var ZD="webStorageSupport",aR=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=xue,this._overrideRedirectResult=vue}async _openPopup(e,t,i,o){var a;Oa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");let l=await eH(e,t,i,KD(),o);return Wue(e,l,vR())}async _openRedirect(e,t,i,o){await this._originValidation(e);let a=await eH(e,t,i,KD(),o);return qce(a),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Oa(a,"If manager is not set, promise should be"),a)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Oue(e),i=new oR(e);return t.register("authEvent",o=>(rt(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ZD,{type:ZD},o=>{var a;let l=(a=o?.[0])===null||a===void 0?void 0:a[ZD];l!==void 0&&t(!!l),oo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Tue(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gH()||fR()||Xb()}},NH=aR,Gb=class{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return Go("unexpected MultiFactorSessionType")}}},lR=class n extends Gb{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,i){return Wce(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return lue(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},zb=class{constructor(){}static assertion(e){return lR._fromCredential(e)}};zb.FACTOR_ID="phone";var Hb=class{static assertionForEnrollment(e,t){return Vb._fromSecret(e,t)}static assertionForSignIn(e,t){return Vb._fromEnrollmentId(e,t)}static async generateSecret(e){var t;let i=e;rt(typeof((t=i.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");let o=await Xce(i.user.auth,{idToken:i.credential,totpEnrollmentInfo:{}});return Wb._fromStartTotpMfaEnrollmentResponse(o,i.user.auth)}};Hb.FACTOR_ID="totp";var Vb=class n extends Gb{constructor(e,t,i){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=i}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}async _finalizeEnroll(e,t,i){return rt(typeof this.secret<"u",e,"argument-error"),Yce(e,{idToken:t,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){rt(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let i={verificationCode:this.otp};return cue(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i})}},Wb=class n{constructor(e,t,i,o,a,l,c){this.sessionInfo=l,this.auth=c,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=i,this.codeIntervalSeconds=o,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var i;let o=!1;return(fb(e)||fb(t))&&(o=!0),o&&(fb(e)&&(e=((i=this.auth.currentUser)===null||i===void 0?void 0:i.email)||"unknownuser"),fb(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function fb(n){return typeof n>"u"||n?.length===0}var tH="@firebase/auth",nH="1.1.0";var cR=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Jue(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function que(n){ql(new Es("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;rt(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yH(n)},h=new eR(i,o,a,u);return Tce(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ql(new Es("auth-internal",e=>{let t=ic(e.getProvider("auth").getImmediate());return(i=>new cR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),so(tH,nH,Jue(n)),so(tH,nH,"esm2017")}var $ue=5*60,ehe=DD("authIdTokenMaxAge")||$ue,iH=null,the=n=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ehe)return;let o=t?.token;iH!==o&&(iH=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function wR(n=hb()){let e=Jm(n,"auth");if(e.isInitialized())return e.getImmediate();let t=xH(n,{popupRedirectResolver:NH,persistence:[kH,DH,yR]}),i=DD("authTokenSyncURL");if(i){let a=the(i);_H(t,a,()=>a(t.currentUser)),TH(t,l=>a(l))}let o=TD("auth");return o&&CH(t,`http://${o}`),t}que("Browser");var HH="firebasestorage.googleapis.com",VH="storageBucket",nhe=2*60*1e3,ihe=10*60*1e3;var Ln=class n extends ns{constructor(e,t,i=0){super(bR(e),`Firebase Storage: ${t} (${bR(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Bn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bn||(Bn={}));function bR(n){return"storage/"+n}function TR(){let n="An unknown error occurred, please check the error payload for server response.";return new Ln(Bn.UNKNOWN,n)}function rhe(n){return new Ln(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function she(n){return new Ln(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ohe(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ln(Bn.UNAUTHENTICATED,n)}function ahe(){return new Ln(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lhe(n){return new Ln(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function che(){return new Ln(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uhe(){return new Ln(Bn.CANCELED,"User canceled the upload/download.")}function hhe(n){return new Ln(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}function Ahe(n){return new Ln(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function fhe(){return new Ln(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VH+"' property when initializing the app?")}function dhe(){return new Ln(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function phe(){return new Ln(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mhe(n){return new Ln(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xR(n){return new Ln(Bn.INVALID_ARGUMENT,n)}function WH(){return new Ln(Bn.APP_DELETED,"The Firebase app was deleted.")}function ghe(n){return new Ln(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hg(n,e){return new Ln(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ug(n){throw new Ln(Bn.INTERNAL_ERROR,"Internal error: "+n)}var ao=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw Ahe(e)}static makeFromUrl(e,t){let i=null,o="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}let l="(/(.*))?$",c=new RegExp("^gs://"+o+l,"i"),u={bucket:1,path:3};function h(C){C.path_=decodeURIComponent(C.path)}let A="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${A}/b/${o}/o${d}`,"i"),m={bucket:1,path:3},b=t===HH?"(?:storage.googleapis.com|storage.cloud.google.com)":t,g="([^?#]*)",w=new RegExp(`^https?://${b}/${o}/${g}`,"i"),v=[{regex:c,indices:u,postModify:a},{regex:p,indices:m,postModify:h},{regex:w,indices:{bucket:1,path:2},postModify:h}];for(let C=0;C<v.length;C++){let E=v[C],S=E.regex.exec(e);if(S){let M=S[E.indices.bucket],_=S[E.indices.path];_||(_=""),i=new n(M,_),E.postModify(i);break}}if(i==null)throw hhe(e);return i}},CR=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function yhe(n,e,t){let i=1,o=null,a=null,l=!1,c=0;function u(){return c===2}let h=!1;function A(...g){h||(h=!0,e.apply(null,g))}function f(g){o=setTimeout(()=>{o=null,n(p,u())},g)}function d(){a&&clearTimeout(a)}function p(g,...w){if(h){d();return}if(g){d(),A.call(null,g,...w);return}if(u()||l){d(),A.call(null,g,...w);return}i<64&&(i*=2);let v;c===1?(c=2,v=0):v=(i+Math.random())*1e3,f(v)}let m=!1;function b(g){m||(m=!0,d(),!h&&(o!==null?(g||(c=2),clearTimeout(o),f(0)):g||(c=1)))}return f(0),a=setTimeout(()=>{l=!0,b(!0)},t),b}function vhe(n){n(!1)}function whe(n){return n!==void 0}function bhe(n){return typeof n=="object"&&!Array.isArray(n)}function _R(n){return typeof n=="string"||n instanceof String}function FH(n){return DR()&&n instanceof Blob}function DR(){return typeof Blob<"u"&&!Cz()}function UH(n,e,t,i){if(i<e)throw xR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw xR(`Invalid value for '${n}'. Expected ${t} or less.`)}function Jb(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function XH(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Lu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Lu||(Lu={}));function xhe(n,e){let t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}var SR=class{constructor(e,t,i,o,a,l,c,u,h,A,f,d=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=A,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){let e=(i,o)=>{if(o){i(!1,new sf(!1,null,!0));return}let a=this.connectionFactory_();this.pendingConnection_=a;let l=c=>{let u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;let c=a.getErrorCode()===Lu.NO_ERROR,u=a.getStatus();if(!c||xhe(u,this.additionalRetryCodes_)&&this.retry){let A=a.getErrorCode()===Lu.ABORT;i(!1,new sf(!1,null,A));return}let h=this.successCodes_.indexOf(u)!==-1;i(!0,new sf(h,a))})},t=(i,o)=>{let a=this.resolve_,l=this.reject_,c=o.connection;if(o.wasSuccessCode)try{let u=this.callback_(c,c.getResponse());whe(u)?a(u):a()}catch(u){l(u)}else if(c!==null){let u=TR();u.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,u)):l(u)}else if(o.canceled){let u=this.appDelete_?WH():uhe();l(u)}else{let u=che();l(u)}};this.canceled_?t(!1,new sf(!1,null,!0)):this.backoffId_=yhe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vhe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},sf=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function Che(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function She(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ehe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Ihe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Mhe(n,e,t,i,o,a,l=!0){let c=XH(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return Ehe(h,e),Che(h,t),She(h,a),Ihe(h,i),new SR(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,l)}function The(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _he(...n){let e=The();if(e!==void 0){let t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(DR())return new Blob(n);throw new Ln(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Dhe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Rhe(n){if(typeof atob>"u")throw mhe("base-64");return atob(n)}var lo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ag=class{constructor(e,t){this.data=e,this.contentType=t||null}};function YH(n,e){switch(n){case lo.RAW:return new Ag(ZH(e));case lo.BASE64:case lo.BASE64URL:return new Ag(KH(n,e));case lo.DATA_URL:return new Ag(Bhe(e),khe(e))}throw TR()}function ZH(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let a=i,l=n.charCodeAt(++t);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Lhe(n){let e;try{e=decodeURIComponent(n)}catch{throw hg(lo.DATA_URL,"Malformed data URL.")}return ZH(e)}function KH(n,e){switch(n){case lo.BASE64:{let o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw hg(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case lo.BASE64URL:{let o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw hg(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Rhe(e)}catch(o){throw o.message.includes("polyfill")?o:hg(n,"Invalid character found")}let i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}var Kb=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw hg(lo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=t[1]||null;i!=null&&(this.base64=Phe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function Bhe(n){let e=new Kb(n);return e.base64?KH(lo.BASE64,e.rest):Lhe(e.rest)}function khe(n){return new Kb(n).contentType}function Phe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var jb=class n{constructor(e,t){let i=0,o="";FH(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(FH(this.data_)){let i=this.data_,o=Dhe(i,e,t);return o===null?null:new n(o)}else{let i=new Uint8Array(this.data_.buffer,e,t-e);return new n(i,!0)}}static getBlob(...e){if(DR()){let t=e.map(i=>i instanceof n?i.data_:i);return new n(_he.apply(null,t))}else{let t=e.map(l=>_R(l)?YH(lo.RAW,l).data:l.data_),i=0;t.forEach(l=>{i+=l.byteLength});let o=new Uint8Array(i),a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)o[a++]=l[c]}),new n(o,!0)}}uploadData(){return this.data_}};function jH(n){let e;try{e=JSON.parse(n)}catch{return null}return bhe(e)?e:null}function Nhe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Fhe(n,e){let t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function JH(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Uhe(n,e){return e}var Li=class{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||Uhe}},Zb=null;function Ohe(n){return!_R(n)||n.length<2?n:JH(n)}function qH(){if(Zb)return Zb;let n=[];n.push(new Li("bucket")),n.push(new Li("generation")),n.push(new Li("metageneration")),n.push(new Li("name","fullPath",!0));function e(a,l){return Ohe(l)}let t=new Li("name");t.xform=e,n.push(t);function i(a,l){return l!==void 0?Number(l):l}let o=new Li("size");return o.xform=i,n.push(o),n.push(new Li("timeCreated")),n.push(new Li("updated")),n.push(new Li("md5Hash",null,!0)),n.push(new Li("cacheControl",null,!0)),n.push(new Li("contentDisposition",null,!0)),n.push(new Li("contentEncoding",null,!0)),n.push(new Li("contentLanguage",null,!0)),n.push(new Li("contentType",null,!0)),n.push(new Li("metadata","customMetadata",!0)),Zb=n,Zb}function Qhe(n,e){function t(){let i=n.bucket,o=n.fullPath,a=new ao(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Ghe(n,e,t){let i={};i.type="file";let o=t.length;for(let a=0;a<o;a++){let l=t[a];i[l.local]=l.xform(i,e[l.server])}return Qhe(i,n),i}function $H(n,e,t){let i=jH(e);return i===null?null:Ghe(n,i,t)}function zhe(n,e,t,i){let o=jH(e);if(o===null||!_R(o.downloadTokens))return null;let a=o.downloadTokens;if(a.length===0)return null;let l=encodeURIComponent;return a.split(",").map(h=>{let A=n.bucket,f=n.fullPath,d="/b/"+l(A)+"/o/"+l(f),p=Jb(d,t,i),m=XH({alt:"media",token:h});return p+m})[0]}function Hhe(n,e){let t={},i=e.length;for(let o=0;o<i;o++){let a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}var fg=class{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function e9(n){if(!n)throw TR()}function Vhe(n,e){function t(i,o){let a=$H(n,o,e);return e9(a!==null),a}return t}function Whe(n,e){function t(i,o){let a=$H(n,o,e);return e9(a!==null),zhe(a,o,n.host,n._protocol)}return t}function t9(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=ahe():o=ohe():t.getStatus()===402?o=she(n.bucket):t.getStatus()===403?o=lhe(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function n9(n){let e=t9(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=rhe(n.path)),a.serverResponse=o.serverResponse,a}return t}function i9(n,e,t){let i=e.fullServerUrl(),o=Jb(i,n.host,n._protocol)+"?alt=media",a="GET",l=n.maxOperationRetryTime,c=new fg(o,a,(u,h)=>h,l);return c.errorHandler=n9(e),t!==void 0&&(c.headers.Range=`bytes=0-${t}`,c.successCodes=[200,206]),c}function Xhe(n,e,t){let i=e.fullServerUrl(),o=Jb(i,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,c=new fg(o,a,Whe(n,t),l);return c.errorHandler=n9(e),c}function Yhe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Zhe(n,e,t){let i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Yhe(null,e)),i}function Khe(n,e,t,i,o){let a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let v="";for(let C=0;C<2;C++)v=v+Math.random().toString().slice(2);return v}let u=c();l["Content-Type"]="multipart/related; boundary="+u;let h=Zhe(e,i,o),A=Hhe(h,t),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+A+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,d=`\r
--`+u+"--",p=jb.getBlob(f,i,d);if(p===null)throw dhe();let m={name:h.fullPath},b=Jb(a,n.host,n._protocol),g="POST",w=n.maxUploadRetryTime,I=new fg(b,g,Vhe(n,t),w);return I.urlParams=m,I.headers=l,I.body=p.uploadData(),I.errorHandler=t9(e),I}var Nxe=256*1024;var OH=null,dg=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o){if(this.sent_)throw ug("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ug("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ug("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ug("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ug("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},ER=class extends dg{initXhr(){this.xhr_.responseType="text"}};function r9(){return OH?OH():new ER}var IR=class extends dg{initXhr(){this.xhr_.responseType="arraybuffer"}};function jhe(){return new IR}var MR=class extends dg{initXhr(){this.xhr_.responseType="blob"}};function Jhe(){return new MR}var of=class n{constructor(e,t){this._service=e,t instanceof ao?this._location=t:this._location=ao.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ao(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JH(this._location.path)}get storage(){return this._service}get parent(){let e=Nhe(this._location.path);if(e===null)return null;let t=new ao(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ghe(e)}};function qhe(n,e){n._throwIfRoot("getBytes");let t=i9(n.storage,n._location,e);return n.storage.makeRequestWithTokens(t,jhe).then(i=>e!==void 0?i.slice(0,e):i)}function $he(n,e){n._throwIfRoot("getBlob");let t=i9(n.storage,n._location,e);return n.storage.makeRequestWithTokens(t,Jhe).then(i=>e!==void 0?i.slice(0,e):i)}function s9(n,e,t){n._throwIfRoot("uploadBytes");let i=Khe(n.storage,n._location,qH(),new jb(e,!0),t);return n.storage.makeRequestWithTokens(i,r9).then(o=>({metadata:o,ref:n}))}function eAe(n,e,t=lo.RAW,i){n._throwIfRoot("uploadString");let o=YH(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),s9(n,o.data,a)}function tAe(n){n._throwIfRoot("getDownloadURL");let e=Xhe(n.storage,n._location,qH());return n.storage.makeRequestWithTokens(e,r9).then(t=>{if(t===null)throw phe();return t})}function nAe(n,e){let t=Fhe(n._location.path,e),i=new ao(n._location.bucket,t);return new of(n.storage,i)}function iAe(n){return/^[A-Za-z]+:\/\//.test(n)}function rAe(n,e){return new of(n,e)}function o9(n,e){if(n instanceof pg){let t=n;if(t._bucket==null)throw fhe();let i=new of(t,t._bucket);return e!=null?o9(i,e):i}else return e!==void 0?nAe(n,e):n}function sAe(n,e){if(e&&iAe(e)){if(n instanceof pg)return rAe(n,e);throw xR("To use ref(service, url), the first argument must be a Storage instance.")}else return o9(n,e)}function QH(n,e){let t=e?.[VH];return t==null?null:ao.makeFromBucketSpec(t,n)}function oAe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:bz(o,n.app.options.projectId))}var pg=class{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=HH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nhe,this._maxUploadRetryTime=ihe,this._requests=new Set,o!=null?this._bucket=ao.makeFromBucketSpec(o,this._host):this._bucket=QH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ao.makeFromBucketSpec(this._url,e):this._bucket=QH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UH("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UH("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new of(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new CR(WH());{let l=Mhe(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){let[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}},GH="@firebase/storage",zH="0.11.2";var a9="storage";function RR(n,e){return n=wi(n),qhe(n,e)}function LR(n,e,t){return n=wi(n),s9(n,e,t)}function l9(n,e,t,i){return n=wi(n),eAe(n,e,t,i)}function BR(n){return n=wi(n),tAe(n)}function Vo(n,e){return n=wi(n),sAe(n,e)}function c9(n=hb(),e){n=wi(n);let i=Jm(n,a9).getImmediate({identifier:e}),o=wz("storage");return o&&aAe(i,...o),i}function aAe(n,e,t,i={}){oAe(n,e,t,i)}function u9(n,e){return n=wi(n),$he(n,e)}function lAe(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new pg(t,i,o,e,$l)}function cAe(){ql(new Es(a9,lAe,"PUBLIC").setMultipleInstances(!0)),so(GH,zH,""),so(GH,zH,"esm2017")}cAe();var lf,Qa;async function uAe(){let n=(await Promise.resolve().then(()=>(uD(),cD))).config;n.firebaseConfig&&(lf=WD(n.firebaseConfig),storage=c9(lf),Qa=wR(),Qa&&gR(Qa,e=>{e?(window.user=e,af=e.uid,console.log("authstate",af),window.uid=af):console.log("unauth")}))}function hAe(n,e){let t=getDatabase(lf);set(ref(t,n),e)}function h9(n){let e=getDatabase(lf);return get(ref(e,n))}async function AAe(n){return(await h9(n)).val()}function fAe(n,e){pR(Qa,n,e).then(t=>{let i=t.user;console.log("user",i)}).catch(t=>{console.log("create_user err",t)})}function dAe(n,e){console.log("signin",n),mR(Qa,n,e).then(t=>{let i=t.user;console.log("cred",t)}).catch(t=>{console.log(t)})}var af=-1;function A9(){dR(Qa).then(()=>{af=Qa.currentUser.uid,console.log("anon signin",af),window.uid=af}).catch(n=>{console.log(n)})}window.anon=A9;function f9(){return Qa.signOut()}window.signout=f9;function d9(){return getFirestore(lf)}window.getstore=d9;function pAe(n){return Vo(storage,n)}function mAe(n,e){LR(Vo(storage,n),new Blob(Array.from(e))).then(t=>{console.log("upload",n,t)}).catch(t=>{console.log("err",t)})}function gAe(n){LR(Vo(storage,n,{contentType:"image/jpeg"})).then(t=>{console.log("upload",t)}).catch(t=>{console.log("err",t)})}function yAe(n,e){l9(Vo(storage,n),e).then(t=>{}).catch(t=>{console.log("err",t)})}function vAe(n){BR(Vo(storage,n)).then(e=>(console.log("url",e),e))}async function wAe(n){BR(Vo(storage,n)).then(async e=>{console.log(e);let t=await fetch(e,{mode:"no-cors",headers:{Accept:"*/*"}});console.warn("resp",t)})}function bAe(n){return String.fromCharCode.apply(null,new Uint8Array(n))}async function xAe(n){return bAe(await RR(Vo(storage,n)))}function CAe(n){return RR(Vo(storage,n))}function SAe(n){return u9(Vo(storage,n))}var EB={};ho(EB,{box:()=>H8,cavegen:()=>U8,cbox:()=>Y8,css3dbox:()=>z8,css3dobj:()=>uC,cylinder:()=>J8,sball:()=>G8,sculpty:()=>Q8,softxel:()=>O8,sogltf:()=>V8,soknot:()=>X8,sopoints:()=>Z8,sorm:()=>W8,sotext:()=>K8,splinetube:()=>ige,splinetube0:()=>j8});var $b=class extends He{constructor(e,t,i=!1,o=!1,a=1e4){let l=new Ke;super(l,t),this.isMarchingCubes=!0;let c=this,u=new Float32Array(12*3),h=new Float32Array(12*3),A=new Float32Array(12*3);this.enableUvs=i,this.enableColors=o,this.init=function(I){this.resolution=I,this.isolation=80,this.size=I,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;let v=a*3;this.positionArray=new Float32Array(v*3);let C=new $e(this.positionArray,3);C.setUsage(Xh),l.setAttribute("position",C),this.normalArray=new Float32Array(v*3);let E=new $e(this.normalArray,3);if(E.setUsage(Xh),l.setAttribute("normal",E),this.enableUvs){this.uvArray=new Float32Array(v*2);let S=new $e(this.uvArray,2);S.setUsage(Xh),l.setAttribute("uv",S)}if(this.enableColors){this.colorArray=new Float32Array(v*3);let S=new $e(this.colorArray,3);S.setUsage(Xh),l.setAttribute("color",S)}l.boundingSphere=new Vt(new U,1)};function f(I,v,C){return I+(v-I)*C}function d(I,v,C,E,S,M,_,T,D,R){let B=(C-_)/(T-_),P=c.normal_cache;u[v+0]=E+B*c.delta,u[v+1]=S,u[v+2]=M,h[v+0]=f(P[I+0],P[I+3],B),h[v+1]=f(P[I+1],P[I+4],B),h[v+2]=f(P[I+2],P[I+5],B),A[v+0]=f(c.palette[D*3+0],c.palette[R*3+0],B),A[v+1]=f(c.palette[D*3+1],c.palette[R*3+1],B),A[v+2]=f(c.palette[D*3+2],c.palette[R*3+2],B)}function p(I,v,C,E,S,M,_,T,D,R){let B=(C-_)/(T-_),P=c.normal_cache;u[v+0]=E,u[v+1]=S+B*c.delta,u[v+2]=M;let F=I+c.yd*3;h[v+0]=f(P[I+0],P[F+0],B),h[v+1]=f(P[I+1],P[F+1],B),h[v+2]=f(P[I+2],P[F+2],B),A[v+0]=f(c.palette[D*3+0],c.palette[R*3+0],B),A[v+1]=f(c.palette[D*3+1],c.palette[R*3+1],B),A[v+2]=f(c.palette[D*3+2],c.palette[R*3+2],B)}function m(I,v,C,E,S,M,_,T,D,R){let B=(C-_)/(T-_),P=c.normal_cache;u[v+0]=E,u[v+1]=S,u[v+2]=M+B*c.delta;let F=I+c.zd*3;h[v+0]=f(P[I+0],P[F+0],B),h[v+1]=f(P[I+1],P[F+1],B),h[v+2]=f(P[I+2],P[F+2],B),A[v+0]=f(c.palette[D*3+0],c.palette[R*3+0],B),A[v+1]=f(c.palette[D*3+1],c.palette[R*3+1],B),A[v+2]=f(c.palette[D*3+2],c.palette[R*3+2],B)}function b(I){let v=I*3;c.normal_cache[v]===0&&(c.normal_cache[v+0]=c.field[I-1]-c.field[I+1],c.normal_cache[v+1]=c.field[I-c.yd]-c.field[I+c.yd],c.normal_cache[v+2]=c.field[I-c.zd]-c.field[I+c.zd])}function g(I,v,C,E,S){let M=E+1,_=E+c.yd,T=E+c.zd,D=M+c.yd,R=M+c.zd,B=E+c.yd+c.zd,P=M+c.yd+c.zd,F=0,z=c.field[E],Q=c.field[M],V=c.field[_],G=c.field[D],O=c.field[T],W=c.field[R],k=c.field[B],Y=c.field[P];z<S&&(F|=1),Q<S&&(F|=2),V<S&&(F|=8),G<S&&(F|=4),O<S&&(F|=16),W<S&&(F|=32),k<S&&(F|=128),Y<S&&(F|=64);let te=EAe[F];if(te===0)return 0;let ie=c.delta,re=I+ie,se=v+ie,oe=C+ie;te&1&&(b(E),b(M),d(E*3,0,S,I,v,C,z,Q,E,M)),te&2&&(b(M),b(D),p(M*3,3,S,re,v,C,Q,G,M,D)),te&4&&(b(_),b(D),d(_*3,6,S,I,se,C,V,G,_,D)),te&8&&(b(E),b(_),p(E*3,9,S,I,v,C,z,V,E,_)),te&16&&(b(T),b(R),d(T*3,12,S,I,v,oe,O,W,T,R)),te&32&&(b(R),b(P),p(R*3,15,S,re,v,oe,W,Y,R,P)),te&64&&(b(B),b(P),d(B*3,18,S,I,se,oe,k,Y,B,P)),te&128&&(b(T),b(B),p(T*3,21,S,I,v,oe,O,k,T,B)),te&256&&(b(E),b(T),m(E*3,24,S,I,v,C,z,O,E,T)),te&512&&(b(M),b(R),m(M*3,27,S,re,v,C,Q,W,M,R)),te&1024&&(b(D),b(P),m(D*3,30,S,re,se,C,G,Y,D,P)),te&2048&&(b(_),b(B),m(_*3,33,S,I,se,C,V,k,_,B)),F<<=4;let le,xe,_e,pe=0,K=0;for(;qb[F+K]!=-1;)le=F+K,xe=le+1,_e=le+2,w(u,h,A,3*qb[le],3*qb[xe],3*qb[_e]),K+=3,pe++;return pe}function w(I,v,C,E,S,M){let _=c.count*3;if(c.positionArray[_+0]=I[E],c.positionArray[_+1]=I[E+1],c.positionArray[_+2]=I[E+2],c.positionArray[_+3]=I[S],c.positionArray[_+4]=I[S+1],c.positionArray[_+5]=I[S+2],c.positionArray[_+6]=I[M],c.positionArray[_+7]=I[M+1],c.positionArray[_+8]=I[M+2],c.material.flatShading===!0){let T=(v[E+0]+v[S+0]+v[M+0])/3,D=(v[E+1]+v[S+1]+v[M+1])/3,R=(v[E+2]+v[S+2]+v[M+2])/3;c.normalArray[_+0]=T,c.normalArray[_+1]=D,c.normalArray[_+2]=R,c.normalArray[_+3]=T,c.normalArray[_+4]=D,c.normalArray[_+5]=R,c.normalArray[_+6]=T,c.normalArray[_+7]=D,c.normalArray[_+8]=R}else c.normalArray[_+0]=v[E+0],c.normalArray[_+1]=v[E+1],c.normalArray[_+2]=v[E+2],c.normalArray[_+3]=v[S+0],c.normalArray[_+4]=v[S+1],c.normalArray[_+5]=v[S+2],c.normalArray[_+6]=v[M+0],c.normalArray[_+7]=v[M+1],c.normalArray[_+8]=v[M+2];if(c.enableUvs){let T=c.count*2;c.uvArray[T+0]=I[E+0],c.uvArray[T+1]=I[E+2],c.uvArray[T+2]=I[S+0],c.uvArray[T+3]=I[S+2],c.uvArray[T+4]=I[M+0],c.uvArray[T+5]=I[M+2]}c.enableColors&&(c.colorArray[_+0]=C[E+0],c.colorArray[_+1]=C[E+1],c.colorArray[_+2]=C[E+2],c.colorArray[_+3]=C[S+0],c.colorArray[_+4]=C[S+1],c.colorArray[_+5]=C[S+2],c.colorArray[_+6]=C[M+0],c.colorArray[_+7]=C[M+1],c.colorArray[_+8]=C[M+2]),c.count+=3}this.addBall=function(I,v,C,E,S,M){let _=Math.sign(E);E=Math.abs(E);let T=M!=null,D=new De(I,v,C);if(T)try{D=M instanceof De?M:Array.isArray(M)?new De(Math.min(Math.abs(M[0]),1),Math.min(Math.abs(M[1]),1),Math.min(Math.abs(M[2]),1)):new De(M)}catch{D=new De(I,v,C)}let R=this.size*Math.sqrt(E/S),B=C*this.size,P=v*this.size,F=I*this.size,z=Math.floor(B-R);z<1&&(z=1);let Q=Math.floor(B+R);Q>this.size-1&&(Q=this.size-1);let V=Math.floor(P-R);V<1&&(V=1);let G=Math.floor(P+R);G>this.size-1&&(G=this.size-1);let O=Math.floor(F-R);O<1&&(O=1);let W=Math.floor(F+R);W>this.size-1&&(W=this.size-1);let k,Y,te,ie,re,se,oe,le,xe,_e,pe;for(te=z;te<Q;te++)for(re=this.size2*te,le=te/this.size-C,xe=le*le,Y=V;Y<G;Y++)for(ie=re+this.size*Y,oe=Y/this.size-v,_e=oe*oe,k=O;k<W;k++)if(se=k/this.size-I,pe=E/(1e-6+se*se+_e+xe)-S,pe>0){this.field[ie+k]+=pe*_;let K=Math.sqrt((k-F)*(k-F)+(Y-P)*(Y-P)+(te-B)*(te-B))/R,be=1-K*K*K*(K*(K*6-15)+10);this.palette[(ie+k)*3+0]+=D.r*be,this.palette[(ie+k)*3+1]+=D.g*be,this.palette[(ie+k)*3+2]+=D.b*be}},this.addPlaneX=function(I,v){let C=this.size,E=this.yd,S=this.zd,M=this.field,_,T,D,R,B,P,F,z=C*Math.sqrt(I/v);for(z>C&&(z=C),_=0;_<z;_++)if(P=_/C,R=P*P,B=I/(1e-4+R)-v,B>0)for(T=0;T<C;T++)for(F=_+T*E,D=0;D<C;D++)M[S*D+F]+=B},this.addPlaneY=function(I,v){let C=this.size,E=this.yd,S=this.zd,M=this.field,_,T,D,R,B,P,F,z,Q=C*Math.sqrt(I/v);for(Q>C&&(Q=C),T=0;T<Q;T++)if(P=T/C,R=P*P,B=I/(1e-4+R)-v,B>0)for(F=T*E,_=0;_<C;_++)for(z=F+_,D=0;D<C;D++)M[S*D+z]+=B},this.addPlaneZ=function(I,v){let C=this.size,E=this.yd,S=this.zd,M=this.field,_,T,D,R,B,P,F,z,Q=C*Math.sqrt(I/v);for(Q>C&&(Q=C),D=0;D<Q;D++)if(P=D/C,R=P*P,B=I/(1e-4+R)-v,B>0)for(F=S*D,T=0;T<C;T++)for(z=F+T*E,_=0;_<C;_++)M[z+_]+=B},this.setCell=function(I,v,C,E){let S=this.size2*C+this.size*v+I;this.field[S]=E},this.getCell=function(I,v,C){let E=this.size2*C+this.size*v+I;return this.field[E]},this.blur=function(I=1){let v=this.field,C=v.slice(),E=this.size,S=this.size2;for(let M=0;M<E;M++)for(let _=0;_<E;_++)for(let T=0;T<E;T++){let D=S*T+E*_+M,R=C[D],B=1;for(let P=-1;P<=1;P+=2){let F=P+M;if(!(F<0||F>=E))for(let z=-1;z<=1;z+=2){let Q=z+_;if(!(Q<0||Q>=E))for(let V=-1;V<=1;V+=2){let G=V+T;if(G<0||G>=E)continue;let O=S*G+E*Q+F,W=C[O];B++,R+=I*(W-R)/B}}}v[D]=R}},this.reset=function(){for(let I=0;I<this.size3;I++)this.normal_cache[I*3]=0,this.field[I]=0,this.palette[I*3]=this.palette[I*3+1]=this.palette[I*3+2]=0},this.update=function(){this.count=0;let I=this.size-2;for(let v=1;v<I;v++){let C=this.size2*v,E=(v-this.halfsize)/this.halfsize;for(let S=1;S<I;S++){let M=C+this.size*S,_=(S-this.halfsize)/this.halfsize;for(let T=1;T<I;T++){let D=(T-this.halfsize)/this.halfsize,R=M+T;g(D,_,E,R,this.isolation)}}}this.geometry.setDrawRange(0,this.count),l.getAttribute("position").needsUpdate=!0,l.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(l.getAttribute("uv").needsUpdate=!0),this.enableColors&&(l.getAttribute("color").needsUpdate=!0),this.count/3>a&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}},EAe=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),qb=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var WR={};ho(WR,{GlyphsGeometry:()=>ox,Text:()=>hf,configureTextBuilder:()=>$Ae,createTextDerivedMaterial:()=>G9,dumpSDFTextures:()=>ife,getCaretAtPoint:()=>pfe,getSelectionRects:()=>mfe,preloadFont:()=>F9,typesetterWorkerModule:()=>Q9});function IAe(){var n=Object.create(null);function e(o,a){var l=o.id,c=o.name,u=o.dependencies;u===void 0&&(u=[]);var h=o.init;h===void 0&&(h=function(){});var A=o.getTransferables;if(A===void 0&&(A=null),!n[l])try{u=u.map(function(d){return d&&d.isWorkerModule&&(e(d,function(p){if(p instanceof Error)throw p}),d=n[d.id].value),d}),h=i("<"+c+">.init",h),A&&(A=i("<"+c+">.getTransferables",A));var f=null;typeof h=="function"?f=h.apply(void 0,u):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:f,getTransferables:A},a(f)}catch(d){d&&d.noLog||console.error(d),a(d)}}function t(o,a){var l,c=o.id,u=o.args;(!n[c]||typeof n[c].value!="function")&&a(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var h=(l=n[c]).value.apply(l,u);h&&typeof h.then=="function"?h.then(A,function(f){return a(f instanceof Error?f:new Error(""+f))}):A(h)}catch(f){a(f)}function A(f){try{var d=n[c].getTransferables&&n[c].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),a(f,d)}catch(p){console.error(p),a(p)}}}function i(o,a){var l=void 0;self.troikaDefine=function(u){return l=u};var c=URL.createObjectURL(new Blob(["/** "+o.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(u){console.error(u)}return URL.revokeObjectURL(c),delete self.troikaDefine,l}self.addEventListener("message",function(o){var a=o.data,l=a.messageId,c=a.action,u=a.data;try{c==="registerModule"&&e(u,function(h){h instanceof Error?postMessage({messageId:l,success:!1,error:h.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof h=="function"}})}),c==="callModule"&&t(u,function(h,A){h instanceof Error?postMessage({messageId:l,success:!1,error:h.message}):postMessage({messageId:l,success:!0,result:h},A||void 0)})}catch(h){postMessage({messageId:l,success:!1,error:h.stack})}})}function MAe(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(o){if(typeof o=="function")return o.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(a){return a&&a._getInitResult?a._getInitResult():a}):[];var o=Promise.all(t).then(function(a){return i.apply(null,a)});return e._getInitResult=function(){return o},o},e}var m9=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return m9=function(){return n},n},TAe=0,_Ae=0,PR=!1,mg=Object.create(null),gg=Object.create(null),NR=Object.create(null);function cf(n){if((!n||typeof n.init!="function")&&!PR)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,o=n.workerId;if(!m9())return MAe(n);o==null&&(o="#default");var a="workerModule"+ ++TAe,l=n.name||a,c=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(PR=!0,h=cf({workerId:o,name:"<"+l+"> function dependency: "+h.name,init:`function(){return (
`+ex(h)+`
)}`}),PR=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],A=arguments.length;A--;)h[A]=arguments[A];if(!c){c=p9(o,"registerModule",u.workerModuleData);var f=function(){c=null,gg[o].delete(f)};(gg[o]||(gg[o]=new Set)).add(f)}return c.then(function(d){var p=d.isCallable;if(p)return p9(o,"callModule",{id:a,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:e,init:ex(t),getTransferables:i&&ex(i)},u}function g9(n){gg[n]&&gg[n].forEach(function(e){e()}),mg[n]&&(mg[n].terminate(),delete mg[n])}function ex(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function DAe(n){var e=mg[n];if(!e){var t=ex(IAe);e=mg[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var o=i.data,a=o.messageId,l=NR[a];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete NR[a],l(o)}}return e}function p9(n,e,t){return new Promise(function(i,o){var a=++_Ae;NR[a]=function(l){l.success?i(l.result):o(new Error("Error in worker "+e+" call: "+l.error))},DAe(n).postMessage({messageId:a,action:e,data:t})})}function FR(){var n=function(e){function t(O,W,k,Y,te,ie,re,se){var oe=1-re;se.x=oe*oe*O+2*oe*re*k+re*re*te,se.y=oe*oe*W+2*oe*re*Y+re*re*ie}function i(O,W,k,Y,te,ie,re,se,oe,le){var xe=1-oe;le.x=xe*xe*xe*O+3*xe*xe*oe*k+3*xe*oe*oe*te+oe*oe*oe*re,le.y=xe*xe*xe*W+3*xe*xe*oe*Y+3*xe*oe*oe*ie+oe*oe*oe*se}function o(O,W){for(var k=/([MLQCZ])([^MLQCZ]*)/g,Y,te,ie,re,se;Y=k.exec(O);){var oe=Y[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(le){return parseFloat(le)});switch(Y[1]){case"M":re=te=oe[0],se=ie=oe[1];break;case"L":(oe[0]!==re||oe[1]!==se)&&W("L",re,se,re=oe[0],se=oe[1]);break;case"Q":{W("Q",re,se,re=oe[2],se=oe[3],oe[0],oe[1]);break}case"C":{W("C",re,se,re=oe[4],se=oe[5],oe[0],oe[1],oe[2],oe[3]);break}case"Z":(re!==te||se!==ie)&&W("L",re,se,te,ie);break}}}function a(O,W,k){k===void 0&&(k=16);var Y={x:0,y:0};o(O,function(te,ie,re,se,oe,le,xe,_e,pe){switch(te){case"L":W(ie,re,se,oe);break;case"Q":{for(var K=ie,be=re,me=1;me<k;me++)t(ie,re,le,xe,se,oe,me/(k-1),Y),W(K,be,Y.x,Y.y),K=Y.x,be=Y.y;break}case"C":{for(var fe=ie,de=re,Fe=1;Fe<k;Fe++)i(ie,re,le,xe,_e,pe,se,oe,Fe/(k-1),Y),W(fe,de,Y.x,Y.y),fe=Y.x,de=Y.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,h={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function A(O,W){var k=O.getContext?O.getContext("webgl",h):O,Y=u.get(k);if(!Y){let xe=function(fe){var de=ie[fe];if(!de&&(de=ie[fe]=k.getExtension(fe),!de))throw new Error(fe+" not supported");return de},_e=function(fe,de){var Fe=k.createShader(de);return k.shaderSource(Fe,fe),k.compileShader(Fe),Fe},pe=function(fe,de,Fe,ye){if(!re[fe]){var Se={},Pe={},Ee=k.createProgram();k.attachShader(Ee,_e(de,k.VERTEX_SHADER)),k.attachShader(Ee,_e(Fe,k.FRAGMENT_SHADER)),k.linkProgram(Ee),re[fe]={program:Ee,transaction:function(J){k.useProgram(Ee),J({setUniform:function(ue,Re){for(var Be=[],Ie=arguments.length-2;Ie-- >0;)Be[Ie]=arguments[Ie+2];var Ue=Pe[Re]||(Pe[Re]=k.getUniformLocation(Ee,Re));k["uniform"+ue].apply(k,[Ue].concat(Be))},setAttribute:function(ue,Re,Be,Ie,Ue){var Ne=Se[ue];Ne||(Ne=Se[ue]={buf:k.createBuffer(),loc:k.getAttribLocation(Ee,ue),data:null}),k.bindBuffer(k.ARRAY_BUFFER,Ne.buf),k.vertexAttribPointer(Ne.loc,Re,k.FLOAT,!1,0,0),k.enableVertexAttribArray(Ne.loc),te?k.vertexAttribDivisor(Ne.loc,Ie):xe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ne.loc,Ie),Ue!==Ne.data&&(k.bufferData(k.ARRAY_BUFFER,Ue,Be),Ne.data=Ue)}})}}}re[fe].transaction(ye)},K=function(fe,de){oe++;try{k.activeTexture(k.TEXTURE0+oe);var Fe=se[fe];Fe||(Fe=se[fe]=k.createTexture(),k.bindTexture(k.TEXTURE_2D,Fe),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.bindTexture(k.TEXTURE_2D,Fe),de(Fe,oe)}finally{oe--}},be=function(fe,de,Fe){var ye=k.createFramebuffer();le.push(ye),k.bindFramebuffer(k.FRAMEBUFFER,ye),k.activeTexture(k.TEXTURE0+de),k.bindTexture(k.TEXTURE_2D,fe),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,fe,0);try{Fe(ye)}finally{k.deleteFramebuffer(ye),k.bindFramebuffer(k.FRAMEBUFFER,le[--le.length-1]||null)}},me=function(){ie={},re={},se={},oe=-1,le.length=0};var te=typeof WebGL2RenderingContext<"u"&&k instanceof WebGL2RenderingContext,ie={},re={},se={},oe=-1,le=[];k.canvas.addEventListener("webglcontextlost",function(fe){me(),fe.preventDefault()},!1),u.set(k,Y={gl:k,isWebGL2:te,getExtension:xe,withProgram:pe,withTexture:K,withTextureFramebuffer:be,handleContextLoss:me})}W(Y)}function f(O,W,k,Y,te,ie,re,se){re===void 0&&(re=15),se===void 0&&(se=null),A(O,function(oe){var le=oe.gl,xe=oe.withProgram,_e=oe.withTexture;_e("copy",function(pe,K){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,te,ie,0,le.RGBA,le.UNSIGNED_BYTE,W),xe("copy",l,c,function(be){var me=be.setUniform,fe=be.setAttribute;fe("aUV",2,le.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",K),le.bindFramebuffer(le.FRAMEBUFFER,se||null),le.disable(le.BLEND),le.colorMask(re&8,re&4,re&2,re&1),le.viewport(k,Y,te,ie),le.scissor(k,Y,te,ie),le.drawArrays(le.TRIANGLES,0,3)})})})}function d(O,W,k){var Y=O.width,te=O.height;A(O,function(ie){var re=ie.gl,se=new Uint8Array(Y*te*4);re.readPixels(0,0,Y,te,re.RGBA,re.UNSIGNED_BYTE,se),O.width=W,O.height=k,f(re,se,0,0,Y,te)})}var p=Object.freeze({__proto__:null,withWebGLContext:A,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function m(O,W,k,Y,te,ie){ie===void 0&&(ie=1);var re=new Uint8Array(O*W),se=Y[2]-Y[0],oe=Y[3]-Y[1],le=[];a(k,function(fe,de,Fe,ye){le.push({x1:fe,y1:de,x2:Fe,y2:ye,minX:Math.min(fe,Fe),minY:Math.min(de,ye),maxX:Math.max(fe,Fe),maxY:Math.max(de,ye)})}),le.sort(function(fe,de){return fe.maxX-de.maxX});for(var xe=0;xe<O;xe++)for(var _e=0;_e<W;_e++){var pe=be(Y[0]+se*(xe+.5)/O,Y[1]+oe*(_e+.5)/W),K=Math.pow(1-Math.abs(pe)/te,ie)/2;pe<0&&(K=1-K),K=Math.max(0,Math.min(255,Math.round(K*255))),re[_e*O+xe]=K}return re;function be(fe,de){for(var Fe=1/0,ye=1/0,Se=le.length;Se--;){var Pe=le[Se];if(Pe.maxX+ye<=fe)break;if(fe+ye>Pe.minX&&de-ye<Pe.maxY&&de+ye>Pe.minY){var Ee=w(fe,de,Pe.x1,Pe.y1,Pe.x2,Pe.y2);Ee<Fe&&(Fe=Ee,ye=Math.sqrt(Fe))}}return me(fe,de)&&(ye=-ye),ye}function me(fe,de){for(var Fe=0,ye=le.length;ye--;){var Se=le[ye];if(Se.maxX<=fe)break;var Pe=Se.y1>de!=Se.y2>de&&fe<(Se.x2-Se.x1)*(de-Se.y1)/(Se.y2-Se.y1)+Se.x1;Pe&&(Fe+=Se.y1<Se.y2?1:-1)}return Fe!==0}}function b(O,W,k,Y,te,ie,re,se,oe,le){ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0),g(O,W,k,Y,te,ie,re,null,se,oe,le)}function g(O,W,k,Y,te,ie,re,se,oe,le,xe){ie===void 0&&(ie=1),oe===void 0&&(oe=0),le===void 0&&(le=0),xe===void 0&&(xe=0);for(var _e=m(O,W,k,Y,te,ie),pe=new Uint8Array(_e.length*4),K=0;K<_e.length;K++)pe[K*4+xe]=_e[K];f(re,pe,oe,le,O,W,1<<3-xe,se)}function w(O,W,k,Y,te,ie){var re=te-k,se=ie-Y,oe=re*re+se*se,le=oe?Math.max(0,Math.min(1,((O-k)*re+(W-Y)*se)/oe)):0,xe=O-(k+le*re),_e=W-(Y+le*se);return xe*xe+_e*_e}var I=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:b,generateIntoFramebuffer:g}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",E="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",S=new Float32Array([0,0,2,0,0,2]),M=null,_=!1,T={},D=new WeakMap;function R(O){if(!_&&!z(O))throw new Error("WebGL generation not supported")}function B(O,W,k,Y,te,ie,re){if(ie===void 0&&(ie=1),re===void 0&&(re=null),!re&&(re=M,!re)){var se=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!se)throw new Error("OffscreenCanvas or DOM canvas not supported");re=M=se.getContext("webgl",{depth:!1})}R(re);var oe=new Uint8Array(O*W*4);A(re,function(pe){var K=pe.gl,be=pe.withTexture,me=pe.withTextureFramebuffer;be("readable",function(fe,de){K.texImage2D(K.TEXTURE_2D,0,K.RGBA,O,W,0,K.RGBA,K.UNSIGNED_BYTE,null),me(fe,de,function(Fe){F(O,W,k,Y,te,ie,K,Fe,0,0,0),K.readPixels(0,0,O,W,K.RGBA,K.UNSIGNED_BYTE,oe)})})});for(var le=new Uint8Array(O*W),xe=0,_e=0;xe<oe.length;xe+=4)le[_e++]=oe[xe];return le}function P(O,W,k,Y,te,ie,re,se,oe,le){ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0),F(O,W,k,Y,te,ie,re,null,se,oe,le)}function F(O,W,k,Y,te,ie,re,se,oe,le,xe){ie===void 0&&(ie=1),oe===void 0&&(oe=0),le===void 0&&(le=0),xe===void 0&&(xe=0),R(re);var _e=[];a(k,function(pe,K,be,me){_e.push(pe,K,be,me)}),_e=new Float32Array(_e),A(re,function(pe){var K=pe.gl,be=pe.isWebGL2,me=pe.getExtension,fe=pe.withProgram,de=pe.withTexture,Fe=pe.withTextureFramebuffer,ye=pe.handleContextLoss;if(de("rawDistances",function(Se,Pe){(O!==Se._lastWidth||W!==Se._lastHeight)&&K.texImage2D(K.TEXTURE_2D,0,K.RGBA,Se._lastWidth=O,Se._lastHeight=W,0,K.RGBA,K.UNSIGNED_BYTE,null),fe("main",v,C,function(Ee){var We=Ee.setAttribute,J=Ee.setUniform,H=!be&&me("ANGLE_instanced_arrays"),ue=!be&&me("EXT_blend_minmax");We("aUV",2,K.STATIC_DRAW,0,S),We("aLineSegment",4,K.DYNAMIC_DRAW,1,_e),J.apply(void 0,["4f","uGlyphBounds"].concat(Y)),J("1f","uMaxDistance",te),J("1f","uExponent",ie),Fe(Se,Pe,function(Re){K.enable(K.BLEND),K.colorMask(!0,!0,!0,!0),K.viewport(0,0,O,W),K.scissor(0,0,O,W),K.blendFunc(K.ONE,K.ONE),K.blendEquationSeparate(K.FUNC_ADD,be?K.MAX:ue.MAX_EXT),K.clear(K.COLOR_BUFFER_BIT),be?K.drawArraysInstanced(K.TRIANGLES,0,3,_e.length/4):H.drawArraysInstancedANGLE(K.TRIANGLES,0,3,_e.length/4)})}),fe("post",l,E,function(Ee){Ee.setAttribute("aUV",2,K.STATIC_DRAW,0,S),Ee.setUniform("1i","tex",Pe),K.bindFramebuffer(K.FRAMEBUFFER,se),K.disable(K.BLEND),K.colorMask(xe===0,xe===1,xe===2,xe===3),K.viewport(oe,le,O,W),K.scissor(oe,le,O,W),K.drawArrays(K.TRIANGLES,0,3)})}),K.isContextLost())throw ye(),new Error("webgl context lost")})}function z(O){var W=!O||O===M?T:O.canvas||O,k=D.get(W);if(k===void 0){_=!0;var Y=null;try{var te=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=B(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);k=ie&&te.length===ie.length&&ie.every(function(re,se){return re===te[se]}),k||(Y="bad trial run results",console.info(te,ie))}catch(re){k=!1,Y=re.message}Y&&console.warn("WebGL SDF generation not supported:",Y),_=!1,D.set(W,k)}return k}var Q=Object.freeze({__proto__:null,generate:B,generateIntoCanvas:P,generateIntoFramebuffer:F,isSupported:z});function V(O,W,k,Y,te,ie){te===void 0&&(te=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),ie===void 0&&(ie=1);try{return B.apply(Q,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),m.apply(I,arguments)}}function G(O,W,k,Y,te,ie,re,se,oe,le){te===void 0&&(te=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),ie===void 0&&(ie=1),se===void 0&&(se=0),oe===void 0&&(oe=0),le===void 0&&(le=0);try{return P.apply(Q,arguments)}catch(xe){return console.info("WebGL SDF generation failed, falling back to JS",xe),b.apply(I,arguments)}}return e.forEachPathCommand=o,e.generate=V,e.generateIntoCanvas=G,e.javascript=I,e.pathToLineSegments=a,e.webgl=Q,e.webglUtils=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function RAe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},o={};i.L=1,o[1]="L",Object.keys(t).forEach(function(ye,Se){i[ye]=1<<Se+1,o[i[ye]]=ye}),Object.freeze(i);var a=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,c=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,u=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,h=i.S|i.WS|i.B|a|i.PDI|u,A=null;function f(){if(!A){A=new Map;var ye=function(Pe){if(t.hasOwnProperty(Pe)){var Ee=0;t[Pe].split(",").forEach(function(We){var J=We.split("+"),H=J[0],ue=J[1];H=parseInt(H,36),ue=ue?parseInt(ue,36):0,A.set(Ee+=H,i[Pe]);for(var Re=0;Re<ue;Re++)A.set(++Ee,i[Pe])})}};for(var Se in t)ye(Se)}}function d(ye){return f(),A.get(ye.codePointAt(0))||i.L}function p(ye){return o[d(ye)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function b(ye,Se){var Pe=36,Ee=0,We=new Map,J=Se&&new Map,H;return ye.split(",").forEach(function ue(Re){if(Re.indexOf("+")!==-1)for(var Be=+Re;Be--;)ue(H);else{H=Re;var Ie=Re.split(">"),Ue=Ie[0],Ne=Ie[1];Ue=String.fromCodePoint(Ee+=parseInt(Ue,Pe)),Ne=String.fromCodePoint(Ee+=parseInt(Ne,Pe)),We.set(Ue,Ne),Se&&J.set(Ne,Ue)}}),{map:We,reverseMap:J}}var g,w,I;function v(){if(!g){var ye=b(m.pairs,!0),Se=ye.map,Pe=ye.reverseMap;g=Se,w=Pe,I=b(m.canonical,!1).map}}function C(ye){return v(),g.get(ye)||null}function E(ye){return v(),w.get(ye)||null}function S(ye){return v(),I.get(ye)||null}var M=i.L,_=i.R,T=i.EN,D=i.ES,R=i.ET,B=i.AN,P=i.CS,F=i.B,z=i.S,Q=i.ON,V=i.BN,G=i.NSM,O=i.AL,W=i.LRO,k=i.RLO,Y=i.LRE,te=i.RLE,ie=i.PDF,re=i.LRI,se=i.RLI,oe=i.FSI,le=i.PDI;function xe(ye,Se){for(var Pe=125,Ee=new Uint32Array(ye.length),We=0;We<ye.length;We++)Ee[We]=d(ye[We]);var J=new Map;function H(sr,Ls){var or=Ee[sr];Ee[sr]=Ls,J.set(or,J.get(or)-1),or&c&&J.set(c,J.get(c)-1),J.set(Ls,(J.get(Ls)||0)+1),Ls&c&&J.set(c,(J.get(c)||0)+1)}for(var ue=new Uint8Array(ye.length),Re=new Map,Be=[],Ie=null,Ue=0;Ue<ye.length;Ue++)Ie||Be.push(Ie={start:Ue,end:ye.length-1,level:Se==="rtl"?1:Se==="ltr"?0:zB(Ue,!1)}),Ee[Ue]&F&&(Ie.end=Ue,Ie=null);for(var Ne=te|Y|k|W|a|le|ie|F,Ce=function(sr){return sr+(sr&1?1:2)},Z=function(sr){return sr+(sr&1?2:1)},L=0;L<Be.length;L++){Ie=Be[L];var N=[{_level:Ie.level,_override:0,_isolate:0}],X=void 0,q=0,ne=0,ae=0;J.clear();for(var j=Ie.start;j<=Ie.end;j++){var ce=Ee[j];if(X=N[N.length-1],J.set(ce,(J.get(ce)||0)+1),ce&c&&J.set(c,(J.get(c)||0)+1),ce&Ne)if(ce&(te|Y)){ue[j]=X._level;var $=(ce===te?Z:Ce)(X._level);$<=Pe&&!q&&!ne?N.push({_level:$,_override:0,_isolate:0}):q||ne++}else if(ce&(k|W)){ue[j]=X._level;var Ae=(ce===k?Z:Ce)(X._level);Ae<=Pe&&!q&&!ne?N.push({_level:Ae,_override:ce&k?_:M,_isolate:0}):q||ne++}else if(ce&a){ce&oe&&(ce=zB(j+1,!0)===1?se:re),ue[j]=X._level,X._override&&H(j,X._override);var we=(ce===se?Z:Ce)(X._level);we<=Pe&&q===0&&ne===0?(ae++,N.push({_level:we,_override:0,_isolate:1,_isolInitIndex:j})):q++}else if(ce&le){if(q>0)q--;else if(ae>0){for(ne=0;!N[N.length-1]._isolate;)N.pop();var Ge=N[N.length-1]._isolInitIndex;Ge!=null&&(Re.set(Ge,j),Re.set(j,Ge)),N.pop(),ae--}X=N[N.length-1],ue[j]=X._level,X._override&&H(j,X._override)}else ce&ie?(q===0&&(ne>0?ne--:!X._isolate&&N.length>1&&(N.pop(),X=N[N.length-1])),ue[j]=X._level):ce&F&&(ue[j]=Ie.level);else ue[j]=X._level,X._override&&ce!==V&&H(j,X._override)}for(var ze=[],Ze=null,je=Ie.start;je<=Ie.end;je++){var at=Ee[je];if(!(at&u)){var vt=ue[je],st=at&a,kn=at===le;Ze&&vt===Ze._level?(Ze._end=je,Ze._endsWithIsolInit=st):ze.push(Ze={_start:je,_end:je,_level:vt,_startsWithPDI:kn,_endsWithIsolInit:st})}}for(var Pn=[],kt=0;kt<ze.length;kt++){var Rt=ze[kt];if(!Rt._startsWithPDI||Rt._startsWithPDI&&!Re.has(Rt._start)){for(var Si=[Ze=Rt],gn=void 0;Ze&&Ze._endsWithIsolInit&&(gn=Re.get(Ze._end))!=null;)for(var yn=kt+1;yn<ze.length;yn++)if(ze[yn]._start===gn){Si.push(Ze=ze[yn]);break}for(var Kn=[],Mr=0;Mr<Si.length;Mr++)for(var ki=Si[Mr],ee=ki._start;ee<=ki._end;ee++)Kn.push(ee);for(var ve=ue[Kn[0]],Te=Ie.level,ge=Kn[0]-1;ge>=0;ge--)if(!(Ee[ge]&u)){Te=ue[ge];break}var Le=Kn[Kn.length-1],qe=ue[Le],ot=Ie.level;if(!(Ee[Le]&a)){for(var lt=Le+1;lt<=Ie.end;lt++)if(!(Ee[lt]&u)){ot=ue[lt];break}}Pn.push({_seqIndices:Kn,_sosType:Math.max(Te,ve)%2?_:M,_eosType:Math.max(ot,qe)%2?_:M})}}for(var ut=0;ut<Pn.length;ut++){var wt=Pn[ut],Oe=wt._seqIndices,ft=wt._sosType,fn=wt._eosType,en=ue[Oe[0]]&1?_:M;if(J.get(G))for(var Pi=0;Pi<Oe.length;Pi++){var is=Oe[Pi];if(Ee[is]&G){for(var dn=ft,St=Pi-1;St>=0;St--)if(!(Ee[Oe[St]]&u)){dn=Ee[Oe[St]];break}H(is,dn&(a|le)?Q:dn)}}if(J.get(T))for(var Za=0;Za<Oe.length;Za++){var Nn=Oe[Za];if(Ee[Nn]&T)for(var rs=Za-1;rs>=-1;rs--){var Wf=rs===-1?ft:Ee[Oe[rs]];if(Wf&l){Wf===O&&H(Nn,B);break}}}if(J.get(O))for(var jo=0;jo<Oe.length;jo++){var Zu=Oe[jo];Ee[Zu]&O&&H(Zu,_)}if(J.get(D)||J.get(P))for(var Fn=1;Fn<Oe.length-1;Fn++){var Ds=Oe[Fn];if(Ee[Ds]&(D|P)){for(var uo=0,Ei=0,fc=Fn-1;fc>=0&&(uo=Ee[Oe[fc]],!!(uo&u));fc--);for(var Xf=Fn+1;Xf<Oe.length&&(Ei=Ee[Oe[Xf]],!!(Ei&u));Xf++);uo===Ei&&(Ee[Ds]===D?uo===T:uo&(T|B))&&H(Ds,uo)}}if(J.get(T))for(var Tr=0;Tr<Oe.length;Tr++){var tX=Oe[Tr];if(Ee[tX]&T){for(var Vg=Tr-1;Vg>=0&&Ee[Oe[Vg]]&(R|u);Vg--)H(Oe[Vg],T);for(Tr++;Tr<Oe.length&&Ee[Oe[Tr]]&(R|u|T);Tr++)Ee[Oe[Tr]]!==T&&H(Oe[Tr],T)}}if(J.get(R)||J.get(D)||J.get(P))for(var Yf=0;Yf<Oe.length;Yf++){var TB=Oe[Yf];if(Ee[TB]&(R|D|P)){H(TB,Q);for(var Wg=Yf-1;Wg>=0&&Ee[Oe[Wg]]&u;Wg--)H(Oe[Wg],Q);for(var Xg=Yf+1;Xg<Oe.length&&Ee[Oe[Xg]]&u;Xg++)H(Oe[Xg],Q)}}if(J.get(T))for(var dC=0,_B=ft;dC<Oe.length;dC++){var DB=Oe[dC],pC=Ee[DB];pC&T?_B===M&&H(DB,M):pC&l&&(_B=pC)}if(J.get(c)){var Zf=_|T|B,RB=Zf|M,Yg=[];{for(var Ku=[],ju=0;ju<Oe.length;ju++)if(Ee[Oe[ju]]&c){var Kf=ye[Oe[ju]],LB=void 0;if(C(Kf)!==null)if(Ku.length<63)Ku.push({char:Kf,seqIndex:ju});else break;else if((LB=E(Kf))!==null)for(var jf=Ku.length-1;jf>=0;jf--){var mC=Ku[jf].char;if(mC===LB||mC===E(S(Kf))||C(S(mC))===Kf){Yg.push([Ku[jf].seqIndex,ju]),Ku.length=jf;break}}}Yg.sort(function(sr,Ls){return sr[0]-Ls[0]})}for(var gC=0;gC<Yg.length;gC++){for(var BB=Yg[gC],Zg=BB[0],yC=BB[1],kB=!1,Rs=0,vC=Zg+1;vC<yC;vC++){var PB=Oe[vC];if(Ee[PB]&RB){kB=!0;var NB=Ee[PB]&Zf?_:M;if(NB===en){Rs=NB;break}}}if(kB&&!Rs){Rs=ft;for(var wC=Zg-1;wC>=0;wC--){var UB=Oe[wC];if(Ee[UB]&RB){var OB=Ee[UB]&Zf?_:M;OB!==en?Rs=OB:Rs=en;break}}}if(Rs){if(Ee[Oe[Zg]]=Ee[Oe[yC]]=Rs,Rs!==en){for(var Jf=Zg+1;Jf<Oe.length;Jf++)if(!(Ee[Oe[Jf]]&u)){d(ye[Oe[Jf]])&G&&(Ee[Oe[Jf]]=Rs);break}}if(Rs!==en){for(var qf=yC+1;qf<Oe.length;qf++)if(!(Ee[Oe[qf]]&u)){d(ye[Oe[qf]])&G&&(Ee[Oe[qf]]=Rs);break}}}}for(var Ka=0;Ka<Oe.length;Ka++)if(Ee[Oe[Ka]]&c){for(var QB=Ka,bC=Ka,xC=ft,$f=Ka-1;$f>=0;$f--)if(Ee[Oe[$f]]&u)QB=$f;else{xC=Ee[Oe[$f]]&Zf?_:M;break}for(var GB=fn,ed=Ka+1;ed<Oe.length;ed++)if(Ee[Oe[ed]]&(c|u))bC=ed;else{GB=Ee[Oe[ed]]&Zf?_:M;break}for(var CC=QB;CC<=bC;CC++)Ee[Oe[CC]]=xC===GB?xC:en;Ka=bC}}}for(var _r=Ie.start;_r<=Ie.end;_r++){var nX=ue[_r],Kg=Ee[_r];if(nX&1?Kg&(M|T|B)&&ue[_r]++:Kg&_?ue[_r]++:Kg&(B|T)&&(ue[_r]+=2),Kg&u&&(ue[_r]=_r===0?Ie.level:ue[_r-1]),_r===Ie.end||d(ye[_r])&(z|F))for(var jg=_r;jg>=0&&d(ye[jg])&h;jg--)ue[jg]=Ie.level}}return{levels:ue,paragraphs:Be};function zB(sr,Ls){for(var or=sr;or<ye.length;or++){var ja=Ee[or];if(ja&(_|O))return 1;if(ja&(F|M)||Ls&&ja===le)return 0;if(ja&a){var HB=iX(or);or=HB===-1?ye.length:HB}}return 0}function iX(sr){for(var Ls=1,or=sr+1;or<ye.length;or++){var ja=Ee[or];if(ja&F)break;if(ja&le){if(--Ls===0)return or}else ja&a&&Ls++}return-1}}var _e="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",pe;function K(){if(!pe){var ye=b(_e,!0),Se=ye.map,Pe=ye.reverseMap;Pe.forEach(function(Ee,We){Se.set(We,Ee)}),pe=Se}}function be(ye){return K(),pe.get(ye)||null}function me(ye,Se,Pe,Ee){var We=ye.length;Pe=Math.max(0,Pe==null?0:+Pe),Ee=Math.min(We-1,Ee==null?We-1:+Ee);for(var J=new Map,H=Pe;H<=Ee;H++)if(Se[H]&1){var ue=be(ye[H]);ue!==null&&J.set(H,ue)}return J}function fe(ye,Se,Pe,Ee){var We=ye.length;Pe=Math.max(0,Pe==null?0:+Pe),Ee=Math.min(We-1,Ee==null?We-1:+Ee);var J=[];return Se.paragraphs.forEach(function(H){var ue=Math.max(Pe,H.start),Re=Math.min(Ee,H.end);if(ue<Re){for(var Be=Se.levels.slice(ue,Re+1),Ie=Re;Ie>=ue&&d(ye[Ie])&h;Ie--)Be[Ie]=H.level;for(var Ue=H.level,Ne=1/0,Ce=0;Ce<Be.length;Ce++){var Z=Be[Ce];Z>Ue&&(Ue=Z),Z<Ne&&(Ne=Z|1)}for(var L=Ue;L>=Ne;L--)for(var N=0;N<Be.length;N++)if(Be[N]>=L){for(var X=N;N+1<Be.length&&Be[N+1]>=L;)N++;N>X&&J.push([X+ue,N+ue])}}}),J}function de(ye,Se,Pe,Ee){var We=Fe(ye,Se,Pe,Ee),J=[].concat(ye);return We.forEach(function(H,ue){J[ue]=(Se.levels[H]&1?be(ye[H]):null)||ye[H]}),J.join("")}function Fe(ye,Se,Pe,Ee){for(var We=fe(ye,Se,Pe,Ee),J=[],H=0;H<ye.length;H++)J[H]=H;return We.forEach(function(ue){for(var Re=ue[0],Be=ue[1],Ie=J.slice(Re,Be+1),Ue=Ie.length;Ue--;)J[Be-Ue]=Ie[Ue]}),J}return e.closingToOpeningBracket=E,e.getBidiCharType=d,e.getBidiCharTypeName=p,e.getCanonicalBracket=S,e.getEmbeddingLevels=xe,e.getMirroredCharacter=be,e.getMirroredCharactersMap=me,e.getReorderSegments=fe,e.getReorderedIndices=Fe,e.getReorderedString=de,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}var y9=RAe;var OR=/\bvoid\s+main\s*\(\s*\)\s*{/g;function UR(n){let e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,o){let a=ht[o];return a?UR(a):i}return n.replace(e,t)}var Bi=[];for(let n=0;n<256;n++)Bi[n]=(n<16?"0":"")+n.toString(16);function LAe(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Bi[n&255]+Bi[n>>8&255]+Bi[n>>16&255]+Bi[n>>24&255]+"-"+Bi[e&255]+Bi[e>>8&255]+"-"+Bi[e>>16&15|64]+Bi[e>>24&255]+"-"+Bi[t&63|128]+Bi[t>>8&255]+"-"+Bi[t>>16&255]+Bi[t>>24&255]+Bi[i&255]+Bi[i>>8&255]+Bi[i>>16&255]+Bi[i>>24&255]).toUpperCase()}var Bu=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},BAe=Date.now(),v9=new WeakMap,w9=new Map,kAe=1e10;function tx(n,e){let t=UAe(e),i=v9.get(n);if(i||v9.set(n,i=Object.create(null)),i[t])return new i[t];let o=`_onBeforeCompile${t}`,a=function(h,A){n.onBeforeCompile.call(this,h,A);let f=this.customProgramCacheKey()+"|"+h.vertexShader+"|"+h.fragmentShader,d=w9[f];if(!d){let p=PAe(this,h,e,t);d=w9[f]=p}h.vertexShader=d.vertexShader,h.fragmentShader=d.fragmentShader,Bu(h.uniforms,this.uniforms),e.timeUniform&&(h.uniforms[e.timeUniform]={get value(){return Date.now()-BAe}}),this[o]&&this[o](h)},l=function(){return c(e.chained?n:n.clone())},c=function(h){let A=Object.create(h,u);return Object.defineProperty(A,"baseMaterial",{value:n}),Object.defineProperty(A,"id",{value:kAe++}),A.uuid=LAe(),A.uniforms=Bu({},h.uniforms,e.uniforms),A.defines=Bu({},h.defines,e.defines),A.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",A.extensions=Bu({},h.extensions,e.extensions),A._listeners=void 0,A},u={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return a},set(h){this[o]=h}},copy:{writable:!0,configurable:!0,value:function(h){return n.copy.call(this,h),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Bu(this.extensions,h.extensions),Bu(this.defines,h.defines),Bu(this.uniforms,oi.clone(h.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){let h=new n.constructor;return c(h).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let h=this._depthMaterial;return h||(h=this._depthMaterial=tx(n.isDerivedMaterial?n.getDepthMaterial():new Uc({depthPacking:Py}),e),h.defines.IS_DEPTH_MATERIAL="",h.uniforms=this.uniforms),h}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let h=this._distanceMaterial;return h||(h=this._distanceMaterial=tx(n.isDerivedMaterial?n.getDistanceMaterial():new Oc,e),h.defines.IS_DISTANCE_MATERIAL="",h.uniforms=this.uniforms),h}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:h,_distanceMaterial:A}=this;h&&h.dispose(),A&&A.dispose(),n.dispose.call(this)}}};return i[t]=l,new l}function PAe(n,{vertexShader:e,fragmentShader:t},i,o){let{vertexDefs:a,vertexMainIntro:l,vertexMainOutro:c,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:A,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:p,timeUniform:m}=i;if(a=a||"",l=l||"",c=c||"",h=h||"",A=A||"",f=f||"",(u||p)&&(e=UR(e)),(d||p)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=UR(t)),p){let b=p({vertexShader:e,fragmentShader:t});e=b.vertexShader,t=b.fragmentShader}if(d){let b=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(b.push(g),"")),f=`${d}
${b.join(`
`)}
${f}`}if(m){let b=`
uniform float ${m};
`;a=b+a,h=b+h}return u&&(e=`vec3 troika_position_${o};
vec3 troika_normal_${o};
vec2 troika_uv_${o};
${e}
`,a=`${a}
void troikaVertexTransform${o}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,l=`
troika_position_${o} = vec3(position);
troika_normal_${o} = vec3(normal);
troika_uv_${o} = vec2(uv);
troikaVertexTransform${o}(troika_position_${o}, troika_normal_${o}, troika_uv_${o});
${l}
`,e=e.replace(/\b(position|normal|uv)\b/g,(b,g,w,I)=>/\battribute\s+vec[23]\s+$/.test(I.substr(0,w))?g:`troika_${g}_${o}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${o}`))),e=b9(e,o,a,l,c),t=b9(t,o,h,A,f),{vertexShader:e,fragmentShader:t}}function b9(n,e,t,i,o){return(i||o||t)&&(n=n.replace(OR,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${o}
}`),n}function NAe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}var FAe=0,x9=new Map;function UAe(n){let e=JSON.stringify(n,NAe),t=x9.get(e);return t==null&&x9.set(e,t=++FAe),t}function OAe(n,e,t){let{defaultFontURL:i}=t,o=Object.create(null),a=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,c="[^\\S\\u00A0]",u=new RegExp(`${c}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function h(I,v){function C(){let E=S=>{console.error(`Failure loading font ${I}${I===i?"":"; trying fallback"}`,S),I!==i&&(I=i,C())};try{let S=new XMLHttpRequest;S.open("get",I,!0),S.responseType="arraybuffer",S.onload=function(){if(S.status>=400)E(new Error(S.statusText));else if(S.status>0)try{let M=n(S.response);v(M)}catch(M){E(M)}},S.onerror=E,S.send()}catch(S){E(S)}}C()}function A(I,v){I||(I=i);let C=o[I];C?C.pending?C.pending.push(v):v(C):(o[I]={pending:[v]},h(I,E=>{let S=o[I].pending;o[I]=E,S.forEach(M=>M(E))}))}function f({text:I="",font:v=i,sdfGlyphSize:C=64,fontSize:E=1,letterSpacing:S=0,lineHeight:M="normal",maxWidth:_=a,direction:T,textAlign:D="left",textIndent:R=0,whiteSpace:B="normal",overflowWrap:P="normal",anchorX:F=0,anchorY:z=0,includeCaretPositions:Q=!1,chunkedBoundsSize:V=8192,colorRanges:G=null},O,W=!1){let k=b(),Y={fontLoad:0,typesetting:0};I.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),I=I.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),E=+E,S=+S,_=+_,M=M||"normal",R=+R,A(v,te=>{let ie=isFinite(_),re=null,se=null,oe=null,le=null,xe=null,_e=null,pe=null,K=0,be=0,me=B!=="nowrap",{ascender:fe,descender:de,unitsPerEm:Fe,lineGap:ye,capHeight:Se,xHeight:Pe}=te;Y.fontLoad=b()-k;let Ee=b(),We=E/Fe;M==="normal"&&(M=(fe-de+ye)/Fe),M=M*E;let J=(M-(fe-de)*We)/2,H=-(fe*We+J),ue=Math.min(M,(fe-de)*We),Re=(fe+de)/2*We-ue/2,Be=R,Ie=new g,Ue=[Ie];te.forEachGlyph(I,E,S,(Z,L,N)=>{let X=I.charAt(N),q=Z.advanceWidth*We,ne=Ie.count,ae;if("isEmpty"in Z||(Z.isWhitespace=!!X&&new RegExp(c).test(X),Z.canBreakAfter=!!X&&u.test(X),Z.isEmpty=Z.xMin===Z.xMax||Z.yMin===Z.yMax||l.test(X)),!Z.isWhitespace&&!Z.isEmpty&&be++,me&&ie&&!Z.isWhitespace&&L+q+Be>_&&ne){if(Ie.glyphAt(ne-1).glyphObj.canBreakAfter)ae=new g,Be=-L;else for(let ce=ne;ce--;)if(ce===0&&P==="break-word"){ae=new g,Be=-L;break}else if(Ie.glyphAt(ce).glyphObj.canBreakAfter){ae=Ie.splitAt(ce+1);let $=ae.glyphAt(0).x;Be-=$;for(let Ae=ae.count;Ae--;)ae.glyphAt(Ae).x-=$;break}ae&&(Ie.isSoftWrapped=!0,Ie=ae,Ue.push(Ie),K=_)}let j=Ie.glyphAt(Ie.count);j.glyphObj=Z,j.x=L+Be,j.width=q,j.charIndex=N,X===`
`&&(Ie=new g,Ue.push(Ie),Be=-(L+q+S*E)+R)}),Ue.forEach(Z=>{for(let L=Z.count;L--;){let{glyphObj:N,x:X,width:q}=Z.glyphAt(L);if(!N.isWhitespace){Z.width=X+q,Z.width>K&&(K=Z.width);return}}});let Ne=0,Ce=0;if(F&&(typeof F=="number"?Ne=-F:typeof F=="string"&&(Ne=-K*(F==="left"?0:F==="center"?.5:F==="right"?1:p(F)))),z){if(typeof z=="number")Ce=-z;else if(typeof z=="string"){let Z=Ue.length*M;Ce=z==="top"?0:z==="top-baseline"?-H:z==="top-cap"?-H-Se*We:z==="top-ex"?-H-Pe*We:z==="middle"?Z/2:z==="bottom"?Z:z==="bottom-baseline"?Z-J+de*We:p(z)*Z}}if(!W){let Z=e.getEmbeddingLevels(I,T);re=new Uint16Array(be),se=new Float32Array(be*2),oe={},_e=[a,a,-a,-a],pe=[];let L=H;Q&&(xe=new Float32Array(I.length*3)),G&&(le=new Uint8Array(be*3));let N=0,X=-1,q=-1,ne,ae;if(Ue.forEach((j,ce)=>{let{count:$,width:Ae}=j;if($>0){let we=0;for(let vt=$;vt--&&j.glyphAt(vt).glyphObj.isWhitespace;)we++;let Ge=0,ze=0;if(D==="center")Ge=(K-Ae)/2;else if(D==="right")Ge=K-Ae;else if(D==="justify"&&j.isSoftWrapped){let vt=0;for(let st=$-we;st--;)j.glyphAt(st).glyphObj.isWhitespace&&vt++;ze=(K-Ae)/vt}if(ze||Ge){let vt=0;for(let st=0;st<$;st++){let kn=j.glyphAt(st),Pn=kn.glyphObj;kn.x+=Ge+vt,ze!==0&&Pn.isWhitespace&&st<$-we&&(vt+=ze,kn.width+=ze)}}let Ze=e.getReorderSegments(I,Z,j.glyphAt(0).charIndex,j.glyphAt(j.count-1).charIndex);for(let vt=0;vt<Ze.length;vt++){let[st,kn]=Ze[vt],Pn=1/0,kt=-1/0;for(let Rt=0;Rt<$;Rt++)if(j.glyphAt(Rt).charIndex>=st){let Si=Rt,gn=Rt;for(;gn<$;gn++){let yn=j.glyphAt(gn);if(yn.charIndex>kn)break;gn<$-we&&(Pn=Math.min(Pn,yn.x),kt=Math.max(kt,yn.x+yn.width))}for(let yn=Si;yn<gn;yn++){let Kn=j.glyphAt(yn);Kn.x=kt-(Kn.x+Kn.width-Pn)}break}}let je,at=vt=>je=vt;for(let vt=0;vt<$;vt++){let st=j.glyphAt(vt);je=st.glyphObj;let kn=je.index,Pn=Z.levels[st.charIndex]&1;if(Pn){let kt=e.getMirroredCharacter(I[st.charIndex]);kt&&te.forEachGlyph(kt,0,0,at)}if(Q){let{charIndex:kt}=st,Rt=st.x+Ne,Si=st.x+st.width+Ne;xe[kt*3]=Pn?Si:Rt,xe[kt*3+1]=Pn?Rt:Si,xe[kt*3+2]=L+Re+Ce;let gn=kt-X;gn>1&&m(xe,X,gn),X=kt}if(G){let{charIndex:kt}=st;for(;kt>q;)q++,G.hasOwnProperty(q)&&(ae=G[q])}if(!je.isWhitespace&&!je.isEmpty){let kt=N++;oe[kn]||(oe[kn]={path:je.path,pathBounds:[je.xMin,je.yMin,je.xMax,je.yMax]});let Rt=st.x+Ne,Si=L+Ce;se[kt*2]=Rt,se[kt*2+1]=Si;let gn=Rt+je.xMin*We,yn=Si+je.yMin*We,Kn=Rt+je.xMax*We,Mr=Si+je.yMax*We;gn<_e[0]&&(_e[0]=gn),yn<_e[1]&&(_e[1]=yn),Kn>_e[2]&&(_e[2]=Kn),Mr>_e[3]&&(_e[3]=Mr),kt%V===0&&(ne={start:kt,end:kt,rect:[a,a,-a,-a]},pe.push(ne)),ne.end++;let ki=ne.rect;if(gn<ki[0]&&(ki[0]=gn),yn<ki[1]&&(ki[1]=yn),Kn>ki[2]&&(ki[2]=Kn),Mr>ki[3]&&(ki[3]=Mr),re[kt]=kn,G){let ee=kt*3;le[ee]=ae>>16&255,le[ee+1]=ae>>8&255,le[ee+2]=ae&255}}}}L-=M}),xe){let j=I.length-X;j>1&&m(xe,X,j)}}Y.typesetting=b()-Ee,O({glyphIds:re,glyphPositions:se,glyphData:oe,caretPositions:xe,caretHeight:ue,glyphColors:le,chunkedBounds:pe,fontSize:E,unitsPerEm:Fe,ascender:fe*We,descender:de*We,capHeight:Se*We,xHeight:Pe*We,lineHeight:M,topBaseline:H,blockBounds:[Ne,Ce-Ue.length*M,Ne+K,Ce],visibleBounds:_e,timings:Y})})}function d(I,v){f(I,C=>{let[E,S,M,_]=C.blockBounds;v({width:M-E,height:_-S})},{metricsOnly:!0})}function p(I){let v=I.match(/^([\d.]+)%$/),C=v?parseFloat(v[1]):NaN;return isNaN(C)?0:C/100}function m(I,v,C){let E=I[v*3],S=I[v*3+1],M=I[v*3+2],_=(S-E)/C;for(let T=0;T<C;T++){let D=(v+T)*3;I[D]=E+_*T,I[D+1]=E+_*(T+1),I[D+2]=M}}function b(){return(self.performance||Date).now()}function g(){this.data=[]}let w=["glyphObj","x","width","charIndex"];return g.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/w.length)},glyphAt(I){let v=g.flyweight;return v.data=this.data,v.index=I,v},splitAt(I){let v=new g;return v.data=this.data.splice(I*w.length),v}},g.flyweight=w.reduce((I,v,C,E)=>(Object.defineProperty(I,v,{get(){return this.data[this.index*w.length+C]},set(S){this.data[this.index*w.length+C]=S}}),I),{data:null,index:0}),{typeset:f,measure:d,loadFont:A}}var Pu=()=>(self.performance||Date).now(),ax=FR(),C9;function QAe(n,e,t,i,o,a,l,c,u,h,A=!0){return A?zAe(n,e,t,i,o,a,l,c,u,h).then(null,f=>(C9||(console.warn("WebGL SDF generation failed, falling back to JS",f),C9=!0),E9(n,e,t,i,o,a,l,c,u,h))):E9(n,e,t,i,o,a,l,c,u,h)}var rx=[],GAe=5,HR=0;function B9(){let n=Pu();for(;rx.length&&Pu()-n<GAe;)rx.shift()();HR=rx.length?setTimeout(B9,0):0}var zAe=(...n)=>new Promise((e,t)=>{rx.push(()=>{let i=Pu();try{ax.webgl.generateIntoCanvas(...n),e({timing:Pu()-i})}catch(o){t(o)}}),HR||(HR=setTimeout(B9,0))}),HAe=4,VAe=2e3,S9={},WAe=0;function E9(n,e,t,i,o,a,l,c,u,h){let A="TroikaTextSDFGenerator_JS_"+WAe++%HAe,f=S9[A];return f||(f=S9[A]={workerModule:cf({name:A,workerId:A,dependencies:[FR,Pu],init(d,p){let m=d().javascript.generate;return function(...b){let g=p();return{textureData:m(...b),timing:p()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,i,o,a).then(({textureData:d,timing:p})=>{let m=Pu(),b=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)b[g*4+h]=d[g];return ax.webglUtils.renderImageData(l,b,c,u,n,e,1<<3-h),p+=Pu()-m,--f.requests===0&&(f.idleTimer=setTimeout(()=>{g9(A)},VAe)),{timing:p}})}function XAe(n){n._warm||(ax.webgl.isSupported(n),n._warm=!0)}var YAe=ax.webglUtils.resizeWebGLCanvasWithoutClearing;function ZAe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(o){var a=e._bin,l=new Uint8Array(o);if(a.readASCII(l,0,4)=="ttcf"){var c=4;a.readUshort(l,c),c+=2,a.readUshort(l,c),c+=2;var u=a.readUint(l,c);c+=4;for(var h=[],A=0;A<u;A++){var f=a.readUint(l,c);c+=4,h.push(e._readFont(l,f))}return h}return[e._readFont(l,0)]},_readFont:function(o,a){var l=e._bin,c=a;l.readFixed(o,a),a+=4;var u=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2;for(var h=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],A={_data:o,_offset:c},f={},d=0;d<u;d++){var p=l.readASCII(o,a,4);a+=4,l.readUint(o,a),a+=4;var m=l.readUint(o,a);a+=4;var b=l.readUint(o,a);a+=4,f[p]={offset:m,length:b}}for(d=0;d<h.length;d++){var g=h[d];f[g]&&(A[g.trim()]=e[g.trim()].parse(o,f[g].offset,f[g].length,A))}return A},_tabOffset:function(o,a,l){for(var c=e._bin,u=c.readUshort(o,l+4),h=l+12,A=0;A<u;A++){var f=c.readASCII(o,h,4);h+=4,c.readUint(o,h),h+=4;var d=c.readUint(o,h);if(h+=4,c.readUint(o,h),h+=4,f==a)return d}return 0}};e._bin={readFixed:function(o,a){return(o[a]<<8|o[a+1])+(o[a+2]<<8|o[a+3])/65540},readF2dot14:function(o,a){return e._bin.readShort(o,a)/16384},readInt:function(o,a){return e._bin._view(o).getInt32(a)},readInt8:function(o,a){return e._bin._view(o).getInt8(a)},readShort:function(o,a){return e._bin._view(o).getInt16(a)},readUshort:function(o,a){return e._bin._view(o).getUint16(a)},readUshorts:function(o,a,l){for(var c=[],u=0;u<l;u++)c.push(e._bin.readUshort(o,a+2*u));return c},readUint:function(o,a){return e._bin._view(o).getUint32(a)},readUint64:function(o,a){return 4294967296*e._bin.readUint(o,a)+e._bin.readUint(o,a+4)},readASCII:function(o,a,l){for(var c="",u=0;u<l;u++)c+=String.fromCharCode(o[a+u]);return c},readUnicode:function(o,a,l){for(var c="",u=0;u<l;u++){var h=o[a++]<<8|o[a++];c+=String.fromCharCode(h)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(o,a,l){var c=e._bin._tdec;return c&&a==0&&l==o.length?c.decode(o):e._bin.readASCII(o,a,l)},readBytes:function(o,a,l){for(var c=[],u=0;u<l;u++)c.push(o[a+u]);return c},readASCIIArray:function(o,a,l){for(var c=[],u=0;u<l;u++)c.push(String.fromCharCode(o[a+u]));return c},_view:function(o){return o._dataView||(o._dataView=o.buffer?new DataView(o.buffer,o.byteOffset,o.byteLength):new DataView(new Uint8Array(o).buffer))}},e._lctf={},e._lctf.parse=function(o,a,l,c,u){var h=e._bin,A={},f=a;h.readFixed(o,a),a+=4;var d=h.readUshort(o,a);a+=2;var p=h.readUshort(o,a);a+=2;var m=h.readUshort(o,a);return a+=2,A.scriptList=e._lctf.readScriptList(o,f+d),A.featureList=e._lctf.readFeatureList(o,f+p),A.lookupList=e._lctf.readLookupList(o,f+m,u),A},e._lctf.readLookupList=function(o,a,l){var c=e._bin,u=a,h=[],A=c.readUshort(o,a);a+=2;for(var f=0;f<A;f++){var d=c.readUshort(o,a);a+=2;var p=e._lctf.readLookupTable(o,u+d,l);h.push(p)}return h},e._lctf.readLookupTable=function(o,a,l){var c=e._bin,u=a,h={tabs:[]};h.ltype=c.readUshort(o,a),a+=2,h.flag=c.readUshort(o,a),a+=2;var A=c.readUshort(o,a);a+=2;for(var f=h.ltype,d=0;d<A;d++){var p=c.readUshort(o,a);a+=2;var m=l(o,f,u+p,h);h.tabs.push(m)}return h},e._lctf.numOfOnes=function(o){for(var a=0,l=0;l<32;l++)o>>>l&1&&a++;return a},e._lctf.readClassDef=function(o,a){var l=e._bin,c=[],u=l.readUshort(o,a);if(a+=2,u==1){var h=l.readUshort(o,a);a+=2;var A=l.readUshort(o,a);a+=2;for(var f=0;f<A;f++)c.push(h+f),c.push(h+f),c.push(l.readUshort(o,a)),a+=2}if(u==2){var d=l.readUshort(o,a);for(a+=2,f=0;f<d;f++)c.push(l.readUshort(o,a)),a+=2,c.push(l.readUshort(o,a)),a+=2,c.push(l.readUshort(o,a)),a+=2}return c},e._lctf.getInterval=function(o,a){for(var l=0;l<o.length;l+=3){var c=o[l],u=o[l+1];if(o[l+2],c<=a&&a<=u)return l}return-1},e._lctf.readCoverage=function(o,a){var l=e._bin,c={};c.fmt=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);return a+=2,c.fmt==1&&(c.tab=l.readUshorts(o,a,u)),c.fmt==2&&(c.tab=l.readUshorts(o,a,3*u)),c},e._lctf.coverageIndex=function(o,a){var l=o.tab;if(o.fmt==1)return l.indexOf(a);if(o.fmt==2){var c=e._lctf.getInterval(l,a);if(c!=-1)return l[c+2]+(a-l[c])}return-1},e._lctf.readFeatureList=function(o,a){var l=e._bin,c=a,u=[],h=l.readUshort(o,a);a+=2;for(var A=0;A<h;A++){var f=l.readASCII(o,a,4);a+=4;var d=l.readUshort(o,a);a+=2;var p=e._lctf.readFeatureTable(o,c+d);p.tag=f.trim(),u.push(p)}return u},e._lctf.readFeatureTable=function(o,a){var l=e._bin,c=a,u={},h=l.readUshort(o,a);a+=2,h>0&&(u.featureParams=c+h);var A=l.readUshort(o,a);a+=2,u.tab=[];for(var f=0;f<A;f++)u.tab.push(l.readUshort(o,a+2*f));return u},e._lctf.readScriptList=function(o,a){var l=e._bin,c=a,u={},h=l.readUshort(o,a);a+=2;for(var A=0;A<h;A++){var f=l.readASCII(o,a,4);a+=4;var d=l.readUshort(o,a);a+=2,u[f.trim()]=e._lctf.readScriptTable(o,c+d)}return u},e._lctf.readScriptTable=function(o,a){var l=e._bin,c=a,u={},h=l.readUshort(o,a);a+=2,u.default=e._lctf.readLangSysTable(o,c+h);var A=l.readUshort(o,a);a+=2;for(var f=0;f<A;f++){var d=l.readASCII(o,a,4);a+=4;var p=l.readUshort(o,a);a+=2,u[d.trim()]=e._lctf.readLangSysTable(o,c+p)}return u},e._lctf.readLangSysTable=function(o,a){var l=e._bin,c={};l.readUshort(o,a),a+=2,c.reqFeature=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);return a+=2,c.features=l.readUshorts(o,a,u),c},e.CFF={},e.CFF.parse=function(o,a,l){var c=e._bin;(o=new Uint8Array(o.buffer,a,l))[a=0],o[++a],o[++a],o[++a],a++;var u=[];a=e.CFF.readIndex(o,a,u);for(var h=[],A=0;A<u.length-1;A++)h.push(c.readASCII(o,a+u[A],u[A+1]-u[A]));a+=u[u.length-1];var f=[];a=e.CFF.readIndex(o,a,f);var d=[];for(A=0;A<f.length-1;A++)d.push(e.CFF.readDict(o,a+f[A],a+f[A+1]));a+=f[f.length-1];var p=d[0],m=[];a=e.CFF.readIndex(o,a,m);var b=[];for(A=0;A<m.length-1;A++)b.push(c.readASCII(o,a+m[A],m[A+1]-m[A]));if(a+=m[m.length-1],e.CFF.readSubrs(o,a,p),p.CharStrings){a=p.CharStrings,m=[],a=e.CFF.readIndex(o,a,m);var g=[];for(A=0;A<m.length-1;A++)g.push(c.readBytes(o,a+m[A],m[A+1]-m[A]));p.CharStrings=g}if(p.ROS){a=p.FDArray;var w=[];for(a=e.CFF.readIndex(o,a,w),p.FDArray=[],A=0;A<w.length-1;A++){var I=e.CFF.readDict(o,a+w[A],a+w[A+1]);e.CFF._readFDict(o,I,b),p.FDArray.push(I)}a+=w[w.length-1],a=p.FDSelect,p.FDSelect=[];var v=o[a];if(a++,v!=3)throw v;var C=c.readUshort(o,a);for(a+=2,A=0;A<C+1;A++)p.FDSelect.push(c.readUshort(o,a),o[a+2]),a+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(o,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(o,p.charset,p.CharStrings.length)),e.CFF._readFDict(o,p,b),p},e.CFF._readFDict=function(o,a,l){var c;for(var u in a.Private&&(c=a.Private[1],a.Private=e.CFF.readDict(o,c,c+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(o,c+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(a[u]=l[a[u]-426+35])},e.CFF.readSubrs=function(o,a,l){var c=e._bin,u=[];a=e.CFF.readIndex(o,a,u);var h,A=u.length;h=A<1240?107:A<33900?1131:32768,l.Bias=h,l.Subrs=[];for(var f=0;f<u.length-1;f++)l.Subrs.push(c.readBytes(o,a+u[f],u[f+1]-u[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(o,a){for(var l=0;l<o.charset.length;l++)if(o.charset[l]==a)return l;return-1},e.CFF.glyphBySE=function(o,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(o,e.CFF.tableSE[a])},e.CFF.readEncoding=function(o,a,l){e._bin;var c=[".notdef"],u=o[a];if(a++,u!=0)throw"error: unknown encoding format: "+u;var h=o[a];a++;for(var A=0;A<h;A++)c.push(o[a+A]);return c},e.CFF.readCharset=function(o,a,l){var c=e._bin,u=[".notdef"],h=o[a];if(a++,h==0)for(var A=0;A<l;A++){var f=c.readUshort(o,a);a+=2,u.push(f)}else{if(h!=1&&h!=2)throw"error: format: "+h;for(;u.length<l;){f=c.readUshort(o,a),a+=2;var d=0;for(h==1?(d=o[a],a++):(d=c.readUshort(o,a),a+=2),A=0;A<=d;A++)u.push(f),f++}}return u},e.CFF.readIndex=function(o,a,l){var c=e._bin,u=c.readUshort(o,a)+1,h=o[a+=2];if(a++,h==1)for(var A=0;A<u;A++)l.push(o[a+A]);else if(h==2)for(A=0;A<u;A++)l.push(c.readUshort(o,a+2*A));else if(h==3)for(A=0;A<u;A++)l.push(16777215&c.readUint(o,a+3*A-1));else if(u!=1)throw"unsupported offset size: "+h+", count: "+u;return(a+=u*h)-1},e.CFF.getCharString=function(o,a,l){var c=e._bin,u=o[a],h=o[a+1];o[a+2],o[a+3],o[a+4];var A=1,f=null,d=null;u<=20&&(f=u,A=1),u==12&&(f=100*u+h,A=2),21<=u&&u<=27&&(f=u,A=1),u==28&&(d=c.readShort(o,a+1),A=3),29<=u&&u<=31&&(f=u,A=1),32<=u&&u<=246&&(d=u-139,A=1),247<=u&&u<=250&&(d=256*(u-247)+h+108,A=2),251<=u&&u<=254&&(d=256*-(u-251)-h-108,A=2),u==255&&(d=c.readInt(o,a+1)/65535,A=5),l.val=d??"o"+f,l.size=A},e.CFF.readCharString=function(o,a,l){for(var c=a+l,u=e._bin,h=[];a<c;){var A=o[a],f=o[a+1];o[a+2],o[a+3],o[a+4];var d=1,p=null,m=null;A<=20&&(p=A,d=1),A==12&&(p=100*A+f,d=2),A!=19&&A!=20||(p=A,d=2),21<=A&&A<=27&&(p=A,d=1),A==28&&(m=u.readShort(o,a+1),d=3),29<=A&&A<=31&&(p=A,d=1),32<=A&&A<=246&&(m=A-139,d=1),247<=A&&A<=250&&(m=256*(A-247)+f+108,d=2),251<=A&&A<=254&&(m=256*-(A-251)-f-108,d=2),A==255&&(m=u.readInt(o,a+1)/65535,d=5),h.push(m??"o"+p),a+=d}return h},e.CFF.readDict=function(o,a,l){for(var c=e._bin,u={},h=[];a<l;){var A=o[a],f=o[a+1];o[a+2],o[a+3],o[a+4];var d=1,p=null,m=null;if(A==28&&(m=c.readShort(o,a+1),d=3),A==29&&(m=c.readInt(o,a+1),d=5),32<=A&&A<=246&&(m=A-139,d=1),247<=A&&A<=250&&(m=256*(A-247)+f+108,d=2),251<=A&&A<=254&&(m=256*-(A-251)-f-108,d=2),A==255)throw m=c.readInt(o,a+1)/65535,d=5,"unknown number";if(A==30){var b=[];for(d=1;;){var g=o[a+d];d++;var w=g>>4,I=15&g;if(w!=15&&b.push(w),I!=15&&b.push(I),I==15)break}for(var v="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],E=0;E<b.length;E++)v+=C[b[E]];m=parseFloat(v)}A<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][A],d=1,A==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),p!=null?(u[p]=h.length==1?h[0]:h,h=[]):h.push(m),a+=d}return u},e.cmap={},e.cmap.parse=function(o,a,l){o=new Uint8Array(o.buffer,a,l),a=0;var c=e._bin,u={};c.readUshort(o,a),a+=2;var h=c.readUshort(o,a);a+=2;var A=[];u.tables=[];for(var f=0;f<h;f++){var d=c.readUshort(o,a);a+=2;var p=c.readUshort(o,a);a+=2;var m=c.readUint(o,a);a+=4;var b="p"+d+"e"+p,g=A.indexOf(m);if(g==-1){var w;g=u.tables.length,A.push(m);var I=c.readUshort(o,m);I==0?w=e.cmap.parse0(o,m):I==4?w=e.cmap.parse4(o,m):I==6?w=e.cmap.parse6(o,m):I==12?w=e.cmap.parse12(o,m):console.debug("unknown format: "+I,d,p,m),u.tables.push(w)}if(u[b]!=null)throw"multiple tables for one platform+encoding";u[b]=g}return u},e.cmap.parse0=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2,c.map=[];for(var h=0;h<u-6;h++)c.map.push(o[a+h]);return c},e.cmap.parse4=function(o,a){var l=e._bin,c=a,u={};u.format=l.readUshort(o,a),a+=2;var h=l.readUshort(o,a);a+=2,l.readUshort(o,a),a+=2;var A=l.readUshort(o,a);a+=2;var f=A/2;u.searchRange=l.readUshort(o,a),a+=2,u.entrySelector=l.readUshort(o,a),a+=2,u.rangeShift=l.readUshort(o,a),a+=2,u.endCount=l.readUshorts(o,a,f),a+=2*f,a+=2,u.startCount=l.readUshorts(o,a,f),a+=2*f,u.idDelta=[];for(var d=0;d<f;d++)u.idDelta.push(l.readShort(o,a)),a+=2;for(u.idRangeOffset=l.readUshorts(o,a,f),a+=2*f,u.glyphIdArray=[];a<c+h;)u.glyphIdArray.push(l.readUshort(o,a)),a+=2;return u},e.cmap.parse6=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,l.readUshort(o,a),a+=2,c.firstCode=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);a+=2,c.glyphIdArray=[];for(var h=0;h<u;h++)c.glyphIdArray.push(l.readUshort(o,a)),a+=2;return c},e.cmap.parse12=function(o,a){var l=e._bin,c={};c.format=l.readUshort(o,a),a+=2,a+=2,l.readUint(o,a),a+=4,l.readUint(o,a),a+=4;var u=l.readUint(o,a);a+=4,c.groups=[];for(var h=0;h<u;h++){var A=a+12*h,f=l.readUint(o,A+0),d=l.readUint(o,A+4),p=l.readUint(o,A+8);c.groups.push([f,d,p])}return c},e.glyf={},e.glyf.parse=function(o,a,l,c){for(var u=[],h=0;h<c.maxp.numGlyphs;h++)u.push(null);return u},e.glyf._parseGlyf=function(o,a){var l=e._bin,c=o._data,u=e._tabOffset(c,"glyf",o._offset)+o.loca[a];if(o.loca[a]==o.loca[a+1])return null;var h={};if(h.noc=l.readShort(c,u),u+=2,h.xMin=l.readShort(c,u),u+=2,h.yMin=l.readShort(c,u),u+=2,h.xMax=l.readShort(c,u),u+=2,h.yMax=l.readShort(c,u),u+=2,h.xMin>=h.xMax||h.yMin>=h.yMax)return null;if(h.noc>0){h.endPts=[];for(var A=0;A<h.noc;A++)h.endPts.push(l.readUshort(c,u)),u+=2;var f=l.readUshort(c,u);if(u+=2,c.length-u<f)return null;h.instructions=l.readBytes(c,u,f),u+=f;var d=h.endPts[h.noc-1]+1;for(h.flags=[],A=0;A<d;A++){var p=c[u];if(u++,h.flags.push(p),(8&p)!=0){var m=c[u];u++;for(var b=0;b<m;b++)h.flags.push(p),A++}}for(h.xs=[],A=0;A<d;A++){var g=(2&h.flags[A])!=0,w=(16&h.flags[A])!=0;g?(h.xs.push(w?c[u]:-c[u]),u++):w?h.xs.push(0):(h.xs.push(l.readShort(c,u)),u+=2)}for(h.ys=[],A=0;A<d;A++)g=(4&h.flags[A])!=0,w=(32&h.flags[A])!=0,g?(h.ys.push(w?c[u]:-c[u]),u++):w?h.ys.push(0):(h.ys.push(l.readShort(c,u)),u+=2);var I=0,v=0;for(A=0;A<d;A++)I+=h.xs[A],v+=h.ys[A],h.xs[A]=I,h.ys[A]=v}else{var C;h.parts=[];do{C=l.readUshort(c,u),u+=2;var E={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(h.parts.push(E),E.glyphIndex=l.readUshort(c,u),u+=2,1&C){var S=l.readShort(c,u);u+=2;var M=l.readShort(c,u);u+=2}else S=l.readInt8(c,u),u++,M=l.readInt8(c,u),u++;2&C?(E.m.tx=S,E.m.ty=M):(E.p1=S,E.p2=M),8&C?(E.m.a=E.m.d=l.readF2dot14(c,u),u+=2):64&C?(E.m.a=l.readF2dot14(c,u),u+=2,E.m.d=l.readF2dot14(c,u),u+=2):128&C&&(E.m.a=l.readF2dot14(c,u),u+=2,E.m.b=l.readF2dot14(c,u),u+=2,E.m.c=l.readF2dot14(c,u),u+=2,E.m.d=l.readF2dot14(c,u),u+=2)}while(32&C);if(256&C){var _=l.readUshort(c,u);for(u+=2,h.instr=[],A=0;A<_;A++)h.instr.push(c[u]),u++}}return h},e.GPOS={},e.GPOS.parse=function(o,a,l,c){return e._lctf.parse(o,a,l,c,e.GPOS.subt)},e.GPOS.subt=function(o,a,l,c){var u=e._bin,h=l,A={};if(A.fmt=u.readUshort(o,l),l+=2,a==1||a==2||a==3||a==7||a==8&&A.fmt<=2){var f=u.readUshort(o,l);l+=2,A.coverage=e._lctf.readCoverage(o,f+h)}if(a==1&&A.fmt==1){var d=u.readUshort(o,l);l+=2;var p=e._lctf.numOfOnes(d);d!=0&&(A.pos=e.GPOS.readValueRecord(o,l,d))}else if(a==2&&A.fmt>=1&&A.fmt<=2){d=u.readUshort(o,l),l+=2;var m=u.readUshort(o,l);l+=2,p=e._lctf.numOfOnes(d);var b=e._lctf.numOfOnes(m);if(A.fmt==1){A.pairsets=[];var g=u.readUshort(o,l);l+=2;for(var w=0;w<g;w++){var I=h+u.readUshort(o,l);l+=2;var v=u.readUshort(o,I);I+=2;for(var C=[],E=0;E<v;E++){var S=u.readUshort(o,I);I+=2,d!=0&&(B=e.GPOS.readValueRecord(o,I,d),I+=2*p),m!=0&&(P=e.GPOS.readValueRecord(o,I,m),I+=2*b),C.push({gid2:S,val1:B,val2:P})}A.pairsets.push(C)}}if(A.fmt==2){var M=u.readUshort(o,l);l+=2;var _=u.readUshort(o,l);l+=2;var T=u.readUshort(o,l);l+=2;var D=u.readUshort(o,l);for(l+=2,A.classDef1=e._lctf.readClassDef(o,h+M),A.classDef2=e._lctf.readClassDef(o,h+_),A.matrix=[],w=0;w<T;w++){var R=[];for(E=0;E<D;E++){var B=null,P=null;d!=0&&(B=e.GPOS.readValueRecord(o,l,d),l+=2*p),m!=0&&(P=e.GPOS.readValueRecord(o,l,m),l+=2*b),R.push({val1:B,val2:P})}A.matrix.push(R)}}}else{if(a==9&&A.fmt==1){var F=u.readUshort(o,l);l+=2;var z=u.readUint(o,l);if(l+=4,c.ltype==9)c.ltype=F;else if(c.ltype!=F)throw"invalid extension substitution";return e.GPOS.subt(o,c.ltype,h+z)}console.debug("unsupported GPOS table LookupType",a,"format",A.fmt)}return A},e.GPOS.readValueRecord=function(o,a,l){var c=e._bin,u=[];return u.push(1&l?c.readShort(o,a):0),a+=1&l?2:0,u.push(2&l?c.readShort(o,a):0),a+=2&l?2:0,u.push(4&l?c.readShort(o,a):0),a+=4&l?2:0,u.push(8&l?c.readShort(o,a):0),a+=8&l?2:0,u},e.GSUB={},e.GSUB.parse=function(o,a,l,c){return e._lctf.parse(o,a,l,c,e.GSUB.subt)},e.GSUB.subt=function(o,a,l,c){var u=e._bin,h=l,A={};if(A.fmt=u.readUshort(o,l),l+=2,a!=1&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==4||a==5&&A.fmt<=2||a==6&&A.fmt<=2){var f=u.readUshort(o,l);l+=2,A.coverage=e._lctf.readCoverage(o,h+f)}if(a==1&&A.fmt>=1&&A.fmt<=2){if(A.fmt==1)A.delta=u.readShort(o,l),l+=2;else if(A.fmt==2){var d=u.readUshort(o,l);l+=2,A.newg=u.readUshorts(o,l,d),l+=2*A.newg.length}}else if(a==4){A.vals=[],d=u.readUshort(o,l),l+=2;for(var p=0;p<d;p++){var m=u.readUshort(o,l);l+=2,A.vals.push(e.GSUB.readLigatureSet(o,h+m))}}else if(a==5&&A.fmt==2){if(A.fmt==2){var b=u.readUshort(o,l);l+=2,A.cDef=e._lctf.readClassDef(o,h+b),A.scset=[];var g=u.readUshort(o,l);for(l+=2,p=0;p<g;p++){var w=u.readUshort(o,l);l+=2,A.scset.push(w==0?null:e.GSUB.readSubClassSet(o,h+w))}}}else if(a==6&&A.fmt==3){if(A.fmt==3){for(p=0;p<3;p++){d=u.readUshort(o,l),l+=2;for(var I=[],v=0;v<d;v++)I.push(e._lctf.readCoverage(o,h+u.readUshort(o,l+2*v)));l+=2*d,p==0&&(A.backCvg=I),p==1&&(A.inptCvg=I),p==2&&(A.ahedCvg=I)}d=u.readUshort(o,l),l+=2,A.lookupRec=e.GSUB.readSubstLookupRecords(o,l,d)}}else{if(a==7&&A.fmt==1){var C=u.readUshort(o,l);l+=2;var E=u.readUint(o,l);if(l+=4,c.ltype==9)c.ltype=C;else if(c.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(o,c.ltype,h+E)}console.debug("unsupported GSUB table LookupType",a,"format",A.fmt)}return A},e.GSUB.readSubClassSet=function(o,a){var l=e._bin.readUshort,c=a,u=[],h=l(o,a);a+=2;for(var A=0;A<h;A++){var f=l(o,a);a+=2,u.push(e.GSUB.readSubClassRule(o,c+f))}return u},e.GSUB.readSubClassRule=function(o,a){var l=e._bin.readUshort,c={},u=l(o,a),h=l(o,a+=2);a+=2,c.input=[];for(var A=0;A<u-1;A++)c.input.push(l(o,a)),a+=2;return c.substLookupRecords=e.GSUB.readSubstLookupRecords(o,a,h),c},e.GSUB.readSubstLookupRecords=function(o,a,l){for(var c=e._bin.readUshort,u=[],h=0;h<l;h++)u.push(c(o,a),c(o,a+2)),a+=4;return u},e.GSUB.readChainSubClassSet=function(o,a){var l=e._bin,c=a,u=[],h=l.readUshort(o,a);a+=2;for(var A=0;A<h;A++){var f=l.readUshort(o,a);a+=2,u.push(e.GSUB.readChainSubClassRule(o,c+f))}return u},e.GSUB.readChainSubClassRule=function(o,a){for(var l=e._bin,c={},u=["backtrack","input","lookahead"],h=0;h<u.length;h++){var A=l.readUshort(o,a);a+=2,h==1&&A--,c[u[h]]=l.readUshorts(o,a,A),a+=2*c[u[h]].length}return A=l.readUshort(o,a),a+=2,c.subst=l.readUshorts(o,a,2*A),a+=2*c.subst.length,c},e.GSUB.readLigatureSet=function(o,a){var l=e._bin,c=a,u=[],h=l.readUshort(o,a);a+=2;for(var A=0;A<h;A++){var f=l.readUshort(o,a);a+=2,u.push(e.GSUB.readLigature(o,c+f))}return u},e.GSUB.readLigature=function(o,a){var l=e._bin,c={chain:[]};c.nglyph=l.readUshort(o,a),a+=2;var u=l.readUshort(o,a);a+=2;for(var h=0;h<u-1;h++)c.chain.push(l.readUshort(o,a)),a+=2;return c},e.head={},e.head.parse=function(o,a,l){var c=e._bin,u={};return c.readFixed(o,a),a+=4,u.fontRevision=c.readFixed(o,a),a+=4,c.readUint(o,a),a+=4,c.readUint(o,a),a+=4,u.flags=c.readUshort(o,a),a+=2,u.unitsPerEm=c.readUshort(o,a),a+=2,u.created=c.readUint64(o,a),a+=8,u.modified=c.readUint64(o,a),a+=8,u.xMin=c.readShort(o,a),a+=2,u.yMin=c.readShort(o,a),a+=2,u.xMax=c.readShort(o,a),a+=2,u.yMax=c.readShort(o,a),a+=2,u.macStyle=c.readUshort(o,a),a+=2,u.lowestRecPPEM=c.readUshort(o,a),a+=2,u.fontDirectionHint=c.readShort(o,a),a+=2,u.indexToLocFormat=c.readShort(o,a),a+=2,u.glyphDataFormat=c.readShort(o,a),a+=2,u},e.hhea={},e.hhea.parse=function(o,a,l){var c=e._bin,u={};return c.readFixed(o,a),a+=4,u.ascender=c.readShort(o,a),a+=2,u.descender=c.readShort(o,a),a+=2,u.lineGap=c.readShort(o,a),a+=2,u.advanceWidthMax=c.readUshort(o,a),a+=2,u.minLeftSideBearing=c.readShort(o,a),a+=2,u.minRightSideBearing=c.readShort(o,a),a+=2,u.xMaxExtent=c.readShort(o,a),a+=2,u.caretSlopeRise=c.readShort(o,a),a+=2,u.caretSlopeRun=c.readShort(o,a),a+=2,u.caretOffset=c.readShort(o,a),a+=2,a+=8,u.metricDataFormat=c.readShort(o,a),a+=2,u.numberOfHMetrics=c.readUshort(o,a),a+=2,u},e.hmtx={},e.hmtx.parse=function(o,a,l,c){for(var u=e._bin,h={aWidth:[],lsBearing:[]},A=0,f=0,d=0;d<c.maxp.numGlyphs;d++)d<c.hhea.numberOfHMetrics&&(A=u.readUshort(o,a),a+=2,f=u.readShort(o,a),a+=2),h.aWidth.push(A),h.lsBearing.push(f);return h},e.kern={},e.kern.parse=function(o,a,l,c){var u=e._bin,h=u.readUshort(o,a);if(a+=2,h==1)return e.kern.parseV1(o,a-2,l,c);var A=u.readUshort(o,a);a+=2;for(var f={glyph1:[],rval:[]},d=0;d<A;d++){a+=2,l=u.readUshort(o,a),a+=2;var p=u.readUshort(o,a);a+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;a=e.kern.readFormat0(o,a,f)}return f},e.kern.parseV1=function(o,a,l,c){var u=e._bin;u.readFixed(o,a),a+=4;var h=u.readUint(o,a);a+=4;for(var A={glyph1:[],rval:[]},f=0;f<h;f++){u.readUint(o,a),a+=4;var d=u.readUshort(o,a);a+=2,u.readUshort(o,a),a+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;a=e.kern.readFormat0(o,a,A)}return A},e.kern.readFormat0=function(o,a,l){var c=e._bin,u=-1,h=c.readUshort(o,a);a+=2,c.readUshort(o,a),a+=2,c.readUshort(o,a),a+=2,c.readUshort(o,a),a+=2;for(var A=0;A<h;A++){var f=c.readUshort(o,a);a+=2;var d=c.readUshort(o,a);a+=2;var p=c.readShort(o,a);a+=2,f!=u&&(l.glyph1.push(f),l.rval.push({glyph2:[],vals:[]}));var m=l.rval[l.rval.length-1];m.glyph2.push(d),m.vals.push(p),u=f}return a},e.loca={},e.loca.parse=function(o,a,l,c){var u=e._bin,h=[],A=c.head.indexToLocFormat,f=c.maxp.numGlyphs+1;if(A==0)for(var d=0;d<f;d++)h.push(u.readUshort(o,a+(d<<1))<<1);if(A==1)for(d=0;d<f;d++)h.push(u.readUint(o,a+(d<<2)));return h},e.maxp={},e.maxp.parse=function(o,a,l){var c=e._bin,u={},h=c.readUint(o,a);return a+=4,u.numGlyphs=c.readUshort(o,a),a+=2,h==65536&&(u.maxPoints=c.readUshort(o,a),a+=2,u.maxContours=c.readUshort(o,a),a+=2,u.maxCompositePoints=c.readUshort(o,a),a+=2,u.maxCompositeContours=c.readUshort(o,a),a+=2,u.maxZones=c.readUshort(o,a),a+=2,u.maxTwilightPoints=c.readUshort(o,a),a+=2,u.maxStorage=c.readUshort(o,a),a+=2,u.maxFunctionDefs=c.readUshort(o,a),a+=2,u.maxInstructionDefs=c.readUshort(o,a),a+=2,u.maxStackElements=c.readUshort(o,a),a+=2,u.maxSizeOfInstructions=c.readUshort(o,a),a+=2,u.maxComponentElements=c.readUshort(o,a),a+=2,u.maxComponentDepth=c.readUshort(o,a),a+=2),u},e.name={},e.name.parse=function(o,a,l){var c=e._bin,u={};c.readUshort(o,a),a+=2;var h=c.readUshort(o,a);a+=2,c.readUshort(o,a);for(var A,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=a+=2,p=0;p<h;p++){var m=c.readUshort(o,a);a+=2;var b=c.readUshort(o,a);a+=2;var g=c.readUshort(o,a);a+=2;var w=c.readUshort(o,a);a+=2;var I=c.readUshort(o,a);a+=2;var v=c.readUshort(o,a);a+=2;var C,E=f[w],S=d+12*h+v;if(m==0)C=c.readUnicode(o,S,I/2);else if(m==3&&b==0)C=c.readUnicode(o,S,I/2);else if(b==0)C=c.readASCII(o,S,I);else if(b==1)C=c.readUnicode(o,S,I/2);else if(b==3)C=c.readUnicode(o,S,I/2);else{if(m!=1)throw"unknown encoding "+b+", platformID: "+m;C=c.readASCII(o,S,I),console.debug("reading unknown MAC encoding "+b+" as ASCII")}var M="p"+m+","+g.toString(16);u[M]==null&&(u[M]={}),u[M][E!==void 0?E:w]=C,u[M]._lang=g}for(var _ in u)if(u[_].postScriptName!=null&&u[_]._lang==1033)return u[_];for(var _ in u)if(u[_].postScriptName!=null&&u[_]._lang==0)return u[_];for(var _ in u)if(u[_].postScriptName!=null&&u[_]._lang==3084)return u[_];for(var _ in u)if(u[_].postScriptName!=null)return u[_];for(var _ in u){A=_;break}return console.debug("returning name table with languageID "+u[A]._lang),u[A]},e["OS/2"]={},e["OS/2"].parse=function(o,a,l){var c=e._bin.readUshort(o,a);a+=2;var u={};if(c==0)e["OS/2"].version0(o,a,u);else if(c==1)e["OS/2"].version1(o,a,u);else if(c==2||c==3||c==4)e["OS/2"].version2(o,a,u);else{if(c!=5)throw"unknown OS/2 table version: "+c;e["OS/2"].version5(o,a,u)}return u},e["OS/2"].version0=function(o,a,l){var c=e._bin;return l.xAvgCharWidth=c.readShort(o,a),a+=2,l.usWeightClass=c.readUshort(o,a),a+=2,l.usWidthClass=c.readUshort(o,a),a+=2,l.fsType=c.readUshort(o,a),a+=2,l.ySubscriptXSize=c.readShort(o,a),a+=2,l.ySubscriptYSize=c.readShort(o,a),a+=2,l.ySubscriptXOffset=c.readShort(o,a),a+=2,l.ySubscriptYOffset=c.readShort(o,a),a+=2,l.ySuperscriptXSize=c.readShort(o,a),a+=2,l.ySuperscriptYSize=c.readShort(o,a),a+=2,l.ySuperscriptXOffset=c.readShort(o,a),a+=2,l.ySuperscriptYOffset=c.readShort(o,a),a+=2,l.yStrikeoutSize=c.readShort(o,a),a+=2,l.yStrikeoutPosition=c.readShort(o,a),a+=2,l.sFamilyClass=c.readShort(o,a),a+=2,l.panose=c.readBytes(o,a,10),a+=10,l.ulUnicodeRange1=c.readUint(o,a),a+=4,l.ulUnicodeRange2=c.readUint(o,a),a+=4,l.ulUnicodeRange3=c.readUint(o,a),a+=4,l.ulUnicodeRange4=c.readUint(o,a),a+=4,l.achVendID=[c.readInt8(o,a),c.readInt8(o,a+1),c.readInt8(o,a+2),c.readInt8(o,a+3)],a+=4,l.fsSelection=c.readUshort(o,a),a+=2,l.usFirstCharIndex=c.readUshort(o,a),a+=2,l.usLastCharIndex=c.readUshort(o,a),a+=2,l.sTypoAscender=c.readShort(o,a),a+=2,l.sTypoDescender=c.readShort(o,a),a+=2,l.sTypoLineGap=c.readShort(o,a),a+=2,l.usWinAscent=c.readUshort(o,a),a+=2,l.usWinDescent=c.readUshort(o,a),a+=2},e["OS/2"].version1=function(o,a,l){var c=e._bin;return a=e["OS/2"].version0(o,a,l),l.ulCodePageRange1=c.readUint(o,a),a+=4,l.ulCodePageRange2=c.readUint(o,a),a+=4},e["OS/2"].version2=function(o,a,l){var c=e._bin;return a=e["OS/2"].version1(o,a,l),l.sxHeight=c.readShort(o,a),a+=2,l.sCapHeight=c.readShort(o,a),a+=2,l.usDefault=c.readUshort(o,a),a+=2,l.usBreak=c.readUshort(o,a),a+=2,l.usMaxContext=c.readUshort(o,a),a+=2},e["OS/2"].version5=function(o,a,l){var c=e._bin;return a=e["OS/2"].version2(o,a,l),l.usLowerOpticalPointSize=c.readUshort(o,a),a+=2,l.usUpperOpticalPointSize=c.readUshort(o,a),a+=2},e.post={},e.post.parse=function(o,a,l){var c=e._bin,u={};return u.version=c.readFixed(o,a),a+=4,u.italicAngle=c.readFixed(o,a),a+=4,u.underlinePosition=c.readShort(o,a),a+=2,u.underlineThickness=c.readShort(o,a),a+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(o,a){var l=o.cmap,c=-1;if(l.p0e4!=null?c=l.p0e4:l.p3e1!=null?c=l.p3e1:l.p1e0!=null?c=l.p1e0:l.p0e3!=null&&(c=l.p0e3),c==-1)throw"no familiar platform and encoding!";var u=l.tables[c];if(u.format==0)return a>=u.map.length?0:u.map[a];if(u.format==4){for(var h=-1,A=0;A<u.endCount.length;A++)if(a<=u.endCount[A]){h=A;break}return h==-1||u.startCount[h]>a?0:65535&(u.idRangeOffset[h]!=0?u.glyphIdArray[a-u.startCount[h]+(u.idRangeOffset[h]>>1)-(u.idRangeOffset.length-h)]:a+u.idDelta[h])}if(u.format==12){if(a>u.groups[u.groups.length-1][1])return 0;for(A=0;A<u.groups.length;A++){var f=u.groups[A];if(f[0]<=a&&a<=f[1])return f[2]+(a-f[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(o,a){var l={cmds:[],crds:[]};if(o.SVG&&o.SVG.entries[a]){var c=o.SVG.entries[a];return c==null?l:(typeof c=="string"&&(c=e.SVG.toPath(c),o.SVG.entries[a]=c),c)}if(o.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:o.CFF.Private?o.CFF.Private.defaultWidthX:0,open:!1},h=o.CFF,A=o.CFF.Private;if(h.ROS){for(var f=0;h.FDSelect[f+2]<=a;)f+=2;A=h.FDArray[h.FDSelect[f+1]].Private}e.U._drawCFF(o.CFF.CharStrings[a],u,h,A,l)}else o.glyf&&e.U._drawGlyf(a,o,l);return l},e.U._drawGlyf=function(o,a,l){var c=a.glyf[o];c==null&&(c=a.glyf[o]=e.glyf._parseGlyf(a,o)),c!=null&&(c.noc>-1?e.U._simpleGlyph(c,l):e.U._compoGlyph(c,a,l))},e.U._simpleGlyph=function(o,a){for(var l=0;l<o.noc;l++){for(var c=l==0?0:o.endPts[l-1]+1,u=o.endPts[l],h=c;h<=u;h++){var A=h==c?u:h-1,f=h==u?c:h+1,d=1&o.flags[h],p=1&o.flags[A],m=1&o.flags[f],b=o.xs[h],g=o.ys[h];if(h==c)if(d){if(!p){e.U.P.moveTo(a,b,g);continue}e.U.P.moveTo(a,o.xs[A],o.ys[A])}else p?e.U.P.moveTo(a,o.xs[A],o.ys[A]):e.U.P.moveTo(a,(o.xs[A]+b)/2,(o.ys[A]+g)/2);d?p&&e.U.P.lineTo(a,b,g):m?e.U.P.qcurveTo(a,b,g,o.xs[f],o.ys[f]):e.U.P.qcurveTo(a,b,g,(b+o.xs[f])/2,(g+o.ys[f])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(o,a,l){for(var c=0;c<o.parts.length;c++){var u={cmds:[],crds:[]},h=o.parts[c];e.U._drawGlyf(h.glyphIndex,a,u);for(var A=h.m,f=0;f<u.crds.length;f+=2){var d=u.crds[f],p=u.crds[f+1];l.crds.push(d*A.a+p*A.b+A.tx),l.crds.push(d*A.c+p*A.d+A.ty)}for(f=0;f<u.cmds.length;f++)l.cmds.push(u.cmds[f])}},e.U._getGlyphClass=function(o,a){var l=e._lctf.getInterval(a,o);return l==-1?0:a[l+2]},e.U.getPairAdjustment=function(o,a,l){var c=!1;if(o.GPOS)for(var u=o.GPOS,h=u.lookupList,A=u.featureList,f=[],d=0;d<A.length;d++){var p=A[d];if(p.tag=="kern"){c=!0;for(var m=0;m<p.tab.length;m++)if(!f[p.tab[m]]){f[p.tab[m]]=!0;for(var b=h[p.tab[m]],g=0;g<b.tabs.length;g++)if(b.tabs[g]!=null){var w,I=b.tabs[g];if((!I.coverage||(w=e._lctf.coverageIndex(I.coverage,a))!=-1)&&b.ltype!=1){if(b.ltype==2){var v=null;if(I.fmt==1){var C=I.pairsets[w];for(d=0;d<C.length;d++)C[d].gid2==l&&(v=C[d])}else if(I.fmt==2){var E=e.U._getGlyphClass(a,I.classDef1),S=e.U._getGlyphClass(l,I.classDef2);v=I.matrix[E][S]}if(v){var M=0;return v.val1&&v.val1[2]&&(M+=v.val1[2]),v.val2&&v.val2[0]&&(M+=v.val2[0]),M}}}}}}}if(o.kern&&!c){var _=o.kern.glyph1.indexOf(a);if(_!=-1){var T=o.kern.rval[_].glyph2.indexOf(l);if(T!=-1)return o.kern.rval[_].vals[T]}}return 0},e.U._applySubs=function(o,a,l,c){for(var u=o.length-a-1,h=0;h<l.tabs.length;h++)if(l.tabs[h]!=null){var A,f=l.tabs[h];if(!f.coverage||(A=e._lctf.coverageIndex(f.coverage,o[a]))!=-1){if(l.ltype==1)o[a],f.fmt==1?o[a]=o[a]+f.delta:o[a]=f.newg[A];else if(l.ltype==4)for(var d=f.vals[A],p=0;p<d.length;p++){var m=d[p],b=m.chain.length;if(!(b>u)){for(var g=!0,w=0,I=0;I<b;I++){for(;o[a+w+(1+I)]==-1;)w++;m.chain[I]!=o[a+w+(1+I)]&&(g=!1)}if(g){for(o[a]=m.nglyph,I=0;I<b+w;I++)o[a+I+1]=-1;break}}}else if(l.ltype==5&&f.fmt==2)for(var v=e._lctf.getInterval(f.cDef,o[a]),C=f.cDef[v+2],E=f.scset[C],S=0;S<E.length;S++){var M=E[S],_=M.input;if(!(_.length>u)){for(g=!0,I=0;I<_.length;I++){var T=e._lctf.getInterval(f.cDef,o[a+1+I]);if(v==-1&&f.cDef[T+2]!=_[I]){g=!1;break}}if(g){var D=M.substLookupRecords;for(p=0;p<D.length;p+=2)D[p],D[p+1]}}}else if(l.ltype==6&&f.fmt==3){if(!e.U._glsCovered(o,f.backCvg,a-f.backCvg.length)||!e.U._glsCovered(o,f.inptCvg,a)||!e.U._glsCovered(o,f.ahedCvg,a+f.inptCvg.length))continue;var R=f.lookupRec;for(S=0;S<R.length;S+=2){v=R[S];var B=c[R[S+1]];e.U._applySubs(o,a+v,B,c)}}}}},e.U._glsCovered=function(o,a,l){for(var c=0;c<a.length;c++)if(e._lctf.coverageIndex(a[c],o[l+c])==-1)return!1;return!0},e.U.glyphsToPath=function(o,a,l){for(var c={cmds:[],crds:[]},u=0,h=0;h<a.length;h++){var A=a[h];if(A!=-1){for(var f=h<a.length-1&&a[h+1]!=-1?a[h+1]:0,d=e.U.glyphToPath(o,A),p=0;p<d.crds.length;p+=2)c.crds.push(d.crds[p]+u),c.crds.push(d.crds[p+1]);for(l&&c.cmds.push(l),p=0;p<d.cmds.length;p++)c.cmds.push(d.cmds[p]);l&&c.cmds.push("X"),u+=o.hmtx.aWidth[A],h<a.length-1&&(u+=e.U.getPairAdjustment(o,A,f))}}return c},e.U.P={},e.U.P.moveTo=function(o,a,l){o.cmds.push("M"),o.crds.push(a,l)},e.U.P.lineTo=function(o,a,l){o.cmds.push("L"),o.crds.push(a,l)},e.U.P.curveTo=function(o,a,l,c,u,h,A){o.cmds.push("C"),o.crds.push(a,l,c,u,h,A)},e.U.P.qcurveTo=function(o,a,l,c,u){o.cmds.push("Q"),o.crds.push(a,l,c,u)},e.U.P.closePath=function(o){o.cmds.push("Z")},e.U._drawCFF=function(o,a,l,c,u){for(var h=a.stack,A=a.nStems,f=a.haveWidth,d=a.width,p=a.open,m=0,b=a.x,g=a.y,w=0,I=0,v=0,C=0,E=0,S=0,M=0,_=0,T=0,D=0,R={val:0,size:0};m<o.length;){e.CFF.getCharString(o,m,R);var B=R.val;if(m+=R.size,B=="o1"||B=="o18")h.length%2!=0&&!f&&(d=h.shift()+c.nominalWidthX),A+=h.length>>1,h.length=0,f=!0;else if(B=="o3"||B=="o23")h.length%2!=0&&!f&&(d=h.shift()+c.nominalWidthX),A+=h.length>>1,h.length=0,f=!0;else if(B=="o4")h.length>1&&!f&&(d=h.shift()+c.nominalWidthX,f=!0),p&&e.U.P.closePath(u),g+=h.pop(),e.U.P.moveTo(u,b,g),p=!0;else if(B=="o5")for(;h.length>0;)b+=h.shift(),g+=h.shift(),e.U.P.lineTo(u,b,g);else if(B=="o6"||B=="o7")for(var P=h.length,F=B=="o6",z=0;z<P;z++){var Q=h.shift();F?b+=Q:g+=Q,F=!F,e.U.P.lineTo(u,b,g)}else if(B=="o8"||B=="o24"){P=h.length;for(var V=0;V+6<=P;)w=b+h.shift(),I=g+h.shift(),v=w+h.shift(),C=I+h.shift(),b=v+h.shift(),g=C+h.shift(),e.U.P.curveTo(u,w,I,v,C,b,g),V+=6;B=="o24"&&(b+=h.shift(),g+=h.shift(),e.U.P.lineTo(u,b,g))}else{if(B=="o11")break;if(B=="o1234"||B=="o1235"||B=="o1236"||B=="o1237")B=="o1234"&&(I=g,v=(w=b+h.shift())+h.shift(),D=C=I+h.shift(),S=C,_=g,b=(M=(E=(T=v+h.shift())+h.shift())+h.shift())+h.shift(),e.U.P.curveTo(u,w,I,v,C,T,D),e.U.P.curveTo(u,E,S,M,_,b,g)),B=="o1235"&&(w=b+h.shift(),I=g+h.shift(),v=w+h.shift(),C=I+h.shift(),T=v+h.shift(),D=C+h.shift(),E=T+h.shift(),S=D+h.shift(),M=E+h.shift(),_=S+h.shift(),b=M+h.shift(),g=_+h.shift(),h.shift(),e.U.P.curveTo(u,w,I,v,C,T,D),e.U.P.curveTo(u,E,S,M,_,b,g)),B=="o1236"&&(w=b+h.shift(),I=g+h.shift(),v=w+h.shift(),D=C=I+h.shift(),S=C,M=(E=(T=v+h.shift())+h.shift())+h.shift(),_=S+h.shift(),b=M+h.shift(),e.U.P.curveTo(u,w,I,v,C,T,D),e.U.P.curveTo(u,E,S,M,_,b,g)),B=="o1237"&&(w=b+h.shift(),I=g+h.shift(),v=w+h.shift(),C=I+h.shift(),T=v+h.shift(),D=C+h.shift(),E=T+h.shift(),S=D+h.shift(),M=E+h.shift(),_=S+h.shift(),Math.abs(M-b)>Math.abs(_-g)?b=M+h.shift():g=_+h.shift(),e.U.P.curveTo(u,w,I,v,C,T,D),e.U.P.curveTo(u,E,S,M,_,b,g));else if(B=="o14"){if(h.length>0&&!f&&(d=h.shift()+l.nominalWidthX,f=!0),h.length==4){var G=h.shift(),O=h.shift(),W=h.shift(),k=h.shift(),Y=e.CFF.glyphBySE(l,W),te=e.CFF.glyphBySE(l,k);e.U._drawCFF(l.CharStrings[Y],a,l,c,u),a.x=G,a.y=O,e.U._drawCFF(l.CharStrings[te],a,l,c,u)}p&&(e.U.P.closePath(u),p=!1)}else if(B=="o19"||B=="o20")h.length%2!=0&&!f&&(d=h.shift()+c.nominalWidthX),A+=h.length>>1,h.length=0,f=!0,m+=A+7>>3;else if(B=="o21")h.length>2&&!f&&(d=h.shift()+c.nominalWidthX,f=!0),g+=h.pop(),b+=h.pop(),p&&e.U.P.closePath(u),e.U.P.moveTo(u,b,g),p=!0;else if(B=="o22")h.length>1&&!f&&(d=h.shift()+c.nominalWidthX,f=!0),b+=h.pop(),p&&e.U.P.closePath(u),e.U.P.moveTo(u,b,g),p=!0;else if(B=="o25"){for(;h.length>6;)b+=h.shift(),g+=h.shift(),e.U.P.lineTo(u,b,g);w=b+h.shift(),I=g+h.shift(),v=w+h.shift(),C=I+h.shift(),b=v+h.shift(),g=C+h.shift(),e.U.P.curveTo(u,w,I,v,C,b,g)}else if(B=="o26")for(h.length%2&&(b+=h.shift());h.length>0;)w=b,I=g+h.shift(),b=v=w+h.shift(),g=(C=I+h.shift())+h.shift(),e.U.P.curveTo(u,w,I,v,C,b,g);else if(B=="o27")for(h.length%2&&(g+=h.shift());h.length>0;)I=g,v=(w=b+h.shift())+h.shift(),C=I+h.shift(),b=v+h.shift(),g=C,e.U.P.curveTo(u,w,I,v,C,b,g);else if(B=="o10"||B=="o29"){var ie=B=="o10"?c:l;if(h.length==0)console.debug("error: empty stack");else{var re=h.pop(),se=ie.Subrs[re+ie.Bias];a.x=b,a.y=g,a.nStems=A,a.haveWidth=f,a.width=d,a.open=p,e.U._drawCFF(se,a,l,c,u),b=a.x,g=a.y,A=a.nStems,f=a.haveWidth,d=a.width,p=a.open}}else if(B=="o30"||B=="o31"){var oe=h.length,le=(V=0,B=="o31");for(V+=oe-(P=-3&oe);V<P;)le?(I=g,v=(w=b+h.shift())+h.shift(),g=(C=I+h.shift())+h.shift(),P-V==5?(b=v+h.shift(),V++):b=v,le=!1):(w=b,I=g+h.shift(),v=w+h.shift(),C=I+h.shift(),b=v+h.shift(),P-V==5?(g=C+h.shift(),V++):g=C,le=!0),e.U.P.curveTo(u,w,I,v,C,b,g),V+=4}else{if((B+"").charAt(0)=="o")throw console.debug("Unknown operation: "+B,o),B;h.push(B)}}}a.x=b,a.y=g,a.nStems=A,a.haveWidth=f,a.width=d,a.open=p};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}function KAe(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,o=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(B,P){for(var F=new t(31),z=0;z<31;++z)F[z]=P+=1<<B[z-1];var Q=new i(F[30]);for(z=1;z<30;++z)for(var V=F[z];V<F[z+1];++V)Q[V]=V-F[z]<<5|z;return[F,Q]},u=c(o,2),h=u[0],A=u[1];h[28]=258,A[258]=28;for(var f=c(a,0)[0],d=new t(32768),p=0;p<32768;++p){var m=(43690&p)>>>1|(21845&p)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,d[p]=((65280&m)>>>8|(255&m)<<8)>>>1}var b=function(B,P,F){for(var z=B.length,Q=0,V=new t(P);Q<z;++Q)++V[B[Q]-1];var G,O=new t(P);for(Q=0;Q<P;++Q)O[Q]=O[Q-1]+V[Q-1]<<1;if(F){G=new t(1<<P);var W=15-P;for(Q=0;Q<z;++Q)if(B[Q])for(var k=Q<<4|B[Q],Y=P-B[Q],te=O[B[Q]-1]++<<Y,ie=te|(1<<Y)-1;te<=ie;++te)G[d[te]>>>W]=k}else for(G=new t(z),Q=0;Q<z;++Q)B[Q]&&(G[Q]=d[O[B[Q]-1]++]>>>15-B[Q]);return G},g=new e(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var w=new e(32);for(p=0;p<32;++p)w[p]=5;var I=b(g,9,1),v=b(w,5,1),C=function(B){for(var P=B[0],F=1;F<B.length;++F)B[F]>P&&(P=B[F]);return P},E=function(B,P,F){var z=P/8|0;return(B[z]|B[z+1]<<8)>>(7&P)&F},S=function(B,P){var F=P/8|0;return(B[F]|B[F+1]<<8|B[F+2]<<16)>>(7&P)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_=function(B,P,F){var z=new Error(P||M[B]);if(z.code=B,Error.captureStackTrace&&Error.captureStackTrace(z,_),!F)throw z;return z},T=function(B,P,F){var z=B.length;if(!z||F&&!F.l&&z<5)return P||new e(0);var Q=!P||F,V=!F||F.i;F||(F={}),P||(P=new e(3*z));var G,O=function(X){var q=P.length;if(X>q){var ne=new e(Math.max(2*q,X));ne.set(P),P=ne}},W=F.f||0,k=F.p||0,Y=F.b||0,te=F.l,ie=F.d,re=F.m,se=F.n,oe=8*z;do{if(!te){F.f=W=E(B,k,1);var le=E(B,k+1,3);if(k+=3,!le){var xe=B[(Pe=((G=k)/8|0)+(7&G&&1)+4)-4]|B[Pe-3]<<8,_e=Pe+xe;if(_e>z){V&&_(0);break}Q&&O(Y+xe),P.set(B.subarray(Pe,_e),Y),F.b=Y+=xe,F.p=k=8*_e;continue}if(le==1)te=I,ie=v,re=9,se=5;else if(le==2){var pe=E(B,k,31)+257,K=E(B,k+10,15)+4,be=pe+E(B,k+5,31)+1;k+=14;for(var me=new e(be),fe=new e(19),de=0;de<K;++de)fe[l[de]]=E(B,k+3*de,7);k+=3*K;var Fe=C(fe),ye=(1<<Fe)-1,Se=b(fe,Fe,1);for(de=0;de<be;){var Pe,Ee=Se[E(B,k,ye)];if(k+=15&Ee,(Pe=Ee>>>4)<16)me[de++]=Pe;else{var We=0,J=0;for(Pe==16?(J=3+E(B,k,3),k+=2,We=me[de-1]):Pe==17?(J=3+E(B,k,7),k+=3):Pe==18&&(J=11+E(B,k,127),k+=7);J--;)me[de++]=We}}var H=me.subarray(0,pe),ue=me.subarray(pe);re=C(H),se=C(ue),te=b(H,re,1),ie=b(ue,se,1)}else _(1);if(k>oe){V&&_(0);break}}Q&&O(Y+131072);for(var Re=(1<<re)-1,Be=(1<<se)-1,Ie=k;;Ie=k){var Ue=(We=te[S(B,k)&Re])>>>4;if((k+=15&We)>oe){V&&_(0);break}if(We||_(2),Ue<256)P[Y++]=Ue;else{if(Ue==256){Ie=k,te=null;break}var Ne=Ue-254;if(Ue>264){var Ce=o[de=Ue-257];Ne=E(B,k,(1<<Ce)-1)+h[de],k+=Ce}var Z=ie[S(B,k)&Be],L=Z>>>4;if(Z||_(3),k+=15&Z,ue=f[L],L>3&&(Ce=a[L],ue+=S(B,k)&(1<<Ce)-1,k+=Ce),k>oe){V&&_(0);break}Q&&O(Y+131072);for(var N=Y+Ne;Y<N;Y+=4)P[Y]=P[Y-ue],P[Y+1]=P[Y+1-ue],P[Y+2]=P[Y+2-ue],P[Y+3]=P[Y+3-ue];Y=N}}F.l=te,F.p=Ie,F.b=Y,te&&(W=1,F.m=re,F.d=ie,F.n=se)}while(!W);return Y==P.length?P:function(X,q,ne){(q==null||q<0)&&(q=0),(ne==null||ne>X.length)&&(ne=X.length);var ae=new(X instanceof t?t:X instanceof i?i:e)(ne-q);return ae.set(X.subarray(q,ne)),ae}(P,0,Y)},D=new e(0),R=typeof TextDecoder<"u"&&new TextDecoder;try{R.decode(D,{stream:!0})}catch{}return n.convert_streams=function(B){var P=new DataView(B),F=0;function z(){var pe=P.getUint16(F);return F+=2,pe}function Q(){var pe=P.getUint32(F);return F+=4,pe}function V(pe){xe.setUint16(_e,pe),_e+=2}function G(pe){xe.setUint32(_e,pe),_e+=4}for(var O={signature:Q(),flavor:Q(),length:Q(),numTables:z(),reserved:z(),totalSfntSize:Q(),majorVersion:z(),minorVersion:z(),metaOffset:Q(),metaLength:Q(),metaOrigLength:Q(),privOffset:Q(),privLength:Q()},W=0;Math.pow(2,W)<=O.numTables;)W++;W--;for(var k=16*Math.pow(2,W),Y=16*O.numTables-k,te=12,ie=[],re=0;re<O.numTables;re++)ie.push({tag:Q(),offset:Q(),compLength:Q(),origLength:Q(),origChecksum:Q()}),te+=16;var se,oe=new Uint8Array(12+16*ie.length+ie.reduce(function(pe,K){return pe+K.origLength+4},0)),le=oe.buffer,xe=new DataView(le),_e=0;return G(O.flavor),V(O.numTables),V(k),V(W),V(Y),ie.forEach(function(pe){G(pe.tag),G(pe.origChecksum),G(te),G(pe.origLength),pe.outOffset=te,(te+=pe.origLength)%4!=0&&(te+=4-te%4)}),ie.forEach(function(pe){var K,be=B.slice(pe.offset,pe.offset+pe.compLength);if(pe.compLength!=pe.origLength){var me=new Uint8Array(pe.origLength);K=new Uint8Array(be,2),T(K,me)}else me=new Uint8Array(be);oe.set(me,pe.outOffset);var fe=0;(te=pe.outOffset+pe.origLength)%4!=0&&(fe=4-te%4),oe.set(new Uint8Array(fe).buffer,pe.outOffset+pe.origLength),se=te+fe}),le.slice(0,se)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function jAe(n,e){let t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},o=1,a=2,l=4,c=8,u=16,h=32,A;function f(E){if(!A){let S={R:a,L:o,D:l,C:u,U:h,T:c};A=new Map;for(let M in i){let _=0;i[M].split(",").forEach(T=>{let[D,R]=T.split("+");D=parseInt(D,36),R=R?parseInt(R,36):0,A.set(_+=D,S[M]);for(let B=R;B--;)A.set(++_,S[M])})}}return A.get(E)||h}let d=1,p=2,m=3,b=4,g=[null,"isol","init","fina","medi"];function w(E){let S=new Uint8Array(E.length),M=h,_=d,T=-1;for(let D=0;D<E.length;D++){let R=E.codePointAt(D),B=f(R)|0,P=d;B&c||(M&(o|l|u)?B&(a|l|u)?(P=m,(_===d||_===m)&&S[T]++):B&(o|h)&&(_===p||_===b)&&S[T]--:M&(a|h)&&(_===p||_===b)&&S[T]--,_=S[D]=P,M=B,T=D,R>65535&&D++)}return S}function I(E,S){let M=[];for(let T=0;T<S.length;T++){let D=S.codePointAt(T);D>65535&&T++,M.push(n.U.codeToGlyph(E,D))}let _=E.GSUB;if(_){let{lookupList:T,featureList:D}=_,R,B=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,P=[];D.forEach(F=>{if(B.test(F.tag))for(let z=0;z<F.tab.length;z++){if(P[F.tab[z]])continue;P[F.tab[z]]=!0;let Q=T[F.tab[z]],V=/^(isol|init|fina|medi)$/.test(F.tag);V&&!R&&(R=w(S));for(let G=0;G<M.length;G++)(!R||!V||g[R[G]]===F.tag)&&n.U._applySubs(M,G,Q,T)}})}return M}function v(...E){for(let S=0;S<E.length;S++)if(typeof E[S]=="number")return E[S]}function C(E){let S=Object.create(null),M=E["OS/2"],_=E.hhea,T=E.head.unitsPerEm,D=v(M&&M.sTypoAscender,_&&_.ascender,T),R={unitsPerEm:T,ascender:D,descender:v(M&&M.sTypoDescender,_&&_.descender,0),capHeight:v(M&&M.sCapHeight,D),xHeight:v(M&&M.sxHeight,D),lineGap:v(M&&M.sTypoLineGap,_&&_.lineGap),forEachGlyph(B,P,F,z){let Q=0,V=1/R.unitsPerEm*P,G=I(E,B),O=0,W=-1;return G.forEach((k,Y)=>{if(k!==-1){let te=S[k];if(!te){let{cmds:ie,crds:re}=n.U.glyphToPath(E,k),se="",oe=0;for(let K=0,be=ie.length;K<be;K++){let me=t[ie[K]];se+=ie[K];for(let fe=1;fe<=me;fe++)se+=(fe>1?",":"")+re[oe++]}let le,xe,_e,pe;if(re.length){le=xe=1/0,_e=pe=-1/0;for(let K=0,be=re.length;K<be;K+=2){let me=re[K],fe=re[K+1];me<le&&(le=me),fe<xe&&(xe=fe),me>_e&&(_e=me),fe>pe&&(pe=fe)}}else le=_e=xe=pe=0;te=S[k]={index:k,advanceWidth:E.hmtx.aWidth[k],xMin:le,yMin:xe,xMax:_e,yMax:pe,path:se,pathCommandCount:ie.length}}W!==-1&&(Q+=n.U.getPairAdjustment(E,W,k)*V),z.call(null,te,Q,O),te.advanceWidth&&(Q+=te.advanceWidth*V),F&&(Q+=F*P),W=k}O+=B.codePointAt(O)>65535?2:1}),Q}};return R}return function(S){let M=new Uint8Array(S,0,4),_=n._bin.readASCII(M,0,4);if(_==="wOFF")S=e(S);else if(_==="wOF2")throw new Error("woff2 fonts not supported");return C(n.parse(S)[0])}}var JAe=cf({name:"Typr Font Parser",dependencies:[ZAe,KAe,jAe],init(n,e,t){let i=n(),o=e();return t(i,o)}}),ku={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},qAe=new De,k9=!1;function uf(){return(self.performance||Date).now()}function $Ae(n){k9?console.warn("configureTextBuilder called after first font request; will be ignored."):U9(ku,n)}var sx=Object.create(null);function P9(n,e){k9=!0,n=U9({},n);let t=uf();if(n.font=tfe(n.font||ku.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||ku.sdfGlyphSize,n.colorRanges!=null){let f={};for(let d in n.colorRanges)if(n.colorRanges.hasOwnProperty(d)){let p=n.colorRanges[d];typeof p!="number"&&(p=qAe.set(p).getHex()),f[d]=p}n.colorRanges=f}Object.freeze(n);let{textureWidth:i,sdfExponent:o}=ku,{sdfGlyphSize:a}=n,l=i/a*4,c=sx[a];if(!c){let f=document.createElement("canvas");f.width=i,f.height=a*256/l,c=sx[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:f,sdfTexture:new jt(f,void 0,void 0,void 0,Et,Et),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,efe(c)}let{sdfTexture:u,sdfCanvas:h}=c,A=c.glyphsByFont.get(n.font);A||c.glyphsByFont.set(n.font,A=new Map),nfe(n).then(f=>{let{glyphIds:d,glyphPositions:p,fontSize:m,unitsPerEm:b,timings:g}=f,w=[],I=new Float32Array(d.length*4),v=m/b,C=0,E=0,S=uf();d.forEach((R,B)=>{let P=A.get(R);if(!P){let{path:V,pathBounds:G}=f.glyphData[R],O=Math.max(G[2]-G[0],G[3]-G[1])/a*(ku.sdfMargin*a+.5),W=c.glyphCount++,k=[G[0]-O,G[1]-O,G[2]+O,G[3]+O];A.set(R,P={path:V,atlasIndex:W,sdfViewBox:k}),w.push(P)}let{sdfViewBox:F}=P,z=p[E++],Q=p[E++];I[C++]=z+F[0]*v,I[C++]=Q+F[1]*v,I[C++]=z+F[2]*v,I[C++]=Q+F[3]*v,d[B]=P.atlasIndex}),g.quads=(g.quads||0)+(uf()-S);let M=uf();g.sdf={};let _=h.height,T=Math.ceil(c.glyphCount/l),D=Math.pow(2,Math.ceil(Math.log2(T*a)));D>_&&(console.info(`Increasing SDF texture size ${_}->${D}`),YAe(h,i,D),u.dispose()),Promise.all(w.map(R=>N9(R,c,n.gpuAccelerateSDF).then(({timing:B})=>{g.sdf[R.atlasIndex]=B}))).then(()=>{w.length&&!c.contextLost&&(O9(c),u.needsUpdate=!0),g.sdfTotal=uf()-M,g.total=uf()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:I,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{c.contextLost||XAe(h)})}function N9({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:o,contextLost:a},l){if(a)return Promise.resolve({timing:-1});let{textureWidth:c,sdfExponent:u}=ku,h=Math.max(t[2]-t[0],t[3]-t[1]),A=Math.floor(e/4),f=A%(c/i)*i,d=Math.floor(A/(c/i))*i,p=e%4;return QAe(i,i,n,t,h,u,o,f,d,p,l)}function efe(n){let e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;let i=[];n.glyphsByFont.forEach(o=>{o.forEach(a=>{i.push(N9(a,n,!0))})}),Promise.all(i).then(()=>{O9(n),n.sdfTexture.needsUpdate=!0})})}function F9({font:n,characters:e,sdfGlyphSize:t},i){let o=Array.isArray(e)?e.join(`
`):""+e;P9({font:n,sdfGlyphSize:t,text:o},i)}function U9(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}var nx;function tfe(n){return nx||(nx=typeof document>"u"?{}:document.createElement("a")),nx.href=n,nx.href}function O9(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:o}=e,a=n.sdfCanvas.getContext("webgl"),l=t.image.data;(!l||l.length!==i*o*4)&&(l=new Uint8Array(i*o*4),t.image={width:i,height:o,data:l},t.flipY=!1,t.isDataTexture=!0),a.readPixels(0,0,i,o,a.RGBA,a.UNSIGNED_BYTE,l)}}var Q9=cf({name:"Typesetter",dependencies:[ku,JAe,OAe,y9],init(n,e,t,i){let{defaultFontURL:o}=n;return t(e,i(),{defaultFontURL:o})}}),nfe=cf({name:"Typesetter",dependencies:[Q9],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){let e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}});function ife(){Object.keys(sx).forEach(n=>{let e=sx[n].sdfCanvas,{width:t,height:i}=e;console.log("%c.",`
      background: url(${e.toDataURL()});
      background-size: ${t}px ${i}px;
      color: transparent;
      font-size: 0;
      line-height: ${i}px;
      padding-left: ${t}px;
    `)})}var I9={};function rfe(n){let e=I9[n];if(!e){let t=new Ii(1,1,n,n),i=t.clone(),o=t.attributes,a=i.attributes,l=new Ke,c=o.uv.count;for(let u=0;u<c;u++)a.position.array[u*3]*=-1,a.normal.array[u*3+2]*=-1;["position","normal","uv"].forEach(u=>{l.setAttribute(u,new Ve([...o[u].array,...a[u].array],o[u].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(u=>u+c)]),l.translate(.5,.5,0),e=I9[n]=l}return e}var sfe="aTroikaGlyphBounds",M9="aTroikaGlyphIndex",ofe="aTroikaGlyphColor",ox=class extends gl{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Vt,this.boundingBox=new Ht}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){let t=this.getIndex().count;this.setDrawRange(e===Gn?t/2:0,e===Pt?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=rfe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,o,a){QR(this,sfe,e,4),QR(this,M9,t,1),QR(this,ofe,a,3),this._blockBounds=i,this._chunkedBounds=o,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){let e=this._blockBounds;if(e){let{curveRadius:t,boundingBox:i}=this;if(t){let{PI:o,floor:a,min:l,max:c,sin:u,cos:h}=Math,A=o/2,f=o*2,d=Math.abs(t),p=e[0]/d,m=e[2]/d,b=a((p+A)/f)!==a((m+A)/f)?-d:l(u(p)*d,u(m)*d),g=a((p-A)/f)!==a((m-A)/f)?d:c(u(p)*d,u(m)*d),w=a((p+o)/f)!==a((m+o)/f)?d*2:c(d-h(p)*d,d-h(m)*d);i.min.set(b,e[1],t<0?-w:0),i.max.set(g,e[3],t<0?0:w)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(M9).count,i=this._chunkedBounds;if(i)for(let o=i.length;o--;){t=i[o].end;let a=i[o].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=t}};function QR(n,e,t,i){let o=n.getAttribute(e);t?o&&o.array.length===t.length?(o.array.set(t),o.needsUpdate=!0):(n.setAttribute(e,new Pr(t,i)),delete n._maxInstanceCount,n.dispose()):o&&n.deleteAttribute(e)}var afe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,lfe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,cfe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ufe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function G9(n){let e=tx(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new he},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new pt(0,0,0,0)},uTroikaClipRect:{value:new pt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new he},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new De},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new dt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:afe,vertexTransform:lfe,fragmentDefs:cfe,fragmentColorTransform:ufe,customRewriter({vertexShader:t,fragmentShader:i}){let o=/\buniform\s+vec3\s+diffuse\b/;return o.test(i)&&(i=i.replace(o,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),o.test(t)||(t=t.replace(OR,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}var VR=new Nt({color:16777215,side:Pt,transparent:!0}),T9=8421504,_9=new ke,ix=new U,GR=new U,yg=[],hfe=new U,zR="+x+y";function D9(n){return Array.isArray(n)?n[0]:n}var z9=()=>{let n=new He(new Ii(1,1),VR);return z9=()=>n,n},H9=()=>{let n=new He(new Ii(1,1,32,1),VR);return H9=()=>n,n},Afe={type:"syncstart"},ffe={type:"synccomplete"},V9=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],dfe=V9.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),hf=class extends He{constructor(){let e=new ox;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=T9,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=zR,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Afe),P9({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);let i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(o=>o&&o())})),this.dispatchEvent(ffe),e&&e()})))}onBeforeRender(e,t,i,o,a,l){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a),a._hadOwnSide=a.hasOwnProperty("side"),this.geometry.setSide(a._actualSide=a.side),a.side=Ai}onAfterRender(e,t,i,o,a,l){a._hadOwnSide?a.side=a._actualSide:delete a.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=VR.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=G9(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function o(){e.removeEventListener("dispose",o),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return D9(this.material).getDepthMaterial()}get customDistanceMaterial(){return D9(this.material).getDistanceMaterial()}_prepareForRender(e){let t=e.isTextOutlineMaterial,i=e.uniforms,o=this.textRenderInfo;if(o){let{sdfTexture:c,blockBounds:u}=o;i.uTroikaSDFTexture.value=c,i.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),i.uTroikaSDFGlyphSize.value=o.sdfGlyphSize,i.uTroikaSDFExponent.value=o.sdfExponent,i.uTroikaTotalBounds.value.fromArray(u),i.uTroikaUseGlyphColors.value=!t&&!!o.glyphColors;let h=0,A=0,f=0,d,p,m,b=0,g=0;if(t){let{outlineWidth:I,outlineOffsetX:v,outlineOffsetY:C,outlineBlur:E,outlineOpacity:S}=this;h=this._parsePercent(I)||0,A=Math.max(0,this._parsePercent(E)||0),d=S,b=this._parsePercent(v)||0,g=this._parsePercent(C)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(m=this.strokeColor,i.uTroikaStrokeColor.value.set(m??T9),p=this.strokeOpacity,p==null&&(p=1)),d=this.fillOpacity;i.uTroikaDistanceOffset.value=h,i.uTroikaPositionOffset.value.set(b,g),i.uTroikaBlurRadius.value=A,i.uTroikaStrokeWidth.value=f,i.uTroikaStrokeOpacity.value=p,i.uTroikaFillOpacity.value=d??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)i.uTroikaClipRect.value.fromArray(w);else{let I=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(u[0]-I,u[1]-I,u[2]+I,u[3]+I)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;let a=t?this.outlineColor||0:this.color;if(a==null)delete e.color;else{let c=e.hasOwnProperty("color")?e.color:e.color=new De;(a!==c._input||typeof a=="object")&&c.set(c._input=a)}let l=this.orientation||zR;if(l!==e._orientation){let c=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let u=l!==zR&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,h,A,f,d]=u;ix.set(0,0,0)[A]=h==="-"?1:-1,GR.set(0,0,0)[d]=f==="-"?-1:1,_9.lookAt(hfe,ix.cross(GR),GR),c.setFromMatrix4(_9)}else c.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new he){t.copy(e);let i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new he){return ix.copy(e),this.localPositionToTextCoords(this.worldToLocal(ix),t)}raycast(e,t){let{textRenderInfo:i,curveRadius:o}=this;if(i){let a=i.blockBounds,l=o?H9():z9(),c=l.geometry,{position:u,uv:h}=c.attributes;for(let A=0;A<h.count;A++){let f=a[0]+h.getX(A)*(a[2]-a[0]),d=a[1]+h.getY(A)*(a[3]-a[1]),p=0;o&&(p=o-Math.cos(f/o)*o,f=Math.sin(f/o)*o),u.setXYZ(A,f,d,p)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,yg.length=0,l.raycast(e,yg);for(let A=0;A<yg.length;A++)yg[A].object=this,t.push(yg[A])}}copy(e){let t=this.geometry;return super.copy(e),this.geometry=t,dfe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};V9.forEach(n=>{let e="_private_"+n;Object.defineProperty(hf.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});function pfe(n,e,t){let i=null,{caretHeight:o}=n,a=gfe(n),l=1/0;return a.forEach((c,u)=>{Math.abs(t-(u+o/2))<Math.abs(t-(l+o/2))&&(l=u)}),a.get(l).forEach(c=>{(!i||Math.abs(e-c.x)<Math.abs(e-i.x))&&(i=c)}),i}var R9=new WeakMap;function mfe(n,e,t){let i;if(n){let o=R9.get(n);if(o&&o.start===e&&o.end===t)return o.rects;let{caretPositions:a,caretHeight:l}=n;if(t<e){let u=e;e=t,t=u}e=Math.max(e,0),t=Math.min(t,a.length+1),i=[];let c=null;for(let u=e;u<t;u++){let h=a[u*3],A=a[u*3+1],f=Math.min(h,A),d=Math.max(h,A),p=a[u*3+2];(!c||p!==c.bottom||f>c.right||d<c.left)&&(c={left:1/0,right:-1/0,bottom:p,top:p+l},i.push(c)),c.left=Math.min(f,c.left),c.right=Math.max(d,c.right)}i.sort((u,h)=>h.bottom-u.bottom||u.left-h.left);for(let u=i.length-1;u-- >0;){let h=i[u],A=i[u+1];h.bottom===A.bottom&&h.left<=A.right&&h.right>=A.left&&(A.left=Math.min(A.left,h.left),A.right=Math.max(A.right,h.right),i.splice(u,1))}R9.set(n,{start:e,end:t,rects:i})}return i}var L9=new WeakMap;function gfe(n){let e=L9.get(n);if(!e){let{caretPositions:t,caretHeight:i}=n;e=new Map;for(let o=0;o<t.length;o+=3){let a=t[o+2],l=e.get(a);l||e.set(a,l=[]),l.push({x:t[o],y:a,height:i,charIndex:o/3}),o+3>=t.length&&l.push({x:t[o+1],y:a,height:i,charIndex:o/3+1})}}return L9.set(n,e),e}var JR=class{chunkSize;data;constructor(e=32){this.chunkSize=e,this.data=new Map}get(e,t,i){let{chunkSize:o}=this,a=`${e}:${t}:${i}`,l=this.data.get(a);return l||(l=new Uint32Array(o*o*o),this.data.set(a,l)),l}save(){}},qR=class extends He{constructor(e){super(new Ke,e),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}raycast(){}update({bounds:e,vertices:t}){let{geometry:i}=this,o=new hr(t,9);i.setAttribute("position",new zn(o,3,0)),i.setAttribute("normal",new zn(o,3,3)),i.setAttribute("color",new zn(o,3,6)),i.boundingBox||(i.boundingBox=new Ht),i.boundingBox.min.set(e[0],e[1],e[2]),i.boundingBox.max.set(e[3],e[4],e[5]),i.boundingSphere||(i.boundingSphere=new Vt),i.boundingBox.getBoundingSphere(i.boundingSphere)}},yfe=new De,vg=new He(new wn(1,1,1)),XR=[],YR=new Vt,vfe=new ke,lx=new U,$R=class extends He{constructor(e){let t=new gl;t.boundingSphere=new Vt,t.setIndex(vg.geometry.getIndex()),t.setAttribute("position",vg.geometry.getAttribute("position")),t.setAttribute("normal",vg.geometry.getAttribute("normal")),super(t,e),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}getColor(e){let{geometry:t}=this,i=t.getAttribute("color");return yfe.fromBufferAttribute(i,e).convertLinearToSRGB()}raycast(e,t){let{geometry:i,matrixWorld:o,parent:a}=this;if(!a?.visible||!i.boundingSphere||(YR.copy(i.boundingSphere),YR.applyMatrix4(o),!e.ray.intersectsSphere(YR)))return;let l=i.getAttribute("instance");for(let c=0,u=i.instanceCount;c<u;c++)lx.fromBufferAttribute(l,c),vg.matrixWorld.multiplyMatrices(o,vfe.makeTranslation(lx.x,lx.y,lx.z)),vg.raycast(e,XR),XR.forEach(h=>{h.object=this,h.instanceId=c,t.push(h)}),XR.length=0}update({voxels:e}){let{geometry:t}=this,i=new Xd(e,6,1);t.setAttribute("instance",new zn(i,3,0)),t.setAttribute("color",new zn(i,3,3)),t.instanceCount=t._maxInstanceCount=i.count}},eL=class extends Yt{triangles;voxels;request=0;version=0;constructor({geometry:e,materials:t,position:i}){super(),this.position.copy(i),this.updateMatrixWorld(),this.matrixAutoUpdate=!1,this.triangles=new qR(t.triangles),this.add(this.triangles),this.voxels=new $R(t.voxels),this.add(this.voxels),this.update(e)}dispose(){let{triangles:e,voxels:t}=this;e.dispose(),t.dispose()}update(e){if(!e)return void(this.visible=!1);let{triangles:t,voxels:i}=this;t.update(e),i.update(e),i.geometry.boundingBox=t.geometry.boundingBox,i.geometry.boundingSphere=t.geometry.boundingSphere,this.visible=!0}},tL=class{instances;queue;constructor({buffer:e,concurrency:t=navigator.hardwareConcurrency||1,options:i,program:o,script:a}){this.queue=[],o().then(l=>{this.instances=Array.from({length:t},()=>{let c=new a;c.buffer=new Uint32Array(e),c.isBusy=!0,c.run=({buffers:A,resolve:f})=>{c.isBusy=!0,c.resolve=f;let d=A[0].length;A.forEach((p,m)=>{c.buffer.set(p,d*m)}),c.postMessage(c.buffer,[c.buffer.buffer])};let u=()=>{c.removeEventListener("message",u),c.addEventListener("message",h);let A=this.queue.shift();A?c.run(A):c.isBusy=!1},h=({data:{buffer:A,data:f}})=>{c.buffer=A;let{resolve:d}=c;delete c.resolve,d(f);let p=this.queue.shift();p?c.run(p):c.isBusy=!1};return c.addEventListener("message",u),c.postMessage({options:i,program:l}),c})})}dispose(){let{instances:e}=this;e&&e.forEach(t=>t.terminate())}run(e){let{instances:t,queue:i}=this;return new Promise(o=>{if(!t)return void i.push({buffers:e,resolve:o});let a;for(let l=0,c=t.length;l<c;l++)if(!t[l].isBusy){a=t[l];break}a?a.run({buffers:e,resolve:o}):i.push({buffers:e,resolve:o})})}};function wfe(n){return function(e,t,i,o){function a(m,b,g){var w=g?WebAssembly.instantiateStreaming:WebAssembly.instantiate,I=g?WebAssembly.compileStreaming:WebAssembly.compile;return b?w(m,b):I(m)}var l=null,c=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;if(!1)var u,h;if(t)return a(fetch(t),o,!0);if(c)l=Buffer.from(i,"base64");else{var A=globalThis.atob(i),f=A.length;l=new Uint8Array(new ArrayBuffer(f));for(var d=0;d<f;d++)l[d]=A.charCodeAt(d)}if(e){var p=new WebAssembly.Module(l);return o?new WebAssembly.Instance(p,o):p}return a(l,o,!1)}(0,null,"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AACsCwAArAQAAKUFAACvBgAApgcAAKoAAACjAQAAqQIAAKADAAAwDQAAOQwAADMPAAA6DgAANgkAAD8IAAA1CwAAPAoAADwFAAA1BAAAPwcAADYGAAA6AQAAMwAAADkDAAAwAgAAkA4AAJkPAACTDAAAmg0AAJYKAACfCwAAlQgAAJwJAACcBgAAlQcAAJ8EAACWBQAAmgIAAJMDAACZAAAAkAEAAAAPAAAJDgAAAw0AAAoMAAAGCwAADwoAAAUJAAAMCAAADAcAAAUGAAAPBQAABgQAAAoDAAADAgAACQEAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAA/////////////////////////////////////////////////////////////////////wAAAAABAAAACQAAAP////////////////////////////////////////////////////////////////////8BAAAACAAAAAMAAAAJAAAACAAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAAKAAAA/////////////////////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAEAAAACAAAACgAAAP////////////////////////////////////////////////////8JAAAAAgAAAAoAAAAAAAAAAgAAAAkAAAD/////////////////////////////////////////////////////AgAAAAgAAAADAAAAAgAAAAoAAAAIAAAACgAAAAkAAAAIAAAA/////////////////////////////////////wMAAAALAAAAAgAAAP////////////////////////////////////////////////////////////////////8AAAAACwAAAAIAAAAIAAAACwAAAAAAAAD/////////////////////////////////////////////////////AQAAAAkAAAAAAAAAAgAAAAMAAAALAAAA/////////////////////////////////////////////////////wEAAAALAAAAAgAAAAEAAAAJAAAACwAAAAkAAAAIAAAACwAAAP////////////////////////////////////8DAAAACgAAAAEAAAALAAAACgAAAAMAAAD/////////////////////////////////////////////////////AAAAAAoAAAABAAAAAAAAAAgAAAAKAAAACAAAAAsAAAAKAAAA/////////////////////////////////////wMAAAAJAAAAAAAAAAMAAAALAAAACQAAAAsAAAAKAAAACQAAAP////////////////////////////////////8JAAAACAAAAAoAAAAKAAAACAAAAAsAAAD/////////////////////////////////////////////////////BAAAAAcAAAAIAAAA/////////////////////////////////////////////////////////////////////wQAAAADAAAAAAAAAAcAAAADAAAABAAAAP////////////////////////////////////////////////////8AAAAAAQAAAAkAAAAIAAAABAAAAAcAAAD/////////////////////////////////////////////////////BAAAAAEAAAAJAAAABAAAAAcAAAABAAAABwAAAAMAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAgAAAAEAAAABwAAAP////////////////////////////////////////////////////8DAAAABAAAAAcAAAADAAAAAAAAAAQAAAABAAAAAgAAAAoAAAD/////////////////////////////////////CQAAAAIAAAAKAAAACQAAAAAAAAACAAAACAAAAAQAAAAHAAAA/////////////////////////////////////wIAAAAKAAAACQAAAAIAAAAJAAAABwAAAAIAAAAHAAAAAwAAAAcAAAAJAAAABAAAAP////////////////////8IAAAABAAAAAcAAAADAAAACwAAAAIAAAD/////////////////////////////////////////////////////CwAAAAQAAAAHAAAACwAAAAIAAAAEAAAAAgAAAAAAAAAEAAAA/////////////////////////////////////wkAAAAAAAAAAQAAAAgAAAAEAAAABwAAAAIAAAADAAAACwAAAP////////////////////////////////////8EAAAABwAAAAsAAAAJAAAABAAAAAsAAAAJAAAACwAAAAIAAAAJAAAAAgAAAAEAAAD/////////////////////AwAAAAoAAAABAAAAAwAAAAsAAAAKAAAABwAAAAgAAAAEAAAA/////////////////////////////////////wEAAAALAAAACgAAAAEAAAAEAAAACwAAAAEAAAAAAAAABAAAAAcAAAALAAAABAAAAP////////////////////8EAAAABwAAAAgAAAAJAAAAAAAAAAsAAAAJAAAACwAAAAoAAAALAAAAAAAAAAMAAAD/////////////////////BAAAAAcAAAALAAAABAAAAAsAAAAJAAAACQAAAAsAAAAKAAAA/////////////////////////////////////wkAAAAFAAAABAAAAP////////////////////////////////////////////////////////////////////8JAAAABQAAAAQAAAAAAAAACAAAAAMAAAD/////////////////////////////////////////////////////AAAAAAUAAAAEAAAAAQAAAAUAAAAAAAAA/////////////////////////////////////////////////////wgAAAAFAAAABAAAAAgAAAADAAAABQAAAAMAAAABAAAABQAAAP////////////////////////////////////8BAAAAAgAAAAoAAAAJAAAABQAAAAQAAAD/////////////////////////////////////////////////////AwAAAAAAAAAIAAAAAQAAAAIAAAAKAAAABAAAAAkAAAAFAAAA/////////////////////////////////////wUAAAACAAAACgAAAAUAAAAEAAAAAgAAAAQAAAAAAAAAAgAAAP////////////////////////////////////8CAAAACgAAAAUAAAADAAAAAgAAAAUAAAADAAAABQAAAAQAAAADAAAABAAAAAgAAAD/////////////////////CQAAAAUAAAAEAAAAAgAAAAMAAAALAAAA/////////////////////////////////////////////////////wAAAAALAAAAAgAAAAAAAAAIAAAACwAAAAQAAAAJAAAABQAAAP////////////////////////////////////8AAAAABQAAAAQAAAAAAAAAAQAAAAUAAAACAAAAAwAAAAsAAAD/////////////////////////////////////AgAAAAEAAAAFAAAAAgAAAAUAAAAIAAAAAgAAAAgAAAALAAAABAAAAAgAAAAFAAAA/////////////////////woAAAADAAAACwAAAAoAAAABAAAAAwAAAAkAAAAFAAAABAAAAP////////////////////////////////////8EAAAACQAAAAUAAAAAAAAACAAAAAEAAAAIAAAACgAAAAEAAAAIAAAACwAAAAoAAAD/////////////////////BQAAAAQAAAAAAAAABQAAAAAAAAALAAAABQAAAAsAAAAKAAAACwAAAAAAAAADAAAA/////////////////////wUAAAAEAAAACAAAAAUAAAAIAAAACgAAAAoAAAAIAAAACwAAAP////////////////////////////////////8JAAAABwAAAAgAAAAFAAAABwAAAAkAAAD/////////////////////////////////////////////////////CQAAAAMAAAAAAAAACQAAAAUAAAADAAAABQAAAAcAAAADAAAA/////////////////////////////////////wAAAAAHAAAACAAAAAAAAAABAAAABwAAAAEAAAAFAAAABwAAAP////////////////////////////////////8BAAAABQAAAAMAAAADAAAABQAAAAcAAAD/////////////////////////////////////////////////////CQAAAAcAAAAIAAAACQAAAAUAAAAHAAAACgAAAAEAAAACAAAA/////////////////////////////////////woAAAABAAAAAgAAAAkAAAAFAAAAAAAAAAUAAAADAAAAAAAAAAUAAAAHAAAAAwAAAP////////////////////8IAAAAAAAAAAIAAAAIAAAAAgAAAAUAAAAIAAAABQAAAAcAAAAKAAAABQAAAAIAAAD/////////////////////AgAAAAoAAAAFAAAAAgAAAAUAAAADAAAAAwAAAAUAAAAHAAAA/////////////////////////////////////wcAAAAJAAAABQAAAAcAAAAIAAAACQAAAAMAAAALAAAAAgAAAP////////////////////////////////////8JAAAABQAAAAcAAAAJAAAABwAAAAIAAAAJAAAAAgAAAAAAAAACAAAABwAAAAsAAAD/////////////////////AgAAAAMAAAALAAAAAAAAAAEAAAAIAAAAAQAAAAcAAAAIAAAAAQAAAAUAAAAHAAAA/////////////////////wsAAAACAAAAAQAAAAsAAAABAAAABwAAAAcAAAABAAAABQAAAP////////////////////////////////////8JAAAABQAAAAgAAAAIAAAABQAAAAcAAAAKAAAAAQAAAAMAAAAKAAAAAwAAAAsAAAD/////////////////////BQAAAAcAAAAAAAAABQAAAAAAAAAJAAAABwAAAAsAAAAAAAAAAQAAAAAAAAAKAAAACwAAAAoAAAAAAAAA/////wsAAAAKAAAAAAAAAAsAAAAAAAAAAwAAAAoAAAAFAAAAAAAAAAgAAAAAAAAABwAAAAUAAAAHAAAAAAAAAP////8LAAAACgAAAAUAAAAHAAAACwAAAAUAAAD/////////////////////////////////////////////////////CgAAAAYAAAAFAAAA/////////////////////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAUAAAAKAAAABgAAAP////////////////////////////////////////////////////8JAAAAAAAAAAEAAAAFAAAACgAAAAYAAAD/////////////////////////////////////////////////////AQAAAAgAAAADAAAAAQAAAAkAAAAIAAAABQAAAAoAAAAGAAAA/////////////////////////////////////wEAAAAGAAAABQAAAAIAAAAGAAAAAQAAAP////////////////////////////////////////////////////8BAAAABgAAAAUAAAABAAAAAgAAAAYAAAADAAAAAAAAAAgAAAD/////////////////////////////////////CQAAAAYAAAAFAAAACQAAAAAAAAAGAAAAAAAAAAIAAAAGAAAA/////////////////////////////////////wUAAAAJAAAACAAAAAUAAAAIAAAAAgAAAAUAAAACAAAABgAAAAMAAAACAAAACAAAAP////////////////////8CAAAAAwAAAAsAAAAKAAAABgAAAAUAAAD/////////////////////////////////////////////////////CwAAAAAAAAAIAAAACwAAAAIAAAAAAAAACgAAAAYAAAAFAAAA/////////////////////////////////////wAAAAABAAAACQAAAAIAAAADAAAACwAAAAUAAAAKAAAABgAAAP////////////////////////////////////8FAAAACgAAAAYAAAABAAAACQAAAAIAAAAJAAAACwAAAAIAAAAJAAAACAAAAAsAAAD/////////////////////BgAAAAMAAAALAAAABgAAAAUAAAADAAAABQAAAAEAAAADAAAA/////////////////////////////////////wAAAAAIAAAACwAAAAAAAAALAAAABQAAAAAAAAAFAAAAAQAAAAUAAAALAAAABgAAAP////////////////////8DAAAACwAAAAYAAAAAAAAAAwAAAAYAAAAAAAAABgAAAAUAAAAAAAAABQAAAAkAAAD/////////////////////BgAAAAUAAAAJAAAABgAAAAkAAAALAAAACwAAAAkAAAAIAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAQAAAAHAAAACAAAAP////////////////////////////////////////////////////8EAAAAAwAAAAAAAAAEAAAABwAAAAMAAAAGAAAABQAAAAoAAAD/////////////////////////////////////AQAAAAkAAAAAAAAABQAAAAoAAAAGAAAACAAAAAQAAAAHAAAA/////////////////////////////////////woAAAAGAAAABQAAAAEAAAAJAAAABwAAAAEAAAAHAAAAAwAAAAcAAAAJAAAABAAAAP////////////////////8GAAAAAQAAAAIAAAAGAAAABQAAAAEAAAAEAAAABwAAAAgAAAD/////////////////////////////////////AQAAAAIAAAAFAAAABQAAAAIAAAAGAAAAAwAAAAAAAAAEAAAAAwAAAAQAAAAHAAAA/////////////////////wgAAAAEAAAABwAAAAkAAAAAAAAABQAAAAAAAAAGAAAABQAAAAAAAAACAAAABgAAAP////////////////////8HAAAAAwAAAAkAAAAHAAAACQAAAAQAAAADAAAAAgAAAAkAAAAFAAAACQAAAAYAAAACAAAABgAAAAkAAAD/////AwAAAAsAAAACAAAABwAAAAgAAAAEAAAACgAAAAYAAAAFAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAQAAAAHAAAAAgAAAAQAAAACAAAAAAAAAAIAAAAHAAAACwAAAP////////////////////8AAAAAAQAAAAkAAAAEAAAABwAAAAgAAAACAAAAAwAAAAsAAAAFAAAACgAAAAYAAAD/////////////////////CQAAAAIAAAABAAAACQAAAAsAAAACAAAACQAAAAQAAAALAAAABwAAAAsAAAAEAAAABQAAAAoAAAAGAAAA/////wgAAAAEAAAABwAAAAMAAAALAAAABQAAAAMAAAAFAAAAAQAAAAUAAAALAAAABgAAAP////////////////////8FAAAAAQAAAAsAAAAFAAAACwAAAAYAAAABAAAAAAAAAAsAAAAHAAAACwAAAAQAAAAAAAAABAAAAAsAAAD/////AAAAAAUAAAAJAAAAAAAAAAYAAAAFAAAAAAAAAAMAAAAGAAAACwAAAAYAAAADAAAACAAAAAQAAAAHAAAA/////wYAAAAFAAAACQAAAAYAAAAJAAAACwAAAAQAAAAHAAAACQAAAAcAAAALAAAACQAAAP////////////////////8KAAAABAAAAAkAAAAGAAAABAAAAAoAAAD/////////////////////////////////////////////////////BAAAAAoAAAAGAAAABAAAAAkAAAAKAAAAAAAAAAgAAAADAAAA/////////////////////////////////////woAAAAAAAAAAQAAAAoAAAAGAAAAAAAAAAYAAAAEAAAAAAAAAP////////////////////////////////////8IAAAAAwAAAAEAAAAIAAAAAQAAAAYAAAAIAAAABgAAAAQAAAAGAAAAAQAAAAoAAAD/////////////////////AQAAAAQAAAAJAAAAAQAAAAIAAAAEAAAAAgAAAAYAAAAEAAAA/////////////////////////////////////wMAAAAAAAAACAAAAAEAAAACAAAACQAAAAIAAAAEAAAACQAAAAIAAAAGAAAABAAAAP////////////////////8AAAAAAgAAAAQAAAAEAAAAAgAAAAYAAAD/////////////////////////////////////////////////////CAAAAAMAAAACAAAACAAAAAIAAAAEAAAABAAAAAIAAAAGAAAA/////////////////////////////////////woAAAAEAAAACQAAAAoAAAAGAAAABAAAAAsAAAACAAAAAwAAAP////////////////////////////////////8AAAAACAAAAAIAAAACAAAACAAAAAsAAAAEAAAACQAAAAoAAAAEAAAACgAAAAYAAAD/////////////////////AwAAAAsAAAACAAAAAAAAAAEAAAAGAAAAAAAAAAYAAAAEAAAABgAAAAEAAAAKAAAA/////////////////////wYAAAAEAAAAAQAAAAYAAAABAAAACgAAAAQAAAAIAAAAAQAAAAIAAAABAAAACwAAAAgAAAALAAAAAQAAAP////8JAAAABgAAAAQAAAAJAAAAAwAAAAYAAAAJAAAAAQAAAAMAAAALAAAABgAAAAMAAAD/////////////////////CAAAAAsAAAABAAAACAAAAAEAAAAAAAAACwAAAAYAAAABAAAACQAAAAEAAAAEAAAABgAAAAQAAAABAAAA/////wMAAAALAAAABgAAAAMAAAAGAAAAAAAAAAAAAAAGAAAABAAAAP////////////////////////////////////8GAAAABAAAAAgAAAALAAAABgAAAAgAAAD/////////////////////////////////////////////////////BwAAAAoAAAAGAAAABwAAAAgAAAAKAAAACAAAAAkAAAAKAAAA/////////////////////////////////////wAAAAAHAAAAAwAAAAAAAAAKAAAABwAAAAAAAAAJAAAACgAAAAYAAAAHAAAACgAAAP////////////////////8KAAAABgAAAAcAAAABAAAACgAAAAcAAAABAAAABwAAAAgAAAABAAAACAAAAAAAAAD/////////////////////CgAAAAYAAAAHAAAACgAAAAcAAAABAAAAAQAAAAcAAAADAAAA/////////////////////////////////////wEAAAACAAAABgAAAAEAAAAGAAAACAAAAAEAAAAIAAAACQAAAAgAAAAGAAAABwAAAP////////////////////8CAAAABgAAAAkAAAACAAAACQAAAAEAAAAGAAAABwAAAAkAAAAAAAAACQAAAAMAAAAHAAAAAwAAAAkAAAD/////BwAAAAgAAAAAAAAABwAAAAAAAAAGAAAABgAAAAAAAAACAAAA/////////////////////////////////////wcAAAADAAAAAgAAAAYAAAAHAAAAAgAAAP////////////////////////////////////////////////////8CAAAAAwAAAAsAAAAKAAAABgAAAAgAAAAKAAAACAAAAAkAAAAIAAAABgAAAAcAAAD/////////////////////AgAAAAAAAAAHAAAAAgAAAAcAAAALAAAAAAAAAAkAAAAHAAAABgAAAAcAAAAKAAAACQAAAAoAAAAHAAAA/////wEAAAAIAAAAAAAAAAEAAAAHAAAACAAAAAEAAAAKAAAABwAAAAYAAAAHAAAACgAAAAIAAAADAAAACwAAAP////8LAAAAAgAAAAEAAAALAAAAAQAAAAcAAAAKAAAABgAAAAEAAAAGAAAABwAAAAEAAAD/////////////////////CAAAAAkAAAAGAAAACAAAAAYAAAAHAAAACQAAAAEAAAAGAAAACwAAAAYAAAADAAAAAQAAAAMAAAAGAAAA/////wAAAAAJAAAAAQAAAAsAAAAGAAAABwAAAP////////////////////////////////////////////////////8HAAAACAAAAAAAAAAHAAAAAAAAAAYAAAADAAAACwAAAAAAAAALAAAABgAAAAAAAAD/////////////////////BwAAAAsAAAAGAAAA/////////////////////////////////////////////////////////////////////wcAAAAGAAAACwAAAP////////////////////////////////////////////////////////////////////8DAAAAAAAAAAgAAAALAAAABwAAAAYAAAD/////////////////////////////////////////////////////AAAAAAEAAAAJAAAACwAAAAcAAAAGAAAA/////////////////////////////////////////////////////wgAAAABAAAACQAAAAgAAAADAAAAAQAAAAsAAAAHAAAABgAAAP////////////////////////////////////8KAAAAAQAAAAIAAAAGAAAACwAAAAcAAAD/////////////////////////////////////////////////////AQAAAAIAAAAKAAAAAwAAAAAAAAAIAAAABgAAAAsAAAAHAAAA/////////////////////////////////////wIAAAAJAAAAAAAAAAIAAAAKAAAACQAAAAYAAAALAAAABwAAAP////////////////////////////////////8GAAAACwAAAAcAAAACAAAACgAAAAMAAAAKAAAACAAAAAMAAAAKAAAACQAAAAgAAAD/////////////////////BwAAAAIAAAADAAAABgAAAAIAAAAHAAAA/////////////////////////////////////////////////////wcAAAAAAAAACAAAAAcAAAAGAAAAAAAAAAYAAAACAAAAAAAAAP////////////////////////////////////8CAAAABwAAAAYAAAACAAAAAwAAAAcAAAAAAAAAAQAAAAkAAAD/////////////////////////////////////AQAAAAYAAAACAAAAAQAAAAgAAAAGAAAAAQAAAAkAAAAIAAAACAAAAAcAAAAGAAAA/////////////////////woAAAAHAAAABgAAAAoAAAABAAAABwAAAAEAAAADAAAABwAAAP////////////////////////////////////8KAAAABwAAAAYAAAABAAAABwAAAAoAAAABAAAACAAAAAcAAAABAAAAAAAAAAgAAAD/////////////////////AAAAAAMAAAAHAAAAAAAAAAcAAAAKAAAAAAAAAAoAAAAJAAAABgAAAAoAAAAHAAAA/////////////////////wcAAAAGAAAACgAAAAcAAAAKAAAACAAAAAgAAAAKAAAACQAAAP////////////////////////////////////8GAAAACAAAAAQAAAALAAAACAAAAAYAAAD/////////////////////////////////////////////////////AwAAAAYAAAALAAAAAwAAAAAAAAAGAAAAAAAAAAQAAAAGAAAA/////////////////////////////////////wgAAAAGAAAACwAAAAgAAAAEAAAABgAAAAkAAAAAAAAAAQAAAP////////////////////////////////////8JAAAABAAAAAYAAAAJAAAABgAAAAMAAAAJAAAAAwAAAAEAAAALAAAAAwAAAAYAAAD/////////////////////BgAAAAgAAAAEAAAABgAAAAsAAAAIAAAAAgAAAAoAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAMAAAAAAAAACwAAAAAAAAAGAAAACwAAAAAAAAAEAAAABgAAAP////////////////////8EAAAACwAAAAgAAAAEAAAABgAAAAsAAAAAAAAAAgAAAAkAAAACAAAACgAAAAkAAAD/////////////////////CgAAAAkAAAADAAAACgAAAAMAAAACAAAACQAAAAQAAAADAAAACwAAAAMAAAAGAAAABAAAAAYAAAADAAAA/////wgAAAACAAAAAwAAAAgAAAAEAAAAAgAAAAQAAAAGAAAAAgAAAP////////////////////////////////////8AAAAABAAAAAIAAAAEAAAABgAAAAIAAAD/////////////////////////////////////////////////////AQAAAAkAAAAAAAAAAgAAAAMAAAAEAAAAAgAAAAQAAAAGAAAABAAAAAMAAAAIAAAA/////////////////////wEAAAAJAAAABAAAAAEAAAAEAAAAAgAAAAIAAAAEAAAABgAAAP////////////////////////////////////8IAAAAAQAAAAMAAAAIAAAABgAAAAEAAAAIAAAABAAAAAYAAAAGAAAACgAAAAEAAAD/////////////////////CgAAAAEAAAAAAAAACgAAAAAAAAAGAAAABgAAAAAAAAAEAAAA/////////////////////////////////////wQAAAAGAAAAAwAAAAQAAAADAAAACAAAAAYAAAAKAAAAAwAAAAAAAAADAAAACQAAAAoAAAAJAAAAAwAAAP////8KAAAACQAAAAQAAAAGAAAACgAAAAQAAAD/////////////////////////////////////////////////////BAAAAAkAAAAFAAAABwAAAAYAAAALAAAA/////////////////////////////////////////////////////wAAAAAIAAAAAwAAAAQAAAAJAAAABQAAAAsAAAAHAAAABgAAAP////////////////////////////////////8FAAAAAAAAAAEAAAAFAAAABAAAAAAAAAAHAAAABgAAAAsAAAD/////////////////////////////////////CwAAAAcAAAAGAAAACAAAAAMAAAAEAAAAAwAAAAUAAAAEAAAAAwAAAAEAAAAFAAAA/////////////////////wkAAAAFAAAABAAAAAoAAAABAAAAAgAAAAcAAAAGAAAACwAAAP////////////////////////////////////8GAAAACwAAAAcAAAABAAAAAgAAAAoAAAAAAAAACAAAAAMAAAAEAAAACQAAAAUAAAD/////////////////////BwAAAAYAAAALAAAABQAAAAQAAAAKAAAABAAAAAIAAAAKAAAABAAAAAAAAAACAAAA/////////////////////wMAAAAEAAAACAAAAAMAAAAFAAAABAAAAAMAAAACAAAABQAAAAoAAAAFAAAAAgAAAAsAAAAHAAAABgAAAP////8HAAAAAgAAAAMAAAAHAAAABgAAAAIAAAAFAAAABAAAAAkAAAD/////////////////////////////////////CQAAAAUAAAAEAAAAAAAAAAgAAAAGAAAAAAAAAAYAAAACAAAABgAAAAgAAAAHAAAA/////////////////////wMAAAAGAAAAAgAAAAMAAAAHAAAABgAAAAEAAAAFAAAAAAAAAAUAAAAEAAAAAAAAAP////////////////////8GAAAAAgAAAAgAAAAGAAAACAAAAAcAAAACAAAAAQAAAAgAAAAEAAAACAAAAAUAAAABAAAABQAAAAgAAAD/////CQAAAAUAAAAEAAAACgAAAAEAAAAGAAAAAQAAAAcAAAAGAAAAAQAAAAMAAAAHAAAA/////////////////////wEAAAAGAAAACgAAAAEAAAAHAAAABgAAAAEAAAAAAAAABwAAAAgAAAAHAAAAAAAAAAkAAAAFAAAABAAAAP////8EAAAAAAAAAAoAAAAEAAAACgAAAAUAAAAAAAAAAwAAAAoAAAAGAAAACgAAAAcAAAADAAAABwAAAAoAAAD/////BwAAAAYAAAAKAAAABwAAAAoAAAAIAAAABQAAAAQAAAAKAAAABAAAAAgAAAAKAAAA/////////////////////wYAAAAJAAAABQAAAAYAAAALAAAACQAAAAsAAAAIAAAACQAAAP////////////////////////////////////8DAAAABgAAAAsAAAAAAAAABgAAAAMAAAAAAAAABQAAAAYAAAAAAAAACQAAAAUAAAD/////////////////////AAAAAAsAAAAIAAAAAAAAAAUAAAALAAAAAAAAAAEAAAAFAAAABQAAAAYAAAALAAAA/////////////////////wYAAAALAAAAAwAAAAYAAAADAAAABQAAAAUAAAADAAAAAQAAAP////////////////////////////////////8BAAAAAgAAAAoAAAAJAAAABQAAAAsAAAAJAAAACwAAAAgAAAALAAAABQAAAAYAAAD/////////////////////AAAAAAsAAAADAAAAAAAAAAYAAAALAAAAAAAAAAkAAAAGAAAABQAAAAYAAAAJAAAAAQAAAAIAAAAKAAAA/////wsAAAAIAAAABQAAAAsAAAAFAAAABgAAAAgAAAAAAAAABQAAAAoAAAAFAAAAAgAAAAAAAAACAAAABQAAAP////8GAAAACwAAAAMAAAAGAAAAAwAAAAUAAAACAAAACgAAAAMAAAAKAAAABQAAAAMAAAD/////////////////////BQAAAAgAAAAJAAAABQAAAAIAAAAIAAAABQAAAAYAAAACAAAAAwAAAAgAAAACAAAA/////////////////////wkAAAAFAAAABgAAAAkAAAAGAAAAAAAAAAAAAAAGAAAAAgAAAP////////////////////////////////////8BAAAABQAAAAgAAAABAAAACAAAAAAAAAAFAAAABgAAAAgAAAADAAAACAAAAAIAAAAGAAAAAgAAAAgAAAD/////AQAAAAUAAAAGAAAAAgAAAAEAAAAGAAAA/////////////////////////////////////////////////////wEAAAADAAAABgAAAAEAAAAGAAAACgAAAAMAAAAIAAAABgAAAAUAAAAGAAAACQAAAAgAAAAJAAAABgAAAP////8KAAAAAQAAAAAAAAAKAAAAAAAAAAYAAAAJAAAABQAAAAAAAAAFAAAABgAAAAAAAAD/////////////////////AAAAAAMAAAAIAAAABQAAAAYAAAAKAAAA/////////////////////////////////////////////////////woAAAAFAAAABgAAAP////////////////////////////////////////////////////////////////////8LAAAABQAAAAoAAAAHAAAABQAAAAsAAAD/////////////////////////////////////////////////////CwAAAAUAAAAKAAAACwAAAAcAAAAFAAAACAAAAAMAAAAAAAAA/////////////////////////////////////wUAAAALAAAABwAAAAUAAAAKAAAACwAAAAEAAAAJAAAAAAAAAP////////////////////////////////////8KAAAABwAAAAUAAAAKAAAACwAAAAcAAAAJAAAACAAAAAEAAAAIAAAAAwAAAAEAAAD/////////////////////CwAAAAEAAAACAAAACwAAAAcAAAABAAAABwAAAAUAAAABAAAA/////////////////////////////////////wAAAAAIAAAAAwAAAAEAAAACAAAABwAAAAEAAAAHAAAABQAAAAcAAAACAAAACwAAAP////////////////////8JAAAABwAAAAUAAAAJAAAAAgAAAAcAAAAJAAAAAAAAAAIAAAACAAAACwAAAAcAAAD/////////////////////BwAAAAUAAAACAAAABwAAAAIAAAALAAAABQAAAAkAAAACAAAAAwAAAAIAAAAIAAAACQAAAAgAAAACAAAA/////wIAAAAFAAAACgAAAAIAAAADAAAABQAAAAMAAAAHAAAABQAAAP////////////////////////////////////8IAAAAAgAAAAAAAAAIAAAABQAAAAIAAAAIAAAABwAAAAUAAAAKAAAAAgAAAAUAAAD/////////////////////CQAAAAAAAAABAAAABQAAAAoAAAADAAAABQAAAAMAAAAHAAAAAwAAAAoAAAACAAAA/////////////////////wkAAAAIAAAAAgAAAAkAAAACAAAAAQAAAAgAAAAHAAAAAgAAAAoAAAACAAAABQAAAAcAAAAFAAAAAgAAAP////8BAAAAAwAAAAUAAAADAAAABwAAAAUAAAD/////////////////////////////////////////////////////AAAAAAgAAAAHAAAAAAAAAAcAAAABAAAAAQAAAAcAAAAFAAAA/////////////////////////////////////wkAAAAAAAAAAwAAAAkAAAADAAAABQAAAAUAAAADAAAABwAAAP////////////////////////////////////8JAAAACAAAAAcAAAAFAAAACQAAAAcAAAD/////////////////////////////////////////////////////BQAAAAgAAAAEAAAABQAAAAoAAAAIAAAACgAAAAsAAAAIAAAA/////////////////////////////////////wUAAAAAAAAABAAAAAUAAAALAAAAAAAAAAUAAAAKAAAACwAAAAsAAAADAAAAAAAAAP////////////////////8AAAAAAQAAAAkAAAAIAAAABAAAAAoAAAAIAAAACgAAAAsAAAAKAAAABAAAAAUAAAD/////////////////////CgAAAAsAAAAEAAAACgAAAAQAAAAFAAAACwAAAAMAAAAEAAAACQAAAAQAAAABAAAAAwAAAAEAAAAEAAAA/////wIAAAAFAAAAAQAAAAIAAAAIAAAABQAAAAIAAAALAAAACAAAAAQAAAAFAAAACAAAAP////////////////////8AAAAABAAAAAsAAAAAAAAACwAAAAMAAAAEAAAABQAAAAsAAAACAAAACwAAAAEAAAAFAAAAAQAAAAsAAAD/////AAAAAAIAAAAFAAAAAAAAAAUAAAAJAAAAAgAAAAsAAAAFAAAABAAAAAUAAAAIAAAACwAAAAgAAAAFAAAA/////wkAAAAEAAAABQAAAAIAAAALAAAAAwAAAP////////////////////////////////////////////////////8CAAAABQAAAAoAAAADAAAABQAAAAIAAAADAAAABAAAAAUAAAADAAAACAAAAAQAAAD/////////////////////BQAAAAoAAAACAAAABQAAAAIAAAAEAAAABAAAAAIAAAAAAAAA/////////////////////////////////////wMAAAAKAAAAAgAAAAMAAAAFAAAACgAAAAMAAAAIAAAABQAAAAQAAAAFAAAACAAAAAAAAAABAAAACQAAAP////8FAAAACgAAAAIAAAAFAAAAAgAAAAQAAAABAAAACQAAAAIAAAAJAAAABAAAAAIAAAD/////////////////////CAAAAAQAAAAFAAAACAAAAAUAAAADAAAAAwAAAAUAAAABAAAA/////////////////////////////////////wAAAAAEAAAABQAAAAEAAAAAAAAABQAAAP////////////////////////////////////////////////////8IAAAABAAAAAUAAAAIAAAABQAAAAMAAAAJAAAAAAAAAAUAAAAAAAAAAwAAAAUAAAD/////////////////////CQAAAAQAAAAFAAAA/////////////////////////////////////////////////////////////////////wQAAAALAAAABwAAAAQAAAAJAAAACwAAAAkAAAAKAAAACwAAAP////////////////////////////////////8AAAAACAAAAAMAAAAEAAAACQAAAAcAAAAJAAAACwAAAAcAAAAJAAAACgAAAAsAAAD/////////////////////AQAAAAoAAAALAAAAAQAAAAsAAAAEAAAAAQAAAAQAAAAAAAAABwAAAAQAAAALAAAA/////////////////////wMAAAABAAAABAAAAAMAAAAEAAAACAAAAAEAAAAKAAAABAAAAAcAAAAEAAAACwAAAAoAAAALAAAABAAAAP////8EAAAACwAAAAcAAAAJAAAACwAAAAQAAAAJAAAAAgAAAAsAAAAJAAAAAQAAAAIAAAD/////////////////////CQAAAAcAAAAEAAAACQAAAAsAAAAHAAAACQAAAAEAAAALAAAAAgAAAAsAAAABAAAAAAAAAAgAAAADAAAA/////wsAAAAHAAAABAAAAAsAAAAEAAAAAgAAAAIAAAAEAAAAAAAAAP////////////////////////////////////8LAAAABwAAAAQAAAALAAAABAAAAAIAAAAIAAAAAwAAAAQAAAADAAAAAgAAAAQAAAD/////////////////////AgAAAAkAAAAKAAAAAgAAAAcAAAAJAAAAAgAAAAMAAAAHAAAABwAAAAQAAAAJAAAA/////////////////////wkAAAAKAAAABwAAAAkAAAAHAAAABAAAAAoAAAACAAAABwAAAAgAAAAHAAAAAAAAAAIAAAAAAAAABwAAAP////8DAAAABwAAAAoAAAADAAAACgAAAAIAAAAHAAAABAAAAAoAAAABAAAACgAAAAAAAAAEAAAAAAAAAAoAAAD/////AQAAAAoAAAACAAAACAAAAAcAAAAEAAAA/////////////////////////////////////////////////////wQAAAAJAAAAAQAAAAQAAAABAAAABwAAAAcAAAABAAAAAwAAAP////////////////////////////////////8EAAAACQAAAAEAAAAEAAAAAQAAAAcAAAAAAAAACAAAAAEAAAAIAAAABwAAAAEAAAD/////////////////////BAAAAAAAAAADAAAABwAAAAQAAAADAAAA/////////////////////////////////////////////////////wQAAAAIAAAABwAAAP////////////////////////////////////////////////////////////////////8JAAAACgAAAAgAAAAKAAAACwAAAAgAAAD/////////////////////////////////////////////////////AwAAAAAAAAAJAAAAAwAAAAkAAAALAAAACwAAAAkAAAAKAAAA/////////////////////////////////////wAAAAABAAAACgAAAAAAAAAKAAAACAAAAAgAAAAKAAAACwAAAP////////////////////////////////////8DAAAAAQAAAAoAAAALAAAAAwAAAAoAAAD/////////////////////////////////////////////////////AQAAAAIAAAALAAAAAQAAAAsAAAAJAAAACQAAAAsAAAAIAAAA/////////////////////////////////////wMAAAAAAAAACQAAAAMAAAAJAAAACwAAAAEAAAACAAAACQAAAAIAAAALAAAACQAAAP////////////////////8AAAAAAgAAAAsAAAAIAAAAAAAAAAsAAAD/////////////////////////////////////////////////////AwAAAAIAAAALAAAA/////////////////////////////////////////////////////////////////////wIAAAADAAAACAAAAAIAAAAIAAAACgAAAAoAAAAIAAAACQAAAP////////////////////////////////////8JAAAACgAAAAIAAAAAAAAACQAAAAIAAAD/////////////////////////////////////////////////////AgAAAAMAAAAIAAAAAgAAAAgAAAAKAAAAAAAAAAEAAAAIAAAAAQAAAAoAAAAIAAAA/////////////////////wEAAAAKAAAAAgAAAP////////////////////////////////////////////////////////////////////8BAAAAAwAAAAgAAAAJAAAAAQAAAAgAAAD/////////////////////////////////////////////////////AAAAAAkAAAABAAAA/////////////////////////////////////////////////////////////////////wAAAAADAAAACAAAAP//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AI4CBG5hbWUB5gETABJfX3dhc21faW5pdF9tZW1vcnkBBWFib3J0AgRzYnJrAwZtYWxsb2MECGRsbWFsbG9jBQVkdW1teQYRX193YXNtX2NhbGxfZHRvcnMHDl9fbWF0aF9pbnZhbGlkCAxfX21hdGhfeGZsb3cJDF9fbWF0aF9vZmxvdwoMX19tYXRoX3VmbG93CwNwb3cMCGNoZWNraW50DQtzcGVjaWFsY2FzZQ4DcnVuDwNnZXQQC2ludGVycG9sYXRlERJydW4uY29tbWFuZF9leHBvcnQSFW1hbGxvYy5jb21tYW5kX2V4cG9ydAcSAQAPX19zdGFja19wb2ludGVyCQoBAAcucm9kYXRhACYJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5nBjE1LjAuNgAeD3RhcmdldF9mZWF0dXJlcwErC2J1bGstbWVtb3J5",n)}var X9=null;try{W9=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Yi=="function"&&Yi("worker_threads"),X9=W9.Worker}catch{}var W9;function bfe(n,e,t){var i=e===void 0?null:e,o=function(c,u){return Buffer.from(c,"base64").toString(u?"utf16":"utf8")}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:"");return function(c){return new X9(l,Object.assign({},c,{eval:!0}))}}function xfe(n,e,t){var i=e===void 0?null:e,o=function(u,h){var A=atob(u);if(h){for(var f=new Uint8Array(A.length),d=0,p=A.length;d<p;++d)f[d]=A.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return A}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var Cfe=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",ZR,KR,jR,Sfe=(ZR="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0fSxwcm9ncmFtOm99fSk9PnsoKHttZW1vcnk6ZSxwcm9ncmFtOnN9KT0+e2NvbnN0IHI9TWF0aC5jZWlsKGUucmVkdWNlKCgoZSx7dHlwZTpzLHNpemU6cn0pPT5lK3Iqcy5CWVRFU19QRVJfRUxFTUVOVCksMCkvNjU1MzYpKzIsdD1uZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtpbml0aWFsOnIsbWF4aW11bTpyfSk7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHMse2Vudjp7bWVtb3J5OnR9fSkudGhlbigocz0+KHttZW1vcnk6ZS5yZWR1Y2UoKChlLHtpZDpyLHR5cGU6byxzaXplOm19KT0+e2NvbnN0IG49cy5leHBvcnRzLm1hbGxvYyhtKm8uQllURVNfUEVSX0VMRU1FTlQpO3JldHVybiBlW3JdPXthZGRyZXNzOm4sdmlldzpuZXcgbyh0LmJ1ZmZlcixuLG0pfSxlfSkse30pLHJ1bjpzLmV4cG9ydHMucnVufSkpKX0pKHttZW1vcnk6W3tpZDoiY2h1bmtzIix0eXBlOlVpbnQzMkFycmF5LHNpemU6dCp0KnQqOH0se2lkOiJjb3VudHMiLHR5cGU6SW50MzJBcnJheSxzaXplOjJ9LHtpZDoidmVydGljZXMiLHR5cGU6RmxvYXQzMkFycmF5LHNpemU6dCp0KnQqMyo5KjV9LHtpZDoidm94ZWxzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOnQqdCp0Ki41KjZ9LHtpZDoiYm91bmRzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOjZ9XSxwcm9ncmFtOm99KS50aGVuKCgoe21lbW9yeTpvLHJ1bjptfSk9PntlPXtjaHVua1NpemU6dCxtZW1vcnk6byxydW46bX0sc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHIpLHNlbGYucG9zdE1lc3NhZ2UoITApfSkpfTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpO2NvbnN0IHI9KHtkYXRhOnN9KT0+e2UubWVtb3J5LmNodW5rcy52aWV3LnNldChzKSxlLnJ1bihlLm1lbW9yeS5jaHVua3MuYWRkcmVzcyxlLm1lbW9yeS5jb3VudHMuYWRkcmVzcyxlLm1lbW9yeS52ZXJ0aWNlcy5hZGRyZXNzLGUubWVtb3J5LnZveGVscy5hZGRyZXNzLGUubWVtb3J5LmJvdW5kcy5hZGRyZXNzLGUuY2h1bmtTaXplKTtjb25zdFtyLHRdPWUubWVtb3J5LmNvdW50cy52aWV3O2lmKDA9PT1yKXJldHVybiB2b2lkIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6ITF9LFtzLmJ1ZmZlcl0pO2NvbnN0IG89ZS5tZW1vcnkuYm91bmRzLnZpZXcuc2xpY2UoMCksbT1lLm1lbW9yeS52ZXJ0aWNlcy52aWV3LnNsaWNlKDAsMypyKjkpLG49ZS5tZW1vcnkudm94ZWxzLnZpZXcuc2xpY2UoMCw2KnQpO3NlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6e2JvdW5kczpvLHZlcnRpY2VzOm0sdm94ZWxzOm59fSxbcy5idWZmZXIsby5idWZmZXIsbS5idWZmZXIsbi5idWZmZXJdKX19KCk7Cgo=",KR=null,jR=!1,Cfe?bfe(ZR,KR,jR):function(n,e,t){var i;return function(o){return i=i||xfe(n,e,t),new Worker(i,o)}}(ZR,KR,jR)),Efe=typeof self.queueMicrotask=="function"?self.queueMicrotask:n=>{Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))},cx=class extends Yt{chunks;queue;materials;mesher;history;storage;constructor({history:e=!1,materials:t={},storage:i=new JR}={}){super(),this.chunks=new Map,this.queue=new Map,this.materials={triangles:t.triangles||new Nt({vertexColors:!0}),voxels:t.voxels||new Nt({visible:!1})};let{chunkSize:o}=i;this.mesher=new tL({buffer:o*o*o*8,options:{chunkSize:o},program:wfe,script:Sfe}),this.history={enabled:e,last:-1,undo:[],redo:[]},this.storage=i}dispose(){let{chunks:e,mesher:t,queue:i}=this;e.forEach(o=>o.dispose()),t.dispose(),i.clear()}undo(){let{history:e}=this,t=e.undo.pop();t&&(e.last=-1,e.redo.push(t),this.update(t.map(({x:i,y:o,z:a,undo:l})=>({x:i,y:o,z:a,r:l>>8&255,g:l>>16&255,b:l>>24&255,value:255&l})),-1,!0))}redo(){let{history:e}=this,t=e.redo.pop();t&&(e.last=-1,e.undo.push(t),this.update(t.map(({x:i,y:o,z:a,redo:l})=>({x:i,y:o,z:a,r:l>>8&255,g:l>>16&255,b:l>>24&255,value:255&l})),-1,!0))}updateChunk(e,t,i){let{materials:o,mesher:a,storage:l}=this,{chunkSize:c}=l,u=`${e}:${t}:${i}`,h=this.chunks.get(u);h||(h=new eL({materials:o,position:new U(e*c+-.5*c,t*c+-.5*c,i*c+-.5*c)}),this.add(h),this.chunks.set(u,h));let A=[];for(let d=i-1;d<=i;d++)for(let p=t-1;p<=t;p++)for(let m=e-1;m<=e;m++)A.push(l.get(m,p,d));let f=++h.request;a.run(A).then(d=>{h&&h.version<f&&(h.update(d),h.version=f,this.dispatchEvent({type:"change"}))})}update(e,t=-1,i=!1){let{history:o,queue:a,storage:l}=this,{chunkSize:c}=l,u=.5*c,h=!!a.size,A=new Map,f=e.reduce((d,{x:p,y:m,z:b,value:g,r:w=0,g:I=0,b:v=0})=>{let C=Math.floor(p/c),E=Math.floor(m/c),S=Math.floor(b/c),M=p-C*c,_=m-E*c,T=b-S*c,D=T*c*c+_*c+M,R=l.get(C,E,S),B=R[D];if(g===void 0&&(g=255&B)===0)return d;let P=v<<24^I<<16^w<<8^g;R[D]=P;for(let z=0;z<2;z++)for(let Q=0;Q<2;Q++)for(let V=0;V<2;V++)if(M>=V*u-1&&M<=(V+1)*u&&_>=Q*u-1&&_<=(Q+1)*u&&T>=z*u-1&&T<=(z+1)*u){let G=C+V,O=E+Q,W=S+z,k=`${G}:${O}:${W}`;a.has(k)||a.set(k,{x:G,y:O,z:W})}let F=`${C}:${E}:${S}`;return A.has(F)||A.set(F,{x:C,y:E,z:S}),o.enabled&&!i&&d.push({x:p,y:m,z:b,undo:B,redo:P}),d},[]);if(o.enabled&&!i){let d=o.undo[o.undo.length-1];t!==-1&&o.last===t&&d.length<1e4?f.forEach(p=>{let m=d.find(({x:b,y:g,z:w})=>b===p.x&&g===p.y&&w===p.z);m?m.redo=p.redo:d.push(p)}):o.undo.push(f),o.last=t,o.redo.length=0}A.forEach(({x:d,y:p,z:m})=>l.save(d,p,m)),!h&&a.size&&Efe(()=>{a.forEach(({x:d,y:p,z:m})=>this.updateChunk(d,p,m)),a.clear()})}};var sL=class n extends He{static setupMaterial(){n.material=new Nt({vertexColors:!0})}constructor({chunkMaterial:e,chunkSize:t,geometry:i,position:o}){n.material||n.setupMaterial(),super(new Ke,e||n.material),this.geometry.boundingBox=new Ht,this.geometry.boundingSphere=new Vt,this.update(i),this.position.copy(o).multiplyScalar(t),this.updateMatrixWorld(),this.castShadow=!0,this.receiveShadow=!0,this.matrixAutoUpdate=!1}dispose(){let{geometry:e}=this;e.dispose()}update({bounds:e,vertices:t}){let{geometry:i}=this,o=new hr(t,9);i.setAttribute("position",new zn(o,3,0)),i.setAttribute("normal",new zn(o,3,3)),i.setAttribute("color",new zn(o,3,6)),i.boundingBox.min.set(e[0],e[1],e[2]),i.boundingBox.max.set(e[3],e[4],e[5]),i.boundingBox.getBoundingSphere(i.boundingSphere)}},ux=class{constructor({buffer:e,concurrency:t=navigator.hardwareConcurrency||1,options:i,program:o,script:a}){this.queue=[],o().then(l=>{this.instances=Array.from({length:t},()=>{let c=new a;e&&(c.buffer=new Uint8Array(e)),c.isBusy=!0,c.run=({operation:A,resolve:f})=>{if(c.isBusy=!0,c.resolve=f,e){let d=A[0].length;A.forEach((p,m)=>{c.buffer.set(p,d*m)}),c.postMessage(c.buffer,[c.buffer.buffer])}else c.postMessage(A)};let u=()=>{c.removeEventListener("message",u),c.addEventListener("message",h);let A=this.queue.shift();A?c.run(A):c.isBusy=!1},h=({data:A})=>{e&&(c.buffer=A.buffer,A=A.data);let{resolve:f}=c;delete c.resolve,f(A);let d=this.queue.shift();d?c.run(d):c.isBusy=!1};return c.addEventListener("message",u),c.postMessage({options:i,program:l}),c})})}dispose(){let{instances:e}=this;e.forEach(t=>t.terminate())}run(e){let{instances:t,queue:i}=this;return new Promise(o=>{if(!t)return void i.push({operation:e,resolve:o});let a;for(let l=0,c=t.length;l<c;l++)if(!t[l].isBusy){a=t[l];break}a?a.run({operation:e,resolve:o}):i.push({operation:e,resolve:o})})}};function j9(n,e,t,i){function o(p,m,b){var g=b?WebAssembly.instantiateStreaming:WebAssembly.instantiate,w=b?WebAssembly.compileStreaming:WebAssembly.compile;return m?g(p,m):w(p)}var a=null,l=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;if(e&&l){var c=null,u=null;return new Promise((p,m)=>{c.readFile(u.resolve(__dirname,e),(b,g)=>{b!=null&&m(b),p(o(g,i,!1))})})}if(e)return o(fetch(e),i,!0);if(l)a=Buffer.from(t,"base64");else{var h=globalThis.atob(t),A=h.length;a=new Uint8Array(new ArrayBuffer(A));for(var f=0;f<A;f++)a[f]=h.charCodeAt(f)}if(n){var d=new WebAssembly.Module(a);return i?new WebAssembly.Instance(d,i):d}return o(a,i,!1)}function Mfe(n){return j9(0,null,"AGFzbQEAAAABMwlgAABgAX8Bf2ABfAF8YAJ/fAF8YAF/AXxgAnx8AXxgAX4Bf2ADfH5+AXxgBH9/f38BfwIPAQNlbnYGbWVtb3J5AgACAxIRAAABAQEAAAIDBAQFBgcICAEEBQFwAQEBBggBfwFBwMUFCwcQAgNydW4ADwZtYWxsb2MAEAgBAAqhhwERDgBBwMEBQQBB9AP8CwALBAAAAAtOAAJAIAANAD8AQRB0DwsCQCAAQf//A3ENACAAQX9MDQACQCAAQRB2QAAiAEF/Rw0AQQBBMDYCwMGBgABBfw8LIABBEHQPCxCBgICAAAALCgAgABCEgICAAAuGNwELfyOAgICAAEEQayIBJICAgIAAAkBBACgC3MGBgAANAEEAEIKAgIAAQcDFhYAAayICQdkASQ0AQQAhAwJAQQAoApzFgYAAIgQNAEEAQn83AqjFgYAAQQBCgICEgICAwAA3AqDFgYAAQQAgAUEIakFwcUHYqtWqBXMiBDYCnMWBgABBAEEANgKwxYGAAEEAQQA2AoDFgYAAC0EAIAI2AojFgYAAQQBBwMWFgAA2AoTFgYAAQQBBwMWFgAA2AtTBgYAAQQAgBDYC6MGBgABBAEF/NgLkwYGAAANAIANBgMKBgABqIANB9MGBgABqIgQ2AgAgBCADQezBgYAAaiIFNgIAIANB+MGBgABqIAU2AgAgA0GIwoGAAGogA0H8wYGAAGoiBTYCACAFIAQ2AgAgA0GQwoGAAGogA0GEwoGAAGoiBDYCACAEIAU2AgAgA0GMwoGAAGogBDYCACADQSBqIgNBgAJHDQALQcDFhYAAQXhBwMWFgABrQQ9xQQBBwMWFgABBCGpBD3EbIgNqIgRBBGogAkFIaiIFIANrIgNBAXI2AgBBAEEAKAKsxYGAADYC4MGBgABBACADNgLQwYGAAEEAIAQ2AtzBgYAAQcDFhYAAIAVqQTg2AgQLAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFLDQACQEEAKALEwYGAACIGQRAgAEETakFwcSAAQQtJGyICQQN2IgR2IgNBA3FFDQAgA0EBcSAEckEBcyIFQQN0IgBB9MGBgABqKAIAIgRBCGohAwJAAkAgBCgCCCICIABB7MGBgABqIgBHDQBBACAGQX4gBXdxNgLEwYGAAAwBCyAAIAI2AgggAiAANgIMCyAEIAVBA3QiBUEDcjYCBCAEIAVqIgQgBCgCBEEBcjYCBAwMCyACQQAoAszBgYAAIgdNDQECQCADRQ0AAkACQCADIAR0QQIgBHQiA0EAIANrcnEiA0EAIANrcUF/aiIDIANBDHZBEHEiA3YiBEEFdkEIcSIFIANyIAQgBXYiA0ECdkEEcSIEciADIAR2IgNBAXZBAnEiBHIgAyAEdiIDQQF2QQFxIgRyIAMgBHZqIgVBA3QiAEH0wYGAAGooAgAiBCgCCCIDIABB7MGBgABqIgBHDQBBACAGQX4gBXdxIgY2AsTBgYAADAELIAAgAzYCCCADIAA2AgwLIARBCGohAyAEIAJBA3I2AgQgBCAFQQN0IgVqIAUgAmsiBTYCACAEIAJqIgAgBUEBcjYCBAJAIAdFDQAgB0EDdiIIQQN0QezBgYAAaiECQQAoAtjBgYAAIQQCQAJAIAZBASAIdCIIcQ0AQQAgBiAIcjYCxMGBgAAgAiEIDAELIAIoAgghCAsgCCAENgIMIAIgBDYCCCAEIAI2AgwgBCAINgIIC0EAIAA2AtjBgYAAQQAgBTYCzMGBgAAMDAtBACgCyMGBgAAiCUUNASAJQQAgCWtxQX9qIgMgA0EMdkEQcSIDdiIEQQV2QQhxIgUgA3IgBCAFdiIDQQJ2QQRxIgRyIAMgBHYiA0EBdkECcSIEciADIAR2IgNBAXZBAXEiBHIgAyAEdmpBAnRB9MOBgABqKAIAIgAoAgRBeHEgAmshBCAAIQUCQANAAkAgBSgCECIDDQAgBUEUaigCACIDRQ0CCyADKAIEQXhxIAJrIgUgBCAFIARJIgUbIQQgAyAAIAUbIQAgAyEFDAALCyAAKAIYIQoCQCAAKAIMIgggAEYNAEEAKALUwYGAACAAKAIIIgNLGiAIIAM2AgggAyAINgIMDAsLAkAgAEEUaiIFKAIAIgMNACAAKAIQIgNFDQMgAEEQaiEFCwNAIAUhCyADIghBFGoiBSgCACIDDQAgCEEQaiEFIAgoAhAiAw0ACyALQQA2AgAMCgtBfyECIABBv39LDQAgAEETaiIDQXBxIQJBACgCyMGBgAAiB0UNAEEAIQsCQCACQYACSQ0AQR8hCyACQf///wdLDQAgA0EIdiIDIANBgP4/akEQdkEIcSIDdCIEIARBgOAfakEQdkEEcSIEdCIFIAVBgIAPakEQdkECcSIFdEEPdiADIARyIAVyayIDQQF0IAIgA0EVanZBAXFyQRxqIQsLQQAgAmshBAJAAkACQAJAIAtBAnRB9MOBgABqKAIAIgUNAEEAIQNBACEIDAELQQAhAyACQQBBGSALQQF2ayALQR9GG3QhAEEAIQgDQAJAIAUoAgRBeHEgAmsiBiAETw0AIAYhBCAFIQggBg0AQQAhBCAFIQggBSEDDAMLIAMgBUEUaigCACIGIAYgBSAAQR12QQRxakEQaigCACIFRhsgAyAGGyEDIABBAXQhACAFDQALCwJAIAMgCHINAEEAIQhBAiALdCIDQQAgA2tyIAdxIgNFDQMgA0EAIANrcUF/aiIDIANBDHZBEHEiA3YiBUEFdkEIcSIAIANyIAUgAHYiA0ECdkEEcSIFciADIAV2IgNBAXZBAnEiBXIgAyAFdiIDQQF2QQFxIgVyIAMgBXZqQQJ0QfTDgYAAaigCACEDCyADRQ0BCwNAIAMoAgRBeHEgAmsiBiAESSEAAkAgAygCECIFDQAgA0EUaigCACEFCyAGIAQgABshBCADIAggABshCCAFIQMgBQ0ACwsgCEUNACAEQQAoAszBgYAAIAJrTw0AIAgoAhghCwJAIAgoAgwiACAIRg0AQQAoAtTBgYAAIAgoAggiA0saIAAgAzYCCCADIAA2AgwMCQsCQCAIQRRqIgUoAgAiAw0AIAgoAhAiA0UNAyAIQRBqIQULA0AgBSEGIAMiAEEUaiIFKAIAIgMNACAAQRBqIQUgACgCECIDDQALIAZBADYCAAwICwJAQQAoAszBgYAAIgMgAkkNAEEAKALYwYGAACEEAkACQCADIAJrIgVBEEkNACAEIAJqIgAgBUEBcjYCBEEAIAU2AszBgYAAQQAgADYC2MGBgAAgBCADaiAFNgIAIAQgAkEDcjYCBAwBCyAEIANBA3I2AgQgBCADaiIDIAMoAgRBAXI2AgRBAEEANgLYwYGAAEEAQQA2AszBgYAACyAEQQhqIQMMCgsCQEEAKALQwYGAACIAIAJNDQBBACgC3MGBgAAiAyACaiIEIAAgAmsiBUEBcjYCBEEAIAU2AtDBgYAAQQAgBDYC3MGBgAAgAyACQQNyNgIEIANBCGohAwwKCwJAAkBBACgCnMWBgABFDQBBACgCpMWBgAAhBAwBC0EAQn83AqjFgYAAQQBCgICEgICAwAA3AqDFgYAAQQAgAUEMakFwcUHYqtWqBXM2ApzFgYAAQQBBADYCsMWBgABBAEEANgKAxYGAAEGAgAQhBAtBACEDAkAgBCACQccAaiIHaiIGQQAgBGsiC3EiCCACSw0AQQBBMDYCwMGBgAAMCgsCQEEAKAL8xIGAACIDRQ0AAkBBACgC9MSBgAAiBCAIaiIFIARNDQAgBSADTQ0BC0EAIQNBAEEwNgLAwYGAAAwKC0EALQCAxYGAAEEEcQ0EAkACQAJAQQAoAtzBgYAAIgRFDQBBhMWBgAAhAwNAAkAgAygCACIFIARLDQAgBSADKAIEaiAESw0DCyADKAIIIgMNAAsLQQAQgoCAgAAiAEF/Rg0FIAghBgJAQQAoAqDFgYAAIgNBf2oiBCAAcUUNACAIIABrIAQgAGpBACADa3FqIQYLIAYgAk0NBSAGQf7///8HSw0FAkBBACgC/MSBgAAiA0UNAEEAKAL0xIGAACIEIAZqIgUgBE0NBiAFIANLDQYLIAYQgoCAgAAiAyAARw0BDAcLIAYgAGsgC3EiBkH+////B0sNBCAGEIKAgIAAIgAgAygCACADKAIEakYNAyAAIQMLAkAgA0F/Rg0AIAJByABqIAZNDQACQCAHIAZrQQAoAqTFgYAAIgRqQQAgBGtxIgRB/v///wdNDQAgAyEADAcLAkAgBBCCgICAAEF/Rg0AIAQgBmohBiADIQAMBwtBACAGaxCCgICAABoMBAsgAyEAIANBf0cNBQwDC0EAIQgMBwtBACEADAULIABBf0cNAgtBAEEAKAKAxYGAAEEEcjYCgMWBgAALIAhB/v///wdLDQEgCBCCgICAACEAQQAQgoCAgAAhAyAAQX9GDQEgA0F/Rg0BIAAgA08NASADIABrIgYgAkE4ak0NAQtBAEEAKAL0xIGAACAGaiIDNgL0xIGAAAJAIANBACgC+MSBgABNDQBBACADNgL4xIGAAAsCQAJAAkACQEEAKALcwYGAACIERQ0AQYTFgYAAIQMDQCAAIAMoAgAiBSADKAIEIghqRg0CIAMoAggiAw0ADAMLCwJAAkBBACgC1MGBgAAiA0UNACAAIANPDQELQQAgADYC1MGBgAALQQAhA0EAIAY2AojFgYAAQQAgADYChMWBgABBAEF/NgLkwYGAAEEAQQAoApzFgYAANgLowYGAAEEAQQA2ApDFgYAAA0AgA0GAwoGAAGogA0H0wYGAAGoiBDYCACAEIANB7MGBgABqIgU2AgAgA0H4wYGAAGogBTYCACADQYjCgYAAaiADQfzBgYAAaiIFNgIAIAUgBDYCACADQZDCgYAAaiADQYTCgYAAaiIENgIAIAQgBTYCACADQYzCgYAAaiAENgIAIANBIGoiA0GAAkcNAAsgAEF4IABrQQ9xQQAgAEEIakEPcRsiA2oiBCAGQUhqIgUgA2siA0EBcjYCBEEAQQAoAqzFgYAANgLgwYGAAEEAIAM2AtDBgYAAQQAgBDYC3MGBgAAgACAFakE4NgIEDAILIAMtAAxBCHENACAFIARLDQAgACAETQ0AIARBeCAEa0EPcUEAIARBCGpBD3EbIgVqIgBBACgC0MGBgAAgBmoiCyAFayIFQQFyNgIEIAMgCCAGajYCBEEAQQAoAqzFgYAANgLgwYGAAEEAIAU2AtDBgYAAQQAgADYC3MGBgAAgBCALakE4NgIEDAELAkAgAEEAKALUwYGAACIITw0AQQAgADYC1MGBgAAgACEICyAAIAZqIQVBhMWBgAAhAwJAAkACQAJAAkACQAJAA0AgAygCACAFRg0BIAMoAggiAw0ADAILCyADLQAMQQhxRQ0BC0GExYGAACEDA0ACQCADKAIAIgUgBEsNACAFIAMoAgRqIgUgBEsNAwsgAygCCCEDDAALCyADIAA2AgAgAyADKAIEIAZqNgIEIABBeCAAa0EPcUEAIABBCGpBD3EbaiILIAJBA3I2AgQgBUF4IAVrQQ9xQQAgBUEIakEPcRtqIgYgCyACaiICayEFAkAgBCAGRw0AQQAgAjYC3MGBgABBAEEAKALQwYGAACAFaiIDNgLQwYGAACACIANBAXI2AgQMAwsCQEEAKALYwYGAACAGRw0AQQAgAjYC2MGBgABBAEEAKALMwYGAACAFaiIDNgLMwYGAACACIANBAXI2AgQgAiADaiADNgIADAMLAkAgBigCBCIDQQNxQQFHDQAgA0F4cSEHAkACQCADQf8BSw0AIAYoAggiBCADQQN2IghBA3RB7MGBgABqIgBGGgJAIAYoAgwiAyAERw0AQQBBACgCxMGBgABBfiAId3E2AsTBgYAADAILIAMgAEYaIAMgBDYCCCAEIAM2AgwMAQsgBigCGCEJAkACQCAGKAIMIgAgBkYNACAIIAYoAggiA0saIAAgAzYCCCADIAA2AgwMAQsCQCAGQRRqIgMoAgAiBA0AIAZBEGoiAygCACIEDQBBACEADAELA0AgAyEIIAQiAEEUaiIDKAIAIgQNACAAQRBqIQMgACgCECIEDQALIAhBADYCAAsgCUUNAAJAAkAgBigCHCIEQQJ0QfTDgYAAaiIDKAIAIAZHDQAgAyAANgIAIAANAUEAQQAoAsjBgYAAQX4gBHdxNgLIwYGAAAwCCyAJQRBBFCAJKAIQIAZGG2ogADYCACAARQ0BCyAAIAk2AhgCQCAGKAIQIgNFDQAgACADNgIQIAMgADYCGAsgBigCFCIDRQ0AIABBFGogAzYCACADIAA2AhgLIAcgBWohBSAGIAdqIQYLIAYgBigCBEF+cTYCBCACIAVqIAU2AgAgAiAFQQFyNgIEAkAgBUH/AUsNACAFQQN2IgRBA3RB7MGBgABqIQMCQAJAQQAoAsTBgYAAIgVBASAEdCIEcQ0AQQAgBSAEcjYCxMGBgAAgAyEEDAELIAMoAgghBAsgBCACNgIMIAMgAjYCCCACIAM2AgwgAiAENgIIDAMLQR8hAwJAIAVB////B0sNACAFQQh2IgMgA0GA/j9qQRB2QQhxIgN0IgQgBEGA4B9qQRB2QQRxIgR0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAMgBHIgAHJrIgNBAXQgBSADQRVqdkEBcXJBHGohAwsgAiADNgIcIAJCADcCECADQQJ0QfTDgYAAaiEEAkBBACgCyMGBgAAiAEEBIAN0IghxDQAgBCACNgIAQQAgACAIcjYCyMGBgAAgAiAENgIYIAIgAjYCCCACIAI2AgwMAwsgBUEAQRkgA0EBdmsgA0EfRht0IQMgBCgCACEAA0AgACIEKAIEQXhxIAVGDQIgA0EddiEAIANBAXQhAyAEIABBBHFqQRBqIggoAgAiAA0ACyAIIAI2AgAgAiAENgIYIAIgAjYCDCACIAI2AggMAgsgAEF4IABrQQ9xQQAgAEEIakEPcRsiA2oiCyAGQUhqIgggA2siA0EBcjYCBCAAIAhqQTg2AgQgBCAFQTcgBWtBD3FBACAFQUlqQQ9xG2pBQWoiCCAIIARBEGpJGyIIQSM2AgRBAEEAKAKsxYGAADYC4MGBgABBACADNgLQwYGAAEEAIAs2AtzBgYAAIAhBEGpBACkCjMWBgAA3AgAgCEEAKQKExYGAADcCCEEAIAhBCGo2AozFgYAAQQAgBjYCiMWBgABBACAANgKExYGAAEEAQQA2ApDFgYAAIAhBJGohAwNAIANBBzYCACAFIANBBGoiA0sNAAsgCCAERg0DIAggCCgCBEF+cTYCBCAIIAggBGsiBjYCACAEIAZBAXI2AgQCQCAGQf8BSw0AIAZBA3YiBUEDdEHswYGAAGohAwJAAkBBACgCxMGBgAAiAEEBIAV0IgVxDQBBACAAIAVyNgLEwYGAACADIQUMAQsgAygCCCEFCyAFIAQ2AgwgAyAENgIIIAQgAzYCDCAEIAU2AggMBAtBHyEDAkAgBkH///8HSw0AIAZBCHYiAyADQYD+P2pBEHZBCHEiA3QiBSAFQYDgH2pBEHZBBHEiBXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgAyAFciAAcmsiA0EBdCAGIANBFWp2QQFxckEcaiEDCyAEQgA3AhAgBEEcaiADNgIAIANBAnRB9MOBgABqIQUCQEEAKALIwYGAACIAQQEgA3QiCHENACAFIAQ2AgBBACAAIAhyNgLIwYGAACAEQRhqIAU2AgAgBCAENgIIIAQgBDYCDAwECyAGQQBBGSADQQF2ayADQR9GG3QhAyAFKAIAIQADQCAAIgUoAgRBeHEgBkYNAyADQR12IQAgA0EBdCEDIAUgAEEEcWpBEGoiCCgCACIADQALIAggBDYCACAEQRhqIAU2AgAgBCAENgIMIAQgBDYCCAwDCyAEKAIIIgMgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAM2AggLIAtBCGohAwwFCyAFKAIIIgMgBDYCDCAFIAQ2AgggBEEYakEANgIAIAQgBTYCDCAEIAM2AggLQQAoAtDBgYAAIgMgAk0NAEEAKALcwYGAACIEIAJqIgUgAyACayIDQQFyNgIEQQAgAzYC0MGBgABBACAFNgLcwYGAACAEIAJBA3I2AgQgBEEIaiEDDAMLQQAhA0EAQTA2AsDBgYAADAILAkAgC0UNAAJAAkAgCCAIKAIcIgVBAnRB9MOBgABqIgMoAgBHDQAgAyAANgIAIAANAUEAIAdBfiAFd3EiBzYCyMGBgAAMAgsgC0EQQRQgCygCECAIRhtqIAA2AgAgAEUNAQsgACALNgIYAkAgCCgCECIDRQ0AIAAgAzYCECADIAA2AhgLIAhBFGooAgAiA0UNACAAQRRqIAM2AgAgAyAANgIYCwJAAkAgBEEPSw0AIAggBCACaiIDQQNyNgIEIAggA2oiAyADKAIEQQFyNgIEDAELIAggAmoiACAEQQFyNgIEIAggAkEDcjYCBCAAIARqIAQ2AgACQCAEQf8BSw0AIARBA3YiBEEDdEHswYGAAGohAwJAAkBBACgCxMGBgAAiBUEBIAR0IgRxDQBBACAFIARyNgLEwYGAACADIQQMAQsgAygCCCEECyAEIAA2AgwgAyAANgIIIAAgAzYCDCAAIAQ2AggMAQtBHyEDAkAgBEH///8HSw0AIARBCHYiAyADQYD+P2pBEHZBCHEiA3QiBSAFQYDgH2pBEHZBBHEiBXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgAyAFciACcmsiA0EBdCAEIANBFWp2QQFxckEcaiEDCyAAIAM2AhwgAEIANwIQIANBAnRB9MOBgABqIQUCQCAHQQEgA3QiAnENACAFIAA2AgBBACAHIAJyNgLIwYGAACAAIAU2AhggACAANgIIIAAgADYCDAwBCyAEQQBBGSADQQF2ayADQR9GG3QhAyAFKAIAIQICQANAIAIiBSgCBEF4cSAERg0BIANBHXYhAiADQQF0IQMgBSACQQRxakEQaiIGKAIAIgINAAsgBiAANgIAIAAgBTYCGCAAIAA2AgwgACAANgIIDAELIAUoAggiAyAANgIMIAUgADYCCCAAQQA2AhggACAFNgIMIAAgAzYCCAsgCEEIaiEDDAELAkAgCkUNAAJAAkAgACAAKAIcIgVBAnRB9MOBgABqIgMoAgBHDQAgAyAINgIAIAgNAUEAIAlBfiAFd3E2AsjBgYAADAILIApBEEEUIAooAhAgAEYbaiAINgIAIAhFDQELIAggCjYCGAJAIAAoAhAiA0UNACAIIAM2AhAgAyAINgIYCyAAQRRqKAIAIgNFDQAgCEEUaiADNgIAIAMgCDYCGAsCQAJAIARBD0sNACAAIAQgAmoiA0EDcjYCBCAAIANqIgMgAygCBEEBcjYCBAwBCyAAIAJqIgUgBEEBcjYCBCAAIAJBA3I2AgQgBSAEaiAENgIAAkAgB0UNACAHQQN2IghBA3RB7MGBgABqIQJBACgC2MGBgAAhAwJAAkBBASAIdCIIIAZxDQBBACAIIAZyNgLEwYGAACACIQgMAQsgAigCCCEICyAIIAM2AgwgAiADNgIIIAMgAjYCDCADIAg2AggLQQAgBTYC2MGBgABBACAENgLMwYGAAAsgAEEIaiEDCyABQRBqJICAgIAAIAMLAgALDgAQhYCAgAAQhYCAgAALDAAgACAAoSIAIACjCw0AIAGaIAEgABsgAaILEwAgAEQAAAAAAAAAcBCIgICAAAsTACAARAAAAAAAAAAQEIiAgIAAC6IJBgF+A38BfgJ/AX4JfCABvSICQjSIpyIDQf8PcSIEQcJ3aiEFAkACQAJAIAC9IgZCNIinIgdBgXBqQYJwSQ0AQQAhCCAFQf9+Sw0BCwJAIAJCAYYiCUJ/fEL/////////b1QNAEQAAAAAAADwPyEKIAZCgICAgICAgPg/UQ0CIAlQDQICQAJAIAZCAYYiBkKAgICAgICAcFYNACAJQoGAgICAgIBwVA0BCyAAIAGgDwsgBkKAgICAgICA8P8AUQ0CRAAAAAAAAAAAIAEgAaIgAkI/iKdBAXMgBkKAgICAgICA8P8AVEYbDwsCQCAGQgGGQn98Qv////////9vVA0AIAAgAKIhCgJAIAZCf1UNACAKmiAKIAIQjICAgABBAUYbIQoLIAJCf1UNAkQAAAAAAADwPyAKow8LQQAhCAJAIAZCf1UNAAJAIAIQjICAgAAiCA0AIAAQh4CAgAAPCyAHQf8PcSEHIAZC////////////AIMhBiAIQQFGQRJ0IQgLAkAgBUH/fksNAEQAAAAAAADwPyEKIARBvgdJDQIgBkKAgICAgICA+D9RDQICQCADQYAQSSAGQoGAgICAgID4P1RGDQBBABCJgICAAA8LQQAQioCAgAAPCyAHDQAgAEQAAAAAAAAwQ6K9Qv///////////wCDQoCAgICAgIDgfHwhBgsCQCACQoCAgECDvyILIAYgBkKAgICAsNXajEB8IgJCgICAgICAgHiDfSIGQoCAgIAIfEKAgICAcIO/IgogAkItiKdB/wBxQQV0IgVByIiAgABqKwMAIgyiRAAAAAAAAPC/oCIAIABBACsDkIiAgAAiDaIiDqIiDyACQjSHp7ciEEEAKwOAiICAAKIgBUHYiICAAGorAwCgIhEgACAMIAa/IAqhoiISoCIAoCIKoCIMIA8gCiAMoaAgEiAOIA0gAKIiDaCiIBBBACsDiIiAgACiIAVB4IiAgABqKwMAoCAAIBEgCqGgoKCgIAAgACANoiIKoiAKIAogAEEAKwPAiICAAKJBACsDuIiAgACgoiAAQQArA7CIgIAAokEAKwOoiICAAKCgoiAAQQArA6CIgIAAokEAKwOYiICAAKCgoqAiDqAiAL1CgICAQIO/IgqiIg29IgZCNIinQf8PcSIFQbd4akE/SQ0AAkAgBUHIB0sNAEQAAAAAAADwv0QAAAAAAADwPyAIGw8LIAVBiQhJIQdBACEFIAcNAAJAIAZCf1UNACAIEIqAgIAADwsgCBCJgICAAA8LIAEgC6EgCqIgDiAMIAChoCAAIAqhoCABoqAgDUEAKwPIqICAAKJBACsD0KiAgAAiAKAiCiAAoSIAQQArA+CogIAAoiAAQQArA9iogIAAoiANoKCgIgAgAKIiASABoiAAQQArA4CpgIAAokEAKwP4qICAAKCiIAEgAEEAKwPwqICAAKJBACsD6KiAgACgoiAKvSIGp0EEdEHwD3EiB0G4qYCAAGorAwAgAKCgoCEAIAdBwKmAgABqKQMAIAYgCK18Qi2GfCECAkAgBQ0AIAAgAiAGEI2AgIAADwsgAr8iASAAoiABoCEKCyAKC1UCAn8BfkEAIQECQCAAQjSIp0H/D3EiAkH/B0kNAEECIQEgAkGzCEsNAEEAIQFCAUGzCCACa62GIgNCf3wgAINCAFINAEECQQEgAyAAg1AbIQELIAELygEBBHwCQCACQoCAgIAIg0IAUg0AIAFCgICAgICAgPhAfL8iAyAAoiADoEQAAAAAAAAAf6IPCwJAIAFCgICAgICAgPA/fCIBvyIDIACiIgQgA6AiAJlEAAAAAAAA8D9jRQ0AIAFCgICAgICAgICAf4O/IABEAAAAAAAA8L9EAAAAAAAA8D8gAEQAAAAAAAAAAGMbIgWgIgYgBCADIAChoCAAIAUgBqGgoKAgBaEiACAARAAAAAAAAAAAYRshAAsgAEQAAAAAAAAQAKIL9UIMAX8BfQV/A30FfwF9AX8DfRt/AX0DfAt9I4CAgIAAQaACayIEJICAgIAAIAJCADcCDCACIAOzIgU4AgQgAiAFOAIIQQAhBiACQRRqQQA2AgAgAiAFOAIAAkAgA0UNACABQeAAaiEHQQAhCEEAIQlBACEGA0AgCEEBaiIKQf8BcbMiCyAIQf8BcbMiDJMhDSAKIANPQQJ0Ig4gA2wgCkEAIAMgCiADSRtrIg9qIANsIRAgCCADbCERQQAhEgNAIBJB/wFxsyITIBJBAWoiFEH/AXGzIhWTIRYgFSATkyEXQQAhGCAUIANPQQF0IhkgA2wgCGogA2wgFEEAIAMgFCADSRtrIhpqIANsIRsgGSAOciIcIANsIA9qIANsIBpqIANsIR0gECASaiADbCEeIBEgEmogA2whHwNAAkAgACAfIBgiAWpBAnRqIiAtAAAiIUEHdiIiQQJyICIgACAbIAFqQQJ0aiIjLAAAIiRBAEgbIiVBBHIgJSAAIBkgAUEBaiIYIANPIiZyIANsIAhqIANsIBpqIANsIBhBACADIBggA0kbIidrIiJqQQJ0aiIoLAAAIilBAEgbIipBCHIgKiAAICcgCGogA2wgEmogA2wgImpBAnRqIiUsAAAiK0EASBsiKkEQciAqIAAgHiABakECdGoiJywAACIsQQBIGyItQSByIC0gACAdIAFqQQJ0aiIqLAAAIi5BAEgbIi9BwAByIC8gACAcICZyIANsIA9qIANsIBpqIANsICJqQQJ0aiItLAAAIjBBAEgbIjFBgAFyIDEgACAOICZyIANsIA9qIANsIBJqIANsICJqQQJ0aiIvLAAAIjJBAEgbIiZFDQAgJkH/AUYNAAJAICZBAnRBwLmAgABqKAIAIiJBAXFFDQAgBCAMOAIIIAQgAUH/AXGzOAIAIARDAAAAQyAhsyIFkyAkQf8BcbMgBZOVIgUgF5QgE5I4AgQCQAJAICAtAAGzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLAkACQCAgLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNQwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE1CwJAAkAgIC0AA7MiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITYMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNgsgNLYhMwJAAkAgIy0AAbMiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNbYhNyAEIDS2IDOTIAWUIDOSOAIMAkACQCAjLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyA2tiEzIAQgNLYgN5MgBZQgN5I4AhACQAJAICMtAAOzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIAQgNLYgM5MgBZQgM5I4AhQLAkAgIkECcUUNACAEIAw4AiAgBCAVOAIcIARDAAAAQyAkQf8BcbMiBZMgKUH/AXGzIAWTlSIFIBhB/wFxsyABQf8BcbMiM5OUIDOSOAIYAkACQCAjLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgIy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAICMtAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAICgtAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgCJAJAAkAgKC0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAIoAkACQCAoLQADsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyAEIDS2IDOTIAWUIDOSOAIsCwJAICJBBHFFDQAgBCAMOAI4IAQgGEH/AXGzOAIwIARDAAAAQyApQf8BcbMiBZMgK0H/AXGzIAWTlSIFIBaUIBWSOAI0AkACQCAoLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgKC0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAICgtAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAICUtAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgCPAJAAkAgJS0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAJAAkACQCAlLQADsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyAEIDS2IDOTIAWUIDOSOAJECwJAICJBCHFFDQAgBCAMOAJQIAQgEzgCTCAEQwAAAEMgK0H/AXGzIgWTICGzIAWTlSIFIAFB/wFxsyAYQf8BcbMiM5OUIDOSOAJIAkACQCAlLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgJS0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAICUtAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAICAtAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgCVAJAAkAgIC0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAJYAkACQCAgLQADsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyAEIDS2IDOTIAWUIDOSOAJcCwJAICJBEHFFDQAgBCALOAJoIAQgAUH/AXGzOAJgIARDAAAAQyAsQf8BcbMiBZMgLkH/AXGzIAWTlSIFIBeUIBOSOAJkAkACQCAnLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgJy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAICctAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAICotAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgCbAJAAkAgKi0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAJwAkACQCAqLQADsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyAEIDS2IDOTIAWUIDOSOAJ0CwJAICJBIHFFDQAgBCALOAKAASAEIBU4AnwgBEMAAABDIC5B/wFxsyIFkyAwQf8BcbMgBZOVIgUgGEH/AXGzIAFB/wFxsyIzk5QgM5I4AngCQAJAICotAAGzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLAkACQCAqLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNQwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE1CwJAAkAgKi0AA7MiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITYMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNgsgNLYhMwJAAkAgLS0AAbMiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNbYhNyAEIDS2IDOTIAWUIDOSOAKEAQJAAkAgLS0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAKIAQJAAkAgLS0AA7MiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgBCA0tiAzkyAFlCAzkjgCjAELAkAgJkHAfmpBgH9JDQAgBCALOAKYASAEIBhB/wFxszgCkAEgBEMAAABDIDBB/wFxsyIFkyAyQf8BcbMgBZOVIgUgFpQgFZI4ApQBAkACQCAtLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgLS0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAIC0tAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAIC8tAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgCnAECQAJAIC8tAAKzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDa2ITMgBCA0tiA3kyAFlCA3kjgCoAECQAJAIC8tAAOzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIAQgNLYgM5MgBZQgM5I4AqQBCwJAICJBgAFxRQ0AIAQgCzgCsAEgBCATOAKsASAEQwAAAEMgMkH/AXGzIgWTICxB/wFxsyAFk5UiBSABQf8BcbMgGEH/AXGzIjOTlCAzkjgCqAECQAJAIC8tAAGzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLAkACQCAvLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNQwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE1CwJAAkAgLy0AA7MiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITYMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNgsgNLYhMwJAAkAgJy0AAbMiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNbYhNyAEIDS2IDOTIAWUIDOSOAK0AQJAAkAgJy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAK4AQJAAkAgJy0AA7MiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgBCA0tiAzkyAFlCAzkjgCvAELAkAgIkGAAnFFDQAgBCATOALEASAEIAFB/wFxszgCwAEgBEMAAABDICGzIgWTICxB/wFxsyAFk5UiBSANlCAMkjgCyAECQAJAICAtAAGzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLAkACQCAgLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNQwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE1CwJAAkAgIC0AA7MiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITYMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNgsgNLYhMwJAAkAgJy0AAbMiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNbYhNyAEIDS2IDOTIAWUIDOSOALMAQJAAkAgJy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOALQAQJAAkAgJy0AA7MiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgBCA0tiAzkyAFlCAzkjgC1AELAkAgIkGABHFFDQAgBCAVOALcASAEIAFB/wFxszgC2AEgBEMAAABDICRB/wFxsyIFkyAuQf8BcbMgBZOVIgUgDZQgDJI4AuABAkACQCAjLQABsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CwJAAkAgIy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITUMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNQsCQAJAICMtAAOzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE2DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITYLIDS2ITMCQAJAICotAAGzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDW2ITcgBCA0tiAzkyAFlCAzkjgC5AECQAJAICotAAKzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIDa2ITMgBCA0tiA3kyAFlCA3kjgC6AECQAJAICotAAOzIjdDgYCAO5RD5q4lPWANACA3Q7QinzmUuyE0DAELIDdDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLIAQgNLYgM5MgBZQgM5I4AuwBCwJAICJBgAhxRQ0AIAQgFTgC9AEgBCAYQf8BcbM4AvABIARDAAAAQyApQf8BcbMiBZMgMEH/AXGzIAWTlSIFIA2UIAySOAL4AQJAAkAgKC0AAbMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsCQAJAICgtAAKzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE1DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITULAkACQCAoLQADsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNgwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE2CyA0tiEzAkACQCAtLQABsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyA1tiE3IAQgNLYgM5MgBZQgM5I4AvwBAkACQCAtLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNAwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyA2tiEzIAQgNLYgN5MgBZQgN5I4AoACAkACQCAtLQADsyI3Q4GAgDuUQ+auJT1gDQAgN0O0Ip85lLshNAwBCyA3QwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE0CyAEIDS2IDOTIAWUIDOSOAKEAgsCQCAiQYAQcUUNACAEIBM4AowCIAQgGEH/AXGzOAKIAiAEQwAAAEMgK0H/AXGzIgWTIDJB/wFxsyAFk5UiBSANlCAMkjgCkAICQAJAICUtAAGzIjNDgYCAO5RD5q4lPWANACAzQ7QinzmUuyE0DAELIDNDCptzO5RDGYlVPZK7RAAAAEAzMwNAEIuAgIAAITQLAkACQCAlLQACsyIzQ4GAgDuUQ+auJT1gDQAgM0O0Ip85lLshNQwBCyAzQwqbczuUQxmJVT2Su0QAAABAMzMDQBCLgICAACE1CwJAAkAgJS0AA7MiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITYMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNgsgNLYhMwJAAkAgLy0AAbMiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNbYhNyAEIDS2IDOTIAWUIDOSOAKUAgJAAkAgLy0AArMiM0OBgIA7lEPmriU9YA0AIDNDtCKfOZS7ITQMAQsgM0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgNrYhMyAEIDS2IDeTIAWUIDeSOAKYAgJAAkAgLy0AA7MiN0OBgIA7lEPmriU9YA0AIDdDtCKfOZS7ITQMAQsgN0MKm3M7lEMZiVU9krtEAAAAQDMzA0AQi4CAgAAhNAsgBCA0tiAzkyAFlCAzkjgCnAILICZBBnQiIkHMwYCAAGohIyAHIAlBJGxqIQEgIkHAwYCAAGooAgAhIgNAIAIqAhQhOCACKgIQITkgAioCDCE6IAIqAgghOyACKgIEITwCQCACKgIAIj0gBCAiQRhsaiIiKgIAIj5eRQ0AIAIgPjgCACA+IT0LAkAgPCAiKgIEIj9fDQAgAiA/OAIEID8hPAsCQCA7ICIqAggiQF8NACACIEA4AgggQCE7CwJAIDogPmANACACID44AgwgPiE6CwJAIDkgP2ANACACID84AhAgPyE5CwJAIDggQGANACACIEA4AhQgQCE4CwJAID0gBCAjQXhqKAIAQRhsaiImKgIAIgVfDQAgAiAFOAIAIAUhPQsCQCA8ICYqAgQiM18NACACIDM4AgQgMyE8CwJAIDsgJioCCCI3Xw0AIAIgNzgCCCA3ITsLAkAgOiAFYA0AIAIgBTgCDCAFIToLAkAgOSAzYA0AIAIgMzgCECAzITkLAkAgOCA3YA0AIAIgNzgCFCA3ITgLAkAgPSAEICNBfGooAgBBGGxqIiAqAgAiQV8NACACIEE4AgALAkAgPCAgKgIEIj1fDQAgAiA9OAIECwJAIDsgICoCCCI8Xw0AIAIgPDgCCAsCQCA6IEFgDQAgAiBBOAIMCwJAIDkgPWANACACID04AhALAkAgOCA8YA0AIAIgPDgCFAsgAUGgf2oiKCAiKQIANwIAIAFBtH9qIEEgBZMiOCA/IDOTIjmUID0gM5MiOiA+IAWTIjOUkyIFOAIAIAFBsH9qIDwgN5MiOyAzlCA4IEAgN5MiN5STIjM4AgAgAUGsf2ogOiA3lCA7IDmUkyI3OAIAIAFBuH9qIiUgIikCDDcCACABQURqIicgJikCADcCACABQVhqIAU4AgAgAUFUaiAzOAIAIAFBUGogNzgCACAoQQhqICJBCGooAgA2AgAgJUEIaiAiQRRqKAIANgIAICdBCGogJkEIaigCADYCACABQXRqIDc4AgAgAUF4aiAzOAIAIAFBfGogBTgCACABQQhqICBBFGooAgA2AgAgASAgKQIMNwIAIAFBXGoiIkEIaiAmQRRqKAIANgIAICIgJikCDDcCACABQWhqIiIgICkCADcCACAiQQhqICBBCGooAgA2AgAgAUHsAGohASAGQQFqIQYgCUEDaiEJICMoAgAhIiAjQQxqISMgIkF/Rw0ACwsgGCADRw0ACyAUIRIgFCADRw0ACyAKIQggCiADRw0ACwsgBEGgAmokgICAgAAgBgsOACAAIAEgAiADEA4QBgsIACAAEAMQBgsLybkBAQBBgAgLwLkBADj6/kIu5j8wZ8eTV/MuPQAAAAAAAOC/YFVVVVVV5b8GAAAAAADgP05VWZmZmek/eqQpVVVV5b/pRUibW0nyv8M/JosrAPA/AAAAAACg9j8AAAAAAAAAAADIufKCLNa/gFY3KCS0+jwAAAAAAID2PwAAAAAAAAAAAAhYv73R1b8g9+DYCKUcvQAAAAAAYPY/AAAAAAAAAAAAWEUXd3bVv21QttWkYiO9AAAAAABA9j8AAAAAAAAAAAD4LYetGtW/1WewnuSE5rwAAAAAACD2PwAAAAAAAAAAAHh3lV++1L/gPimTaRsEvQAAAAAAAPY/AAAAAAAAAAAAYBzCi2HUv8yETEgv2BM9AAAAAADg9T8AAAAAAAAAAACohoYwBNS/OguC7fNC3DwAAAAAAMD1PwAAAAAAAAAAAEhpVUym079glFGGxrEgPQAAAAAAoPU/AAAAAAAAAAAAgJia3UfTv5KAxdRNWSU9AAAAAACA9T8AAAAAAAAAAAAg4bri6NK/2Cu3mR57Jj0AAAAAAGD1PwAAAAAAAAAAAIjeE1qJ0r8/sM+2FMoVPQAAAAAAYPU/AAAAAAAAAAAAiN4TWonSvz+wz7YUyhU9AAAAAABA9T8AAAAAAAAAAAB4z/tBKdK/dtpTKCRaFr0AAAAAACD1PwAAAAAAAAAAAJhpwZjI0b8EVOdovK8fvQAAAAAAAPU/AAAAAAAAAAAAqKurXGfRv/CogjPGHx89AAAAAADg9D8AAAAAAAAAAABIrvmLBdG/ZloF/cSoJr0AAAAAAMD0PwAAAAAAAAAAAJBz4iSj0L8OA/R+7msMvQAAAAAAoPQ/AAAAAAAAAAAA0LSUJUDQv38t9J64NvC8AAAAAACg9D8AAAAAAAAAAADQtJQlQNC/fy30nrg28LwAAAAAAID0PwAAAAAAAAAAAEBebRi5z7+HPJmrKlcNPQAAAAAAYPQ/AAAAAAAAAAAAYNzLrfDOvySvhpy3Jis9AAAAAABA9D8AAAAAAAAAAADwKm4HJ86/EP8/VE8vF70AAAAAACD0PwAAAAAAAAAAAMBPayFczb8baMq7kbohPQAAAAAAAPQ/AAAAAAAAAAAAoJrH94/MvzSEn2hPeSc9AAAAAAAA9D8AAAAAAAAAAACgmsf3j8y/NISfaE95Jz0AAAAAAODzPwAAAAAAAAAAAJAtdIbCy7+Pt4sxsE4ZPQAAAAAAwPM/AAAAAAAAAAAAwIBOyfPKv2aQzT9jTro8AAAAAACg8z8AAAAAAAAAAACw4h+8I8q/6sFG3GSMJb0AAAAAAKDzPwAAAAAAAAAAALDiH7wjyr/qwUbcZIwlvQAAAAAAgPM/AAAAAAAAAAAAUPScWlLJv+PUwQTZ0Sq9AAAAAABg8z8AAAAAAAAAAADQIGWgf8i/Cfrbf7+9Kz0AAAAAAEDzPwAAAAAAAAAAAOAQAomrx79YSlNykNsrPQAAAAAAQPM/AAAAAAAAAAAA4BACiavHv1hKU3KQ2ys9AAAAAAAg8z8AAAAAAAAAAADQGecP1sa/ZuKyo2rkEL0AAAAAAADzPwAAAAAAAAAAAJCncDD/xb85UBCfQ54evQAAAAAAAPM/AAAAAAAAAAAAkKdwMP/FvzlQEJ9Dnh69AAAAAADg8j8AAAAAAAAAAACwoePlJsW/j1sHkIveIL0AAAAAAMDyPwAAAAAAAAAAAIDLbCtNxL88eDVhwQwXPQAAAAAAwPI/AAAAAAAAAAAAgMtsK03Evzx4NWHBDBc9AAAAAACg8j8AAAAAAAAAAACQHiD8ccO/OlQnTYZ48TwAAAAAAIDyPwAAAAAAAAAAAPAf+FKVwr8IxHEXMI0kvQAAAAAAYPI/AAAAAAAAAAAAYC/VKrfBv5ajERikgC69AAAAAABg8j8AAAAAAAAAAABgL9Uqt8G/lqMRGKSALr0AAAAAAEDyPwAAAAAAAAAAAJDQfH7XwL/0W+iIlmkKPQAAAAAAQPI/AAAAAAAAAAAAkNB8ftfAv/Rb6IiWaQo9AAAAAAAg8j8AAAAAAAAAAADg2zGR7L+/8jOjXFR1Jb0AAAAAAADyPwAAAAAAAAAAAAArbgcnvr88APAqLDQqPQAAAAAAAPI/AAAAAAAAAAAAACtuBye+vzwA8CosNCo9AAAAAADg8T8AAAAAAAAAAADAW49UXry/Br5fWFcMHb0AAAAAAMDxPwAAAAAAAAAAAOBKOm2Sur/IqlvoNTklPQAAAAAAwPE/AAAAAAAAAAAA4Eo6bZK6v8iqW+g1OSU9AAAAAACg8T8AAAAAAAAAAACgMdZFw7i/aFYvTSl8Ez0AAAAAAKDxPwAAAAAAAAAAAKAx1kXDuL9oVi9NKXwTPQAAAAAAgPE/AAAAAAAAAAAAYOWK0vC2v9pzM8k3lya9AAAAAABg8T8AAAAAAAAAAAAgBj8HG7W/V17GYVsCHz0AAAAAAGDxPwAAAAAAAAAAACAGPwcbtb9XXsZhWwIfPQAAAAAAQPE/AAAAAAAAAAAA4BuW10Gzv98T+czaXiw9AAAAAABA8T8AAAAAAAAAAADgG5bXQbO/3xP5zNpeLD0AAAAAACDxPwAAAAAAAAAAAICj7jZlsb8Jo492XnwUPQAAAAAAAPE/AAAAAAAAAAAAgBHAMAqvv5GONoOeWS09AAAAAAAA8T8AAAAAAAAAAACAEcAwCq+/kY42g55ZLT0AAAAAAODwPwAAAAAAAAAAAIAZcd1Cq79McNbleoIcPQAAAAAA4PA/AAAAAAAAAAAAgBlx3UKrv0xw1uV6ghw9AAAAAADA8D8AAAAAAAAAAADAMvZYdKe/7qHyNEb8LL0AAAAAAMDwPwAAAAAAAAAAAMAy9lh0p7/uofI0RvwsvQAAAAAAoPA/AAAAAAAAAAAAwP65h56jv6r+JvW3AvU8AAAAAACg8D8AAAAAAAAAAADA/rmHnqO/qv4m9bcC9TwAAAAAAIDwPwAAAAAAAAAAAAB4DpuCn7/kCX58JoApvQAAAAAAgPA/AAAAAAAAAAAAAHgOm4Kfv+QJfnwmgCm9AAAAAABg8D8AAAAAAAAAAACA1QcbuZe/Oab6k1SNKL0AAAAAAEDwPwAAAAAAAAAAAAD8sKjAj7+cptP2fB7fvAAAAAAAQPA/AAAAAAAAAAAAAPywqMCPv5ym0/Z8Ht+8AAAAAAAg8D8AAAAAAAAAAAAAEGsq4H+/5EDaDT/iGb0AAAAAACDwPwAAAAAAAAAAAAAQayrgf7/kQNoNP+IZvQAAAAAAAPA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDvPwAAAAAAAAAAAACJdRUQgD/oK52Za8cQvQAAAAAAgO8/AAAAAAAAAAAAgJNYViCQP9L34gZb3CO9AAAAAABA7z8AAAAAAAAAAAAAySglSZg/NAxaMrqgKr0AAAAAAADvPwAAAAAAAAAAAEDniV1BoD9T1/FcwBEBPQAAAAAAwO4/AAAAAAAAAAAAAC7UrmakPyj9vXVzFiy9AAAAAACA7j8AAAAAAAAAAADAnxSqlKg/fSZa0JV5Gb0AAAAAAEDuPwAAAAAAAAAAAMDdzXPLrD8HKNhH8mgavQAAAAAAIO4/AAAAAAAAAAAAwAbAMequP3s7yU8+EQ69AAAAAADg7T8AAAAAAAAAAABgRtE7l7E/m54NVl0yJb0AAAAAAKDtPwAAAAAAAAAAAODRp/W9sz/XTtulXsgsPQAAAAAAYO0/AAAAAAAAAAAAoJdNWum1Px4dXTwGaSy9AAAAAABA7T8AAAAAAAAAAADA6grTALc/Mu2dqY0e7DwAAAAAAADtPwAAAAAAAAAAAEBZXV4zuT/aR706XBEjPQAAAAAAwOw/AAAAAAAAAAAAYK2NyGq7P+Vo9yuAkBO9AAAAAACg7D8AAAAAAAAAAABAvAFYiLw/06xaxtFGJj0AAAAAAGDsPwAAAAAAAAAAACAKgznHvj/gReavaMAtvQAAAAAAQOw/AAAAAAAAAAAA4Ns5kei/P/0KoU/WNCW9AAAAAAAA7D8AAAAAAAAAAADgJ4KOF8E/8gctznjvIT0AAAAAAODrPwAAAAAAAAAAAPAjfiuqwT80mThEjqcsPQAAAAAAoOs/AAAAAAAAAAAAgIYMYdHCP6G0gctsnQM9AAAAAACA6z8AAAAAAAAAAACQFbD8ZcM/iXJLI6gvxjwAAAAAAEDrPwAAAAAAAAAAALAzgz2RxD94tv1UeYMlPQAAAAAAIOs/AAAAAAAAAAAAsKHk5SfFP8d9aeXoMyY9AAAAAADg6j8AAAAAAAAAAAAQjL5OV8Y/eC48LIvPGT0AAAAAAMDqPwAAAAAAAAAAAHB1ixLwxj/hIZzljRElvQAAAAAAoOo/AAAAAAAAAAAAUESFjYnHPwVDkXAQZhy9AAAAAABg6j8AAAAAAAAAAAAAOeuvvsg/0SzpqlQ9B70AAAAAAEDqPwAAAAAAAAAAAAD33FpayT9v/6BYKPIHPQAAAAAAAOo/AAAAAAAAAAAA4Io87ZPKP2khVlBDcii9AAAAAADg6T8AAAAAAAAAAADQW1fYMcs/quGsTo01DL0AAAAAAMDpPwAAAAAAAAAAAOA7OIfQyz+2ElRZxEstvQAAAAAAoOk/AAAAAAAAAAAAEPDG+2/MP9IrlsVy7PG8AAAAAABg6T8AAAAAAAAAAACQ1LA9sc0/NbAV9yr/Kr0AAAAAAEDpPwAAAAAAAAAAABDn/w5Tzj8w9EFgJxLCPAAAAAAAIOk/AAAAAAAAAAAAAN3krfXOPxGOu2UVIcq8AAAAAAAA6T8AAAAAAAAAAACws2wcmc8/MN8MyuzLGz0AAAAAAMDoPwAAAAAAAAAAAFhNYDhx0D+RTu0W25z4PAAAAAAAoOg/AAAAAAAAAAAAYGFnLcTQP+nqPBaLGCc9AAAAAACA6D8AAAAAAAAAAADoJ4KOF9E/HPClYw4hLL0AAAAAAGDoPwAAAAAAAAAAAPisy1xr0T+BFqX3zZorPQAAAAAAQOg/AAAAAAAAAAAAaFpjmb/RP7e9R1Htpiw9AAAAAAAg6D8AAAAAAAAAAAC4Dm1FFNI/6rpGut6HCj0AAAAAAODnPwAAAAAAAAAAAJDcfPC+0j/0BFBK+pwqPQAAAAAAwOc/AAAAAAAAAAAAYNPh8RTTP7g8IdN64ii9AAAAAACg5z8AAAAAAAAAAAAQvnZna9M/yHfxsM1uET0AAAAAAIDnPwAAAAAAAAAAADAzd1LC0z9cvQa2VDsYPQAAAAAAYOc/AAAAAAAAAAAA6NUjtBnUP53gkOw25Ag9AAAAAABA5z8AAAAAAAAAAADIccKNcdQ/ddZnCc4nL70AAAAAACDnPwAAAAAAAAAAADAXnuDJ1D+k2AobiSAuvQAAAAAAAOc/AAAAAAAAAAAAoDgHriLVP1nHZIFwvi49AAAAAADg5j8AAAAAAAAAAADQyFP3e9U/70Bd7u2tHz0AAAAAAMDmPwAAAAAAAAAAAGBZ373V1T/cZaQIKgsKvf6CK2VHFWdAAAAAAAAAOEMAAPr+Qi52vzo7nrya9wy9vf3/////3z88VFVVVVXFP5ErF89VVaU/F9CkZxERgT8AAAAAAADIQu85+v5CLuY/JMSC/72/zj+19AzXCGusP8xQRtKrsoM/hDpOm+DXVT8AAAAAAAAAAAAAAAAAAPA/br+IGk87mzw1M/upPfbvP13c2JwTYHG8YYB3Pprs7z/RZocQel6QvIV/bugV4+8/E/ZnNVLSjDx0hRXTsNnvP/qO+SOAzou83vbdKWvQ7z9hyOZhTvdgPMibdRhFx+8/mdMzW+SjkDyD88bKPr7vP217g12mmpc8D4n5bFi17z/87/2SGrWOPPdHciuSrO8/0ZwvcD2+Pjyi0dMy7KPvPwtukIk0A2q8G9P+r2ab7z8OvS8qUlaVvFFbEtABk+8/VepOjO+AULzMMWzAvYrvPxb01bkjyZG84C2prpqC7z+vVVzp49OAPFGOpciYeu8/SJOl6hUbgLx7UX08uHLvPz0y3lXwH4+86o2MOPlq7z+/UxM/jImLPHXLb+tbY+8/JusRdpzZlrzUXASE4FvvP2AvOj737Jo8qrloMYdU7z+dOIbLguePvB3Z/CJQTe8/jcOmREFvijzWjGKIO0bvP30E5LAFeoA8ltx9kUk/7z+UqKjj/Y6WPDhidW56OO8/fUh08hhehzw/prJPzjHvP/LnH5grR4A83XziZUUr7z9eCHE/e7iWvIFj9eHfJO8/MasJbeH3gjzh3h/1nR7vP/q/bxqbIT28kNna0H8Y7z+0CgxygjeLPAsD5KaFEu8/j8vOiZIUbjxWLz6prwzvP7arsE11TYM8FbcxCv4G7z9MdKziAUKGPDHYTPxwAe8/SvjTXTndjzz/FmSyCPzuPwRbjjuAo4a88Z+SX8X27j9oUEvM7UqSvMupOjen8e4/ji1RG/gHmbxm2AVtruzuP9I2lD7o0XG895/lNNvn7j8VG86zGRmZvOWoE8Mt4+4/bUwqp0ifhTwiNBJMpt7uP4ppKHpgEpO8HICsBEXa7j9biRdIj6dYvCou9yEK1u4/G5pJZ5ssfLyXqFDZ9dHuPxGswmDtY0M8LYlhYAjO7j/vZAY7CWaWPFcAHe1Byu4/eQOh2uHMbjzQPMG1osbuPzASDz+O/5M83tPX8CrD7j+wr3q7zpB2PCcqNtXav+4/d+BU670dkzwN3f2ZsrzuP46jcQA0lI+8pyyddrK57j9Jo5PczN6HvEJmz6Latu4/XzgPvcbeeLyCT51WK7TuP/Zce+xGEoa8D5JdyqSx7j+O1/0YBTWTPNontTZHr+4/BZuKL7eYezz9x5fUEq3uPwlUHOLhY5A8KVRI3Qer7j/qxhlQhcc0PLdGWYomqe4/NcBkK+YylDxIIa0Vb6fuP592mWFK5Iy8Cdx2ueGl7j+oTe87xTOMvIVVOrB+pO4/rukriXhThLwgw8w0RqPuP1hYVnjdzpO8JSJVgjii7j9kGX6AqhBXPHOpTNRVoe4/KCJev++zk7zNO39mnqDuP4K5NIetEmq8v9oLdRKg7j/uqW2472djvC8aZTyyn+4/UYjgVD3cgLyElFH5fZ/uP88+Wn5kH3i8dF/s6HWf7j+wfYvASu6GvHSBpUian+4/iuZVHjIZhrzJZ0JW65/uP9PUCV7LnJA8P13eT2mg7j8dpU253DJ7vIcB63MUoe4/a8BnVP3slDwywTAB7aHuP1Vs1qvh62U8Yk7PNvOi7j9Cz7MvxaGIvBIaPlQnpO4/NDc78bZpk7wTzkyZiaXuPx7/GTqEXoC8rccjRhqn7j9uV3LYUNSUvO2SRJvZqO4/AIoOW2etkDyZZorZx6ruP7Tq8MEvt40826AqQuWs7j//58WcYLZlvIxEtRYyr+4/RF/zWYP2ezw2dxWZrrHuP4M9HqcfCZO8xv+RC1u07j8pHmyLuKldvOXFzbA3t+4/WbmQfPkjbLwPUsjLRLruP6r59CJDQ5K8UE7en4K97j9LjmbXbMqFvLoHynDxwO4/J86RK/yvcTyQ8KOCkcTuP7tzCuE10m08IyPjGWPI7j9jImIiBMWHvGXlXXtmzO4/1THi44YcizwzLUrsm9DuPxW7vNPRu5G8XSU+sgPV7j/SMe6cMcyQPFizMBOe2e4/s1pzboRphDy//XlVa97uP7SdjpfN34K8evPTv2vj7j+HM8uSdxqMPK3TWpmf6O4/+tnRSo97kLxmto0pB+7uP7qu3FbZw1W8+xVPuKLz7j9A9qY9DqSQvDpZ5Y1y+e4/NJOtOPTWaLxHXvvydv/uPzWKWGvi7pG8SgahMLAF7z/N3V8K1/90PNLBS5AeDO8/rJiS+vu9kbwJHtdbwhLvP7MMrzCubnM8nFKF3ZsZ7z+U/Z9cMuOOPHrQ/1+rIO8/rFkJ0Y/ghDxL0Vcu8SfvP2caTjivzWM8tecGlG0v7z9oGZJsLGtnPGmQ79wgN+8/0rXMgxiKgLz6w11VCz/vP2/6/z9drY+8fIkHSi1H7z9JqXU4rg2QvPKJDQiHT+8/pwc9poWjdDyHpPvcGFjvPw8iQCCekYK8mIPJFuNg7z+sksHVUFqOPIUy2wPmae8/S2sBrFk6hDxgtAHzIXPvPx8+tAch1YK8X5t7M5d87z/JDUc7uSqJvCmh9RRGhu8/04g6YAS2dDz2P4vnLpDvP3FynVHsxYM8g0zH+1Ga7z/wkdOPEvePvNqQpKKvpO8/fXQj4piujbzxZ44tSK/vPwggqkG8w448J1ph7hu67z8y66nDlCuEPJe6azcrxe8/7oXRMalkijxARW5bdtDvP+3jO+S6N468FL6crf3b7z+dzZFNO4l3PNiQnoHB5+8/icxgQcEFUzzxcY8rwvPvPwAAAAAAAAAAAAAAAAkBAAADAgAACgMAAAYEAAAPBQAABQYAAAwHAAAMCAAABQkAAA8KAAAGCwAACgwAAAMNAAAJDgAAAA8AAJABAACZAAAAkwMAAJoCAACWBQAAnwQAAJUHAACcBgAAnAkAAJUIAACfCwAAlgoAAJoNAACTDAAAmQ8AAJAOAAAwAgAAOQMAADMAAAA6AQAANgYAAD8HAAA1BAAAPAUAADwKAAA1CwAAPwgAADYJAAA6DgAAMw8AADkMAAAwDQAAoAMAAKkCAACjAQAAqgAAAKYHAACvBgAApQUAAKwEAACsCwAApQoAAK8JAACmCAAAqg8AAKMOAACpDQAAoAwAAGAEAABpBQAAYwYAAGoHAABmAAAAbwEAAGUCAABsAwAAbAwAAGUNAABvDgAAZg8AAGoIAABjCQAAaQoAAGALAADwBQAA+QQAAPMHAAD6BgAA9gEAAP8AAAD1AwAA/AIAAPwNAAD1DAAA/w8AAPYOAAD6CQAA8wgAAPkLAADwCgAAUAYAAFkHAABTBAAAWgUAAFYCAABfAwAAVQAAAFwBAABcDgAAVQ8AAF8MAABWDQAAWgoAAFMLAABZCAAAUAkAAMAHAADJBgAAwwUAAMoEAADGAwAAzwIAAMUBAADMAAAAzA8AAMUOAADPDQAAxgwAAMoLAADDCgAAyQkAAMAIAADACAAAyQkAAMMKAADKCwAAxgwAAM8NAADFDgAAzA8AAMwAAADFAQAAzwIAAMYDAADKBAAAwwUAAMkGAADABwAAUAkAAFkIAABTCwAAWgoAAFYNAABfDAAAVQ8AAFwOAABcAQAAVQAAAF8DAABWAgAAWgUAAFMEAABZBwAAUAYAAPAKAAD5CwAA8wgAAPoJAAD2DgAA/w8AAPUMAAD8DQAA/AIAAPUDAAD/AAAA9gEAAPoGAADzBwAA+QQAAPAFAABgCwAAaQoAAGMJAABqCAAAZg8AAG8OAABlDQAAbAwAAGwDAABlAgAAbwEAAGYAAABqBwAAYwYAAGkFAABgBAAAoAwAAKkNAACjDgAAqg8AAKYIAACvCQAApQoAAKwLAACsBAAApQUAAK8GAACmBwAAqgAAAKMBAACpAgAAoAMAADANAAA5DAAAMw8AADoOAAA2CQAAPwgAADULAAA8CgAAPAUAADUEAAA/BwAANgYAADoBAAAzAAAAOQMAADACAACQDgAAmQ8AAJMMAACaDQAAlgoAAJ8LAACVCAAAnAkAAJwGAACVBwAAnwQAAJYFAACaAgAAkwMAAJkAAACQAQAAAA8AAAkOAAADDQAACgwAAAYLAAAPCgAABQkAAAwIAAAMBwAABQYAAA8FAAAGBAAACgMAAAMCAAAJAQAAAAAAAP////////////////////////////////////////////////////////////////////////////////////8AAAAACAAAAAMAAAD/////////////////////////////////////////////////////////////////////AAAAAAEAAAAJAAAA/////////////////////////////////////////////////////////////////////wEAAAAIAAAAAwAAAAkAAAAIAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAAoAAAD/////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAAAQAAAAIAAAAKAAAA/////////////////////////////////////////////////////wkAAAACAAAACgAAAAAAAAACAAAACQAAAP////////////////////////////////////////////////////8CAAAACAAAAAMAAAACAAAACgAAAAgAAAAKAAAACQAAAAgAAAD/////////////////////////////////////AwAAAAsAAAACAAAA/////////////////////////////////////////////////////////////////////wAAAAALAAAAAgAAAAgAAAALAAAAAAAAAP////////////////////////////////////////////////////8BAAAACQAAAAAAAAACAAAAAwAAAAsAAAD/////////////////////////////////////////////////////AQAAAAsAAAACAAAAAQAAAAkAAAALAAAACQAAAAgAAAALAAAA/////////////////////////////////////wMAAAAKAAAAAQAAAAsAAAAKAAAAAwAAAP////////////////////////////////////////////////////8AAAAACgAAAAEAAAAAAAAACAAAAAoAAAAIAAAACwAAAAoAAAD/////////////////////////////////////AwAAAAkAAAAAAAAAAwAAAAsAAAAJAAAACwAAAAoAAAAJAAAA/////////////////////////////////////wkAAAAIAAAACgAAAAoAAAAIAAAACwAAAP////////////////////////////////////////////////////8EAAAABwAAAAgAAAD/////////////////////////////////////////////////////////////////////BAAAAAMAAAAAAAAABwAAAAMAAAAEAAAA/////////////////////////////////////////////////////wAAAAABAAAACQAAAAgAAAAEAAAABwAAAP////////////////////////////////////////////////////8EAAAAAQAAAAkAAAAEAAAABwAAAAEAAAAHAAAAAwAAAAEAAAD/////////////////////////////////////AQAAAAIAAAAKAAAACAAAAAQAAAAHAAAA/////////////////////////////////////////////////////wMAAAAEAAAABwAAAAMAAAAAAAAABAAAAAEAAAACAAAACgAAAP////////////////////////////////////8JAAAAAgAAAAoAAAAJAAAAAAAAAAIAAAAIAAAABAAAAAcAAAD/////////////////////////////////////AgAAAAoAAAAJAAAAAgAAAAkAAAAHAAAAAgAAAAcAAAADAAAABwAAAAkAAAAEAAAA/////////////////////wgAAAAEAAAABwAAAAMAAAALAAAAAgAAAP////////////////////////////////////////////////////8LAAAABAAAAAcAAAALAAAAAgAAAAQAAAACAAAAAAAAAAQAAAD/////////////////////////////////////CQAAAAAAAAABAAAACAAAAAQAAAAHAAAAAgAAAAMAAAALAAAA/////////////////////////////////////wQAAAAHAAAACwAAAAkAAAAEAAAACwAAAAkAAAALAAAAAgAAAAkAAAACAAAAAQAAAP////////////////////8DAAAACgAAAAEAAAADAAAACwAAAAoAAAAHAAAACAAAAAQAAAD/////////////////////////////////////AQAAAAsAAAAKAAAAAQAAAAQAAAALAAAAAQAAAAAAAAAEAAAABwAAAAsAAAAEAAAA/////////////////////wQAAAAHAAAACAAAAAkAAAAAAAAACwAAAAkAAAALAAAACgAAAAsAAAAAAAAAAwAAAP////////////////////8EAAAABwAAAAsAAAAEAAAACwAAAAkAAAAJAAAACwAAAAoAAAD/////////////////////////////////////CQAAAAUAAAAEAAAA/////////////////////////////////////////////////////////////////////wkAAAAFAAAABAAAAAAAAAAIAAAAAwAAAP////////////////////////////////////////////////////8AAAAABQAAAAQAAAABAAAABQAAAAAAAAD/////////////////////////////////////////////////////CAAAAAUAAAAEAAAACAAAAAMAAAAFAAAAAwAAAAEAAAAFAAAA/////////////////////////////////////wEAAAACAAAACgAAAAkAAAAFAAAABAAAAP////////////////////////////////////////////////////8DAAAAAAAAAAgAAAABAAAAAgAAAAoAAAAEAAAACQAAAAUAAAD/////////////////////////////////////BQAAAAIAAAAKAAAABQAAAAQAAAACAAAABAAAAAAAAAACAAAA/////////////////////////////////////wIAAAAKAAAABQAAAAMAAAACAAAABQAAAAMAAAAFAAAABAAAAAMAAAAEAAAACAAAAP////////////////////8JAAAABQAAAAQAAAACAAAAAwAAAAsAAAD/////////////////////////////////////////////////////AAAAAAsAAAACAAAAAAAAAAgAAAALAAAABAAAAAkAAAAFAAAA/////////////////////////////////////wAAAAAFAAAABAAAAAAAAAABAAAABQAAAAIAAAADAAAACwAAAP////////////////////////////////////8CAAAAAQAAAAUAAAACAAAABQAAAAgAAAACAAAACAAAAAsAAAAEAAAACAAAAAUAAAD/////////////////////CgAAAAMAAAALAAAACgAAAAEAAAADAAAACQAAAAUAAAAEAAAA/////////////////////////////////////wQAAAAJAAAABQAAAAAAAAAIAAAAAQAAAAgAAAAKAAAAAQAAAAgAAAALAAAACgAAAP////////////////////8FAAAABAAAAAAAAAAFAAAAAAAAAAsAAAAFAAAACwAAAAoAAAALAAAAAAAAAAMAAAD/////////////////////BQAAAAQAAAAIAAAABQAAAAgAAAAKAAAACgAAAAgAAAALAAAA/////////////////////////////////////wkAAAAHAAAACAAAAAUAAAAHAAAACQAAAP////////////////////////////////////////////////////8JAAAAAwAAAAAAAAAJAAAABQAAAAMAAAAFAAAABwAAAAMAAAD/////////////////////////////////////AAAAAAcAAAAIAAAAAAAAAAEAAAAHAAAAAQAAAAUAAAAHAAAA/////////////////////////////////////wEAAAAFAAAAAwAAAAMAAAAFAAAABwAAAP////////////////////////////////////////////////////8JAAAABwAAAAgAAAAJAAAABQAAAAcAAAAKAAAAAQAAAAIAAAD/////////////////////////////////////CgAAAAEAAAACAAAACQAAAAUAAAAAAAAABQAAAAMAAAAAAAAABQAAAAcAAAADAAAA/////////////////////wgAAAAAAAAAAgAAAAgAAAACAAAABQAAAAgAAAAFAAAABwAAAAoAAAAFAAAAAgAAAP////////////////////8CAAAACgAAAAUAAAACAAAABQAAAAMAAAADAAAABQAAAAcAAAD/////////////////////////////////////BwAAAAkAAAAFAAAABwAAAAgAAAAJAAAAAwAAAAsAAAACAAAA/////////////////////////////////////wkAAAAFAAAABwAAAAkAAAAHAAAAAgAAAAkAAAACAAAAAAAAAAIAAAAHAAAACwAAAP////////////////////8CAAAAAwAAAAsAAAAAAAAAAQAAAAgAAAABAAAABwAAAAgAAAABAAAABQAAAAcAAAD/////////////////////CwAAAAIAAAABAAAACwAAAAEAAAAHAAAABwAAAAEAAAAFAAAA/////////////////////////////////////wkAAAAFAAAACAAAAAgAAAAFAAAABwAAAAoAAAABAAAAAwAAAAoAAAADAAAACwAAAP////////////////////8FAAAABwAAAAAAAAAFAAAAAAAAAAkAAAAHAAAACwAAAAAAAAABAAAAAAAAAAoAAAALAAAACgAAAAAAAAD/////CwAAAAoAAAAAAAAACwAAAAAAAAADAAAACgAAAAUAAAAAAAAACAAAAAAAAAAHAAAABQAAAAcAAAAAAAAA/////wsAAAAKAAAABQAAAAcAAAALAAAABQAAAP////////////////////////////////////////////////////8KAAAABgAAAAUAAAD/////////////////////////////////////////////////////////////////////AAAAAAgAAAADAAAABQAAAAoAAAAGAAAA/////////////////////////////////////////////////////wkAAAAAAAAAAQAAAAUAAAAKAAAABgAAAP////////////////////////////////////////////////////8BAAAACAAAAAMAAAABAAAACQAAAAgAAAAFAAAACgAAAAYAAAD/////////////////////////////////////AQAAAAYAAAAFAAAAAgAAAAYAAAABAAAA/////////////////////////////////////////////////////wEAAAAGAAAABQAAAAEAAAACAAAABgAAAAMAAAAAAAAACAAAAP////////////////////////////////////8JAAAABgAAAAUAAAAJAAAAAAAAAAYAAAAAAAAAAgAAAAYAAAD/////////////////////////////////////BQAAAAkAAAAIAAAABQAAAAgAAAACAAAABQAAAAIAAAAGAAAAAwAAAAIAAAAIAAAA/////////////////////wIAAAADAAAACwAAAAoAAAAGAAAABQAAAP////////////////////////////////////////////////////8LAAAAAAAAAAgAAAALAAAAAgAAAAAAAAAKAAAABgAAAAUAAAD/////////////////////////////////////AAAAAAEAAAAJAAAAAgAAAAMAAAALAAAABQAAAAoAAAAGAAAA/////////////////////////////////////wUAAAAKAAAABgAAAAEAAAAJAAAAAgAAAAkAAAALAAAAAgAAAAkAAAAIAAAACwAAAP////////////////////8GAAAAAwAAAAsAAAAGAAAABQAAAAMAAAAFAAAAAQAAAAMAAAD/////////////////////////////////////AAAAAAgAAAALAAAAAAAAAAsAAAAFAAAAAAAAAAUAAAABAAAABQAAAAsAAAAGAAAA/////////////////////wMAAAALAAAABgAAAAAAAAADAAAABgAAAAAAAAAGAAAABQAAAAAAAAAFAAAACQAAAP////////////////////8GAAAABQAAAAkAAAAGAAAACQAAAAsAAAALAAAACQAAAAgAAAD/////////////////////////////////////BQAAAAoAAAAGAAAABAAAAAcAAAAIAAAA/////////////////////////////////////////////////////wQAAAADAAAAAAAAAAQAAAAHAAAAAwAAAAYAAAAFAAAACgAAAP////////////////////////////////////8BAAAACQAAAAAAAAAFAAAACgAAAAYAAAAIAAAABAAAAAcAAAD/////////////////////////////////////CgAAAAYAAAAFAAAAAQAAAAkAAAAHAAAAAQAAAAcAAAADAAAABwAAAAkAAAAEAAAA/////////////////////wYAAAABAAAAAgAAAAYAAAAFAAAAAQAAAAQAAAAHAAAACAAAAP////////////////////////////////////8BAAAAAgAAAAUAAAAFAAAAAgAAAAYAAAADAAAAAAAAAAQAAAADAAAABAAAAAcAAAD/////////////////////CAAAAAQAAAAHAAAACQAAAAAAAAAFAAAAAAAAAAYAAAAFAAAAAAAAAAIAAAAGAAAA/////////////////////wcAAAADAAAACQAAAAcAAAAJAAAABAAAAAMAAAACAAAACQAAAAUAAAAJAAAABgAAAAIAAAAGAAAACQAAAP////8DAAAACwAAAAIAAAAHAAAACAAAAAQAAAAKAAAABgAAAAUAAAD/////////////////////////////////////BQAAAAoAAAAGAAAABAAAAAcAAAACAAAABAAAAAIAAAAAAAAAAgAAAAcAAAALAAAA/////////////////////wAAAAABAAAACQAAAAQAAAAHAAAACAAAAAIAAAADAAAACwAAAAUAAAAKAAAABgAAAP////////////////////8JAAAAAgAAAAEAAAAJAAAACwAAAAIAAAAJAAAABAAAAAsAAAAHAAAACwAAAAQAAAAFAAAACgAAAAYAAAD/////CAAAAAQAAAAHAAAAAwAAAAsAAAAFAAAAAwAAAAUAAAABAAAABQAAAAsAAAAGAAAA/////////////////////wUAAAABAAAACwAAAAUAAAALAAAABgAAAAEAAAAAAAAACwAAAAcAAAALAAAABAAAAAAAAAAEAAAACwAAAP////8AAAAABQAAAAkAAAAAAAAABgAAAAUAAAAAAAAAAwAAAAYAAAALAAAABgAAAAMAAAAIAAAABAAAAAcAAAD/////BgAAAAUAAAAJAAAABgAAAAkAAAALAAAABAAAAAcAAAAJAAAABwAAAAsAAAAJAAAA/////////////////////woAAAAEAAAACQAAAAYAAAAEAAAACgAAAP////////////////////////////////////////////////////8EAAAACgAAAAYAAAAEAAAACQAAAAoAAAAAAAAACAAAAAMAAAD/////////////////////////////////////CgAAAAAAAAABAAAACgAAAAYAAAAAAAAABgAAAAQAAAAAAAAA/////////////////////////////////////wgAAAADAAAAAQAAAAgAAAABAAAABgAAAAgAAAAGAAAABAAAAAYAAAABAAAACgAAAP////////////////////8BAAAABAAAAAkAAAABAAAAAgAAAAQAAAACAAAABgAAAAQAAAD/////////////////////////////////////AwAAAAAAAAAIAAAAAQAAAAIAAAAJAAAAAgAAAAQAAAAJAAAAAgAAAAYAAAAEAAAA/////////////////////wAAAAACAAAABAAAAAQAAAACAAAABgAAAP////////////////////////////////////////////////////8IAAAAAwAAAAIAAAAIAAAAAgAAAAQAAAAEAAAAAgAAAAYAAAD/////////////////////////////////////CgAAAAQAAAAJAAAACgAAAAYAAAAEAAAACwAAAAIAAAADAAAA/////////////////////////////////////wAAAAAIAAAAAgAAAAIAAAAIAAAACwAAAAQAAAAJAAAACgAAAAQAAAAKAAAABgAAAP////////////////////8DAAAACwAAAAIAAAAAAAAAAQAAAAYAAAAAAAAABgAAAAQAAAAGAAAAAQAAAAoAAAD/////////////////////BgAAAAQAAAABAAAABgAAAAEAAAAKAAAABAAAAAgAAAABAAAAAgAAAAEAAAALAAAACAAAAAsAAAABAAAA/////wkAAAAGAAAABAAAAAkAAAADAAAABgAAAAkAAAABAAAAAwAAAAsAAAAGAAAAAwAAAP////////////////////8IAAAACwAAAAEAAAAIAAAAAQAAAAAAAAALAAAABgAAAAEAAAAJAAAAAQAAAAQAAAAGAAAABAAAAAEAAAD/////AwAAAAsAAAAGAAAAAwAAAAYAAAAAAAAAAAAAAAYAAAAEAAAA/////////////////////////////////////wYAAAAEAAAACAAAAAsAAAAGAAAACAAAAP////////////////////////////////////////////////////8HAAAACgAAAAYAAAAHAAAACAAAAAoAAAAIAAAACQAAAAoAAAD/////////////////////////////////////AAAAAAcAAAADAAAAAAAAAAoAAAAHAAAAAAAAAAkAAAAKAAAABgAAAAcAAAAKAAAA/////////////////////woAAAAGAAAABwAAAAEAAAAKAAAABwAAAAEAAAAHAAAACAAAAAEAAAAIAAAAAAAAAP////////////////////8KAAAABgAAAAcAAAAKAAAABwAAAAEAAAABAAAABwAAAAMAAAD/////////////////////////////////////AQAAAAIAAAAGAAAAAQAAAAYAAAAIAAAAAQAAAAgAAAAJAAAACAAAAAYAAAAHAAAA/////////////////////wIAAAAGAAAACQAAAAIAAAAJAAAAAQAAAAYAAAAHAAAACQAAAAAAAAAJAAAAAwAAAAcAAAADAAAACQAAAP////8HAAAACAAAAAAAAAAHAAAAAAAAAAYAAAAGAAAAAAAAAAIAAAD/////////////////////////////////////BwAAAAMAAAACAAAABgAAAAcAAAACAAAA/////////////////////////////////////////////////////wIAAAADAAAACwAAAAoAAAAGAAAACAAAAAoAAAAIAAAACQAAAAgAAAAGAAAABwAAAP////////////////////8CAAAAAAAAAAcAAAACAAAABwAAAAsAAAAAAAAACQAAAAcAAAAGAAAABwAAAAoAAAAJAAAACgAAAAcAAAD/////AQAAAAgAAAAAAAAAAQAAAAcAAAAIAAAAAQAAAAoAAAAHAAAABgAAAAcAAAAKAAAAAgAAAAMAAAALAAAA/////wsAAAACAAAAAQAAAAsAAAABAAAABwAAAAoAAAAGAAAAAQAAAAYAAAAHAAAAAQAAAP////////////////////8IAAAACQAAAAYAAAAIAAAABgAAAAcAAAAJAAAAAQAAAAYAAAALAAAABgAAAAMAAAABAAAAAwAAAAYAAAD/////AAAAAAkAAAABAAAACwAAAAYAAAAHAAAA/////////////////////////////////////////////////////wcAAAAIAAAAAAAAAAcAAAAAAAAABgAAAAMAAAALAAAAAAAAAAsAAAAGAAAAAAAAAP////////////////////8HAAAACwAAAAYAAAD/////////////////////////////////////////////////////////////////////BwAAAAYAAAALAAAA/////////////////////////////////////////////////////////////////////wMAAAAAAAAACAAAAAsAAAAHAAAABgAAAP////////////////////////////////////////////////////8AAAAAAQAAAAkAAAALAAAABwAAAAYAAAD/////////////////////////////////////////////////////CAAAAAEAAAAJAAAACAAAAAMAAAABAAAACwAAAAcAAAAGAAAA/////////////////////////////////////woAAAABAAAAAgAAAAYAAAALAAAABwAAAP////////////////////////////////////////////////////8BAAAAAgAAAAoAAAADAAAAAAAAAAgAAAAGAAAACwAAAAcAAAD/////////////////////////////////////AgAAAAkAAAAAAAAAAgAAAAoAAAAJAAAABgAAAAsAAAAHAAAA/////////////////////////////////////wYAAAALAAAABwAAAAIAAAAKAAAAAwAAAAoAAAAIAAAAAwAAAAoAAAAJAAAACAAAAP////////////////////8HAAAAAgAAAAMAAAAGAAAAAgAAAAcAAAD/////////////////////////////////////////////////////BwAAAAAAAAAIAAAABwAAAAYAAAAAAAAABgAAAAIAAAAAAAAA/////////////////////////////////////wIAAAAHAAAABgAAAAIAAAADAAAABwAAAAAAAAABAAAACQAAAP////////////////////////////////////8BAAAABgAAAAIAAAABAAAACAAAAAYAAAABAAAACQAAAAgAAAAIAAAABwAAAAYAAAD/////////////////////CgAAAAcAAAAGAAAACgAAAAEAAAAHAAAAAQAAAAMAAAAHAAAA/////////////////////////////////////woAAAAHAAAABgAAAAEAAAAHAAAACgAAAAEAAAAIAAAABwAAAAEAAAAAAAAACAAAAP////////////////////8AAAAAAwAAAAcAAAAAAAAABwAAAAoAAAAAAAAACgAAAAkAAAAGAAAACgAAAAcAAAD/////////////////////BwAAAAYAAAAKAAAABwAAAAoAAAAIAAAACAAAAAoAAAAJAAAA/////////////////////////////////////wYAAAAIAAAABAAAAAsAAAAIAAAABgAAAP////////////////////////////////////////////////////8DAAAABgAAAAsAAAADAAAAAAAAAAYAAAAAAAAABAAAAAYAAAD/////////////////////////////////////CAAAAAYAAAALAAAACAAAAAQAAAAGAAAACQAAAAAAAAABAAAA/////////////////////////////////////wkAAAAEAAAABgAAAAkAAAAGAAAAAwAAAAkAAAADAAAAAQAAAAsAAAADAAAABgAAAP////////////////////8GAAAACAAAAAQAAAAGAAAACwAAAAgAAAACAAAACgAAAAEAAAD/////////////////////////////////////AQAAAAIAAAAKAAAAAwAAAAAAAAALAAAAAAAAAAYAAAALAAAAAAAAAAQAAAAGAAAA/////////////////////wQAAAALAAAACAAAAAQAAAAGAAAACwAAAAAAAAACAAAACQAAAAIAAAAKAAAACQAAAP////////////////////8KAAAACQAAAAMAAAAKAAAAAwAAAAIAAAAJAAAABAAAAAMAAAALAAAAAwAAAAYAAAAEAAAABgAAAAMAAAD/////CAAAAAIAAAADAAAACAAAAAQAAAACAAAABAAAAAYAAAACAAAA/////////////////////////////////////wAAAAAEAAAAAgAAAAQAAAAGAAAAAgAAAP////////////////////////////////////////////////////8BAAAACQAAAAAAAAACAAAAAwAAAAQAAAACAAAABAAAAAYAAAAEAAAAAwAAAAgAAAD/////////////////////AQAAAAkAAAAEAAAAAQAAAAQAAAACAAAAAgAAAAQAAAAGAAAA/////////////////////////////////////wgAAAABAAAAAwAAAAgAAAAGAAAAAQAAAAgAAAAEAAAABgAAAAYAAAAKAAAAAQAAAP////////////////////8KAAAAAQAAAAAAAAAKAAAAAAAAAAYAAAAGAAAAAAAAAAQAAAD/////////////////////////////////////BAAAAAYAAAADAAAABAAAAAMAAAAIAAAABgAAAAoAAAADAAAAAAAAAAMAAAAJAAAACgAAAAkAAAADAAAA/////woAAAAJAAAABAAAAAYAAAAKAAAABAAAAP////////////////////////////////////////////////////8EAAAACQAAAAUAAAAHAAAABgAAAAsAAAD/////////////////////////////////////////////////////AAAAAAgAAAADAAAABAAAAAkAAAAFAAAACwAAAAcAAAAGAAAA/////////////////////////////////////wUAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAcAAAAGAAAACwAAAP////////////////////////////////////8LAAAABwAAAAYAAAAIAAAAAwAAAAQAAAADAAAABQAAAAQAAAADAAAAAQAAAAUAAAD/////////////////////CQAAAAUAAAAEAAAACgAAAAEAAAACAAAABwAAAAYAAAALAAAA/////////////////////////////////////wYAAAALAAAABwAAAAEAAAACAAAACgAAAAAAAAAIAAAAAwAAAAQAAAAJAAAABQAAAP////////////////////8HAAAABgAAAAsAAAAFAAAABAAAAAoAAAAEAAAAAgAAAAoAAAAEAAAAAAAAAAIAAAD/////////////////////AwAAAAQAAAAIAAAAAwAAAAUAAAAEAAAAAwAAAAIAAAAFAAAACgAAAAUAAAACAAAACwAAAAcAAAAGAAAA/////wcAAAACAAAAAwAAAAcAAAAGAAAAAgAAAAUAAAAEAAAACQAAAP////////////////////////////////////8JAAAABQAAAAQAAAAAAAAACAAAAAYAAAAAAAAABgAAAAIAAAAGAAAACAAAAAcAAAD/////////////////////AwAAAAYAAAACAAAAAwAAAAcAAAAGAAAAAQAAAAUAAAAAAAAABQAAAAQAAAAAAAAA/////////////////////wYAAAACAAAACAAAAAYAAAAIAAAABwAAAAIAAAABAAAACAAAAAQAAAAIAAAABQAAAAEAAAAFAAAACAAAAP////8JAAAABQAAAAQAAAAKAAAAAQAAAAYAAAABAAAABwAAAAYAAAABAAAAAwAAAAcAAAD/////////////////////AQAAAAYAAAAKAAAAAQAAAAcAAAAGAAAAAQAAAAAAAAAHAAAACAAAAAcAAAAAAAAACQAAAAUAAAAEAAAA/////wQAAAAAAAAACgAAAAQAAAAKAAAABQAAAAAAAAADAAAACgAAAAYAAAAKAAAABwAAAAMAAAAHAAAACgAAAP////8HAAAABgAAAAoAAAAHAAAACgAAAAgAAAAFAAAABAAAAAoAAAAEAAAACAAAAAoAAAD/////////////////////BgAAAAkAAAAFAAAABgAAAAsAAAAJAAAACwAAAAgAAAAJAAAA/////////////////////////////////////wMAAAAGAAAACwAAAAAAAAAGAAAAAwAAAAAAAAAFAAAABgAAAAAAAAAJAAAABQAAAP////////////////////8AAAAACwAAAAgAAAAAAAAABQAAAAsAAAAAAAAAAQAAAAUAAAAFAAAABgAAAAsAAAD/////////////////////BgAAAAsAAAADAAAABgAAAAMAAAAFAAAABQAAAAMAAAABAAAA/////////////////////////////////////wEAAAACAAAACgAAAAkAAAAFAAAACwAAAAkAAAALAAAACAAAAAsAAAAFAAAABgAAAP////////////////////8AAAAACwAAAAMAAAAAAAAABgAAAAsAAAAAAAAACQAAAAYAAAAFAAAABgAAAAkAAAABAAAAAgAAAAoAAAD/////CwAAAAgAAAAFAAAACwAAAAUAAAAGAAAACAAAAAAAAAAFAAAACgAAAAUAAAACAAAAAAAAAAIAAAAFAAAA/////wYAAAALAAAAAwAAAAYAAAADAAAABQAAAAIAAAAKAAAAAwAAAAoAAAAFAAAAAwAAAP////////////////////8FAAAACAAAAAkAAAAFAAAAAgAAAAgAAAAFAAAABgAAAAIAAAADAAAACAAAAAIAAAD/////////////////////CQAAAAUAAAAGAAAACQAAAAYAAAAAAAAAAAAAAAYAAAACAAAA/////////////////////////////////////wEAAAAFAAAACAAAAAEAAAAIAAAAAAAAAAUAAAAGAAAACAAAAAMAAAAIAAAAAgAAAAYAAAACAAAACAAAAP////8BAAAABQAAAAYAAAACAAAAAQAAAAYAAAD/////////////////////////////////////////////////////AQAAAAMAAAAGAAAAAQAAAAYAAAAKAAAAAwAAAAgAAAAGAAAABQAAAAYAAAAJAAAACAAAAAkAAAAGAAAA/////woAAAABAAAAAAAAAAoAAAAAAAAABgAAAAkAAAAFAAAAAAAAAAUAAAAGAAAAAAAAAP////////////////////8AAAAAAwAAAAgAAAAFAAAABgAAAAoAAAD/////////////////////////////////////////////////////CgAAAAUAAAAGAAAA/////////////////////////////////////////////////////////////////////wsAAAAFAAAACgAAAAcAAAAFAAAACwAAAP////////////////////////////////////////////////////8LAAAABQAAAAoAAAALAAAABwAAAAUAAAAIAAAAAwAAAAAAAAD/////////////////////////////////////BQAAAAsAAAAHAAAABQAAAAoAAAALAAAAAQAAAAkAAAAAAAAA/////////////////////////////////////woAAAAHAAAABQAAAAoAAAALAAAABwAAAAkAAAAIAAAAAQAAAAgAAAADAAAAAQAAAP////////////////////8LAAAAAQAAAAIAAAALAAAABwAAAAEAAAAHAAAABQAAAAEAAAD/////////////////////////////////////AAAAAAgAAAADAAAAAQAAAAIAAAAHAAAAAQAAAAcAAAAFAAAABwAAAAIAAAALAAAA/////////////////////wkAAAAHAAAABQAAAAkAAAACAAAABwAAAAkAAAAAAAAAAgAAAAIAAAALAAAABwAAAP////////////////////8HAAAABQAAAAIAAAAHAAAAAgAAAAsAAAAFAAAACQAAAAIAAAADAAAAAgAAAAgAAAAJAAAACAAAAAIAAAD/////AgAAAAUAAAAKAAAAAgAAAAMAAAAFAAAAAwAAAAcAAAAFAAAA/////////////////////////////////////wgAAAACAAAAAAAAAAgAAAAFAAAAAgAAAAgAAAAHAAAABQAAAAoAAAACAAAABQAAAP////////////////////8JAAAAAAAAAAEAAAAFAAAACgAAAAMAAAAFAAAAAwAAAAcAAAADAAAACgAAAAIAAAD/////////////////////CQAAAAgAAAACAAAACQAAAAIAAAABAAAACAAAAAcAAAACAAAACgAAAAIAAAAFAAAABwAAAAUAAAACAAAA/////wEAAAADAAAABQAAAAMAAAAHAAAABQAAAP////////////////////////////////////////////////////8AAAAACAAAAAcAAAAAAAAABwAAAAEAAAABAAAABwAAAAUAAAD/////////////////////////////////////CQAAAAAAAAADAAAACQAAAAMAAAAFAAAABQAAAAMAAAAHAAAA/////////////////////////////////////wkAAAAIAAAABwAAAAUAAAAJAAAABwAAAP////////////////////////////////////////////////////8FAAAACAAAAAQAAAAFAAAACgAAAAgAAAAKAAAACwAAAAgAAAD/////////////////////////////////////BQAAAAAAAAAEAAAABQAAAAsAAAAAAAAABQAAAAoAAAALAAAACwAAAAMAAAAAAAAA/////////////////////wAAAAABAAAACQAAAAgAAAAEAAAACgAAAAgAAAAKAAAACwAAAAoAAAAEAAAABQAAAP////////////////////8KAAAACwAAAAQAAAAKAAAABAAAAAUAAAALAAAAAwAAAAQAAAAJAAAABAAAAAEAAAADAAAAAQAAAAQAAAD/////AgAAAAUAAAABAAAAAgAAAAgAAAAFAAAAAgAAAAsAAAAIAAAABAAAAAUAAAAIAAAA/////////////////////wAAAAAEAAAACwAAAAAAAAALAAAAAwAAAAQAAAAFAAAACwAAAAIAAAALAAAAAQAAAAUAAAABAAAACwAAAP////8AAAAAAgAAAAUAAAAAAAAABQAAAAkAAAACAAAACwAAAAUAAAAEAAAABQAAAAgAAAALAAAACAAAAAUAAAD/////CQAAAAQAAAAFAAAAAgAAAAsAAAADAAAA/////////////////////////////////////////////////////wIAAAAFAAAACgAAAAMAAAAFAAAAAgAAAAMAAAAEAAAABQAAAAMAAAAIAAAABAAAAP////////////////////8FAAAACgAAAAIAAAAFAAAAAgAAAAQAAAAEAAAAAgAAAAAAAAD/////////////////////////////////////AwAAAAoAAAACAAAAAwAAAAUAAAAKAAAAAwAAAAgAAAAFAAAABAAAAAUAAAAIAAAAAAAAAAEAAAAJAAAA/////wUAAAAKAAAAAgAAAAUAAAACAAAABAAAAAEAAAAJAAAAAgAAAAkAAAAEAAAAAgAAAP////////////////////8IAAAABAAAAAUAAAAIAAAABQAAAAMAAAADAAAABQAAAAEAAAD/////////////////////////////////////AAAAAAQAAAAFAAAAAQAAAAAAAAAFAAAA/////////////////////////////////////////////////////wgAAAAEAAAABQAAAAgAAAAFAAAAAwAAAAkAAAAAAAAABQAAAAAAAAADAAAABQAAAP////////////////////8JAAAABAAAAAUAAAD/////////////////////////////////////////////////////////////////////BAAAAAsAAAAHAAAABAAAAAkAAAALAAAACQAAAAoAAAALAAAA/////////////////////////////////////wAAAAAIAAAAAwAAAAQAAAAJAAAABwAAAAkAAAALAAAABwAAAAkAAAAKAAAACwAAAP////////////////////8BAAAACgAAAAsAAAABAAAACwAAAAQAAAABAAAABAAAAAAAAAAHAAAABAAAAAsAAAD/////////////////////AwAAAAEAAAAEAAAAAwAAAAQAAAAIAAAAAQAAAAoAAAAEAAAABwAAAAQAAAALAAAACgAAAAsAAAAEAAAA/////wQAAAALAAAABwAAAAkAAAALAAAABAAAAAkAAAACAAAACwAAAAkAAAABAAAAAgAAAP////////////////////8JAAAABwAAAAQAAAAJAAAACwAAAAcAAAAJAAAAAQAAAAsAAAACAAAACwAAAAEAAAAAAAAACAAAAAMAAAD/////CwAAAAcAAAAEAAAACwAAAAQAAAACAAAAAgAAAAQAAAAAAAAA/////////////////////////////////////wsAAAAHAAAABAAAAAsAAAAEAAAAAgAAAAgAAAADAAAABAAAAAMAAAACAAAABAAAAP////////////////////8CAAAACQAAAAoAAAACAAAABwAAAAkAAAACAAAAAwAAAAcAAAAHAAAABAAAAAkAAAD/////////////////////CQAAAAoAAAAHAAAACQAAAAcAAAAEAAAACgAAAAIAAAAHAAAACAAAAAcAAAAAAAAAAgAAAAAAAAAHAAAA/////wMAAAAHAAAACgAAAAMAAAAKAAAAAgAAAAcAAAAEAAAACgAAAAEAAAAKAAAAAAAAAAQAAAAAAAAACgAAAP////8BAAAACgAAAAIAAAAIAAAABwAAAAQAAAD/////////////////////////////////////////////////////BAAAAAkAAAABAAAABAAAAAEAAAAHAAAABwAAAAEAAAADAAAA/////////////////////////////////////wQAAAAJAAAAAQAAAAQAAAABAAAABwAAAAAAAAAIAAAAAQAAAAgAAAAHAAAAAQAAAP////////////////////8EAAAAAAAAAAMAAAAHAAAABAAAAAMAAAD/////////////////////////////////////////////////////BAAAAAgAAAAHAAAA/////////////////////////////////////////////////////////////////////wkAAAAKAAAACAAAAAoAAAALAAAACAAAAP////////////////////////////////////////////////////8DAAAAAAAAAAkAAAADAAAACQAAAAsAAAALAAAACQAAAAoAAAD/////////////////////////////////////AAAAAAEAAAAKAAAAAAAAAAoAAAAIAAAACAAAAAoAAAALAAAA/////////////////////////////////////wMAAAABAAAACgAAAAsAAAADAAAACgAAAP////////////////////////////////////////////////////8BAAAAAgAAAAsAAAABAAAACwAAAAkAAAAJAAAACwAAAAgAAAD/////////////////////////////////////AwAAAAAAAAAJAAAAAwAAAAkAAAALAAAAAQAAAAIAAAAJAAAAAgAAAAsAAAAJAAAA/////////////////////wAAAAACAAAACwAAAAgAAAAAAAAACwAAAP////////////////////////////////////////////////////8DAAAAAgAAAAsAAAD/////////////////////////////////////////////////////////////////////AgAAAAMAAAAIAAAAAgAAAAgAAAAKAAAACgAAAAgAAAAJAAAA/////////////////////////////////////wkAAAAKAAAAAgAAAAAAAAAJAAAAAgAAAP////////////////////////////////////////////////////8CAAAAAwAAAAgAAAACAAAACAAAAAoAAAAAAAAAAQAAAAgAAAABAAAACgAAAAgAAAD/////////////////////AQAAAAoAAAACAAAA/////////////////////////////////////////////////////////////////////wEAAAADAAAACAAAAAkAAAABAAAACAAAAP////////////////////////////////////////////////////8AAAAACQAAAAEAAAD/////////////////////////////////////////////////////////////////////AAAAAAMAAAAIAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8A/AEEbmFtZQHUAREAEl9fd2FzbV9pbml0X21lbW9yeQEFYWJvcnQCBHNicmsDBm1hbGxvYwQIZGxtYWxsb2MFBWR1bW15BhFfX3dhc21fY2FsbF9kdG9ycwcOX19tYXRoX2ludmFsaWQIDF9fbWF0aF94ZmxvdwkMX19tYXRoX29mbG93CgxfX21hdGhfdWZsb3cLA3BvdwwIY2hlY2tpbnQNC3NwZWNpYWxjYXNlDgNydW4PEnJ1bi5jb21tYW5kX2V4cG9ydBAVbWFsbG9jLmNvbW1hbmRfZXhwb3J0BxIBAA9fX3N0YWNrX3BvaW50ZXIJCgEABy5yb2RhdGEAJglwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQEFY2xhbmcGMTQuMC40AB4PdGFyZ2V0X2ZlYXR1cmVzASsLYnVsay1tZW1vcnk=",n)}var J9=null;try{Y9=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Yi=="function"&&Yi("worker_threads"),J9=Y9.Worker}catch{}var Y9;function Tfe(n,e,t){var i=e===void 0?null:e,o=function(c,u){return Buffer.from(c,"base64").toString(u?"utf16":"utf8")}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:"");return function(c){return new J9(l,Object.assign({},c,{eval:!0}))}}function _fe(n,e,t){var i=e===void 0?null:e,o=function(u,h){var A=atob(u);if(h){for(var f=new Uint8Array(A.length),d=0,p=A.length;d<p;++d)f[d]=A.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return A}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var Dfe=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",nL,iL,rL,Rfe=(nL="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0fSxwcm9ncmFtOm59fSk9PnsoKHttZW1vcnk6ZSxwcm9ncmFtOnN9KT0+e2NvbnN0IHI9TWF0aC5jZWlsKGUucmVkdWNlKCgoZSx7dHlwZTpzLHNpemU6cn0pPT5lK3Iqcy5CWVRFU19QRVJfRUxFTUVOVCksMCkvNjU1MzYpKzIsdD1uZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtpbml0aWFsOnIsbWF4aW11bTpyfSk7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHMse2Vudjp7bWVtb3J5OnR9fSkudGhlbigocz0+KHttZW1vcnk6ZS5yZWR1Y2UoKChlLHtpZDpyLHR5cGU6bixzaXplOm99KT0+e2NvbnN0IGk9cy5leHBvcnRzLm1hbGxvYyhvKm4uQllURVNfUEVSX0VMRU1FTlQpO3JldHVybiBlW3JdPXthZGRyZXNzOmksdmlldzpuZXcgbih0LmJ1ZmZlcixpLG8pfSxlfSkse30pLHJ1bjpzLmV4cG9ydHMucnVufSkpKX0pKHttZW1vcnk6W3tpZDoiY2h1bmtzIix0eXBlOlVpbnQ4QXJyYXksc2l6ZTp0KnQqdCo0Kjh9LHtpZDoidmVydGljZXMiLHR5cGU6RmxvYXQzMkFycmF5LHNpemU6dCp0KnQqMyo5KjV9LHtpZDoiYm91bmRzIix0eXBlOkZsb2F0MzJBcnJheSxzaXplOjZ9XSxwcm9ncmFtOm59KS50aGVuKCgoe21lbW9yeTpuLHJ1bjpvfSk9PntlPXtjaHVua1NpemU6dCxtZW1vcnk6bixydW46b30sc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHIpLHNlbGYucG9zdE1lc3NhZ2UoITApfSkpfTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpO2NvbnN0IHI9KHtkYXRhOnN9KT0+e2UubWVtb3J5LmNodW5rcy52aWV3LnNldChzKTtjb25zdCByPWUucnVuKGUubWVtb3J5LmNodW5rcy5hZGRyZXNzLGUubWVtb3J5LnZlcnRpY2VzLmFkZHJlc3MsZS5tZW1vcnkuYm91bmRzLmFkZHJlc3MsZS5jaHVua1NpemUpO2lmKDA9PT1yKXJldHVybiB2b2lkIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6ITF9LFtzLmJ1ZmZlcl0pO2NvbnN0IHQ9ZS5tZW1vcnkuYm91bmRzLnZpZXcuc2xpY2UoMCksbj1lLm1lbW9yeS52ZXJ0aWNlcy52aWV3LnNsaWNlKDAsMypyKjkpO3NlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjpzLGRhdGE6e2JvdW5kczp0LHZlcnRpY2VzOm59fSxbcy5idWZmZXIsdC5idWZmZXIsbi5idWZmZXJdKX19KCk7Cgo=",iL=null,rL=!1,Dfe?Tfe(nL,iL,rL):function(n,e,t){var i;return function(o){return i=i||_fe(n,e,t),new Worker(i,o)}}(nL,iL,rL)),Lfe=typeof self.queueMicrotask=="function"?self.queueMicrotask:n=>{Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))},Mt=new U,Z9=new U,bi=new U,Nu=class n extends Yt{constructor({chunkMaterial:e=null,chunkSize:t=32,renderRadius:i=5,storage:o=null,worldgen:a=null}={}){super(),this.chunkMaterial=e,this.chunkSize=t,this.anchorChunk=new U(1/0,1/0,1/0),this.dataChunks=new Map,this.renderChunks=new Map,this.renderRadius=i,this.renderGrid=n.getRenderGrid(i),this.loading={data:new Map,mesh:new Map},this.saving=new Map,this.storage=o,this.updateQueue=new Map,this.workers={mesher:new ux({buffer:t*t*t*4*8,options:{chunkSize:t},program:Mfe,script:Rfe}),...a?{worldgen:a(t)}:{}}}dispose(){let{loading:e,renderChunks:t,updateQueue:i,workers:o}=this;[e.data,e.mesh].forEach(a=>{a.forEach(l=>{l.abort=!0}),a.clear()}),t.forEach(a=>a.dispose()),i.clear(),[o.mesher,o.worldgen].forEach(a=>{a&&a.dispose()})}reset(){let{anchorChunk:e,dataChunks:t,loading:i,renderChunks:o,updateQueue:a,workers:l}=this;e.set(1/0,1/0,1/0),t.clear(),[i.data,i.mesh].forEach(c=>{c.forEach(u=>{u.abort=!0}),c.clear()}),o.size&&(o.forEach(c=>{c.dispose(),this.remove(c)}),o.clear(),this.dispatchEvent({type:"update"})),a.clear(),[l.mesher,l.worldgen].forEach(c=>{c&&(c.queue.length=0)})}getChunk(e,t,i){let{chunkSize:o,dataChunks:a,loading:{data:l},storage:c,workers:u}=this,h=`${e}:${t}:${i}`;return new Promise(A=>{if(a.has(h))return void A(a.get(h));if(l.has(h))return void l.get(h).promises.push(A);let f={abort:!1,promises:[A]};l.set(h,f),(c?c.get(h):Promise.resolve(!1)).then(d=>{if(!f.abort)return d||(u.worldgen?u.worldgen.run({x:e,y:t,z:i}):new Uint8Array(o*o*o*4))}).then(d=>{f.abort||(l.delete(h),a.set(h,d),f.promises.forEach(p=>p(d)))})})}loadChunk(e,t,i){let{chunkMaterial:o,chunkSize:a,renderChunks:l,loading:{mesh:c},workers:u}=this,h=`${e}:${t}:${i}`;if(c.has(h))return;let A={abort:!1};return c.set(h,A),Promise.all(n.chunkGrid.map(f=>this.getChunk(e+f.x,t+f.y,i+f.z))).then(f=>{if(!A.abort)return u.mesher.run(f)}).then(f=>{if(A.abort)return;c.delete(h);let d=l.get(h);if(d)f?d.update(f):(d.dispose(),this.remove(d));else if(f){let p=new sL({chunkMaterial:o,chunkSize:a,geometry:f,position:{x:e,y:t,z:i}});this.add(p),l.set(h,p)}this.dispatchEvent({type:"update"})})}importChunks(e,t=!0,i=!0){let{chunkSize:o,dataChunks:a}=this,[l]=new Uint16Array(e.slice(0,2)),c=JSON.parse(new TextDecoder().decode(e.slice(2,2+l))),u=6+o*o*o*4;if(c.chunkSize!==o)throw new Error("World chunkSize is: ${chunkSize} but imported chunkSize is: ${metadata.chunkSize}. They need to match.");this.reset();for(let h=2+l;h<e.byteLength;h+=u){let A=new Int16Array(e.slice(h,h+6));a.set(`${A[0]}:${A[1]}:${A[2]}`,new Uint8Array(e.slice(h+6,h+u)))}return t&&this.updateLoadedChunks(),i&&(this.scale.setScalar(c.scale),this.updateMatrixWorld()),c}updateChunks(e){let{anchorChunk:t,chunkSize:i,dataChunks:o,loading:{mesh:a},renderChunks:l,renderGrid:c,renderRadius:u}=this;if(this.worldToLocal(Mt.copy(e)).divideScalar(i).floor(),t.equals(Mt))return;t.copy(Mt);let h=!1,A=u+2;o.forEach((f,d)=>{let[p,m,b]=d.split(":");if(Mt.set(parseInt(p,10),parseInt(m,10),parseInt(b,10)),t.distanceTo(Mt)>A){o.delete(d),a.has(d)&&(a.get(d).abort=!0,a.delete(d));let g=l.get(d);g&&(l.delete(d),g.dispose(),this.remove(g),h=!0)}}),h&&this.dispatchEvent({type:"update"}),c.forEach(f=>{Mt.addVectors(t,f);let d=`${Mt.x}:${Mt.y}:${Mt.z}`;l.has(d)||this.loadChunk(Mt.x,Mt.y,Mt.z)})}updateLoadedChunks(){let{dataChunks:e,renderChunks:t}=this,i=new U(-.5,-.5,-.5),o=[];for(let a of e.keys())if(!t.has(a)){let[l,c,u]=a.split(":");o.push(new U(parseInt(l,10),parseInt(c,10),parseInt(u,10)))}o.sort((a,l)=>a.distanceTo(i)-l.distanceTo(i)).forEach(({x:a,y:l,z:c})=>this.loadChunk(a,l,c))}updateVolume(e,t,i,o){let{chunkSize:a,dataChunks:l,loading:{mesh:c},updateQueue:u}=this,h=!!u.size;this.worldToLocal(Z9.copy(e)).floor(),n.getBrush(t).forEach(A=>{bi.addVectors(Z9,A),Mt.copy(bi).divideScalar(a).floor(),bi.addScaledVector(Mt,-a).floor();let f=`${Mt.x}:${Mt.y}:${Mt.z}`,d=l.get(f);if(d){let p=4*(bi.z*a*a+bi.y*a+bi.x);d[p]=i,o&&d.set([o.r,o.g,o.b],p+1),this.saveChunk(f),u.set(f,!0),bi.x===0&&u.set(`${Mt.x-1}:${Mt.y}:${Mt.z}`,!0),bi.y===0&&u.set(`${Mt.x}:${Mt.y-1}:${Mt.z}`,!0),bi.z===0&&u.set(`${Mt.x}:${Mt.y}:${Mt.z-1}`,!0),bi.x===0&&bi.y===0&&bi.z===0&&u.set(`${Mt.x-1}:${Mt.y-1}:${Mt.z-1}`,!0),bi.x===0&&bi.y===0&&u.set(`${Mt.x-1}:${Mt.y-1}:${Mt.z}`,!0),bi.y===0&&bi.z===0&&u.set(`${Mt.x}:${Mt.y-1}:${Mt.z-1}`,!0),bi.x===0&&bi.z===0&&u.set(`${Mt.x-1}:${Mt.y}:${Mt.z-1}`,!0)}}),!h&&u.size&&Lfe(()=>{u.forEach((A,f)=>{c.has(f)&&(c.get(f).abort=!0,c.delete(f));let[d,p,m]=f.split(":");this.loadChunk(parseInt(d,10),parseInt(p,10),parseInt(m,10))}),u.clear()})}saveChunk(e){let{dataChunks:t,saving:i,storage:o}=this;o&&o.set&&!i.has(e)&&(i.set(e,!0),setTimeout(()=>{i.delete(e);let a=t.get(e);a&&o.set(e,a)},o.saveInterval||0))}static getBrush(e){let{brushes:t}=n,i=t.get(e);if(!i){i=[];let o=new U().setScalar(.5);for(let a=-e;a<=e+1;a+=1)for(let l=-e;l<=e+1;l+=1)for(let c=-e;c<=e+1;c+=1){let u=new U(c,l,a);u.distanceTo(o)<=e&&i.push(u)}i.sort((a,l)=>a.distanceTo(o)-l.distanceTo(o)),t.set(e,i)}return i}static getRenderGrid(e){let t=[],i=new U;for(let o=-e;o<=e;o+=1)for(let a=-e;a<=e;a+=1)for(let l=-e;l<=e;l+=1){let c=new U(l,a,o);c.distanceTo(i)<=e&&t.push(c)}return t.sort((o,a)=>o.distanceTo(i)-a.distanceTo(i)),t}};function Bfe(n){return j9(0,null,"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",n)}Nu.brushes=new Map,Nu.chunkGrid=(()=>{let n=[];for(let e=0;e<2;e++)for(let t=0;t<2;t++)for(let i=0;i<2;i++)n.push(new U(i,t,e));return n})();var q9=null;try{K9=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof Yi=="function"&&Yi("worker_threads"),q9=K9.Worker}catch{}var K9;function kfe(n,e,t){var i=e===void 0?null:e,o=function(c,u){return Buffer.from(c,"base64").toString(u?"utf16":"utf8")}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:"");return function(c){return new q9(l,Object.assign({},c,{eval:!0}))}}function Pfe(n,e,t){var i=e===void 0?null:e,o=function(u,h){var A=atob(u);if(h){for(var f=new Uint8Array(A.length),d=0,p=A.length;d<p;++d)f[d]=A.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return A}(n,t!==void 0&&t),a=o.indexOf(`
`,10)+1,l=o.substring(a)+(i?"//# sourceMappingURL="+i:""),c=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(c)}var Nfe=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Ffe=function(n,e,t){return Nfe?kfe(n,e,t):function(i,o,a){var l;return function(c){return l=l||Pfe(i,o,a),new Worker(l,c)}}(n,e,t)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bGV0IGU7Y29uc3Qgcj17Y2F2ZTowLHRlcnJhaW46MX0scz0oe2RhdGE6e29wdGlvbnM6e2NodW5rU2l6ZTp0LGdlbmVyYXRvcjptLHNlZWQ6b30scHJvZ3JhbTphfX0pPT57KCh7bWVtb3J5OmUscHJvZ3JhbTpyfSk9Pntjb25zdCBzPU1hdGguY2VpbChlLnJlZHVjZSgoKGUse3R5cGU6cixzaXplOnN9KT0+ZStzKnIuQllURVNfUEVSX0VMRU1FTlQpLDApLzY1NTM2KSsyLG49bmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7aW5pdGlhbDpzLG1heGltdW06c30pO3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShyLHtlbnY6e21lbW9yeTpufX0pLnRoZW4oKHI9Pih7bWVtb3J5OmUucmVkdWNlKCgoZSx7aWQ6cyx0eXBlOnQsc2l6ZTptfSk9Pntjb25zdCBvPXIuZXhwb3J0cy5tYWxsb2MobSp0LkJZVEVTX1BFUl9FTEVNRU5UKTtyZXR1cm4gZVtzXT17YWRkcmVzczpvLHZpZXc6bmV3IHQobi5idWZmZXIsbyxtKX0sZX0pLHt9KSxydW46ci5leHBvcnRzLnJ1bn0pKSl9KSh7bWVtb3J5Olt7aWQ6ImNodW5rIix0eXBlOlVpbnQ4QXJyYXksc2l6ZTp0KnQqdCo0fV0scHJvZ3JhbTphfSkudGhlbigoKHttZW1vcnk6YSxydW46aX0pPT57ZT17Y2h1bmtTaXplOnQsZ2VuZXJhdG9yOnJbbV18fDAsbWVtb3J5OmEscnVuOmksc2VlZDpvfSxzZWxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHMpLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbiksc2VsZi5wb3N0TWVzc2FnZSghMCl9KSl9O3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIscyk7Y29uc3Qgbj0oe2RhdGE6e3g6cix5OnMsejpufX0pPT57ZS5ydW4oZS5tZW1vcnkuY2h1bmsuYWRkcmVzcyxlLmNodW5rU2l6ZSxlLmdlbmVyYXRvcixlLnNlZWQscixzLG4pO2NvbnN0IHQ9ZS5tZW1vcnkuY2h1bmsudmlldy5zbGljZSgwKTtzZWxmLnBvc3RNZXNzYWdlKHQsW3QuYnVmZmVyXSl9fSgpOwoK",null,!1),hx=({generator:n="cave",seed:e=Math.floor(2147483647*Math.random())}={})=>t=>new ux({options:{chunkSize:t,generator:n,seed:e},program:Bfe,script:Ffe});var cC=Ao(OW());var bB={};ho(bB,{ADDITION:()=>Vx,Brush:()=>_s,DIFFERENCE:()=>Bme,EdgesHelper:()=>zg,Evaluator:()=>Qf,GridMaterial:()=>gB,HalfEdgeHelper:()=>wB,HalfEdgeMap:()=>Ng,INTERSECTION:()=>kme,Operation:()=>pB,OperationGroup:()=>mB,PointsHelper:()=>vB,SUBTRACTION:()=>Wx,TriangleSetHelper:()=>yB,TriangleSplitter:()=>Qg,computeMeshVolume:()=>zme,generateRandomTriangleColors:()=>Gme,getTriangleDefinitions:()=>g8,isTriDegenerate:()=>Uf,logTriangleDefinitions:()=>Qme});var QW=Math.pow(2,-24);var Gu=class{constructor(){}};function Ms(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function GW(n){n[0]=n[1]=n[2]=1/0,n[3]=n[4]=n[5]=-1/0}function NL(n){let e=-1,t=-1/0;for(let i=0;i<3;i++){let o=n[i+3]-n[i];o>t&&(t=o,e=i)}return e}function FL(n,e){e.set(n)}function UL(n,e,t){let i,o;for(let a=0;a<3;a++){let l=a+3;i=n[a],o=e[a],t[a]=i<o?i:o,i=n[l],o=e[l],t[l]=i>o?i:o}}function Rg(n,e,t){for(let i=0;i<3;i++){let o=e[n+2*i],a=e[n+2*i+1],l=o-a,c=o+a;l<t[i]&&(t[i]=l),c>t[i+3]&&(t[i+3]=c)}}function Ef(n){let e=n[3]-n[0],t=n[4]-n[1],i=n[5]-n[2];return 2*(e*t+t*i+i*e)}function fme(n,e){if(!n.index){let t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,o;t>65535?o=new Uint32Array(new i(4*t)):o=new Uint16Array(new i(2*t)),n.setIndex(new $e(o,1));for(let a=0;a<t;a++)o[a]=a}}function dme(n){if(!n.groups||!n.groups.length)return[{offset:0,count:n.index.count/3}];let e=[],t=new Set;for(let o of n.groups)t.add(o.start),t.add(o.start+o.count);let i=Array.from(t.values()).sort((o,a)=>o-a);for(let o=0;o<i.length-1;o++){let a=i[o],l=i[o+1];e.push({offset:a/3,count:(l-a)/3})}return e}function QL(n,e,t,i,o=null){let a=1/0,l=1/0,c=1/0,u=-1/0,h=-1/0,A=-1/0,f=1/0,d=1/0,p=1/0,m=-1/0,b=-1/0,g=-1/0,w=o!==null;for(let I=e*6,v=(e+t)*6;I<v;I+=6){let C=n[I+0],E=n[I+1],S=C-E,M=C+E;S<a&&(a=S),M>u&&(u=M),w&&C<f&&(f=C),w&&C>m&&(m=C);let _=n[I+2],T=n[I+3],D=_-T,R=_+T;D<l&&(l=D),R>h&&(h=R),w&&_<d&&(d=_),w&&_>b&&(b=_);let B=n[I+4],P=n[I+5],F=B-P,z=B+P;F<c&&(c=F),z>A&&(A=z),w&&B<p&&(p=B),w&&B>g&&(g=B)}i[0]=a,i[1]=l,i[2]=c,i[3]=u,i[4]=h,i[5]=A,w&&(o[0]=f,o[1]=d,o[2]=p,o[3]=m,o[4]=b,o[5]=g)}function pme(n,e,t,i){let o=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let A=e*6,f=(e+t)*6;A<f;A+=6){let d=n[A+0];d<o&&(o=d),d>c&&(c=d);let p=n[A+2];p<a&&(a=p),p>u&&(u=p);let m=n[A+4];m<l&&(l=m),m>h&&(h=m)}i[0]=o,i[1]=a,i[2]=l,i[3]=c,i[4]=u,i[5]=h}function mme(n,e,t,i,o){let a=t,l=t+i-1,c=o.pos,u=o.axis*2;for(;;){for(;a<=l&&e[a*6+u]<c;)a++;for(;a<=l&&e[l*6+u]>=c;)l--;if(a<l){for(let h=0;h<3;h++){let A=n[a*3+h];n[a*3+h]=n[l*3+h],n[l*3+h]=A;let f=e[a*6+h*2+0];e[a*6+h*2+0]=e[l*6+h*2+0],e[l*6+h*2+0]=f;let d=e[a*6+h*2+1];e[a*6+h*2+1]=e[l*6+h*2+1],e[l*6+h*2+1]=d}a++,l--}else return a}}var Ha=32,gme=(n,e)=>n.candidate-e.candidate,lc=new Array(Ha).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Rx=new Float32Array(6);function yme(n,e,t,i,o,a){let l=-1,c=0;if(a===0)l=NL(e),l!==-1&&(c=(e[l]+e[l+3])/2);else if(a===1)l=NL(n),l!==-1&&(c=vme(t,i,o,l));else if(a===2){let u=Ef(n),h=1.25*o,A=i*6,f=(i+o)*6;for(let d=0;d<3;d++){let p=e[d],g=(e[d+3]-p)/Ha;if(o<Ha/4){let w=[...lc];w.length=o;let I=0;for(let C=A;C<f;C+=6,I++){let E=w[I];E.candidate=t[C+2*d],E.count=0;let{bounds:S,leftCacheBounds:M,rightCacheBounds:_}=E;for(let T=0;T<3;T++)_[T]=1/0,_[T+3]=-1/0,M[T]=1/0,M[T+3]=-1/0,S[T]=1/0,S[T+3]=-1/0;Rg(C,t,S)}w.sort(gme);let v=o;for(let C=0;C<v;C++){let E=w[C];for(;C+1<v&&w[C+1].candidate===E.candidate;)w.splice(C+1,1),v--}for(let C=A;C<f;C+=6){let E=t[C+2*d];for(let S=0;S<v;S++){let M=w[S];E>=M.candidate?Rg(C,t,M.rightCacheBounds):(Rg(C,t,M.leftCacheBounds),M.count++)}}for(let C=0;C<v;C++){let E=w[C],S=E.count,M=o-E.count,_=E.leftCacheBounds,T=E.rightCacheBounds,D=0;S!==0&&(D=Ef(_)/u);let R=0;M!==0&&(R=Ef(T)/u);let B=1+1.25*(D*S+R*M);B<h&&(l=d,h=B,c=E.candidate)}}else{for(let v=0;v<Ha;v++){let C=lc[v];C.count=0,C.candidate=p+g+v*g;let E=C.bounds;for(let S=0;S<3;S++)E[S]=1/0,E[S+3]=-1/0}for(let v=A;v<f;v+=6){let S=~~((t[v+2*d]-p)/g);S>=Ha&&(S=Ha-1);let M=lc[S];M.count++,Rg(v,t,M.bounds)}let w=lc[Ha-1];FL(w.bounds,w.rightCacheBounds);for(let v=Ha-2;v>=0;v--){let C=lc[v],E=lc[v+1];UL(C.bounds,E.rightCacheBounds,C.rightCacheBounds)}let I=0;for(let v=0;v<Ha-1;v++){let C=lc[v],E=C.count,S=C.bounds,_=lc[v+1].rightCacheBounds;E!==0&&(I===0?FL(S,Rx):UL(S,Rx,Rx)),I+=E;let T=0,D=0;I!==0&&(T=Ef(Rx)/u);let R=o-I;R!==0&&(D=Ef(_)/u);let B=1+1.25*(T*I+D*R);B<h&&(l=d,h=B,c=C.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:l,pos:c}}function vme(n,e,t,i){let o=0;for(let a=e,l=e+t;a<l;a++)o+=n[a*6+i*2];return o/t}function wme(n,e){GW(e);let t=n.attributes.position,i=n.index.array,o=i.length/3,a=new Float32Array(o*6),l=t.normalized,c=t.array,u=t.offset||0,h=3;t.isInterleavedBufferAttribute&&(h=t.data.stride);let A=["getX","getY","getZ"];for(let f=0;f<o;f++){let d=f*3,p=f*6,m,b,g;l?(m=i[d+0],b=i[d+1],g=i[d+2]):(m=i[d+0]*h+u,b=i[d+1]*h+u,g=i[d+2]*h+u);for(let w=0;w<3;w++){let I,v,C;l?(I=t[A[w]](m),v=t[A[w]](b),C=t[A[w]](g)):(I=c[m+w],v=c[b+w],C=c[g+w]);let E=I;v<E&&(E=v),C<E&&(E=C);let S=I;v>S&&(S=v),C>S&&(S=C);let M=(S-E)/2,_=w*2;a[p+_+0]=E+M,a[p+_+1]=M+(Math.abs(E)+M)*QW,E<e[w]&&(e[w]=E),S>e[w+3]&&(e[w+3]=S)}}return a}function bme(n,e){function t(w){d&&d(w/p)}function i(w,I,v,C=null,E=0){if(!m&&E>=u&&(m=!0,h&&(console.warn(`MeshBVH: Max depth of ${u} reached when generating BVH. Consider increasing maxDepth.`),console.warn(n))),v<=A||E>=u)return t(I+v),w.offset=I,w.count=v,w;let S=yme(w.boundingData,C,l,I,v,f);if(S.axis===-1)return t(I+v),w.offset=I,w.count=v,w;let M=mme(c,l,I,v,S);if(M===I||M===I+v)t(I+v),w.offset=I,w.count=v;else{w.splitAxis=S.axis;let _=new Gu,T=I,D=M-I;w.left=_,_.boundingData=new Float32Array(6),QL(l,T,D,_.boundingData,a),i(_,T,D,a,E+1);let R=new Gu,B=M,P=v-D;w.right=R,R.boundingData=new Float32Array(6),QL(l,B,P,R.boundingData,a),i(R,B,P,a,E+1)}return w}fme(n,e);let o=new Float32Array(6),a=new Float32Array(6),l=wme(n,o),c=n.index.array,u=e.maxDepth,h=e.verbose,A=e.maxLeafTris,f=e.strategy,d=e.onProgress,p=n.index.count/3,m=!1,b=[],g=dme(n);if(g.length===1){let w=g[0],I=new Gu;I.boundingData=o,pme(l,w.offset,w.count,a),i(I,w.offset,w.count,a),b.push(I)}else for(let w of g){let I=new Gu;I.boundingData=new Float32Array(6),QL(l,w.offset,w.count,I.boundingData,a),i(I,w.offset,w.count,a),b.push(I)}return b}function VW(n,e){let t=bme(n,e),i,o,a,l=[],c=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let A=0;A<t.length;A++){let f=t[A],d=u(f),p=new c(32*d);i=new Float32Array(p),o=new Uint32Array(p),a=new Uint16Array(p),h(0,f),l.push(p)}return l;function u(A){return A.count?1:1+u(A.left)+u(A.right)}function h(A,f){let d=A/4,p=A/2,m=!!f.count,b=f.boundingData;for(let g=0;g<6;g++)i[d+g]=b[g];if(m){let g=f.offset,w=f.count;return o[d+6]=g,a[p+14]=w,a[p+15]=65535,A+32}else{let g=f.left,w=f.right,I=f.splitAxis,v;if(v=h(A+32,g),v/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return o[d+6]=v/4,v=h(v,w),o[d+7]=I,v}}}var Er=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,o=-1/0;for(let a=0,l=e.length;a<l;a++){let u=e[a][t];i=u<i?u:i,o=u>o?u:o}this.min=i,this.max=o}setFromPoints(e,t){let i=1/0,o=-1/0;for(let a=0,l=t.length;a<l;a++){let c=t[a],u=e.dot(c);i=u<i?u:i,o=u>o?u:o}this.min=i,this.max=o}isSeparated(e){return this.min>e.max||e.min>this.max}};Er.prototype.setFromBox=function(){let n=new U;return function(t,i){let o=i.min,a=i.max,l=1/0,c=-1/0;for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)for(let A=0;A<=1;A++){n.x=o.x*u+a.x*(1-u),n.y=o.y*h+a.y*(1-h),n.z=o.z*A+a.z*(1-A);let f=t.dot(n);l=Math.min(f,l),c=Math.max(f,c)}this.min=l,this.max=c}}();var HCe=function(){let n=new Er;return function(t,i){let o=t.points,a=t.satAxes,l=t.satBounds,c=i.points,u=i.satAxes,h=i.satBounds;for(let A=0;A<3;A++){let f=l[A],d=a[A];if(n.setFromPoints(d,c),f.isSeparated(n))return!1}for(let A=0;A<3;A++){let f=h[A],d=u[A];if(n.setFromPoints(d,o),f.isSeparated(n))return!1}}}();var xme=function(){let n=new U,e=new U,t=new U;return function(o,a,l){let c=o.start,u=n,h=a.start,A=e;t.subVectors(c,h),n.subVectors(o.end,o.start),e.subVectors(a.end,a.start);let f=t.dot(A),d=A.dot(u),p=A.dot(A),m=t.dot(u),g=u.dot(u)*p-d*d,w,I;g!==0?w=(f*d-m*p)/g:w=0,I=(f+w*d)/p,l.x=w,l.y=I}}(),Lg=function(){let n=new he,e=new U,t=new U;return function(o,a,l,c){xme(o,a,n);let u=n.x,h=n.y;if(u>=0&&u<=1&&h>=0&&h<=1){o.at(u,l),a.at(h,c);return}else if(u>=0&&u<=1){h<0?a.at(0,c):a.at(1,c),o.closestPointToPoint(c,!0,l);return}else if(h>=0&&h<=1){u<0?o.at(0,l):o.at(1,l),a.closestPointToPoint(l,!0,c);return}else{let A;u<0?A=o.start:A=o.end;let f;h<0?f=a.start:f=a.end;let d=e,p=t;if(o.closestPointToPoint(f,!0,e),a.closestPointToPoint(A,!0,t),d.distanceToSquared(f)<=p.distanceToSquared(A)){l.copy(d),c.copy(f);return}else{l.copy(A),c.copy(p);return}}}}(),WW=function(){let n=new U,e=new U,t=new On,i=new Rn;return function(a,l){let{radius:c,center:u}=a,{a:h,b:A,c:f}=l;if(i.start=h,i.end=A,i.closestPointToPoint(u,!0,n).distanceTo(u)<=c||(i.start=h,i.end=f,i.closestPointToPoint(u,!0,n).distanceTo(u)<=c)||(i.start=A,i.end=f,i.closestPointToPoint(u,!0,n).distanceTo(u)<=c))return!0;let b=l.getPlane(t);if(Math.abs(b.distanceToPoint(u))<=c){let w=b.projectPoint(u,e);if(l.containsPoint(w))return!0}return!1}}();var Cme=1e-15;function zL(n){return Math.abs(n)<Cme}var Xi=class extends Gt{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new U),this.satBounds=new Array(4).fill().map(()=>new Er),this.points=[this.a,this.b,this.c],this.sphere=new Vt,this.plane=new On,this.needsUpdate=!0}intersectsSphere(e){return WW(e,this)}update(){let e=this.a,t=this.b,i=this.c,o=this.points,a=this.satAxes,l=this.satBounds,c=a[0],u=l[0];this.getNormal(c),u.setFromPoints(c,o);let h=a[1],A=l[1];h.subVectors(e,t),A.setFromPoints(h,o);let f=a[2],d=l[2];f.subVectors(t,i),d.setFromPoints(f,o);let p=a[3],m=l[3];p.subVectors(i,e),m.setFromPoints(p,o),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(c,e),this.needsUpdate=!1}};Xi.prototype.closestPointToSegment=function(){let n=new U,e=new U,t=new Rn;return function(o,a=null,l=null){let{start:c,end:u}=o,h=this.points,A,f=1/0;for(let d=0;d<3;d++){let p=(d+1)%3;t.start.copy(h[d]),t.end.copy(h[p]),Lg(t,o,n,e),A=n.distanceToSquared(e),A<f&&(f=A,a&&a.copy(n),l&&l.copy(e))}return this.closestPointToPoint(c,n),A=c.distanceToSquared(n),A<f&&(f=A,a&&a.copy(n),l&&l.copy(c)),this.closestPointToPoint(u,n),A=u.distanceToSquared(n),A<f&&(f=A,a&&a.copy(n),l&&l.copy(u)),Math.sqrt(f)}}();Xi.prototype.intersectsTriangle=function(){let n=new Xi,e=new Array(3),t=new Array(3),i=new Er,o=new Er,a=new U,l=new U,c=new U,u=new U,h=new U,A=new Rn,f=new Rn,d=new Rn,p=new U;function m(b,g,w){let I=b.points,v=0,C=-1;for(let E=0;E<3;E++){let{start:S,end:M}=A;S.copy(I[E]),M.copy(I[(E+1)%3]),A.delta(l);let _=zL(g.distanceToPoint(S));if(zL(g.normal.dot(l))&&_){w.copy(A),v=2;break}let T=g.intersectLine(A,p);if(!T&&_&&p.copy(S),(T||_)&&!zL(p.distanceTo(M))){if(v<=1)(v===1?w.start:w.end).copy(p),_&&(C=v);else if(v>=2){(C===1?w.start:w.end).copy(p),v=2;break}if(v++,v===2&&C===-1)break}}return v}return function(g,w=null,I=!1){this.needsUpdate&&this.update(),g.isExtendedTriangle?g.needsUpdate&&g.update():(n.copy(g),n.update(),g=n);let v=this.plane,C=g.plane;if(Math.abs(v.normal.dot(C.normal))>1-1e-10){let E=this.satBounds,S=this.satAxes;t[0]=g.a,t[1]=g.b,t[2]=g.c;for(let T=0;T<4;T++){let D=E[T],R=S[T];if(i.setFromPoints(R,t),D.isSeparated(i))return!1}let M=g.satBounds,_=g.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let T=0;T<4;T++){let D=M[T],R=_[T];if(i.setFromPoints(R,e),D.isSeparated(i))return!1}for(let T=0;T<4;T++){let D=S[T];for(let R=0;R<4;R++){let B=_[R];if(a.crossVectors(D,B),i.setFromPoints(a,e),o.setFromPoints(a,t),i.isSeparated(o))return!1}}return w&&(I||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),w.start.set(0,0,0),w.end.set(0,0,0)),!0}else{let E=m(this,C,f);if(E===1&&g.containsPoint(f.end))return w&&(w.start.copy(f.end),w.end.copy(f.end)),!0;if(E!==2)return!1;let S=m(g,v,d);if(S===1&&this.containsPoint(d.end))return w&&(w.start.copy(d.end),w.end.copy(d.end)),!0;if(S!==2)return!1;if(f.delta(c),d.delta(u),c.dot(u)<0){let P=d.start;d.start=d.end,d.end=P}let M=f.start.dot(c),_=f.end.dot(c),T=d.start.dot(c),D=d.end.dot(c),R=_<T,B=M<D;return M!==D&&T!==_&&R===B?!1:(w&&(h.subVectors(f.start,d.start),h.dot(c)>0?w.start.copy(f.start):w.start.copy(d.start),h.subVectors(f.end,d.end),h.dot(c)<0?w.end.copy(f.end):w.end.copy(d.end)),!0)}}}();Xi.prototype.distanceToPoint=function(){let n=new U;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Xi.prototype.distanceToTriangle=function(){let n=new U,e=new U,t=["a","b","c"],i=new Rn,o=new Rn;return function(l,c=null,u=null){let h=c||u?i:null;if(this.intersectsTriangle(l,h))return(c||u)&&(c&&h.getCenter(c),u&&h.getCenter(u)),0;let A=1/0;for(let f=0;f<3;f++){let d,p=t[f],m=l[p];this.closestPointToPoint(m,n),d=m.distanceToSquared(n),d<A&&(A=d,c&&c.copy(n),u&&u.copy(m));let b=this[p];l.closestPointToPoint(b,n),d=b.distanceToSquared(n),d<A&&(A=d,c&&c.copy(b),u&&u.copy(n))}for(let f=0;f<3;f++){let d=t[f],p=t[(f+1)%3];i.set(this[d],this[p]);for(let m=0;m<3;m++){let b=t[m],g=t[(m+1)%3];o.set(l[b],l[g]),Lg(i,o,n,e);let w=n.distanceToSquared(e);w<A&&(A=w,c&&c.copy(n),u&&u.copy(e))}}return Math.sqrt(A)}}();var Ir=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new U,this.max=new U,this.matrix=new ke,this.invMatrix=new ke,this.points=new Array(8).fill().map(()=>new U),this.satAxes=new Array(3).fill().map(()=>new U),this.satBounds=new Array(3).fill().map(()=>new Er),this.alignedSatBounds=new Array(3).fill().map(()=>new Er),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Ir.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,o=this.points;for(let h=0;h<=1;h++)for(let A=0;A<=1;A++)for(let f=0;f<=1;f++){let d=1*h|2*A|4*f,p=o[d];p.x=h?i.x:t.x,p.y=A?i.y:t.y,p.z=f?i.z:t.z,p.applyMatrix4(e)}let a=this.satBounds,l=this.satAxes,c=o[0];for(let h=0;h<3;h++){let A=l[h],f=a[h],d=1<<h,p=o[d];A.subVectors(c,p),f.setFromPoints(A,o)}let u=this.alignedSatBounds;u[0].setFromPointsField(o,"x"),u[1].setFromPointsField(o,"y"),u[2].setFromPointsField(o,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ir.prototype.intersectsBox=function(){let n=new Er;return function(t){this.needsUpdate&&this.update();let i=t.min,o=t.max,a=this.satBounds,l=this.satAxes,c=this.alignedSatBounds;if(n.min=i.x,n.max=o.x,c[0].isSeparated(n)||(n.min=i.y,n.max=o.y,c[1].isSeparated(n))||(n.min=i.z,n.max=o.z,c[2].isSeparated(n)))return!1;for(let u=0;u<3;u++){let h=l[u],A=a[u];if(n.setFromBox(h,t),A.isSeparated(n))return!1}return!0}}();Ir.prototype.intersectsTriangle=function(){let n=new Xi,e=new Array(3),t=new Er,i=new Er,o=new U;return function(l){this.needsUpdate&&this.update(),l.isExtendedTriangle?l.needsUpdate&&l.update():(n.copy(l),n.update(),l=n);let c=this.satBounds,u=this.satAxes;e[0]=l.a,e[1]=l.b,e[2]=l.c;for(let d=0;d<3;d++){let p=c[d],m=u[d];if(t.setFromPoints(m,e),p.isSeparated(t))return!1}let h=l.satBounds,A=l.satAxes,f=this.points;for(let d=0;d<3;d++){let p=h[d],m=A[d];if(t.setFromPoints(m,f),p.isSeparated(t))return!1}for(let d=0;d<3;d++){let p=u[d];for(let m=0;m<4;m++){let b=A[m];if(o.crossVectors(p,b),t.setFromPoints(o,e),i.setFromPoints(o,f),t.isSeparated(i))return!1}}return!0}}();Ir.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ir.prototype.distanceToPoint=function(){let n=new U;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Ir.prototype.distanceToBox=function(){let n=["x","y","z"],e=new Array(12).fill().map(()=>new Rn),t=new Array(12).fill().map(()=>new Rn),i=new U,o=new U;return function(l,c=0,u=null,h=null){if(this.needsUpdate&&this.update(),this.intersectsBox(l))return(u||h)&&(l.getCenter(o),this.closestPointToPoint(o,i),l.closestPointToPoint(i,o),u&&u.copy(i),h&&h.copy(o)),0;let A=c*c,f=l.min,d=l.max,p=this.points,m=1/0;for(let g=0;g<8;g++){let w=p[g];o.copy(w).clamp(f,d);let I=w.distanceToSquared(o);if(I<m&&(m=I,u&&u.copy(w),h&&h.copy(o),I<A))return Math.sqrt(I)}let b=0;for(let g=0;g<3;g++)for(let w=0;w<=1;w++)for(let I=0;I<=1;I++){let v=(g+1)%3,C=(g+2)%3,E=w<<v|I<<C,S=1<<g|w<<v|I<<C,M=p[E],_=p[S];e[b].set(M,_);let D=n[g],R=n[v],B=n[C],P=t[b],F=P.start,z=P.end;F[D]=f[D],F[R]=w?f[R]:d[R],F[B]=I?f[B]:d[R],z[D]=d[D],z[R]=w?f[R]:d[R],z[B]=I?f[B]:d[R],b++}for(let g=0;g<=1;g++)for(let w=0;w<=1;w++)for(let I=0;I<=1;I++){o.x=g?d.x:f.x,o.y=w?d.y:f.y,o.z=I?d.z:f.z,this.closestPointToPoint(o,i);let v=o.distanceToSquared(i);if(v<m&&(m=v,u&&u.copy(i),h&&h.copy(o),v<A))return Math.sqrt(v)}for(let g=0;g<12;g++){let w=e[g];for(let I=0;I<12;I++){let v=t[I];Lg(w,v,i,o);let C=i.distanceToSquared(o);if(C<m&&(m=C,u&&u.copy(i),h&&h.copy(o),C<A))return Math.sqrt(C)}}return Math.sqrt(m)}}();var If=new U,Mf=new U,Tf=new U,Bx=new he,kx=new he,Px=new he,XW=new U,YW=new U,ZW=new U,Nx=new U;function Sme(n,e,t,i,o,a){let l;return a===Gn?l=n.intersectTriangle(i,t,e,!0,o):l=n.intersectTriangle(e,t,i,a!==Pt,o),l===null?null:{distance:n.origin.distanceTo(o),point:o.clone()}}function Eme(n,e,t,i,o,a,l,c,u){If.fromBufferAttribute(e,a),Mf.fromBufferAttribute(e,l),Tf.fromBufferAttribute(e,c);let h=Sme(n,If,Mf,Tf,Nx,u);if(h){i&&(Bx.fromBufferAttribute(i,a),kx.fromBufferAttribute(i,l),Px.fromBufferAttribute(i,c),h.uv=Gt.getInterpolation(Nx,If,Mf,Tf,Bx,kx,Px,new he)),o&&(Bx.fromBufferAttribute(o,a),kx.fromBufferAttribute(o,l),Px.fromBufferAttribute(o,c),h.uv1=Gt.getInterpolation(Nx,If,Mf,Tf,Bx,kx,Px,new he)),t&&(XW.fromBufferAttribute(t,a),YW.fromBufferAttribute(t,l),ZW.fromBufferAttribute(t,c),h.normal=Gt.getInterpolation(Nx,If,Mf,Tf,XW,YW,ZW,new U),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));let A={a,b:l,c,normal:new U,materialIndex:0};Gt.getNormal(If,Mf,Tf,A.normal),h.face=A,h.faceIndex=a}return h}function HL(n,e,t,i,o){let a=i*3,l=n.index.getX(a),c=n.index.getX(a+1),u=n.index.getX(a+2),{position:h,normal:A,uv:f,uv1:d}=n.attributes,p=Eme(t,h,A,f,d,l,c,u,e);return p?(p.faceIndex=i,o&&o.push(p),p):null}function KW(n,e,t,i,o,a){for(let l=i,c=i+o;l<c;l++)HL(n,e,t,l,a)}function jW(n,e,t,i,o){let a=1/0,l=null;for(let c=i,u=i+o;c<u;c++){let h=HL(n,e,t,c);h&&h.distance<a&&(l=h,a=h.distance)}return l}function VL(n,e,t){return n===null||(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n.distance<t.near||n.distance>t.far)?null:n}function Ts(n,e,t,i){let o=n.a,a=n.b,l=n.c,c=e,u=e+1,h=e+2;t&&(c=t.getX(e),u=t.getX(e+1),h=t.getX(e+2)),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c),a.x=i.getX(u),a.y=i.getY(u),a.z=i.getZ(u),l.x=i.getX(h),l.y=i.getY(h),l.z=i.getZ(h)}function WL(n,e,t,i,o,a,l){let c=t.index,u=t.attributes.position;for(let h=n,A=e+n;h<A;h++)if(Ts(l,h*3,c,u),l.needsUpdate=!0,i(l,h,o,a))return!0;return!1}var _f=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Va(n,e){return e[n+15]===65535}function zu(n,e){return e[n+6]}function Df(n,e){return e[n+14]}function Rf(n){return n+8}function Lf(n,e){return e[n+6]}function JW(n,e){return e[n+7]}var Bf=new Ht,Ux=new U,Mme=["x","y","z"];function Ox(n,e,t,i,o){let a=n*2,l=kf,c=cc,u=uc;if(Va(a,c)){let A=zu(n,u),f=Df(a,c);KW(e,t,i,A,f,o)}else{let A=Rf(n);Gx(A,l,i,Ux)&&Ox(A,e,t,i,o);let f=Lf(n,u);Gx(f,l,i,Ux)&&Ox(f,e,t,i,o)}}function Qx(n,e,t,i){let o=n*2,a=kf,l=cc,c=uc;if(Va(o,l)){let h=zu(n,c),A=Df(o,l);return jW(e,t,i,h,A)}else{let h=JW(n,c),A=Mme[h],d=i.direction[A]>=0,p,m;d?(p=Rf(n),m=Lf(n,c)):(p=Lf(n,c),m=Rf(n));let g=Gx(p,a,i,Ux)?Qx(p,e,t,i):null;if(g){let v=g.point[A];if(d?v<=a[m+h]:v>=a[m+h+3])return g}let I=Gx(m,a,i,Ux)?Qx(m,e,t,i):null;return g&&I?g.distance<=I.distance?g:I:g||I||null}}var qW=function(){let n,e,t=[],i=new _f(()=>new Ht);return function(...l){n=i.getPrimitive(),e=i.getPrimitive(),t.push(n,e);let c=o(...l);i.releasePrimitive(n),i.releasePrimitive(e),t.pop(),t.pop();let u=t.length;return u>0&&(e=t[u-1],n=t[u-2]),c};function o(a,l,c,u,h=null,A=0,f=0){function d(v){let C=v*2,E=cc,S=uc;for(;!Va(C,E);)v=Rf(v),C=v*2;return zu(v,S)}function p(v){let C=v*2,E=cc,S=uc;for(;!Va(C,E);)v=Lf(v,S),C=v*2;return zu(v,S)+Df(C,E)}let m=a*2,b=kf,g=cc,w=uc;if(Va(m,g)){let v=zu(a,w),C=Df(m,g);return Ms(a,b,n),u(v,C,!1,f,A+a,n)}else{let v=Rf(a),C=Lf(a,w),E=v,S=C,M,_,T,D;if(h&&(T=n,D=e,Ms(E,b,T),Ms(S,b,D),M=h(T),_=h(D),_<M)){E=C,S=v;let V=M;M=_,_=V,T=D}T||(T=n,Ms(E,b,T));let R=Va(E*2,g),B=c(T,R,M,f+1,A+E),P;if(B===2){let V=d(E),O=p(E)-V;P=u(V,O,!0,f+1,A+E,T)}else P=B&&o(E,l,c,u,h,A,f+1);if(P)return!0;D=e,Ms(S,b,D);let F=Va(S*2,g),z=c(D,F,_,f+1,A+S),Q;if(z===2){let V=d(S),O=p(S)-V;Q=u(V,O,!0,f+1,A+S,D)}else Q=z&&o(S,l,c,u,h,A,f+1);return!!Q}}}(),$W=function(){let n=new Xi,e=new Xi,t=new ke,i=new Ir,o=new Ir;return function a(l,c,u,h,A=null){let f=l*2,d=kf,p=cc,m=uc;if(A===null&&(u.boundingBox||u.computeBoundingBox(),i.set(u.boundingBox.min,u.boundingBox.max,h),A=i),Va(f,p)){let g=c,w=g.index,I=g.attributes.position,v=u.index,C=u.attributes.position,E=zu(l,m),S=Df(f,p);if(t.copy(h).invert(),u.boundsTree)return Ms(l,d,o),o.matrix.copy(t),o.needsUpdate=!0,u.boundsTree.shapecast({intersectsBounds:_=>o.intersectsBox(_),intersectsTriangle:_=>{_.a.applyMatrix4(h),_.b.applyMatrix4(h),_.c.applyMatrix4(h),_.needsUpdate=!0;for(let T=E*3,D=(S+E)*3;T<D;T+=3)if(Ts(e,T,w,I),e.needsUpdate=!0,_.intersectsTriangle(e))return!0;return!1}});for(let M=E*3,_=S+E*3;M<_;M+=3){Ts(n,M,w,I),n.a.applyMatrix4(t),n.b.applyMatrix4(t),n.c.applyMatrix4(t),n.needsUpdate=!0;for(let T=0,D=v.count;T<D;T+=3)if(Ts(e,T,v,C),e.needsUpdate=!0,n.intersectsTriangle(e))return!0}}else{let g=l+8,w=m[l+6];return Ms(g,d,Bf),!!(A.intersectsBox(Bf)&&a(g,c,u,h,A)||(Ms(w,d,Bf),A.intersectsBox(Bf)&&a(w,c,u,h,A)))}}}();function Gx(n,e,t,i){return Ms(n,e,Bf),t.intersectBox(Bf,i)}var XL=[],Fx,kf,cc,uc;function Pf(n){Fx&&XL.push(Fx),Fx=n,kf=new Float32Array(n),cc=new Uint16Array(n),uc=new Uint32Array(n)}function Bg(){Fx=null,kf=null,cc=null,uc=null,XL.length&&Pf(XL.pop())}var YL=Symbol("skip tree generation"),ZL=new Ht,KL=new Ht,Nf=new ke,Hu=new Ir,kg=new Ir,Pg=new U,zx=new U,Tme=new U,_me=new U,Dme=new U,e8=new Ht,Zo=new _f(()=>new Xi),Vu=class n{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),n.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,o=e._roots,a=i.getIndex(),l;return t.cloneBuffers?l={roots:o.map(c=>c.slice()),index:a.array.slice()}:l={roots:o,index:a.array},l}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),n.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:o,roots:a}=e,l=new n(t,{...i,[YL]:!0});if(l._roots=a,i.setIndex){let c=t.getIndex();if(c===null){let u=new $e(e.index,1,!1);t.setIndex(u)}else c.array!==o&&(c.array.set(o),c.needsUpdate=!0)}return l}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[YL]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[YL]||(this._roots=VW(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Ht))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,o=t.attributes.position,a,l,c,u,h=0,A=this._roots;for(let d=0,p=A.length;d<p;d++)a=A[d],l=new Uint32Array(a),c=new Uint16Array(a),u=new Float32Array(a),f(0,h),h+=a.byteLength;function f(d,p,m=!1){let b=d*2;if(c[b+15]===65535){let w=l[d+6],I=c[b+14],v=1/0,C=1/0,E=1/0,S=-1/0,M=-1/0,_=-1/0;for(let T=3*w,D=3*(w+I);T<D;T++){let R=i[T],B=o.getX(R),P=o.getY(R),F=o.getZ(R);B<v&&(v=B),B>S&&(S=B),P<C&&(C=P),P>M&&(M=P),F<E&&(E=F),F>_&&(_=F)}return u[d+0]!==v||u[d+1]!==C||u[d+2]!==E||u[d+3]!==S||u[d+4]!==M||u[d+5]!==_?(u[d+0]=v,u[d+1]=C,u[d+2]=E,u[d+3]=S,u[d+4]=M,u[d+5]=_,!0):!1}else{let w=d+8,I=l[d+6],v=w+p,C=I+p,E=m,S=!1,M=!1;e?E||(S=e.has(v),M=e.has(C),E=!S&&!M):(S=!0,M=!0);let _=E||S,T=E||M,D=!1;_&&(D=f(w,p,E));let R=!1;T&&(R=f(I,p,E));let B=D||R;if(B)for(let P=0;P<3;P++){let F=w+P,z=I+P,Q=u[F],V=u[F+3],G=u[z],O=u[z+3];u[d+P]=Q<G?Q:G,u[d+P+3]=V>O?V:O}return B}}}traverse(e,t=0){let i=this._roots[t],o=new Uint32Array(i),a=new Uint16Array(i);l(0);function l(c,u=0){let h=c*2,A=a[h+15]===65535;if(A){let f=o[c+6],d=a[h+14];e(u,A,new Float32Array(i,c*4,6),f,d)}else{let f=c+32/4,d=o[c+6],p=o[c+7];e(u,A,new Float32Array(i,c*4,6),p)||(l(f,u+1),l(d,u+1))}}}raycast(e,t=Ai){let i=this._roots,o=this.geometry,a=[],l=t.isMaterial,c=Array.isArray(t),u=o.groups,h=l?t.side:t;for(let A=0,f=i.length;A<f;A++){let d=c?t[u[A].materialIndex].side:h,p=a.length;if(Pf(i[A]),Ox(0,o,d,e,a),Bg(),c){let m=u[A].materialIndex;for(let b=p,g=a.length;b<g;b++)a[b].face.materialIndex=m}}return a}raycastFirst(e,t=Ai){let i=this._roots,o=this.geometry,a=t.isMaterial,l=Array.isArray(t),c=null,u=o.groups,h=a?t.side:t;for(let A=0,f=i.length;A<f;A++){let d=l?t[u[A].materialIndex].side:h;Pf(i[A]);let p=Qx(0,o,d,e);Bg(),p!=null&&(c==null||p.distance<c.distance)&&(c=p,l&&(p.face.materialIndex=u[A].materialIndex))}return c}intersectsGeometry(e,t){let i=this.geometry,o=!1;for(let a of this._roots)if(Pf(a),o=$W(0,i,e,t),Bg(),o)break;return o}shapecast(e,t,i){let o=this.geometry;if(e instanceof Function){if(t){let d=t;t=(p,m,b,g)=>{let w=m*3;return d(p,w,w+1,w+2,b,g)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let a=Zo.getPrimitive(),{boundsTraverseOrder:l,intersectsBounds:c,intersectsRange:u,intersectsTriangle:h}=e;if(u&&h){let d=u;u=(p,m,b,g,w)=>d(p,m,b,g,w)?!0:WL(p,m,o,h,b,g,a)}else u||(h?u=(d,p,m,b)=>WL(d,p,o,h,m,b,a):u=(d,p,m)=>m);let A=!1,f=0;for(let d of this._roots){if(Pf(d),A=qW(0,o,c,u,l,f),Bg(),A)break;f+=d.byteLength}return Zo.releasePrimitive(a),A}bvhcast(e,t,i){let{intersectsRanges:o,intersectsTriangles:a}=i,l=this.geometry.index,c=this.geometry.attributes.position,u=e.geometry.index,h=e.geometry.attributes.position;Nf.copy(t).invert();let A=Zo.getPrimitive(),f=Zo.getPrimitive();if(a){let p=function(m,b,g,w,I,v,C,E){for(let S=g,M=g+w;S<M;S++){Ts(f,S*3,u,h),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let _=m,T=m+b;_<T;_++)if(Ts(A,_*3,l,c),A.needsUpdate=!0,a(A,f,_,S,I,v,C,E))return!0}return!1};if(o){let m=o;o=function(b,g,w,I,v,C,E,S){return m(b,g,w,I,v,C,E,S)?!0:p(b,g,w,I,v,C,E,S)}}else o=p}e.getBoundingBox(KL),KL.applyMatrix4(t);let d=this.shapecast({intersectsBounds:p=>KL.intersectsBox(p),intersectsRange:(p,m,b,g,w,I)=>(ZL.copy(I),ZL.applyMatrix4(Nf),e.shapecast({intersectsBounds:v=>ZL.intersectsBox(v),intersectsRange:(v,C,E,S,M)=>o(p,m,v,C,g,w,S,M)}))});return Zo.releasePrimitive(A),Zo.releasePrimitive(f),d}intersectsBox(e,t){return Hu.set(e.min,e.max,t),Hu.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Hu.intersectsBox(i),intersectsTriangle:i=>Hu.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},o={},a=0,l=1/0){e.boundingBox||e.computeBoundingBox(),Hu.set(e.boundingBox.min,e.boundingBox.max,t),Hu.needsUpdate=!0;let c=this.geometry,u=c.attributes.position,h=c.index,A=e.attributes.position,f=e.index,d=Zo.getPrimitive(),p=Zo.getPrimitive(),m=zx,b=Tme,g=null,w=null;o&&(g=_me,w=Dme);let I=1/0,v=null,C=null;return Nf.copy(t).invert(),kg.matrix.copy(Nf),this.shapecast({boundsTraverseOrder:E=>Hu.distanceToBox(E),intersectsBounds:(E,S,M)=>M<I&&M<l?(S&&(kg.min.copy(E.min),kg.max.copy(E.max),kg.needsUpdate=!0),!0):!1,intersectsRange:(E,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:M=>kg.distanceToBox(M),intersectsBounds:(M,_,T)=>T<I&&T<l,intersectsRange:(M,_)=>{for(let T=M*3,D=(M+_)*3;T<D;T+=3){Ts(p,T,f,A),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let R=E*3,B=(E+S)*3;R<B;R+=3){Ts(d,R,h,u),d.needsUpdate=!0;let P=d.distanceToTriangle(p,m,g);if(P<I&&(b.copy(m),w&&w.copy(g),I=P,v=R/3,C=T/3),P<a)return!0}}}});{let M=f?f.count:A.count;for(let _=0,T=M;_<T;_+=3){Ts(p,_,f,A),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let D=E*3,R=(E+S)*3;D<R;D+=3){Ts(d,D,h,u),d.needsUpdate=!0;let B=d.distanceToTriangle(p,m,g);if(B<I&&(b.copy(m),w&&w.copy(g),I=B,v=D/3,C=_/3),B<a)return!0}}}}}),Zo.releasePrimitive(d),Zo.releasePrimitive(p),I===1/0?null:(i.point?i.point.copy(b):i.point=b.clone(),i.distance=I,i.faceIndex=v,o&&(o.point?o.point.copy(w):o.point=w.clone(),o.point.applyMatrix4(Nf),b.applyMatrix4(Nf),o.distance=b.sub(o.point).length(),o.faceIndex=C),i)}closestPointToPoint(e,t={},i=0,o=1/0){let a=i*i,l=o*o,c=1/0,u=null;if(this.shapecast({boundsTraverseOrder:A=>(Pg.copy(e).clamp(A.min,A.max),Pg.distanceToSquared(e)),intersectsBounds:(A,f,d)=>d<c&&d<l,intersectsTriangle:(A,f)=>{A.closestPointToPoint(e,Pg);let d=e.distanceToSquared(Pg);return d<c&&(zx.copy(Pg),c=d,u=f),d<a}}),c===1/0)return null;let h=Math.sqrt(c);return t.point?t.point.copy(zx):t.point=zx.clone(),t.distance=h,t.faceIndex=u,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{Ms(0,new Float32Array(i),e8),e.union(e8)}),e}};var jL=new cr,t8=new ke,Rme=He.prototype.raycast;function JL(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;t8.copy(this.matrixWorld).invert(),jL.copy(n.ray).applyMatrix4(t8);let t=this.geometry.boundsTree;if(n.firstHitOnly===!0){let i=VL(t.raycastFirst(jL,this.material),this,n);i&&e.push(i)}else{let i=t.raycast(jL,this.material);for(let o=0,a=i.length;o<a;o++){let l=VL(i[o],this,n);l&&e.push(l)}}}else Rme.call(this,n,e)}function qL(n){return this.boundsTree=new Vu(this,n),this.boundsTree}function $L(){this.boundsTree=null}var Lme=1.0000001000000001e6;function eB(n){return~~(n*Lme)}function tB(n){return`${eB(n.x)},${eB(n.y)},${eB(n.z)}`}var nB=[new U,new U,new U],Ng=class{constructor(e=null){this.data=null,this.unmatchedEdges=null,this.matchedEdges=null,this.useDrawRange=!0,e&&this.updateFrom(e)}getSiblingTriangleIndex(e,t){let i=this.data[e*3+t];return i===-1?-1:~~(i/3)}getSiblingEdgeIndex(e,t){let i=this.data[e*3+t];return i===-1?-1:i%3}updateFrom(e){let t=new Map,{attributes:i}=e,o=e.index,a=i.position,l=o?o.count/3:a.count/3,c=l,u=0;this.useDrawRange&&(u=e.drawRange.start,e.drawRange.count!==1/0&&(l=~~(e.drawRange.count/3)));let h=this.data;(!h||h.length<3*c)&&(h=new Int32Array(3*c)),h.fill(-1);let A=0,f=0;for(let d=0;d<l;d++){let p=3*d+u;for(let m=0;m<3;m++){let b=p+m;o&&(b=o.getX(b)),nB[m].fromBufferAttribute(a,b)}for(let m=0;m<3;m++){let b=(m+1)%3,g=nB[m],w=nB[b],I=tB(g),v=tB(w),C=`${v}_${I}`;if(t.has(C)){let E=t.get(C);h[p+m]=E,h[E]=p+m,t.delete(C),A--,f++}else{let E=`${I}_${v}`;t.set(E,p+m),A++}}}this.matchedEdges=f,this.unmatchedEdges=A,this.data=h}};function Hx(){return typeof SharedArrayBuffer<"u"}function n8(n){if(n.buffer instanceof SharedArrayBuffer)return n;let e=n.constructor,t=n.buffer,i=new SharedArrayBuffer(t.byteLength),o=new Uint8Array(t);return new Uint8Array(i).set(o,0),new e(i)}var _s=class extends He{constructor(...e){super(...e),this.isBrush=!0,this._previousMatrix=new ke,this._previousMatrix.elements.fill(0)}markUpdated(){this._previousMatrix.copy(this.matrix)}isDirty(){let{matrix:e,_previousMatrix:t}=this,i=e.elements,o=t.elements;for(let a=0;a<16;a++)if(i[a]!==o[a])return!0;return!1}prepareGeometry(){let e=this.geometry,t=e.attributes;if(Hx())for(let i in t){let o=t[i];if(o.isInterleavedBufferAttribute)throw new Error("Brush: InterleavedBufferAttributes are not supported.");o.array=n8(o.array)}if(e.boundsTree||(e.boundsTree=new Vu(e,{maxLeafTris:3}),e.halfEdges&&e.halfEdges.updateFrom(e)),e.halfEdges||(e.halfEdges=new Ng(e)),!e.groupIndices){let i=e.index.count/3,o=new Uint16Array(i),a=e.groups;for(let l=0,c=a.length;l<c;l++){let{start:u,count:h}=a[l];for(let A=u/3,f=(u+h)/3;A<f;A++)o[A]=l}e.groupIndices=o}}disposeCacheData(){let{geometry:e}=this;e.halfEdges=null,e.boundsTree=null,e.groupIndices=null}};var Fg=class{constructor(){this.intersectionSet={},this.ids=[]}add(e,t){let{intersectionSet:i,ids:o}=this;i[e]||(i[e]=[],o.push(e)),i[e].push(t)}};var Vx=0,Wx=1,Bme=3,kme=4;var hc=new cr,i8=new ke,rr=new Gt,Wa=new U,r8=new pt,s8=new pt,o8=new pt,iB=new pt,Xx=new pt,Yx=new pt,rB=new Rn,sB=new U,oB=1e-8,Pme=1e-15,Kx=-1,jx=1,a8=-2,cB=2,Ug=0,Zx=1,qx=2,Jx=null;function uB(n){Jx=n}function hB(n,e){function t(){return Math.random()-.5}n.getNormal(sB),hc.direction.copy(sB),n.getMidpoint(hc.origin);let i=3,o=0,a=1/0;for(let l=0;l<i;l++){hc.direction.x+=t()*oB,hc.direction.y+=t()*oB,hc.direction.z+=t()*oB,hc.direction.multiplyScalar(-1);let c=e.raycastFirst(hc,Pt);if(!!(c&&hc.direction.dot(c.face.normal)>0)&&o++,c!==null&&(a=Math.min(a,c.distance)),a<=Pme)return c.face.normal.dot(sB)>0?cB:a8;if(o/i>.5||(l-o+1)/i>.5)break}return o/i>.5?Kx:jx}function l8(n,e){let t=new Fg,i=new Fg;return i8.copy(n.matrixWorld).invert().multiply(e.matrixWorld),n.geometry.boundsTree.bvhcast(e.geometry.boundsTree,i8,{intersectsTriangles(o,a,l,c){if(o.intersectsTriangle(a,rB,!0)){if(rB.distanceSq()===0&&o.plane.normal.dot(a.plane.normal)<1-1e-10)return!1;t.add(l,c),i.add(c,l),Jx&&(Jx.addEdge(rB),Jx.addIntersectingTriangles(l,o,c,a))}return!1}}),{aIntersections:t,bIntersections:i}}function c8(n,e,t,i,o,a,l=!1){let c=t.attributes,u=t.index,h=n*3,A=u.getX(h+0),f=u.getX(h+1),d=u.getX(h+2);for(let p in a){let m=c[p],b=a[p];if(!(p in c))throw new Error(`CSG Operations: Attribute ${p} not available on geometry.`);let g=m.itemSize;p==="position"?(rr.a.fromBufferAttribute(m,A).applyMatrix4(i),rr.b.fromBufferAttribute(m,f).applyMatrix4(i),rr.c.fromBufferAttribute(m,d).applyMatrix4(i),aB(rr.a,rr.b,rr.c,e,3,b,l)):p==="normal"?(rr.a.fromBufferAttribute(m,A).applyNormalMatrix(o),rr.b.fromBufferAttribute(m,f).applyNormalMatrix(o),rr.c.fromBufferAttribute(m,d).applyNormalMatrix(o),l&&(rr.a.multiplyScalar(-1),rr.b.multiplyScalar(-1),rr.c.multiplyScalar(-1)),aB(rr.a,rr.b,rr.c,e,3,b,l,!0)):(r8.fromBufferAttribute(m,A),s8.fromBufferAttribute(m,f),o8.fromBufferAttribute(m,d),aB(r8,s8,o8,e,g,b,l))}}function u8(n,e,t,i,o,a,l,c=!1){lB(n,i,o,a,l,c),lB(c?t:e,i,o,a,l,c),lB(c?e:t,i,o,a,l,c)}function AB(n,e,t=!1){switch(n){case 0:if(e===jx||e===cB&&!t)return Zx;break;case 1:if(t){if(e===Kx)return Ug}else if(e===jx||e===a8)return Zx;break;case 3:if(e===Kx)return Ug;if(e===jx)return Zx;break;case 4:if(e===Kx||e===cB&&!t)return Zx;break;default:throw new Error(`Unrecognized CSG operation enum "${n}".`)}return qx}function aB(n,e,t,i,o,a,l=!1,c=!1){let u=h=>{a.push(h.x),o>1&&a.push(h.y),o>2&&a.push(h.z),o>3&&a.push(h.w)};iB.set(0,0,0,0).addScaledVector(n,i.a.x).addScaledVector(e,i.a.y).addScaledVector(t,i.a.z),Xx.set(0,0,0,0).addScaledVector(n,i.b.x).addScaledVector(e,i.b.y).addScaledVector(t,i.b.z),Yx.set(0,0,0,0).addScaledVector(n,i.c.x).addScaledVector(e,i.c.y).addScaledVector(t,i.c.z),c&&(iB.normalize(),Xx.normalize(),Yx.normalize()),u(iB),l?(u(Yx),u(Xx)):(u(Xx),u(Yx))}function lB(n,e,t,i,o,a=!1){for(let l in o){let c=e[l],u=o[l];if(!(l in e))throw new Error(`CSG Operations: Attribute ${l} no available on geometry.`);let h=c.itemSize;l==="position"?(Wa.fromBufferAttribute(c,n).applyMatrix4(t),u.push(Wa.x,Wa.y,Wa.z)):l==="normal"?(Wa.fromBufferAttribute(c,n).applyNormalMatrix(i),a&&Wa.multiplyScalar(-1),u.push(Wa.x,Wa.y,Wa.z)):(u.push(c.getX(n)),h>1&&u.push(c.getY(n)),h>2&&u.push(c.getZ(n)),h>3&&u.push(c.getW(n)))}}var Of=1e-14,Ff=1e-10,Xa=new Rn,Zn=new Rn,Ya=new U,h8=new U,Og=new On,Nme=new Xi;function Uf(n){return n.a.distanceToSquared(n.b)<Of||n.a.distanceToSquared(n.c)<Of||n.b.distanceToSquared(n.c)<Of}var fB=class{constructor(){this._pool=[],this._index=0}getTriangle(){return this._index>=this._pool.length&&this._pool.push(new Gt),this._pool[this._index++]}clear(){this._index=0}reset(){this._pool.length=0,this._index=0}},Qg=class{constructor(){this.trianglePool=new fB,this.triangles=[],this.normal=new U}initialize(e){let{triangles:t,trianglePool:i,normal:o}=this;if(t.length=0,i.clear(),Array.isArray(e))for(let a=0,l=e.length;a<l;a++){let c=e[a];if(a===0)c.getNormal(o);else if(Math.abs(1-c.getNormal(Ya).dot(o))>Of)throw new Error("Triangle Splitter: Cannot initialize with triangles that have different normals.");let u=i.getTriangle();u.copy(c),t.push(u)}else{e.getNormal(o);let a=i.getTriangle();a.copy(e),t.push(a)}}splitByTriangle(e){let{normal:t,triangles:i}=this;if(e.getPlane(Og),Math.abs(1-Math.abs(Og.normal.dot(t)))<Ff){let o=[e.a,e.b,e.c];for(let a=0;a<3;a++){let l=(a+1)%3,c=o[a],u=o[l];Ya.subVectors(u,c).normalize(),h8.crossVectors(t,Ya),Og.setFromNormalAndCoplanarPoint(h8,c),this.splitByPlane(Og,e,a)}for(let a=0,l=i.length;a<l;a++){let c=i[a];c.coplanarCount=0}}else this.splitByPlane(Og,e)}splitByPlane(e,t=null,i=-1){let{triangles:o,trianglePool:a}=this,l=null;t!==null&&(l=Nme,l.copy(t),l.needsUpdate=!0);for(let c=0,u=o.length;c<u;c++){let h=o[c],{a:A,b:f,c:d}=h;if(l&&!l.intersectsTriangle(h,Xa,!0))continue;let p=0,m=-1,b=0,g=!1,w=[A,f,d];for(let I=0;I<3;I++){let v=(I+1)%3;Xa.start.copy(w[I]),Xa.end.copy(w[v]);let C=e.distanceToPoint(Xa.start),E=e.distanceToPoint(Xa.end);if(Math.abs(C)<Ff&&Math.abs(E)<Ff){g=!0;break}if(Math.abs(C)<Ff)continue;C>0&&b++;let S=!!e.intersectLine(Xa,Ya);!S&&Math.abs(E)<Ff&&(Ya.copy(Xa.end),S=!0),S&&!(Ya.distanceTo(Xa.start)<Of)&&(Ya.distanceTo(Xa.end)<Of&&(m=I),p===0?Zn.start.copy(Ya):Zn.end.copy(Ya),p++)}if(!g)if(p===2&&Zn.distance()>Ff)if(m!==-1){m=(m+1)%3;let I=0;I===m&&(I=(I+1)%3);let v=I+1;v===m&&(v=(v+1)%3);let C=a.getTriangle();C.a.copy(w[v]),C.b.copy(Zn.end),C.c.copy(Zn.start),Uf(C)||o.push(C),h.a.copy(w[I]),h.b.copy(Zn.start),h.c.copy(Zn.end),Uf(h)&&(o.splice(c,1),c--,u--)}else{let I=w.findIndex(M=>b>=2?e.distanceToPoint(M)<0:e.distanceToPoint(M)>0);if(I===0){let M=Zn.start;Zn.start=Zn.end,Zn.end=M}else if(I===-1)continue;let v=(I+1)%3,C=(I+2)%3,E=a.getTriangle(),S=a.getTriangle();w[v].distanceToSquared(Zn.start)<w[C].distanceToSquared(Zn.end)?(E.a.copy(w[v]),E.b.copy(Zn.start),E.c.copy(Zn.end),S.a.copy(w[v]),S.b.copy(w[C]),S.c.copy(Zn.start)):(E.a.copy(w[C]),E.b.copy(Zn.start),E.c.copy(Zn.end),S.a.copy(w[v]),S.b.copy(w[C]),S.c.copy(Zn.end)),h.a.copy(w[I]),h.b.copy(Zn.end),h.c.copy(Zn.start),Uf(E)||o.push(E),Uf(S)||o.push(S),Uf(h)&&(o.splice(c,1),c--,u--)}else p===3&&console.warn("TriangleClipper: Coplanar clip not handled")}}reset(){this.triangles.length=0}};var Gg=class{constructor(e,t=500){let i=Hx()?SharedArrayBuffer:ArrayBuffer;this.expansionFactor=1.5,this.type=e,this.array=new e(new i(t*e.BYTES_PER_ELEMENT)),this.length=0}expand(e=null){let{type:t,array:i,expansionFactor:o}=this;e===null&&(e=~~(i.length*o));let a=new t(e);a.set(i,0),this.array=a}push(...e){let{array:t,length:i}=this;i+e.length>t.length&&(this.expand(),t=this.array);for(let o=0,a=e.length;o<a;o++)t[i+o]=e[o];this.length+=e.length}clear(){this.length=0}};var $x=class{constructor(){this.groupAttributes=[{}],this.groupCount=0}getType(e){return this.groupAttributes[0][e].type}getTotalLength(e){let{groupCount:t,groupAttributes:i}=this,o=0;for(let a=0;a<t;a++){let l=i[a];o+=l[e].length}return o}getGroupSet(e=0){let{groupAttributes:t}=this;if(t[e])return this.groupCount=Math.max(this.groupCount,e+1),t[e];let i=t[0];for(this.groupCount=Math.max(this.groupCount,e+1);e>=t.length;){let o={};t.push(o);for(let a in i)o[a]=new Gg(i[a].type)}return t[e]}getGroupArray(e,t=0){let{groupAttributes:i}=this;if(!i[0][e])throw new Error(`TypedAttributeData: Attribute with "${e}" has not been initialized`);return this.getGroupSet(t)[e]}initializeArray(e,t){let{groupAttributes:i}=this,a=i[0][e];if(a){if(a.type!==t)throw new Error(`TypedAttributeData: Array ${e} already initialized with a different type.`)}else for(let l=0,c=i.length;l<c;l++)i[l][e]=new Gg(t)}clear(){this.groupCount=0;let{groupAttributes:e}=this;e.forEach(t=>{for(let i in t)t[i].clear()})}delete(e){this.groupAttributes.forEach(t=>{delete t[e]})}reset(){this.groupAttributes=[]}};var dB=class{constructor(e){this.triangle=new Gt().copy(e),this.intersects={}}addTriangle(e,t){this.intersects[e]=new Gt().copy(t)}getIntersectArray(){let e=[],{intersects:t}=this;for(let i in t)e.push(t[i]);return e}},eC=class{constructor(){this.data={}}addTriangleIntersection(e,t,i,o){let{data:a}=this;a[e]||(a[e]=new dB(t)),a[e].addTriangle(i,o)}getTrianglesAsArray(e=null){let{data:t}=this,i=[];if(e!==null)e in t&&i.push(t[e].triangle);else for(let o in t)i.push(t[o].triangle);return i}getTriangleIndices(){return Object.keys(this.data).map(e=>parseInt(e))}getIntersectionIndices(e){let{data:t}=this;return t[e]?Object.keys(t[e].intersects).map(i=>parseInt(i)):[]}getIntersectionsAsArray(e=null,t=null){let{data:i}=this,o=new Set,a=[],l=c=>{if(i[c])if(t!==null)i[c].intersects[t]&&a.push(i[c].intersects[t]);else{let u=i[c].intersects;for(let h in u)o.has(h)||(o.add(h),a.push(u[h]))}};if(e!==null)l(e);else for(let c in i)l(c);return a}reset(){this.data={}}},tC=class{constructor(){this.enabled=!1,this.triangleIntersectsA=new eC,this.triangleIntersectsB=new eC,this.intersectionEdges=[]}addIntersectingTriangles(e,t,i,o){let{triangleIntersectsA:a,triangleIntersectsB:l}=this;a.addTriangleIntersection(e,t,i,o),l.addTriangleIntersection(i,o,e,t)}addEdge(e){this.intersectionEdges.push(e.clone())}reset(){this.triangleIntersectsA.reset(),this.triangleIntersectsB.reset(),this.intersectionEdges=[]}};var Ac=new ke,sC=new dt,Wu=new Gt,nC=new Gt,iC=new Gt,rC=new Gt;function Fme(n){for(let e of n)return e}function d8(n,e,t,i,o,a){let{useGroups:l=!0}=a,{aIntersections:c,bIntersections:u}=l8(n,e),h=[],A=null,f;return f=l?0:-1,f8(n,e,c,t,!1,o,f),A8(n,e,c,t,!1,i,o,f),f=l?n.geometry.groups.length||1:-1,f8(e,n,u,t,!0,o,f),A8(e,n,u,t,!0,i,o,f),{groups:h,materials:A}}function A8(n,e,t,i,o,a,l,c=0){let u=n.matrixWorld.determinant()<0;Ac.copy(e.matrixWorld).invert().multiply(n.matrixWorld),sC.getNormalMatrix(n.matrixWorld).multiplyScalar(u?-1:1);let h=n.geometry.groupIndices,A=n.geometry.index,f=n.geometry.attributes.position,d=e.geometry.boundsTree,p=e.geometry.index,m=e.geometry.attributes.position,b=t.ids,g=t.intersectionSet;for(let w=0,I=b.length;w<I;w++){let v=b[w],C=c===-1?0:h[v]+c,E=l.getGroupSet(C),S=3*v,M=A.getX(S+0),_=A.getX(S+1),T=A.getX(S+2);Wu.a.fromBufferAttribute(f,M).applyMatrix4(Ac),Wu.b.fromBufferAttribute(f,_).applyMatrix4(Ac),Wu.c.fromBufferAttribute(f,T).applyMatrix4(Ac),a.initialize(Wu);let D=g[v];for(let B=0,P=D.length;B<P;B++){let F=3*D[B],z=p.getX(F+0),Q=p.getX(F+1),V=p.getX(F+2);nC.a.fromBufferAttribute(m,z),nC.b.fromBufferAttribute(m,Q),nC.c.fromBufferAttribute(m,V),a.splitByTriangle(nC)}let R=a.triangles;for(let B=0,P=R.length;B<P;B++){let F=R[B],z=hB(F,d),Q=AB(i,z,o);if(Q!==qx){Wu.getBarycoord(F.a,rC.a),Wu.getBarycoord(F.b,rC.b),Wu.getBarycoord(F.c,rC.c);let V=Q===Ug;c8(v,rC,n.geometry,n.matrixWorld,sC,E,u!==V)}}}return b.length}function f8(n,e,t,i,o,a,l=0){let c=n.matrixWorld.determinant()<0;Ac.copy(e.matrixWorld).invert().multiply(n.matrixWorld),sC.getNormalMatrix(n.matrixWorld).multiplyScalar(c?-1:1);let u=e.geometry.boundsTree,h=n.geometry.groupIndices,A=n.geometry.index,f=n.geometry.attributes,d=f.position,p=[],m=n.geometry.halfEdges,b=new Set;for(let g=0,w=A.count/3;g<w;g++)g in t.intersectionSet||b.add(g);for(;b.size>0;){let g=Fme(b);b.delete(g),p.push(g);let w=3*g,I=A.getX(w+0),v=A.getX(w+1),C=A.getX(w+2);iC.a.fromBufferAttribute(d,I).applyMatrix4(Ac),iC.b.fromBufferAttribute(d,v).applyMatrix4(Ac),iC.c.fromBufferAttribute(d,C).applyMatrix4(Ac);let E=hB(iC,u),S=AB(i,E,o);for(;p.length>0;){let M=p.pop(),_=l===-1?0:h[M]+l,T=a.getGroupSet(_);for(let z=0;z<3;z++){let Q=m.getSiblingTriangleIndex(M,z);Q!==-1&&b.has(Q)&&(p.push(Q),b.delete(Q))}if(S===qx)continue;let D=3*M,R=A.getX(D+0),B=A.getX(D+1),P=A.getX(D+2),F=S===Ug;u8(R,B,P,f,n.matrixWorld,sC,T,F!==c)}}}function Ume(n,e,t,i){let o=!1,a=-1,l=i.groupCount,c=n.attributes,u=i.groupAttributes[0];for(let A in u){let f=i.getTotalLength(A,l),d=u[A].type,p=c[A];if(!p||p.array.length<f){let b=e.attributes[A];p=new $e(new d(f),b.itemSize,b.normalized),n.setAttribute(A,p),o=!0}let m=0;for(let b=0;b<l;b++){let{array:g,type:w,length:I}=i.groupAttributes[b][A],v=new w(g.buffer,0,I);p.array.set(v,m),m+=v.length}p.needsUpdate=!0,a=f/p.itemSize}n.setDrawRange(0,a),n.clearGroups();let h=0;for(let A=0;A<l;A++){let f=i.getGroupArray("position",A).length/3;if(f!==0){let d=t[A];n.addGroup(h,f,d.materialIndex),h+=f}}if(n.index){let A=n.index.array;if(A.length<a)n.index=null,o=!0;else for(let f=0,d=A.length;f<d;f++)A[f]=f}return n.boundsTree=null,o&&n.dispose(),n}function p8(n,e){let t=e;return Array.isArray(e)||(t=[],n.forEach(i=>{t[i.materialIndex]=e})),t}var Qf=class{constructor(){this.triangleSplitter=new Qg,this.attributeData=new $x,this.attributes=["position","uv","normal"],this.useGroups=!0,this.debug=new tC}evaluate(e,t,i,o=new _s){e.prepareGeometry(),t.prepareGeometry();let{triangleSplitter:a,attributeData:l,attributes:c,useGroups:u,debug:h}=this,A=o.geometry,f=e.geometry.attributes;for(let w=0,I=c.length;w<I;w++){let v=c[w],C=f[v];l.initializeArray(v,C.array.constructor)}for(let w in l.attributes)c.includes(w)||l.delete(w);for(let w in A.attributes)c.includes(w)||(A.deleteAttribute(w),A.dispose());l.clear(),h.enabled&&(h.reset(),uB(h)),d8(e,t,i,a,l,{useGroups:u}),h.enabled&&uB(null);let d=!u||e.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:e.geometry.groups.map(w=>({...w})),p=!u||t.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:t.geometry.groups.map(w=>({...w})),m=p8(d,e.material),b=p8(p,t.material);p.forEach(w=>{w.materialIndex+=m.length}),Ume(A,e.geometry,[...d,...p],l);let g=A.groups;if(u){let w=new Map,I=[...m,...b],v=0;for(let C=0,E=I.length;C<E;C++)!!g.find(M=>M.materialIndex===C)?(w.set(C,v),v++):I[C]=null;for(let C=0,E=g.length;C<E;C++){let S=g[C];S.materialIndex=w.get(S.materialIndex)}o.material=I.filter(C=>C)}return o}evaluateHierarchy(e,t=new _s){e.updateMatrixWorld(!0);let i=(a,l)=>{let c=a.children;for(let u=0,h=c.length;u<h;u++){let A=c[u];A.isOperationGroup?i(A,l):l(A)}},o=a=>{let l=a.children,c=!1;for(let h=0,A=l.length;h<A;h++){let f=l[h];c=o(f)||c}let u=a.isDirty();if(u&&a.markUpdated(),c&&!a.isOperationGroup){let h;return i(a,A=>{h?h=this.evaluate(h,A,A.operation):h=this.evaluate(a,A,A.operation)}),a._cachedGeometry=h.geometry,a._cachedMaterials=h.material,!0}else return c||u};return o(e),t.geometry=e._cachedGeometry,t.material=e._cachedMaterials,t}reset(){this.triangleSplitter.reset()}};var pB=class extends _s{constructor(...e){super(...e),this.isOperation=!0,this.operation=0,this._cachedGeometry=new Ke,this._cachedMaterials=null,this._previousOperation=null}markUpdated(){super.markUpdated(),this._previousOperation=this.operation}isDirty(){return this.operation!==this._previousOperation||super.isDirty()}insertBefore(e){let t=this.parent,i=t.children.indexOf(this);t.children.splice(i,0,e)}insertAfter(e){let t=this.parent,i=t.children.indexOf(this);t.children.splice(i+1,0,e)}};var mB=class extends Yt{constructor(){super(),this.isOperationGroup=!0,this._previousMatrix=new ke}markUpdated(){this._previousMatrix.copy(this.matrix)}isDirty(){let{matrix:e,_previousMatrix:t}=this,i=e.elements,o=t.elements;for(let a=0;a<16;a++)if(i[a]!==o[a])return!0;return!1}};function Ome(n){if(!/varying\s+vec3\s+wPosition/.test(n.vertexShader))return n.vertexShader=`
			varying vec3 wPosition;
			${n.vertexShader}
		`.replace(/#include <displacementmap_vertex>/,e=>`${e}
				wPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
				`),n.fragmentShader=`
		varying vec3 wPosition;
		${n.fragmentShader}
		`,n}function m8(n){return n.uniforms={...n.uniforms,checkerboardColor:{value:new De(1118481)}},Ome(n),n.defines={CSG_GRID:1},n.fragmentShader=n.fragmentShader.replace(/#include <common>/,e=>`
			${e}

			uniform vec3 checkerboardColor;
			float getCheckerboard( vec2 p, float scale ) {

				p /= scale;
				p += vec2( 0.5 );

				vec2 line = mod( p, 2.0 ) - vec2( 1.0 );
				line = abs( line );

				vec2 pWidth = fwidth( line );
				vec2 value = smoothstep( 0.5 - pWidth / 2.0, 0.5 + pWidth / 2.0, line );
				float result = value.x * value.y + ( 1.0 - value.x ) * ( 1.0 - value.y );

				return result;

			}

			float getGrid( vec2 p, float scale, float thickness ) {

				p /= 0.5 * scale;

				vec2 stride = mod( p, 2.0 ) - vec2( 1.0 );
				stride = abs( stride );

				vec2 pWidth = fwidth( p );
				vec2 line = smoothstep( 1.0 - pWidth / 2.0, 1.0 + pWidth / 2.0, stride + thickness * pWidth );

				return max( line.x, line.y );

			}

			vec3 getFaceColor( vec2 p, vec3 color ) {

				float checkLarge = getCheckerboard( p, 1.0 );
				float checkSmall = abs( getCheckerboard( p, 0.1 ) );
				float lines = getGrid( p, 10.0, 1.0 );

				vec3 checkColor = mix(
					vec3( 0.7 ) * color,
					vec3( 1.0 ) * color,
					checkSmall * 0.4 + checkLarge * 0.6
				);

				vec3 gridColor = vec3( 1.0 );

				return mix( checkColor, gridColor, lines );

			}

			float angleBetween( vec3 a, vec3 b ) {

				return acos( abs( dot( a, b ) ) );

			}

			vec3 planeProject( vec3 norm, vec3 other ) {

				float d = dot( norm, other );
				return normalize( other - norm * d );

			}

			vec3 getBlendFactors( vec3 norm ) {

				vec3 xVec = vec3( 1.0, 0.0, 0.0 );
				vec3 yVec = vec3( 0.0, 1.0, 0.0 );
				vec3 zVec = vec3( 0.0, 0.0, 1.0 );

				vec3 projX = planeProject( xVec, norm );
				vec3 projY = planeProject( yVec, norm );
				vec3 projZ = planeProject( zVec, norm );

				float xAngle = max(
					angleBetween( xVec, projY ),
					angleBetween( xVec, projZ )
				);

				float yAngle = max(
					angleBetween( yVec, projX ),
					angleBetween( yVec, projZ )
				);

				float zAngle = max(
					angleBetween( zVec, projX ),
					angleBetween( zVec, projY )
				);

				return vec3( xAngle, yAngle, zAngle ) / ( 0.5 * PI );

			}
		`).replace(/#include <normal_fragment_maps>/,e=>`${e}
				#if CSG_GRID
				{

					vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

					float yCont = abs( dot( vec3( 0.0, 1.0, 0.0 ), worldNormal ) );
					float zCont = abs( dot( vec3( 0.0, 0.0, 1.0 ), worldNormal ) );
					float xCont = abs( dot( vec3( 1.0, 0.0, 0.0 ), worldNormal ) );

					vec3 factors = getBlendFactors( worldNormal );
					factors = smoothstep( vec3( 0.475 ), vec3( 0.525 ), vec3( 1.0 ) - factors );

					float weight = factors.x + factors.y + factors.z;
					factors /= weight;

					vec3 color =
						getFaceColor( wPosition.yz, diffuseColor.rgb ) * factors.x +
						getFaceColor( wPosition.xz, diffuseColor.rgb ) * factors.y +
						getFaceColor( wPosition.xy, diffuseColor.rgb ) * factors.z;

					diffuseColor.rgb = color;

				}
				#endif
				`),n}var gB=class extends fr{get enableGrid(){return!!this._enableGrid}set enableGrid(e){this._enableGrid!==e&&(this._enableGrid=e,this.needsUpdate=!0)}constructor(...e){super(...e),this.enableGrid=!0}onBeforeCompile(e){m8(e),e.defines.CSG_GRID=Number(this.enableGrid)}customProgramCacheKey(){return this.enableGrid.toString()}};function g8(...n){function e(t){return`new THREE.Vector3( ${t.x}, ${t.y}, ${t.z} )`}return n.map(t=>`
			new THREE.Triangle(
				${e(t.a)},
				${e(t.b)},
				${e(t.c)},
			)`.substring(1))}function Qme(...n){console.log(g8(...n).join(`,
`))}function Gme(n){let e=n.attributes.position,t=new Float32Array(e.count*3),i=new De;for(let o=0,a=t.length;o<a;o+=9)i.setHSL(Math.random(),Jt.lerp(.5,1,Math.random()),Jt.lerp(.5,.75,Math.random())),t[o+0]=i.r,t[o+1]=i.g,t[o+2]=i.b,t[o+3]=i.r,t[o+4]=i.g,t[o+5]=i.b,t[o+6]=i.r,t[o+7]=i.g,t[o+8]=i.b;n.setAttribute("color",new $e(t,3))}var yB=class extends Yt{get color(){return this._mesh.material.color}get side(){return this._mesh.material.side}set side(e){this._mesh.material.side=e}constructor(e=[]){super();let t=new Ke,i=new Ke;this._mesh=new He(t,new fr({flatShading:!0,transparent:!0,opacity:.25})),this._lines=new fi(i,new bn),this._mesh.material.color=this._lines.material.color,this._lines.frustumCulled=!1,this._mesh.frustumCulled=!1,this.add(this._lines,this._mesh),this.setTriangles(e)}setTriangles(e){let t=new Float32Array(9*e.length),i=new Float32Array(6*3*e.length);for(let o=0,a=e.length;o<a;o++){let l=9*o,c=18*o,u=e[o];u.a.toArray(t,l+0),u.b.toArray(t,l+3),u.c.toArray(t,l+6),u.a.toArray(i,c+0),u.b.toArray(i,c+3),u.b.toArray(i,c+6),u.c.toArray(i,c+9),u.c.toArray(i,c+12),u.a.toArray(i,c+15)}this._mesh.geometry.dispose(),this._mesh.geometry.setAttribute("position",new $e(t,3)),this._lines.geometry.dispose(),this._lines.geometry.setAttribute("position",new $e(i,3))}};var zg=class extends fi{get color(){return this.material.color}constructor(e=[]){super(),this.frustumCulled=!1,this.setEdges(e)}setEdges(e){let{geometry:t}=this,i=e.flatMap(o=>[o.start,o.end]);t.dispose(),t.setFromPoints(i)}};var y8=new ke,vB=class extends hl{get color(){return this.material.color}constructor(e=1e3,t=[]){super(new Hc(.025),new Nt,e),this.frustumCulled=!1,this.setPoints(t)}setPoints(e){for(let t=0,i=e.length;t<i;t++){let o=e[t];y8.makeTranslation(o.x,o.y,o.z),this.setMatrixAt(t,y8)}this.count=e.length}};var Gf=new Gt,zf=new Gt,Hf=new U,Hg=new U,v8=new U,w8=new U,b8=new U,x8=new U,oC=new U,aC=new U,C8=new U,S8=new U,E8=new U,I8=new U,M8=new U,T8=new U,_8=new On,D8=new On;function R8(n,e,t){let i=3*e,o=i+0,a=i+1,l=i+2,c=n.index,u=n.attributes.position;return c&&(o=c.getX(o),a=c.getX(a),l=c.getX(l)),t.a.fromBufferAttribute(u,o),t.b.fromBufferAttribute(u,a),t.c.fromBufferAttribute(u,l),t}var wB=class extends zg{constructor(e=null,t=null){super(),e&&t&&this.setHalfEdges(e,t)}setHalfEdges(e,t){let i=e.index,o=e.attributes.position,a=["a","b","c"],l=[],c=i?i.count/3:o.count/3;for(let u=0;u<c;u++){R8(e,u,Gf),Gf.getMidpoint(Hf),Gf.getPlane(_8);for(let h=0;h<3;h++){let A=t.getSiblingTriangleIndex(u,h),f=t.getSiblingEdgeIndex(u,h);if(A===-1)continue;R8(e,A,zf),zf.getPlane(D8),zf.getMidpoint(Hg);{let p=(h+1)%3,m=Gf[a[h]],b=Gf[a[p]];v8.lerpVectors(m,b,.5)}{let p=(f+1)%3,m=zf[a[f]],b=zf[a[p]];w8.lerpVectors(m,b,.5)}_8.projectPoint(Hg,b8),D8.projectPoint(Hf,x8),oC.subVectors(b8,Hf),aC.subVectors(x8,Hg),C8.subVectors(v8,Hf),S8.subVectors(w8,Hg),oC.dot(C8)<0&&oC.multiplyScalar(-1),aC.dot(S8)<0&&aC.multiplyScalar(-1),E8.addVectors(Hf,oC),I8.addVectors(Hg,aC),Gf.closestPointToPoint(E8,M8),zf.closestPointToPoint(I8,T8);let d=new Rn;d.start.copy(Hf),d.end.lerpVectors(M8,T8,.5),l.push(d)}}super.setEdges(l)}};var Ko=new Gt,L8=new U,B8=new U;function zme(n){let e,t;n.isBufferGeometry?(e=n,t=null):(e=n.geometry,t=Math.abs(n.matrixWorld.determinant()-1)<1e-15?null:n.matrixWorld);let i=e.index,o=e.attributes.position,a=e.drawRange,l=Math.min((i?i.count:o.count)/3,a.count/3);Ko.setFromAttributeAndIndices(o,0,1,2),k8(Ko,t),Ko.getNormal(L8),Ko.getMidpoint(B8).add(L8);let c=0,u=a.start/3;for(let h=u,A=u+l;h<A;h++){let f=3*h+0,d=3*h+1,p=3*h+2;i&&(f=i.getX(f),d=i.getX(d),p=i.getX(p)),Ko.setFromAttributeAndIndices(o,f,d,p),k8(Ko,t),Vme(Ko,B8),c+=Hme(Ko.a,Ko.b,Ko.c)}return Math.abs(c)}function Hme(n,e,t){let i=t.x*e.y*n.z,o=e.x*t.y*n.z,a=t.x*n.y*e.z,l=n.x*t.y*e.z,c=e.x*n.y*t.z,u=n.x*e.y*t.z;return 1/6*(-i+o+a-l-c+u)}function Vme(n,e){n.a.sub(e),n.b.sub(e),n.c.sub(e)}function k8(n,e=null){e!==null&&(n.a.applyMatrix4(e),n.b.applyMatrix4(e),n.c.applyMatrix4(e))}var Wme=`#ifdef ENVMAP_TYPE_CUBE_UV

#define PI 3.141592653589793
#define RECIPROCAL_PI 0.3183098861837907

struct GeometricContext {
  vec3 normal;
  vec3 viewDir;
};

struct PhysicalMaterial {
  vec3 diffuseColor;
  float roughness;
  vec3 specularColor;
  float specularF90;
};

struct ReflectedLight {
  vec3 indirectDiffuse;
  vec3 indirectSpecular;
};

vec3 BRDF_Lambert(const in vec3 diffuseColor) {
  return RECIPROCAL_PI * diffuseColor;
}

vec2 DFGApprox(const in vec3 normal, const in vec3 viewDir, const in float roughness) {
  float dotNV = saturate(dot(normal, viewDir));
  const vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);
  const vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);
  vec4 r = roughness * c0 + c1;
  float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;
  vec2 fab = vec2(-1.04, 1.04) * a004 + r.zw;
  return fab;
}

void computeMultiscattering(const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter) {
  vec2 fab = DFGApprox(normal, viewDir, roughness);
  vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
  float Ess = fab.x + fab.y;
  float Ems = 1.0 - Ess;
  vec3 Favg = specularColor + (1.0 - specularColor) * 0.047619;
  vec3 Fms = FssEss * Favg / (1.0 - Ems * Favg);
  singleScatter += FssEss;
  multiScatter += Fms * Ems;
}

void RE_IndirectDiffuse(const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert(material.diffuseColor);
}

void RE_IndirectSpecular(const in vec3 radiance, const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
  vec3 singleScattering = vec3(0.0);
  vec3 multiScattering = vec3(0.0);
  vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
  computeMultiscattering(geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering);
  vec3 diffuse = material.diffuseColor * (1.0 - (singleScattering + multiScattering));
  reflectedLight.indirectSpecular += radiance * singleScattering;
  reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
  reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}

vec3 getIBLRadiance(const in vec3 viewDir, const in vec3 normal, const in float roughness) {
  vec3 reflectVec = reflect(-viewDir, normal);
  reflectVec = normalize(mix(reflectVec, normal, roughness * roughness));
  vec4 envMapColor = textureCubeUV(envMap, reflectVec, roughness);
  return envMapColor.rgb * envMapIntensity;
}

vec3 getIBLIrradiance(const in vec3 normal) {
  vec3 envMapColor = textureCubeUV(envMap, normal, 1.0).rgb;
  return PI * envMapColor * envMapIntensity;
}

vec3 getLight(const in vec3 position, const in vec3 normal, const in vec3 diffuse) {
  GeometricContext geometry;
  geometry.normal = normal;
  geometry.viewDir = normalize(cameraPosition - position);

  PhysicalMaterial material;
  material.diffuseColor = diffuse * (1.0 - metalness);
  material.roughness = max(min(roughness, 1.0), 0.0525);
  material.specularColor = mix(vec3(0.04), diffuse, metalness);
  material.specularF90 = 1.0;

  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0));
  vec3 radiance = getIBLRadiance(geometry.viewDir, geometry.normal, material.roughness);
  vec3 irradiance = getIBLIrradiance(geometry.normal);
  RE_IndirectDiffuse(irradiance, geometry, material, reflectedLight);
  RE_IndirectSpecular(radiance, irradiance, geometry, material, reflectedLight);

  return reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;
}

#else

vec3 getLight(const in vec3 position, const in vec3 normal, const in vec3 diffuse) {
  return diffuse * envMapIntensity;
}

#endif
`,Xme=`precision highp float;
precision highp int;

struct Bounds {
  vec3 center;
  float radius;
};

struct Entity {
  vec3 color;
  int operation;
  vec3 position;
  vec4 rotation;
  vec3 scale;
  int shape;
};

struct SDF {
  float distance;
  vec3 color;
};

out vec4 fragColor;
in vec3 ray;
uniform float blending;
uniform Bounds bounds;
uniform vec3 cameraDirection;
uniform float cameraFar;
uniform float cameraFov;
uniform float cameraNear;
uniform vec3 cameraPosition;
uniform Entity entities[MAX_ENTITIES];
uniform sampler2D envMap;
uniform float envMapIntensity;
uniform float metalness;
uniform int numEntities;
uniform vec2 resolution;
uniform float roughness;

#define saturate(a) clamp(a, 0.0, 1.0)
#define texture2D texture
#include <cube_uv_reflection_fragment>
#include <encodings_pars_fragment>
#include <lighting>

vec3 applyQuaternion(const in vec3 p, const in vec4 q) {
  return p + 2.0 * cross(-q.xyz, cross(-q.xyz, p) + q.w * p);
}

float sdBox(const in vec3 p, const in vec3 r) {
  vec3 q = abs(p)-r;
  return length(max(q,0.0))+min(max(q.x,max(q.y,q.z)),0.0);
}

float sdCapsule(in vec3 p, const in vec3 r) {
  p.y -= clamp(p.y,-r.y+r.x,r.y-r.x);
  return length(p)-r.x;
}

float sdEllipsoid(const in vec3 p, const in vec3 r) {
  float k0 = length(p/r);
  float k1 = length(p/(r*r));
  return k0*(k0-1.0)/k1;
}

float sdSphere(const in vec3 p, const in float r) {
  return length(p)-r;
}

SDF sdEntity(in vec3 p, const in Entity e) {
  float distance;
  p = applyQuaternion(p - e.position, normalize(e.rotation));
  switch (e.shape) {
    default:
    case 0:
      distance = sdBox(p, e.scale * 0.5 - vec3(0.1)) - 0.1;
      break;
    case 1:
      distance = sdCapsule(p, e.scale * 0.5);
      break;
    case 2:
      distance = sdEllipsoid(p, e.scale * 0.5);
      break;
  }
  return SDF(distance, e.color);
}

SDF opSmoothUnion(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 + 0.5 * (b.distance - a.distance) / k);
  return SDF(
    mix(b.distance, a.distance, h) - k*h*(1.0-h),
    mix(b.color, a.color, h)
  );
}

SDF opSmoothSubtraction(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 - 0.5 * (a.distance + b.distance) / k);
  return SDF(
    mix(a.distance, -b.distance, h) + k*h*(1.0-h),
    mix(a.color, b.color, h)
  );
}

SDF opSmoothIntersection(const in SDF a, const in SDF b, const in float k) {
  float h = saturate(0.5 + 0.5 * (b.distance - a.distance) / k);
  return SDF(
    mix(a.distance, b.distance, h) + k*h*(1.0-h),
    mix(a.color, b.color, h)
  );
}

SDF map(const in vec3 p) {
  SDF scene = sdEntity(p, entities[0]);
  for (int i = 1, l = min(numEntities, MAX_ENTITIES); i < l; i++) {
    switch (entities[i].operation) {
      default:
      case 0:
        scene = opSmoothUnion(scene, sdEntity(p, entities[i]), blending);
        break;
      case 1:
        scene = opSmoothSubtraction(scene, sdEntity(p, entities[i]), blending);
        break;
      case 2:
        scene = opSmoothIntersection(scene, sdEntity(p, entities[i]), blending);
        break;
    }
  }
  return scene;
}

vec3 getNormal(const in vec3 p, const in float d) {
  const vec2 o = vec2(0.001, 0);
  return normalize(
    d - vec3(
      map(p - o.xyy).distance,
      map(p - o.yxy).distance,
      map(p - o.yyx).distance
    )
  );
}

#ifdef CONETRACING
void march(inout vec4 color, inout float distance) {
  float closest = MAX_DISTANCE;
  float coverage = 1.0;
  float coneRadius = (2.0 * tan(cameraFov / 2.0)) / resolution.y;
  for (int i = 0; i < MAX_ITERATIONS && distance < MAX_DISTANCE; i++) {
    vec3 position = cameraPosition + ray * distance;
    float distanceToBounds = sdSphere(position - bounds.center, bounds.radius);
    if (distanceToBounds > 0.1) {
      distance += distanceToBounds;
    } else {
      SDF step = map(position);
      float cone = coneRadius * distance;
      if (step.distance < cone) {
        if (closest > distance) {
          closest = distance;
        }
        float alpha = smoothstep(cone, -cone, step.distance);
        vec3 pixel = getLight(position, getNormal(position, step.distance), step.color);
        color.rgb += coverage * (alpha * pixel);
        coverage *= (1.0 - alpha);
        if (coverage <= MIN_COVERAGE) {
          break;
        }
      }
      distance += max(abs(step.distance), MIN_DISTANCE);
    }
  }
  distance = closest;
  color.a = 1.0 - (max(coverage - MIN_COVERAGE, 0.0) / (1.0 - MIN_COVERAGE));
}
#else
void march(inout vec4 color, inout float distance) {
  for (int i = 0; i < MAX_ITERATIONS && distance < MAX_DISTANCE; i++) {
    vec3 position = cameraPosition + ray * distance;
    float distanceToBounds = sdSphere(position - bounds.center, bounds.radius);
    if (distanceToBounds > 0.1) {
      distance += distanceToBounds;
    } else {
      SDF step = map(position);
      if (step.distance <= MIN_DISTANCE) {
        color = vec4(getLight(position, getNormal(position, step.distance), step.color), 1.0);
        break;
      }
      distance += step.distance;
    }
  }
}
#endif

void main() {
  vec4 color = vec4(0.0);
  float distance = cameraNear;
  march(color, distance);
  fragColor = saturate(LinearTosRGB(color));
  float z = (distance >= MAX_DISTANCE) ? cameraFar : (distance * dot(cameraDirection, ray));
  float ndcDepth = -((cameraFar + cameraNear) / (cameraNear - cameraFar)) + ((2.0 * cameraFar * cameraNear) / (cameraNear - cameraFar)) / z;
  gl_FragDepth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
}
`,Yme=`out vec3 ray;
in vec3 position;
uniform float cameraFov;
uniform vec2 resolution;
uniform mat4 viewMatrix;

void main() {
  gl_Position = vec4(position.xy, 0, 1);
  float aspect = resolution.y / resolution.x;
  vec2 uv = vec2(position.x, position.y * aspect);
  float cameraDistance = (1.0 / tan(cameraFov / 2.0)) * aspect;
  ray = normalize(vec3(uv, -cameraDistance) * mat3(viewMatrix));
}
`,Zme=`precision highp float;

out vec4 fragColor;
in vec2 uv;
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;

void main() {
  fragColor = texture(colorTexture, uv);
  gl_FragDepth = texture(depthTexture, uv).r;
}
`,Kme=`out vec2 uv;
in vec3 position;

void main() {
  gl_Position = vec4(position.xy, 0, 1);
  uv = position.xy * 0.5 + 0.5;
}
`,xB=[],jme=[new wn(1,1,1),new Nr(.5,.5,1),new Fh(.5,2)].map(n=>(n.computeBoundingSphere(),new He(n))),P8=new al,N8=new U,Jme=new ke,Vf=new he,CB=new Vt,Xu=class n extends He{constructor({blending:e=.5,conetracing:t=!0,envMap:i=null,envMapIntensity:o=1,metalness:a=0,layers:l=[],resolution:c=1,roughness:u=1}={}){let h=new Ii(2,2,1,1);h.deleteAttribute("normal"),h.deleteAttribute("uv");let A=new _t(1,1,{depthTexture:new ll(1,1,Vh)}),f=new xo({glslVersion:Eh,transparent:!!t,vertexShader:Kme,fragmentShader:Zme,uniforms:{colorTexture:{value:A.texture},depthTexture:{value:A.depthTexture}}});super(h,f);let d=new xo({glslVersion:Eh,transparent:!!t,vertexShader:Yme,fragmentShader:Xme.replace("#include <lighting>",Wme),defines:{CONETRACING:!!t,MAX_ENTITIES:0,MAX_DISTANCE:"1000.0",MAX_ITERATIONS:200,MIN_COVERAGE:"0.02",MIN_DISTANCE:"0.05"},uniforms:{blending:{value:e},bounds:{value:{center:new U,radius:0}},cameraDirection:{value:new U},cameraFar:{value:0},cameraFov:{value:0},cameraNear:{value:0},envMap:{value:null},envMapIntensity:{value:o},metalness:{value:a},resolution:{value:new he},roughness:{value:u},numEntities:{value:0},entities:{value:[],properties:{color:{},operation:{},position:{},rotation:{},scale:{},shape:{}}}}}),{defines:p,uniforms:m}=d;this.userData={get blending(){return m.blending.value},set blending(b){m.blending.value=b},get conetracing(){return p.CONETRACING},set conetracing(b){p.CONETRACING!==!!b&&(p.CONETRACING=!!b,d.transparent=f.transparent=!!b,d.needsUpdate=!0)},get envMap(){return m.envMap.value},set envMap(b){if(m.envMap.value=b,p.ENVMAP_TYPE_CUBE_UV!==!!b&&(p.ENVMAP_TYPE_CUBE_UV=!!b,d.needsUpdate=!0),b){let g=Math.log2(b.image.height)-2,w=1/(3*Math.max(Math.pow(2,g),7*16)),I=1/b.image.height;p.CUBEUV_MAX_MIP!==`${g}.0`&&(p.CUBEUV_MAX_MIP=`${g}.0`,d.needsUpdate=!0),p.CUBEUV_TEXEL_WIDTH!==w&&(p.CUBEUV_TEXEL_WIDTH=w,d.needsUpdate=!0),p.CUBEUV_TEXEL_HEIGHT!==I&&(p.CUBEUV_TEXEL_HEIGHT=I,d.needsUpdate=!0)}},get envMapIntensity(){return m.envMapIntensity.value},set envMapIntensity(b){m.envMapIntensity.value=b},get metalness(){return m.metalness.value},set metalness(b){m.metalness.value=b},get roughness(){return m.roughness.value},set roughness(b){m.roughness.value=b},layers:l,raymarcher:new He(h,d),resolution:c,target:A},this.matrixAutoUpdate=this.userData.raymarcher.matrixAutoUpdate=!1,this.frustumCulled=this.userData.raymarcher.frustumCulled=!1,i&&(this.userData.envMap=i)}copy(e){let{userData:t}=this,{userData:{blending:i,conetracing:o,envMap:a,envMapIntensity:l,metalness:c,layers:u,resolution:h,roughness:A}}=e;return t.blending=i,t.conetracing=o,t.envMap=a,t.envMapIntensity=l,t.metalness=c,t.layers=u.map(f=>f.map(n.cloneEntity)),t.resolution=h,t.roughness=A,this}dispose(){let{material:e,geometry:t,userData:{raymarcher:i,target:o}}=this;e.dispose(),t.dispose(),i.material.dispose(),o.dispose(),o.depthTexture.dispose(),o.texture.dispose()}onBeforeRender(e,t,i){let{userData:{layers:o,resolution:a,raymarcher:l,target:c}}=this,{material:{defines:u,uniforms:h}}=l;i.getWorldDirection(h.cameraDirection.value),h.cameraFar.value=i.far,h.cameraFov.value=Jt.degToRad(i.fov),h.cameraNear.value=i.near,P8.setFromProjectionMatrix(Jme.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse)),i.getWorldPosition(N8);let A=o.reduce((g,w,I)=>{u.MAX_ENTITIES<w.length&&(u.MAX_ENTITIES=w.length,h.entities.value=w.map(n.cloneEntity),l.material.needsUpdate=!0);let v=n.getLayerBounds(I);return w.forEach(C=>{let{geometry:{boundingSphere:E},matrixWorld:S}=n.getEntityCollider(C);CB.copy(E).applyMatrix4(S),v.isEmpty()?v.copy(CB):v.union(CB)}),P8.intersectsSphere(v)&&g.push({bounds:v,distance:v.center.distanceTo(N8),entities:w}),g},[]).sort(({distance:g},{distance:w})=>u.CONETRACING?w-g:g-w);e.getDrawingBufferSize(Vf).multiplyScalar(a).floor(),(c.width!==Vf.x||c.height!==Vf.y)&&(c.setSize(Vf.x,Vf.y),h.resolution.value.copy(Vf));let f=e.autoClear,d=e.getClearAlpha(),p=e.getRenderTarget(),m=e.shadowMap.autoUpdate,b=e.xr.enabled;e.autoClear=!1,e.shadowMap.autoUpdate=!1,e.xr.enabled=!1,e.setClearAlpha(0),e.setRenderTarget(c),e.state.buffers.depth.setMask(!0),e.clear(),A.forEach(({bounds:g,entities:w})=>{h.bounds.value.center.copy(g.center),h.bounds.value.radius=g.radius,h.numEntities.value=w.length,w.forEach(({color:I,operation:v,position:C,rotation:E,scale:S,shape:M},_)=>{let T=h.entities.value[_];T.color.copy(I),T.operation=v,T.position.copy(C),T.rotation.copy(E),T.scale.copy(S),T.shape=M}),e.render(l,i)}),e.autoClear=f,e.shadowMap.autoUpdate=m,e.xr.enabled=b,e.setClearAlpha(d),e.setRenderTarget(p),i.viewport&&e.state.viewport(i.viewport)}raycast(e,t){let{userData:{layers:i}}=this;i.forEach((o,a)=>o.forEach((l,c)=>{let u=[];n.getEntityCollider(l).raycast(e,u),u.forEach(h=>{h.entity=l,h.entityId=c,h.layer=o,h.layerId=a,h.object=this,t.push(h)})}))}static cloneEntity({color:e,operation:t,position:i,rotation:o,scale:a,shape:l}){return{color:e.clone(),operation:t,position:i.clone(),rotation:o.clone(),scale:a.clone(),shape:l}}static getEntityCollider({position:e,rotation:t,scale:i,shape:o}){let a=jme[o];return a.position.copy(e),a.quaternion.copy(t),a.scale.copy(i),o===n.shapes.capsule&&(a.scale.z=a.scale.x),a.updateMatrixWorld(),a}static getLayerBounds(e){return xB[e]||(xB[e]=new Vt),xB[e].makeEmpty()}};Xu.operations={union:0,substraction:1,intersection:2};Xu.shapes={box:0,capsule:1,sphere:2};window.CSG=bB;function F8(){Ke.prototype.computeBoundsTree=qL,Ke.prototype.disposeBoundsTree=$L,He.prototype.raycast=JL}window.initbvh=F8;function qme(){F8();let n=new _s(new wn),e=new _s(new Nh(.5,2,4,10));return new Qf().evaluate(n,e,1)}window.joink=qme;window.Brush=_s;window.Evaluator=Qf;window.ADDITION=0;window.SUBTRACTION=1;window.rasterizeHTML=cC.default;window.BufferGeometryUtils=mI;window.MarchingCubes=$b;window.troika=WR;window.WorldGen=hx;window.SXWorld=Nu;function U8(n){return hx({generator:"cave",seed:n})}window.cavegen=U8;function O8(){let n=new Nu({worldgen:hx({generator:"terrain",seed:2}),renderRadius:2,chunkSize:32,chunkMaterial:new Jn({side:Pt,transparent:!0,opacity:.5,color:13421755})});n.castShadow=!0,n.receiveShadow=!0;let e={r:180,g:150,b:110};return n.ball=(t,i,o,a,l)=>{l=l===void 0?255:l,n.updateVolume(Gr(t,i,o),a,l,e),n.updateChunks(Gr(t,i,o)),console.warn("ball",t,i,o,a)},n.up=(t,i,o)=>{console.warn("up",t,i,o),n.updateChunks(Gr(t,i,o))},n.up(0,0,0),n}window.softxel=O8;function Q8(){let n=new Jn({side:Pt,envMapIntensity:1,vertexColors:!0,metalness:.1,roughness:.8});n.defines={USE_OUTPUT_NORMAL:1,USE_OUTPUT_POSITION:1};let e=new Jn({envMapIntensity:.5,vertexColors:!0,visible:!1});e.defines={USE_INSTANCED_POSITION:1,USE_OUTPUT_NORMAL:1,USE_OUTPUT_POSITION:1};let t={triangles:n,voxels:e},i=new cx({history:!1,materials:t}),o=()=>Math.floor(Math.random()*155);return i.castShadow=!0,i.receiveShadow=!0,i.ball=(a,l,c,u,h,A)=>{a=Math.floor(a),l=Math.floor(l),c=Math.floor(c),u=Math.floor(u),h=h||[170,150,150],A=A=="undefined"?1:A;let f=[];for(let d=a-u;d<a+u;d++)for(let p=l-u;p<l+u;p++)for(let m=c-u;m<c+u;m++){let b=a-d,g=l-p,w=c-m;Math.sqrt(b*b+g*g+w*w)<u&&f.push({x:d,y:p,z:m,r:h[0],g:h[1],b:h[2],value:A})}i.update(f)},i}window.sculpty=Q8;function G8(n,e,t,i,o){return n.ball(Math.floor(e*100),Math.floor(t*100),Math.floor(i*100),o,[180,170,170],1)}window.sball=G8;function uC(n){let e=document.createElement("div"),t=new pv(e);return e.style.width="1000px",e.style.minWidth="1000px",e.style.height="800px",e.style.background="rgba(0,0,0,0.2)",e.style.position="absolute",e.style.backfaceVisibility="hidden",e.style.webkitBackfaceVisibility="hidden",e.style.pointerEvents="none",e.style.transformStyle="preserve-3d",t}window.css3dobj=uC;function z8(n,e,t){e=e||1e3,t=t||800;let i=uC(),o=new He(new wn(e,t,20),new Jn({color:16777215,side:Pt,blending:lr}));return o.geometry.translate(0,0,-20),o.castShadow=!0,o.sync=()=>{console.warn("box.sync"),i.position.copy(o.position),i.rotation.copy(o.rotation),i.scale.copy(o.scale)},o.ontransformchanged=a=>o.sync(),o.ondatachanged=async a=>{console.warn("box.ondatachanged");let l=a.data,c=l.html,u=l.url;c?i.element.innerHTML=c:u&&(i.element.innerHTML=await fetch(u))},o.focus=a=>{i.element.style.pointerEvents=a?"all":"none"},o.twin=i,o}window.css3dbox=z8;function $me(){let n=uC(),e=new He(new Ii(1e3,800),new Nt({color:16711680,side:Pt,blending:lr}));return e.geometry.translate(0,0,-.01),e.sync=()=>{console.warn("plane.sync"),n.position.copy(e.position),n.rotation.copy(e.rotation),n.scale.copy(e.scale)},e.ondatachanged=t=>{let i=t.data,o=i.html;n.el.innerHTML=o},e.ontransformchanged=t=>e.sync(),e.twin=n,e}window.css3dplane=$me;function H8(n,e,t){n=n||1,e=e||n,t=t||n;let i=new He(new wn(n,e,t),new Dn({color:1381653,transparent:!0,opacity:1}));return i.castShadow=!0,i.receiveShadow=!0,i.tag="box - don't do this",i}window.box=H8;function V8(n,e,t){let i="https://rx.0x.no:8401/",o=new mt,a=i||"";return o.tag=e||n,o.contenthook=()=>{n.indexOf(".")>0||(n+=".glb"),np(n,a+"stuff/",l=>{let c=l.scene;if(l.animations.length){let u=new Yc(c);l.animations.forEach(h=>u.clipAction(h).play()),window.app.mixers.push(u),u.timeScale=.8}o.add(c),c.traverse(u=>{if(u.receiveShadow=!0,u.castShadow=!0,u.frustumCulled=!1,u.geometry,u.material){let h=A=>{};Array.isArray(u.material)?u.material.map(h):h(u.material)}}),o.onload&&o.onload(),t&&t(o)})},o.contenthook(),o}window.sogltf=V8;function ege(){let n=jy("https://rx.0x.no:8401/stuff/norm1.mp4");return n.vid.autoplay=!1,window._embedded||setTimeout(()=>{n.vid.play()},1e3),n.tag="vidbox",n}window.sovidbox=ege;var{operations:tge,shapes:lC}=Xu;function W8(){let n=()=>(Math.random()-.5)*2,e=new Xu({conetracing:!0,resolution:.3,blending:.1,roughness:1,metalness:.8,envMapIntensity:.7,envMap:lim.envmap,layers:[Array.from({length:6},()=>{let t=new U(2,.5,-2),i=[lC.box,lC.capsule,lC.sphere][Math.floor(Math.random()*3)];i=lC.box;let o=()=>Math.random(),a=()=>Math.random()*1,l=o()*.5;return{color:new De(l-0,l,l),operation:tge.union,position:new U(a(),a(),a()).add(t),rotation:new It().setFromAxisAngle(new U(o()*20,o()*20,o()*20),o()*20),scale:new U(...(s=.5,[s,s,s])),shape:i}})]});return e.castShadow=!0,e.receiveShadow=!0,e.tag="rm",e}window.sorm=W8;function X8(){let n=new Uh(4,1.8,100,10),e=new Dn({color:7829360}),t=new He(n,e);return t.castShadow=!0,t.tag="knot",t}window.soknot=X8;function Y8(){let n=new wn(1,1,1),e=new Dn({color:6710886,transparent:!0,clearcoat:!0}),t=new He(n,e);return t.castShadow=!0,t.receiveShadow=!0,t.tag="cbox",t}window.cbox=Y8;function Z8(){let n=new Ke,e=[],t=[],i=200,o=3e4;for(let u=0;u<o;u++){let h=Math.random()*i-i/2,A=Math.random()*i/20,f=Math.random()*i-i/2,d=16,p=Math.random()*Math.PI*2,m=Math.random()*Math.PI*2,b=Math.random()*d;h=b*Math.sin(p)*Math.cos(m),A=.3*b*Math.sin(p)*Math.sin(m),f=b*Math.cos(p),e.push(h,A,f);let w=(()=>Math.random()*.8+.1)();t.push(0,0,0)}n.setAttribute("position",new Ve(e,3)),n.setAttribute("color",new Ve(t,3)),n.computeBoundingSphere();let a=new pa().load("stuff/textures/disc.png"),l=new ha({size:.05,map:a,vertexColors:!0,transparent:!0,toneMapped:!1,fog:!0,opacity:.5}),c=new Al(n,l);return c.renderOrder=2,c.castShadow=!0,c.tag="sopoints",c}window.sopoints=Z8;function K8(n,e){let t=new hf;return t.text=e||`there is
nothing here`,t.font="./stuff/SpecialElite-Regular.ttf",t.fontSize=.2,t.position.y=.2,t.material.transparent=!0,t.castShadow=!0,t.fillOpacity=.2,t.outlineColor=0,t.outlineOpacity=.2,t.outlineWidth=.002,t.strokeColor=16777215,t.strokeColor=0,t.strokeWidth=.007,t.strokeOpacity=1,t.sync(),t}window.sotext=K8;function nge(){let n=SB();n.position.set(0,100,0),n.tag="sostatus";let e=()=>n.html("<body style='margin:0px;background:transparent'><pre style='margin:0px; padding:5px; font-size:28px;color:rgba(200,230,230,0.8);text-shadow: 1px 1px 4px black;background:rgba(0,0,0,0.2);height:512px;'>"+JSON.stringify({ts:Date.now(),render:app.renderer.info.render,mem:app.renderer.info.memory},null,2));return e(),setInterval(e,1e3),n}window.sostatus=nge;function SB(){let n=document.createElement("canvas"),e=n.getContext("2d");n.width=512,n.height=512;let t=new Dd(n),i=new He(new wn(1,1,.01),new Jn({color:16777215,map:t,opacity:1,transparent:!0}));return i.tex=t,i.canvas=n,i.castShadow=!0,i.receiveShadow=!0,i.html=o=>cC.default.drawHTML(o,n).then(a=>{e.clearRect(0,0,n.width,n.height),e.drawImage(a.image,0,0),i.tex.needsUpdate=!0}),i.url=o=>cC.default.drawURL(o,n).then(a=>i.tex.needsUpdate=!0),i.html("<h1>...</h1>"),i}window.xtmlbox=SB;window.htmlbox=SB;function j8(n){let e=new Qc([new U(0,10,-10),new U(10,0,-10),new U(20,0,0),new U(30,0,10),new U(30,0,20),new U(20,0,30),new U(10,0,30),new U(0,0,30),new U(-10,10,30),new U(-10,20,30),new U(0,30,30),new U(10,30,30),new U(20,30,15),new U(10,30,10),new U(0,30,10),new U(-10,20,10),new U(-10,10,10),new U(0,0,10),new U(10,-10,10),new U(20,-15,10),new U(30,-15,10),new U(40,-15,10),new U(50,-15,10),new U(60,0,10),new U(70,0,0),new U(80,0,0),new U(90,0,0),new U(400,0,0)],!1),t=new dl(e,300,10,10,!1),i=new Dn({color:3359812,side:Pt,opacity:1,clearcoat:.2,transparent:!0}),o=new He(t,i);return e.closed=!0,o.castShadow=!0,o.receiveShadow=!0,o}window.splinetube=j8;function ige(n){let e=[],t=new dl,i=new Dn({color:3359812,side:Pt,opacity:1,clearcoat:.5,transparent:!0}),o=new He(t,i),a=()=>{let l=new Qc(e.map(c=>Gr(...c)),!1);t=new dl(l,o.lseg,2,o.rseg,!1),o.geometry.copy(t)};return o.lseg=100,o.rseg=10,o.pts=e,o.retube=a,o.addpt=(l,c,u)=>{e.push([l,c,u]),e.length>1&&a()},o.castShadow=!0,o.receiveShadow=!0,o}function J8(n,e,t,i,o,a,l){var c=new He(new Nr(e,t,i,o,a,l),new Dn({color:16777215,transparent:!0}));return c.castShadow=!0,c.receiveShadow=!0,c}window.cylinder=J8;function rge(){let n=new xo({depthTest:!0,transparent:!0,side:Pt,uniforms:{ambientLightColor:{type:"vec3",value:new De("#878FA3")},diffuse:{type:"vec3",value:new De("#7F7F7F")},opacity:{type:"float",value:1},shininess:{type:"float",value:32},specular:{type:"vec3",value:new De("#FFFFFF")},directionalLights:{type:"vec3",value:null},pointLights:{type:"vec3",value:null},lightProbe:{type:"vec3",value:null},directionalLightShadows:{type:"vec3",value:null},spotLights:{type:"vec3",value:null},spotLightShadows:{type:"vec3",value:null},rectAreaLights:{type:"vec3",value:null},ltc_1:{type:"vec3",value:null},ltc_2:{type:"vec3",value:null},pointLightShadows:{type:"vec3",value:null},hemisphereLights:{type:"vec3",value:null},directionalShadowMap:{type:"vec3",value:null},directionalShadowMatrix:{type:"vec3",value:null},spotShadowMap:{type:"vec3",value:null},spotShadowMatrix:{type:"vec3",value:null},pointShadowMap:{type:"vec3",value:null},pointShadowMatrix:{type:"vec3",value:null}},extensions:{derivatives:!0},vertexShader:`#version 300 es
        in	vec3    position;
        in  vec3    normal;
        in	vec2    uv;
        
        uniform     mat4    modelMatrix;
        uniform     mat4    viewMatrix;
        uniform     mat4    projectionMatrix;

        out vec3    fragVPos;  // View Space Position, THREEJS DOES LIGHTING IN VIEW SPACE
        out vec3    fragWPos;  // World Space Position
        out vec3    fragNorm;
        out vec2    fragUV;
        
        void main(){
            vec4 wPos 	        = modelMatrix * vec4( position, 1.0 );  // World Space
            vec4 vPos           = viewMatrix * wPos;                    // View Space
            
            fragUV              = uv;
            fragWPos            = wPos.xyz;
            fragVPos            = vPos.xyz;
            fragNorm            = ( modelMatrix * vec4( normal, 0.0 ) ).xyz;

            gl_Position			= projectionMatrix * vPos;
        }`,fragmentShader:`#version 300 es
        precision mediump float;

        uniform vec3 cameraPosition;

        in  vec3    fragVPos;
        in  vec3    fragWPos;
        in  vec3    fragNorm;
        in  vec2    fragUV;
        out vec4    outColor;

        // #####################################################################
        // THREE.JS LIGHTING - REQUIRED FOR MATERIAL.LIGHTS = TRUE

        uniform vec3  ambientLightColor;
        uniform vec3  diffuse;
        uniform float opacity;
        uniform float shininess;
        uniform vec3  specular;

        struct IncidentLight {
            vec3 color;
            vec3 direction;
            bool visible;
        };

        struct Material{
            vec3 diffuseColor;
            vec3 specularColor;
            float specularShininess;
            float specularStrength;
        };

        struct ReflectedLight {
            vec3 directDiffuse;
            vec3 directSpecular;
        };

        struct GeometricContext{
            vec3 position;
            vec3 normal;
            vec3 viewDir;
        };

        float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
            #if defined ( PHYSICALLY_CORRECT_LIGHTS )
                float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
                if ( cutoffDistance > 0.0 ) {
                    distanceFalloff *= pow2( clamp( 1.0 - pow4( lightDistance / cutoffDistance, 0.0, 1.0 ) ) );
                }
                return distanceFalloff;
            #else
                if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
                    return pow( clamp( - lightDistance / cutoffDistance + 1.0, 0.0, 1.0 ), decayExponent );
                }
                return 1.0;
            #endif
        }

        // --------------------------------------
        #if NUM_DIR_LIGHTS > 0
            struct DirectionalLight {
                vec3 direction;
                vec3 color;
            };
            
            uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
            
            void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
                light.color     = directionalLight.color;
                light.direction = directionalLight.direction;
                light.visible   = true;
            }
        #endif

        // --------------------------------------
        #if NUM_POINT_LIGHTS > 0
            struct PointLight {
                vec3 position;
                vec3 color;
                float distance;
                float decay;
            };
                
            uniform PointLight pointLights[ NUM_POINT_LIGHTS ];

            void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
                vec3 lVector         = pointLight.position - geometry.position;
                light.direction      = normalize( lVector );
                float lightDistance  = length( lVector );
                light.color          = pointLight.color;
                light.color         *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
                light.visible       = ( light.color != vec3( 0.0 ) );
            }
        #endif

        // #####################################################################

        // THREE TONE TOON LIGHTING
        void RE_Direct( const in IncidentLight directLight, const in GeometricContext geometry, const in Material material, inout ReflectedLight reflectedLight ) {
            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Three tone toon shading
            // Basically, full shadow when the light and the surface dot product is under 0.33 (step gives 0.0)
            // Smooth partial shadow when dot product is between 0.33 and 0.66 (step gives 0.5 due to the remap)
            // Smooth enlightment when dot product is above 0.66
            
            float dotNL = max( 0.0, dot( directLight.direction, geometry.normal ) );
            float fw    = fwidth( dotNL );
            //dotNL    *= ( step( 0.33, dotNL ) + step( 0.66, dotNL) ) * 0.5; // If remapping 2 to 1, just cut in half.
            dotNL      *= ( smoothstep( 0.33-fw, 0.33+fw, dotNL ) + smoothstep( 0.66-fw, 0.66+fw, dotNL ) ) * 0.5;  // * 0.5 is to remap 0-2 to 0-1
            
            reflectedLight.directDiffuse += dotNL * directLight.color;

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Phong specular
            vec3 reflectDir = normalize( reflect( -directLight.direction, geometry.normal ) );
            float specular  = max( 0.0, dot( geometry.viewDir, reflectDir ) );
            specular        = pow( specular, material.specularShininess );
            
            reflectedLight.directSpecular += material.specularColor * specular * material.specularStrength;
        }

        // Ground and Sky Reflected Light
        vec3 RE_HemiLight( const in GeometricContext geometry ){
            float hemiMix       = geometry.normal.y * 0.5 + 0.5;
            vec3 skyColour      = vec3( 0.0, 0.3, 0.6 );
            vec3 groundColour   = vec3( 0.6, 0.3, 0.1 );
            vec3 Light          = mix( groundColour, skyColour, hemiMix );
            return Light;
        }

        float RE_HemiRimFresnel( const in GeometricContext geometry ){
            // Hemi rim lighting Fresnel
            float fresnel = 1.0 -  max( 0.0, dot( geometry.viewDir, geometry.normal ) );
            //fresnel      *= smoothstep( 0.6, 0.61, pow( fresnel, 2.0 ) );

            // Add a bit of smoothly
            float fwfresnel = fwidth( fresnel );
            fresnel        *= smoothstep( 0.6-fwfresnel, 0.62+fwfresnel, pow( fresnel, 2.0 ) );
            return fresnel;
        }

        // #####################################################################
        void main(){

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Geometry Related Data
            GeometricContext geometry;
            geometry.position           = fragVPos; // MUST USE VIEW SPACE POSITION, 3JS DOES LIGHTING THERE INSTEAD OF WORLD SPACE
            geometry.normal             = normalize( fragNorm );
            geometry.viewDir            = normalize( cameraPosition - fragVPos );

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Material Related Data
            Material material;
            material.diffuseColor       = diffuse;
            material.specularColor      = specular;
            material.specularShininess  = shininess;
            material.specularStrength   = 1.0;

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // Execute Direction and Point Lights
            ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ) );
            IncidentLight directLight;

            #if ( NUM_DIR_LIGHTS > 0 )
                DirectionalLight directionalLight;

                #pragma unroll_loop_start
                for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
                    directionalLight = directionalLights[ i ];
                    getDirectionalLightInfo( directionalLight, geometry, directLight );
                    RE_Direct( directLight, geometry, material, reflectedLight );
                }
                #pragma unroll_loop_end
            #endif

            #if ( NUM_POINT_LIGHTS > 0 )
                PointLight pointLight;

                #pragma unroll_loop_start
                for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
                    pointLight = pointLights[ i ];
                    getPointLightInfo( pointLight, geometry, directLight );
                    RE_Direct( directLight, geometry, material, reflectedLight );
                }
                #pragma unroll_loop_end
            #endif

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // EXTRA LIGHTS
            vec3 hemiLight  = RE_HemiLight( geometry );         // Reflective light from Ground and Sky
            float fresnel   = RE_HemiRimFresnel( geometry );    // Fresnel

            // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            // PUT IT ALL TOGETHER
            vec3 colour = material.diffuseColor *                                             // Start with a specific color
                        ( reflectedLight.directDiffuse + hemiLight * ( 0.2 + fresnel ) ) +    // Merging All the Light Models
                        reflectedLight.directSpecular;                                        // Add Specular on top
            
            // Gamma correction equivalent to the linearTosRGB
            colour      = pow( colour, vec3( 1.0/2.2 ) );

            outColor    = vec4( colour, 1.0 );
        }`});return n.lights=!0,n}window.customMaterial=rge;function sge(n){return new xo({depthTest:!0,transparent:!0,side:Pt,uniforms:{tex01:{type:"sampler2D",value:n}},extensions:{derivatives:!0},vertexShader:`#version 300 es
        in	vec3    position;
        in  vec3    normal;
        in	vec2    uv;
        
        uniform     mat4    modelMatrix;
        uniform     mat4    viewMatrix;
        uniform     mat4    projectionMatrix;

        out vec3    fragWPos;  // World Space Position
        out vec3    fragNorm;
        out vec2    fragUV;
        
        void main(){
            vec4 wPos 	        = modelMatrix * vec4( position, 1.0 );  // World Space
            vec4 vPos           = viewMatrix * wPos;                    // View Space
            
            fragUV              = uv;
            fragWPos            = wPos.xyz;
            fragNorm            = ( modelMatrix * vec4( normal, 0.0 ) ).xyz;

            gl_Position			= projectionMatrix * vPos;
        }`,fragmentShader:`#version 300 es
        precision mediump float;
        
        uniform sampler2D tex01;
        uniform vec3 cameraPosition;

        in  vec3    fragWPos;
        in  vec3    fragNorm;
        in  vec2    fragUV;
        out vec4    outColor;

        // #####################################################################
        void main(){
            // ----------------------------
            vec3 norm   = normalize( fragNorm );

            // ----------------------------
            // https://www.clicktorelease.com/blog/creating-spherical-environment-mapping-shader/
            // This creates a pinch artifact in the back of meshes
            //vec3 camDir	= normalize( fragWPos - cameraPosition );
            //vec3 refDir 	= camDir - 2.0 * dot( norm, camDir ) * norm; // Reflect Equation
		    //vec3 refDir 	= reflect( camDir, norm );	                 // Or use built in Equation

            //float m = 2.0 * sqrt( pow( refDir.x, 2.0 ) + pow( refDir.y, 2.0 ) + pow( refDir.z + 1.0, 2.0 ) );
            //float m = 2.0 * sqrt( refDir.x*refDir.x + refDir.y*refDir.y + (refDir.z+1.0)*(refDir.z+1.0) );
            //float m = 2.8284271247461903 * sqrt( refDir.z + 1.0 );
            //vec2 uv = refDir.xy / m + 0.5;

            // ----------------------------
            // ThreeJS's way
            // https://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderLib/meshmatcap.glsl.js#L82

            /* NOTE:
            Trying to understand the math, its trying to create an 3 direction axes with the cam direction being forward
            First is gets a perpendicular direction of the camera by rotating by -90 degrees then projected to XZ plane, creating a Right Axis
            Then using cross product to get the Up Axis.
            Since eveything is normalized, can determing the XY position the meshe's normal is within this Axes, produces values -1 to 1
            Then Remapping the values from -1 to 1 into 0 to 1 for UV goodness.
            */

            vec3 camDir = normalize( cameraPosition );
	        vec3 x      = normalize( vec3( camDir.z, 0.0, -camDir.x ) );        // NOTE: This looks like a -90 YAxis rotation then projected down to XZ plane?
	        vec3 y      = cross( camDir, x );
	        vec2 uv     = vec2( dot( x, norm ), dot( y, norm ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks

            // ----------------------------
            // Very simple, but the lighting becomes very static & doesn't seem to move in relation to the camera
            //vec2 uv = norm.xy * 0.5 + vec2( 0.5 );

            // ----------------------------
            outColor = texture( tex01, uv ); //* base_color;
        }`})}window.customMaterial2=sge;window.CELL=CD;window.EXT=EB;window.REPL=e_;window.UTIL=KI;window.FB=kR;function q8(n){console.log(n,Date.now()-t0)}window.uptime=q8;function oge(n){return localStorage.getItem(n)}function age(n,e){return localStorage.setItem(n,e)}function lge(){return"{xuid#"+Date.now()+"#"+Math.floor(Math.random()*1e8)+"}"}var IB=oge("xuid");IB||(age("xuid",IB=lge()),console.warn("xuid",IB));async function cge(){q8("boot"),Age("VM.min.js",()=>{let n=new fu(document.querySelector("#repl"));n.eval('(begin (load "~~/scm/init.scm") (println ";;; :sentinel:"))'),window.repl=n})}var AC;function uge(){return AC=window.lim=new sA(document.querySelector("#limina")),ib("c0"),AC}function hge(n){AC&&AC.unload()}window.nlim=uge;window.addEventListener("load",cge);window.addEventListener("unload",hge);function Age(n,e){var t=document.createElement("script");t.type="application/javascript",t.onload=e,t.src=n,document.getElementsByTagName("head")[0].appendChild(t)}var hC;hC||(hC=console.log,window.native_console_log=hC);var $8=(...n)=>{hC(...n),window.gambit_log_function&&window.gambit_log_function(...n)};window.hacked_console_log=$8;console.log=$8;window.boop=(...n)=>console.error("boop",...n);var Yu=navigator.userAgent,fC=Yu.indexOf("Chrome")>-1,SIe=Yu.indexOf("MSIE")>-1,fge=Yu.indexOf("Firefox")>-1,MB=Yu.indexOf("Safari")>-1,eX=Yu.indexOf("AppleWebKit")>-1,dge=Yu.indexOf("iPhone OS")>-1,pge=eX&&dge,mge=Yu.toLowerCase().indexOf("op")>-1;fC&&MB&&(MB=!1);fC&&mge&&(fC=!1);window.is_chrome=fC;window.is_safari=MB;window.is_firefox=fge;window.is_webkit=eX;window.is_ioswebkit=pge;window.r=Math.random;window.fr=()=>Math.floor(5*r());})();
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/
/*! Bundled license information:

object.observe/dist/object-observe.js:
  (*!
   * Object.observe polyfill - v0.2.4
   * by Massimo Artizzu (MaxArt2501)
   *
   * https://github.com/MaxArt2501/object-observe
   *
   * Licensed under the MIT License
   * See LICENSE for details
   *)

observed/lib/change.js:
  (*!
   * Change object constructor
   *
   * The `change` object passed to Object.observe callbacks
   * is immutable so we create a new one to modify.
   *)

observed/lib/observed.js:
  (*!
   * Creates an Object.observe `onchange` listener
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

rasterizehtml/dist/rasterizeHTML.js:
  (*! rasterizeHTML.js - v1.3.1 - 2022-01-16
  * http://www.github.com/cburgmer/rasterizeHTML.js
  * Copyright (c) 2022 Christoph Burgmer; Licensed MIT *)

three/build/three.module.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/logger/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-e24386e7.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

troika-three-text/dist/troika-three-text.esm.js:
  (*!
  Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
  Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
  *)
  (*!
  Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
  (https://github.com/101arrowz/fflate) for use in Troika text rendering. 
  Original licenses apply: 
  - fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
  - woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
  *)
*/
